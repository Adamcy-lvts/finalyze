import{d as Z,b as F,T as V,B as j,I as X,a as c,o as l,w as r,F as a,K as o,c as d,N as p,U as _,u as t,M as u,H as m,a1 as L,n as I,L as b,ac as ee,af as N}from"./app-D4j7Ev_F.js";import{C as te,B as se,_ as ae}from"./AdminLayout.vue_vue_type_script_setup_true_lang-BTQXMGla.js";import{_ as w,a as k}from"./CardContent.vue_vue_type_script_setup_true_lang-UOlpXwUF.js";import{_ as R}from"./CardDescription.vue_vue_type_script_setup_true_lang-B81gzw1T.js";import{_ as $,a as C}from"./CardTitle.vue_vue_type_script_setup_true_lang-sNnBODO9.js";import{j as re,u as oe,d as le,_ as ne,b as z,e as de,F as B,a as ie,c as H,i as ue}from"./TableHeader.vue_vue_type_script_setup_true_lang-BjlP6oaA.js";import{c as v,_ as y}from"./index-DFYl4CLt.js";import{c as ce,d as me,e as fe,f as pe,g as xe}from"./UserInfo.vue_vue_type_script_setup_true_lang-fB50Q5dA.js";import{U as ge}from"./users-Cwtldqf3.js";import{D as _e}from"./dollar-sign-Ds_9Kqpq.js";import{F as ye}from"./file-text-CHud3CyW.js";import{T as ve}from"./type-BkIKPHeM.js";import{C as he}from"./chart-column-s6k3isZx.js";import{A as be}from"./activity-CJUqBjcT.js";import{F as we}from"./filter-D7OedSF3.js";import{C as O}from"./check-CPjPdyg3.js";import{L as ke}from"./loader-circle-75qkzb_p.js";import"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-IZ1ICnnZ.js";import"./useForwardExpose-DjZUvBl_.js";import"./index-C7Vr7qxw.js";import"./VisuallyHidden-N-Cfzidp.js";import"./Presence-Qj1FFS9B.js";import"./list-CyHbd_kc.js";import"./log-out-BtOGtq1Q.js";import"./x-DrAmDi_O.js";/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $e=v("ArrowDownRightIcon",[["path",{d:"m7 7 10 10",key:"1fmybs"}],["path",{d:"M17 7v10H7",key:"6fjiku"}]]);/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ce=v("ArrowUpRightIcon",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]);/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ae=v("DatabaseIcon",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const De=v("InboxIcon",[["polyline",{points:"22 12 16 12 14 15 10 15 8 12 2 12",key:"o97t9d"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}]]);/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Me=v("ServerIcon",[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]]),je={key:0,class:"absolute -top-1 -right-1 flex h-4 w-4 items-center justify-center rounded-full bg-destructive text-[10px] text-destructive-foreground ring-2 ring-background animate-pulse"},Ie={class:"grid gap-4 md:grid-cols-2 lg:grid-cols-4 mb-8"},Ne={class:"text-2xl font-bold"},Re={class:"text-xs text-muted-foreground mt-1 flex items-center gap-1"},ze={class:"grid gap-4 md:grid-cols-2 lg:grid-cols-7"},Se={class:"h-[350px] w-full flex items-center justify-center rounded-md border border-dashed border-border bg-muted/20"},Te={class:"flex flex-col items-center gap-2 text-muted-foreground"},Ue={class:"space-y-6"},Fe={class:"flex items-center gap-3"},Ve={class:"flex h-9 w-9 items-center justify-center rounded-full bg-muted/50 border border-border"},Le={class:"space-y-1"},Be={class:"text-sm font-medium leading-none"},He={class:"text-xs text-muted-foreground"},Oe={class:"mt-8"},Pe={class:"flex items-center justify-between"},qe={class:"rounded-md border border-border"},Ee={class:"flex items-center justify-between"},Je={class:"space-y-1"},Ye={key:0},Ge={class:"flex-1 overflow-y-auto custom-scrollbar"},Ke={key:0,class:"flex flex-col items-center justify-center h-40 space-y-3"},Qe={key:1,class:"flex flex-col items-center justify-center h-full text-center p-8 space-y-4"},We={class:"rounded-full bg-muted/50 p-6 ring-1 ring-border shadow-sm"},Ze={key:2,class:"divide-y divide-border/40"},Xe={class:"flex items-start justify-between gap-3"},et={class:"flex items-center gap-2"},tt={class:"text-sm font-semibold text-foreground leading-none"},st={class:"text-[10px] text-muted-foreground whitespace-nowrap"},at={class:"pl-4"},rt={key:0,class:"text-xs text-muted-foreground leading-relaxed"},ot={key:0,class:"flex flex-wrap gap-2 mt-1"},lt={key:1,class:"text-xs text-muted-foreground italic"},nt={class:"pl-4 flex items-center justify-between mt-1"},dt={key:0,class:"flex gap-2"},it={key:1},Tt=Z({__name:"Dashboard",props:{stats:{},recentActivity:{}},setup(P){const f=P,x=n=>Number(n??0).toLocaleString(),q=F(()=>[{title:"Total Users",value:x(f.stats.users.total),icon:ge,trend:`+${x(f.stats.users.today)}`,trendUp:!0},{title:"Total Revenue",value:`₦${x(f.stats.revenue.total)}`,icon:_e,trend:`+₦${x(f.stats.revenue.today)}`,trendUp:!0},{title:"Active Projects",value:x(f.stats.projects.total),icon:ye,trend:`+${x(f.stats.projects.today)}`,trendUp:!0},{title:"Words Generated",value:x(f.stats.words.total),icon:ve,trend:`+${x(f.stats.words.today)}`,trendUp:!0}]),E=[{name:"Job Queue",description:"Processing background tasks",icon:be},{name:"OpenAI API",description:"Content generation service",icon:te},{name:"Database",description:"Primary data storage",icon:Ae},{name:"Cache",description:"Redis cache cluster",icon:Me}],S=re(),T=[S.accessor("message",{header:"Activity",cell:n=>V("div",{class:"font-medium text-foreground"},n.getValue())}),S.accessor("time",{header:"Time",cell:n=>V("div",{class:"text-muted-foreground text-sm"},n.getValue())})],A=oe({get data(){return f.recentActivity},columns:T,getCoreRowModel:ue()}),D=j(!1),g=j([]),M=j(!1),h=F(()=>g.value.filter(n=>!n.is_read&&!n.read_at).length),U=async()=>{M.value=!0;try{const{data:n}=await N.get("/admin/notifications?format=json");g.value=n.notifications||[]}catch(n){console.error("Failed to fetch notifications:",n)}finally{M.value=!1}},J=()=>{D.value=!0,U()},Y=async n=>{try{await N.post(`/admin/notifications/${n}/read`);const s=g.value.findIndex(e=>e.id===n);s!==-1&&(g.value[s].is_read=!0,g.value[s].read_at=new Date().toISOString())}catch(s){console.error("Failed to mark as read:",s)}},G=async()=>{try{await N.post("/admin/notifications/read-all"),g.value.forEach(n=>{n.is_read=!0,n.read_at=new Date().toISOString()})}catch(n){console.error("Failed to mark all as read:",n)}},K=n=>{const s=new Date(n),i=Math.floor((new Date().getTime()-s.getTime())/1e3);return i<60?"Just now":i<3600?`${Math.floor(i/60)}m ago`:i<86400?`${Math.floor(i/3600)}h ago`:s.toLocaleDateString()},Q=n=>n.split("\\").pop()?.replace(/([A-Z])/g," $1").trim()||"Notification";return X(()=>{U()}),(n,s)=>(l(),c(ae,null,{title:r(()=>[...s[1]||(s[1]=[a("div",{class:"flex flex-col"},[a("h2",{class:"text-2xl font-bold tracking-tight text-foreground"},"Dashboard"),a("p",{class:"text-muted-foreground text-sm"},"Overview of your system's performance.")],-1)])]),actions:r(()=>[o(t(y),{variant:"outline",size:"icon",class:"relative",onClick:J},{default:r(()=>[o(t(se),{class:"h-4 w-4"}),h.value>0?(l(),d("span",je,m(h.value),1)):b("",!0),s[2]||(s[2]=a("span",{class:"sr-only"},"Notifications",-1))]),_:1})]),default:r(()=>[a("div",Ie,[(l(!0),d(p,null,_(q.value,e=>(l(),c(t(w),{key:e.title,class:"bg-card text-card-foreground border-border/50 shadow-sm hover:shadow-md transition-all duration-200"},{default:r(()=>[o(t($),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:r(()=>[o(t(C),{class:"text-sm font-medium text-muted-foreground"},{default:r(()=>[u(m(e.title),1)]),_:2},1024),(l(),c(L(e.icon),{class:"h-4 w-4 text-muted-foreground"}))]),_:2},1024),o(t(k),null,{default:r(()=>[a("div",Ne,m(e.value),1),a("p",Re,[a("span",{class:I([e.trendUp?"text-emerald-500":"text-rose-500","flex items-center"])},[e.trendUp?(l(),c(t(Ce),{key:0,class:"h-3 w-3 mr-0.5"})):(l(),c(t($e),{key:1,class:"h-3 w-3 mr-0.5"})),u(" "+m(e.trend),1)],2),s[3]||(s[3]=a("span",{class:"opacity-70"},"from yesterday",-1))])]),_:2},1024)]),_:2},1024))),128))]),a("div",ze,[o(t(w),{class:"col-span-4 border-border/50 shadow-sm"},{default:r(()=>[o(t($),null,{default:r(()=>[o(t(C),null,{default:r(()=>[...s[4]||(s[4]=[u("Revenue Overview",-1)])]),_:1}),o(t(R),null,{default:r(()=>[...s[5]||(s[5]=[u("Monthly revenue breakdown for the current year.",-1)])]),_:1})]),_:1}),o(t(k),{class:"pl-2"},{default:r(()=>[a("div",Se,[a("div",Te,[o(t(he),{class:"h-10 w-10 opacity-50"}),s[6]||(s[6]=a("span",{class:"text-sm font-medium"},"Chart Visualization Placeholder",-1))])])]),_:1})]),_:1}),o(t(w),{class:"col-span-3 border-border/50 shadow-sm flex flex-col"},{default:r(()=>[o(t($),null,{default:r(()=>[o(t(C),null,{default:r(()=>[...s[7]||(s[7]=[u("System Health",-1)])]),_:1}),o(t(R),null,{default:r(()=>[...s[8]||(s[8]=[u("Real-time status of core services.",-1)])]),_:1})]),_:1}),o(t(k),{class:"flex-1"},{default:r(()=>[a("div",Ue,[(l(),d(p,null,_(E,(e,i)=>a("div",{key:i,class:"flex items-center justify-between"},[a("div",Fe,[a("div",Ve,[(l(),c(L(e.icon),{class:"h-4 w-4 text-foreground"}))]),a("div",Le,[a("p",Be,m(e.name),1),a("p",He,m(e.description),1)])]),s[9]||(s[9]=a("div",{class:"flex items-center gap-2"},[a("span",{class:"relative flex h-2.5 w-2.5"},[a("span",{class:"animate-ping absolute inline-flex h-full w-full rounded-full bg-emerald-400 opacity-75"}),a("span",{class:"relative inline-flex rounded-full h-2.5 w-2.5 bg-emerald-500"})]),a("span",{class:"text-xs font-medium text-emerald-600 dark:text-emerald-400"},"Operational")],-1))])),64))])]),_:1})]),_:1})]),a("div",Oe,[o(t(w),{class:"border-border/50 shadow-sm"},{default:r(()=>[o(t($),null,{default:r(()=>[a("div",Pe,[a("div",null,[o(t(C),null,{default:r(()=>[...s[10]||(s[10]=[u("Recent Activity",-1)])]),_:1}),o(t(R),null,{default:r(()=>[...s[11]||(s[11]=[u("Latest actions performed across the platform.",-1)])]),_:1})]),o(t(y),{variant:"outline",size:"sm",class:"h-8 gap-1"},{default:r(()=>[o(t(we),{class:"h-3.5 w-3.5"}),s[12]||(s[12]=a("span",{class:"sr-only sm:not-sr-only sm:whitespace-nowrap"},"Filter",-1))]),_:1})])]),_:1}),o(t(k),null,{default:r(()=>[a("div",qe,[o(t(le),null,{default:r(()=>[o(t(ne),null,{default:r(()=>[(l(!0),d(p,null,_(t(A).getHeaderGroups(),e=>(l(),c(t(z),{key:e.id},{default:r(()=>[(l(!0),d(p,null,_(e.headers,i=>(l(),c(t(de),{key:i.id},{default:r(()=>[i.isPlaceholder?b("",!0):(l(),c(t(B),{key:0,render:i.column.columnDef.header,props:i.getContext()},null,8,["render","props"]))]),_:2},1024))),128))]),_:2},1024))),128))]),_:1}),o(t(ie),null,{default:r(()=>[t(A).getRowModel().rows?.length?(l(!0),d(p,{key:0},_(t(A).getRowModel().rows,e=>(l(),c(t(z),{key:e.id,"data-state":e.getIsSelected()?"selected":void 0},{default:r(()=>[(l(!0),d(p,null,_(e.getVisibleCells(),i=>(l(),c(t(H),{key:i.id},{default:r(()=>[o(t(B),{render:i.column.columnDef.cell,props:i.getContext()},null,8,["render","props"])]),_:2},1024))),128))]),_:2},1032,["data-state"]))),128)):(l(),c(t(z),{key:1},{default:r(()=>[o(t(H),{colspan:T.length,class:"h-24 text-center"},{default:r(()=>[...s[13]||(s[13]=[u(" No results. ",-1)])]),_:1},8,["colspan"])]),_:1}))]),_:1})]),_:1})])]),_:1})]),_:1})]),o(t(ce),{open:D.value,"onUpdate:open":s[0]||(s[0]=e=>D.value=e)},{default:r(()=>[o(t(me),{class:"w-full sm:max-w-md p-0 flex flex-col h-full bg-background/95 backdrop-blur-sm shadow-2xl border-l-primary/10"},{default:r(()=>[o(t(fe),{class:"px-6 py-4 border-b bg-muted/30 sticky top-0 z-10"},{default:r(()=>[a("div",Ee,[a("div",Je,[o(t(pe),{class:"text-xl font-bold bg-gradient-to-r from-primary to-primary/60 bg-clip-text text-transparent"},{default:r(()=>[...s[14]||(s[14]=[u(" Notifications",-1)])]),_:1}),o(t(xe),null,{default:r(()=>[u(" You have "+m(h.value)+" unread messages ",1)]),_:1})]),h.value>0?(l(),d("div",Ye,[o(t(y),{variant:"ghost",size:"xs",class:"h-8 text-xs hover:bg-primary/10 hover:text-primary transition-colors",onClick:G},{default:r(()=>[o(t(O),{class:"mr-1.5 h-3.5 w-3.5"}),s[15]||(s[15]=u(" Mark all read ",-1))]),_:1})])):b("",!0)])]),_:1}),a("div",Ge,[M.value?(l(),d("div",Ke,[o(t(ke),{class:"h-8 w-8 animate-spin text-primary/50"}),s[16]||(s[16]=a("p",{class:"text-sm text-muted-foreground animate-pulse"},"Loading updates...",-1))])):g.value.length===0?(l(),d("div",Qe,[a("div",We,[o(t(De),{class:"h-10 w-10 text-muted-foreground/50"})]),s[17]||(s[17]=a("h3",{class:"text-lg font-medium text-foreground"},"All caught up!",-1)),s[18]||(s[18]=a("p",{class:"text-sm text-muted-foreground max-w-[15rem]"},"You don't have any new notifications at the moment. ",-1))])):(l(),d("div",Ze,[(l(!0),d(p,null,_(g.value,e=>(l(),d("div",{key:e.id,class:I(["group relative flex flex-col p-4 transition-all duration-200 hover:bg-muted/40 gap-3",{"bg-primary/5":!e.is_read&&!e.read_at}])},[a("div",Xe,[a("div",et,[a("div",{class:I(["h-2 w-2 rounded-full shrink-0",{"bg-rose-500":e.severity==="critical","bg-amber-500":e.severity==="warning","bg-blue-500":e.severity==="info"||!e.severity,"bg-emerald-500":e.severity==="success","animate-pulse":!e.is_read&&!e.read_at}])},null,2),a("h4",tt,m(e.title||e.data?.title||Q(e.type)),1)]),a("span",st,m(K(e.created_at)),1)]),a("div",at,[e.message||e.data?.message?(l(),d("p",rt,[(e.message||e.data?.message).includes("|")?(l(),d("span",ot,[(l(!0),d(p,null,_((e.message||e.data?.message).split("|"),(i,W)=>(l(),d("span",{key:W,class:"inline-flex items-center px-2 py-1 rounded-md bg-background border border-border text-[10px] font-medium"},m(i.trim()),1))),128))])):(l(),d(p,{key:1},[u(m(e.message||e.data?.message),1)],64))])):(l(),d("p",lt,"No details provided."))]),a("div",nt,[e.data?.action_url?(l(),d("div",dt,[o(t(y),{variant:"outline",size:"xs",class:"h-6 text-[10px]",as:"a",href:e.data.action_url},{default:r(()=>[u(m(e.data.action_text||"View Details"),1)]),_:2},1032,["href"])])):(l(),d("div",it)),!e.is_read&&!e.read_at?(l(),c(t(y),{key:2,variant:"ghost",size:"xs",class:"h-6 text-[10px] gap-1 hover:text-primary transition-opacity opacity-0 group-hover:opacity-100",onClick:ee(i=>Y(e.id),["stop"])},{default:r(()=>[o(t(O),{class:"h-3 w-3"}),s[19]||(s[19]=u(" Mark as read ",-1))]),_:2},1032,["onClick"])):b("",!0)])],2))),128))]))])]),_:1})]),_:1},8,["open"])]),_:1}))}});export{Tt as default};
