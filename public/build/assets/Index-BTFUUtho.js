import{bt as Y,dS as S,cn as C,co as v,cp as a,cq as s,bE as e,cr as c,dT as le,cs as r,gx as ne,dY as de,gy as ue,dO as ie,cA as me,dU as fe,ce as H,cl as P,bx as f,dV as ce,ck as J,bs as V,dE as O,bu as A,dl as pe,ct as p,gz as _e,gA as ve,cB as W,cG as k,du as F,dg as ge}from"./vendor-DTjPma1U.js";import{_ as we}from"./AdminLayout.vue_vue_type_script_setup_true_lang-F29Dh3nm.js";import{_ as R,a as j}from"./CardContent.vue_vue_type_script_setup_true_lang-I4CEGKdn.js";import{_ as be}from"./CardDescription.vue_vue_type_script_setup_true_lang-CWoegFai.js";import{_ as B,a as K}from"./CardTitle.vue_vue_type_script_setup_true_lang-CV0UXs4e.js";import{_ as xe}from"./DataTable.vue_vue_type_script_setup_true_lang-BXCtcsa1.js";import{_ as x}from"./index-mwxrBKxi.js";import{_ as X}from"./index-3KGx5n4o.js";import{_ as ye,a as $e,b as ke,c as U,d as Ce,e as Ve}from"./Sonner.vue_vue_type_script_setup_true_lang-D0ynKKgD.js";import{_ as L,a as I}from"./DialogContent.vue_vue_type_script_setup_true_lang-3pmUscSv.js";import{_ as M}from"./DialogDescription.vue_vue_type_script_setup_true_lang-krf9iH0t.js";import{_ as q}from"./DialogFooter.vue_vue_type_script_setup_true_lang-Djbi9e8D.js";import{_ as z,a as G}from"./DialogTitle.vue_vue_type_script_setup_true_lang-DT1UgW8j.js";import{_ as E}from"./Input.vue_vue_type_script_setup_true_lang-DAeY8mMm.js";import{_ as D}from"./Label.vue_vue_type_script_setup_true_lang-D84UGLqY.js";import{_ as Ue}from"./Textarea.vue_vue_type_script_setup_true_lang-B2qCjWbq.js";import{_ as Se,a as Ae,b as De,c as Pe,d as We,e as Re,f as je,g as Be}from"./AlertDialogTitle.vue_vue_type_script_setup_true_lang-DLCPkSzL.js";import"./UserInfo.vue_vue_type_script_setup_true_lang-tVoAfrlY.js";import"./TooltipTrigger.vue_vue_type_script_setup_true_lang-DunnpUO7.js";import"./TableHeader.vue_vue_type_script_setup_true_lang-KafZe9uV.js";const Ke=Y({__name:"UserActions",props:{user:{}},setup(l){const w=l,N=S("onResetPassword"),T=S("onAddWords"),n=S("onDeductWords"),y=S("onSuspend"),b=S("onDelete"),$=()=>{confirm(`Unsuspend ${w.user.name}?`)&&H.post(P("admin.users.unban",{user:w.user.id}),{},{preserveScroll:!0})};return(_,o)=>(v(),C(e(Ve),null,{default:a(()=>[s(e(ye),{"as-child":""},{default:a(()=>[s(e(x),{variant:"ghost",class:"h-8 w-8 p-0"},{default:a(()=>[o[5]||(o[5]=c("span",{class:"sr-only"},"Open menu",-1)),s(e(le),{class:"h-4 w-4"})]),_:1})]),_:1}),s(e($e),{align:"end"},{default:a(()=>[s(e(ke),null,{default:a(()=>[...o[6]||(o[6]=[r("Actions",-1)])]),_:1}),s(e(U),{onClick:o[0]||(o[0]=m=>e(N)?.(_.user))},{default:a(()=>[s(e(ne),{class:"mr-2 h-4 w-4"}),o[7]||(o[7]=r(" Reset Password ",-1))]),_:1}),s(e(U),{onClick:o[1]||(o[1]=m=>e(T)?.(_.user))},{default:a(()=>[s(e(de),{class:"mr-2 h-4 w-4"}),o[8]||(o[8]=r(" Add Words ",-1))]),_:1}),s(e(U),{onClick:o[2]||(o[2]=m=>e(n)?.(_.user))},{default:a(()=>[s(e(ue),{class:"mr-2 h-4 w-4"}),o[9]||(o[9]=r(" Deduct Words ",-1))]),_:1}),s(e(Ce)),_.user.is_banned?(v(),C(e(U),{key:1,onClick:$,class:"text-emerald-600 focus:text-emerald-600 focus:bg-emerald-50"},{default:a(()=>[s(e(me),{class:"mr-2 h-4 w-4"}),o[11]||(o[11]=r(" Unsuspend ",-1))]),_:1})):(v(),C(e(U),{key:0,onClick:o[3]||(o[3]=m=>e(y)?.(_.user)),class:"text-amber-600 focus:text-amber-600 focus:bg-amber-50"},{default:a(()=>[s(e(ie),{class:"mr-2 h-4 w-4"}),o[10]||(o[10]=r(" Suspend ",-1))]),_:1})),s(e(U),{onClick:o[4]||(o[4]=m=>e(b)?.(_.user)),class:"text-rose-600 focus:text-rose-600 focus:bg-rose-50"},{default:a(()=>[s(e(fe),{class:"mr-2 h-4 w-4"}),o[12]||(o[12]=r(" Delete ",-1))]),_:1})]),_:1})]),_:1}))}}),Ee=[{accessorKey:"id",header:"ID",cell:({row:l})=>f("div",{class:"text-muted-foreground font-mono text-xs"},`#${l.getValue("id")}`)},{accessorKey:"name",header:"Name",cell:({row:l})=>f("div",{class:"font-medium text-foreground"},l.getValue("name"))},{accessorKey:"email",header:({column:l})=>f(x,{variant:"ghost",class:"-ml-2 text-xs hover:bg-muted/50",onClick:()=>l.toggleSorting(l.getIsSorted()==="asc")},()=>["Email",f(ce,{class:"ml-2 h-3 w-3"})]),cell:({row:l})=>f("div",{class:"text-muted-foreground"},l.getValue("email"))},{accessorKey:"package",header:"Package",cell:({row:l})=>f(X,{variant:"outline",class:"font-normal"},()=>l.getValue("package"))},{accessorKey:"word_balance",header:"Balance",cell:({row:l})=>f("div",{class:"font-mono text-xs"},l.getValue("word_balance").toLocaleString())},{accessorKey:"total_words_purchased",header:"Purchased",cell:({row:l})=>f("div",{class:"text-muted-foreground text-xs"},l.getValue("total_words_purchased").toLocaleString())},{accessorKey:"projects_count",header:()=>f("div",{class:"text-center"},"Projects"),cell:({row:l})=>f("div",{class:"text-center font-medium"},l.getValue("projects_count"))},{accessorKey:"payments_count",header:()=>f("div",{class:"text-center"},"Payments"),cell:({row:l})=>f("div",{class:"text-center font-medium"},l.getValue("payments_count"))},{accessorKey:"is_banned",header:"Status",cell:({row:l})=>{const w=l.getValue("is_banned");return f(X,{variant:w?"destructive":"secondary",class:w?"":"bg-emerald-500/15 text-emerald-600 hover:bg-emerald-500/25 border-emerald-500/20"},()=>w?"Banned":"Active")}},{accessorKey:"created_at",header:"Joined",cell:({row:l})=>f("div",{class:"text-muted-foreground text-sm"},new Date(l.getValue("created_at")).toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric"}))},{id:"actions",cell:({row:l})=>f(Ke,{user:l.original})}],Ne={class:"grid gap-4 md:grid-cols-3 mb-8"},Te={class:"text-2xl font-bold"},Oe={class:"text-2xl font-bold"},Fe={class:"text-2xl font-bold"},Le={class:"grid gap-4 py-4"},Ie={class:"space-y-2"},Me={key:0,class:"text-sm text-destructive"},qe={class:"space-y-2"},ze={class:"grid gap-4 py-4"},Ge={class:"space-y-2"},Je={key:0,class:"text-sm text-destructive"},Xe={class:"space-y-2"},Ye={key:0,class:"text-sm text-destructive"},He={class:"grid gap-4 py-4"},Qe={class:"space-y-2"},Ze={key:0,class:"text-sm text-destructive"},he={class:"font-semibold text-foreground"},xs=Y({__name:"Index",props:{users:{}},setup(l){const w=l,N=J(()=>w.users.data.filter(u=>!u.is_banned).length),T=J(()=>w.users.data.filter(u=>u.is_banned).length),n=V(null),y=V(!1),b=V(!1),$=V(!1),_=V(!1),o=V(!1),m=O({password:"",password_confirmation:""}),i=O({words:void 0,reason:""}),g=O({reason:""}),Q=u=>{n.value=u,m.reset(),m.clearErrors(),y.value=!0},Z=u=>{n.value=u,o.value=!1,i.reset(),i.clearErrors(),b.value=!0},h=u=>{n.value=u,o.value=!0,i.reset(),i.clearErrors(),b.value=!0},ee=u=>{n.value=u,g.reset(),g.clearErrors(),$.value=!0},se=u=>{n.value=u,_.value=!0};A("onResetPassword",Q),A("onAddWords",Z),A("onDeductWords",h),A("onSuspend",ee),A("onDelete",se);const te=()=>{n.value&&m.post(P("admin.users.reset-password",n.value.id),{onSuccess:()=>{y.value=!1,m.reset()}})},ae=()=>{if(!n.value)return;const u=Math.abs(Number(i.words));i.words=o.value?-u:u,i.post(P("admin.users.adjust-balance",n.value.id),{onSuccess:()=>{b.value=!1,i.reset()}})},oe=()=>{n.value&&g.post(P("admin.users.ban",n.value.id),{onSuccess:()=>{$.value=!1,g.reset()}})},re=()=>{n.value&&H.delete(P("admin.users.force-destroy",n.value.id),{onSuccess:()=>{_.value=!1,n.value=null}})};return(u,t)=>(v(),C(we,{title:"Users",subtitle:"Manage your platform's user base."},{default:a(()=>[c("div",Ne,[s(e(R),{class:"bg-card text-card-foreground border-border/50 shadow-sm"},{default:a(()=>[s(e(B),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:a(()=>[s(e(K),{class:"text-sm font-medium text-muted-foreground"},{default:a(()=>[...t[12]||(t[12]=[r("Total Users",-1)])]),_:1}),s(e(pe),{class:"h-4 w-4 text-muted-foreground"})]),_:1}),s(e(j),null,{default:a(()=>[c("div",Te,p(u.users.data.length),1)]),_:1})]),_:1}),s(e(R),{class:"bg-card text-card-foreground border-border/50 shadow-sm"},{default:a(()=>[s(e(B),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:a(()=>[s(e(K),{class:"text-sm font-medium text-muted-foreground"},{default:a(()=>[...t[13]||(t[13]=[r("Active Users",-1)])]),_:1}),s(e(_e),{class:"h-4 w-4 text-emerald-500"})]),_:1}),s(e(j),null,{default:a(()=>[c("div",Oe,p(N.value),1)]),_:1})]),_:1}),s(e(R),{class:"bg-card text-card-foreground border-border/50 shadow-sm"},{default:a(()=>[s(e(B),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:a(()=>[s(e(K),{class:"text-sm font-medium text-muted-foreground"},{default:a(()=>[...t[14]||(t[14]=[r("Banned Users",-1)])]),_:1}),s(e(ve),{class:"h-4 w-4 text-rose-500"})]),_:1}),s(e(j),null,{default:a(()=>[c("div",Fe,p(T.value),1)]),_:1})]),_:1})]),s(e(R),{class:"border border-border/50 bg-card shadow-sm"},{default:a(()=>[s(e(B),{class:"flex flex-row items-center justify-between pb-3"},{default:a(()=>[c("div",null,[s(e(K),{class:"text-base font-semibold text-foreground"},{default:a(()=>[...t[15]||(t[15]=[r("All Users",-1)])]),_:1}),s(e(be),null,{default:a(()=>[...t[16]||(t[16]=[r("A list of all registered users including their name, email, and status.",-1)])]),_:1})])]),_:1}),s(e(j),null,{default:a(()=>[s(xe,{columns:e(Ee),data:u.users.data,"search-key":"email","search-placeholder":"Filter by email..."},null,8,["columns","data"])]),_:1})]),_:1}),s(e(L),{open:y.value,"onUpdate:open":t[3]||(t[3]=d=>y.value=d)},{default:a(()=>[s(e(I),{class:"sm:max-w-[425px]"},{default:a(()=>[s(e(z),null,{default:a(()=>[s(e(G),null,{default:a(()=>[...t[17]||(t[17]=[r("Reset Password",-1)])]),_:1}),s(e(M),null,{default:a(()=>[r(" Set a new password for "+p(n.value?.name)+". ",1)]),_:1})]),_:1}),c("div",Le,[c("div",Ie,[s(e(D),{for:"password"},{default:a(()=>[...t[18]||(t[18]=[r("New Password",-1)])]),_:1}),s(e(E),{id:"password",type:"password",modelValue:e(m).password,"onUpdate:modelValue":t[0]||(t[0]=d=>e(m).password=d)},null,8,["modelValue"]),e(m).errors.password?(v(),W("p",Me,p(e(m).errors.password),1)):k("",!0)]),c("div",qe,[s(e(D),{for:"password_confirmation"},{default:a(()=>[...t[19]||(t[19]=[r("Confirm Password",-1)])]),_:1}),s(e(E),{id:"password_confirmation",type:"password",modelValue:e(m).password_confirmation,"onUpdate:modelValue":t[1]||(t[1]=d=>e(m).password_confirmation=d)},null,8,["modelValue"])])]),s(e(q),null,{default:a(()=>[s(e(x),{variant:"outline",onClick:t[2]||(t[2]=d=>y.value=!1)},{default:a(()=>[...t[20]||(t[20]=[r("Cancel",-1)])]),_:1}),s(e(x),{onClick:te,disabled:e(m).processing},{default:a(()=>[e(m).processing?(v(),C(e(F),{key:0,class:"mr-2 h-4 w-4 animate-spin"})):k("",!0),t[21]||(t[21]=r(" Reset Password ",-1))]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["open"]),s(e(L),{open:b.value,"onUpdate:open":t[7]||(t[7]=d=>b.value=d)},{default:a(()=>[s(e(I),{class:"sm:max-w-[425px]"},{default:a(()=>[s(e(z),null,{default:a(()=>[s(e(G),null,{default:a(()=>[r(p(o.value?"Deduct Words":"Add Words"),1)]),_:1}),s(e(M),null,{default:a(()=>[r(p(o.value?"Remove words from":"Add words to")+" "+p(n.value?.name)+"'s balance. ",1)]),_:1})]),_:1}),c("div",ze,[c("div",Ge,[s(e(D),{for:"words"},{default:a(()=>[...t[22]||(t[22]=[r("Amount of Words",-1)])]),_:1}),s(e(E),{id:"words",type:"number",min:"0",modelValue:e(i).words,"onUpdate:modelValue":t[4]||(t[4]=d=>e(i).words=d),placeholder:"e.g. 5000"},null,8,["modelValue"]),e(i).errors.words?(v(),W("p",Je,p(e(i).errors.words),1)):k("",!0)]),c("div",Xe,[s(e(D),{for:"reason"},{default:a(()=>[...t[23]||(t[23]=[r("Reason",-1)])]),_:1}),s(e(E),{id:"reason",modelValue:e(i).reason,"onUpdate:modelValue":t[5]||(t[5]=d=>e(i).reason=d),placeholder:"e.g. Bonus, Refund, Adjustment"},null,8,["modelValue"]),e(i).errors.reason?(v(),W("p",Ye,p(e(i).errors.reason),1)):k("",!0)])]),s(e(q),null,{default:a(()=>[s(e(x),{variant:"outline",onClick:t[6]||(t[6]=d=>b.value=!1)},{default:a(()=>[...t[24]||(t[24]=[r("Cancel",-1)])]),_:1}),s(e(x),{onClick:ae,disabled:e(i).processing,variant:o.value?"destructive":"default"},{default:a(()=>[e(i).processing?(v(),C(e(F),{key:0,class:"mr-2 h-4 w-4 animate-spin"})):k("",!0),r(" "+p(o.value?"Deduct Words":"Add Words"),1)]),_:1},8,["disabled","variant"])]),_:1})]),_:1})]),_:1},8,["open"]),s(e(L),{open:$.value,"onUpdate:open":t[10]||(t[10]=d=>$.value=d)},{default:a(()=>[s(e(I),{class:"sm:max-w-[425px]"},{default:a(()=>[s(e(z),null,{default:a(()=>[s(e(G),null,{default:a(()=>[...t[25]||(t[25]=[r("Suspend User",-1)])]),_:1}),s(e(M),null,{default:a(()=>[r(" Ban "+p(n.value?.name)+" from accessing the platform. ",1)]),_:1})]),_:1}),c("div",He,[c("div",Qe,[s(e(D),{for:"ban_reason"},{default:a(()=>[...t[26]||(t[26]=[r("Reason for Suspension",-1)])]),_:1}),s(e(Ue),{id:"ban_reason",modelValue:e(g).reason,"onUpdate:modelValue":t[8]||(t[8]=d=>e(g).reason=d),placeholder:"e.g. Violation of terms..."},null,8,["modelValue"]),e(g).errors.reason?(v(),W("p",Ze,p(e(g).errors.reason),1)):k("",!0)])]),s(e(q),null,{default:a(()=>[s(e(x),{variant:"outline",onClick:t[9]||(t[9]=d=>$.value=!1)},{default:a(()=>[...t[27]||(t[27]=[r("Cancel",-1)])]),_:1}),s(e(x),{variant:"destructive",onClick:oe,disabled:e(g).processing},{default:a(()=>[e(g).processing?(v(),C(e(F),{key:0,class:"mr-2 h-4 w-4 animate-spin"})):k("",!0),t[28]||(t[28]=r(" Suspend User ",-1))]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["open"]),s(e(Se),{open:_.value,"onUpdate:open":t[11]||(t[11]=d=>_.value=d)},{default:a(()=>[s(e(Ae),null,{default:a(()=>[s(e(De),null,{default:a(()=>[s(e(Pe),{class:"text-destructive flex items-center gap-2"},{default:a(()=>[s(e(ge),{class:"h-5 w-5"}),t[29]||(t[29]=r(" Delete User Permanently? ",-1))]),_:1}),s(e(We),null,{default:a(()=>[t[30]||(t[30]=r(" This action cannot be undone. This will permanently delete ",-1)),c("span",he,p(n.value?.name),1),t[31]||(t[31]=r(" and remove all of their data, including projects, payments, and generated content. ",-1))]),_:1})]),_:1}),s(e(Re),null,{default:a(()=>[s(e(je),null,{default:a(()=>[...t[32]||(t[32]=[r("Cancel",-1)])]),_:1}),s(e(Be),{onClick:re,class:"bg-destructive text-destructive-foreground hover:bg-destructive/90"},{default:a(()=>[...t[33]||(t[33]=[r(" Delete Permanently ",-1)])]),_:1})]),_:1})]),_:1})]),_:1},8,["open"])]),_:1}))}});export{xs as default};
