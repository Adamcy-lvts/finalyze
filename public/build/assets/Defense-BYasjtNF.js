import{bt as mt,bs as g,ch as $e,cj as U,bD as Ge,hu as ft,bA as Vt,bB as Et,cC as r,cn as o,cp as i,cH as w,cq as e,bE as a,h0 as ht,co as p,cr as f,cs as v,cv as De,e1 as ts,gS as ss,dM as Nt,cP as ls,ct as R,f5 as ns,hv as as,fV as is,hw as os,dG as qt,f8 as Ht,dN as rs,dV as jt,gW as Yt,cm as he,cY as Xt,cS as h,dh as $,dc as at,dd as it,c$ as lt,eS as ds,ff as Ue,eO as cs,g9 as Rt,cF as At,ca as H,cG as Jt,cM as oe,cJ as Wt,d8 as us,gY as ps,gM as Ke,cl as xs,cd as vs,cU as Tt,g$ as gs,cw as Ft,cE as fs,dn as Pt,fe as nt,dW as vt,hx as Dt,eT as Ot,cD as Ut,dv as hs,fh as ms,ci as Lt}from"./vendor-B0P7kkmx.js";import{a as bs}from"./AppLayout.vue_vue_type_script_setup_true_lang-DgGnVzcb.js";import{_ as y}from"./index-CeE5dpwC.js";import{_ as W,a as le}from"./CardContent.vue_vue_type_script_setup_true_lang-Inj97kMy.js";import{_ as ve}from"./CardDescription.vue_vue_type_script_setup_true_lang-DRGhurAy.js";import{_ as ge,a as fe}from"./CardTitle.vue_vue_type_script_setup_true_lang-mTag2pdV.js";import{_ as ke}from"./index-DoaZXG4c.js";import{_ as Mt}from"./Progress.vue_vue_type_script_setup_true_lang-CvtuB4dL.js";import{_ as ys,a as ws}from"./DialogContent.vue_vue_type_script_setup_true_lang-BcLRXWRk.js";import{R as Bt}from"./RichTextViewer-Yd9x1NKr.js";import{a as _s,b as ks,c as $s,d as zs,e as Is,f as Ss,g as Cs,_ as js}from"./AlertDialogTitle.vue_vue_type_script_setup_true_lang-CNHUG_7G.js";import{_ as Zt}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./UserInfo.vue_vue_type_script_setup_true_lang-mfygCHkH.js";import"./TooltipTrigger.vue_vue_type_script_setup_true_lang-j6BVOz2e.js";import"./Sonner.vue_vue_type_script_setup_true_lang-DEHww6d5.js";import"./AppLogo.vue_vue_type_script_setup_true_lang-PZJ5tAoX.js";import"./WordBalanceDisplay.vue_vue_type_script_setup_true_lang-CPYESHVZ.js";import"./useAppearance-aNFzu-SB.js";import"./useWordBalance-BdsKHd_Q.js";import"./PWAInstallPrompt.vue_vue_type_script_setup_true_lang-QsmOkiEy.js";import"./vendor-tiptap-DX5qDkpg.js";import"./MermaidExtension-BM4flB7o.js";import"./vendor-mermaid-B6AbkiKG.js";const Ts={key:0,class:"flex flex-col h-full bg-zinc-950/20 overflow-hidden rounded-2xl border border-white/5"},Ps={key:0,class:"flex items-center justify-between px-3 py-2 bg-zinc-900/80 border-b border-white/5 shrink-0 gap-4"},Ds={class:"flex items-center gap-3 shrink-0"},Ls={class:"p-1.5 bg-indigo-500/10 rounded-lg hidden xs:flex"},Ms={class:"flex items-center gap-2"},Bs={key:0,class:"h-1 w-1 rounded-full bg-indigo-500 animate-pulse"},Es={class:"flex items-center gap-2 overflow-x-auto no-scrollbar py-0.5"},Ns={class:"flex items-center gap-1 bg-white/5 pl-2 pr-1 py-0.5 rounded-md border border-white/10"},qs={class:"flex items-center gap-1 bg-white/5 rounded-md border border-white/10 p-0.5"},Hs={class:"hidden md:flex items-center gap-1 bg-white/5 rounded-md border border-white/10 p-0.5"},Rs={class:"flex items-center gap-1"},As={class:"flex items-center gap-2 shrink-0"},Fs={class:"flex items-center"},Os={key:1,class:"px-4 py-2 text-xs text-rose-300 bg-rose-500/10 border-b border-rose-500/20"},Us={class:"flex-1 flex overflow-hidden min-h-0 relative group"},Gs={key:0,ref:"sidebarRef",class:"w-64 bg-zinc-900/60 border-r border-white/5 flex flex-col h-full overflow-hidden transition-all duration-300"},Ks={class:"px-4 py-3 border-b border-white/5 flex items-center justify-between"},Qs={class:"flex-1 overflow-y-auto custom-scrollbar p-3 space-y-3"},Vs=["onDragstart","onDragover","onDragleave","onDrop","onClick"],Ys={class:"absolute top-2 left-2 z-10 h-5 w-5 rounded bg-black/60 backdrop-blur-md flex items-center justify-center border border-white/10"},Xs={class:"absolute inset-y-0 left-0 w-12 flex items-center justify-center z-20 pointer-events-none"},Js={class:"absolute inset-y-0 right-0 w-12 flex items-center justify-center z-20 pointer-events-none"},Ws={class:"space-y-3 shrink-0"},Zs={class:"h-1 w-full bg-white/5 rounded-full overflow-hidden"},el={class:"flex flex-col items-center gap-1.5 px-1"},tl={class:"flex items-center gap-6"},sl=["disabled"],ll={class:"text-[9px] font-bold text-indigo-500/80 uppercase tracking-[0.2em]"},nl=["disabled"],al={class:"text-sm font-display font-bold text-white tracking-tight text-center"},il={class:"space-y-5"},ol={key:0,class:"p-4 bg-indigo-500/5 border border-indigo-500/10 rounded-2xl space-y-2.5 animate-in fade-in slide-in-from-bottom-2 duration-500"},rl={class:"flex items-center gap-2 text-indigo-400"},dl={class:"text-xs text-zinc-300 leading-relaxed font-medium italic"},cl={class:"space-y-4"},ul={key:0,class:"space-y-4"},pl=["innerHTML"],xl={key:1,class:"space-y-4"},vl={key:1,class:"mt-8 pt-6 border-t border-white/5"},gl={class:"text-[11px] text-zinc-400 leading-relaxed italic"},fl={class:"w-full max-w-6xl aspect-video bg-zinc-900 rounded-lg shadow-2xl border border-white/10 relative overflow-hidden flex flex-col group/canvas transition-all duration-500"},hl={class:"relative z-10 p-4 lg:p-8 flex flex-col h-full"},ml={class:"mb-2"},bl={class:"flex-1 mt-2 lg:mt-4 overflow-hidden"},yl={key:0,class:"h-full flex items-center justify-center border-2 border-dashed border-white/5 rounded-lg"},wl={key:1,class:"grid grid-cols-2 gap-6 h-full"},_l={class:"space-y-3 overflow-auto"},kl={class:"space-y-3"},$l=["data-paragraph-index","onInput","onBlur"],zl={key:0,class:"space-y-2 lg:space-y-3 mt-2"},Il=["data-bullet-index","onInput","onKeydown","onBlur","innerHTML"],Sl={class:"flex gap-2"},Cl={class:"text-sm lg:text-base font-semibold text-indigo-400"},jl={class:"text-sm lg:text-base text-zinc-300 leading-relaxed"},Tl={key:2,class:"space-y-2 lg:space-y-3"},Pl=["data-bullet-index","onInput","onKeydown","onBlur","innerHTML"],Dl={class:"space-y-3 overflow-auto"},Ll={class:"space-y-3"},Ml=["data-paragraph-index","onInput","onBlur"],Bl={key:0,class:"space-y-2 lg:space-y-3 mt-2"},El=["data-bullet-index","onInput","onKeydown","onBlur","innerHTML"],Nl={class:"flex gap-2"},ql={class:"text-sm lg:text-base font-semibold text-indigo-400"},Hl={class:"text-sm lg:text-base text-zinc-300 leading-relaxed"},Rl={key:2,class:"space-y-2 lg:space-y-3"},Al=["data-bullet-index","onInput","onKeydown","onBlur","innerHTML"],Fl={key:2,class:"flex gap-6 h-full"},Ol=["src"],Ul={key:2,class:"text-zinc-500 text-xs uppercase tracking-widest"},Gl={key:3,class:"absolute bottom-2 left-2 right-2 z-20 bg-black/60 border border-white/10 rounded-md p-2 flex items-center gap-2"},Kl=["value"],Ql=["value"],Vl={key:0,class:"space-y-2 flex-1"},Yl={class:"flex flex-col gap-0.5 opacity-0 group-hover/item:opacity-100 transition-opacity shrink-0"},Xl=["onClick","disabled"],Jl=["onClick","disabled"],Wl={class:"flex-1 flex items-start gap-2"},Zl={key:0,class:"text-indigo-500 font-bold mt-0.5"},en=["data-mixed-index","onBlur"],tn=["onClick"],sn={class:"flex gap-2 mt-3"},ln={key:1,class:"space-y-3"},nn=["data-paragraph-index","onInput","onBlur"],an={key:2,class:"space-y-3"},on={class:"text-sm lg:text-base font-semibold text-indigo-400"},rn={class:"text-sm lg:text-base text-zinc-300 leading-relaxed"},dn={key:3,class:"space-y-2 lg:space-y-4"},cn=["data-bullet-index","onInput","onKeydown","onBlur","innerHTML"],un={key:4,class:"flex flex-col h-full"},pn={class:"flex gap-2 mt-3"},xn={key:0,class:"space-y-3 lg:space-y-4"},vn=["data-paragraph-index","onInput","onBlur"],gn={key:1,class:"space-y-4"},fn={class:"text-sm lg:text-base font-semibold text-indigo-400"},hn={class:"text-sm lg:text-base text-zinc-300 leading-relaxed"},mn={key:1,class:"space-y-2"},bn={class:"flex flex-col gap-0.5 opacity-0 group-hover/item:opacity-100 transition-opacity shrink-0"},yn=["onClick","disabled"],wn=["onClick","disabled"],_n={class:"flex-1 flex items-start gap-2"},kn={key:0,class:"text-indigo-500 font-bold mt-0.5"},$n=["data-mixed-index","onBlur"],zn=["onClick"],In={class:"flex gap-2 mt-3"},Sn={key:0,class:"space-y-2 lg:space-y-4"},Cn=["data-bullet-index","onInput","onKeydown","onBlur","innerHTML"],jn={key:1,class:"flex flex-col h-full"},Tn={class:"flex gap-2 mt-3"},Pn={class:"mt-6 flex items-center justify-center gap-1.5 py-2"},Dn=["onClick","title"],Ln={class:"absolute bottom-12 left-1/2 -translate-x-1/2 z-[110] flex items-center gap-6 px-6 py-3 bg-zinc-900/80 backdrop-blur-xl rounded-full border border-white/10 shadow-2xl opacity-0 hover:opacity-100 transition-opacity duration-300"},Mn=["disabled"],Bn={class:"flex flex-col items-center min-w-[120px]"},En={class:"text-2xl font-display font-bold text-white"},Nn=["disabled"],qn={class:"relative z-10 flex flex-col h-full max-w-7xl mx-auto w-full"},Hn={class:"flex-1 min-h-0 flex flex-col items-center justify-center"},Rn={class:"mb-12 lg:mb-16"},An={class:"text-xs lg:text-sm uppercase tracking-[0.4em] font-bold text-indigo-500/60 mb-6 block drop-shadow-[0_0_10px_rgba(99,102,241,0.3)]"},Fn={key:0,class:"text-4xl lg:text-7xl font-display font-bold text-white tracking-tight leading-tight"},On={class:"relative w-full"},Un={key:0,class:"flex flex-col items-center justify-center text-center py-20"},Gn={class:"text-6xl lg:text-9xl font-display font-bold text-white tracking-tighter leading-none mb-8"},Kn=["innerHTML"],Qn=["innerHTML"],Vn={key:1,class:"grid grid-cols-2 gap-12 lg:gap-20"},Yn={class:"space-y-10"},Xn={class:"text-3xl lg:text-5xl font-bold text-indigo-400 tracking-tight"},Jn={class:"text-2xl lg:text-4xl text-zinc-300 leading-relaxed font-light"},Wn={key:2,class:"space-y-10"},Zn=["innerHTML"],ea={class:"space-y-10"},ta={class:"text-3xl lg:text-5xl font-bold text-indigo-400 tracking-tight"},sa={class:"text-2xl lg:text-4xl text-zinc-300 leading-relaxed font-light"},la={key:1,class:"space-y-10"},na=["innerHTML"],aa={key:2,class:"flex flex-col lg:flex-row gap-12 lg:gap-20 h-full"},ia=["src"],oa={key:1,class:"text-zinc-500 text-sm uppercase tracking-widest"},ra={key:0,class:"space-y-8"},da={key:1,class:"space-y-8"},ca={class:"text-3xl lg:text-5xl font-bold text-indigo-400 tracking-tight"},ua={class:"text-2xl lg:text-4xl text-zinc-300 leading-relaxed font-light"},pa={key:2,class:"space-y-10"},xa=["innerHTML"],va={key:3,class:"space-y-12"},ga={key:0,class:"space-y-8"},fa={key:1,class:"space-y-12"},ha={class:"text-3xl lg:text-5xl font-bold text-indigo-400 tracking-tight"},ma={class:"text-2xl lg:text-4xl text-zinc-300 leading-relaxed font-light"},ba={key:1,class:"space-y-10"},ya={key:0,class:"space-y-6"},wa={key:1,class:"space-y-8"},_a={class:"text-2xl lg:text-4xl font-bold text-indigo-400"},ka={class:"text-xl lg:text-3xl text-zinc-300 leading-relaxed font-light"},$a={key:2,class:"space-y-8"},za=["innerHTML"],Ia={key:0,class:"space-y-10"},Sa=["innerHTML"],Ca={class:"mt-12 lg:mt-16 pt-8 border-t border-white/5 flex justify-between items-center opacity-40 shrink-0"},ja={class:"flex items-center gap-8"},Ta={class:"text-sm lg:text-base font-mono tracking-[0.3em] text-zinc-400 uppercase"},Pa={class:"text-lg lg:text-xl font-display font-medium text-white"},Da={key:1,class:"flex flex-col items-center justify-center py-20 text-center space-y-6 h-full bg-zinc-950/20 rounded-2xl border border-dashed border-white/5"},La={class:"h-20 w-20 rounded-full bg-indigo-500/10 flex items-center justify-center animate-bounce"},Ma=mt({__name:"DeckViewer",props:{project:{},slides:{},activeIndex:{},isSaving:{type:Boolean,default:!1},compact:{type:Boolean,default:!1},canDownload:{type:Boolean,default:!1},showPptx:{type:Boolean,default:!1},pptxUrl:{default:null},pptxBusy:{type:Boolean,default:!1}},emits:["update:activeIndex","update:slides","toggle-expand","download-pptx","export-pptx"],setup(Y,{emit:C}){const u=Y,m=C,_=g([]),P=g(!1),N=g(null),B=g(null),G=g("title"),V=g(!1),F=g(null),j=g(null),b=g(null),z=g(!1),E=g(null),S=g(null),k=g(null),A=g(null),D=g(null),M=d=>JSON.parse(JSON.stringify(d)),q=g(!1);$e(()=>u.slides,d=>{if(q.value){q.value=!1;return}_.value=M(d||[])},{deep:!0,immediate:!0});const I=d=>{q.value=!0,_.value=d,m("update:slides",d)},re=d=>{if(!_.value.length)return;const l=M(_.value),n=M([l[d]])[0],t=d+1;l.splice(t,0,n),I(l),m("update:activeIndex",t)},X=d=>{if(!_.value.length)return;const l=M(_.value);if(l.splice(d,1),I(l),!l.length){m("update:activeIndex",0);return}const n=d<=u.activeIndex?Math.max(0,u.activeIndex-1):u.activeIndex;m("update:activeIndex",n)},ne=d=>{F.value=d,V.value=!0},me=()=>{F.value!==null&&(X(F.value),V.value=!1,F.value=null)},be=()=>{E.value=null,b.value?.click()},de=async d=>{if(d)try{await H.delete("/editor/images",{data:{url:d}})}catch{}},Le=async d=>{if(!d.type.startsWith("image/")){E.value="Please select an image file.";return}z.value=!0,E.value=null;try{const l=new FormData;l.append("image",d);const n=await H.post("/editor/images",l,{headers:{"Content-Type":"multipart/form-data"}});if(n.data?.success&&n.data.url){const t=S.value;T(u.activeIndex,"image_url",n.data.url),T(u.activeIndex,"image_scale",1),T(u.activeIndex,"image_fit","cover"),T(u.activeIndex,"image_position_x",50),T(u.activeIndex,"image_position_y",50),t&&await de(t)}else E.value="Upload failed."}catch(l){E.value=l?.response?.data?.message||"Upload failed."}finally{z.value=!1,S.value=null,b.value&&(b.value.value="")}},ze=d=>{const n=d.target.files?.[0];n&&Le(n)},Ie=()=>{S.value=c.value?.image_url||null,be()},Me=async()=>{const d=c.value?.image_url||null;T(u.activeIndex,"image_url",""),T(u.activeIndex,"image_scale",1),T(u.activeIndex,"image_fit","cover"),T(u.activeIndex,"image_position_x",50),T(u.activeIndex,"image_position_y",50),await de(d)},Qe=d=>{const l=Number(d.target.value);Number.isNaN(l)||T(u.activeIndex,"image_scale",l)},K=d=>{const l=d.target.value;T(u.activeIndex,"image_fit",l)},ot=(d,l,n)=>Math.min(Math.max(d,l),n),Z=d=>{if(!c.value?.image_url)return;const l=d.currentTarget;if(!l)return;const n="touches"in d?d.touches[0]:d;k.value={startX:n.clientX,startY:n.clientY,originX:c.value.image_position_x??50,originY:c.value.image_position_y??50,container:l}},Be=d=>{if(!k.value)return;const l="touches"in d?d.touches[0]:d,{startX:n,startY:t,originX:s,originY:x,container:L}=k.value;if(!L)return;const se=L.getBoundingClientRect(),St=(l.clientX-n)/se.width*100,xt=(l.clientY-t)/se.height*100,Ct=ot(s+St,0,100),es=ot(x+xt,0,100);T(u.activeIndex,"image_position_x",Math.round(Ct)),T(u.activeIndex,"image_position_y",Math.round(es))},Ee=()=>{k.value=null},Ne=d=>{j.value=d},qe=d=>{document.execCommand(d,!1);const l=document.activeElement;if(!l)return;const n=ye(l.innerHTML),t=l.dataset?.bulletIndex;if(t!==void 0){const s=Number(t);Number.isNaN(s)||Ne({type:"bullet",index:s,html:n});return}l.getAttribute("contenteditable")==="true"&&Ne({type:"title",html:n})},ye=d=>{const l=document.createElement("div");l.innerHTML=d;const n=t=>{if(t.nodeType===Node.TEXT_NODE)return dt(t.textContent||"");if(t.nodeType!==Node.ELEMENT_NODE)return"";const s=t,x=s.tagName.toLowerCase(),L=Array.from(s.childNodes).map(n).join("");return x==="strong"||x==="b"?`<strong>${L}</strong>`:x==="em"||x==="i"?`<em>${L}</em>`:x==="br"?"<br />":L};return Array.from(l.childNodes).map(n).join("")},ce=(d,l)=>{const n=l.target;if(!n)return;const t=ye(n.innerHTML);Ne({type:"bullet",index:d,html:t})},ue=(d,l)=>{const n=l.target;if(!n)return;const t=ye(n.innerHTML);rt(u.activeIndex,d,t),j.value?.type==="bullet"&&j.value.index===d&&(j.value=null)},ae=async(d,l)=>{if((l.metaKey||l.ctrlKey)&&l.key.toLowerCase()==="b"){l.preventDefault(),qe("bold");return}if((l.metaKey||l.ctrlKey)&&l.key.toLowerCase()==="i"){l.preventDefault(),qe("italic");return}if(l.key==="Enter"){l.preventDefault();const n=l.target;n&&rt(u.activeIndex,d,ye(n.innerHTML));const t=M(_.value),s=Array.isArray(t[u.activeIndex]?.bullets)?[...t[u.activeIndex].bullets]:[];s.splice(d+1,0,""),t[u.activeIndex]={...t[u.activeIndex],bullets:s},I(t),await Ge();const x=`[data-bullet-index="${d+1}"]`;document.querySelector(x)?.focus();return}if(l.key==="Backspace"){const n=l.target;if(n&&n.innerText.trim()===""){const t=M(_.value),s=Array.isArray(t[u.activeIndex]?.bullets)?[...t[u.activeIndex].bullets]:[];if(s.length>1){l.preventDefault(),s.splice(d,1),t[u.activeIndex]={...t[u.activeIndex],bullets:s},I(t),await Ge();const L=`[data-bullet-index="${Math.max(0,d-1)}"]`;document.querySelector(L)?.focus()}}}},He=d=>{const l=d.target;l&&Ne({type:"title",html:ye(l.innerHTML)})},bt=d=>{const l=d.target;l&&(T(u.activeIndex,"title",l.innerText.trim()),j.value?.type==="title"&&(j.value=null))},O={title:{title:"Title Slide",bullets:["Project title","Name • Department • Date"],layout:"title",visuals:"",speaker_notes:""},problem:{title:"Research Problem",bullets:["Context and motivation","Key gap or pain point","Why it matters"],layout:"bullets",visuals:"Problem landscape diagram",speaker_notes:""},objectives:{title:"Objectives",bullets:["Primary objective","Secondary objective","Success criteria"],layout:"bullets",visuals:"Objective hierarchy diagram",speaker_notes:""},methodology:{title:"Methodology",bullets:["Research design","Data collection","Analysis approach"],layout:"image_left",visuals:"Methodology flowchart",speaker_notes:""},results:{title:"Results",bullets:["Key finding #1","Key finding #2","Performance metrics"],layout:"two_column",visuals:"Results summary chart",speaker_notes:""},conclusion:{title:"Conclusion",bullets:["Summary of contributions","Impact and implications","Future work"],layout:"bullets",visuals:"",speaker_notes:""}},yt=()=>{const d=O[G.value]||O.title,l=M(_.value),n=u.activeIndex+1;l.splice(n,0,{...d}),I(l),m("update:activeIndex",n)},Ve=(d,l)=>{if(d===l)return;const n=M(_.value),[t]=n.splice(d,1);n.splice(l,0,t),I(n);let s=u.activeIndex;u.activeIndex===d?s=l:d<l&&u.activeIndex>d&&u.activeIndex<=l?s=u.activeIndex-1:d>l&&u.activeIndex>=l&&u.activeIndex<d&&(s=u.activeIndex+1),m("update:activeIndex",s)},wt=(d,l)=>{N.value=l,B.value=l,d.dataTransfer&&(d.dataTransfer.effectAllowed="move",d.dataTransfer.setData("text/plain",String(l)))},Ye=d=>{N.value!==null&&(B.value=d)},_t=d=>{B.value===d&&(B.value=null)},Xe=d=>{N.value!==null&&(Ve(N.value,d),N.value=null,B.value=null)},kt=()=>{N.value=null,B.value=null},T=(d,l,n)=>{const t=M(_.value);t[d]={...t[d],[l]:n},I(t)},rt=(d,l,n)=>{const t=M(_.value),s=Array.isArray(t[d]?.bullets)?[...t[d].bullets]:[];s[l]=n,t[d]={...t[d],bullets:s},I(t)},dt=d=>d.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;"),Q=d=>d.includes("<")?ye(d):dt(d).replace(/\*\*(.+?)\*\*/g,"<strong>$1</strong>").replace(/\*(.+?)\*/g,"<em>$1</em>"),pe=(d=[])=>{const l=Math.ceil(d.length/2);return[d.slice(0,l),d.slice(l)]},ee=(d=[])=>{const l=Math.ceil(d.length/2),n=d.slice(0,l).map((s,x)=>({text:s,index:x})),t=d.slice(l).map((s,x)=>({text:s,index:x+l}));return[n,t]},Je=(d=[])=>{const l=Math.ceil(d.length/2),n=d.slice(0,l).map((s,x)=>({text:s,index:x})),t=d.slice(l).map((s,x)=>({text:s,index:x+l}));return[n,t]},Se=(d,l)=>{const t=l.target.innerText.trim(),s=[...c.value.paragraphs||[]];s[d]=t,T(u.activeIndex,"paragraphs",s)},Ce=(d,l)=>{if(!l.target.innerText.trim()){const s=[...c.value.paragraphs||[]];s.splice(d,1),T(u.activeIndex,"paragraphs",s)}},We=()=>{const d=[...c.value.paragraphs||[]];d.push("New paragraph"),T(u.activeIndex,"paragraphs",d)},we=d=>{const l=[...c.value.paragraphs||[]],n=Math.ceil(l.length/2);d==="left"?l.splice(n,0,"New paragraph"):l.push("New paragraph"),T(u.activeIndex,"paragraphs",l)},_e=async()=>{const d=M(_.value),l=d[u.activeIndex],n=Array.isArray(l?.bullets)?[...l.bullets]:[];n.push("New bullet point");const t=(l?.paragraphs?.length??0)>0,s=l?.content_type==="paragraphs";d[u.activeIndex]={...l,bullets:n,content_type:t||s?"mixed":l?.content_type||"bullets"},I(d),await Ge();const x=`[data-bullet-index="${n.length-1}"]`;document.querySelector(x)?.focus()},te=U(()=>{const d=c.value;if(d.mixed_content?.length)return d.mixed_content;const l=[];return(d.paragraphs||[]).forEach(n=>l.push({type:"paragraph",text:n})),(d.bullets||[]).forEach(n=>l.push({type:"bullet",text:n})),l}),je=d=>{if(!d)return;const l=M(_.value);l[u.activeIndex]={...l[u.activeIndex],mixed_content:d,content_type:d.length>0?"mixed":"bullets",paragraphs:d.filter(n=>n.type==="paragraph").map(n=>n.text),bullets:d.filter(n=>n.type==="bullet").map(n=>n.text)},I(l)},Re=(d,l)=>{const n=[...te.value];if(!n.length)return;const t=l==="up"?d-1:d+1;t<0||t>=n.length||([n[d],n[t]]=[n[t],n[d]],je(n))},ct=(d,l)=>{const n=[...te.value];n[d]&&(n[d]={...n[d],text:l},je(n))},ut=d=>{const l=[...te.value];if(l.splice(d,1),l.length===0){const n=M(_.value);n[u.activeIndex]={...n[u.activeIndex],mixed_content:[],content_type:"bullets",paragraphs:[],bullets:[]},I(n);return}je(l)},J=d=>{const l=[...te.value];l.push({type:d,text:d==="paragraph"?"New paragraph":"New bullet point"}),je(l)},Ae={mounted(d,l){d.innerText=l.value||""},updated(d,l){document.activeElement!==d&&(d.innerText=l.value||"")}},Te=(d,l)=>{const t=l.target.innerText.trim();ct(d,t)},xe=()=>{u.activeIndex<_.value.length-1&&m("update:activeIndex",u.activeIndex+1)},ie=()=>{u.activeIndex>0&&m("update:activeIndex",u.activeIndex-1)},c=U(()=>{const d={title:"",bullets:[],speaker_notes:"",visuals:"",charts:[],tables:[]};return!_.value||_.value.length===0?d:_.value[u.activeIndex]||d}),$t=async()=>{if(P.value=!0,await Ge(),A.value)try{A.value.requestFullscreen?await A.value.requestFullscreen():A.value.webkitRequestFullscreen?await A.value.webkitRequestFullscreen():A.value.msRequestFullscreen&&await A.value.msRequestFullscreen()}catch(d){console.warn("Fullscreen request failed:",d)}},Pe=g(1),Fe=()=>{if(!D.value)return;const d=D.value,l=d.querySelector(".slide-content");if(!l)return;const t=d.clientHeight*.8,s=l.scrollHeight;s>t?Pe.value=t/s:Pe.value=1};$e([P,()=>u.activeIndex],()=>{P.value&&Ge(Fe)});const Ze=()=>{P.value&&Fe()},et=()=>{document.fullscreenElement&&document.exitFullscreen().catch(()=>{}),P.value=!1},Oe=g(null),{isSwiping:zt,direction:tt}=ft(Oe);$e(zt,d=>{!d&&tt.value&&!P.value&&(tt.value==="left"&&xe(),tt.value==="right"&&ie())});const{isSwiping:It,direction:st}=ft(D);$e(It,d=>{!d&&P.value&&st.value&&(st.value==="left"&&xe(),st.value==="right"&&ie())}),Vt(()=>{const d=()=>{!document.fullscreenElement&&P.value&&(P.value=!1)};document.addEventListener("fullscreenchange",d),window.addEventListener("resize",Ze),Et(()=>{document.removeEventListener("fullscreenchange",d),window.removeEventListener("resize",Ze)})});const pt=d=>{P.value&&((d.key==="ArrowRight"||d.key===" ")&&xe(),d.key==="ArrowLeft"&&ie(),d.key==="Escape"&&et())};return typeof window<"u"&&(window.addEventListener("keydown",pt),window.addEventListener("mousemove",Be),window.addEventListener("mouseup",Ee),window.addEventListener("touchmove",Be),window.addEventListener("touchend",Ee)),Et(()=>{typeof window>"u"||(window.removeEventListener("keydown",pt),window.removeEventListener("mousemove",Be),window.removeEventListener("mouseup",Ee),window.removeEventListener("touchmove",Be),window.removeEventListener("touchend",Ee))}),(d,l)=>(o(),r(h,null,[_.value.length?(o(),r("div",Ts,[d.compact?w("",!0):(o(),r("div",Ps,[e("div",Ds,[e("div",Ls,[i(a(ht),{class:"h-4 w-4 text-indigo-400"})]),e("div",Ms,[l[29]||(l[29]=e("h3",{class:"text-[11px] font-bold text-white whitespace-nowrap"},"Slide Editor",-1)),i(a(ke),{variant:"outline",class:"text-[9px] px-1.5 h-4 bg-white/5 border-white/10 text-zinc-400 whitespace-nowrap"},{default:p(()=>[f(v(u.activeIndex+1)+" / "+v(_.value.length),1)]),_:1}),u.isSaving?(o(),r("div",Bs)):w("",!0)])]),e("div",Es,[e("div",Ns,[De(e("select",{class:"bg-transparent border-none text-[10px] text-zinc-400 focus:ring-0 outline-none w-20 cursor-pointer h-6","onUpdate:modelValue":l[0]||(l[0]=n=>G.value=n)},[...l[30]||(l[30]=[ss('<option value="title" data-v-9b401f55>Title</option><option value="problem" data-v-9b401f55>Problem</option><option value="objectives" data-v-9b401f55>Objectives</option><option value="methodology" data-v-9b401f55>Methodology</option><option value="results" data-v-9b401f55>Results</option><option value="conclusion" data-v-9b401f55>Conclusion</option>',6)])],512),[[ts,G.value]]),i(a(y),{variant:"ghost",size:"icon",class:"h-6 w-6 text-indigo-400 hover:text-white",onClick:yt,title:"Add Slide"},{default:p(()=>[i(a(Nt),{class:"h-3.5 w-3.5"})]),_:1})]),l[35]||(l[35]=e("div",{class:"h-4 w-[1px] bg-white/10 shrink-0"},null,-1)),e("div",qs,[i(a(y),{variant:"ghost",size:"icon",class:R(["h-6 w-6 transition-colors",(c.value.layout||"bullets")==="title"?"bg-indigo-500/20 text-indigo-400":"text-zinc-400 hover:text-white"]),onClick:l[1]||(l[1]=n=>T(u.activeIndex,"layout","title")),title:"Title Layout"},{default:p(()=>[i(a(ls),{class:"h-3.5 w-3.5"})]),_:1},8,["class"]),i(a(y),{variant:"ghost",size:"icon",class:R(["h-6 w-6 transition-colors",(c.value.layout||"bullets")==="bullets"?"bg-indigo-500/20 text-indigo-400":"text-zinc-400 hover:text-white"]),onClick:l[2]||(l[2]=n=>T(u.activeIndex,"layout","bullets")),title:"Bullets"},{default:p(()=>[i(a(ns),{class:"h-3.5 w-3.5"})]),_:1},8,["class"]),i(a(y),{variant:"ghost",size:"icon",class:R(["h-6 w-6 transition-colors",(c.value.layout||"bullets")==="two_column"?"bg-indigo-500/20 text-indigo-400":"text-zinc-400 hover:text-white"]),onClick:l[3]||(l[3]=n=>T(u.activeIndex,"layout","two_column")),title:"Two Columns"},{default:p(()=>[i(a(as),{class:"h-3.5 w-3.5"})]),_:1},8,["class"]),i(a(y),{variant:"ghost",size:"icon",class:R(["h-6 w-6 transition-colors",(c.value.layout||"bullets")==="image_left"?"bg-indigo-500/20 text-indigo-400":"text-zinc-400 hover:text-white"]),onClick:l[4]||(l[4]=n=>T(u.activeIndex,"layout","image_left")),title:"Image Left"},{default:p(()=>[i(a(is),{class:"h-3.5 w-3.5"})]),_:1},8,["class"]),i(a(y),{variant:"ghost",size:"icon",class:R(["h-6 w-6 transition-colors",(c.value.layout||"bullets")==="image_right"?"bg-indigo-500/20 text-indigo-400":"text-zinc-400 hover:text-white"]),onClick:l[5]||(l[5]=n=>T(u.activeIndex,"layout","image_right")),title:"Image Right"},{default:p(()=>[i(a(os),{class:"h-3.5 w-3.5"})]),_:1},8,["class"])]),e("div",Hs,[i(a(y),{variant:"ghost",size:"icon",class:"h-6 w-6 text-zinc-400 hover:text-white",onClick:l[6]||(l[6]=n=>qe("bold")),title:"Bold"},{default:p(()=>[...l[31]||(l[31]=[e("span",{class:"font-bold text-[10px]"},"B",-1)])]),_:1}),i(a(y),{variant:"ghost",size:"icon",class:"h-6 w-6 text-zinc-400 hover:text-white",onClick:l[7]||(l[7]=n=>qe("italic")),title:"Italic"},{default:p(()=>[...l[32]||(l[32]=[e("span",{class:"italic text-[10px]"},"I",-1)])]),_:1}),i(a(y),{variant:"ghost",size:"icon",class:"h-6 w-6 text-zinc-400 hover:text-white",onClick:l[8]||(l[8]=n=>J("paragraph")),title:"Add Paragraph"},{default:p(()=>[i(a(qt),{class:"h-3.5 w-3.5"})]),_:1}),i(a(y),{variant:"ghost",size:"icon",class:"h-6 w-6 text-zinc-400 hover:text-white",onClick:l[9]||(l[9]=n=>J("bullet")),title:"Add Bullet"},{default:p(()=>[i(a(Nt),{class:"h-3 w-3"})]),_:1}),i(a(y),{variant:"ghost",size:"icon",class:"h-6 w-6 text-zinc-400 hover:text-white",title:"Upload Image",disabled:z.value,onClick:be},{default:p(()=>[i(a(Ht),{class:"h-3.5 w-3.5"})]),_:1},8,["disabled"])]),l[36]||(l[36]=e("div",{class:"h-4 w-[1px] bg-white/10 shrink-0"},null,-1)),e("div",Rs,[i(a(y),{variant:"ghost",size:"icon",class:"h-7 w-7 text-zinc-500 hover:text-white",onClick:l[10]||(l[10]=n=>re(u.activeIndex)),title:"Duplicate"},{default:p(()=>[i(a(rs),{class:"h-3.5 w-3.5"})]),_:1}),i(a(y),{variant:"ghost",size:"icon",class:"h-7 w-7 text-zinc-500 hover:text-rose-400",onClick:l[11]||(l[11]=n=>ne(u.activeIndex)),title:"Delete"},{default:p(()=>[i(a(jt),{class:"h-3.5 w-3.5"})]),_:1})]),l[37]||(l[37]=e("div",{class:"h-4 w-[1px] bg-white/10 shrink-0"},null,-1)),e("div",As,[i(a(y),{variant:"secondary",size:"sm",class:"h-7 text-[10px] px-2.5 gap-1.5 font-bold",onClick:$t},{default:p(()=>[i(a(Yt),{class:"h-3 w-3 fill-current"}),l[33]||(l[33]=f()),l[34]||(l[34]=e("span",{class:"hidden xs:inline"},"PRESENT",-1))]),_:1}),e("div",Fs,[u.showPptx?(o(),he(a(y),{key:0,variant:"ghost",size:"icon",class:"h-7 w-7 text-zinc-500 hover:text-white",disabled:u.pptxBusy,onClick:l[12]||(l[12]=n=>u.pptxUrl?m("download-pptx"):m("export-pptx")),title:u.pptxUrl?"Download PPTX":"Export PPTX"},{default:p(()=>[i(a(qt),{class:"h-3.5 w-3.5"})]),_:1},8,["disabled","title"])):w("",!0),d.compact?(o(),he(a(y),{key:1,variant:"ghost",size:"icon",class:"h-7 w-7 text-zinc-500 hover:text-white",onClick:l[13]||(l[13]=n=>m("toggle-expand")),title:"Expand"},{default:p(()=>[i(a(Xt),{class:"h-3.5 w-3.5"})]),_:1})):w("",!0)])])])])),e("input",{ref_key:"imageUploadInput",ref:b,type:"file",class:"hidden",accept:"image/*",onChange:ze},null,544),E.value&&!d.compact?(o(),r("div",Os,v(E.value),1)):w("",!0),e("div",Us,[d.compact?w("",!0):(o(),r("div",Gs,[e("div",Ks,[l[38]||(l[38]=e("span",{class:"text-[10px] font-bold text-zinc-500 uppercase tracking-widest"},"Navigator",-1)),i(a(ke),{variant:"outline",class:"text-[9px] bg-white/5 border-white/10"},{default:p(()=>[f(v(_.value.length)+" Slides",1)]),_:1})]),e("div",Qs,[(o(!0),r(h,null,$(_.value,(n,t)=>(o(),r("div",{key:t,draggable:"true",onDragstart:s=>wt(s,t),onDragover:Ue(s=>Ye(t),["prevent"]),onDragleave:s=>_t(t),onDrop:s=>Xe(t),onDragend:kt,onClick:s=>m("update:activeIndex",t),class:R(["group/thumb relative aspect-video bg-zinc-950 rounded-lg border cursor-pointer transition-all duration-300 overflow-hidden",[u.activeIndex===t?"border-indigo-500 ring-2 ring-indigo-500/20 shadow-[0_0_15px_rgba(99,102,241,0.2)]":"border-white/5 hover:border-white/20",B.value===t?"translate-y-2":""]])},[e("div",Ys,[e("span",{class:R(["text-[10px] font-bold",u.activeIndex===t?"text-indigo-400":"text-zinc-500"])},v(t+1),3)]),l[39]||(l[39]=e("div",{class:"p-3 h-full flex flex-col gap-1.5 opacity-60 group-hover/thumb:opacity-100 transition-opacity"},[e("div",{class:"h-1.5 w-1/2 bg-white/20 rounded"}),e("div",{class:"h-1 w-3/4 bg-white/5 rounded"}),e("div",{class:"h-1 w-2/3 bg-white/5 rounded"})],-1))],42,Vs))),128))])],512)),e("div",Xs,[i(a(y),{variant:"ghost",size:"icon",class:"h-10 w-10 rounded-full bg-black/40 border border-white/10 text-white backdrop-blur-md opacity-0 group-hover:opacity-100 transition-all pointer-events-auto -translate-x-4 group-hover:translate-x-2",disabled:u.activeIndex===0,onClick:ie},{default:p(()=>[i(a(at),{class:"h-6 w-6"})]),_:1},8,["disabled"])]),e("div",Js,[i(a(y),{variant:"ghost",size:"icon",class:"h-10 w-10 rounded-full bg-black/40 border border-white/10 text-white backdrop-blur-md opacity-0 group-hover:opacity-100 transition-all pointer-events-auto translate-x-4 group-hover:-translate-x-2",disabled:u.activeIndex===_.value.length-1,onClick:xe},{default:p(()=>[i(a(it),{class:"h-6 w-6"})]),_:1},8,["disabled"])]),e("div",{class:R(["flex-1 flex flex-col min-w-0 overflow-hidden relative",d.compact?"bg-zinc-950/60":"bg-zinc-950/40"])},[d.compact?(o(),r("div",{key:0,class:"flex-1 flex flex-col overflow-y-auto custom-scrollbar p-5 space-y-6",ref_key:"editorPreviewContainer",ref:Oe},[e("div",Ws,[e("div",Zs,[e("div",{class:"h-full bg-indigo-500 shadow-[0_0_10px_rgba(99,102,241,0.4)] transition-all duration-700 ease-out",style:lt({width:`${(u.activeIndex+1)/_.value.length*100}%`})},null,4)]),e("div",el,[e("div",tl,[e("button",{onClick:ie,disabled:u.activeIndex===0,class:"p-1 text-zinc-500 hover:text-white disabled:opacity-10 transition-colors"},[i(a(at),{class:"h-5 w-5"})],8,sl),e("div",ll," Slide "+v(u.activeIndex+1)+" of "+v(_.value.length),1),e("button",{onClick:xe,disabled:u.activeIndex===_.value.length-1,class:"p-1 text-zinc-500 hover:text-white disabled:opacity-10 transition-colors"},[i(a(it),{class:"h-5 w-5"})],8,nl)]),e("div",al,v(c.value.title),1)])]),l[43]||(l[43]=e("div",{class:"h-[1px] bg-white/5 w-full"},null,-1)),e("div",il,[c.value.visuals?(o(),r("div",ol,[e("div",rl,[i(a(Ht),{class:"h-3.5 w-3.5"}),l[40]||(l[40]=e("span",{class:"text-[10px] font-bold uppercase tracking-widest"},"Visual Strategy",-1))]),e("p",dl,'"'+v(c.value.visuals)+'"',1)])):w("",!0),e("div",cl,[c.value.bullets&&c.value.bullets.length?(o(),r("div",ul,[(o(!0),r(h,null,$(c.value.bullets,(n,t)=>(o(),r("div",{key:t,class:"flex gap-4 group animate-in fade-in slide-in-from-left-2 duration-500",style:lt({animationDelay:`${t*100}ms`})},[l[41]||(l[41]=e("div",{class:"mt-1.5 h-1.5 w-1.5 rounded-full bg-indigo-500 shrink-0 shadow-[0_0_8px_rgba(99,102,241,0.6)]"},null,-1)),e("p",{class:"text-xs lg:text-sm text-zinc-200 leading-relaxed font-light",innerHTML:Q(n)},null,8,pl)],4))),128))])):c.value.paragraphs&&c.value.paragraphs.length?(o(),r("div",xl,[(o(!0),r(h,null,$(c.value.paragraphs,(n,t)=>(o(),r("p",{key:t,class:"text-xs text-zinc-300 leading-relaxed border-l-2 border-white/5 pl-4 py-1"},v(n),1))),128))])):w("",!0)]),c.value.speaker_notes?(o(),r("div",vl,[l[42]||(l[42]=e("div",{class:"text-[10px] font-bold text-zinc-500 uppercase tracking-widest mb-3"}," Speaker Notes",-1)),e("p",gl,v(c.value.speaker_notes),1)])):w("",!0)])],512)):(o(),r("div",{key:1,class:"flex-1 flex flex-col items-center justify-center overflow-auto custom-scrollbar relative bg-black/20 p-6",ref_key:"editorPreviewContainer",ref:Oe},[e("div",fl,[l[60]||(l[60]=e("div",{class:"absolute inset-0 bg-gradient-to-br from-indigo-500/5 via-transparent to-purple-500/5 pointer-events-none"},null,-1)),e("div",hl,[e("div",ml,[l[44]||(l[44]=e("span",{class:"text-[8px] lg:text-[10px] uppercase tracking-[0.2em] font-bold text-indigo-500/60 mb-1 block"},"Premium Deck",-1)),e("h1",{class:"text-sm lg:text-2xl font-display font-bold text-white tracking-tight leading-tight line-clamp-2 focus:outline-none inline-edit",contenteditable:"true","data-placeholder":"Slide Title",onInput:He,onBlur:bt,onKeydown:l[14]||(l[14]=ds(Ue(()=>{},["prevent"]),["enter"]))},v(c.value.title),33)]),e("div",bl,[(c.value.layout||"bullets")==="title"?(o(),r("div",yl,[...l[45]||(l[45]=[e("p",{class:"text-zinc-600 text-xs italic"},"Title-only layout.",-1)])])):(c.value.layout||"bullets")==="two_column"?(o(),r("div",wl,[e("div",_l,[c.value.paragraphs&&c.value.paragraphs.length?(o(),r(h,{key:0},[e("div",kl,[(o(!0),r(h,null,$(Je(c.value.paragraphs||[])[0],n=>(o(),r("p",{key:"p-"+n.index,class:"text-sm lg:text-base text-zinc-300 leading-relaxed focus:outline-none inline-edit cursor-text",contenteditable:"true","data-paragraph-index":n.index,"data-placeholder":"Paragraph",onInput:t=>Se(n.index,t),onBlur:t=>Ce(n.index,t)},v(n.text),41,$l))),128)),c.value.bullets&&c.value.bullets.length?(o(),r("ul",zl,[(o(!0),r(h,null,$(ee(c.value.bullets||[])[0],n=>(o(),r("li",{key:"bl-"+n.index,class:"flex gap-3 text-zinc-300"},[l[46]||(l[46]=e("span",{class:"text-indigo-500 font-bold"},"•",-1)),e("span",{class:"text-sm lg:text-base leading-relaxed focus:outline-none inline-edit",contenteditable:"true","data-bullet-index":n.index,"data-placeholder":"Bullet",onInput:t=>ce(n.index,t),onKeydown:t=>ae(n.index,t),onBlur:t=>ue(n.index,t),innerHTML:Q(n.text)},null,40,Il)]))),128))])):w("",!0)]),e("div",Sl,[e("button",{onClick:l[15]||(l[15]=n=>we("left")),class:"flex-1 py-2 border border-dashed border-white/10 rounded text-zinc-600 text-xs hover:border-indigo-500/50 hover:text-indigo-400 transition-colors"}," + Paragraph "),e("button",{onClick:_e,class:"flex-1 py-2 border border-dashed border-white/10 rounded text-zinc-600 text-xs hover:border-indigo-500/50 hover:text-indigo-400 transition-colors"}," + Bullet ")])],64)):c.value.headings&&c.value.headings.length?(o(!0),r(h,{key:1},$(c.value.headings.slice(0,Math.ceil(c.value.headings.length/2)),(n,t)=>(o(),r("div",{key:"h-"+t,class:"space-y-1"},[e("h3",Cl,v(n.heading),1),e("p",jl,v(n.content),1)]))),128)):c.value.bullets&&c.value.bullets.length?(o(),r("ul",Tl,[(o(!0),r(h,null,$(ee(c.value.bullets||[])[0],n=>(o(),r("li",{key:n.index,class:"flex gap-3 text-zinc-300"},[l[47]||(l[47]=e("span",{class:"text-indigo-500 font-bold"},"•",-1)),e("span",{class:"text-sm lg:text-base leading-relaxed focus:outline-none inline-edit",contenteditable:"true","data-bullet-index":n.index,"data-placeholder":"Bullet",onInput:t=>ce(n.index,t),onKeydown:t=>ae(n.index,t),onBlur:t=>ue(n.index,t),innerHTML:Q(n.text)},null,40,Pl)]))),128))])):(o(),r("button",{key:3,onClick:l[16]||(l[16]=n=>we("left")),class:"h-full w-full flex items-center justify-center border-2 border-dashed border-white/5 rounded-lg hover:border-indigo-500/30 transition-colors cursor-pointer"},[...l[48]||(l[48]=[e("p",{class:"text-zinc-600 text-xs italic hover:text-indigo-400"},"+ Add content",-1)])]))]),e("div",Dl,[c.value.paragraphs&&c.value.paragraphs.length>1?(o(),r(h,{key:0},[e("div",Ll,[(o(!0),r(h,null,$(Je(c.value.paragraphs||[])[1],n=>(o(),r("p",{key:"pr-"+n.index,class:"text-sm lg:text-base text-zinc-300 leading-relaxed focus:outline-none inline-edit cursor-text",contenteditable:"true","data-paragraph-index":n.index,"data-placeholder":"Paragraph",onInput:t=>Se(n.index,t),onBlur:t=>Ce(n.index,t)},v(n.text),41,Ml))),128)),c.value.bullets&&c.value.bullets.length>1?(o(),r("ul",Bl,[(o(!0),r(h,null,$(ee(c.value.bullets||[])[1],n=>(o(),r("li",{key:"br-"+n.index,class:"flex gap-3 text-zinc-300"},[l[49]||(l[49]=e("span",{class:"text-indigo-500 font-bold"},"•",-1)),e("span",{class:"text-sm lg:text-base leading-relaxed focus:outline-none inline-edit",contenteditable:"true","data-bullet-index":n.index,"data-placeholder":"Bullet",onInput:t=>ce(n.index,t),onKeydown:t=>ae(n.index,t),onBlur:t=>ue(n.index,t),innerHTML:Q(n.text)},null,40,El)]))),128))])):w("",!0)]),e("div",Nl,[e("button",{onClick:l[17]||(l[17]=n=>we("right")),class:"flex-1 py-2 border border-dashed border-white/10 rounded text-zinc-600 text-xs hover:border-indigo-500/50 hover:text-indigo-400 transition-colors"}," + Paragraph "),e("button",{onClick:_e,class:"flex-1 py-2 border border-dashed border-white/10 rounded text-zinc-600 text-xs hover:border-indigo-500/50 hover:text-indigo-400 transition-colors"}," + Bullet ")])],64)):c.value.headings&&c.value.headings.length>1?(o(!0),r(h,{key:1},$(c.value.headings.slice(Math.ceil(c.value.headings.length/2)),(n,t)=>(o(),r("div",{key:"hr-"+t,class:"space-y-1"},[e("h3",ql,v(n.heading),1),e("p",Hl,v(n.content),1)]))),128)):c.value.bullets&&c.value.bullets.length>1?(o(),r("ul",Rl,[(o(!0),r(h,null,$(ee(c.value.bullets||[])[1],n=>(o(),r("li",{key:n.index,class:"flex gap-3 text-zinc-300"},[l[50]||(l[50]=e("span",{class:"text-indigo-500 font-bold"},"•",-1)),e("span",{class:"text-sm lg:text-base leading-relaxed focus:outline-none inline-edit",contenteditable:"true","data-bullet-index":n.index,"data-placeholder":"Bullet",onInput:t=>ce(n.index,t),onKeydown:t=>ae(n.index,t),onBlur:t=>ue(n.index,t),innerHTML:Q(n.text)},null,40,Al)]))),128))])):(o(),r("button",{key:3,onClick:l[18]||(l[18]=n=>we("right")),class:"h-full w-full flex items-center justify-center border-2 border-dashed border-white/5 rounded-lg hover:border-indigo-500/30 transition-colors cursor-pointer"},[...l[51]||(l[51]=[e("p",{class:"text-zinc-600 text-xs italic hover:text-indigo-400"},"+ Add content",-1)])]))])])):(c.value.layout||"bullets")==="image_left"||(c.value.layout||"bullets")==="image_right"?(o(),r("div",Fl,[e("div",{class:R(["w-1/2 rounded-lg border border-white/10 bg-white/5 flex items-center justify-center relative overflow-hidden",(c.value.layout||"bullets")==="image_left"?"order-1":"order-2"]),onMousedown:Ue(Z,["prevent"]),onTouchstart:Ue(Z,["prevent"])},[c.value.image_url?w("",!0):(o(),r("button",{key:0,type:"button",class:"absolute inset-0 z-10",onClick:be})),c.value.image_url?(o(),r("img",{key:1,src:c.value.image_url,alt:"Slide visual",class:"h-full w-full cursor-grab",style:lt({objectFit:c.value.image_fit||"cover",objectPosition:`${c.value.image_position_x??50}% ${c.value.image_position_y??50}%`,transform:`scale(${c.value.image_scale||1})`})},null,12,Ol)):(o(),r("span",Ul,"Click to insert image")),c.value.image_url?(o(),r("div",Gl,[i(a(y),{variant:"ghost",size:"sm",class:"h-6 text-[10px] gap-1 text-zinc-200 hover:bg-white/10",onClick:Ue(Ie,["stop"])},{default:p(()=>[...l[52]||(l[52]=[f(" Replace ",-1)])]),_:1}),i(a(y),{variant:"ghost",size:"sm",class:"h-6 text-[10px] gap-1 text-rose-200 hover:bg-white/10",onClick:Ue(Me,["stop"])},{default:p(()=>[...l[53]||(l[53]=[f(" Remove ",-1)])]),_:1}),e("select",{class:"ml-auto h-6 bg-zinc-950/60 border border-white/10 rounded-md px-1 text-[10px] text-zinc-200 focus:ring-1 focus:ring-indigo-500 outline-none",value:c.value.image_fit||"cover",onChange:K},[...l[54]||(l[54]=[e("option",{value:"cover"},"Cover",-1),e("option",{value:"contain"},"Contain",-1)])],40,Kl),e("input",{type:"range",min:"0.5",max:"2",step:"0.05",class:"w-20",value:c.value.image_scale||1,onInput:Qe},null,40,Ql)])):w("",!0)],34),e("div",{class:R(["flex-1 overflow-auto flex flex-col",(c.value.layout||"bullets")==="image_left"?"order-2":"order-1"])},[c.value.paragraphs?.length&&c.value.bullets?.length||c.value.mixed_content?.length?(o(),r("div",Vl,[(o(!0),r(h,null,$(te.value,(n,t)=>(o(),r("div",{key:"mixed-"+t,class:"group/item flex items-start gap-2 relative"},[e("div",Yl,[e("button",{onClick:s=>Re(t,"up"),disabled:t===0,class:"p-0.5 text-zinc-500 hover:text-indigo-400 disabled:opacity-20 disabled:cursor-not-allowed"},[i(a(Rt),{class:"h-3 w-3"})],8,Xl),e("button",{onClick:s=>Re(t,"down"),disabled:t===te.value.length-1,class:"p-0.5 text-zinc-500 hover:text-indigo-400 disabled:opacity-20 disabled:cursor-not-allowed"},[i(a(At),{class:"h-3 w-3"})],8,Jl)]),e("div",Wl,[n.type==="bullet"?(o(),r("span",Zl,"•")):w("",!0),De(e("span",{class:"flex-1 text-sm lg:text-base leading-relaxed focus:outline-none inline-edit cursor-text text-zinc-300",contenteditable:"true","data-mixed-index":t,onBlur:s=>Te(t,s)},null,40,en),[[Ae,n.text]])]),e("button",{onClick:s=>ut(t),class:"p-1 text-zinc-600 hover:text-rose-400 opacity-0 group-hover/item:opacity-100 transition-opacity shrink-0"},[i(a(jt),{class:"h-3 w-3"})],8,tn)]))),128)),e("div",sn,[e("button",{onClick:l[19]||(l[19]=n=>J("paragraph")),class:"flex-1 py-2 border border-dashed border-white/10 rounded text-zinc-600 text-xs hover:border-indigo-500/50 hover:text-indigo-400 transition-colors"}," + Paragraph "),e("button",{onClick:l[20]||(l[20]=n=>J("bullet")),class:"flex-1 py-2 border border-dashed border-white/10 rounded text-zinc-600 text-xs hover:border-indigo-500/50 hover:text-indigo-400 transition-colors"}," + Bullet ")])])):c.value.paragraphs&&c.value.paragraphs.length?(o(),r("div",ln,[(o(!0),r(h,null,$(c.value.paragraphs,(n,t)=>(o(),r("p",{key:"p-"+t,class:"text-sm lg:text-base text-zinc-300 leading-relaxed focus:outline-none inline-edit cursor-text",contenteditable:"true","data-paragraph-index":t,"data-placeholder":"Paragraph",onInput:s=>Se(t,s),onBlur:s=>Ce(t,s)},v(n),41,nn))),128)),e("div",{class:"flex gap-2"},[e("button",{onClick:We,class:"flex-1 py-2 border border-dashed border-white/10 rounded text-zinc-600 text-xs hover:border-indigo-500/50 hover:text-indigo-400 transition-colors"}," + Paragraph "),e("button",{onClick:_e,class:"flex-1 py-2 border border-dashed border-white/10 rounded text-zinc-600 text-xs hover:border-indigo-500/50 hover:text-indigo-400 transition-colors"}," + Bullet ")])])):c.value.headings&&c.value.headings.length?(o(),r("div",an,[(o(!0),r(h,null,$(c.value.headings,(n,t)=>(o(),r("div",{key:"h-"+t,class:"space-y-1"},[e("h3",on,v(n.heading),1),e("p",rn,v(n.content),1)]))),128)),e("button",{onClick:_e,class:"w-full py-2 border border-dashed border-white/10 rounded text-zinc-600 text-xs hover:border-indigo-500/50 hover:text-indigo-400 transition-colors"}," + Add bullet ")])):c.value.bullets&&c.value.bullets.length?(o(),r("ul",dn,[(o(!0),r(h,null,$(c.value.bullets,(n,t)=>(o(),r("li",{key:t,class:"flex gap-3 text-zinc-300"},[l[55]||(l[55]=e("span",{class:"text-indigo-500 font-bold"},"•",-1)),e("span",{class:"text-sm lg:text-base leading-relaxed focus:outline-none inline-edit",contenteditable:"true","data-bullet-index":t,"data-placeholder":"Bullet",onInput:s=>ce(t,s),onKeydown:s=>ae(t,s),onBlur:s=>ue(t,s),innerHTML:Q(n)},null,40,cn)]))),128))])):(o(),r("div",un,[l[56]||(l[56]=e("div",{class:"flex-1 flex items-center justify-center border-2 border-dashed border-white/5 rounded-lg"},[e("p",{class:"text-zinc-600 text-xs italic"},"No content yet")],-1)),e("div",pn,[e("button",{onClick:l[21]||(l[21]=n=>J("paragraph")),class:"flex-1 py-2 border border-dashed border-white/10 rounded text-zinc-600 text-xs hover:border-indigo-500/50 hover:text-indigo-400 transition-colors"}," + Paragraph "),e("button",{onClick:l[22]||(l[22]=n=>J("bullet")),class:"flex-1 py-2 border border-dashed border-white/10 rounded text-zinc-600 text-xs hover:border-indigo-500/50 hover:text-indigo-400 transition-colors"}," + Bullet ")])]))],2)])):(o(),r(h,{key:3},[c.value.content_type==="paragraphs"?(o(),r(h,{key:0},[c.value.paragraphs&&c.value.paragraphs.length?(o(),r("div",xn,[(o(!0),r(h,null,$(c.value.paragraphs,(n,t)=>(o(),r("p",{key:t,class:"text-sm lg:text-base text-zinc-300 leading-relaxed focus:outline-none inline-edit cursor-text",contenteditable:"true","data-paragraph-index":t,"data-placeholder":"Paragraph",onInput:s=>Se(t,s),onBlur:s=>Ce(t,s)},v(n),41,vn))),128)),e("div",{class:"flex gap-2"},[e("button",{onClick:We,class:"flex-1 py-2 border border-dashed border-white/10 rounded text-zinc-600 text-xs hover:border-indigo-500/50 hover:text-indigo-400 transition-colors"}," + Add paragraph "),e("button",{onClick:_e,class:"flex-1 py-2 border border-dashed border-white/10 rounded text-zinc-600 text-xs hover:border-indigo-500/50 hover:text-indigo-400 transition-colors"}," + Add bullet ")])])):c.value.headings&&c.value.headings.length?(o(),r("div",gn,[(o(!0),r(h,null,$(c.value.headings,(n,t)=>(o(),r("div",{key:t,class:"space-y-1.5"},[e("h3",fn,v(n.heading),1),e("p",hn,v(n.content),1)]))),128)),e("button",{onClick:_e,class:"w-full py-2 border border-dashed border-white/10 rounded text-zinc-600 text-xs hover:border-indigo-500/50 hover:text-indigo-400 transition-colors"}," + Add bullet ")])):(o(),r("button",{key:2,onClick:We,class:"h-full w-full flex items-center justify-center border-2 border-dashed border-white/5 rounded-lg hover:border-indigo-500/30 transition-colors cursor-pointer"},[...l[57]||(l[57]=[e("p",{class:"text-zinc-600 text-xs italic hover:text-indigo-400"},"+ Add paragraph",-1)])]))],64)):c.value.content_type==="mixed"?(o(),r("div",mn,[(o(!0),r(h,null,$(te.value,(n,t)=>(o(),r("div",{key:"mixed-"+t,class:"group/item flex items-start gap-2 relative"},[e("div",bn,[e("button",{onClick:s=>Re(t,"up"),disabled:t===0,class:"p-0.5 text-zinc-500 hover:text-indigo-400 disabled:opacity-20 disabled:cursor-not-allowed"},[i(a(Rt),{class:"h-3 w-3"})],8,yn),e("button",{onClick:s=>Re(t,"down"),disabled:t===te.value.length-1,class:"p-0.5 text-zinc-500 hover:text-indigo-400 disabled:opacity-20 disabled:cursor-not-allowed"},[i(a(At),{class:"h-3 w-3"})],8,wn)]),e("div",_n,[n.type==="bullet"?(o(),r("span",kn,"•")):w("",!0),De(e("span",{class:"flex-1 text-sm lg:text-base leading-relaxed focus:outline-none inline-edit cursor-text text-zinc-300",contenteditable:"true","data-mixed-index":t,onBlur:s=>Te(t,s)},null,40,$n),[[Ae,n.text]])]),e("button",{onClick:s=>ut(t),class:"p-1 text-zinc-600 hover:text-rose-400 opacity-0 group-hover/item:opacity-100 transition-opacity shrink-0"},[i(a(jt),{class:"h-3 w-3"})],8,zn)]))),128)),e("div",In,[e("button",{onClick:l[23]||(l[23]=n=>J("paragraph")),class:"flex-1 py-2 border border-dashed border-white/10 rounded text-zinc-600 text-xs hover:border-indigo-500/50 hover:text-indigo-400 transition-colors"}," + Paragraph "),e("button",{onClick:l[24]||(l[24]=n=>J("bullet")),class:"flex-1 py-2 border border-dashed border-white/10 rounded text-zinc-600 text-xs hover:border-indigo-500/50 hover:text-indigo-400 transition-colors"}," + Bullet ")])])):(o(),r(h,{key:2},[c.value.bullets&&c.value.bullets.length?(o(),r("ul",Sn,[(o(!0),r(h,null,$(c.value.bullets,(n,t)=>(o(),r("li",{key:t,class:"flex gap-3 text-zinc-300"},[l[58]||(l[58]=e("span",{class:"text-indigo-500 font-bold"},"•",-1)),e("span",{class:"text-sm lg:text-base leading-relaxed focus:outline-none inline-edit",contenteditable:"true","data-bullet-index":t,"data-placeholder":"Bullet",onInput:s=>ce(t,s),onKeydown:s=>ae(t,s),onBlur:s=>ue(t,s),innerHTML:Q(n)},null,40,Cn)]))),128))])):(o(),r("div",jn,[l[59]||(l[59]=e("div",{class:"flex-1 flex items-center justify-center border-2 border-dashed border-white/5 rounded-lg"},[e("p",{class:"text-zinc-600 text-xs italic"},"No content yet")],-1)),e("div",Tn,[e("button",{onClick:l[25]||(l[25]=n=>J("paragraph")),class:"flex-1 py-2 border border-dashed border-white/10 rounded text-zinc-600 text-xs hover:border-indigo-500/50 hover:text-indigo-400 transition-colors"}," + Paragraph "),e("button",{onClick:l[26]||(l[26]=n=>J("bullet")),class:"flex-1 py-2 border border-dashed border-white/10 rounded text-zinc-600 text-xs hover:border-indigo-500/50 hover:text-indigo-400 transition-colors"}," + Bullet ")])]))],64))],64))])])]),e("div",Pn,[(o(!0),r(h,null,$(_.value,(n,t)=>(o(),r("button",{key:t,onClick:s=>m("update:activeIndex",t),class:R(["w-1.5 h-1.5 rounded-full transition-all focus:outline-none",u.activeIndex===t?"bg-indigo-500 w-4":"bg-white/10 hover:bg-white/20"]),title:`Go to slide ${t+1}`},null,10,Dn))),128))])],512))],2)]),P.value?(o(),r("div",{key:2,ref_key:"presentationContainer",ref:A,class:"fixed inset-0 z-[100] bg-zinc-950 flex flex-col animate-in fade-in duration-300"},[e("button",{onClick:et,class:"absolute top-6 right-6 z-[110] p-2 bg-white/5 hover:bg-white/10 rounded-full text-zinc-400 hover:text-white transition-all"},[i(a(cs),{class:"h-6 w-6"})]),e("div",Ln,[e("button",{onClick:ie,disabled:u.activeIndex===0,class:"p-2 text-zinc-400 hover:text-white disabled:opacity-30 transition-all"},[i(a(at),{class:"h-8 w-8"})],8,Mn),e("div",Bn,[l[61]||(l[61]=e("span",{class:"text-[10px] font-bold text-indigo-500 uppercase tracking-widest"},"Slide",-1)),e("span",En,v(u.activeIndex+1)+" / "+v(_.value.length),1)]),e("button",{onClick:xe,disabled:u.activeIndex===_.value.length-1,class:"p-2 text-zinc-400 hover:text-white disabled:opacity-30 transition-all"},[i(a(it),{class:"h-8 w-8"})],8,Nn)]),l[71]||(l[71]=e("div",{class:"absolute bottom-10 right-10 z-[110] hidden md:block"},[e("div",{class:"flex items-center gap-3 px-4 py-2 bg-indigo-500/10 border border-indigo-500/20 rounded-full backdrop-blur-md"},[e("div",{class:"h-2 w-2 rounded-full bg-indigo-500 animate-pulse"}),e("span",{class:"text-[10px] font-mono font-bold text-indigo-400 uppercase tracking-[0.2em]"},"Live Presentation")])],-1)),e("div",{class:"flex-1 flex items-center justify-center p-0",ref_key:"presentationSlideRef",ref:D},[(o(),r("div",{key:u.activeIndex,class:"w-full h-full bg-zinc-950 relative overflow-hidden flex flex-col p-12 lg:p-24 lg:px-32 slide-in-premium"},[l[69]||(l[69]=e("div",{class:"absolute inset-0 bg-[radial-gradient(circle_at_50%_50%,rgba(99,102,241,0.08),transparent_70%)] pointer-events-none"},null,-1)),l[70]||(l[70]=e("div",{class:"absolute inset-0 bg-gradient-to-br from-indigo-500/5 via-transparent to-purple-500/5 pointer-events-none"},null,-1)),e("div",qn,[e("div",Hn,[e("div",{class:"slide-content w-full transition-transform duration-500 origin-center",style:lt({transform:`scale(${Pe.value})`})},[e("div",Rn,[e("span",An,v(d.project?.title||"DEFENSE PREPARATION"),1),(c.value.layout||"bullets")!=="title"?(o(),r("h1",Fn,v(c.value.title),1)):w("",!0)]),e("div",On,[(c.value.layout||"bullets")==="title"?(o(),r("div",Un,[l[62]||(l[62]=e("div",{class:"h-1 w-24 bg-indigo-500 mb-12 shadow-[0_0_20px_rgba(99,102,241,0.6)]"},null,-1)),e("h1",Gn,v(c.value.title),1),c.value.bullets&&c.value.bullets[0]?(o(),r("p",{key:0,class:"text-2xl lg:text-4xl text-zinc-400 font-light tracking-widest uppercase",innerHTML:Q(c.value.bullets[0])},null,8,Kn)):w("",!0),c.value.bullets&&c.value.bullets[1]?(o(),r("div",{key:1,class:"mt-12 text-sm lg:text-lg text-indigo-400/60 font-mono tracking-[0.4em] uppercase",innerHTML:Q(c.value.bullets[1])},null,8,Qn)):w("",!0)])):(c.value.layout||"bullets")==="two_column"?(o(),r("div",Vn,[e("div",Yn,[c.value.paragraphs&&c.value.paragraphs.length?(o(!0),r(h,{key:0},$(c.value.paragraphs,(n,t)=>(o(),r("p",{key:"p-"+t,class:"text-2xl lg:text-4xl text-zinc-100 font-medium leading-relaxed"},v(n),1))),128)):c.value.headings&&c.value.headings.length?(o(!0),r(h,{key:1},$(c.value.headings.slice(0,Math.ceil(c.value.headings.length/2)),(n,t)=>(o(),r("div",{key:"h-"+t,class:"space-y-4"},[e("h3",Xn,v(n.heading),1),e("p",Jn,v(n.content),1)]))),128)):c.value.bullets&&c.value.bullets.length?(o(),r("ul",Wn,[(o(!0),r(h,null,$(pe(c.value.bullets||[])[0],(n,t)=>(o(),r("li",{key:t,class:"flex gap-10 items-start group"},[l[63]||(l[63]=e("div",{class:"mt-5 h-3.5 w-3.5 rounded-full bg-indigo-500 shadow-[0_0_20px_rgba(99,102,241,0.6)] group-hover:scale-125 transition-transform duration-300 shrink-0"},null,-1)),e("p",{class:"text-3xl lg:text-5xl text-zinc-100 font-medium leading-[1.15] tracking-tight",innerHTML:Q(n)},null,8,Zn)]))),128))])):w("",!0)]),e("div",ea,[c.value.headings&&c.value.headings.length>1?(o(!0),r(h,{key:0},$(c.value.headings.slice(Math.ceil(c.value.headings.length/2)),(n,t)=>(o(),r("div",{key:"hr-"+t,class:"space-y-4"},[e("h3",ta,v(n.heading),1),e("p",sa,v(n.content),1)]))),128)):c.value.bullets&&c.value.bullets.length>1?(o(),r("ul",la,[(o(!0),r(h,null,$(pe(c.value.bullets||[])[1],(n,t)=>(o(),r("li",{key:t,class:"flex gap-10 items-start group"},[l[64]||(l[64]=e("div",{class:"mt-5 h-3.5 w-3.5 rounded-full bg-indigo-500 shadow-[0_0_20px_rgba(99,102,241,0.6)] group-hover:scale-125 transition-transform duration-300 shrink-0"},null,-1)),e("p",{class:"text-3xl lg:text-5xl text-zinc-100 font-medium leading-[1.15] tracking-tight",innerHTML:Q(n)},null,8,na)]))),128))])):w("",!0)])])):(c.value.layout||"bullets")==="image_left"||(c.value.layout||"bullets")==="image_right"?(o(),r("div",aa,[e("div",{class:R(["w-full lg:w-1/2 min-h-[400px] lg:min-h-0 rounded-3xl border border-white/10 bg-white/5 flex items-center justify-center relative overflow-hidden shadow-2xl",(c.value.layout||"bullets")==="image_left"?"lg:order-1":"lg:order-2"])},[c.value.image_url?(o(),r("img",{key:0,src:c.value.image_url,alt:"Slide visual",class:"h-full w-full object-contain",style:lt({objectPosition:`${c.value.image_position_x??50}% ${c.value.image_position_y??50}%`,transform:`scale(${c.value.image_scale||1})`})},null,12,ia)):(o(),r("span",oa,"No Visual Content"))],2),e("div",{class:R(["flex-1",(c.value.layout||"bullets")==="image_left"?"lg:order-2":"lg:order-1"])},[c.value.paragraphs&&c.value.paragraphs.length?(o(),r("div",ra,[(o(!0),r(h,null,$(c.value.paragraphs,(n,t)=>(o(),r("p",{key:"p-"+t,class:"text-2xl lg:text-4xl text-zinc-100 font-medium leading-relaxed"},v(n),1))),128))])):c.value.headings&&c.value.headings.length?(o(),r("div",da,[(o(!0),r(h,null,$(c.value.headings,(n,t)=>(o(),r("div",{key:"h-"+t,class:"space-y-4"},[e("h3",ca,v(n.heading),1),e("p",ua,v(n.content),1)]))),128))])):c.value.bullets&&c.value.bullets.length?(o(),r("ul",pa,[(o(!0),r(h,null,$(c.value.bullets,(n,t)=>(o(),r("li",{key:t,class:"flex gap-10 items-start"},[l[65]||(l[65]=e("div",{class:"mt-5 h-3.5 w-3.5 rounded-full bg-indigo-500 shadow-[0_0_20px_rgba(99,102,241,0.6)] shrink-0"},null,-1)),e("p",{class:"text-3xl lg:text-5xl text-zinc-100 font-medium leading-[1.15] tracking-tight",innerHTML:Q(n)},null,8,xa)]))),128))])):w("",!0)],2)])):(o(),r("div",va,[c.value.content_type==="paragraphs"?(o(),r(h,{key:0},[c.value.paragraphs&&c.value.paragraphs.length?(o(),r("div",ga,[(o(!0),r(h,null,$(c.value.paragraphs,(n,t)=>(o(),r("p",{key:t,class:"text-3xl lg:text-5xl text-zinc-100 font-medium leading-[1.15] tracking-tight"},v(n),1))),128))])):c.value.headings&&c.value.headings.length?(o(),r("div",fa,[(o(!0),r(h,null,$(c.value.headings,(n,t)=>(o(),r("div",{key:t,class:"space-y-4"},[e("h3",ha,v(n.heading),1),e("p",ma,v(n.content),1)]))),128))])):w("",!0)],64)):c.value.content_type==="mixed"?(o(),r("div",ba,[c.value.paragraphs&&c.value.paragraphs.length?(o(),r("div",ya,[(o(!0),r(h,null,$(c.value.paragraphs,(n,t)=>(o(),r("p",{key:"p-"+t,class:"text-2xl lg:text-4xl text-zinc-100 leading-relaxed"},v(n),1))),128))])):w("",!0),c.value.headings&&c.value.headings.length?(o(),r("div",wa,[(o(!0),r(h,null,$(c.value.headings,(n,t)=>(o(),r("div",{key:"h-"+t,class:"space-y-3"},[e("h3",_a,v(n.heading),1),e("p",ka,v(n.content),1)]))),128))])):w("",!0),c.value.bullets&&c.value.bullets.length?(o(),r("ul",$a,[(o(!0),r(h,null,$(c.value.bullets,(n,t)=>(o(),r("li",{key:"b-"+t,class:"flex gap-10 items-start"},[l[66]||(l[66]=e("div",{class:"mt-4 h-3 w-3 rounded-full bg-indigo-500 shadow-[0_0_20px_rgba(99,102,241,0.6)] shrink-0"},null,-1)),e("p",{class:"text-3xl lg:text-5xl text-zinc-100 font-medium leading-[1.15] tracking-tight",innerHTML:Q(n)},null,8,za)]))),128))])):w("",!0)])):(o(),r(h,{key:2},[c.value.bullets&&c.value.bullets.length?(o(),r("ul",Ia,[(o(!0),r(h,null,$(c.value.bullets,(n,t)=>(o(),r("li",{key:t,class:"flex gap-10 items-start"},[l[67]||(l[67]=e("div",{class:"mt-5 h-3.5 w-3.5 rounded-full bg-indigo-500 shadow-[0_0_20px_rgba(99,102,241,0.6)] shrink-0"},null,-1)),e("p",{class:"text-3xl lg:text-5xl text-zinc-100 font-medium leading-[1.15] tracking-tight",innerHTML:Q(n)},null,8,Sa)]))),128))])):w("",!0)],64))]))])],4)]),e("div",Ca,[l[68]||(l[68]=e("div",{class:"text-2xl lg:text-3xl font-bold tracking-tighter text-white"},[f(" FINALYZE"),e("span",{class:"text-indigo-500"},".")],-1)),e("div",ja,[e("div",Ta,v(d.project?.title||"DEFENSE PREPARATION"),1),e("div",Pa," Slide "+v(u.activeIndex+1),1)])])])]))],512)],512)):w("",!0)])):(o(),r("div",Da,[e("div",La,[i(a(ht),{class:"h-10 w-10 text-indigo-500/50"})]),l[72]||(l[72]=e("div",{class:"space-y-2 px-6"},[e("h3",{class:"text-xl font-bold text-white"},"No Slides Found"),e("p",{class:"text-sm text-zinc-500 max-w-xs mx-auto"}," Generate your defense deck to start building the perfect presentation. ")],-1))])),i(a(js),{open:V.value,"onUpdate:open":l[28]||(l[28]=n=>{V.value=n})},{default:p(()=>[i(a(_s),null,{default:p(()=>[i(a(ks),null,{default:p(()=>[i(a($s),null,{default:p(()=>[...l[73]||(l[73]=[f("Delete slide?",-1)])]),_:1}),i(a(zs),null,{default:p(()=>[...l[74]||(l[74]=[f(" This will permanently remove the slide from your deck. ",-1)])]),_:1})]),_:1}),i(a(Is),null,{default:p(()=>[i(a(Ss),{onClick:l[27]||(l[27]=n=>{V.value=!1,F.value=null})},{default:p(()=>[...l[75]||(l[75]=[f("Cancel ",-1)])]),_:1}),i(a(Cs),{class:"bg-rose-500 text-white hover:bg-rose-600",onClick:me},{default:p(()=>[...l[76]||(l[76]=[f(" Delete ",-1)])]),_:1})]),_:1})]),_:1})]),_:1},8,["open"])],64))}}),Gt=Zt(Ma,[["__scopeId","data-v-9b401f55"]]),Ba={class:"flex-1 min-h-[300px] relative overflow-hidden"},Ea={class:"text-xl md:text-4xl font-bold font-display text-white mb-6 md:mb-10 tracking-tight leading-tight"},Na={class:"flex-1 overflow-y-auto custom-scrollbar pr-4 md:pr-6 pb-4 max-w-4xl"},qa=["innerHTML"],Ha={key:1,class:"flex flex-col items-center justify-center h-full text-center space-y-4"},Ra={class:"h-12 w-12 rounded-full bg-indigo-500/10 flex items-center justify-center"},Aa={key:2,class:"absolute inset-0 bg-zinc-950/50 backdrop-blur-sm flex items-center justify-center z-10 rounded-xl"},Fa={class:"flex flex-col items-center gap-3"},Oa={key:0,class:"mt-6 pt-4 border-t border-white/5 flex items-center justify-between"},Ua={class:"flex items-center gap-1.5"},Ga=["onClick"],Ka={class:"flex items-center gap-2"},Qa={class:"text-sm font-mono text-zinc-500 w-12 text-center"},Kt=mt({__name:"ExecutiveBriefingDeck",props:{slides:{default:()=>[]},isLoading:{type:Boolean}},emits:["refresh"],setup(Y,{emit:C}){const u=Y,m=g(0),_=g(null),{isSwiping:P,direction:N}=ft(_);$e(P,(b,z)=>{z&&!b&&(N.value==="left"?G():N.value==="right"&&V())});const B=U(()=>u.slides[m.value]),G=()=>{m.value<u.slides.length-1&&m.value++},V=()=>{m.value>0&&m.value--},F=b=>{m.value=b},j=b=>{if(!b)return"";let z=b;return z=z.replace(/^#### (.*$)/gim,"<h4>$1</h4>"),z=z.replace(/^### (.*$)/gim,"<h3>$1</h3>"),z=z.replace(/^## (.*$)/gim,"<h2>$1</h2>"),z=z.replace(/^# (.*$)/gim,"<h1>$1</h1>"),z=z.replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>"),z=z.replace(/(?<!\*)\*([^*\n]+?)\*(?!\*)/g,"<em>$1</em>"),z.split(/\n\s*\n/).filter(S=>S.trim()).map(S=>{const k=S.trim();if(k.match(/^<h[1-4]>/))return k;if(k.includes(`
`)&&(k.match(/^\d+\.\s/)||k.match(/^[-*]\s/))){const A=k.split(`
`).map(q=>q.trim()).filter(q=>q),D=A.some(q=>q.match(/^\d+\.\s/)),M=A.map(q=>`<li>${q.replace(/^(\d+\.|[-*])\s/,"")}</li>`).join("");return D?`<ol>${M}</ol>`:`<ul>${M}</ul>`}return`<p>${k.replace(/\n/g,"<br>")}</p>`}).join("")};return(b,z)=>(o(),r("div",{class:"flex flex-col h-full relative",ref_key:"containerRef",ref:_},[e("div",Ba,[b.slides.length>0?(o(),he(Jt,{key:0,"enter-active-class":"transition-opacity duration-300 ease-out","enter-from-class":"opacity-0","enter-to-class":"opacity-100","leave-active-class":"transition-opacity duration-200 ease-in absolute inset-0","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:p(()=>[(o(),r("div",{key:m.value,class:"h-full flex flex-col"},[e("h3",Ea,v(B.value.title),1),e("div",Na,[e("div",{innerHTML:j(B.value.content),class:"prose-sm md:prose-xl dark:prose-invert leading-relaxed md:leading-loose tracking-wide [&_p]:mb-4 md:[&_p]:mb-6 [&_strong]:text-indigo-400 [&_strong]:font-semibold text-zinc-50 [&_ul]:list-none [&_ul]:pl-0 [&_ol]:list-decimal [&_ol]:pl-5 [&_li]:mb-4 md:[&_li]:mb-6 [&_li]:pl-4 [&_li]:border-l-2 [&_li]:border-indigo-500/50"},null,8,qa)])]))]),_:1})):b.isLoading?w("",!0):(o(),r("div",Ha,[e("div",Ra,[i(a(oe),{class:"h-6 w-6 text-indigo-500/50"})]),z[0]||(z[0]=e("p",{class:"text-base text-zinc-500 max-w-xs"}," No executive briefing yet. Click refresh to generate a summary. ",-1))])),b.isLoading?(o(),r("div",Aa,[e("div",Fa,[i(a(Wt),{class:"h-6 w-6 text-indigo-400 animate-spin"}),z[1]||(z[1]=e("span",{class:"text-xs font-medium text-indigo-300"},"Analyzing Project...",-1))])])):w("",!0)]),b.slides.length>0?(o(),r("div",Oa,[e("div",Ua,[(o(!0),r(h,null,$(b.slides,(E,S)=>(o(),r("button",{key:S,onClick:k=>F(S),class:R(["h-1.5 rounded-full transition-all duration-300",m.value===S?"w-6 bg-indigo-500":"w-1.5 bg-zinc-700 hover:bg-zinc-600"])},null,10,Ga))),128))]),e("div",Ka,[i(a(y),{variant:"ghost",size:"icon",class:"h-8 w-8 text-zinc-400 hover:text-white",disabled:m.value===0,onClick:V},{default:p(()=>[i(a(at),{class:"h-4 w-4"})]),_:1},8,["disabled"]),e("span",Qa,v(m.value+1)+" / "+v(b.slides.length),1),i(a(y),{variant:"ghost",size:"icon",class:"h-8 w-8 text-zinc-400 hover:text-white",disabled:m.value===b.slides.length-1,onClick:G},{default:p(()=>[i(a(it),{class:"h-4 w-4"})]),_:1},8,["disabled"])])])):w("",!0)],512))}}),Va={class:"flex-1 min-h-[350px] relative overflow-hidden"},Ya={key:0,class:"mb-6"},Xa={class:"mb-6 md:mb-10"},Ja={class:"flex items-start gap-3 md:gap-4"},Wa={class:"h-8 w-8 md:h-10 md:w-10 shrink-0 rounded-lg md:rounded-xl bg-rose-500/10 flex items-center justify-center"},Za={class:"text-xl md:text-4xl font-bold font-display text-white tracking-tight leading-snug md:leading-tight"},ei={class:"flex-1 overflow-y-auto custom-scrollbar pr-4 md:pr-6 pb-6"},ti={class:"relative pl-5 md:pl-6"},si={class:"flex items-center gap-2 mb-3 md:mb-4 text-indigo-400 font-medium text-[10px] md:text-sm tracking-wide uppercase"},li=["innerHTML"],ni={key:1,class:"flex flex-col items-center justify-center h-full text-center space-y-4"},ai={class:"h-16 w-16 rounded-full bg-rose-500/10 flex items-center justify-center"},ii={key:2,class:"absolute inset-0 bg-zinc-950/50 backdrop-blur-sm flex items-center justify-center z-10 rounded-3xl border border-white/5"},oi={class:"flex flex-col items-center gap-4"},ri={class:"relative"},di={key:0,class:"mt-8 pt-6 border-t border-white/5 flex items-center justify-between"},ci={class:"flex items-center gap-2"},ui=["onClick"],pi={class:"flex items-center gap-3"},xi={class:"flex flex-col items-center min-w-[3rem]"},vi={class:"text-base font-bold text-white leading-none"},gi={class:"text-[10px] text-zinc-500 font-mono uppercase mt-1"},Qt=mt({__name:"PredictedQuestionsDeck",props:{questions:{default:()=>[]},isLoading:{type:Boolean}},setup(Y){const C=Y,u=g(0),m=g(null),{isSwiping:_,direction:P}=ft(m);$e(_,(j,b)=>{b&&!j&&(P.value==="left"?B():P.value==="right"&&G())});const N=U(()=>C.questions[u.value]),B=()=>{u.value<C.questions.length-1&&u.value++},G=()=>{u.value>0&&u.value--},V=j=>{u.value=j},F=j=>j?j.split(`

`).map(b=>`<p>${b.trim().replace(/\n/g,"<br>")}</p>`).join(""):"";return(j,b)=>(o(),r("div",{class:"flex flex-col h-full relative",ref_key:"containerRef",ref:m},[e("div",Va,[j.questions.length>0?(o(),he(Jt,{key:0,"enter-active-class":"transition-opacity duration-300 ease-out","enter-from-class":"opacity-0","enter-to-class":"opacity-100","leave-active-class":"transition-opacity duration-200 ease-in absolute inset-0","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:p(()=>[(o(),r("div",{key:u.value,class:"h-full flex flex-col pt-2"},[N.value.category?(o(),r("div",Ya,[i(a(ke),{variant:"outline",class:"text-[10px] uppercase tracking-widest bg-rose-500/5 text-rose-400 border-rose-500/20 px-3 py-1"},{default:p(()=>[f(v(N.value.category),1)]),_:1})])):w("",!0),e("div",Xa,[e("div",Ja,[e("div",Wa,[i(a(us),{class:"h-4 w-4 md:h-5 md:w-5 text-rose-500"})]),e("h3",Za,v(N.value.question),1)])]),e("div",ei,[e("div",ti,[b[1]||(b[1]=e("div",{class:"absolute left-0 top-0 bottom-0 w-1 bg-gradient-to-b from-indigo-500 to-transparent rounded-full opacity-50"},null,-1)),e("div",si,[i(a(ps),{class:"h-3 w-3 md:h-4 md:w-4"}),b[0]||(b[0]=e("span",null,"Defense Strategy",-1))]),e("div",{innerHTML:F(N.value.suggested_answer),class:"text-zinc-300 text-base md:text-xl leading-relaxed tracking-wide italic font-serif [&_p]:mb-4 md:[&_p]:mb-6"},null,8,li)])])]))]),_:1})):j.isLoading?w("",!0):(o(),r("div",ni,[e("div",ai,[i(a(Ke),{class:"h-8 w-8 text-rose-500/50"})]),b[2]||(b[2]=e("div",{class:"space-y-2"},[e("p",{class:"text-lg font-medium text-white"},"No questions identified"),e("p",{class:"text-sm text-zinc-500 max-w-xs"}," Generate defense questions to prepare for potential examiner inquiry. ")],-1))])),j.isLoading?(o(),r("div",ii,[e("div",oi,[e("div",ri,[i(a(Wt),{class:"h-10 w-10 text-rose-500 animate-spin"}),i(a(oe),{class:"h-4 w-4 text-rose-400 absolute -top-1 -right-1 animate-pulse"})]),b[3]||(b[3]=e("span",{class:"text-sm font-medium text-rose-200"},"Simulating Defense Panel...",-1))])])):w("",!0)]),j.questions.length>0?(o(),r("div",di,[e("div",ci,[(o(!0),r(h,null,$(j.questions,(z,E)=>(o(),r("button",{key:E,onClick:S=>V(E),class:R(["h-2 rounded-full transition-all duration-300",u.value===E?"w-8 bg-rose-500":"w-2 bg-zinc-800 hover:bg-zinc-700"])},null,10,ui))),128))]),e("div",pi,[i(a(y),{variant:"ghost",size:"icon",class:"h-10 w-10 rounded-xl border border-white/5 text-zinc-400 hover:text-white hover:bg-white/5 transition-all",disabled:u.value===0,onClick:G},{default:p(()=>[i(a(at),{class:"h-5 w-5"})]),_:1},8,["disabled"]),e("div",xi,[e("span",vi,v(u.value+1),1),e("span",gi,v(j.questions.length)+" Total",1)]),i(a(y),{variant:"ghost",size:"icon",class:"h-10 w-10 rounded-xl border border-white/5 text-zinc-400 hover:text-white hover:bg-white/5 transition-all",disabled:u.value===j.questions.length-1,onClick:B},{default:p(()=>[i(a(it),{class:"h-5 w-5"})]),_:1},8,["disabled"])])])):w("",!0)],512))}});function fi(Y){const C=g(null),u=g([]),m=g(null),_=g(null),P=g(!1),N=g(!1),B=g(!1),G=U(()=>!!C.value);return{session:C,messages:u,feedback:m,performanceMetrics:_,isStarting:P,isLoading:N,isSending:B,hasSession:G,startSession:async S=>{if(!P.value){P.value=!0;try{const{data:k}=await H.post(`/api/projects/${Y}/defense/sessions`,S);return C.value=k.session,u.value=[],m.value=null,_.value=C.value?.performance_metrics??null,k.session}finally{P.value=!1}}},loadSession:async S=>{if(!N.value){N.value=!0;try{const{data:k}=await H.get(`/api/projects/${Y}/defense/sessions/${S}`);C.value=k.session,u.value=k.session?.messages??[],m.value=k.session?.feedback??null,_.value=k.session?.performance_metrics??null}finally{N.value=!1}}},getNextQuestion:async(S,k,A)=>{const{data:D}=await H.get(`/api/projects/${Y}/defense/sessions/${S}/next-question`,{params:{...k?{persona:k}:{},...A?{request_hint:1}:{}}});return u.value.push(D.message),C.value=D.session,D.message},sendResponse:async(S,k,A)=>{if(B.value)return;B.value=!0;const D=-Date.now(),M={id:D,session_id:S,role:"student",panelist_persona:null,content:k,response_time_ms:A??null};u.value.push(M);try{const{data:q}=await H.post(`/api/projects/${Y}/defense/sessions/${S}/respond`,{response:k,response_time_ms:A}),I=u.value.findIndex(re=>re.id===D);return I>=0?u.value[I]=q.message:u.value.push(q.message),_.value=q.performance_metrics,q}catch(q){throw u.value=u.value.filter(I=>I.id!==D),q}finally{B.value=!1}},endSession:async S=>{const{data:k}=await H.post(`/api/projects/${Y}/defense/sessions/${S}/end`);return C.value=k.session,m.value=k.feedback,_.value=k.session?.performance_metrics??null,k.feedback},loadTranscript:async S=>{const{data:k}=await H.get(`/api/projects/${Y}/defense/sessions/${S}/transcript`);return u.value=k.messages,k.messages}}}const hi={class:"mx-auto max-w-7xl px-4 py-8 sm:px-6 lg:px-8"},mi={class:"flex flex-col gap-6 md:flex-row md:items-end md:justify-between mb-12"},bi={class:"space-y-4"},yi={class:"flex items-center gap-2"},wi={key:0,class:"flex items-start justify-between gap-3 rounded-2xl border border-amber-500/30 bg-amber-500/10 px-4 py-3 text-sm text-amber-100/90"},_i={class:"flex flex-row md:flex-col items-center gap-4 md:gap-3 p-4 md:p-6 rounded-3xl border border-primary/10 bg-primary/5 backdrop-blur-sm w-full md:w-auto"},ki={class:"relative flex items-center justify-center shrink-0"},$i={class:"h-16 w-16 md:h-20 md:w-20 transform -rotate-90"},zi=["stroke-dasharray","stroke-dashoffset"],Ii=["stroke-dasharray","stroke-dashoffset"],Si={class:"absolute text-base md:text-xl font-bold"},Ci={class:"flex p-1 rounded-2xl bg-muted/50 border border-border/50 mb-8 w-full sm:w-auto sm:inline-flex"},ji={key:0,class:"grid gap-8 lg:grid-cols-12 animate-in fade-in slide-in-from-bottom-4 duration-700"},Ti={class:"lg:col-span-8 space-y-8 transition-all duration-500"},Pi={class:"flex flex-col sm:flex-row sm:items-center justify-between gap-4 sm:gap-0"},Di={class:"flex items-center gap-2"},Li={key:0,class:"h-full"},Mi={key:1,class:"relative z-10 space-y-4"},Bi={key:2,class:"flex flex-col items-center justify-center py-12 text-center space-y-4"},Ei={class:"h-12 w-12 rounded-full bg-indigo-500/10 flex items-center justify-center"},Ni={class:"space-y-4 animate-in fade-in slide-in-from-bottom-4 duration-500 delay-75"},qi={class:"flex flex-col sm:flex-row sm:items-center justify-between gap-4 sm:gap-0"},Hi={class:"flex items-center gap-2"},Ri={class:"space-y-4 animate-in fade-in slide-in-from-bottom-4 duration-500"},Ai={class:"flex flex-col sm:flex-row sm:items-center justify-between gap-4 sm:gap-0"},Fi={class:"flex items-center gap-2"},Oi={class:"flex flex-col sm:flex-row sm:items-center justify-between gap-4 sm:gap-0"},Ui={class:"flex items-center gap-2"},Gi={key:0,class:"h-full"},Ki={key:1,class:"relative z-10 space-y-4"},Qi={key:2,class:"flex flex-col items-center justify-center py-12 text-center space-y-4"},Vi={class:"h-12 w-12 rounded-full bg-indigo-500/10 flex items-center justify-center"},Yi={class:"relative"},Xi={class:"absolute bottom-3 right-3 flex items-center gap-2"},Ji={class:"grid grid-cols-1 sm:grid-cols-2 gap-3"},Wi={key:0,class:"text-sm text-muted-foreground border-t border-emerald-500/10 pt-4 mt-2"},Zi={class:"lg:col-span-4 space-y-8"},eo={class:"relative z-10 flex items-center gap-3 mb-2"},to={class:"p-2 bg-indigo-500/10 rounded-xl backdrop-blur-md border border-indigo-500/20"},so={class:"relative z-10 flex flex-col md:flex-row md:items-center justify-between gap-4"},lo={class:"flex flex-col items-end gap-1.5"},no={class:"flex items-center gap-1.5"},ao={key:0,class:"mb-3 text-[11px] text-zinc-400"},io={key:0},oo={key:1},ro={key:2},co={key:3},uo={key:4},po={key:5},xo={key:6},vo={key:7},go={key:8},fo={key:1,class:"mb-3 text-[11px] text-rose-400"},ho={class:"flex items-center justify-between mb-2 shrink-0"},mo={class:"text-xl font-display font-bold text-white flex items-center gap-2"},bo={class:"flex-1 min-h-0 overflow-hidden"},yo={key:0,class:"text-xs text-muted-foreground"},wo={key:1,class:"text-xs text-muted-foreground"},_o={key:2,class:"space-y-3"},ko={class:"space-y-1"},$o={class:"text-xs font-semibold text-foreground"},zo={class:"text-[11px] text-muted-foreground"},Io={key:1,class:"flex flex-col items-center justify-center py-20 animate-in zoom-in-95 duration-700"},So={class:"relative mb-8"},Co={class:"grid grid-cols-1 md:grid-cols-2 gap-6 w-full max-w-5xl mb-12"},jo={class:"text-xs text-muted-foreground/80"},To={class:"grid grid-cols-1 md:grid-cols-3 gap-6 w-full max-w-4xl mb-12"},Po={class:"text-4xl mb-4"},Do={class:"font-bold"},Lo={class:"text-xs text-muted-foreground leading-relaxed"},Mo={key:2,class:"fixed inset-0 z-50 bg-zinc-950 flex flex-col items-center p-4 md:p-8 animate-in fade-in duration-500"},Bo={class:"w-full max-w-6xl flex items-center justify-between mb-8"},Eo={class:"flex items-center gap-4"},No={class:"flex items-center gap-2 bg-zinc-900 px-4 py-2 rounded-full border border-zinc-800"},qo={class:"flex items-center gap-2 bg-zinc-900 px-4 py-2 rounded-full border border-zinc-800"},Ho={class:"text-xs text-zinc-300"},Ro={class:"grid lg:grid-cols-12 gap-8 w-full max-w-6xl flex-grow overflow-hidden"},Ao={class:"lg:col-span-4 space-y-4 md:space-y-6 overflow-y-auto pr-2 custom-scrollbar"},Fo={class:"grid grid-cols-1 sm:grid-cols-3 lg:grid-cols-1 gap-4 md:gap-6"},Oo={class:"flex items-center gap-3 md:gap-4"},Uo={class:"h-10 w-10 md:h-12 md:w-12 rounded-2xl bg-zinc-800 flex items-center justify-center text-xl md:text-2xl"},Go={class:"flex-1 min-w-0"},Ko={class:"flex items-center justify-between gap-2"},Qo={class:"font-bold text-zinc-200 text-sm md:text-base truncate"},Vo={class:"text-[10px] md:text-xs text-zinc-500 truncate"},Yo={class:"text-[10px] md:text-xs text-zinc-600"},Xo={class:"grid grid-cols-3 lg:grid-cols-1 gap-4 md:gap-6"},Jo={class:"space-y-2"},Wo={class:"flex items-center justify-between text-[10px] md:text-xs"},Zo={class:"text-zinc-200"},er={class:"space-y-2"},tr={class:"flex items-center justify-between text-[10px] md:text-xs"},sr={class:"text-zinc-200"},lr={class:"space-y-2"},nr={class:"flex items-center justify-between text-[10px] md:text-xs"},ar={class:"text-zinc-200"},ir={class:"lg:col-span-8 flex flex-col bg-zinc-900/40 rounded-[2.5rem] border border-zinc-800/50 backdrop-blur-xl overflow-hidden"},or={class:"space-y-10 max-w-3xl mx-auto py-8"},rr={class:"flex items-center gap-2 mb-2 px-1"},dr={class:"text-[10px] font-bold text-zinc-500 uppercase tracking-widest"},cr={class:"text-[8px] text-zinc-600"},ur={key:0,class:"mt-3 flex gap-4 px-2"},pr={class:"text-[10px] font-bold text-zinc-600 hover:text-zinc-400 uppercase tracking-tighter flex items-center gap-1"},xr={class:"text-[10px] font-bold text-zinc-600 hover:text-zinc-400 uppercase tracking-tighter flex items-center gap-1"},vr={class:"p-4 md:p-8 border-t border-zinc-800/50 bg-black/20"},gr={class:"relative max-w-3xl mx-auto"},fr=["disabled"],hr={class:"absolute right-3 md:right-4 top-1/2 -translate-y-1/2 flex items-center gap-2"},mr={class:"mt-4 flex justify-center gap-6"},br={class:"flex items-center gap-2 text-[10px] font-bold text-zinc-500 hover:text-white transition-colors uppercase tracking-widest"},gt=10,yr=mt({__name:"Defense",props:{project:{}},setup(Y){const C=Y,u=g("preparation"),m=g(!1),_=g(72),P=g(null),N=g(!1),B=g([{id:"skeptic",name:"The Skeptic",role:"Critical Reviewer",avatar:"🧐",color:"text-amber-500"},{id:"methodologist",name:"The Methodologist",role:"Technical Expert",avatar:"🧪",color:"text-blue-500"},{id:"generalist",name:"The Generalist",role:"Value Reviewer",avatar:"🌍",color:"text-green-500"}]),G=g([]),V=g(!1),F=g(!1),j=g(""),b=g(null),z=g([]),E=g(!1),S=g([]);g(0),g(0);const k=g(null);g(!1);const A=g(!1);g("slides");const D=g("idle"),M=g(null),q=g(null),I=g(!1),re=g(null),X=g(null),ne=g([]),me=g(0),be=g(!1),de=g(""),Le=g(null),ze=g(!1),Ie=g(!1),Me=g(!1),Qe=g(null),{session:K,messages:ot,performanceMetrics:Z,startSession:Be,loadSession:Ee,getNextQuestion:Ne,sendResponse:qe,endSession:ye,isStarting:ce,isSending:ue}=fi(C.project.id),ae=g(!1),He=()=>{ae.value=!ae.value},bt=U(()=>B.value.reduce((t,s)=>(t[s.id]=s.name,t),{})),O=t=>{const s=t?.response,x=s?.data?.message;return s?.status===402||x&&x.includes("Insufficient credit balance")?(P.value=x||"Insufficient credit balance. Please top up to continue.",Lt.error(P.value),!0):!1},yt=()=>{P.value=null},Ve=t=>{if(!t)return[];if(Array.isArray(t))return t;if(typeof t=="string")try{return Ve(JSON.parse(t))}catch{return[]}if(typeof t=="object"){const s=t.slides;return s?Ve(s):Object.values(t)}return[]},wt=async()=>{if(!ce.value)try{const t=await H.get(`/api/projects/${C.project.id}/defense/sessions/active`);if(t.data.session){await ie(t.data.session.id);return}const s=B.value.map(x=>x.id);await Be({selected_panelists:s,difficulty_level:"undergraduate",question_limit:gt}),m.value=!0,u.value="simulation",K.value&&await Xe()}catch(t){if(O(t))return;console.error("Failed to start simulation:",t)}},Ye=async(t=!1)=>{if(!N.value){N.value=t,console.log("[Defense] Finish & Analysis clicked",{sessionId:K.value?.id,status:K.value?.status});try{if(K.value){const s=await ye(K.value.id);console.log("[Defense] endSession response",s),s?.recommendations&&s.recommendations.toLowerCase().includes("credit balance")&&(P.value=s.recommendations,Lt.error(s.recommendations)),t&&Lt.success("Simulation completed. Your score is ready.")}}catch(s){if(O(s))return;console.error("[Defense] Failed to end simulation:",s)}finally{await xe(),m.value=!1,u.value="preparation",N.value=!1}}},_t=async()=>{if(!K.value||!j.value.trim())return;const t=j.value.trim();j.value="";try{if(await qe(K.value.id,t),K.value?.question_limit&&K.value.questions_asked>=K.value.question_limit){await Ye(!0);return}await Xe()}catch(s){if(O(s))return;console.error("Failed to submit response:",s)}},Xe=async(t=!1)=>{if(K.value){Me.value=!0;try{const s=await Ne(K.value.id,void 0,t);Qe.value=s.panelist_persona??null}catch(s){if(O(s))return;const x=s?.response?.data?.message;if(x&&x.toLowerCase().includes("question limit")){await Ye(!0);return}console.error("Failed to fetch next question:",s)}finally{Me.value=!1}}},kt=async()=>{!K.value||Me.value||await Xe(!0)},T=async()=>{if(!E.value){E.value=!0;try{const s=(await H.get(`/api/projects/${C.project.id}/defense/executive-briefing`,{params:{force_refresh:1}})).data.briefing;if(typeof s=="string"&&s.includes("```json"))try{const x=s.replace(/```json\n?|\n?```/g,""),L=JSON.parse(x);z.value=L.slides||[],b.value=null}catch(x){console.warn("Failed to parse briefing JSON",x),b.value=s,z.value=[]}else typeof s=="object"&&s.slides?(z.value=s.slides,b.value=null):(b.value=s??null,z.value=[])}catch(t){O(t),console.error("Failed to load executive briefing:",t)}finally{E.value=!1}}},rt=t=>{if(t)if(typeof t=="string"&&t.includes("```json"))try{const s=t.replace(/```json\n?|\n?```/g,""),x=JSON.parse(s);S.value=x.slides||[],k.value=null}catch(s){console.warn("Failed to parse presentation guide JSON",s),k.value=t,S.value=[]}else if(typeof t=="object"&&t.slides)S.value=t.slides,k.value=null;else if(typeof t=="string"&&t.trim().startsWith("{"))try{const s=JSON.parse(t);S.value=s.slides||[],k.value=null}catch{k.value=t,S.value=[]}else k.value=t,S.value=[]},dt=async()=>{if(!(ze.value||!de.value.trim())){ze.value=!0;try{const t=await H.post(`/api/projects/${C.project.id}/defense/opening-statement/analyze`,{opening_statement:de.value.trim()});Le.value=t.data.analysis??null}catch(t){O(t),console.error("Failed to analyze opening statement:",t)}finally{ze.value=!1}}},Q=async()=>{if(!Ie.value){Ie.value=!0;try{const t=await H.get(`/api/projects/${C.project.id}/defense/opening-statement`,{params:{force_refresh:1}});de.value=t.data.opening_statement??""}catch(t){O(t),console.error("Failed to generate opening statement:",t)}finally{Ie.value=!1}}},pe=t=>{if(!t){D.value="idle",M.value=null,q.value=null,X.value=null,ne.value=[];return}D.value=t.status||"idle",M.value=t.pptx_url??null,q.value=t.error_message??null,X.value=t.id??null,ne.value=Ve(t.slides),ne.value.length&&me.value>=ne.value.length&&(me.value=0)},ee=()=>{re.value&&(clearInterval(re.value),re.value=null)},Je=()=>{ee(),re.value=setInterval(()=>{Se()},6e3)},Se=async()=>{try{const s=(await H.get(`/api/projects/${C.project.id}/defense/deck`)).data.deck??null;pe(s),(s?.status==="ready"||s?.status==="outlined"||s?.status==="failed"||s?.status==="idle")&&ee()}catch(t){if(O(t))return;console.error("Failed to refresh defense deck status:",t)}},Ce=async(t=!1)=>{if(!I.value){I.value=!0;try{const s=await H.post(`/api/projects/${C.project.id}/defense/deck`,{force_refresh:t?1:0});pe(s.data.deck??null),s.data.deck?.status!=="ready"&&Je()}catch(s){if(O(s))return;console.error("Failed to generate defense deck:",s)}finally{I.value=!1}}},We=async()=>{if(X.value){I.value=!0,console.log("[DefenseDeck] Export requested",{projectId:C.project.id,deckId:X.value});try{const t=await H.post(`/api/projects/${C.project.id}/defense/deck/${X.value}/export`);console.log("[DefenseDeck] Export response",t.data),pe(t.data.deck??null),Je()}catch(t){if(console.error("[DefenseDeck] Export failed",t),O(t))return;console.error("Failed to export defense deck:",t)}finally{I.value=!1}}},we=async()=>{if(X.value){I.value=!0;try{const t=await H.post(`/api/projects/${C.project.id}/defense/deck/${X.value}/export`);pe(t.data.deck??null),(()=>{ee(),re.value=setInterval(async()=>{try{const L=(await H.get(`/api/projects/${C.project.id}/defense/deck`)).data.deck??null;if(pe(L),L?.status==="ready"&&L?.pptx_url){ee(),I.value=!1;const se=document.createElement("a");se.href=L.pptx_url,se.click()}else L?.status==="failed"&&(ee(),I.value=!1)}catch(x){console.error("Poll failed",x)}},3e3)})()}catch(t){if(O(t))return;console.error("Failed to export defense deck:",t),I.value=!1}}},_e=async t=>{if(X.value){be.value=!0;try{const s=await H.patch(`/api/projects/${C.project.id}/defense/deck/${X.value}`,{slides:t});pe(s.data.deck??null)}catch(s){if(O(s))return;console.error("Failed to save defense deck slides:",s)}finally{be.value=!1}}},te=xs(t=>{_e(t)},800),je=t=>{ne.value=t,te(t)},Re=()=>{if(!M.value)return;const t=document.createElement("a");t.href=M.value,t.click()},ct=async()=>{if(!F.value){F.value=!0;try{const t=await H.post(`/api/projects/${C.project.id}/defense/questions/generate`,{count:5});G.value=t.data.questions||[]}catch(t){O(t),console.error("Failed to generate predicted questions:",t)}finally{F.value=!1}}},ut=async()=>{if(!V.value){V.value=!0;try{const t=await H.get(`/api/projects/${C.project.id}/defense/questions`,{params:{limit:5,skip_generation:1}});G.value=t.data.questions||[]}catch(t){O(t),console.error("Failed to load predicted questions:",t)}finally{V.value=!1}}},J=async()=>{try{const s=(await H.get(`/api/projects/${C.project.id}/defense/preparation`)).data.preparation;if(s){if(b.value=s.executive_briefing??null,s.executive_briefing){if(typeof s.executive_briefing=="string"&&s.executive_briefing.includes("```json"))try{const x=s.executive_briefing.replace(/```json\n?|\n?```/g,""),L=JSON.parse(x);z.value=L.slides||[],b.value=null}catch{}else if(typeof s.executive_briefing=="object"&&s.executive_briefing.slides)z.value=s.executive_briefing.slides,b.value=null;else if(typeof s.executive_briefing=="string"&&s.executive_briefing.trim().startsWith("{"))try{const x=JSON.parse(s.executive_briefing);z.value=x.slides||[],b.value=null}catch{}}s.presentation_guide&&rt(s.presentation_guide),de.value=s.opening_statement??"",Le.value=s.opening_analysis??null,s.opening_statement||await Q()}}catch(t){O(t),console.error("Failed to load preparation data:",t)}},Ae=g([]),Te=g(!1),xe=async()=>{if(!Te.value){Te.value=!0;try{const t=await H.get(`/api/projects/${C.project.id}/defense/sessions`);Ae.value=t.data.sessions||[]}catch(t){O(t),console.error("Failed to load session history:",t)}finally{Te.value=!1}}},ie=async t=>{await Ee(t),m.value=!0,u.value="simulation"};async function c(){try{const t=await H.get(`/api/projects/${C.project.id}/defense/sessions/active`);t.data.session&&await ie(t.data.session.id)}catch(t){O(t),console.error("Failed to load active session:",t)}}const $t=U(()=>m.value?"bg-zinc-950 text-white":"bg-background"),Pe=U(()=>ot.value||[]),Fe=U(()=>Z.value?.readiness_score??_.value),Ze=U(()=>Z.value?.clarity??0),et=U(()=>Z.value?.technical_depth??0);U(()=>Z.value?.question_coverage??0),U(()=>Z.value?.confidence_score??0),U(()=>Z.value?.response_time??0);const Oe=U(()=>Pe.value.reduce((t,s)=>{if(s.role!=="panelist"||s.is_follow_up)return t;const x=s.panelist_persona??"panelist";return t[x]=(t[x]||0)+1,t},{})),zt=U(()=>Object.values(Oe.value).reduce((t,s)=>t+s,0)),tt=U(()=>gt),It=U(()=>{const t=B.value;if(t.length===0)return{};const s=Math.floor(gt/t.length),x=gt%t.length,L=t.findIndex(se=>se.id==="generalist");return t.reduce((se,St,xt)=>{const Ct=L>=0?xt===L:xt===0;return se[St.id]=s+(Ct?x:0),se},{})}),st=U(()=>K.value?.question_limit?`${zt.value}/${K.value.question_limit}`:"Adaptive"),pt=t=>t.created_at?new Date(t.created_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):"",d=t=>t?new Date(t).toLocaleDateString():"";Vt(()=>{ut(),J(),xe(),c(),Se()});const l=g(null),n=async()=>{await Ge(),l.value&&(l.value.scrollTop=l.value.scrollHeight)};return $e(Pe,()=>{n()},{deep:!0}),$e(m,t=>{t&&n()}),Et(()=>{ee(),te.cancel()}),(t,s)=>(o(),he(bs,{title:`Defense Preparation: ${t.project.title}`},{default:p(()=>[e("div",{class:R(["min-h-screen transition-colors duration-700",$t.value])},[e("div",hi,[e("div",mi,[e("div",bi,[e("div",yi,[i(a(y),{variant:"ghost",size:"sm",onClick:s[0]||(s[0]=x=>a(vs).visit(t.route("projects.writing",t.project.slug))),class:R(["h-8 w-8 rounded-full p-0",m.value?"text-zinc-400 hover:text-white":""])},{default:p(()=>[i(a(Tt),{class:"h-4 w-4"})]),_:1},8,["class"]),i(a(ke),{variant:"outline",class:"gap-1 border-primary/20 bg-primary/5 text-primary"},{default:p(()=>[i(a(gs),{class:"h-3 w-3"}),s[10]||(s[10]=f(" Defense Readiness ",-1))]),_:1})]),e("h1",{class:R(["text-3xl font-bold tracking-tight md:text-6xl font-display",m.value?"text-white":"text-foreground"])}," Prepare for Victory ",2),e("p",{class:R(["max-w-2xl text-base md:text-lg text-muted-foreground",m.value?"text-zinc-400":""])}," Master your project defense with AI-predicted questions, structured presentation guides, and high-stakes simulation. ",2),P.value?(o(),r("div",wi,[e("span",null,v(P.value),1),i(a(y),{variant:"ghost",size:"sm",class:"h-7 px-2 text-amber-100/90 hover:text-white",onClick:yt},{default:p(()=>[...s[11]||(s[11]=[f(" Dismiss ",-1)])]),_:1})])):w("",!0)]),De(e("div",_i,[e("div",ki,[(o(),r("svg",$i,[s[12]||(s[12]=e("circle",{class:"text-muted/20 md:hidden","stroke-width":"5",stroke:"currentColor",fill:"transparent",r:"28",cx:"32",cy:"32"},null,-1)),s[13]||(s[13]=e("circle",{class:"text-muted/20 hidden md:block","stroke-width":"6",stroke:"currentColor",fill:"transparent",r:"34",cx:"40",cy:"40"},null,-1)),e("circle",{class:"text-primary transition-all duration-1000 ease-out md:hidden","stroke-width":"5","stroke-dasharray":2*Math.PI*28,"stroke-dashoffset":2*Math.PI*28*(1-Fe.value/100),"stroke-linecap":"round",stroke:"currentColor",fill:"transparent",r:"28",cx:"32",cy:"32"},null,8,zi),e("circle",{class:"text-primary transition-all duration-1000 ease-out hidden md:block","stroke-width":"6","stroke-dasharray":2*Math.PI*34,"stroke-dashoffset":2*Math.PI*34*(1-Fe.value/100),"stroke-linecap":"round",stroke:"currentColor",fill:"transparent",r:"34",cx:"40",cy:"40"},null,8,Ii)])),e("span",Si,v(Fe.value)+"%",1)]),s[14]||(s[14]=e("span",{class:"text-[10px] md:text-xs font-semibold uppercase tracking-wider text-muted-foreground text-center"},"Readiness Score",-1))],512),[[Ft,!m.value]])]),De(e("div",Ci,[e("button",{onClick:s[1]||(s[1]=x=>u.value="preparation"),class:R(["flex-1 sm:flex-none flex items-center justify-center gap-2 px-4 md:px-6 py-2 rounded-xl text-sm font-medium transition-all",u.value==="preparation"?"bg-background shadow-sm text-foreground":"text-muted-foreground hover:text-foreground"])},[i(a(fs),{class:"h-4 w-4"}),s[15]||(s[15]=e("span",{class:"hidden sm:inline"},"Preparation Suite",-1)),s[16]||(s[16]=e("span",{class:"sm:hidden"},"Prep",-1))],2),e("button",{onClick:s[2]||(s[2]=x=>u.value="simulation"),class:R(["flex-1 sm:flex-none flex items-center justify-center gap-2 px-4 md:px-6 py-2 rounded-xl text-sm font-medium transition-all",u.value==="simulation"?"bg-background shadow-sm text-foreground":"text-muted-foreground hover:text-foreground"])},[i(a(Pt),{class:"h-4 w-4"}),s[17]||(s[17]=e("span",{class:"hidden sm:inline"},"Simulation Lab",-1)),s[18]||(s[18]=e("span",{class:"sm:hidden"},"Sim",-1))],2)],512),[[Ft,!m.value]]),u.value==="preparation"&&!m.value?(o(),r("div",ji,[e("div",Ti,[ae.value?(o(),r(h,{key:1},[e("div",Ri,[i(a(W),{class:"overflow-hidden border-none bg-zinc-900/30 shadow-none ring-1 ring-border/50"},{default:p(()=>[i(a(ge),{class:"pb-2"},{default:p(()=>[e("div",Ai,[i(a(fe),{class:"flex items-center gap-2 text-xl md:text-2xl font-display"},{default:p(()=>[i(a(Ke),{class:"h-5 w-5 text-rose-500"}),s[25]||(s[25]=f(" Predicted Defense Questions ",-1))]),_:1}),e("div",Fi,[i(a(ke),{variant:"secondary",class:"font-mono text-[10px]"},{default:p(()=>[f(v(G.value.length)+" TOP QUESTIONS",1)]),_:1}),i(a(y),{variant:"ghost",size:"sm",class:"text-xs h-8",onClick:ct,disabled:F.value},{default:p(()=>[i(a(oe),{class:"h-3.5 w-3.5"}),f(" "+v(F.value?"Generating...":"Generate"),1)]),_:1},8,["disabled"]),i(a(y),{variant:"ghost",size:"icon",class:"h-8 w-8 text-zinc-500 hover:text-rose-400",onClick:He,title:"Swap position"},{default:p(()=>[i(a(vt),{class:"h-4 w-4"})]),_:1})])]),i(a(ve),{class:"text-rose-600/70 dark:text-rose-400/70 text-sm"},{default:p(()=>[...s[26]||(s[26]=[f(" Identify and prepare for high-probability questions examiners might ask. ",-1)])]),_:1})]),_:1}),i(a(le),{class:"relative pb-6 md:pb-10 px-6 md:px-10 min-h-[450px]"},{default:p(()=>[i(Qt,{questions:G.value,"is-loading":F.value},null,8,["questions","is-loading"])]),_:1})]),_:1})]),i(a(W),{class:"overflow-hidden border-none bg-zinc-900/30 shadow-none ring-1 ring-border/50 animate-in fade-in slide-in-from-bottom-4 duration-500 delay-75"},{default:p(()=>[i(a(ge),{class:"pb-2"},{default:p(()=>[e("div",Oi,[i(a(fe),{class:"flex items-center gap-2 text-xl md:text-2xl font-display"},{default:p(()=>[i(a(oe),{class:"h-5 w-5 text-indigo-500"}),s[27]||(s[27]=f(" Executive Briefing ",-1))]),_:1}),e("div",Ui,[i(a(y),{variant:"ghost",size:"sm",class:"text-xs gap-1.5 h-8 w-fit",onClick:T,disabled:E.value},{default:p(()=>[i(a(nt),{class:"h-3.5 w-3.5"}),f(" "+v(E.value?"Loading...":"Refresh AI"),1)]),_:1},8,["disabled"]),i(a(y),{variant:"ghost",size:"icon",class:"h-8 w-8 text-zinc-500 hover:text-indigo-400",onClick:He,title:"Swap position"},{default:p(()=>[i(a(vt),{class:"h-4 w-4"})]),_:1})])]),i(a(ve),{class:"text-indigo-600/70 dark:text-indigo-400/70 text-sm"},{default:p(()=>[...s[28]||(s[28]=[f("Your project's core value proposition, synthesized for your defense. ",-1)])]),_:1})]),_:1}),i(a(le),{class:"relative pb-6 md:pb-10 px-6 md:px-10 min-h-[400px]"},{default:p(()=>[z.value.length>0?(o(),r("div",Gi,[i(Kt,{slides:z.value,"is-loading":E.value,onRefresh:T},null,8,["slides","is-loading"])])):b.value?(o(),r("div",Ki,[s[29]||(s[29]=e("div",{class:"absolute -left-6 top-0 bottom-0 w-1 bg-gradient-to-b from-indigo-500/80 via-purple-500/80 to-transparent rounded-full opacity-60"},null,-1)),i(Bt,{content:b.value,"show-font-controls":!1,"viewer-class":"prose-sm md:prose-base dark:prose-invert leading-relaxed",class:"!bg-transparent"},null,8,["content"])])):(o(),r("div",Qi,[e("div",Vi,[i(a(oe),{class:"h-6 w-6 text-indigo-500/50"})]),s[30]||(s[30]=e("p",{class:"text-base text-muted-foreground italic max-w-xs"}," No executive briefing yet. Click “Refresh AI” to generate a comprehensive summary of your research. ",-1))]))]),_:1})]),_:1})],64)):(o(),r(h,{key:0},[i(a(W),{class:"overflow-hidden border-none bg-zinc-900/30 shadow-none ring-1 ring-border/50 animate-in fade-in slide-in-from-bottom-4 duration-500"},{default:p(()=>[i(a(ge),{class:"pb-2"},{default:p(()=>[e("div",Pi,[i(a(fe),{class:"flex items-center gap-2 text-xl md:text-2xl font-display"},{default:p(()=>[i(a(oe),{class:"h-5 w-5 text-indigo-500"}),s[19]||(s[19]=f(" Executive Briefing ",-1))]),_:1}),e("div",Di,[i(a(y),{variant:"ghost",size:"sm",class:"text-xs gap-1.5 h-8 w-fit",onClick:T,disabled:E.value},{default:p(()=>[i(a(nt),{class:"h-3.5 w-3.5"}),f(" "+v(E.value?"Loading...":"Refresh AI"),1)]),_:1},8,["disabled"]),i(a(y),{variant:"ghost",size:"icon",class:"h-8 w-8 text-zinc-500 hover:text-indigo-400",onClick:He,title:"Swap position"},{default:p(()=>[i(a(vt),{class:"h-4 w-4"})]),_:1})])]),i(a(ve),{class:"text-indigo-600/70 dark:text-indigo-400/70 text-sm"},{default:p(()=>[...s[20]||(s[20]=[f("Your project's core value proposition, synthesized for your defense. ",-1)])]),_:1})]),_:1}),i(a(le),{class:"relative pb-6 md:pb-10 px-6 md:px-10 min-h-[400px]"},{default:p(()=>[z.value.length>0?(o(),r("div",Li,[i(Kt,{slides:z.value,"is-loading":E.value,onRefresh:T},null,8,["slides","is-loading"])])):b.value?(o(),r("div",Mi,[s[21]||(s[21]=e("div",{class:"absolute -left-6 top-0 bottom-0 w-1 bg-gradient-to-b from-indigo-500/80 via-purple-500/80 to-transparent rounded-full opacity-60"},null,-1)),i(Bt,{content:b.value,"show-font-controls":!1,"viewer-class":"prose-sm md:prose-base dark:prose-invert leading-relaxed",class:"!bg-transparent"},null,8,["content"])])):(o(),r("div",Bi,[e("div",Ei,[i(a(oe),{class:"h-6 w-6 text-indigo-500/50"})]),s[22]||(s[22]=e("p",{class:"text-base text-muted-foreground italic max-w-xs"}," No executive briefing yet. Click “Refresh AI” to generate a comprehensive summary of your research. ",-1))]))]),_:1})]),_:1}),e("div",Ni,[i(a(W),{class:"overflow-hidden border-none bg-zinc-900/30 shadow-none ring-1 ring-border/50"},{default:p(()=>[i(a(ge),{class:"pb-2"},{default:p(()=>[e("div",qi,[i(a(fe),{class:"flex items-center gap-2 text-xl md:text-2xl font-display"},{default:p(()=>[i(a(Ke),{class:"h-5 w-5 text-rose-500"}),s[23]||(s[23]=f(" Predicted Defense Questions ",-1))]),_:1}),e("div",Hi,[i(a(ke),{variant:"secondary",class:"font-mono text-[10px]"},{default:p(()=>[f(v(G.value.length)+" TOP QUESTIONS",1)]),_:1}),i(a(y),{variant:"ghost",size:"sm",class:"text-xs h-8",onClick:ct,disabled:F.value},{default:p(()=>[i(a(oe),{class:"h-3.5 w-3.5"}),f(" "+v(F.value?"Generating...":"Generate"),1)]),_:1},8,["disabled"]),i(a(y),{variant:"ghost",size:"icon",class:"h-8 w-8 text-zinc-500 hover:text-rose-400",onClick:He,title:"Swap position"},{default:p(()=>[i(a(vt),{class:"h-4 w-4"})]),_:1})])]),i(a(ve),{class:"text-rose-600/70 dark:text-rose-400/70 text-sm"},{default:p(()=>[...s[24]||(s[24]=[f(" Identify and prepare for high-probability questions examiners might ask. ",-1)])]),_:1})]),_:1}),i(a(le),{class:"relative pb-6 md:pb-10 px-6 md:px-10 min-h-[450px]"},{default:p(()=>[i(Qt,{questions:G.value,"is-loading":F.value},null,8,["questions","is-loading"])]),_:1})]),_:1})])],64)),i(a(W),{class:"border-border/50 shadow-sm rounded-3xl overflow-hidden group"},{default:p(()=>[i(a(ge),{class:"pb-2"},{default:p(()=>[i(a(fe),{class:"flex items-center gap-2 text-base"},{default:p(()=>[i(a(Dt),{class:"h-4 w-4 text-emerald-500"}),s[31]||(s[31]=f(" Opening Statement ",-1))]),_:1}),i(a(ve),null,{default:p(()=>[...s[32]||(s[32]=[f('Your 60-second "hook" to impress the panel.',-1)])]),_:1})]),_:1}),i(a(le),{class:"space-y-4"},{default:p(()=>[e("div",Yi,[De(e("textarea",{"onUpdate:modelValue":s[3]||(s[3]=x=>de.value=x),rows:"4",class:"w-full rounded-2xl border-border/50 bg-muted/30 p-4 text-sm focus:ring-primary/20 transition-all",placeholder:"Type your opening statement here..."},null,512),[[Ot,de.value]]),e("div",Xi,[i(a(y),{variant:"outline",size:"icon",class:"h-8 w-8 rounded-full"},{default:p(()=>[i(a(Dt),{class:"h-3.5 w-3.5"})]),_:1})])]),e("div",Ji,[i(a(y),{variant:"outline",class:"w-full text-xs font-bold gap-2 rounded-xl",onClick:Q,disabled:Ie.value},{default:p(()=>[i(a(oe),{class:"h-3.5 w-3.5"}),f(" "+v(Ie.value?"Generating...":"GENERATE OPENING"),1)]),_:1},8,["disabled"]),i(a(y),{variant:"secondary",class:"w-full text-xs font-bold gap-2 rounded-xl",onClick:dt,disabled:ze.value},{default:p(()=>[i(a(Ut),{class:"h-3.5 w-3.5"}),f(" "+v(ze.value?"Analyzing...":"ANALYZE PITCH FLOW"),1)]),_:1},8,["disabled"])]),Le.value?(o(),r("div",Wi,[i(Bt,{content:Le.value,"show-font-controls":!1,class:"!bg-transparent","viewer-class":"prose-xs md:prose-sm"},null,8,["content"])])):w("",!0)]),_:1})]),_:1})]),e("div",Zi,[i(a(W),{class:"border-border/50 shadow-2xl shadow-indigo-500/10 rounded-3xl overflow-hidden bg-zinc-900/20"},{default:p(()=>[i(a(ge),{class:"relative overflow-hidden bg-gradient-to-br from-indigo-950 via-zinc-900 to-black text-white pb-6 border-b border-white/5"},{default:p(()=>[s[36]||(s[36]=e("div",{class:"absolute -right-6 -top-6 h-32 w-32 bg-indigo-500/10 rounded-full blur-3xl"},null,-1)),s[37]||(s[37]=e("div",{class:"absolute -left-10 -bottom-10 h-40 w-40 bg-purple-500/10 rounded-full blur-3xl"},null,-1)),e("div",eo,[e("div",to,[i(a(ht),{class:"h-5 w-5 text-indigo-400"})]),i(a(fe),{class:"text-xl md:text-2xl font-display font-bold tracking-tight bg-gradient-to-r from-white to-zinc-400 bg-clip-text text-transparent"},{default:p(()=>[...s[33]||(s[33]=[f(" Presentation Guide",-1)])]),_:1})]),e("div",so,[i(a(ve),{class:"text-zinc-400 text-xs leading-relaxed max-w-[220px]"},{default:p(()=>[...s[34]||(s[34]=[f(" Step-by-step structure for high-impact defense slides. ",-1)])]),_:1}),e("div",lo,[ne.value.length?(o(),r(h,{key:0},[i(a(y),{variant:"outline",size:"sm",class:"h-7 text-[10px] gap-1.5 border-white/5 bg-white/5 hover:bg-white/10 text-zinc-400",onClick:Ce,disabled:I.value},{default:p(()=>[i(a(hs),{class:"h-3 w-3"}),s[35]||(s[35]=f(" Regenerate ",-1))]),_:1},8,["disabled"]),e("div",no,[i(a(y),{variant:"secondary",size:"sm",class:"h-7 text-[10px] gap-1.5 px-3 font-bold",onClick:we,disabled:I.value},{default:p(()=>[i(a(ms),{class:"h-3 w-3"}),f(" "+v(I.value?"Generating...":"Download PPTX"),1)]),_:1},8,["disabled"]),i(a(y),{variant:"ghost",size:"icon",class:"h-7 w-7 text-zinc-500 hover:text-white",onClick:s[4]||(s[4]=x=>A.value=!0)},{default:p(()=>[i(a(Xt),{class:"h-3.5 w-3.5"})]),_:1})])],64)):(o(),he(a(y),{key:1,variant:"secondary",size:"sm",class:"h-8 text-xs gap-1.5 font-bold",onClick:Ce,disabled:I.value},{default:p(()=>[i(a(oe),{class:"h-3.5 w-3.5"}),f(" "+v(I.value?"Generating...":"Generate Guide"),1)]),_:1},8,["disabled"]))])])]),_:1}),i(a(le),{class:"p-4 md:p-6 h-[500px] flex flex-col"},{default:p(()=>[D.value!=="idle"?(o(),r("div",ao,[D.value==="queued"?(o(),r("span",io,"Deck queued.")):D.value==="outlining"?(o(),r("span",oo,"Generating slides with GPT-4o...")):D.value==="extracting"?(o(),r("span",ro,"Extracting chapter data...")):D.value==="extracted"?(o(),r("span",co,"Extraction complete. Preparing slides...")):D.value==="generating"?(o(),r("span",uo,"Generating slides with GPT-4o...")):D.value==="outlined"?(o(),r("span",po,"Slides ready for review.")):D.value==="rendering"?(o(),r("span",xo,"Rendering PPTX...")):D.value==="ready"?(o(),r("span",vo,"PPTX ready for download.")):D.value==="failed"?(o(),r("span",go,"Failed to generate deck.")):w("",!0)])):w("",!0),D.value==="failed"&&q.value?(o(),r("div",fo,v(q.value),1)):w("",!0),i(Gt,{project:t.project,slides:ne.value,"active-index":me.value,"onUpdate:activeIndex":s[5]||(s[5]=x=>me.value=x),"is-saving":be.value,compact:"","show-pptx":!!X.value,"pptx-url":M.value,"pptx-busy":I.value,"onUpdate:slides":je,onToggleExpand:s[6]||(s[6]=x=>A.value=!0),onDownloadPptx:we,onExportPptx:we},null,8,["project","slides","active-index","is-saving","show-pptx","pptx-url","pptx-busy"])]),_:1})]),_:1}),i(a(ys),{open:A.value,"onUpdate:open":s[8]||(s[8]=x=>A.value=x)},{default:p(()=>[i(a(ws),{class:"max-w-[98vw] w-full lg:max-w-[98vw] h-[95vh] flex flex-col p-6 bg-zinc-950 border-white/10 shadow-2xl overflow-hidden rounded-3xl"},{default:p(()=>[e("div",ho,[e("h3",mo,[i(a(ht),{class:"h-5 w-5 text-indigo-400"}),s[38]||(s[38]=f(" Defense Deck ",-1))])]),e("div",bo,[i(Gt,{project:t.project,slides:ne.value,"active-index":me.value,"onUpdate:activeIndex":s[7]||(s[7]=x=>me.value=x),"is-saving":be.value,"show-pptx":!!X.value,"pptx-url":M.value,"pptx-busy":I.value,"onUpdate:slides":je,onDownloadPptx:Re,onExportPptx:We},null,8,["project","slides","active-index","is-saving","show-pptx","pptx-url","pptx-busy"])])]),_:1})]),_:1},8,["open"]),i(a(W),{class:"border-border/50 shadow-sm rounded-3xl overflow-hidden"},{default:p(()=>[i(a(ge),{class:"pb-2"},{default:p(()=>[i(a(fe),{class:"flex items-center gap-2 text-base"},{default:p(()=>[i(a(nt),{class:"h-4 w-4 text-amber-500"}),s[39]||(s[39]=f(" Session History ",-1))]),_:1}),i(a(ve),null,{default:p(()=>[...s[40]||(s[40]=[f("Your past defense simulations for this project.",-1)])]),_:1})]),_:1}),i(a(le),{class:"space-y-3"},{default:p(()=>[Te.value?(o(),r("div",yo," Loading sessions... ")):Ae.value.length?(o(),r("div",_o,[(o(!0),r(h,null,$(Ae.value,x=>(o(),r("div",{key:x.id,class:"flex items-center justify-between gap-3 rounded-2xl border border-border/50 p-3"},[e("div",ko,[e("div",$o,v(d(x.started_at||x.created_at)),1),e("div",zo,v(x.status)+" • "+v(x.questions_asked)+" Qs ",1)]),i(a(y),{size:"sm",variant:"outline",onClick:L=>ie(x.id)},{default:p(()=>[f(v(x.status==="completed"?"Review":"Resume"),1)]),_:2},1032,["onClick"])]))),128))])):(o(),r("div",wo," No sessions yet. Start a simulation to create your first one. "))]),_:1})]),_:1})])])):w("",!0),u.value==="simulation"&&!m.value?(o(),r("div",Io,[e("div",So,[s[41]||(s[41]=e("div",{class:"absolute -inset-4 bg-gradient-to-r from-primary to-purple-500 rounded-full opacity-20 blur-2xl animate-pulse"},null,-1)),i(a(Pt),{class:"h-24 w-24 text-primary relative z-10"})]),s[52]||(s[52]=e("h2",{class:"text-3xl font-bold mb-4"},"The Mock Defense",-1)),s[53]||(s[53]=e("p",{class:"max-w-md text-center text-muted-foreground mb-12"}," Face a panel of AI examiners who will challenge your research from different perspectives. Record your session for post-defense feedback. ",-1)),e("div",Co,[i(a(W),{class:"border-border/50 bg-card/50 backdrop-blur-sm rounded-3xl overflow-hidden"},{default:p(()=>[i(a(ge),{class:"pb-2"},{default:p(()=>[i(a(fe),{class:"text-base flex items-center gap-2"},{default:p(()=>[i(a(Pt),{class:"h-4 w-4 text-primary"}),s[42]||(s[42]=f(" How the simulation works ",-1))]),_:1}),i(a(ve),null,{default:p(()=>[...s[43]||(s[43]=[f("Chair-moderated rotation with real-time feedback.",-1)])]),_:1})]),_:1}),i(a(le),{class:"space-y-3 text-sm text-muted-foreground"},{default:p(()=>[s[44]||(s[44]=e("p",null,"1) The chair opens, then panelists rotate with targeted questions.",-1)),s[45]||(s[45]=e("p",null,"2) You respond; the system scores clarity and technical depth.",-1)),s[46]||(s[46]=e("p",null,"3) Hints guide you before answers are revealed.",-1)),s[47]||(s[47]=e("p",null,"4) When the question limit is reached, the session auto-completes and scores.",-1)),e("p",jo,"Total questions: "+v(tt.value)+". Each question is worth 10 marks (100 total).",1)]),_:1})]),_:1}),i(a(W),{class:"border-border/50 bg-card/50 backdrop-blur-sm rounded-3xl overflow-hidden"},{default:p(()=>[i(a(ge),{class:"pb-2"},{default:p(()=>[i(a(fe),{class:"text-base flex items-center gap-2"},{default:p(()=>[i(a(Ke),{class:"h-4 w-4 text-emerald-500"}),s[48]||(s[48]=f(" Scoring breakdown ",-1))]),_:1}),i(a(ve),null,{default:p(()=>[...s[49]||(s[49]=[f("Readiness is a weighted summary of core metrics.",-1)])]),_:1})]),_:1}),i(a(le),{class:"space-y-3 text-sm text-muted-foreground"},{default:p(()=>[...s[50]||(s[50]=[e("div",{class:"flex items-center justify-between"},[e("span",null,"Per-question mark"),e("span",{class:"text-foreground font-semibold"},"10 marks total")],-1),e("div",{class:"flex items-center justify-between"},[e("span",null,"Derived from"),e("span",{class:"text-foreground font-semibold"},"Clarity + Depth")],-1),e("div",{class:"flex items-center justify-between"},[e("span",null,"Coverage, confidence, and response time"),e("span",{class:"text-foreground font-semibold"},"Shown as diagnostics")],-1),e("div",{class:"text-xs text-muted-foreground/80"}," 10 questions x 10 marks each = 100 total marks. Readiness uses clarity/depth averages. ",-1)])]),_:1})]),_:1})]),e("div",To,[(o(!0),r(h,null,$(B.value,x=>(o(),he(a(W),{key:x.id,class:"border-border/50 bg-card/50 backdrop-blur-sm rounded-3xl overflow-hidden hover:border-primary/30 transition-all"},{default:p(()=>[i(a(le),{class:"p-8 text-center space-y-3"},{default:p(()=>[e("div",Po,v(x.avatar),1),e("h4",Do,v(x.name),1),i(a(ke),{variant:"secondary",class:"text-[10px]"},{default:p(()=>[f(v(x.role),1)]),_:2},1024),e("p",Lo,v(x.name==="The Skeptic"?"High pressure, doubts your findings.":x.name==="The Methodologist"?"Strict on research design and ethics.":"Focuses on the bigger picture."),1)]),_:2},1024)]),_:2},1024))),128))]),i(a(y),{size:"lg",onClick:wt,disabled:a(ce),class:"px-12 py-8 text-xl font-bold rounded-3xl shadow-2xl shadow-primary/20 gap-4 hover:scale-105 transition-all"},{default:p(()=>[i(a(Yt),{class:"h-6 w-6 fill-current"}),s[51]||(s[51]=f(" START SIMULATION ",-1))]),_:1},8,["disabled"])])):w("",!0),m.value?(o(),r("div",Mo,[e("div",Bo,[e("div",Eo,[s[55]||(s[55]=e("div",{class:"h-3 w-3 rounded-full bg-rose-600 animate-pulse"},null,-1)),s[56]||(s[56]=e("span",{class:"text-xs font-bold tracking-[0.2em] text-zinc-500 uppercase"},"Live Simulation",-1)),e("div",No,[i(a(nt),{class:"h-3.5 w-3.5 text-zinc-400"}),s[54]||(s[54]=e("span",{class:"text-sm font-mono text-zinc-300"},"14:22",-1))]),e("div",qo,[i(a(Ke),{class:"h-3.5 w-3.5 text-zinc-400"}),e("span",Ho,"Questions "+v(st.value),1)])]),i(a(y),{variant:"ghost",onClick:Ye,class:"rounded-full text-zinc-400 hover:text-white hover:bg-zinc-900 gap-2"},{default:p(()=>[s[57]||(s[57]=f(" Finish & Analysis ",-1)),i(a(Tt),{class:"h-4 w-4 rotate-180"})]),_:1})]),e("div",Ro,[e("div",Ao,[s[63]||(s[63]=e("h3",{class:"text-[10px] md:text-sm font-bold text-zinc-500 uppercase tracking-widest px-2"}," The Panel",-1)),e("div",Fo,[(o(!0),r(h,null,$(B.value,x=>(o(),he(a(W),{key:x.id,class:"bg-zinc-900/50 border-zinc-800 hover:border-zinc-700 transition-all rounded-3xl"},{default:p(()=>[i(a(le),{class:"p-4 md:p-6"},{default:p(()=>[e("div",Oo,[e("div",Uo,v(x.avatar),1),e("div",Go,[e("div",Ko,[e("span",Qo,v(x.name),1),Me.value&&(!Qe.value||Qe.value===x.id)?(o(),he(a(ke),{key:0,class:"bg-amber-500/10 text-amber-500 border-none text-[8px] h-4 shrink-0"},{default:p(()=>[...s[58]||(s[58]=[f(" THINKING",-1)])]),_:1})):w("",!0)]),e("span",Vo,v(x.role),1),e("div",Yo," Questions asked: "+v(Oe.value[x.id]??0)+" / "+v(It.value[x.id]??0),1)])])]),_:2},1024)]),_:2},1024))),128))]),i(a(W),{class:"bg-zinc-900 border-none rounded-3xl p-4 md:p-6 mt-6 md:mt-12 bg-gradient-to-br from-zinc-900 to-black"},{default:p(()=>[s[62]||(s[62]=e("h4",{class:"text-[10px] md:text-xs font-bold text-zinc-500 mb-4 uppercase"},"Live Performance",-1)),e("div",Xo,[e("div",Jo,[e("div",Wo,[s[59]||(s[59]=e("span",{class:"text-zinc-400"},"Clarity",-1)),e("span",Zo,v(Ze.value)+"%",1)]),i(a(Mt),{"model-value":Ze.value,class:"h-1 bg-zinc-800","indicator-class":"bg-blue-500"},null,8,["model-value"])]),e("div",er,[e("div",tr,[s[60]||(s[60]=e("span",{class:"text-zinc-400"},"Depth",-1)),e("span",sr,v(et.value)+"%",1)]),i(a(Mt),{"model-value":et.value,class:"h-1 bg-zinc-800","indicator-class":"bg-emerald-500"},null,8,["model-value"])]),e("div",lr,[e("div",nr,[s[61]||(s[61]=e("span",{class:"text-zinc-400"},"Confidence",-1)),e("span",ar,v(a(Z)?.confidence_score??0)+"%",1)]),i(a(Mt),{"model-value":a(Z)?.confidence_score??0,class:"h-1 bg-zinc-800","indicator-class":"bg-rose-500"},null,8,["model-value"])])])]),_:1})]),e("div",ir,[e("div",{ref_key:"chatContainer",ref:l,class:"flex-grow p-8 overflow-y-auto custom-scrollbar"},[e("div",or,[(o(!0),r(h,null,$(Pe.value,(x,L)=>(o(),r("div",{key:L,class:R(["group animate-in fade-in slide-in-from-bottom-2 duration-500",x.role==="student"?"flex flex-col items-end":"flex flex-col items-start"])},[e("div",rr,[e("span",dr,v(x.role==="panelist"?bt.value[x.panelist_persona||""]||"Panelist":"Candidate"),1),e("span",cr,v(pt(x)),1)]),e("div",{class:R(["p-5 rounded-3xl text-sm leading-relaxed max-w-[85%]",x.role==="student"?"bg-zinc-100 text-zinc-950 rounded-tr-none":"bg-zinc-800/80 text-zinc-200 border border-zinc-700/50 rounded-tl-none"])},v(x.content),3),x.role==="panelist"?(o(),r("div",ur,[e("button",pr,[i(a(Ke),{class:"h-3 w-3"}),s[64]||(s[64]=f(" View Strategy ",-1))]),e("button",xr,[i(a(Ut),{class:"h-3 w-3"}),s[65]||(s[65]=f(" Analyze Critique ",-1))])])):w("",!0)],2))),128))])],512),e("div",vr,[e("div",gr,[De(e("textarea",{"onUpdate:modelValue":s[9]||(s[9]=x=>j.value=x),placeholder:"Speak your defense answer...",class:"w-full bg-zinc-950 border-zinc-800 rounded-2xl py-4 md:py-6 px-4 md:px-6 pr-20 md:pr-24 text-zinc-100 focus:ring-primary/40 focus:border-primary/40 placeholder-zinc-700 transition-all resize-none shadow-2xl text-sm md:text-base",disabled:a(ue),rows:"2"},null,8,fr),[[Ot,j.value]]),e("div",hr,[s[66]||(s[66]=e("div",{class:"hidden sm:flex gap-1 h-8 px-2 items-center bg-zinc-900 rounded-full border border-zinc-800"},[e("div",{class:"h-2 w-0.5 bg-rose-500 animate-pulse"}),e("div",{class:"h-4 w-0.5 bg-rose-500 animate-pulse delay-75"}),e("div",{class:"h-2 w-0.5 bg-rose-500 animate-pulse delay-150"})],-1)),i(a(y),{size:"icon",onClick:_t,disabled:a(ue),class:"h-9 w-9 md:h-10 md:w-10 rounded-full bg-primary hover:bg-primary/90 text-white shadow-lg shadow-primary/20"},{default:p(()=>[i(a(Tt),{class:"h-4 w-4 md:h-5 md:w-5 rotate-180"})]),_:1},8,["disabled"])])]),e("div",mr,[e("button",br,[i(a(Dt),{class:"h-3.5 w-3.5"}),s[67]||(s[67]=f(" Hold Space to Speak ",-1))]),e("button",{class:"flex items-center gap-2 text-[10px] font-bold text-zinc-500 hover:text-white transition-colors uppercase tracking-widest",onClick:kt},[i(a(nt),{class:"h-3.5 w-3.5"}),s[68]||(s[68]=f(" Request Hint ",-1))])])])])])])):w("",!0)])],2)]),_:1},8,["title"]))}}),Ur=Zt(yr,[["__scopeId","data-v-85fb8b14"]]);export{Ur as default};
