import{bt as je,bs as b,bA as Oe,cj as h,cl as I,ck as Pe,cn as C,co as c,cp as l,cr as t,cq as a,bE as o,cU as Ee,cs as u,cB as g,cG as k,ct as y,h2 as N,dH as Ne,fa as oe,dw as X,d2 as re,cW as Re,cI as ae,cw as Me,e5 as $e,cu as B,cS as le,df as ie,cQ as Ae,eG as Be,cA as Ue,ce as Y}from"./vendor-BwJgEX4g.js";import{_ as U}from"./index-DXsLaJg_.js";import{_ as j}from"./index-Dh4Dof5h.js";import{_ as F,a as ne}from"./CardContent.vue_vue_type_script_setup_true_lang-CHCDuRZd.js";import{_ as de}from"./CardDescription.vue_vue_type_script_setup_true_lang-CUZkTCdh.js";import{_ as ce,a as ue}from"./CardTitle.vue_vue_type_script_setup_true_lang-CFv199a3.js";import{_ as Fe}from"./Input.vue_vue_type_script_setup_true_lang-BcqgGMan.js";import{_ as pe}from"./Label.vue_vue_type_script_setup_true_lang-BCDEh9UE.js";import{_ as Le,a as qe,b as J,c as K}from"./TabsTrigger.vue_vue_type_script_setup_true_lang-DvgNguaA.js";import{_ as De}from"./Textarea.vue_vue_type_script_setup_true_lang-0xuNlPvZ.js";import{b as L,_ as q,a as D}from"./TooltipTrigger.vue_vue_type_script_setup_true_lang-DJ0GQY-9.js";import{_ as me}from"./WordBalanceDisplay.vue_vue_type_script_setup_true_lang-CgPuWSvn.js";import{_ as ze,a as Ve,b as Ge,c as He,d as Q}from"./SelectValue.vue_vue_type_script_setup_true_lang-DtEl4IcM.js";import{a as We}from"./AppLayout.vue_vue_type_script_setup_true_lang-DgIUSJU0.js";import{_ as fe}from"./SafeHtmlText.vue_vue_type_script_setup_true_lang--LMJo8yA.js";import{R as Xe}from"./RichTextEditor-BzLYdDh1.js";import{_ as Ye}from"./PurchaseModal.vue_vue_type_script_setup_true_lang-B50RHn40.js";import{u as Je}from"./useWordBalance-CZEmJJqq.js";import{_ as Ke}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./UserInfo.vue_vue_type_script_setup_true_lang-Be-HwAt8.js";import"./Sonner.vue_vue_type_script_setup_true_lang-BX3Dlz2r.js";import"./AppLogo.vue_vue_type_script_setup_true_lang-CKHRxUG0.js";import"./useAppearance-ninCSMwp.js";import"./PWAInstallPrompt.vue_vue_type_script_setup_true_lang-6LJd3mi5.js";import"./vendor-tiptap-C_SwIIdp.js";import"./Progress.vue_vue_type_script_setup_true_lang-Dgae3pP5.js";import"./MermaidExtension-BAW3KdnI.js";import"./vendor-mermaid-DpXUzUXc.js";import"./DialogContent.vue_vue_type_script_setup_true_lang-9N0hzFWp.js";import"./DialogDescription.vue_vue_type_script_setup_true_lang-CmiNOxGF.js";import"./DialogFooter.vue_vue_type_script_setup_true_lang-RfXEi-XF.js";import"./DialogTitle.vue_vue_type_script_setup_true_lang-uESiFFP8.js";const Qe={class:"min-h-screen bg-background relative selection:bg-primary/10 selection:text-primary"},Ze={class:"sticky top-0 z-40 w-full border-b border-border/40 bg-background/80 backdrop-blur-xl supports-[backdrop-filter]:bg-background/60"},et={class:"container mx-auto flex h-16 items-center justify-between py-4"},tt={class:"flex items-center gap-4"},st={class:"flex flex-col"},ot={class:"text-sm font-semibold leading-none flex items-center gap-2"},rt={key:0,class:"hidden sm:inline-flex h-1.5 w-1.5 rounded-full bg-primary animate-pulse"},at={class:"lg:hidden"},lt={class:"container mx-auto max-w-5xl py-8 pb-24 px-4 relative z-10 space-y-8"},it={class:"space-y-4 text-center pb-2"},nt={class:"flex justify-center mb-6"},dt={class:"relative flex items-center justify-center h-16 w-16 rounded-full bg-gradient-to-tr from-yellow-500/20 to-orange-500/20 border border-white/10 shadow-[0_0_30px_rgba(234,179,8,0.2)]"},ct={key:0,class:"lg:hidden grid grid-cols-2 gap-3 pb-4"},ut={key:0,class:"flex flex-col gap-1 p-3 rounded-lg bg-muted/30 border border-border/50 col-span-2"},pt={class:"text-sm font-medium truncate"},mt={key:1,class:"flex flex-col gap-1 p-3 rounded-lg bg-muted/30 border border-border/50"},ft={class:"text-sm font-medium truncate"},gt={key:2,class:"flex flex-col gap-1 p-3 rounded-lg bg-muted/30 border border-border/50"},vt={class:"text-sm font-medium truncate"},xt={class:"flex justify-center"},bt={class:"grid grid-cols-1 lg:grid-cols-12 gap-8 items-start"},ht={class:"lg:col-span-12 xl:col-span-5 space-y-6"},yt={class:"space-y-2"},_t={class:"space-y-2"},wt={class:"px-6 pb-6 pt-0"},St={key:1,class:"flex items-center justify-center w-full"},Tt={class:"hidden xl:block"},It={class:"flex items-start gap-3"},kt={class:"p-2 rounded-full bg-orange-500/10 text-orange-600 dark:text-orange-500 mt-0.5 group-hover:scale-110 transition-transform"},Ct={class:"lg:col-span-12 xl:col-span-7 space-y-6"},jt={class:"absolute top-0 right-0 p-6 pointer-events-none opacity-20"},Ot={class:"flex-1 border rounded-xl overflow-hidden bg-secondary/30 focus-within:bg-background focus-within:ring-2 focus-within:ring-primary/20 transition-all"},Pt={class:"px-6 pb-6 flex items-center justify-between gap-4"},Et={class:"p-4 flex flex-col md:flex-row items-center justify-between gap-4"},Nt={class:"flex items-center gap-3 w-full md:w-auto overflow-x-auto pb-2 md:pb-0 hide-scrollbar"},Rt={class:"flex items-center h-9 px-3 rounded-lg bg-background border border-border/50 text-xs font-medium whitespace-nowrap"},Mt={key:0,class:"h-6 w-[1px] bg-border mx-1 hidden md:block"},$t={key:1,class:"flex items-center h-9 px-3 rounded-lg bg-background border border-border/50 text-xs font-medium whitespace-nowrap"},At={key:0,class:"h-0.5 w-full bg-muted overflow-hidden"},Bt={class:"min-h-[400px]"},Ut={key:0,class:"flex flex-col items-center justify-center py-20 animate-in fade-in"},Ft={class:"bg-primary/10 p-6 rounded-full mb-6 relative"},Lt={class:"text-xl font-semibold mb-2"},qt={class:"text-muted-foreground text-sm max-w-xs text-center"},Dt={key:1,class:"flex flex-col items-center justify-center py-20 text-center animate-in fade-in zoom-in-95"},zt={class:"h-32 w-32 rounded-3xl bg-gradient-to-tr from-muted/50 to-muted/10 border border-border/50 flex items-center justify-center mb-6 shadow-xl shadow-black/5 rotate-3 hover:rotate-0 transition-transform duration-500"},Vt={key:2,class:"grid grid-cols-1 gap-6"},Gt={class:"w-full md:w-64 shrink-0 bg-muted/20 md:border-r border-border/50 p-5 flex flex-col gap-4"},Ht={class:"flex items-center justify-between md:justify-start gap-2"},Wt={class:"text-[10px] text-muted-foreground font-medium uppercase tracking-wider"},Xt={class:"space-y-1"},Yt={class:"flex items-center gap-2"},Jt={class:"h-1.5 flex-1 bg-muted rounded-full overflow-hidden"},Kt={class:"text-xs font-bold"},Qt={key:0,class:"space-y-1"},Zt={class:"flex items-center gap-2"},es={class:"space-y-1"},ts={class:"font-semibold"},ss={class:"text-xs text-muted-foreground"},os={class:"mt-auto pt-4 md:pt-0 grid grid-cols-2 md:grid-cols-1 gap-2"},rs={class:"flex-1 p-5 md:pl-0 pt-0 md:pt-5 space-y-3"},as={class:"prose prose-sm dark:prose-invert max-w-none text-muted-foreground/80 leading-relaxed line-clamp-3 group-hover:line-clamp-none transition-all duration-300"},ls={class:"flex flex-wrap gap-1.5 pt-3 mt-auto"},is={class:"text-center space-y-4 max-w-md p-8"},ns={class:"bg-primary/10 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-6"},z=300,ds=je({__name:"TopicSelection",props:{project:{},savedTopics:{},prefillTopic:{}},setup(ge){const d=ge,S=b("existing"),_=b(!1),E=b(!1),v=b([]),O=b(""),ve=b(""),f=b(""),x=b(""),w=b(""),Z=b("all"),R=b("all");b(new Set);const{balance:V,showPurchaseModal:M,requiredWordsForModal:G,actionDescriptionForModal:H,closePurchaseModal:xe}=Je(),$=b("balanced"),P=r=>r?r.replace(/<[^>]*>/g," ").replace(/\s+/g," ").trim():"";Oe(()=>{console.log("üìã TOPIC SELECTION - Project data received:",{topic:d.project.topic,title:d.project.title,description:d.project.description,description_exists:!!d.project.description,description_length:d.project.description?.length||0}),d.project.topic&&(f.value=P(d.project.topic),x.value=d.project.description||"",w.value=P(d.project.title||""),S.value="existing",console.log("‚úÖ TOPIC SELECTION - Form fields populated:",{customTopic:f.value?.substring(0,50),customDescription:x.value?.substring(0,50),customTitle:w.value}));try{const r=new URLSearchParams(window.location.search),e=r.get("prefill_topic"),s=r.get("prefill_title"),n=r.get("prefill_description");e&&e.trim()&&(S.value="existing",f.value=P(e),s&&s.trim()&&(w.value=P(s)),n&&n.trim()&&(x.value=n.trim()),h.success("Refined topic loaded",{description:"Review it in ‚ÄúEnter Topic‚Äù then continue."}),window.history.replaceState({},"",I("projects.topic-selection",d.project.slug)))}catch{}!d.project.topic&&!f.value.trim()&&d.prefillTopic?.title&&(S.value="existing",f.value=P(d.prefillTopic.title),w.value=P(d.prefillTopic.title),d.prefillTopic.description&&(x.value=d.prefillTopic.description)),d.savedTopics&&d.savedTopics.length>0&&(v.value=d.savedTopics,console.log("üì¶ SAVED TOPICS - Loaded from database",{count:d.savedTopics.length,topics:d.savedTopics.map(r=>r.title),sample_descriptions:d.savedTopics.slice(0,3).map(r=>({title:r.title?.substring(0,50),description:r.description?.substring(0,100),has_description:!!r.description}))}),d.project.topic||(S.value="generated"))});const p=b(""),T=b(""),ee=async()=>{if(console.log("üöÄ TOPIC GENERATION - Starting streaming topic generation"),V.value<z){G.value=z,H.value="generate research topics",M.value=!0,console.warn("‚ùå TOPIC GENERATION - Insufficient word balance",{current_balance:V.value,required:z});return}_.value=!0,v.value=[];let r=!1;try{T.value="connecting",p.value="Connecting to AI service...";const e=I("topics.stream",d.project.slug)+`?regenerate=true&geographic_focus=${encodeURIComponent($.value)}`;console.log("üì° TOPIC GENERATION - Connecting to stream:",e);const s=new EventSource(e);s.onopen=()=>{console.log("üì° SSE - Connection opened"),T.value="connecting",p.value="Connected to AI service - analyzing your project..."},s.onmessage=n=>{try{const i=JSON.parse(n.data);switch(console.log("üì° SSE - Message received:",i.type,i),i.type){case"start":T.value="analyzing",p.value=i.message||"Starting topic generation...";break;case"progress":i.message&&i.message.includes("academic context")?T.value="analyzing":i.message&&i.message.includes("generating")?T.value="generating":i.message&&i.message.includes("enriching")&&(T.value="enriching"),p.value=i.message||"Processing...",i.context&&console.log("üéì Academic context:",i.context);break;case"content":if(T.value="generating",i.chunk){const m=i.word_count||0;p.value=`Generating topics... (${m} words generated)`}i.topics&&i.from_cache&&(T.value="enriching",p.value="Loading topics from cache for faster response...");break;case"complete":T.value="complete",i.topics&&Array.isArray(i.topics)?(v.value=i.topics,p.value=`‚úì Successfully generated ${i.topics.length} personalized research topics!`,S.value="generated",h("Success",{description:`${i.topics.length} research topics generated successfully!`})):p.value=i.message||"Topics generated successfully!";break;case"error":{const m=i.message||"Stream error occurred";p.value=m,h("Error",{description:m}),r=!0,s.close(),_.value=!1;break}case"end":console.log("üì° SSE - Stream ended"),r=!0,s.close(),_.value=!1;break}}catch(i){console.error("üì° SSE - Failed to parse message:",i,n.data)}},s.onerror=n=>{if(r){console.log("üì° SSE - Ignoring connection error after stream closed");return}console.error("üì° SSE - Connection error:",n),s.close(),r=!0,v.value.length>0?(p.value=`‚úì Generated ${v.value.length} topics (connection ended early)`,S.value="generated",h("Partial Success",{description:`${v.value.length} topics generated before connection ended.`})):(console.log("üì° TOPIC GENERATION - Falling back to regular endpoint"),be().catch(i=>{console.error("Fallback also failed:",i),p.value="Failed to generate topics. Please try again.",h("Error",{description:"Failed to generate topics. Please try again."})})),_.value=!1},setTimeout(()=>{!_.value||r||(console.log("‚è∞ TOPIC GENERATION - Timeout reached, closing stream"),s.close(),v.value.length>0?(p.value=`‚úì Generated ${v.value.length} topics (timeout reached)`,S.value="generated"):(p.value="Generation timed out. Please try again.",h("Timeout",{description:"Topic generation took longer than expected. Please try again."})),_.value=!1)},3e5)}catch(e){console.error("üí• TOPIC GENERATION - Error:",e),p.value="Failed to generate topics. Please try again.",h("Error",{description:e.message||"Failed to generate topics. Please try again."}),_.value=!1}},be=async()=>{console.log("üîÑ TOPIC GENERATION - Using fallback method"),p.value="Retrying with fallback method...";try{const r=document.querySelector('meta[name="csrf-token"]')?.getAttribute("content");if(!r)throw new Error("CSRF token not found. Please refresh the page and try again.");const e=new AbortController,s=setTimeout(()=>e.abort(),3e5),n=await fetch(I("topics.generate",d.project.slug),{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":r,Accept:"application/json","X-Requested-With":"XMLHttpRequest"},body:JSON.stringify({regenerate:!0,geographic_focus:$.value}),signal:e.signal});if(clearTimeout(s),n.status===402){const m=await n.json().catch(()=>null);G.value=m?.required??z,H.value="generate research topics",M.value=!0,p.value=m?.message||"Insufficient word balance to generate topics.",h("Error",{description:p.value}),_.value=!1;return}if(!n.ok){let m=`HTTP error! status: ${n.status}`;try{m=(await n.clone().json()).message||m}catch{try{const W=await n.text();n.status===419?m="Session expired. Please refresh the page and try again.":n.status===504?m="Request timed out. Please try again in a few moments.":W.includes("<!DOCTYPE")&&(m="Server returned an error page instead of data. Please try again.")}catch{n.status===504&&(m="Request timed out. Please try again in a few moments.")}}throw new Error(m)}const i=await n.json();if(i.topics&&Array.isArray(i.topics))v.value=i.topics,p.value=`‚úì Successfully generated ${i.topics.length} research topics!`,S.value="generated",h("Success",{description:`${i.topics.length} research topics generated successfully!`});else throw new Error("Invalid response format: topics array not found")}catch(r){console.error("üí• FALLBACK GENERATION - Error:",r),p.value="Failed to generate topics. Please try again.",h("Error",{description:r.message||"Failed to generate topics. Please try again."})}},he=r=>{O.value=r.title,ve.value=r.description;const e=document.createElement("div");e.innerHTML=r.title;const s=e.textContent||e.innerText||r.title;f.value=s,x.value=r.description,w.value=te(s),S.value="existing"},te=r=>{const e=document.createElement("div");e.innerHTML=r;const s=(e.textContent||e.innerText||r).trim(),n=255;return s.length>n?s.slice(0,n):s},ye=Pe(()=>{let r=v.value;return Z.value!=="all"&&(r=r.filter(e=>e.difficulty.toLowerCase().includes(Z.value.toLowerCase()))),R.value!=="all"&&(r=r.filter(e=>e.timeline===R.value)),r.sort((e,s)=>s.feasibility_score-e.feasibility_score)}),_e=r=>{switch(r.toLowerCase()){case"beginner friendly":return"secondary";case"intermediate":return"default";case"advanced":return"destructive";default:return"secondary"}},we=r=>{switch(r?.toLowerCase()){case"good":return"default";case"moderate":return"secondary";case"low":return"destructive";case"none":return"outline";default:return"outline"}},Se=(r,e)=>r==null?"Checking...":r===0?"No papers":`${r} paper${r!==1?"s":""}`,se=r=>{const e=document.createElement("div");e.innerHTML=r.title;const s=(e.textContent||e.innerText||r.title).trim();if(!s){h("Error",{description:"Topic title is missing."});return}Y.visit(I("topics.lab",{project:d.project.slug,new:"true",return_to_selection:1,topic_title:s,topic_description:r.description||""}))},Te=()=>{const r=(f.value||w.value||"").trim(),e=(x.value||"").trim();if(!r&&!e){h("Error",{description:"Please select or enter a topic first."});return}se({title:r||w.value||"Research Topic",description:e})},Ie=async()=>{if(console.log("üöÄ TOPIC SUBMISSION - Starting",{customTopic:f.value?.substring(0,50)+"...",customDescription:x.value?.substring(0,50)+"...",customTitle:w.value,project_slug:d.project.slug,current_url:window.location.href,timestamp:new Date().toISOString()}),console.log("üîç TOPIC SUBMISSION - Full form data:",{customTopic:f.value,customDescription:x.value,customTitle:w.value,customTopic_length:f.value?.length||0,customDescription_length:x.value?.length||0,customTitle_length:w.value?.length||0}),!f.value.trim()&&!x.value.trim()){console.log("‚ùå TOPIC SUBMISSION - Validation failed: No topic or description"),h("Error",{description:"Please enter a project topic and description."});return}E.value=!0;try{const r={topic:f.value.trim()||w.value.trim()||"Research Topic",title:w.value.trim()||te(f.value||x.value),description:x.value.trim()};console.log("üì§ TOPIC SUBMISSION - Request data:",r),console.log("üìç TOPIC SUBMISSION - Request URL:",I("topics.select",d.project.slug));const e=document.querySelector('meta[name="csrf-token"]')?.getAttribute("content");if(console.log("üîê TOPIC SUBMISSION - CSRF token found:",!!e),console.log("üîê TOPIC SUBMISSION - CSRF token preview:",e?.substring(0,10)+"..."),!e)throw new Error("CSRF token not found. Please refresh the page and try again.");console.log("üì° TOPIC SUBMISSION - Making fetch request...");const s=await fetch(I("topics.select",d.project.slug),{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":e,Accept:"application/json","X-Requested-With":"XMLHttpRequest"},body:JSON.stringify(r)});if(console.log("üì• TOPIC SUBMISSION - Response received"),console.log("üì• TOPIC SUBMISSION - Response status:",s.status),console.log("üì• TOPIC SUBMISSION - Response statusText:",s.statusText),console.log("üì• TOPIC SUBMISSION - Response ok:",s.ok),console.log("üì• TOPIC SUBMISSION - Response headers:",Object.fromEntries(s.headers.entries())),s.ok){console.log("‚úÖ TOPIC SUBMISSION - Success! Processing response...");const n=await s.json();console.log("‚úÖ TOPIC SUBMISSION - Response data:",n),h("Topic Selected!",{description:"Your project topic has been set. You can now submit it for supervisor approval."}),console.log("üîÑ TOPIC SUBMISSION - Letting middleware handle redirect"),console.log("üîÑ TOPIC SUBMISSION - Current project slug:",d.project.slug),console.log("üîÑ TOPIC SUBMISSION - Target route:",I("projects.show",d.project.slug)),Y.visit(I("projects.show",d.project.slug),{method:"get",replace:!0})}else{console.error("‚ùå TOPIC SUBMISSION - Request failed"),console.error("‚ùå TOPIC SUBMISSION - Status:",s.status),console.error("‚ùå TOPIC SUBMISSION - StatusText:",s.statusText);let n=`HTTP error! status: ${s.status}`;try{const i=await s.json();console.error("‚ùå TOPIC SUBMISSION - Error JSON:",i),n=i.message||n}catch{const m=await s.text();console.error("‚ùå TOPIC SUBMISSION - Error HTML (first 500 chars):",m.substring(0,500)),s.status===419?n="Session expired. Please refresh the page and try again.":m.includes("<!DOCTYPE")&&(n="Server returned an error page instead of data. Please try again.")}throw new Error(n)}}catch(r){console.error("üí• TOPIC SUBMISSION - Exception:",r),h("Error",{description:"Failed to select topic. Please try again."})}finally{E.value=!1,console.log("üèÅ TOPIC SUBMISSION - Finished (isSelecting set to false)")}},A=b(!1),ke=()=>{A.value||(A.value=!0,Y.post(I("projects.go-back-to-wizard",d.project.slug),{},{preserveState:!1,preserveScroll:!1,replace:!0,onError:()=>{A.value=!1,h("Error",{description:"Failed to go back to setup. Please try again."})},onFinish:()=>{setTimeout(()=>{A.value=!1},1e3)}}))};return(r,e)=>(c(),C(We,{title:"Select Project Topic"},{default:l(()=>[t("div",Qe,[e[51]||(e[51]=t("div",{class:"fixed inset-0 pointer-events-none z-0"},[t("div",{class:"absolute top-0 right-0 w-3/4 h-3/4 bg-primary/5 rounded-full blur-[120px] opacity-50"}),t("div",{class:"absolute bottom-0 left-0 w-1/2 h-1/2 bg-blue-500/5 rounded-full blur-[100px] opacity-50"})],-1)),t("header",Ze,[t("div",et,[t("div",tt,[a(o(j),{onClick:ke,variant:"ghost",size:"icon",class:"h-9 w-9 rounded-full text-muted-foreground hover:text-foreground hover:bg-muted/80"},{default:l(()=>[a(o(Ee),{class:"h-4 w-4"})]),_:1}),t("div",st,[t("h1",ot,[e[8]||(e[8]=u(" Topic Selection ",-1)),_.value?(c(),g("span",rt)):k("",!0)]),e[9]||(e[9]=t("p",{class:"text-[10px] text-muted-foreground uppercase tracking-wider font-medium"},"Step 2 of 4",-1))])]),t("div",at,[a(o(U),{variant:"outline",class:"font-normal bg-muted/50"},{default:l(()=>[u(y(r.project.type),1)]),_:1})])])]),t("main",lt,[t("div",it,[t("div",nt,[t("div",dt,[e[10]||(e[10]=t("div",{class:"absolute inset-0 rounded-full bg-yellow-500/10 blur-xl"},null,-1)),a(o(N),{class:"h-8 w-8 text-yellow-400 drop-shadow-[0_0_10px_rgba(250,204,21,0.8)] relative z-10"})])]),e[11]||(e[11]=t("div",{class:"space-y-2"},[t("h2",{class:"text-3xl font-bold tracking-tight sm:text-4xl bg-gradient-to-br from-foreground via-foreground to-muted-foreground bg-clip-text text-transparent"}," Choose Your Project Topic "),t("p",{class:"mx-auto max-w-[600px] text-muted-foreground text-lg leading-relaxed"}," Define your specific area of interest or let AI help you discover unique project topics. ")],-1))]),r.project.field_of_study||r.project.university||r.project.course?(c(),g("div",ct,[r.project.field_of_study?(c(),g("div",ut,[e[12]||(e[12]=t("span",{class:"text-[10px] uppercase text-muted-foreground font-medium"},"Field",-1)),t("span",pt,y(r.project.field_of_study),1)])):k("",!0),r.project.university?(c(),g("div",mt,[e[13]||(e[13]=t("span",{class:"text-[10px] uppercase text-muted-foreground font-medium"},"Institution",-1)),t("span",ft,y(r.project.university),1)])):k("",!0),r.project.course?(c(),g("div",gt,[e[14]||(e[14]=t("span",{class:"text-[10px] uppercase text-muted-foreground font-medium"},"Course / Dept",-1)),t("span",vt,y(r.project.course),1)])):k("",!0)])):k("",!0),a(o(Le),{modelValue:S.value,"onUpdate:modelValue":e[6]||(e[6]=s=>S.value=s),class:"space-y-8"},{default:l(()=>[t("div",xt,[a(o(me),null,{default:l(()=>[a(o(qe),{class:"grid grid-cols-3 w-full h-auto items-center justify-center rounded-2xl bg-muted/50 p-1.5 text-muted-foreground backdrop-blur-sm border border-border/50 shadow-inner sm:flex sm:w-auto"},{default:l(()=>[a(o(L),null,{default:l(()=>[a(o(q),{"as-child":""},{default:l(()=>[a(o(J),{value:"existing",class:"rounded-xl px-2 py-2.5 text-[10px] sm:text-sm sm:px-6 transition-all data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm flex flex-col sm:flex-row items-center justify-center gap-1 sm:gap-2 h-full w-full sm:w-auto"},{default:l(()=>[a(o(Ne),{class:"h-3.5 w-3.5 sm:h-4 sm:w-4 sm:mr-0"}),e[15]||(e[15]=t("span",{class:"truncate sm:hidden"},"Add Existing",-1)),e[16]||(e[16]=t("span",{class:"hidden sm:inline"},"Add Existing Topic",-1))]),_:1})]),_:1}),a(o(D),null,{default:l(()=>[...e[17]||(e[17]=[t("p",null,"Enter a topic you already have in mind",-1)])]),_:1})]),_:1}),a(o(L),null,{default:l(()=>[a(o(q),{"as-child":""},{default:l(()=>[a(o(J),{value:"generated",class:"rounded-xl px-2 py-2.5 text-[10px] sm:text-sm sm:px-6 transition-all data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm flex flex-col sm:flex-row items-center justify-center gap-1 sm:gap-2 h-full w-full sm:w-auto"},{default:l(()=>[a(o(N),{class:"h-3.5 w-3.5 sm:h-4 sm:w-4 sm:mr-0"}),e[18]||(e[18]=t("span",{class:"truncate sm:hidden"},"AI Suggestions",-1)),e[19]||(e[19]=t("span",{class:"hidden sm:inline"},"AI Suggested Topics",-1))]),_:1})]),_:1}),a(o(D),null,{default:l(()=>[...e[20]||(e[20]=[t("p",null,"Generate unique topics based on your profile",-1)])]),_:1})]),_:1}),a(o(L),null,{default:l(()=>[a(o(q),{"as-child":""},{default:l(()=>[a(o(J),{value:"import",class:"rounded-xl px-2 py-2.5 text-[10px] sm:text-sm sm:px-6 transition-all data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm flex flex-col sm:flex-row items-center justify-center gap-1 sm:gap-2 h-full w-full sm:w-auto"},{default:l(()=>[a(o(oe),{class:"h-3.5 w-3.5 sm:h-4 sm:w-4 sm:mr-0"}),e[21]||(e[21]=t("span",{class:"truncate sm:hidden"},"Import",-1)),e[22]||(e[22]=t("span",{class:"hidden sm:inline"},"Import Project",-1))]),_:1})]),_:1}),a(o(D),null,{default:l(()=>[...e[23]||(e[23]=[t("p",null,"Import a project from an external file",-1)])]),_:1})]),_:1})]),_:1})]),_:1})]),a(o(K),{value:"existing",class:"space-y-6 animate-in fade-in slide-in-from-bottom-4 duration-500"},{default:l(()=>[t("div",bt,[t("div",ht,[a(o(F),{class:"border-border/50 shadow-lg shadow-primary/5 bg-card/80 backdrop-blur-sm"},{default:l(()=>[a(o(ce),null,{default:l(()=>[a(o(ue),{className:"text-lg"},{default:l(()=>[...e[24]||(e[24]=[u("Project Title",-1)])]),_:1}),a(o(de),null,{default:l(()=>[...e[25]||(e[25]=[u(" Keep it clear and academic. ",-1)])]),_:1})]),_:1}),a(o(ne),{class:"space-y-6"},{default:l(()=>[t("div",yt,[a(o(pe),{for:"custom-title",class:"text-xs font-medium uppercase text-muted-foreground"},{default:l(()=>[...e[26]||(e[26]=[u("Title",-1)])]),_:1}),a(o(Fe),{id:"custom-title",modelValue:w.value,"onUpdate:modelValue":e[0]||(e[0]=s=>w.value=s),placeholder:"e.g., The Impact of...",class:"h-12 bg-secondary/50 border-border/50 focus:bg-background focus:ring-primary/20 transition-all font-medium"},null,8,["modelValue"])]),t("div",_t,[a(o(pe),{for:"custom-topic",class:"text-xs font-medium uppercase text-muted-foreground"},{default:l(()=>[...e[27]||(e[27]=[u("Research Question / Topic",-1)])]),_:1}),a(o(De),{id:"custom-topic",modelValue:f.value,"onUpdate:modelValue":e[1]||(e[1]=s=>f.value=s),placeholder:"What is the main problem you are investigating?",rows:"5",class:"resize-none bg-secondary/50 border-border/50 focus:bg-background focus:ring-primary/20 transition-all"},null,8,["modelValue"])])]),_:1}),t("div",wt,[a(o(j),{onClick:Ie,size:"lg",disabled:!f.value.trim()&&!x.value.trim()||E.value,class:"w-full h-12 text-base font-medium shadow-lg shadow-primary/20 hover:shadow-primary/30 transition-all"},{default:l(()=>[E.value?(c(),C(o(X),{key:0,class:"mr-2 h-5 w-5 animate-spin"})):(c(),g("span",St,[e[28]||(e[28]=u(" Confirm Selection ",-1)),a(o(re),{class:"ml-2 h-4 w-4"})]))]),_:1},8,["disabled"])])]),_:1}),t("div",Tt,[t("div",{onClick:e[2]||(e[2]=s=>S.value="generated"),class:"rounded-xl bg-orange-500/5 border border-orange-500/10 p-4 cursor-pointer hover:bg-orange-500/10 transition-colors group"},[t("div",It,[t("div",kt,[a(o(N),{class:"h-4 w-4"})]),e[29]||(e[29]=t("div",{class:"space-y-1"},[t("h4",{class:"text-sm font-semibold text-orange-700 dark:text-orange-400"}," Need Inspiration?"),t("p",{class:"text-xs text-muted-foreground leading-relaxed"},[u(" If you're stuck, switch to the "),t("strong",null,"AI Suggestions"),u(" tab to generate research topics tailored to your profile. ")])],-1))])])])]),t("div",Ct,[a(o(F),{class:"border-border/50 shadow-lg shadow-primary/5 bg-card/80 backdrop-blur-sm flex flex-col h-full lg:min-h-[500px]"},{default:l(()=>[t("div",jt,[a(o(Re),{class:"w-32 h-32 text-primary"})]),a(o(ce),null,{default:l(()=>[a(o(ue),{className:"text-lg"},{default:l(()=>[...e[30]||(e[30]=[u("Detailed Description",-1)])]),_:1}),a(o(de),null,{default:l(()=>[...e[31]||(e[31]=[u(" Elaborate on your research objectives and scope. ",-1)])]),_:1})]),_:1}),a(o(ne),{class:"flex-1 min-h-[300px] flex flex-col"},{default:l(()=>[t("div",Ot,[a(Xe,{modelValue:x.value,"onUpdate:modelValue":e[3]||(e[3]=s=>x.value=s),placeholder:"Start typing your research description here...","min-height":"300px","show-toolbar":!0},null,8,["modelValue"])])]),_:1}),t("div",Pt,[e[33]||(e[33]=t("p",{class:"text-[10px] text-muted-foreground"}," * This description will be used to guide the AI in future steps. ",-1)),a(o(j),{onClick:Te,disabled:!f.value.trim()&&!x.value.trim()||E.value,variant:"ghost",size:"sm",class:"text-muted-foreground hover:text-primary"},{default:l(()=>[a(o(ae),{class:"mr-2 h-3.5 w-3.5"}),e[32]||(e[32]=u(" Refine in Lab ",-1))]),_:1},8,["disabled"])])]),_:1})])])]),_:1}),a(o(K),{value:"generated",class:"space-y-6 pb-20 animate-in fade-in slide-in-from-bottom-4 duration-500"},{default:l(()=>[a(o(F),{class:"border-border/50 bg-card/50 backdrop-blur-sm sticky top-20 z-30 shadow-sm"},{default:l(()=>[t("div",Et,[t("div",Nt,[t("div",Rt,[e[37]||(e[37]=t("span",{class:"text-muted-foreground mr-2"},"Focus:",-1)),a(o(ze),{modelValue:$.value,"onUpdate:modelValue":e[4]||(e[4]=s=>$.value=s)},{default:l(()=>[a(o(Ve),{class:"h-auto p-0 border-none bg-transparent hover:bg-transparent focus:ring-0 focus:ring-offset-0 gap-1 text-xs font-semibold"},{default:l(()=>[a(o(Ge),{placeholder:"Select Focus"})]),_:1}),a(o(He),null,{default:l(()=>[a(o(Q),{value:"balanced"},{default:l(()=>[...e[34]||(e[34]=[u("Balanced",-1)])]),_:1}),a(o(Q),{value:"nigeria_west_africa"},{default:l(()=>[...e[35]||(e[35]=[u("West Africa",-1)])]),_:1}),a(o(Q),{value:"global"},{default:l(()=>[...e[36]||(e[36]=[u("Global",-1)])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),v.value.length>0?(c(),g("div",Mt)):k("",!0),v.value.length>0?(c(),g("div",$t,[e[39]||(e[39]=t("span",{class:"text-muted-foreground mr-2"},"Timeline:",-1)),Me(t("select",{"onUpdate:modelValue":e[5]||(e[5]=s=>R.value=s),class:"bg-transparent border-none text-foreground font-semibold focus:ring-0 p-0 cursor-pointer text-xs"},[...e[38]||(e[38]=[t("option",{value:"all"},"Any",-1),t("option",{value:"6-9 months"},"6-9 mo",-1),t("option",{value:"9-12 months"},"9-12 mo",-1),t("option",{value:"12+ months"},"12+ mo",-1)])],512),[[$e,R.value]])])):k("",!0)]),a(o(j),{onClick:ee,disabled:_.value,size:"sm",class:B(v.value.length===0?"w-full md:w-auto shadow-lg shadow-primary/20":"")},{default:l(()=>[_.value?(c(),C(o(X),{key:0,class:"mr-2 h-4 w-4 animate-spin"})):v.value.length>0?(c(),C(o(ae),{key:1,class:"mr-2 h-4 w-4"})):(c(),C(o(N),{key:2,class:"mr-2 h-4 w-4"})),u(" "+y(_.value?"Thinking...":v.value.length>0?"Regenerate":"Generate Ideas"),1)]),_:1},8,["disabled","class"])]),_.value?(c(),g("div",At,[...e[40]||(e[40]=[t("div",{class:"h-full bg-primary animate-progress-indeterminate"},null,-1)])])):k("",!0)]),_:1}),t("div",Bt,[_.value?(c(),g("div",Ut,[t("div",Ft,[a(o(X),{class:"h-10 w-10 text-primary animate-spin"}),e[41]||(e[41]=t("div",{class:"absolute inset-0 rounded-full animate-ping bg-primary/20 opacity-75"},null,-1))]),t("h3",Lt,y(p.value||`Analyzing your
                                    profile... `),1),t("p",qt," Our AI is scanning "+y(r.project.field_of_study)+" databases for relevant emerging topics. ",1)])):v.value.length===0?(c(),g("div",Dt,[t("div",zt,[a(o(N),{class:"h-12 w-12 text-muted-foreground/40"})]),e[43]||(e[43]=t("h3",{class:"text-lg font-semibold mb-2"},"No Topics Generated Yet",-1)),e[44]||(e[44]=t("p",{class:"text-muted-foreground text-sm max-w-md mx-auto mb-8"},' Click "Generate Ideas" to get personalized research topics based on your level, university, and field of study. ',-1)),a(o(j),{onClick:ee,size:"lg",class:"rounded-full px-8 shadow-lg shadow-primary/20 hover:shadow-primary/30 hover:scale-105 transition-all"},{default:l(()=>[...e[42]||(e[42]=[u(" Generate First Batch ",-1)])]),_:1})])):(c(),g("div",Vt,[(c(!0),g(le,null,ie(ye.value,s=>(c(),g("div",{key:s.id,class:B(["group relative flex flex-col md:flex-row gap-0 md:gap-6 rounded-2xl border border-border/50 bg-card hover:bg-card/80 transition-all duration-300 hover:shadow-xl hover:shadow-primary/5 hover:border-primary/20 overflow-hidden",O.value===s.title?"ring-1 ring-primary border-primary bg-primary/5":""])},[t("div",Gt,[t("div",Ht,[a(o(U),{variant:_e(s.difficulty),class:"rounded-md px-2 py-0.5 text-[10px] uppercase font-bold"},{default:l(()=>[u(y(s.difficulty),1)]),_:2},1032,["variant"]),t("span",Wt,y(s.timeline),1)]),t("div",Xt,[e[45]||(e[45]=t("div",{class:"text-[10px] uppercase tracking-wider text-muted-foreground font-bold"}," Feasibility",-1)),t("div",Yt,[t("div",Jt,[t("div",{class:B(["h-full rounded-full transition-all",s.feasibility_score>=80?"bg-green-500":s.feasibility_score>=60?"bg-yellow-500":"bg-red-500"]),style:Ae(`width: ${s.feasibility_score}%`)},null,6)]),t("span",Kt,y(s.feasibility_score)+"%",1)])]),s.literature_count!==void 0?(c(),g("div",Qt,[e[46]||(e[46]=t("div",{class:"text-[10px] uppercase tracking-wider text-muted-foreground font-bold"}," Literature",-1)),a(o(me),null,{default:l(()=>[a(o(L),null,{default:l(()=>[a(o(q),{"as-child":""},{default:l(()=>[t("div",Zt,[a(o(U),{variant:we(s.literature_quality),class:"rounded-md px-2 py-0.5 text-[10px] font-bold flex items-center gap-1"},{default:l(()=>[a(o(Be),{class:"h-3 w-3"}),u(" "+y(Se(s.literature_count,s.literature_quality)),1)]),_:2},1032,["variant"])])]),_:2},1024),a(o(D),{side:"right",class:"max-w-xs"},{default:l(()=>[t("div",es,[t("p",ts,"Literature Availability: "+y(s.literature_score)+"/100",1),t("p",ss,y(s.literature_quality==="good"?"Excellent coverage - strong topic choice":s.literature_quality==="moderate"?"Moderate coverage - viable topic":s.literature_quality==="low"?"Limited coverage - may need refinement":"No papers found - consider alternative phrasing"),1)])]),_:2},1024)]),_:2},1024)]),_:2},1024)])):k("",!0),t("div",os,[a(o(j),{onClick:n=>he(s),size:"sm",variant:O.value===s.title?"default":"outline",class:B(["w-full h-9 transition-all",O.value===s.title?"bg-primary text-primary-foreground shadow-lg shadow-primary/20":"hover:bg-primary hover:text-primary-foreground"])},{default:l(()=>[u(y(O.value===s.title?"Selected":"Select")+" ",1),O.value===s.title?(c(),C(o(Ue),{key:0,class:"ml-2 h-3.5 w-3.5"})):(c(),C(o(re),{key:1,class:"ml-2 h-3.5 w-3.5"}))]),_:2},1032,["onClick","variant","class"]),a(o(j),{onClick:n=>se(s),size:"sm",variant:"ghost",class:"w-full h-9 text-xs text-muted-foreground hover:text-foreground"},{default:l(()=>[...e[47]||(e[47]=[u(" Refine ",-1)])]),_:2},1032,["onClick"])])]),t("div",rs,[a(fe,{content:s.title,as:"h3",class:"text-lg font-bold leading-snug text-foreground group-hover:text-primary transition-colors"},null,8,["content"]),t("div",as,[a(fe,{content:s.description,as:"div"},null,8,["content"])]),t("div",ls,[(c(!0),g(le,null,ie(s.keywords.slice(0,4),n=>(c(),g("span",{key:n,class:"text-[10px] font-medium text-muted-foreground/70 bg-muted/30 px-2 py-0.5 rounded-full border border-border/30"}," #"+y(n),1))),128))])])],2))),128))]))])]),_:1}),a(o(K),{value:"import",class:"space-y-6 animate-in fade-in slide-in-from-bottom-4 duration-500"},{default:l(()=>[a(o(F),{class:"border-border/50 shadow-lg shadow-primary/5 bg-card/80 backdrop-blur-sm min-h-[400px] flex items-center justify-center"},{default:l(()=>[t("div",is,[t("div",ns,[a(o(oe),{class:"h-8 w-8 text-primary"})]),e[49]||(e[49]=t("h3",{class:"text-2xl font-bold"},"Import Existing Project",-1)),e[50]||(e[50]=t("p",{class:"text-muted-foreground leading-relaxed"}," We're working on a feature that will allow you to import an existing completed project to create a new Finalyze project from it. ",-1)),a(o(U),{variant:"secondary",class:"mt-4 text-sm px-4 py-1.5 font-medium"},{default:l(()=>[...e[48]||(e[48]=[u("Coming Soon ",-1)])]),_:1})])]),_:1})]),_:1})]),_:1},8,["modelValue"])])]),a(Ye,{open:o(M),"current-balance":o(V),"required-words":o(G),action:o(H)||"generate research topics","onUpdate:open":e[7]||(e[7]=s=>M.value=s),onClose:o(xe)},null,8,["open","current-balance","required-words","action","onClose"])]),_:1}))}}),Ds=Ke(ds,[["__scopeId","data-v-89b644c3"]]);export{Ds as default};
