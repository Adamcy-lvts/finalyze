import{c as R,_ as g}from"./index-DxO3weBC.js";import{_ as h,a as k}from"./CardContent.vue_vue_type_script_setup_true_lang-Bmay5RTP.js";import{_ as j}from"./CardDescription.vue_vue_type_script_setup_true_lang-Bjo3rvER.js";import{_ as C,a as S}from"./CardTitle.vue_vue_type_script_setup_true_lang-BLT4Y6ri.js";import{_ as q,d as M,a as O,b as V,c as X}from"./DialogTitle.vue_vue_type_script_setup_true_lang-AvE6wRnx.js";import{_ as G}from"./DialogFooter.vue_vue_type_script_setup_true_lang-BK7JXPpz.js";import{_ as I}from"./AppLayout.vue_vue_type_script_setup_true_lang-DIiPP_l9.js";import{d as J,A as _,c as v,o as f,w as r,e as o,k as s,u as t,s as a,t as d,a as W,q as F,n as D,x as b}from"./app-CGVN6_L1.js";import{t as u}from"./Sonner.vue_vue_type_script_setup_true_lang-CK4b3nLt.js";import{A as Y}from"./arrow-left-9ZPWBOse.js";import{C as A}from"./clock-B-zM6MSI.js";import{M as H}from"./message-square-C6Cgrd6j.js";import{F as K}from"./file-text-DOKLsTdu.js";import{D as Q}from"./download-C8aFcHv3.js";import{C as E}from"./circle-check-big-CfLYAlaE.js";import"./VisuallyHidden-C0CMEehB.js";import"./useForwardExpose-ZWbgJ8U6.js";import"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-D3dfPFfw.js";import"./UserInfo.vue_vue_type_script_setup_true_lang-DYmn0SLF.js";import"./coins-DlLUyRbY.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-BgtcTZIq.js";import"./plus-B9NNMpLI.js";import"./chevron-right-Bqqhb6_D.js";import"./triangle-alert-DGhNNWrQ.js";import"./circle-check-D4bRqpxc.js";/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N=R("CircleXIcon",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z=R("ShieldCheckIcon",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),ee={class:"min-h-screen bg-gradient-to-b from-background via-background/95 to-muted/20"},te={class:"mx-auto max-w-4xl space-y-10 p-6 pb-20 lg:p-10"},oe={class:"flex items-center justify-between"},se={class:"flex h-8 w-8 items-center justify-center rounded-full bg-muted/50 group-hover:bg-primary/10 transition-colors mr-2"},re={class:"space-y-4 text-center animate-in fade-in slide-in-from-bottom-4 duration-700"},ie={class:"mx-auto flex h-20 w-20 items-center justify-center rounded-2xl bg-gradient-to-br from-yellow-500/20 to-yellow-500/5 shadow-lg shadow-yellow-500/10 ring-1 ring-yellow-500/20"},ae={class:"animate-in fade-in slide-in-from-bottom-6 duration-700 delay-100"},le={class:"grid grid-cols-1 divide-y divide-border/40 md:grid-cols-2 lg:grid-cols-4 md:divide-x md:divide-y-0"},de={class:"p-6 flex flex-col gap-2"},ne={class:"flex items-center gap-2 font-semibold"},ce={class:"p-6 flex flex-col gap-2"},pe={class:"flex items-center gap-2 font-semibold"},ue={class:"capitalize"},me={class:"p-6 flex flex-col gap-2"},fe={class:"flex items-center gap-2 font-semibold"},ge=["title"],ve={class:"p-6 flex flex-col gap-2"},be={class:"flex items-center gap-2 font-semibold"},we={class:"grid gap-8 md:grid-cols-1 animate-in fade-in slide-in-from-bottom-8 duration-700 delay-200"},xe={class:"flex items-center gap-3"},he={class:"p-2 rounded-md bg-primary/10 text-primary"},_e={class:"rounded-xl bg-muted/30 p-6 border border-border/50"},ye={key:0,class:"mb-3 text-xl font-semibold text-foreground"},ke={class:"text-base leading-relaxed text-muted-foreground"},je={class:"grid gap-6 md:grid-cols-2"},He=J({__name:"TopicApproval",props:{project:{}},setup(L){const c=L,m=_(!1),w=_(!1),x=_(!1),n=_(null),z=async()=>{w.value=!0;try{const i=await fetch(route("topics.export-pdf",c.project.slug),{method:"GET",headers:{"X-Requested-With":"XMLHttpRequest",Accept:"application/pdf"}});if(!i.ok)throw new Error("Network response was not ok");const e=await i.blob(),l=window.URL.createObjectURL(e),p=document.createElement("a");p.href=l,p.download=`project_topic_proposal_${c.project.slug}.pdf`,document.body.appendChild(p),p.click(),window.URL.revokeObjectURL(l),document.body.removeChild(p),u("ðŸ“„ PDF Generated!",{description:"Topic proposal downloaded successfully. Share with your supervisor."})}catch(i){console.error("PDF Export error:",i),u("Export Failed",{description:"Could not generate PDF. Please try again."})}finally{w.value=!1}},T=i=>{n.value=i,x.value=!0},U=async()=>{if(n.value===null)return;const i=n.value;x.value=!1,m.value=!0;try{const l=await(await fetch(route("topics.approve",c.project.slug),{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")||""},body:JSON.stringify({approved:i})})).json();if(l.success)if(i){const p=l.redirect_route,P=l.redirect_url,$=l.mode==="auto"||p==="projects.writing";if(u($?"Topic Approved!":"ðŸŽ‰ Topic Approved!",{description:$?"Auto mode selected. Jumping straight into the writing workspace.":"Perfect! Now let's set up your AI writing assistant based on your mode preference."}),P)b.visit(P);else if(p==="projects.writing"){const y=l.slug||c.project.slug;b.visit(route("projects.writing",y))}else{const y=l.slug||c.project.slug;b.visit(route("projects.guidance",y))}}else u("New Topic Needed",{description:"No problem! Let's find a topic that works better for your supervisor."}),b.visit(route("projects.topic-selection",c.project.slug))}catch{u("Error",{description:"Failed to update approval status. Please try again."})}finally{m.value=!1,n.value=null}},B=async()=>{try{b.post(route("projects.go-back-to-topic-selection",c.project.slug),{},{onSuccess:()=>{u("Success",{description:"Returned to topic selection"}),b.visit(route("projects.topic-selection",c.project.slug))},onError:()=>{u("Error",{description:"Failed to go back to topic selection. Please try again."})}})}catch{u("Error",{description:"Failed to go back to topic selection. Please try again."})}};return(i,e)=>(f(),v(I,{title:"Topic Approval"},{default:r(()=>[o("div",ee,[o("div",te,[o("div",oe,[s(t(g),{onClick:B,variant:"ghost",size:"sm",class:"group text-muted-foreground hover:text-foreground transition-colors"},{default:r(()=>[o("div",se,[s(t(Y),{class:"h-4 w-4 transition-transform group-hover:-translate-x-0.5"})]),e[4]||(e[4]=a(" Back to Topic Selection ",-1))]),_:1})]),o("div",re,[o("div",ie,[s(t(A),{class:"h-10 w-10 text-yellow-600"})]),e[5]||(e[5]=o("div",{class:"space-y-2"},[o("h1",{class:"text-4xl font-bold tracking-tight sm:text-5xl bg-gradient-to-br from-foreground to-foreground/70 bg-clip-text text-transparent"}," Awaiting Supervisor Approval "),o("p",{class:"mx-auto max-w-2xl text-lg text-muted-foreground leading-relaxed"}," Your project topic is ready for review. Share it with your supervisor and update the status below. ")],-1))]),o("div",ae,[s(t(h),{class:"overflow-hidden border-border/40 bg-card/50 backdrop-blur-sm shadow-sm"},{default:r(()=>[o("div",le,[o("div",de,[e[7]||(e[7]=o("span",{class:"text-xs font-medium uppercase tracking-wider text-muted-foreground"},"Field of Study",-1)),o("div",ne,[e[6]||(e[6]=o("div",{class:"h-2 w-2 rounded-full bg-blue-500"},null,-1)),a(" "+d(i.project.field_of_study),1)])]),o("div",ce,[e[9]||(e[9]=o("span",{class:"text-xs font-medium uppercase tracking-wider text-muted-foreground"},"Academic Level",-1)),o("div",pe,[e[8]||(e[8]=o("div",{class:"h-2 w-2 rounded-full bg-purple-500"},null,-1)),o("span",ue,d(i.project.type),1)])]),o("div",me,[e[11]||(e[11]=o("span",{class:"text-xs font-medium uppercase tracking-wider text-muted-foreground"},"University",-1)),o("div",fe,[e[10]||(e[10]=o("div",{class:"h-2 w-2 rounded-full bg-orange-500"},null,-1)),o("span",{class:"truncate",title:i.project.full_university_name||i.project.university},d(i.project.full_university_name||i.project.university),9,ge)])]),o("div",ve,[e[13]||(e[13]=o("span",{class:"text-xs font-medium uppercase tracking-wider text-muted-foreground"},"Supervisor",-1)),o("div",be,[e[12]||(e[12]=o("div",{class:"h-2 w-2 rounded-full bg-green-500"},null,-1)),a(" "+d(i.project.supervisor_name||"Not assigned"),1)])])])]),_:1})]),o("div",we,[s(t(h),{class:"border-border/40 shadow-lg shadow-primary/5 overflow-hidden"},{default:r(()=>[s(t(C),{class:"border-b border-border/40 bg-muted/10 pb-6"},{default:r(()=>[o("div",xe,[o("div",he,[s(t(H),{class:"h-5 w-5"})]),o("div",null,[s(t(S),{class:"text-xl"},{default:r(()=>[...e[14]||(e[14]=[a("Selected Topic",-1)])]),_:1}),s(t(j),null,{default:r(()=>[...e[15]||(e[15]=[a("The topic currently pending approval",-1)])]),_:1})])])]),_:1}),s(t(k),{class:"p-6 md:p-8"},{default:r(()=>[o("div",_e,[i.project.title?(f(),W("h3",ye,d(i.project.title),1)):F("",!0),o("p",ke,d(i.project.topic),1)])]),_:1})]),_:1}),o("div",je,[s(t(h),{class:"border-border/40 shadow-md hover:shadow-lg transition-all duration-300 flex flex-col"},{default:r(()=>[s(t(C),null,{default:r(()=>[s(t(S),{class:"flex items-center gap-2 text-lg"},{default:r(()=>[s(t(K),{class:"h-5 w-5 text-blue-500"}),e[16]||(e[16]=a(" Share with Supervisor ",-1))]),_:1}),s(t(j),null,{default:r(()=>[...e[17]||(e[17]=[a("Download a professional PDF proposal to submit to your supervisor.",-1)])]),_:1})]),_:1}),s(t(k),{class:"mt-auto pt-0"},{default:r(()=>[s(t(g),{onClick:z,disabled:w.value,size:"lg",variant:"outline",class:"w-full h-12 border-blue-200 hover:bg-blue-50 hover:text-blue-700 hover:border-blue-300 transition-all"},{default:r(()=>[w.value?(f(),v(t(A),{key:1,class:"mr-2 h-5 w-5 animate-spin"})):(f(),v(t(Q),{key:0,class:"mr-2 h-5 w-5"})),a(" "+d(w.value?"Generating PDF...":"Download Proposal PDF"),1)]),_:1},8,["disabled"])]),_:1})]),_:1}),s(t(h),{class:"border-border/40 shadow-md hover:shadow-lg transition-all duration-300 flex flex-col"},{default:r(()=>[s(t(C),null,{default:r(()=>[s(t(S),{class:"flex items-center gap-2 text-lg"},{default:r(()=>[s(t(Z),{class:"h-5 w-5 text-green-600"}),e[18]||(e[18]=a(" Update Status ",-1))]),_:1}),s(t(j),null,{default:r(()=>[...e[19]||(e[19]=[a("Record your supervisor's decision to proceed.",-1)])]),_:1})]),_:1}),s(t(k),{class:"mt-auto pt-0 grid grid-cols-2 gap-3"},{default:r(()=>[s(t(g),{onClick:e[0]||(e[0]=()=>T(!0)),disabled:m.value,class:"h-12 bg-green-600 hover:bg-green-700 text-white shadow-md shadow-green-600/20"},{default:r(()=>[s(t(E),{class:"mr-2 h-5 w-5"}),e[20]||(e[20]=a(" Approved ",-1))]),_:1},8,["disabled"]),s(t(g),{onClick:e[1]||(e[1]=()=>T(!1)),disabled:m.value,variant:"outline",class:"h-12 border-red-200 text-red-700 hover:bg-red-50 hover:border-red-300"},{default:r(()=>[s(t(N),{class:"mr-2 h-5 w-5"}),e[21]||(e[21]=a(" Rejected ",-1))]),_:1},8,["disabled"])]),_:1})]),_:1})])]),s(t(q),{open:x.value,"onUpdate:open":e[3]||(e[3]=l=>x.value=l)},{default:r(()=>[s(t(M),{class:"sm:max-w-md border-border/50 shadow-2xl"},{default:r(()=>[s(t(O),null,{default:r(()=>[s(t(V),{class:"flex items-center gap-2 text-xl"},{default:r(()=>[o("div",{class:D([n.value?"bg-green-100 text-green-600":"bg-red-100 text-red-600","p-2 rounded-full"])},[n.value?(f(),v(t(E),{key:0,class:"h-5 w-5"})):(f(),v(t(N),{key:1,class:"h-5 w-5"}))],2),a(" "+d(n.value?"Confirm Approval":"Confirm Rejection"),1)]),_:1}),s(t(X),{class:"pt-2 text-base"},{default:r(()=>[a(d(n.value?"Great news! Confirm that your supervisor has approved this topic. We will proceed to the next stage.":"Confirm that your supervisor wants you to change this topic. You will be redirected to select a new one."),1)]),_:1})]),_:1}),s(t(G),{class:"gap-2 sm:gap-0 mt-4"},{default:r(()=>[s(t(g),{onClick:e[2]||(e[2]=l=>x.value=!1),variant:"ghost"},{default:r(()=>[...e[22]||(e[22]=[a(" Cancel ",-1)])]),_:1}),s(t(g),{onClick:U,disabled:m.value,class:D([n.value?"bg-green-600 hover:bg-green-700":"bg-red-600 hover:bg-red-700","min-w-[100px]"])},{default:r(()=>[m.value?(f(),v(t(A),{key:0,class:"mr-2 h-4 w-4 animate-spin"})):F("",!0),a(" "+d(m.value?"Processing...":"Confirm"),1)]),_:1},8,["disabled","class"])]),_:1})]),_:1})]),_:1},8,["open"])])])]),_:1}))}});export{He as default};
