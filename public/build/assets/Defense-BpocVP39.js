const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/vendor-CugNIqr3.js","assets/vendor-CzjmNn-c.css"])))=>i.map(i=>d[i]);
import{bt as Ve,bs as E,ci as Le,ck as le,bD as ot,hw as Vt,bA as St,bB as dn,cB as a,co as l,cq as s,cG as Y,cr as e,bE as t,h2 as cn,cp as C,cs as se,ct as B,cw as ct,e1 as Zn,gU as Wn,dM as Yt,cO as hn,cu as ge,f6 as el,hx as tl,fX as nl,hy as ll,dG as un,f9 as qt,dN as xn,dV as Mt,gY as mn,cn as me,cX as Jt,cR as ee,dg as oe,db as mt,dc as Qe,c_ as re,eT as sl,fh as dt,eO as Qt,gb as Sn,cE as Et,cb as Ce,bz as ol,hz as Lt,hA as fn,hB as zn,hC as zt,hD as al,hE as pt,hF as Gt,hG as Me,hH as It,hI as tn,hJ as Cn,hK as $n,hL as Fn,_ as il,hM as rl,cQ as Ot,hN as dl,eU as Kt,hO as cl,fv as pn,d2 as ul,fL as Rn,fa as fl,f1 as pl,f2 as gl,f3 as vl,cM as hl,eV as xl,eW as ml,hP as bl,hQ as yl,hR as wl,hS as kl,hT as _l,hU as Sl,hV as zl,cP as Cl,hW as $l,hX as Fl,dY as Hn,hY as Il,hZ as Tl,fc as Nn,h_ as Un,dv as El,h$ as Al,dJ as gn,eF as jl,i0 as Gn,cF as Zt,dk as Bl,i1 as Dl,du as Xn,eZ as Pl,i2 as Ml,i3 as Ll,i4 as Ol,fj as Vn,cL as rt,cI as Yn,d7 as Wl,g_ as Rl,gO as Tt,cm as In,ce as Hl,cT as nn,h1 as Nl,cx as Tn,cD as Ul,dm as ln,fg as jt,dW as Nt,i5 as sn,cC as En,cj as on}from"./vendor-CugNIqr3.js";import{a as Gl}from"./AppLayout.vue_vue_type_script_setup_true_lang-CWOKT1Zf.js";import{_ as ae}from"./index-Ia6CVdS0.js";import{_ as Ze,a as st}from"./CardContent.vue_vue_type_script_setup_true_lang-Ds49DaDx.js";import{_ as gt}from"./CardDescription.vue_vue_type_script_setup_true_lang-BAFga_4Y.js";import{_ as vt,a as ht}from"./CardTitle.vue_vue_type_script_setup_true_lang-IDxgLF4I.js";import{_ as _t}from"./index-DBZ0Wbkn.js";import{_ as an}from"./Progress.vue_vue_type_script_setup_true_lang-CrvPUv9L.js";import{_ as Xl,a as Vl}from"./DialogContent.vue_vue_type_script_setup_true_lang-CJcqQR4M.js";import{_ as Yl,R as rn}from"./SelectLabel.vue_vue_type_script_setup_true_lang-CCdQ9tvi.js";import{a as ql,b as Kl,c as Jl,d as Ql,e as Zl,f as es,g as ts,_ as ns}from"./AlertDialogTitle.vue_vue_type_script_setup_true_lang-BFjWMqjg.js";import{_ as ut}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{b as bn,c as yn,d as wn}from"./WordBalanceDisplay.vue_vue_type_script_setup_true_lang-D_W9GzUS.js";import{_ as Ct}from"./Label.vue_vue_type_script_setup_true_lang-BAVAvlHZ.js";import{_ as vn}from"./Input.vue_vue_type_script_setup_true_lang-ASyfdFt6.js";import{_ as ls,a as ss,b as os,c as as,d as is}from"./SelectValue.vue_vue_type_script_setup_true_lang-CxW9RkuN.js";import{_ as rs}from"./SelectGroup.vue_vue_type_script_setup_true_lang-CGP1uAop.js";import"./UserInfo.vue_vue_type_script_setup_true_lang-DoXK2xYg.js";import"./TooltipTrigger.vue_vue_type_script_setup_true_lang-C8jiVShk.js";import"./Sonner.vue_vue_type_script_setup_true_lang-DLPHW2_2.js";import"./AppLogo.vue_vue_type_script_setup_true_lang-QE2E2BkN.js";import"./useAppearance-B04txQuA.js";import"./useWordBalance-BDnAc3AF.js";import"./PWAInstallPrompt.vue_vue_type_script_setup_true_lang-CT_GbF6b.js";import"./vendor-tiptap-BY1aFJq1.js";import"./MermaidExtension-D_RXIhuX.js";import"./vendor-mermaid-DBX3Zf7t.js";const ds={key:0,class:"flex flex-col h-full bg-zinc-950/20 overflow-hidden rounded-2xl border border-white/5"},cs={key:0,class:"flex items-center justify-between px-3 py-2 bg-zinc-900/80 border-b border-white/5 shrink-0 gap-4"},us={class:"flex items-center gap-3 shrink-0"},fs={class:"p-1.5 bg-indigo-500/10 rounded-lg hidden xs:flex"},ps={class:"flex items-center gap-2"},gs={key:0,class:"h-1 w-1 rounded-full bg-indigo-500 animate-pulse"},vs={class:"flex items-center gap-2 overflow-x-auto no-scrollbar py-0.5"},hs={class:"flex items-center gap-1 bg-white/5 pl-2 pr-1 py-0.5 rounded-md border border-white/10"},xs={class:"flex items-center gap-1 bg-white/5 rounded-md border border-white/10 p-0.5"},ms={class:"hidden md:flex items-center gap-1 bg-white/5 rounded-md border border-white/10 p-0.5"},bs={class:"flex items-center gap-1"},ys={class:"flex items-center gap-2 shrink-0"},ws={class:"flex items-center"},ks={key:1,class:"px-4 py-2 text-xs text-rose-300 bg-rose-500/10 border-b border-rose-500/20"},_s={class:"flex-1 flex overflow-hidden min-h-0 relative group"},Ss={key:0,ref:"sidebarRef",class:"w-64 bg-zinc-900/60 border-r border-white/5 flex flex-col h-full overflow-hidden transition-all duration-300"},zs={class:"px-4 py-3 border-b border-white/5 flex items-center justify-between"},Cs={class:"flex-1 overflow-y-auto custom-scrollbar p-3 space-y-3"},$s=["onDragstart","onDragover","onDragleave","onDrop","onClick"],Fs={class:"absolute top-2 left-2 z-10 h-5 w-5 rounded bg-black/60 backdrop-blur-md flex items-center justify-center border border-white/10"},Is={class:"absolute inset-y-0 left-0 w-12 flex items-center justify-center z-20 pointer-events-none"},Ts={class:"absolute inset-y-0 right-0 w-12 flex items-center justify-center z-20 pointer-events-none"},Es={class:"space-y-3 shrink-0"},As={class:"h-1 w-full bg-white/5 rounded-full overflow-hidden"},js={class:"flex flex-col items-center gap-1.5 px-1"},Bs={class:"flex items-center gap-6"},Ds=["disabled"],Ps={class:"text-[9px] font-bold text-indigo-500/80 uppercase tracking-[0.2em]"},Ms=["disabled"],Ls={class:"text-sm font-display font-bold text-white tracking-tight text-center"},Os={class:"space-y-5"},Ws={key:0,class:"p-4 bg-indigo-500/5 border border-indigo-500/10 rounded-2xl space-y-2.5 animate-in fade-in slide-in-from-bottom-2 duration-500"},Rs={class:"flex items-center gap-2 text-indigo-400"},Hs={class:"text-xs text-zinc-300 leading-relaxed font-medium italic"},Ns={class:"space-y-4"},Us={key:0,class:"space-y-4"},Gs=["innerHTML"],Xs={key:1,class:"space-y-4"},Vs={key:1,class:"mt-8 pt-6 border-t border-white/5"},Ys={class:"text-[11px] text-zinc-400 leading-relaxed italic"},qs={class:"w-full max-w-6xl aspect-video bg-zinc-900 rounded-lg shadow-2xl border border-white/10 relative overflow-hidden flex flex-col group/canvas transition-all duration-500"},Ks={class:"relative z-10 p-4 lg:p-8 flex flex-col h-full"},Js={class:"mb-2"},Qs={class:"flex-1 mt-2 lg:mt-4 overflow-hidden"},Zs={key:0,class:"h-full flex items-center justify-center border-2 border-dashed border-white/5 rounded-lg"},eo={key:1,class:"grid grid-cols-2 gap-6 h-full"},to={class:"space-y-3 overflow-auto"},no={class:"space-y-3"},lo=["data-paragraph-index","onInput","onBlur"],so={key:0,class:"space-y-2 lg:space-y-3 mt-2"},oo=["data-bullet-index","onInput","onKeydown","onBlur","innerHTML"],ao={class:"flex gap-2"},io={class:"text-sm lg:text-base font-semibold text-indigo-400"},ro={class:"text-sm lg:text-base text-zinc-300 leading-relaxed"},co={key:2,class:"space-y-2 lg:space-y-3"},uo=["data-bullet-index","onInput","onKeydown","onBlur","innerHTML"],fo={class:"space-y-3 overflow-auto"},po={class:"space-y-3"},go=["data-paragraph-index","onInput","onBlur"],vo={key:0,class:"space-y-2 lg:space-y-3 mt-2"},ho=["data-bullet-index","onInput","onKeydown","onBlur","innerHTML"],xo={class:"flex gap-2"},mo={class:"text-sm lg:text-base font-semibold text-indigo-400"},bo={class:"text-sm lg:text-base text-zinc-300 leading-relaxed"},yo={key:2,class:"space-y-2 lg:space-y-3"},wo=["data-bullet-index","onInput","onKeydown","onBlur","innerHTML"],ko={key:2,class:"flex gap-6 h-full"},_o=["src"],So={key:2,class:"text-zinc-500 text-xs uppercase tracking-widest"},zo={key:3,class:"absolute bottom-2 left-2 right-2 z-20 bg-black/60 border border-white/10 rounded-md p-2 flex items-center gap-2"},Co=["value"],$o=["value"],Fo={key:0,class:"space-y-2 flex-1"},Io={class:"flex flex-col gap-0.5 opacity-0 group-hover/item:opacity-100 transition-opacity shrink-0"},To=["onClick","disabled"],Eo=["onClick","disabled"],Ao={class:"flex-1 flex items-start gap-2"},jo={key:0,class:"text-indigo-500 font-bold mt-0.5"},Bo=["data-mixed-index","onBlur"],Do=["onClick"],Po={class:"flex gap-2 mt-3"},Mo={key:1,class:"space-y-3"},Lo=["data-paragraph-index","onInput","onBlur"],Oo={key:2,class:"space-y-3"},Wo={class:"text-sm lg:text-base font-semibold text-indigo-400"},Ro={class:"text-sm lg:text-base text-zinc-300 leading-relaxed"},Ho={key:3,class:"space-y-2 lg:space-y-4"},No=["data-bullet-index","onInput","onKeydown","onBlur","innerHTML"],Uo={key:4,class:"flex flex-col h-full"},Go={class:"flex gap-2 mt-3"},Xo={key:0,class:"space-y-3 lg:space-y-4"},Vo=["data-paragraph-index","onInput","onBlur"],Yo={key:1,class:"space-y-4"},qo={class:"text-sm lg:text-base font-semibold text-indigo-400"},Ko={class:"text-sm lg:text-base text-zinc-300 leading-relaxed"},Jo={key:1,class:"space-y-2"},Qo={class:"flex flex-col gap-0.5 opacity-0 group-hover/item:opacity-100 transition-opacity shrink-0"},Zo=["onClick","disabled"],ea=["onClick","disabled"],ta={class:"flex-1 flex items-start gap-2"},na={key:0,class:"text-indigo-500 font-bold mt-0.5"},la=["data-mixed-index","onBlur"],sa=["onClick"],oa={class:"flex gap-2 mt-3"},aa={key:0,class:"space-y-2 lg:space-y-4"},ia=["data-bullet-index","onInput","onKeydown","onBlur","innerHTML"],ra={key:1,class:"flex flex-col h-full"},da={class:"flex gap-2 mt-3"},ca={class:"mt-6 flex items-center justify-center gap-1.5 py-2"},ua=["onClick","title"],fa={class:"absolute bottom-12 left-1/2 -translate-x-1/2 z-[110] flex items-center gap-6 px-6 py-3 bg-zinc-900/80 backdrop-blur-xl rounded-full border border-white/10 shadow-2xl opacity-0 hover:opacity-100 transition-opacity duration-300"},pa=["disabled"],ga={class:"flex flex-col items-center min-w-[120px]"},va={class:"text-2xl font-display font-bold text-white"},ha=["disabled"],xa={class:"relative z-10 flex flex-col h-full max-w-7xl mx-auto w-full"},ma={class:"flex-1 min-h-0 flex flex-col items-center justify-center"},ba={class:"mb-12 lg:mb-16"},ya={class:"text-xs lg:text-sm uppercase tracking-[0.4em] font-bold text-indigo-500/60 mb-6 block drop-shadow-[0_0_10px_rgba(99,102,241,0.3)]"},wa={key:0,class:"text-4xl lg:text-7xl font-display font-bold text-white tracking-tight leading-tight"},ka={class:"relative w-full"},_a={key:0,class:"flex flex-col items-center justify-center text-center py-20"},Sa={class:"text-6xl lg:text-9xl font-display font-bold text-white tracking-tighter leading-none mb-8"},za=["innerHTML"],Ca=["innerHTML"],$a={key:1,class:"grid grid-cols-2 gap-12 lg:gap-20"},Fa={class:"space-y-10"},Ia={class:"text-3xl lg:text-5xl font-bold text-indigo-400 tracking-tight"},Ta={class:"text-2xl lg:text-4xl text-zinc-300 leading-relaxed font-light"},Ea={key:2,class:"space-y-10"},Aa=["innerHTML"],ja={class:"space-y-10"},Ba={class:"text-3xl lg:text-5xl font-bold text-indigo-400 tracking-tight"},Da={class:"text-2xl lg:text-4xl text-zinc-300 leading-relaxed font-light"},Pa={key:1,class:"space-y-10"},Ma=["innerHTML"],La={key:2,class:"flex flex-col lg:flex-row gap-12 lg:gap-20 h-full"},Oa=["src"],Wa={key:1,class:"text-zinc-500 text-sm uppercase tracking-widest"},Ra={key:0,class:"space-y-8"},Ha={key:1,class:"space-y-8"},Na={class:"text-3xl lg:text-5xl font-bold text-indigo-400 tracking-tight"},Ua={class:"text-2xl lg:text-4xl text-zinc-300 leading-relaxed font-light"},Ga={key:2,class:"space-y-10"},Xa=["innerHTML"],Va={key:3,class:"space-y-12"},Ya={key:0,class:"space-y-8"},qa={key:1,class:"space-y-12"},Ka={class:"text-3xl lg:text-5xl font-bold text-indigo-400 tracking-tight"},Ja={class:"text-2xl lg:text-4xl text-zinc-300 leading-relaxed font-light"},Qa={key:1,class:"space-y-10"},Za={key:0,class:"space-y-6"},ei={key:1,class:"space-y-8"},ti={class:"text-2xl lg:text-4xl font-bold text-indigo-400"},ni={class:"text-xl lg:text-3xl text-zinc-300 leading-relaxed font-light"},li={key:2,class:"space-y-8"},si=["innerHTML"],oi={key:0,class:"space-y-10"},ai=["innerHTML"],ii={class:"mt-12 lg:mt-16 pt-8 border-t border-white/5 flex justify-between items-center opacity-40 shrink-0"},ri={class:"flex items-center gap-8"},di={class:"text-sm lg:text-base font-mono tracking-[0.3em] text-zinc-400 uppercase"},ci={class:"text-lg lg:text-xl font-display font-medium text-white"},ui={key:1,class:"flex flex-col items-center justify-center py-20 text-center space-y-6 h-full bg-zinc-950/20 rounded-2xl border border-dashed border-white/5"},fi={class:"h-20 w-20 rounded-full bg-indigo-500/10 flex items-center justify-center animate-bounce"},pi=Ve({__name:"DeckViewer",props:{project:{},slides:{},activeIndex:{},isSaving:{type:Boolean,default:!1},compact:{type:Boolean,default:!1},canDownload:{type:Boolean,default:!1},showPptx:{type:Boolean,default:!1},pptxUrl:{default:null},pptxBusy:{type:Boolean,default:!1}},emits:["update:activeIndex","update:slides","toggle-expand","download-pptx","export-pptx"],setup(L,{emit:x}){const n=L,f=x,d=E([]),h=E(!1),b=E(null),w=E(null),k=E("title"),$=E(!1),j=E(null),z=E(null),r=E(null),F=E(!1),O=E(null),T=E(null),M=E(null),R=E(null),H=E(null),I=v=>JSON.parse(JSON.stringify(v)),c=E(!1);Le(()=>n.slides,v=>{if(c.value){c.value=!1;return}d.value=I(v||[])},{deep:!0,immediate:!0});const _=v=>{c.value=!0,d.value=v,f("update:slides",v)},N=v=>{if(!d.value.length)return;const o=I(d.value),u=I([o[v]])[0],g=v+1;o.splice(g,0,u),_(o),f("update:activeIndex",g)},G=v=>{if(!d.value.length)return;const o=I(d.value);if(o.splice(v,1),_(o),!o.length){f("update:activeIndex",0);return}const u=v<=n.activeIndex?Math.max(0,n.activeIndex-1):n.activeIndex;f("update:activeIndex",u)},J=v=>{j.value=v,$.value=!0},V=()=>{j.value!==null&&(G(j.value),$.value=!1,j.value=null)},we=()=>{O.value=null,r.value?.click()},$e=async v=>{if(v)try{await Ce.delete("/editor/images",{data:{url:v}})}catch{}},_e=async v=>{if(!v.type.startsWith("image/")){O.value="Please select an image file.";return}F.value=!0,O.value=null;try{const o=new FormData;o.append("image",v);const u=await Ce.post("/editor/images",o,{headers:{"Content-Type":"multipart/form-data"}});if(u.data?.success&&u.data.url){const g=T.value;he(n.activeIndex,"image_url",u.data.url),he(n.activeIndex,"image_scale",1),he(n.activeIndex,"image_fit","cover"),he(n.activeIndex,"image_position_x",50),he(n.activeIndex,"image_position_y",50),g&&await $e(g)}else O.value="Upload failed."}catch(o){O.value=o?.response?.data?.message||"Upload failed."}finally{F.value=!1,T.value=null,r.value&&(r.value.value="")}},je=v=>{const u=v.target.files?.[0];u&&_e(u)},Ae=()=>{T.value=y.value?.image_url||null,we()},Oe=async()=>{const v=y.value?.image_url||null;he(n.activeIndex,"image_url",""),he(n.activeIndex,"image_scale",1),he(n.activeIndex,"image_fit","cover"),he(n.activeIndex,"image_position_x",50),he(n.activeIndex,"image_position_y",50),await $e(v)},We=v=>{const o=Number(v.target.value);Number.isNaN(o)||he(n.activeIndex,"image_scale",o)},ye=v=>{const o=v.target.value;he(n.activeIndex,"image_fit",o)},ke=(v,o,u)=>Math.min(Math.max(v,o),u),Z=v=>{if(!y.value?.image_url)return;const o=v.currentTarget;if(!o)return;const u="touches"in v?v.touches[0]:v;M.value={startX:u.clientX,startY:u.clientY,originX:y.value.image_position_x??50,originY:y.value.image_position_y??50,container:o}},K=v=>{if(!M.value)return;const o="touches"in v?v.touches[0]:v,{startX:u,startY:g,originX:X,originY:ze,container:S}=M.value;if(!S)return;const i=S.getBoundingClientRect(),Q=(o.clientX-u)/i.width*100,Pe=(o.clientY-g)/i.height*100,ft=ke(X+Q,0,100),en=ke(ze+Pe,0,100);he(n.activeIndex,"image_position_x",Math.round(ft)),he(n.activeIndex,"image_position_y",Math.round(en))},p=()=>{M.value=null},m=v=>{z.value=v},U=v=>{document.execCommand(v,!1);const o=document.activeElement;if(!o)return;const u=W(o.innerHTML),g=o.dataset?.bulletIndex;if(g!==void 0){const X=Number(g);Number.isNaN(X)||m({type:"bullet",index:X,html:u});return}o.getAttribute("contenteditable")==="true"&&m({type:"title",html:u})},W=v=>{const o=document.createElement("div");o.innerHTML=v;const u=g=>{if(g.nodeType===Node.TEXT_NODE)return De(g.textContent||"");if(g.nodeType!==Node.ELEMENT_NODE)return"";const X=g,ze=X.tagName.toLowerCase(),S=Array.from(X.childNodes).map(u).join("");return ze==="strong"||ze==="b"?`<strong>${S}</strong>`:ze==="em"||ze==="i"?`<em>${S}</em>`:ze==="br"?"<br />":S};return Array.from(o.childNodes).map(u).join("")},te=(v,o)=>{const u=o.target;if(!u)return;const g=W(u.innerHTML);m({type:"bullet",index:v,html:g})},P=(v,o)=>{const u=o.target;if(!u)return;const g=W(u.innerHTML);Re(n.activeIndex,v,g),z.value?.type==="bullet"&&z.value.index===v&&(z.value=null)},ne=async(v,o)=>{if((o.metaKey||o.ctrlKey)&&o.key.toLowerCase()==="b"){o.preventDefault(),U("bold");return}if((o.metaKey||o.ctrlKey)&&o.key.toLowerCase()==="i"){o.preventDefault(),U("italic");return}if(o.key==="Enter"){o.preventDefault();const u=o.target;u&&Re(n.activeIndex,v,W(u.innerHTML));const g=I(d.value),X=Array.isArray(g[n.activeIndex]?.bullets)?[...g[n.activeIndex].bullets]:[];X.splice(v+1,0,""),g[n.activeIndex]={...g[n.activeIndex],bullets:X},_(g),await ot();const ze=`[data-bullet-index="${v+1}"]`;document.querySelector(ze)?.focus();return}if(o.key==="Backspace"){const u=o.target;if(u&&u.innerText.trim()===""){const g=I(d.value),X=Array.isArray(g[n.activeIndex]?.bullets)?[...g[n.activeIndex].bullets]:[];if(X.length>1){o.preventDefault(),X.splice(v,1),g[n.activeIndex]={...g[n.activeIndex],bullets:X},_(g),await ot();const S=`[data-bullet-index="${Math.max(0,v-1)}"]`;document.querySelector(S)?.focus()}}}},de=v=>{const o=v.target;o&&m({type:"title",html:W(o.innerHTML)})},fe=v=>{const o=v.target;o&&(he(n.activeIndex,"title",o.innerText.trim()),z.value?.type==="title"&&(z.value=null))},Fe={title:{title:"Title Slide",bullets:["Project title","Name • Department • Date"],layout:"title",visuals:"",speaker_notes:""},problem:{title:"Research Problem",bullets:["Context and motivation","Key gap or pain point","Why it matters"],layout:"bullets",visuals:"Problem landscape diagram",speaker_notes:""},objectives:{title:"Objectives",bullets:["Primary objective","Secondary objective","Success criteria"],layout:"bullets",visuals:"Objective hierarchy diagram",speaker_notes:""},methodology:{title:"Methodology",bullets:["Research design","Data collection","Analysis approach"],layout:"image_left",visuals:"Methodology flowchart",speaker_notes:""},results:{title:"Results",bullets:["Key finding #1","Key finding #2","Performance metrics"],layout:"two_column",visuals:"Results summary chart",speaker_notes:""},conclusion:{title:"Conclusion",bullets:["Summary of contributions","Impact and implications","Future work"],layout:"bullets",visuals:"",speaker_notes:""}},Ie=()=>{const v=Fe[k.value]||Fe.title,o=I(d.value),u=n.activeIndex+1;o.splice(u,0,{...v}),_(o),f("update:activeIndex",u)},ie=(v,o)=>{if(v===o)return;const u=I(d.value),[g]=u.splice(v,1);u.splice(o,0,g),_(u);let X=n.activeIndex;n.activeIndex===v?X=o:v<o&&n.activeIndex>v&&n.activeIndex<=o?X=n.activeIndex-1:v>o&&n.activeIndex>=o&&n.activeIndex<v&&(X=n.activeIndex+1),f("update:activeIndex",X)},Te=(v,o)=>{b.value=o,w.value=o,v.dataTransfer&&(v.dataTransfer.effectAllowed="move",v.dataTransfer.setData("text/plain",String(o)))},Ee=v=>{b.value!==null&&(w.value=v)},et=v=>{w.value===v&&(w.value=null)},tt=v=>{b.value!==null&&(ie(b.value,v),b.value=null,w.value=null)},bt=()=>{b.value=null,w.value=null},he=(v,o,u)=>{const g=I(d.value);g[v]={...g[v],[o]:u},_(g)},Re=(v,o,u)=>{const g=I(d.value),X=Array.isArray(g[v]?.bullets)?[...g[v].bullets]:[];X[o]=u,g[v]={...g[v],bullets:X},_(g)},De=v=>v.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;"),Se=v=>v.includes("<")?W(v):De(v).replace(/\*\*(.+?)\*\*/g,"<strong>$1</strong>").replace(/\*(.+?)\*/g,"<em>$1</em>"),Ke=(v=[])=>{const o=Math.ceil(v.length/2);return[v.slice(0,o),v.slice(o)]},Ye=(v=[])=>{const o=Math.ceil(v.length/2),u=v.slice(0,o).map((X,ze)=>({text:X,index:ze})),g=v.slice(o).map((X,ze)=>({text:X,index:ze+o}));return[u,g]},A=(v=[])=>{const o=Math.ceil(v.length/2),u=v.slice(0,o).map((X,ze)=>({text:X,index:ze})),g=v.slice(o).map((X,ze)=>({text:X,index:ze+o}));return[u,g]},q=(v,o)=>{const g=o.target.innerText.trim(),X=[...y.value.paragraphs||[]];X[v]=g,he(n.activeIndex,"paragraphs",X)},ce=(v,o)=>{if(!o.target.innerText.trim()){const X=[...y.value.paragraphs||[]];X.splice(v,1),he(n.activeIndex,"paragraphs",X)}},xe=()=>{const v=[...y.value.paragraphs||[]];v.push("New paragraph"),he(n.activeIndex,"paragraphs",v)},be=v=>{const o=[...y.value.paragraphs||[]],u=Math.ceil(o.length/2);v==="left"?o.splice(u,0,"New paragraph"):o.push("New paragraph"),he(n.activeIndex,"paragraphs",o)},He=async()=>{const v=I(d.value),o=v[n.activeIndex],u=Array.isArray(o?.bullets)?[...o.bullets]:[];u.push("New bullet point");const g=(o?.paragraphs?.length??0)>0,X=o?.content_type==="paragraphs";v[n.activeIndex]={...o,bullets:u,content_type:g||X?"mixed":o?.content_type||"bullets"},_(v),await ot();const ze=`[data-bullet-index="${u.length-1}"]`;document.querySelector(ze)?.focus()},Ne=le(()=>{const v=y.value;if(v.mixed_content?.length)return v.mixed_content;const o=[];return(v.paragraphs||[]).forEach(u=>o.push({type:"paragraph",text:u})),(v.bullets||[]).forEach(u=>o.push({type:"bullet",text:u})),o}),Ue=v=>{if(!v)return;const o=I(d.value);o[n.activeIndex]={...o[n.activeIndex],mixed_content:v,content_type:v.length>0?"mixed":"bullets",paragraphs:v.filter(u=>u.type==="paragraph").map(u=>u.text),bullets:v.filter(u=>u.type==="bullet").map(u=>u.text)},_(o)},qe=(v,o)=>{const u=[...Ne.value];if(!u.length)return;const g=o==="up"?v-1:v+1;g<0||g>=u.length||([u[v],u[g]]=[u[g],u[v]],Ue(u))},nt=(v,o)=>{const u=[...Ne.value];u[v]&&(u[v]={...u[v],text:o},Ue(u))},Ge=v=>{const o=[...Ne.value];if(o.splice(v,1),o.length===0){const u=I(d.value);u[n.activeIndex]={...u[n.activeIndex],mixed_content:[],content_type:"bullets",paragraphs:[],bullets:[]},_(u);return}Ue(o)},Xe=v=>{const o=[...Ne.value];o.push({type:v,text:v==="paragraph"?"New paragraph":"New bullet point"}),Ue(o)},yt={mounted(v,o){v.innerText=o.value||""},updated(v,o){document.activeElement!==v&&(v.innerText=o.value||"")}},$t=(v,o)=>{const g=o.target.innerText.trim();nt(v,g)},at=()=>{n.activeIndex<d.value.length-1&&f("update:activeIndex",n.activeIndex+1)},Je=()=>{n.activeIndex>0&&f("update:activeIndex",n.activeIndex-1)},y=le(()=>{const v={title:"",bullets:[],speaker_notes:"",visuals:"",charts:[],tables:[]};return!d.value||d.value.length===0?v:d.value[n.activeIndex]||v}),D=async()=>{if(h.value=!0,await ot(),R.value)try{R.value.requestFullscreen?await R.value.requestFullscreen():R.value.webkitRequestFullscreen?await R.value.webkitRequestFullscreen():R.value.msRequestFullscreen&&await R.value.msRequestFullscreen()}catch(v){console.warn("Fullscreen request failed:",v)}},pe=E(1),ve=()=>{if(!H.value)return;const v=H.value,o=v.querySelector(".slide-content");if(!o)return;const g=v.clientHeight*.8,X=o.scrollHeight;X>g?pe.value=g/X:pe.value=1};Le([h,()=>n.activeIndex],()=>{h.value&&ot(ve)});const Be=()=>{h.value&&ve()},lt=()=>{document.fullscreenElement&&document.exitFullscreen().catch(()=>{}),h.value=!1},wt=E(null),{isSwiping:Wt,direction:Ft}=Vt(wt);Le(Wt,v=>{!v&&Ft.value&&!h.value&&(Ft.value==="left"&&at(),Ft.value==="right"&&Je())});const{isSwiping:Rt,direction:At}=Vt(H);Le(Rt,v=>{!v&&h.value&&At.value&&(At.value==="left"&&at(),At.value==="right"&&Je())}),St(()=>{const v=()=>{!document.fullscreenElement&&h.value&&(h.value=!1)};document.addEventListener("fullscreenchange",v),window.addEventListener("resize",Be),dn(()=>{document.removeEventListener("fullscreenchange",v),window.removeEventListener("resize",Be)})});const Ht=v=>{h.value&&((v.key==="ArrowRight"||v.key===" ")&&at(),v.key==="ArrowLeft"&&Je(),v.key==="Escape"&&lt())};return typeof window<"u"&&(window.addEventListener("keydown",Ht),window.addEventListener("mousemove",K),window.addEventListener("mouseup",p),window.addEventListener("touchmove",K),window.addEventListener("touchend",p)),dn(()=>{typeof window>"u"||(window.removeEventListener("keydown",Ht),window.removeEventListener("mousemove",K),window.removeEventListener("mouseup",p),window.removeEventListener("touchmove",K),window.removeEventListener("touchend",p))}),(v,o)=>(l(),a(ee,null,[d.value.length?(l(),a("div",ds,[v.compact?Y("",!0):(l(),a("div",cs,[e("div",us,[e("div",fs,[s(t(cn),{class:"h-4 w-4 text-indigo-400"})]),e("div",ps,[o[29]||(o[29]=e("h3",{class:"text-[11px] font-bold text-white whitespace-nowrap"},"Slide Editor",-1)),s(t(_t),{variant:"outline",class:"text-[9px] px-1.5 h-4 bg-white/5 border-white/10 text-zinc-400 whitespace-nowrap"},{default:C(()=>[se(B(n.activeIndex+1)+" / "+B(d.value.length),1)]),_:1}),n.isSaving?(l(),a("div",gs)):Y("",!0)])]),e("div",vs,[e("div",hs,[ct(e("select",{class:"bg-transparent border-none text-[10px] text-zinc-400 focus:ring-0 outline-none w-20 cursor-pointer h-6","onUpdate:modelValue":o[0]||(o[0]=u=>k.value=u)},[...o[30]||(o[30]=[Wn('<option value="title" data-v-9b401f55>Title</option><option value="problem" data-v-9b401f55>Problem</option><option value="objectives" data-v-9b401f55>Objectives</option><option value="methodology" data-v-9b401f55>Methodology</option><option value="results" data-v-9b401f55>Results</option><option value="conclusion" data-v-9b401f55>Conclusion</option>',6)])],512),[[Zn,k.value]]),s(t(ae),{variant:"ghost",size:"icon",class:"h-6 w-6 text-indigo-400 hover:text-white",onClick:Ie,title:"Add Slide"},{default:C(()=>[s(t(Yt),{class:"h-3.5 w-3.5"})]),_:1})]),o[35]||(o[35]=e("div",{class:"h-4 w-[1px] bg-white/10 shrink-0"},null,-1)),e("div",xs,[s(t(ae),{variant:"ghost",size:"icon",class:ge(["h-6 w-6 transition-colors",(y.value.layout||"bullets")==="title"?"bg-indigo-500/20 text-indigo-400":"text-zinc-400 hover:text-white"]),onClick:o[1]||(o[1]=u=>he(n.activeIndex,"layout","title")),title:"Title Layout"},{default:C(()=>[s(t(hn),{class:"h-3.5 w-3.5"})]),_:1},8,["class"]),s(t(ae),{variant:"ghost",size:"icon",class:ge(["h-6 w-6 transition-colors",(y.value.layout||"bullets")==="bullets"?"bg-indigo-500/20 text-indigo-400":"text-zinc-400 hover:text-white"]),onClick:o[2]||(o[2]=u=>he(n.activeIndex,"layout","bullets")),title:"Bullets"},{default:C(()=>[s(t(el),{class:"h-3.5 w-3.5"})]),_:1},8,["class"]),s(t(ae),{variant:"ghost",size:"icon",class:ge(["h-6 w-6 transition-colors",(y.value.layout||"bullets")==="two_column"?"bg-indigo-500/20 text-indigo-400":"text-zinc-400 hover:text-white"]),onClick:o[3]||(o[3]=u=>he(n.activeIndex,"layout","two_column")),title:"Two Columns"},{default:C(()=>[s(t(tl),{class:"h-3.5 w-3.5"})]),_:1},8,["class"]),s(t(ae),{variant:"ghost",size:"icon",class:ge(["h-6 w-6 transition-colors",(y.value.layout||"bullets")==="image_left"?"bg-indigo-500/20 text-indigo-400":"text-zinc-400 hover:text-white"]),onClick:o[4]||(o[4]=u=>he(n.activeIndex,"layout","image_left")),title:"Image Left"},{default:C(()=>[s(t(nl),{class:"h-3.5 w-3.5"})]),_:1},8,["class"]),s(t(ae),{variant:"ghost",size:"icon",class:ge(["h-6 w-6 transition-colors",(y.value.layout||"bullets")==="image_right"?"bg-indigo-500/20 text-indigo-400":"text-zinc-400 hover:text-white"]),onClick:o[5]||(o[5]=u=>he(n.activeIndex,"layout","image_right")),title:"Image Right"},{default:C(()=>[s(t(ll),{class:"h-3.5 w-3.5"})]),_:1},8,["class"])]),e("div",ms,[s(t(ae),{variant:"ghost",size:"icon",class:"h-6 w-6 text-zinc-400 hover:text-white",onClick:o[6]||(o[6]=u=>U("bold")),title:"Bold"},{default:C(()=>[...o[31]||(o[31]=[e("span",{class:"font-bold text-[10px]"},"B",-1)])]),_:1}),s(t(ae),{variant:"ghost",size:"icon",class:"h-6 w-6 text-zinc-400 hover:text-white",onClick:o[7]||(o[7]=u=>U("italic")),title:"Italic"},{default:C(()=>[...o[32]||(o[32]=[e("span",{class:"italic text-[10px]"},"I",-1)])]),_:1}),s(t(ae),{variant:"ghost",size:"icon",class:"h-6 w-6 text-zinc-400 hover:text-white",onClick:o[8]||(o[8]=u=>Xe("paragraph")),title:"Add Paragraph"},{default:C(()=>[s(t(un),{class:"h-3.5 w-3.5"})]),_:1}),s(t(ae),{variant:"ghost",size:"icon",class:"h-6 w-6 text-zinc-400 hover:text-white",onClick:o[9]||(o[9]=u=>Xe("bullet")),title:"Add Bullet"},{default:C(()=>[s(t(Yt),{class:"h-3 w-3"})]),_:1}),s(t(ae),{variant:"ghost",size:"icon",class:"h-6 w-6 text-zinc-400 hover:text-white",title:"Upload Image",disabled:F.value,onClick:we},{default:C(()=>[s(t(qt),{class:"h-3.5 w-3.5"})]),_:1},8,["disabled"])]),o[36]||(o[36]=e("div",{class:"h-4 w-[1px] bg-white/10 shrink-0"},null,-1)),e("div",bs,[s(t(ae),{variant:"ghost",size:"icon",class:"h-7 w-7 text-zinc-500 hover:text-white",onClick:o[10]||(o[10]=u=>N(n.activeIndex)),title:"Duplicate"},{default:C(()=>[s(t(xn),{class:"h-3.5 w-3.5"})]),_:1}),s(t(ae),{variant:"ghost",size:"icon",class:"h-7 w-7 text-zinc-500 hover:text-rose-400",onClick:o[11]||(o[11]=u=>J(n.activeIndex)),title:"Delete"},{default:C(()=>[s(t(Mt),{class:"h-3.5 w-3.5"})]),_:1})]),o[37]||(o[37]=e("div",{class:"h-4 w-[1px] bg-white/10 shrink-0"},null,-1)),e("div",ys,[s(t(ae),{variant:"secondary",size:"sm",class:"h-7 text-[10px] px-2.5 gap-1.5 font-bold",onClick:D},{default:C(()=>[s(t(mn),{class:"h-3 w-3 fill-current"}),o[33]||(o[33]=se()),o[34]||(o[34]=e("span",{class:"hidden xs:inline"},"PRESENT",-1))]),_:1}),e("div",ws,[n.showPptx?(l(),me(t(ae),{key:0,variant:"ghost",size:"icon",class:"h-7 w-7 text-zinc-500 hover:text-white",disabled:n.pptxBusy,onClick:o[12]||(o[12]=u=>n.pptxUrl?f("download-pptx"):f("export-pptx")),title:n.pptxUrl?"Download PPTX":"Export PPTX"},{default:C(()=>[s(t(un),{class:"h-3.5 w-3.5"})]),_:1},8,["disabled","title"])):Y("",!0),v.compact?(l(),me(t(ae),{key:1,variant:"ghost",size:"icon",class:"h-7 w-7 text-zinc-500 hover:text-white",onClick:o[13]||(o[13]=u=>f("toggle-expand")),title:"Expand"},{default:C(()=>[s(t(Jt),{class:"h-3.5 w-3.5"})]),_:1})):Y("",!0)])])])])),e("input",{ref_key:"imageUploadInput",ref:r,type:"file",class:"hidden",accept:"image/*",onChange:je},null,544),O.value&&!v.compact?(l(),a("div",ks,B(O.value),1)):Y("",!0),e("div",_s,[v.compact?Y("",!0):(l(),a("div",Ss,[e("div",zs,[o[38]||(o[38]=e("span",{class:"text-[10px] font-bold text-zinc-500 uppercase tracking-widest"},"Navigator",-1)),s(t(_t),{variant:"outline",class:"text-[9px] bg-white/5 border-white/10"},{default:C(()=>[se(B(d.value.length)+" Slides",1)]),_:1})]),e("div",Cs,[(l(!0),a(ee,null,oe(d.value,(u,g)=>(l(),a("div",{key:g,draggable:"true",onDragstart:X=>Te(X,g),onDragover:dt(X=>Ee(g),["prevent"]),onDragleave:X=>et(g),onDrop:X=>tt(g),onDragend:bt,onClick:X=>f("update:activeIndex",g),class:ge(["group/thumb relative aspect-video bg-zinc-950 rounded-lg border cursor-pointer transition-all duration-300 overflow-hidden",[n.activeIndex===g?"border-indigo-500 ring-2 ring-indigo-500/20 shadow-[0_0_15px_rgba(99,102,241,0.2)]":"border-white/5 hover:border-white/20",w.value===g?"translate-y-2":""]])},[e("div",Fs,[e("span",{class:ge(["text-[10px] font-bold",n.activeIndex===g?"text-indigo-400":"text-zinc-500"])},B(g+1),3)]),o[39]||(o[39]=e("div",{class:"p-3 h-full flex flex-col gap-1.5 opacity-60 group-hover/thumb:opacity-100 transition-opacity"},[e("div",{class:"h-1.5 w-1/2 bg-white/20 rounded"}),e("div",{class:"h-1 w-3/4 bg-white/5 rounded"}),e("div",{class:"h-1 w-2/3 bg-white/5 rounded"})],-1))],42,$s))),128))])],512)),e("div",Is,[s(t(ae),{variant:"ghost",size:"icon",class:"h-10 w-10 rounded-full bg-black/40 border border-white/10 text-white backdrop-blur-md opacity-0 group-hover:opacity-100 transition-all pointer-events-auto -translate-x-4 group-hover:translate-x-2",disabled:n.activeIndex===0,onClick:Je},{default:C(()=>[s(t(mt),{class:"h-6 w-6"})]),_:1},8,["disabled"])]),e("div",Ts,[s(t(ae),{variant:"ghost",size:"icon",class:"h-10 w-10 rounded-full bg-black/40 border border-white/10 text-white backdrop-blur-md opacity-0 group-hover:opacity-100 transition-all pointer-events-auto translate-x-4 group-hover:-translate-x-2",disabled:n.activeIndex===d.value.length-1,onClick:at},{default:C(()=>[s(t(Qe),{class:"h-6 w-6"})]),_:1},8,["disabled"])]),e("div",{class:ge(["flex-1 flex flex-col min-w-0 overflow-hidden relative",v.compact?"bg-zinc-950/60":"bg-zinc-950/40"])},[v.compact?(l(),a("div",{key:0,class:"flex-1 flex flex-col overflow-y-auto custom-scrollbar p-5 space-y-6",ref_key:"editorPreviewContainer",ref:wt},[e("div",Es,[e("div",As,[e("div",{class:"h-full bg-indigo-500 shadow-[0_0_10px_rgba(99,102,241,0.4)] transition-all duration-700 ease-out",style:re({width:`${(n.activeIndex+1)/d.value.length*100}%`})},null,4)]),e("div",js,[e("div",Bs,[e("button",{onClick:Je,disabled:n.activeIndex===0,class:"p-1 text-zinc-500 hover:text-white disabled:opacity-10 transition-colors"},[s(t(mt),{class:"h-5 w-5"})],8,Ds),e("div",Ps," Slide "+B(n.activeIndex+1)+" of "+B(d.value.length),1),e("button",{onClick:at,disabled:n.activeIndex===d.value.length-1,class:"p-1 text-zinc-500 hover:text-white disabled:opacity-10 transition-colors"},[s(t(Qe),{class:"h-5 w-5"})],8,Ms)]),e("div",Ls,B(y.value.title),1)])]),o[43]||(o[43]=e("div",{class:"h-[1px] bg-white/5 w-full"},null,-1)),e("div",Os,[y.value.visuals?(l(),a("div",Ws,[e("div",Rs,[s(t(qt),{class:"h-3.5 w-3.5"}),o[40]||(o[40]=e("span",{class:"text-[10px] font-bold uppercase tracking-widest"},"Visual Strategy",-1))]),e("p",Hs,'"'+B(y.value.visuals)+'"',1)])):Y("",!0),e("div",Ns,[y.value.bullets&&y.value.bullets.length?(l(),a("div",Us,[(l(!0),a(ee,null,oe(y.value.bullets,(u,g)=>(l(),a("div",{key:g,class:"flex gap-4 group animate-in fade-in slide-in-from-left-2 duration-500",style:re({animationDelay:`${g*100}ms`})},[o[41]||(o[41]=e("div",{class:"mt-1.5 h-1.5 w-1.5 rounded-full bg-indigo-500 shrink-0 shadow-[0_0_8px_rgba(99,102,241,0.6)]"},null,-1)),e("p",{class:"text-xs lg:text-sm text-zinc-200 leading-relaxed font-light",innerHTML:Se(u)},null,8,Gs)],4))),128))])):y.value.paragraphs&&y.value.paragraphs.length?(l(),a("div",Xs,[(l(!0),a(ee,null,oe(y.value.paragraphs,(u,g)=>(l(),a("p",{key:g,class:"text-xs text-zinc-300 leading-relaxed border-l-2 border-white/5 pl-4 py-1"},B(u),1))),128))])):Y("",!0)]),y.value.speaker_notes?(l(),a("div",Vs,[o[42]||(o[42]=e("div",{class:"text-[10px] font-bold text-zinc-500 uppercase tracking-widest mb-3"}," Speaker Notes",-1)),e("p",Ys,B(y.value.speaker_notes),1)])):Y("",!0)])],512)):(l(),a("div",{key:1,class:"flex-1 flex flex-col items-center justify-center overflow-auto custom-scrollbar relative bg-black/20 p-6",ref_key:"editorPreviewContainer",ref:wt},[e("div",qs,[o[60]||(o[60]=e("div",{class:"absolute inset-0 bg-gradient-to-br from-indigo-500/5 via-transparent to-purple-500/5 pointer-events-none"},null,-1)),e("div",Ks,[e("div",Js,[o[44]||(o[44]=e("span",{class:"text-[8px] lg:text-[10px] uppercase tracking-[0.2em] font-bold text-indigo-500/60 mb-1 block"},"Premium Deck",-1)),e("h1",{class:"text-sm lg:text-2xl font-display font-bold text-white tracking-tight leading-tight line-clamp-2 focus:outline-none inline-edit",contenteditable:"true","data-placeholder":"Slide Title",onInput:de,onBlur:fe,onKeydown:o[14]||(o[14]=sl(dt(()=>{},["prevent"]),["enter"]))},B(y.value.title),33)]),e("div",Qs,[(y.value.layout||"bullets")==="title"?(l(),a("div",Zs,[...o[45]||(o[45]=[e("p",{class:"text-zinc-600 text-xs italic"},"Title-only layout.",-1)])])):(y.value.layout||"bullets")==="two_column"?(l(),a("div",eo,[e("div",to,[y.value.paragraphs&&y.value.paragraphs.length?(l(),a(ee,{key:0},[e("div",no,[(l(!0),a(ee,null,oe(A(y.value.paragraphs||[])[0],u=>(l(),a("p",{key:"p-"+u.index,class:"text-sm lg:text-base text-zinc-300 leading-relaxed focus:outline-none inline-edit cursor-text",contenteditable:"true","data-paragraph-index":u.index,"data-placeholder":"Paragraph",onInput:g=>q(u.index,g),onBlur:g=>ce(u.index,g)},B(u.text),41,lo))),128)),y.value.bullets&&y.value.bullets.length?(l(),a("ul",so,[(l(!0),a(ee,null,oe(Ye(y.value.bullets||[])[0],u=>(l(),a("li",{key:"bl-"+u.index,class:"flex gap-3 text-zinc-300"},[o[46]||(o[46]=e("span",{class:"text-indigo-500 font-bold"},"•",-1)),e("span",{class:"text-sm lg:text-base leading-relaxed focus:outline-none inline-edit",contenteditable:"true","data-bullet-index":u.index,"data-placeholder":"Bullet",onInput:g=>te(u.index,g),onKeydown:g=>ne(u.index,g),onBlur:g=>P(u.index,g),innerHTML:Se(u.text)},null,40,oo)]))),128))])):Y("",!0)]),e("div",ao,[e("button",{onClick:o[15]||(o[15]=u=>be("left")),class:"flex-1 py-2 border border-dashed border-white/10 rounded text-zinc-600 text-xs hover:border-indigo-500/50 hover:text-indigo-400 transition-colors"}," + Paragraph "),e("button",{onClick:He,class:"flex-1 py-2 border border-dashed border-white/10 rounded text-zinc-600 text-xs hover:border-indigo-500/50 hover:text-indigo-400 transition-colors"}," + Bullet ")])],64)):y.value.headings&&y.value.headings.length?(l(!0),a(ee,{key:1},oe(y.value.headings.slice(0,Math.ceil(y.value.headings.length/2)),(u,g)=>(l(),a("div",{key:"h-"+g,class:"space-y-1"},[e("h3",io,B(u.heading),1),e("p",ro,B(u.content),1)]))),128)):y.value.bullets&&y.value.bullets.length?(l(),a("ul",co,[(l(!0),a(ee,null,oe(Ye(y.value.bullets||[])[0],u=>(l(),a("li",{key:u.index,class:"flex gap-3 text-zinc-300"},[o[47]||(o[47]=e("span",{class:"text-indigo-500 font-bold"},"•",-1)),e("span",{class:"text-sm lg:text-base leading-relaxed focus:outline-none inline-edit",contenteditable:"true","data-bullet-index":u.index,"data-placeholder":"Bullet",onInput:g=>te(u.index,g),onKeydown:g=>ne(u.index,g),onBlur:g=>P(u.index,g),innerHTML:Se(u.text)},null,40,uo)]))),128))])):(l(),a("button",{key:3,onClick:o[16]||(o[16]=u=>be("left")),class:"h-full w-full flex items-center justify-center border-2 border-dashed border-white/5 rounded-lg hover:border-indigo-500/30 transition-colors cursor-pointer"},[...o[48]||(o[48]=[e("p",{class:"text-zinc-600 text-xs italic hover:text-indigo-400"},"+ Add content",-1)])]))]),e("div",fo,[y.value.paragraphs&&y.value.paragraphs.length>1?(l(),a(ee,{key:0},[e("div",po,[(l(!0),a(ee,null,oe(A(y.value.paragraphs||[])[1],u=>(l(),a("p",{key:"pr-"+u.index,class:"text-sm lg:text-base text-zinc-300 leading-relaxed focus:outline-none inline-edit cursor-text",contenteditable:"true","data-paragraph-index":u.index,"data-placeholder":"Paragraph",onInput:g=>q(u.index,g),onBlur:g=>ce(u.index,g)},B(u.text),41,go))),128)),y.value.bullets&&y.value.bullets.length>1?(l(),a("ul",vo,[(l(!0),a(ee,null,oe(Ye(y.value.bullets||[])[1],u=>(l(),a("li",{key:"br-"+u.index,class:"flex gap-3 text-zinc-300"},[o[49]||(o[49]=e("span",{class:"text-indigo-500 font-bold"},"•",-1)),e("span",{class:"text-sm lg:text-base leading-relaxed focus:outline-none inline-edit",contenteditable:"true","data-bullet-index":u.index,"data-placeholder":"Bullet",onInput:g=>te(u.index,g),onKeydown:g=>ne(u.index,g),onBlur:g=>P(u.index,g),innerHTML:Se(u.text)},null,40,ho)]))),128))])):Y("",!0)]),e("div",xo,[e("button",{onClick:o[17]||(o[17]=u=>be("right")),class:"flex-1 py-2 border border-dashed border-white/10 rounded text-zinc-600 text-xs hover:border-indigo-500/50 hover:text-indigo-400 transition-colors"}," + Paragraph "),e("button",{onClick:He,class:"flex-1 py-2 border border-dashed border-white/10 rounded text-zinc-600 text-xs hover:border-indigo-500/50 hover:text-indigo-400 transition-colors"}," + Bullet ")])],64)):y.value.headings&&y.value.headings.length>1?(l(!0),a(ee,{key:1},oe(y.value.headings.slice(Math.ceil(y.value.headings.length/2)),(u,g)=>(l(),a("div",{key:"hr-"+g,class:"space-y-1"},[e("h3",mo,B(u.heading),1),e("p",bo,B(u.content),1)]))),128)):y.value.bullets&&y.value.bullets.length>1?(l(),a("ul",yo,[(l(!0),a(ee,null,oe(Ye(y.value.bullets||[])[1],u=>(l(),a("li",{key:u.index,class:"flex gap-3 text-zinc-300"},[o[50]||(o[50]=e("span",{class:"text-indigo-500 font-bold"},"•",-1)),e("span",{class:"text-sm lg:text-base leading-relaxed focus:outline-none inline-edit",contenteditable:"true","data-bullet-index":u.index,"data-placeholder":"Bullet",onInput:g=>te(u.index,g),onKeydown:g=>ne(u.index,g),onBlur:g=>P(u.index,g),innerHTML:Se(u.text)},null,40,wo)]))),128))])):(l(),a("button",{key:3,onClick:o[18]||(o[18]=u=>be("right")),class:"h-full w-full flex items-center justify-center border-2 border-dashed border-white/5 rounded-lg hover:border-indigo-500/30 transition-colors cursor-pointer"},[...o[51]||(o[51]=[e("p",{class:"text-zinc-600 text-xs italic hover:text-indigo-400"},"+ Add content",-1)])]))])])):(y.value.layout||"bullets")==="image_left"||(y.value.layout||"bullets")==="image_right"?(l(),a("div",ko,[e("div",{class:ge(["w-1/2 rounded-lg border border-white/10 bg-white/5 flex items-center justify-center relative overflow-hidden",(y.value.layout||"bullets")==="image_left"?"order-1":"order-2"]),onMousedown:dt(Z,["prevent"]),onTouchstart:dt(Z,["prevent"])},[y.value.image_url?Y("",!0):(l(),a("button",{key:0,type:"button",class:"absolute inset-0 z-10",onClick:we})),y.value.image_url?(l(),a("img",{key:1,src:y.value.image_url,alt:"Slide visual",class:"h-full w-full cursor-grab",style:re({objectFit:y.value.image_fit||"cover",objectPosition:`${y.value.image_position_x??50}% ${y.value.image_position_y??50}%`,transform:`scale(${y.value.image_scale||1})`})},null,12,_o)):(l(),a("span",So,"Click to insert image")),y.value.image_url?(l(),a("div",zo,[s(t(ae),{variant:"ghost",size:"sm",class:"h-6 text-[10px] gap-1 text-zinc-200 hover:bg-white/10",onClick:dt(Ae,["stop"])},{default:C(()=>[...o[52]||(o[52]=[se(" Replace ",-1)])]),_:1}),s(t(ae),{variant:"ghost",size:"sm",class:"h-6 text-[10px] gap-1 text-rose-200 hover:bg-white/10",onClick:dt(Oe,["stop"])},{default:C(()=>[...o[53]||(o[53]=[se(" Remove ",-1)])]),_:1}),e("select",{class:"ml-auto h-6 bg-zinc-950/60 border border-white/10 rounded-md px-1 text-[10px] text-zinc-200 focus:ring-1 focus:ring-indigo-500 outline-none",value:y.value.image_fit||"cover",onChange:ye},[...o[54]||(o[54]=[e("option",{value:"cover"},"Cover",-1),e("option",{value:"contain"},"Contain",-1)])],40,Co),e("input",{type:"range",min:"0.5",max:"2",step:"0.05",class:"w-20",value:y.value.image_scale||1,onInput:We},null,40,$o)])):Y("",!0)],34),e("div",{class:ge(["flex-1 overflow-auto flex flex-col",(y.value.layout||"bullets")==="image_left"?"order-2":"order-1"])},[y.value.paragraphs?.length&&y.value.bullets?.length||y.value.mixed_content?.length?(l(),a("div",Fo,[(l(!0),a(ee,null,oe(Ne.value,(u,g)=>(l(),a("div",{key:"mixed-"+g,class:"group/item flex items-start gap-2 relative"},[e("div",Io,[e("button",{onClick:X=>qe(g,"up"),disabled:g===0,class:"p-0.5 text-zinc-500 hover:text-indigo-400 disabled:opacity-20 disabled:cursor-not-allowed"},[s(t(Sn),{class:"h-3 w-3"})],8,To),e("button",{onClick:X=>qe(g,"down"),disabled:g===Ne.value.length-1,class:"p-0.5 text-zinc-500 hover:text-indigo-400 disabled:opacity-20 disabled:cursor-not-allowed"},[s(t(Et),{class:"h-3 w-3"})],8,Eo)]),e("div",Ao,[u.type==="bullet"?(l(),a("span",jo,"•")):Y("",!0),ct(e("span",{class:"flex-1 text-sm lg:text-base leading-relaxed focus:outline-none inline-edit cursor-text text-zinc-300",contenteditable:"true","data-mixed-index":g,onBlur:X=>$t(g,X)},null,40,Bo),[[yt,u.text]])]),e("button",{onClick:X=>Ge(g),class:"p-1 text-zinc-600 hover:text-rose-400 opacity-0 group-hover/item:opacity-100 transition-opacity shrink-0"},[s(t(Mt),{class:"h-3 w-3"})],8,Do)]))),128)),e("div",Po,[e("button",{onClick:o[19]||(o[19]=u=>Xe("paragraph")),class:"flex-1 py-2 border border-dashed border-white/10 rounded text-zinc-600 text-xs hover:border-indigo-500/50 hover:text-indigo-400 transition-colors"}," + Paragraph "),e("button",{onClick:o[20]||(o[20]=u=>Xe("bullet")),class:"flex-1 py-2 border border-dashed border-white/10 rounded text-zinc-600 text-xs hover:border-indigo-500/50 hover:text-indigo-400 transition-colors"}," + Bullet ")])])):y.value.paragraphs&&y.value.paragraphs.length?(l(),a("div",Mo,[(l(!0),a(ee,null,oe(y.value.paragraphs,(u,g)=>(l(),a("p",{key:"p-"+g,class:"text-sm lg:text-base text-zinc-300 leading-relaxed focus:outline-none inline-edit cursor-text",contenteditable:"true","data-paragraph-index":g,"data-placeholder":"Paragraph",onInput:X=>q(g,X),onBlur:X=>ce(g,X)},B(u),41,Lo))),128)),e("div",{class:"flex gap-2"},[e("button",{onClick:xe,class:"flex-1 py-2 border border-dashed border-white/10 rounded text-zinc-600 text-xs hover:border-indigo-500/50 hover:text-indigo-400 transition-colors"}," + Paragraph "),e("button",{onClick:He,class:"flex-1 py-2 border border-dashed border-white/10 rounded text-zinc-600 text-xs hover:border-indigo-500/50 hover:text-indigo-400 transition-colors"}," + Bullet ")])])):y.value.headings&&y.value.headings.length?(l(),a("div",Oo,[(l(!0),a(ee,null,oe(y.value.headings,(u,g)=>(l(),a("div",{key:"h-"+g,class:"space-y-1"},[e("h3",Wo,B(u.heading),1),e("p",Ro,B(u.content),1)]))),128)),e("button",{onClick:He,class:"w-full py-2 border border-dashed border-white/10 rounded text-zinc-600 text-xs hover:border-indigo-500/50 hover:text-indigo-400 transition-colors"}," + Add bullet ")])):y.value.bullets&&y.value.bullets.length?(l(),a("ul",Ho,[(l(!0),a(ee,null,oe(y.value.bullets,(u,g)=>(l(),a("li",{key:g,class:"flex gap-3 text-zinc-300"},[o[55]||(o[55]=e("span",{class:"text-indigo-500 font-bold"},"•",-1)),e("span",{class:"text-sm lg:text-base leading-relaxed focus:outline-none inline-edit",contenteditable:"true","data-bullet-index":g,"data-placeholder":"Bullet",onInput:X=>te(g,X),onKeydown:X=>ne(g,X),onBlur:X=>P(g,X),innerHTML:Se(u)},null,40,No)]))),128))])):(l(),a("div",Uo,[o[56]||(o[56]=e("div",{class:"flex-1 flex items-center justify-center border-2 border-dashed border-white/5 rounded-lg"},[e("p",{class:"text-zinc-600 text-xs italic"},"No content yet")],-1)),e("div",Go,[e("button",{onClick:o[21]||(o[21]=u=>Xe("paragraph")),class:"flex-1 py-2 border border-dashed border-white/10 rounded text-zinc-600 text-xs hover:border-indigo-500/50 hover:text-indigo-400 transition-colors"}," + Paragraph "),e("button",{onClick:o[22]||(o[22]=u=>Xe("bullet")),class:"flex-1 py-2 border border-dashed border-white/10 rounded text-zinc-600 text-xs hover:border-indigo-500/50 hover:text-indigo-400 transition-colors"}," + Bullet ")])]))],2)])):(l(),a(ee,{key:3},[y.value.content_type==="paragraphs"?(l(),a(ee,{key:0},[y.value.paragraphs&&y.value.paragraphs.length?(l(),a("div",Xo,[(l(!0),a(ee,null,oe(y.value.paragraphs,(u,g)=>(l(),a("p",{key:g,class:"text-sm lg:text-base text-zinc-300 leading-relaxed focus:outline-none inline-edit cursor-text",contenteditable:"true","data-paragraph-index":g,"data-placeholder":"Paragraph",onInput:X=>q(g,X),onBlur:X=>ce(g,X)},B(u),41,Vo))),128)),e("div",{class:"flex gap-2"},[e("button",{onClick:xe,class:"flex-1 py-2 border border-dashed border-white/10 rounded text-zinc-600 text-xs hover:border-indigo-500/50 hover:text-indigo-400 transition-colors"}," + Add paragraph "),e("button",{onClick:He,class:"flex-1 py-2 border border-dashed border-white/10 rounded text-zinc-600 text-xs hover:border-indigo-500/50 hover:text-indigo-400 transition-colors"}," + Add bullet ")])])):y.value.headings&&y.value.headings.length?(l(),a("div",Yo,[(l(!0),a(ee,null,oe(y.value.headings,(u,g)=>(l(),a("div",{key:g,class:"space-y-1.5"},[e("h3",qo,B(u.heading),1),e("p",Ko,B(u.content),1)]))),128)),e("button",{onClick:He,class:"w-full py-2 border border-dashed border-white/10 rounded text-zinc-600 text-xs hover:border-indigo-500/50 hover:text-indigo-400 transition-colors"}," + Add bullet ")])):(l(),a("button",{key:2,onClick:xe,class:"h-full w-full flex items-center justify-center border-2 border-dashed border-white/5 rounded-lg hover:border-indigo-500/30 transition-colors cursor-pointer"},[...o[57]||(o[57]=[e("p",{class:"text-zinc-600 text-xs italic hover:text-indigo-400"},"+ Add paragraph",-1)])]))],64)):y.value.content_type==="mixed"?(l(),a("div",Jo,[(l(!0),a(ee,null,oe(Ne.value,(u,g)=>(l(),a("div",{key:"mixed-"+g,class:"group/item flex items-start gap-2 relative"},[e("div",Qo,[e("button",{onClick:X=>qe(g,"up"),disabled:g===0,class:"p-0.5 text-zinc-500 hover:text-indigo-400 disabled:opacity-20 disabled:cursor-not-allowed"},[s(t(Sn),{class:"h-3 w-3"})],8,Zo),e("button",{onClick:X=>qe(g,"down"),disabled:g===Ne.value.length-1,class:"p-0.5 text-zinc-500 hover:text-indigo-400 disabled:opacity-20 disabled:cursor-not-allowed"},[s(t(Et),{class:"h-3 w-3"})],8,ea)]),e("div",ta,[u.type==="bullet"?(l(),a("span",na,"•")):Y("",!0),ct(e("span",{class:"flex-1 text-sm lg:text-base leading-relaxed focus:outline-none inline-edit cursor-text text-zinc-300",contenteditable:"true","data-mixed-index":g,onBlur:X=>$t(g,X)},null,40,la),[[yt,u.text]])]),e("button",{onClick:X=>Ge(g),class:"p-1 text-zinc-600 hover:text-rose-400 opacity-0 group-hover/item:opacity-100 transition-opacity shrink-0"},[s(t(Mt),{class:"h-3 w-3"})],8,sa)]))),128)),e("div",oa,[e("button",{onClick:o[23]||(o[23]=u=>Xe("paragraph")),class:"flex-1 py-2 border border-dashed border-white/10 rounded text-zinc-600 text-xs hover:border-indigo-500/50 hover:text-indigo-400 transition-colors"}," + Paragraph "),e("button",{onClick:o[24]||(o[24]=u=>Xe("bullet")),class:"flex-1 py-2 border border-dashed border-white/10 rounded text-zinc-600 text-xs hover:border-indigo-500/50 hover:text-indigo-400 transition-colors"}," + Bullet ")])])):(l(),a(ee,{key:2},[y.value.bullets&&y.value.bullets.length?(l(),a("ul",aa,[(l(!0),a(ee,null,oe(y.value.bullets,(u,g)=>(l(),a("li",{key:g,class:"flex gap-3 text-zinc-300"},[o[58]||(o[58]=e("span",{class:"text-indigo-500 font-bold"},"•",-1)),e("span",{class:"text-sm lg:text-base leading-relaxed focus:outline-none inline-edit",contenteditable:"true","data-bullet-index":g,"data-placeholder":"Bullet",onInput:X=>te(g,X),onKeydown:X=>ne(g,X),onBlur:X=>P(g,X),innerHTML:Se(u)},null,40,ia)]))),128))])):(l(),a("div",ra,[o[59]||(o[59]=e("div",{class:"flex-1 flex items-center justify-center border-2 border-dashed border-white/5 rounded-lg"},[e("p",{class:"text-zinc-600 text-xs italic"},"No content yet")],-1)),e("div",da,[e("button",{onClick:o[25]||(o[25]=u=>Xe("paragraph")),class:"flex-1 py-2 border border-dashed border-white/10 rounded text-zinc-600 text-xs hover:border-indigo-500/50 hover:text-indigo-400 transition-colors"}," + Paragraph "),e("button",{onClick:o[26]||(o[26]=u=>Xe("bullet")),class:"flex-1 py-2 border border-dashed border-white/10 rounded text-zinc-600 text-xs hover:border-indigo-500/50 hover:text-indigo-400 transition-colors"}," + Bullet ")])]))],64))],64))])])]),e("div",ca,[(l(!0),a(ee,null,oe(d.value,(u,g)=>(l(),a("button",{key:g,onClick:X=>f("update:activeIndex",g),class:ge(["w-1.5 h-1.5 rounded-full transition-all focus:outline-none",n.activeIndex===g?"bg-indigo-500 w-4":"bg-white/10 hover:bg-white/20"]),title:`Go to slide ${g+1}`},null,10,ua))),128))])],512))],2)]),h.value?(l(),a("div",{key:2,ref_key:"presentationContainer",ref:R,class:"fixed inset-0 z-[100] bg-zinc-950 flex flex-col animate-in fade-in duration-300"},[e("button",{onClick:lt,class:"absolute top-6 right-6 z-[110] p-2 bg-white/5 hover:bg-white/10 rounded-full text-zinc-400 hover:text-white transition-all"},[s(t(Qt),{class:"h-6 w-6"})]),e("div",fa,[e("button",{onClick:Je,disabled:n.activeIndex===0,class:"p-2 text-zinc-400 hover:text-white disabled:opacity-30 transition-all"},[s(t(mt),{class:"h-8 w-8"})],8,pa),e("div",ga,[o[61]||(o[61]=e("span",{class:"text-[10px] font-bold text-indigo-500 uppercase tracking-widest"},"Slide",-1)),e("span",va,B(n.activeIndex+1)+" / "+B(d.value.length),1)]),e("button",{onClick:at,disabled:n.activeIndex===d.value.length-1,class:"p-2 text-zinc-400 hover:text-white disabled:opacity-30 transition-all"},[s(t(Qe),{class:"h-8 w-8"})],8,ha)]),o[71]||(o[71]=e("div",{class:"absolute bottom-10 right-10 z-[110] hidden md:block"},[e("div",{class:"flex items-center gap-3 px-4 py-2 bg-indigo-500/10 border border-indigo-500/20 rounded-full backdrop-blur-md"},[e("div",{class:"h-2 w-2 rounded-full bg-indigo-500 animate-pulse"}),e("span",{class:"text-[10px] font-mono font-bold text-indigo-400 uppercase tracking-[0.2em]"},"Live Presentation")])],-1)),e("div",{class:"flex-1 flex items-center justify-center p-0",ref_key:"presentationSlideRef",ref:H},[(l(),a("div",{key:n.activeIndex,class:"w-full h-full bg-zinc-950 relative overflow-hidden flex flex-col p-12 lg:p-24 lg:px-32 slide-in-premium"},[o[69]||(o[69]=e("div",{class:"absolute inset-0 bg-[radial-gradient(circle_at_50%_50%,rgba(99,102,241,0.08),transparent_70%)] pointer-events-none"},null,-1)),o[70]||(o[70]=e("div",{class:"absolute inset-0 bg-gradient-to-br from-indigo-500/5 via-transparent to-purple-500/5 pointer-events-none"},null,-1)),e("div",xa,[e("div",ma,[e("div",{class:"slide-content w-full transition-transform duration-500 origin-center",style:re({transform:`scale(${pe.value})`})},[e("div",ba,[e("span",ya,B(v.project?.title||"DEFENSE PREPARATION"),1),(y.value.layout||"bullets")!=="title"?(l(),a("h1",wa,B(y.value.title),1)):Y("",!0)]),e("div",ka,[(y.value.layout||"bullets")==="title"?(l(),a("div",_a,[o[62]||(o[62]=e("div",{class:"h-1 w-24 bg-indigo-500 mb-12 shadow-[0_0_20px_rgba(99,102,241,0.6)]"},null,-1)),e("h1",Sa,B(y.value.title),1),y.value.bullets&&y.value.bullets[0]?(l(),a("p",{key:0,class:"text-2xl lg:text-4xl text-zinc-400 font-light tracking-widest uppercase",innerHTML:Se(y.value.bullets[0])},null,8,za)):Y("",!0),y.value.bullets&&y.value.bullets[1]?(l(),a("div",{key:1,class:"mt-12 text-sm lg:text-lg text-indigo-400/60 font-mono tracking-[0.4em] uppercase",innerHTML:Se(y.value.bullets[1])},null,8,Ca)):Y("",!0)])):(y.value.layout||"bullets")==="two_column"?(l(),a("div",$a,[e("div",Fa,[y.value.paragraphs&&y.value.paragraphs.length?(l(!0),a(ee,{key:0},oe(y.value.paragraphs,(u,g)=>(l(),a("p",{key:"p-"+g,class:"text-2xl lg:text-4xl text-zinc-100 font-medium leading-relaxed"},B(u),1))),128)):y.value.headings&&y.value.headings.length?(l(!0),a(ee,{key:1},oe(y.value.headings.slice(0,Math.ceil(y.value.headings.length/2)),(u,g)=>(l(),a("div",{key:"h-"+g,class:"space-y-4"},[e("h3",Ia,B(u.heading),1),e("p",Ta,B(u.content),1)]))),128)):y.value.bullets&&y.value.bullets.length?(l(),a("ul",Ea,[(l(!0),a(ee,null,oe(Ke(y.value.bullets||[])[0],(u,g)=>(l(),a("li",{key:g,class:"flex gap-10 items-start group"},[o[63]||(o[63]=e("div",{class:"mt-5 h-3.5 w-3.5 rounded-full bg-indigo-500 shadow-[0_0_20px_rgba(99,102,241,0.6)] group-hover:scale-125 transition-transform duration-300 shrink-0"},null,-1)),e("p",{class:"text-3xl lg:text-5xl text-zinc-100 font-medium leading-[1.15] tracking-tight",innerHTML:Se(u)},null,8,Aa)]))),128))])):Y("",!0)]),e("div",ja,[y.value.headings&&y.value.headings.length>1?(l(!0),a(ee,{key:0},oe(y.value.headings.slice(Math.ceil(y.value.headings.length/2)),(u,g)=>(l(),a("div",{key:"hr-"+g,class:"space-y-4"},[e("h3",Ba,B(u.heading),1),e("p",Da,B(u.content),1)]))),128)):y.value.bullets&&y.value.bullets.length>1?(l(),a("ul",Pa,[(l(!0),a(ee,null,oe(Ke(y.value.bullets||[])[1],(u,g)=>(l(),a("li",{key:g,class:"flex gap-10 items-start group"},[o[64]||(o[64]=e("div",{class:"mt-5 h-3.5 w-3.5 rounded-full bg-indigo-500 shadow-[0_0_20px_rgba(99,102,241,0.6)] group-hover:scale-125 transition-transform duration-300 shrink-0"},null,-1)),e("p",{class:"text-3xl lg:text-5xl text-zinc-100 font-medium leading-[1.15] tracking-tight",innerHTML:Se(u)},null,8,Ma)]))),128))])):Y("",!0)])])):(y.value.layout||"bullets")==="image_left"||(y.value.layout||"bullets")==="image_right"?(l(),a("div",La,[e("div",{class:ge(["w-full lg:w-1/2 min-h-[400px] lg:min-h-0 rounded-3xl border border-white/10 bg-white/5 flex items-center justify-center relative overflow-hidden shadow-2xl",(y.value.layout||"bullets")==="image_left"?"lg:order-1":"lg:order-2"])},[y.value.image_url?(l(),a("img",{key:0,src:y.value.image_url,alt:"Slide visual",class:"h-full w-full object-contain",style:re({objectPosition:`${y.value.image_position_x??50}% ${y.value.image_position_y??50}%`,transform:`scale(${y.value.image_scale||1})`})},null,12,Oa)):(l(),a("span",Wa,"No Visual Content"))],2),e("div",{class:ge(["flex-1",(y.value.layout||"bullets")==="image_left"?"lg:order-2":"lg:order-1"])},[y.value.paragraphs&&y.value.paragraphs.length?(l(),a("div",Ra,[(l(!0),a(ee,null,oe(y.value.paragraphs,(u,g)=>(l(),a("p",{key:"p-"+g,class:"text-2xl lg:text-4xl text-zinc-100 font-medium leading-relaxed"},B(u),1))),128))])):y.value.headings&&y.value.headings.length?(l(),a("div",Ha,[(l(!0),a(ee,null,oe(y.value.headings,(u,g)=>(l(),a("div",{key:"h-"+g,class:"space-y-4"},[e("h3",Na,B(u.heading),1),e("p",Ua,B(u.content),1)]))),128))])):y.value.bullets&&y.value.bullets.length?(l(),a("ul",Ga,[(l(!0),a(ee,null,oe(y.value.bullets,(u,g)=>(l(),a("li",{key:g,class:"flex gap-10 items-start"},[o[65]||(o[65]=e("div",{class:"mt-5 h-3.5 w-3.5 rounded-full bg-indigo-500 shadow-[0_0_20px_rgba(99,102,241,0.6)] shrink-0"},null,-1)),e("p",{class:"text-3xl lg:text-5xl text-zinc-100 font-medium leading-[1.15] tracking-tight",innerHTML:Se(u)},null,8,Xa)]))),128))])):Y("",!0)],2)])):(l(),a("div",Va,[y.value.content_type==="paragraphs"?(l(),a(ee,{key:0},[y.value.paragraphs&&y.value.paragraphs.length?(l(),a("div",Ya,[(l(!0),a(ee,null,oe(y.value.paragraphs,(u,g)=>(l(),a("p",{key:g,class:"text-3xl lg:text-5xl text-zinc-100 font-medium leading-[1.15] tracking-tight"},B(u),1))),128))])):y.value.headings&&y.value.headings.length?(l(),a("div",qa,[(l(!0),a(ee,null,oe(y.value.headings,(u,g)=>(l(),a("div",{key:g,class:"space-y-4"},[e("h3",Ka,B(u.heading),1),e("p",Ja,B(u.content),1)]))),128))])):Y("",!0)],64)):y.value.content_type==="mixed"?(l(),a("div",Qa,[y.value.paragraphs&&y.value.paragraphs.length?(l(),a("div",Za,[(l(!0),a(ee,null,oe(y.value.paragraphs,(u,g)=>(l(),a("p",{key:"p-"+g,class:"text-2xl lg:text-4xl text-zinc-100 leading-relaxed"},B(u),1))),128))])):Y("",!0),y.value.headings&&y.value.headings.length?(l(),a("div",ei,[(l(!0),a(ee,null,oe(y.value.headings,(u,g)=>(l(),a("div",{key:"h-"+g,class:"space-y-3"},[e("h3",ti,B(u.heading),1),e("p",ni,B(u.content),1)]))),128))])):Y("",!0),y.value.bullets&&y.value.bullets.length?(l(),a("ul",li,[(l(!0),a(ee,null,oe(y.value.bullets,(u,g)=>(l(),a("li",{key:"b-"+g,class:"flex gap-10 items-start"},[o[66]||(o[66]=e("div",{class:"mt-4 h-3 w-3 rounded-full bg-indigo-500 shadow-[0_0_20px_rgba(99,102,241,0.6)] shrink-0"},null,-1)),e("p",{class:"text-3xl lg:text-5xl text-zinc-100 font-medium leading-[1.15] tracking-tight",innerHTML:Se(u)},null,8,si)]))),128))])):Y("",!0)])):(l(),a(ee,{key:2},[y.value.bullets&&y.value.bullets.length?(l(),a("ul",oi,[(l(!0),a(ee,null,oe(y.value.bullets,(u,g)=>(l(),a("li",{key:g,class:"flex gap-10 items-start"},[o[67]||(o[67]=e("div",{class:"mt-5 h-3.5 w-3.5 rounded-full bg-indigo-500 shadow-[0_0_20px_rgba(99,102,241,0.6)] shrink-0"},null,-1)),e("p",{class:"text-3xl lg:text-5xl text-zinc-100 font-medium leading-[1.15] tracking-tight",innerHTML:Se(u)},null,8,ai)]))),128))])):Y("",!0)],64))]))])],4)]),e("div",ii,[o[68]||(o[68]=e("div",{class:"text-2xl lg:text-3xl font-bold tracking-tighter text-white"},[se(" FINALYZE"),e("span",{class:"text-indigo-500"},".")],-1)),e("div",ri,[e("div",di,B(v.project?.title||"DEFENSE PREPARATION"),1),e("div",ci," Slide "+B(n.activeIndex+1),1)])])])]))],512)],512)):Y("",!0)])):(l(),a("div",ui,[e("div",fi,[s(t(cn),{class:"h-10 w-10 text-indigo-500/50"})]),o[72]||(o[72]=e("div",{class:"space-y-2 px-6"},[e("h3",{class:"text-xl font-bold text-white"},"No Slides Found"),e("p",{class:"text-sm text-zinc-500 max-w-xs mx-auto"}," Generate your defense deck to start building the perfect presentation. ")],-1))])),s(t(ns),{open:$.value,"onUpdate:open":o[28]||(o[28]=u=>{$.value=u})},{default:C(()=>[s(t(ql),null,{default:C(()=>[s(t(Kl),null,{default:C(()=>[s(t(Jl),null,{default:C(()=>[...o[73]||(o[73]=[se("Delete slide?",-1)])]),_:1}),s(t(Ql),null,{default:C(()=>[...o[74]||(o[74]=[se(" This will permanently remove the slide from your deck. ",-1)])]),_:1})]),_:1}),s(t(Zl),null,{default:C(()=>[s(t(es),{onClick:o[27]||(o[27]=u=>{$.value=!1,j.value=null})},{default:C(()=>[...o[75]||(o[75]=[se("Cancel ",-1)])]),_:1}),s(t(ts),{class:"bg-rose-500 text-white hover:bg-rose-600",onClick:V},{default:C(()=>[...o[76]||(o[76]=[se(" Delete ",-1)])]),_:1})]),_:1})]),_:1})]),_:1},8,["open"])],64))}}),gi=ut(pi,[["__scopeId","data-v-9b401f55"]]),An=16/9,Bt=960,Dt=540;function vi(L,x={}){const n=ol(null),f=E({zoom:1,panX:0,panY:0,gridEnabled:x.showGrid??!1,snapEnabled:x.snapToGrid??!1,gridSize:x.gridSize??20}),d=E([]),h=E(!1),b=E(!1),w=E(!1),k=E(!1),$=[];function j(A=x.width??Bt,q=x.height??Dt){if(L.value)return n.value&&n.value.dispose(),n.value=new al(L.value,{width:A,height:q,backgroundColor:x.backgroundColor??"#FFFFFF",selection:!0,preserveObjectStacking:!0,renderOnAddRemove:!0,stopContextMenu:!0,fireRightClick:!0,enableRetinaScaling:!0}),n.value.selection=!0,n.value.skipTargetFind=!1,n.value.selectionColor="rgba(99, 102, 241, 0.1)",n.value.selectionBorderColor="#6366F1",n.value.selectionLineWidth=1,pt.prototype.objectCaching=!0,pt.ownDefaults.borderColor="#6366F1",pt.ownDefaults.cornerColor="#6366F1",pt.ownDefaults.cornerStrokeColor="#FFFFFF",pt.ownDefaults.cornerStyle="circle",pt.ownDefaults.cornerSize=10,pt.ownDefaults.transparentCorners=!1,pt.ownDefaults.borderScaleFactor=1.5,pt.ownDefaults.padding=4,z(),f.value.gridEnabled&&_e(),n.value}function z(){n.value&&(n.value.on("selection:created",r),n.value.on("selection:updated",F),n.value.on("selection:cleared",O),n.value.on("object:modified",T),n.value.on("object:moving",M),n.value.on("object:scaling",R),n.value.on("object:rotating",H),n.value.on("mouse:down",I),n.value.on("mouse:move",c),n.value.on("mouse:up",_),n.value.on("mouse:wheel",N),n.value.on("mouse:dblclick",G))}function r(A){A.selected&&(d.value=A.selected,h.value=!0),V("selection:created",{selected:A.selected||[]})}function F(A){A.selected&&(d.value=A.selected),V("selection:updated",{selected:A.selected||[],deselected:A.deselected||[]})}function O(A){d.value=[],h.value=!1,V("selection:cleared",{deselected:A.deselected||[]})}function T(A){const q=A.target;q&&(f.value.snapEnabled&&q.left!==void 0&&q.top!==void 0&&(q.set({left:We(q.left),top:We(q.top)}),q.setCoords(),n.value?.renderAll()),b.value=!1,w.value=!1,k.value=!1,V("object:modified",{target:q,transform:A.transform}))}function M(A){b.value=!0;const q=A.target;q&&(W(q),V("object:moving",{target:q}))}function R(A){w.value=!0,V("object:scaling",{target:A.target})}function H(A){k.value=!0,V("object:rotating",{target:A.target})}function I(A){const q=n.value?.getScenePoint(A.e);V("mouse:down",{x:q?.x??0,y:q?.y??0,button:A.e.button??0,shiftKey:A.e.shiftKey??!1,ctrlKey:A.e.ctrlKey??!1,altKey:A.e.altKey??!1,target:A.target})}function c(A){const q=n.value?.getScenePoint(A.e);V("mouse:move",{x:q?.x??0,y:q?.y??0,button:A.e.button??0,shiftKey:A.e.shiftKey??!1,ctrlKey:A.e.ctrlKey??!1,altKey:A.e.altKey??!1,target:A.target})}function _(A){const q=n.value?.getScenePoint(A.e);V("mouse:up",{x:q?.x??0,y:q?.y??0,button:A.e.button??0,shiftKey:A.e.shiftKey??!1,ctrlKey:A.e.ctrlKey??!1,altKey:A.e.altKey??!1,target:A.target})}function N(A){if(A.e.ctrlKey){A.e.preventDefault();const q=A.e.deltaY>0?-.1:.1;ke(q,A.e.offsetX,A.e.offsetY)}V("mouse:wheel",{deltaY:A.e.deltaY,ctrlKey:A.e.ctrlKey})}function G(A){V("mouse:dblclick",{target:A.target})}const J=new Map;function V(A,q){const ce=J.get(A);ce&&ce.forEach(xe=>xe(q))}function we(A,q){return J.has(A)||J.set(A,new Set),J.get(A).add(q),()=>$e(A,q)}function $e(A,q){J.get(A)?.delete(q)}function _e(){if(!n.value)return;je();const{gridSize:A}=f.value,q=n.value.width||Bt,ce=n.value.height||Dt;for(let xe=0;xe<=q/A;xe++){const be=new zt([xe*A,0,xe*A,ce],{stroke:"#E5E7EB",strokeWidth:1,selectable:!1,evented:!1,excludeFromExport:!0});$.push(be),n.value.add(be)}for(let xe=0;xe<=ce/A;xe++){const be=new zt([0,xe*A,q,xe*A],{stroke:"#E5E7EB",strokeWidth:1,selectable:!1,evented:!1,excludeFromExport:!0});$.push(be),n.value.add(be)}$.forEach(xe=>n.value?.sendObjectToBack(xe)),n.value.renderAll()}function je(){n.value&&($.forEach(A=>n.value?.remove(A)),$.length=0)}function Ae(){f.value.gridEnabled=!f.value.gridEnabled,f.value.gridEnabled?_e():je()}function Oe(){f.value.snapEnabled=!f.value.snapEnabled}function We(A){const{gridSize:q}=f.value;return Math.round(A/q)*q}function ye(A,q,ce){if(!n.value)return;const xe=Math.max(.1,Math.min(3,A));f.value.zoom=xe;const be=q!==void 0&&ce!==void 0?new zn(q,ce):new zn(n.value.width/2,n.value.height/2);n.value.zoomToPoint(be,xe),n.value.renderAll()}function ke(A,q,ce){const xe=f.value.zoom+A;ye(xe,q,ce)}function Z(){ke(.1)}function K(){ke(-.1)}function p(){ye(1),U()}function m(A,q){if(!n.value)return;f.value.panX=A,f.value.panY=q;const ce=n.value.viewportTransform;ce&&(ce[4]=A,ce[5]=q,n.value.setViewportTransform(ce),n.value.renderAll())}function U(){m(0,0)}function W(A){if(!n.value||A.left===void 0||A.top===void 0)return;const q=n.value.width||Bt,ce=n.value.height||Dt,xe=A.scaleX??1,be=A.scaleY??1,He=(A.width??0)*xe,Ne=(A.height??0)*be;let Ue=!1,qe=A.left,nt=A.top;const Ge=20;qe+He<Ge?(qe=Ge-He,Ue=!0):qe>q-Ge&&(qe=q-Ge,Ue=!0),nt+Ne<Ge?(nt=Ge-Ne,Ue=!0):nt>ce-Ge&&(nt=ce-Ge,Ue=!0),Ue&&A.set({left:qe,top:nt})}function te(A,q){n.value&&(n.value.setDimensions({width:A,height:q}),f.value.gridEnabled&&_e(),n.value.renderAll())}function P(A){if(!n.value)return;const q=A.clientWidth,ce=A.clientHeight;let xe=q,be=xe/An;return be>ce&&(be=ce,xe=be*An),te(xe,be),{width:xe,height:be}}function ne(A){n.value&&(n.value.backgroundColor=A,n.value.renderAll())}async function de(A,q={}){if(n.value)try{const ce=await fn.fromURL(A,{crossOrigin:"anonymous"});if(!n.value||!ce)return;const xe=n.value.width||Bt,be=n.value.height||Dt;ce.set({originX:"left",originY:"top",scaleX:xe/(ce.width||1),scaleY:be/(ce.height||1),...q}),n.value.backgroundImage=ce,n.value.renderAll()}catch(ce){console.error("Failed to load background image:",ce)}}function fe(){n.value&&(n.value.backgroundImage=void 0,n.value.renderAll())}function Fe(){if(!n.value)return;const A=n.value.getObjects().filter(ce=>ce.selectable);if(A.length===0)return;n.value.discardActiveObject();const q=new Lt(A,{canvas:n.value});n.value.setActiveObject(q),n.value.renderAll()}function Ie(){n.value&&(n.value.discardActiveObject(),n.value.renderAll())}function ie(A){n.value&&(n.value.setActiveObject(A),n.value.renderAll())}function Te(A){if(!n.value)return;const q=n.value.getObjects().find(ce=>ce.elementId===A);q&&ie(q)}function Ee(){return n.value?.toObject(["elementId","elementType","locked"])}function et(A="png",q=1){return n.value?.toDataURL({multiplier:1,format:A,quality:q})}function tt(){return n.value?.toSVG()}function bt(){n.value?.renderAll()}function he(){n.value?.requestRenderAll()}function Re(){n.value&&(n.value.dispose(),n.value=null),J.clear(),$.length=0}const De=le(()=>d.value.length>0),Se=le(()=>d.value.length>1),Ke=le(()=>n.value?.width??Bt),Ye=le(()=>n.value?.height??Dt);return{canvas:n,state:f,selectedObjects:d,isSelecting:h,isDragging:b,isResizing:w,isRotating:k,hasSelection:De,multipleSelected:Se,canvasWidth:Ke,canvasHeight:Ye,initCanvas:j,dispose:Re,toggleGrid:Ae,toggleSnapToGrid:Oe,drawGrid:_e,clearGrid:je,setZoom:ye,zoomBy:ke,zoomIn:Z,zoomOut:K,resetZoom:p,setPan:m,resetPan:U,resizeCanvas:te,fitToContainer:P,setBackgroundColor:ne,setBackgroundImage:de,clearBackgroundImage:fe,selectAll:Fe,deselectAll:Ie,selectObject:ie,selectObjectById:Te,on:we,off:$e,toJSON:Ee,toDataURL:et,toSVG:tt,render:bt,requestRender:he}}const jn={content:"Text",fontFamily:"Arial",fontSize:18,fontWeight:"normal",fontStyle:"normal",textAlign:"left",color:"#111827",lineHeight:1.4,letterSpacing:0},hi={shapeType:"rectangle",cornerRadius:0};function xi(L){const{canvasInstance:x,slide:n,onElementsChange:f}=L,d=new Map;function h(){return n.value?n.value.elements.reduce((m,U)=>Math.max(m,U.zIndex),0)+1:1}function b(p,m){return p/100*m}function w(p,m){return p/m*100}function k(p){const m=x.canvas.value;if(!m)return null;const U=m.width||960,W=m.height||540,te=b(p.x,U),P=b(p.y,W),ne=b(p.width,U),de=b(p.height,W);let fe=null;switch(p.type){case"text":fe=$(p,te,P,ne);break;case"shape":fe=j(p,te,P,ne,de);break;case"image":return z(p,te,P,ne,de),null;case"chart":return r(p,te,P,ne,de),null;case"table":fe=O(p,te,P,ne,de);break;default:return console.warn(`Unknown element type: ${p.type}`),null}return fe&&(T(fe,p),fe.elementId=p.id,fe.elementType=p.type),fe}function $(p,m,U,W,te){const P=p.text||jn;return new Gt(P.content,{left:m,top:U,width:W,fontSize:P.fontSize,fontFamily:P.fontFamily,fontWeight:P.fontWeight==="bold"?"bold":"normal",fontStyle:P.fontStyle==="italic"?"italic":"normal",fill:P.color,textAlign:P.textAlign,lineHeight:P.lineHeight,charSpacing:P.letterSpacing*10,underline:P.textDecoration==="underline",linethrough:P.textDecoration==="line-through",editable:!0,splitByGrapheme:!1})}function j(p,m,U,W,te){const P=p.shape||hi;let ne;switch(P.shapeType){case"circle":ne=new Cn({left:m,top:U,rx:W/2,ry:te/2,fill:p.fill||"#E5E7EB",stroke:p.stroke||"#9CA3AF",strokeWidth:p.strokeWidth||1});break;case"triangle":ne=new tn({left:m,top:U,width:W,height:te,fill:p.fill||"#E5E7EB",stroke:p.stroke||"#9CA3AF",strokeWidth:p.strokeWidth||1});break;case"line":ne=new zt([m,U,m+W,U+te],{stroke:p.stroke||"#9CA3AF",strokeWidth:p.strokeWidth||2,fill:""});break;case"arrow":const de=new zt([0,te/2,W-15,te/2],{stroke:p.stroke||"#9CA3AF",strokeWidth:p.strokeWidth||2}),fe=new tn({left:W-15,top:te/2-8,width:15,height:16,fill:p.stroke||"#9CA3AF",angle:90});ne=new Fn([de,fe],{left:m,top:U});break;case"rounded-rectangle":ne=new It({left:m,top:U,width:W,height:te,fill:p.fill||"#E5E7EB",stroke:p.stroke||"#9CA3AF",strokeWidth:p.strokeWidth||1,rx:P.cornerRadius||10,ry:P.cornerRadius||10});break;case"rectangle":default:ne=new It({left:m,top:U,width:W,height:te,fill:p.fill||"#E5E7EB",stroke:p.stroke||"#9CA3AF",strokeWidth:p.strokeWidth||1});break}return ne}async function z(p,m,U,W,te){const P=p.image;if(P?.url)try{const ne=await fn.fromURL(P.url,{crossOrigin:"anonymous"}),de=x.canvas.value;if(!de||!ne)return;const fe=ne.width||1,Fe=ne.height||1;let Ie=W/fe,ie=te/Fe;if(P.fit==="contain"){const Te=Math.min(Ie,ie);Ie=Te,ie=Te}else if(P.fit==="cover"){const Te=Math.max(Ie,ie);Ie=Te,ie=Te}ne.set({left:m,top:U,scaleX:Ie,scaleY:ie,angle:p.rotation||0,opacity:p.opacity??1}),T(ne,p),ne.elementId=p.id,ne.elementType=p.type,de.add(ne),d.set(p.id,ne),de.renderAll()}catch(ne){console.error("Failed to load image:",ne)}}async function r(p,m,U,W,te){const P=p.chart;if(!P)return;const ne=document.createElement("canvas");ne.width=W*2,ne.height=te*2;const de=ne.getContext("2d");if(de)try{const{default:fe}=await il(async()=>{const{default:Ee}=await import("./vendor-CugNIqr3.js").then(et=>et.iw);return{default:Ee}},__vite__mapDeps([0,1])),Fe=new fe(de,{type:P.chartType,data:{labels:P.labels,datasets:P.datasets.map(Ee=>({label:Ee.label,data:Ee.data,backgroundColor:Ee.backgroundColor||F(Ee.data.length),borderColor:Ee.borderColor||"#4F46E5",borderWidth:Ee.borderWidth||1}))},options:{responsive:!1,maintainAspectRatio:!1,animation:!1,plugins:{legend:{display:P.showLegend??!0,position:"bottom"},title:{display:!!P.title,text:P.title||"",font:{size:14,weight:"bold"}}},scales:["bar","line","scatter","area"].includes(P.chartType)?{x:{grid:{display:P.showGrid??!0}},y:{grid:{display:P.showGrid??!0}}}:void 0}});await new Promise(Ee=>setTimeout(Ee,100));const Ie=ne.toDataURL("image/png");Fe.destroy();const ie=await fn.fromURL(Ie),Te=x.canvas.value;if(!Te||!ie)return;ie.set({left:m,top:U,scaleX:W/(ie.width||1),scaleY:te/(ie.height||1),angle:p.rotation||0,opacity:p.opacity??1}),T(ie,p),ie.elementId=p.id,ie.elementType=p.type,Te.add(ie),d.set(p.id,ie),Te.renderAll()}catch(fe){console.error("Failed to create chart:",fe)}}function F(p){const m=["#6366F1","#8B5CF6","#EC4899","#F43F5E","#F97316","#EAB308","#22C55E","#14B8A6","#06B6D4","#3B82F6"];return Array.from({length:p},(U,W)=>m[W%m.length])}function O(p,m,U,W,te){const P=p.table,ne=P?.columns||[],de=P?.rows||[],fe=[],Fe=8,Ie=32,ie=28,Te=W/Math.max(ne.length,1),Ee=new It({left:0,top:0,width:W,height:te,fill:"#FFFFFF",stroke:"#E5E7EB",strokeWidth:1});fe.push(Ee);const et=new It({left:0,top:0,width:W,height:Ie,fill:P?.headerBackground||"#F3F4F6"});fe.push(et),ne.forEach((he,Re)=>{const De=new $n(he.label,{left:Re*Te+Fe,top:Fe,fontSize:12,fontWeight:"bold",fontFamily:"Arial",fill:P?.headerColor||"#111827"});if(fe.push(De),Re>0){const Se=new zt([Re*Te,0,Re*Te,te],{stroke:"#E5E7EB",strokeWidth:1});fe.push(Se)}});const tt=new zt([0,Ie,W,Ie],{stroke:"#D1D5DB",strokeWidth:1});return fe.push(tt),de.forEach((he,Re)=>{const De=Ie+Re*ie;if(P?.alternateRowColors&&Re%2===1){const Ke=new It({left:0,top:De,width:W,height:ie,fill:"#F9FAFB"});fe.push(Ke)}const Se=new zt([0,De+ie,W,De+ie],{stroke:"#E5E7EB",strokeWidth:1});fe.push(Se),ne.forEach((Ke,Ye)=>{const A=String(he[Ke.key]??""),q=new $n(A,{left:Ye*Te+Fe,top:De+Fe,fontSize:11,fontFamily:"Arial",fill:"#374151"});fe.push(q)})}),new Fn(fe,{left:m,top:U})}function T(p,m){p.set({angle:m.rotation||0,opacity:m.opacity??1,selectable:!m.locked,evented:!m.locked,visible:!m.hidden}),m.shadow&&p.set("shadow",new rl({color:m.shadow.color,blur:m.shadow.blur,offsetX:m.shadow.offsetX,offsetY:m.shadow.offsetY}))}function M(p){if(!n.value)throw new Error("No active slide");p.id||(p.id=Me()),n.value.elements.push(p);const m=k(p);if(m){const U=x.canvas.value;U&&(U.add(m),d.set(p.id,m),U.setActiveObject(m),U.renderAll())}return f?.(n.value.elements),p}function R(p={}){const m={id:Me(),type:"text",x:p.x??10,y:p.y??10,width:p.width??40,height:p.height??10,rotation:0,zIndex:h(),text:{...jn,...p.text},...p};return M(m)}function H(p="rectangle",m={}){const U={id:Me(),type:"shape",x:m.x??20,y:m.y??20,width:m.width??20,height:m.height??15,rotation:0,zIndex:h(),fill:m.fill??"#E5E7EB",stroke:m.stroke??"#9CA3AF",strokeWidth:m.strokeWidth??1,shape:{shapeType:p,cornerRadius:p==="rounded-rectangle"?10:0,...m.shape},...m};return M(U)}function I(p,m={}){const U={id:Me(),type:"image",x:m.x??25,y:m.y??20,width:m.width??30,height:m.height??30,rotation:0,zIndex:h(),image:{url:p,fit:"contain",...m.image},...m};return M(U)}function c(p={}){const m={id:Me(),type:"chart",x:p.x??15,y:p.y??25,width:p.width??50,height:p.height??40,rotation:0,zIndex:h(),chart:{chartType:"bar",title:"Chart Title",labels:["Category A","Category B","Category C","Category D"],datasets:[{label:"Series 1",data:[65,59,80,81]}],showLegend:!0,showGrid:!0,...p.chart},...p};return M(m)}function _(p={}){const m={id:Me(),type:"table",x:p.x??10,y:p.y??30,width:p.width??60,height:p.height??35,rotation:0,zIndex:h(),table:{title:"Table",columns:[{key:"col1",label:"Column 1"},{key:"col2",label:"Column 2"},{key:"col3",label:"Column 3"}],rows:[{col1:"Row 1",col2:"Data",col3:"Value"},{col1:"Row 2",col2:"Data",col3:"Value"},{col1:"Row 3",col2:"Data",col3:"Value"}],headerBackground:"#F3F4F6",headerColor:"#111827",alternateRowColors:!0,...p.table},...p};return M(m)}function N(p,m){if(!n.value)return;const U=n.value.elements.findIndex(P=>P.id===p);if(U===-1)return;const W=n.value.elements[U];Object.assign(W,m);const te=d.get(p);te&&G(te,W),f?.(n.value.elements)}function G(p,m){const U=x.canvas.value;if(!U)return;const W=U.width||960,te=U.height||540,P=b(m.x,W),ne=b(m.y,te),de=b(m.width,W),fe=b(m.height,te);p.set({left:P,top:ne,angle:m.rotation||0,opacity:m.opacity??1,selectable:!m.locked,evented:!m.locked,visible:!m.hidden}),m.type==="text"&&m.text&&p instanceof Gt&&(p.set({width:de,text:m.text.content,fontSize:m.text.fontSize,fontFamily:m.text.fontFamily,fontWeight:m.text.fontWeight==="bold"?"bold":"normal",fontStyle:m.text.fontStyle==="italic"?"italic":"normal",fill:m.text.color,textAlign:m.text.textAlign,lineHeight:m.text.lineHeight,charSpacing:(m.text.letterSpacing||0)*10,underline:m.text.textDecoration==="underline",linethrough:m.text.textDecoration==="line-through"}),p.initDimensions()),m.type==="shape"&&(p.set({fill:m.fill,stroke:m.stroke,strokeWidth:m.strokeWidth}),(p instanceof It||p instanceof tn)&&p.set({width:de,height:fe}),p instanceof Cn&&p.set({rx:de/2,ry:fe/2})),p.setCoords(),U.renderAll()}function J(p){if(!n.value)return;const m=n.value.elements.findIndex(W=>W.id===p);if(m===-1)return;n.value.elements.splice(m,1);const U=d.get(p);if(U){const W=x.canvas.value;W&&(W.remove(U),W.renderAll()),d.delete(p)}f?.(n.value.elements)}function V(){const p=x.canvas.value;if(!p)return;const m=p.getActiveObject();if(m)if(m instanceof Lt)m.getObjects().forEach(W=>{const te=W.elementId;te&&J(te)}),p.discardActiveObject();else{const U=m.elementId;U&&J(U)}}function we(p){if(!n.value)return null;const m=n.value.elements.find(W=>W.id===p);if(!m)return null;const U={...JSON.parse(JSON.stringify(m)),id:Me(),x:m.x+2,y:m.y+2,zIndex:h()};return M(U)}function $e(){const p=x.canvas.value;if(!p)return[];const m=p.getActiveObject();if(!m)return[];const U=[];if(m instanceof Lt)m.getObjects().forEach(te=>{const P=te.elementId;if(P){const ne=we(P);ne&&U.push(ne)}});else{const W=m.elementId;if(W){const te=we(W);te&&U.push(te)}}return U}function _e(p){return n.value?.elements.find(m=>m.id===p)}function je(p){return d.get(p)}function Ae(p){if(!n.value)return;const m=_e(p);if(!m)return;const U=h();m.zIndex=U;const W=d.get(p);W&&(x.canvas.value?.bringObjectToFront(W),x.render()),f?.(n.value.elements)}function Oe(p){if(!n.value)return;const m=_e(p);if(!m)return;const U=Math.min(...n.value.elements.map(te=>te.zIndex));m.zIndex=U-1;const W=d.get(p);W&&(x.canvas.value?.sendObjectToBack(W),x.render()),f?.(n.value.elements)}function We(p){const m=d.get(p);m&&(x.canvas.value?.bringObjectForward(m),x.render())}function ye(p){const m=d.get(p);m&&(x.canvas.value?.sendObjectBackwards(m),x.render())}function ke(p){if(!n.value)return;const m=d.get(p);if(!m)return;const U=x.canvas.value;if(!U)return;const W=_e(p);if(!W)return;const te=U.width||960,P=U.height||540,ne=m.left??0,de=m.top??0,fe=m.scaleX??1,Fe=m.scaleY??1,Ie=(m.width??0)*fe,ie=(m.height??0)*Fe;W.x=w(ne,te),W.y=w(de,P),W.width=w(Ie,te),W.height=w(ie,P),W.rotation=m.angle||0,W.type==="text"&&m instanceof Gt&&W.text&&(W.text.content=m.text||""),f?.(n.value.elements)}function Z(){const p=x.canvas.value;if(!p||!n.value)return;p.getObjects().filter(W=>W.elementId!==void 0).forEach(W=>p.remove(W)),d.clear(),[...n.value.elements].sort((W,te)=>W.zIndex-te.zIndex).forEach(W=>{const te=k(W);te&&(te.set({selectable:W.locked!==!0,evented:W.locked!==!0,hasControls:!0,hasBorders:!0}),p.add(te),d.set(W.id,te))}),p.selection=!0,p.skipTargetFind=!1,p.forEachObject(W=>{W.set({selectable:!0,evented:!0})}),p.renderAll()}function K(){if(!n.value)return;n.value.elements=[];const p=x.canvas.value;p&&(p.getObjects().filter(U=>U.elementId!==void 0).forEach(U=>p.remove(U)),p.renderAll()),d.clear(),f?.(n.value.elements)}return{addElement:M,addText:R,addShape:H,addImage:I,addChart:c,addTable:_,updateElement:N,removeElement:J,removeSelected:V,duplicateElement:we,duplicateSelected:$e,getElementById:_e,getFabricObject:je,getNextZIndex:h,bringToFront:Ae,sendToBack:Oe,bringForward:We,sendBackward:ye,syncFromFabricObject:ke,loadElements:Z,clearElements:K,percentToPixels:b,pixelsToPercent:w}}const mi={class:"canvas-wrapper relative shadow-2xl rounded-sm"},bi=["width","height"],yi={key:0,class:"absolute bottom-4 right-4 px-3 py-1.5 bg-zinc-900/80 text-white text-sm font-medium rounded-lg"},wi={key:1,class:"absolute inset-0 flex items-center justify-center bg-zinc-100 dark:bg-zinc-900"},ki=Ve({__name:"EditorCanvas",props:{slide:{},width:{default:960},height:{default:540},showGrid:{type:Boolean,default:!1},snapToGrid:{type:Boolean,default:!1},gridSize:{default:20},readonly:{type:Boolean,default:!1}},emits:["element:modified","element:selected","element:deselected","elements:change","canvas:ready","canvas:contextmenu"],setup(L,{expose:x,emit:n}){const f=L,d=n,h=E(null),b=E(null),w=le(()=>f.slide),k=vi(h,{width:f.width,height:f.height,backgroundColor:f.slide?.backgroundColor||"#FFFFFF",showGrid:f.showGrid,snapToGrid:f.snapToGrid,gridSize:f.gridSize}),$=xi({canvasInstance:k,slide:w,onElementsChange:R=>{d("elements:change",R)}});let j=null,z={width:0,height:0},r=null;St(async()=>{await ot(),h.value&&(k.initCanvas(f.width,f.height),F(),f.slide&&k.setBackgroundColor(f.slide.backgroundColor||"#FFFFFF"),O(),$.loadElements(),b.value&&(j=new ResizeObserver(()=>{r&&clearTimeout(r),r=setTimeout(()=>{O()},100)}),j.observe(b.value)),d("canvas:ready",k))}),Ot(()=>{r&&clearTimeout(r),j&&b.value&&(j.unobserve(b.value),j.disconnect()),k.dispose()}),Le(()=>f.slide,(R,H)=>{k.canvas.value&&(R?.id!==H?.id&&$.loadElements(),R&&k.setBackgroundColor(R.backgroundColor||"#FFFFFF"))},{deep:!0}),Le(()=>f.showGrid,R=>{R?k.drawGrid():k.clearGrid()}),Le(()=>f.snapToGrid,R=>{k.state.value.snapEnabled=R});function F(){k.on("selection:created",R=>{const H=R.selected.map(I=>I.elementId).filter(Boolean);d("element:selected",H)}),k.on("selection:updated",R=>{const H=R.selected.map(I=>I.elementId).filter(Boolean);d("element:selected",H)}),k.on("selection:cleared",()=>{d("element:deselected")}),k.on("object:modified",R=>{const H=R.target.elementId;if(H){$.syncFromFabricObject(H);const I=$.getElementById(H);I&&d("element:modified",I)}}),k.on("mouse:down",R=>{if(R.button===2){const H=R.target?R.target.elementId:void 0;d("canvas:contextmenu",{x:R.x,y:R.y,elementId:H})}}),k.on("mouse:dblclick",R=>{const H=R.target;H&&H.elementType==="text"&&H instanceof Gt&&(H.enterEditing(),H.selectAll())}),k.on("text:changed",R=>{const H=R.target?.elementId;H&&$.syncFromFabricObject(H)}),k.on("text:editing:exited",R=>{const H=R.target?.elementId;H&&$.syncFromFabricObject(H)})}function O(){if(b.value){const R=k.fitToContainer(b.value);R&&(R.width!==z.width||R.height!==z.height)&&(z=R,$.loadElements())}}function T(){return k}function M(){return $}return x({canvasInstance:k,elementsInstance:$,getCanvas:T,getElements:M,fitToContainer:O}),(R,H)=>(l(),a("div",{ref_key:"containerRef",ref:b,class:ge(["editor-canvas-container relative flex items-center justify-center bg-zinc-200 dark:bg-zinc-800 overflow-hidden w-full h-full",{"cursor-not-allowed opacity-75":R.readonly}])},[e("div",mi,[e("canvas",{ref_key:"canvasRef",ref:h,width:R.width,height:R.height},null,8,bi)]),t(k).state.value.zoom!==1?(l(),a("div",yi,B(Math.round(t(k).state.value.zoom*100))+"% ",1)):Y("",!0),R.slide?Y("",!0):(l(),a("div",wi,[...H[0]||(H[0]=[e("p",{class:"text-zinc-500 dark:text-zinc-400"},"No slide selected",-1)])]))],2))}}),_i=ut(ki,[["__scopeId","data-v-e0a63787"]]),Si={class:"grid grid-cols-3 gap-2"},zi=["title","onClick"],Ci={class:"w-8 h-8 text-muted-foreground",viewBox:"0 0 32 32",fill:"none",stroke:"currentColor","stroke-width":"2"},$i={key:0,x:"4",y:"8",width:"24",height:"16",rx:"0",fill:"currentColor","fill-opacity":"0.1"},Fi={key:1,x:"4",y:"8",width:"24",height:"16",rx:"4",fill:"currentColor","fill-opacity":"0.1"},Ii={key:2,cx:"16",cy:"16",rx:"12",ry:"10",fill:"currentColor","fill-opacity":"0.1"},Ti={key:3,points:"16,4 28,28 4,28",fill:"currentColor","fill-opacity":"0.1"},Ei={key:5,x1:"4",y1:"28",x2:"28",y2:"4"},Ai={class:"text-xs text-muted-foreground mt-1"},ji=Ve({__name:"ShapeLibrary",emits:["select"],setup(L,{emit:x}){const n=x,f=[{type:"rectangle",name:"Rectangle",icon:"rectangle"},{type:"rounded-rectangle",name:"Rounded Rectangle",icon:"rounded-rectangle"},{type:"circle",name:"Circle",icon:"circle"},{type:"triangle",name:"Triangle",icon:"triangle"},{type:"arrow",name:"Arrow",icon:"arrow"},{type:"line",name:"Line",icon:"line"}],d=le(()=>f);function h(b){n("select",b)}return(b,w)=>(l(),me(t(bn),null,{default:C(()=>[s(t(yn),{"as-child":""},{default:C(()=>[s(t(ae),{variant:"ghost",size:"sm",title:"Add Shape"},{default:C(()=>[s(t(dl),{class:"w-4 h-4"}),w[0]||(w[0]=e("span",{class:"sr-only"},"Add Shape",-1))]),_:1})]),_:1}),s(t(wn),{class:"w-56 p-3",align:"start"},{default:C(()=>[s(t(Ct),{class:"mb-3 block text-sm font-medium"},{default:C(()=>[...w[1]||(w[1]=[se("Basic Shapes",-1)])]),_:1}),e("div",Si,[(l(!0),a(ee,null,oe(d.value,k=>(l(),a("button",{key:k.type,type:"button",class:"flex flex-col items-center justify-center p-2 rounded-md border border-gray-200 hover:border-primary hover:bg-accent transition-colors focus:outline-none focus:ring-2 focus:ring-ring",title:k.name,onClick:$=>h(k.type)},[(l(),a("svg",Ci,[k.icon==="rectangle"?(l(),a("rect",$i)):k.icon==="rounded-rectangle"?(l(),a("rect",Fi)):k.icon==="circle"?(l(),a("ellipse",Ii)):k.icon==="triangle"?(l(),a("polygon",Ti)):k.icon==="arrow"?(l(),a(ee,{key:4},[w[2]||(w[2]=e("line",{x1:"4",y1:"16",x2:"22",y2:"16"},null,-1)),w[3]||(w[3]=e("polyline",{points:"18,10 24,16 18,22",fill:"none"},null,-1))],64)):k.icon==="line"?(l(),a("line",Ei)):Y("",!0)])),e("span",Ai,B(k.name),1)],8,zi))),128))]),w[4]||(w[4]=e("p",{class:"mt-3 text-xs text-muted-foreground"}," Click a shape to add it to the slide ",-1))]),_:1})]),_:1}))}}),Bi={type:"button",class:"inline-flex items-center gap-2 rounded-md border border-input bg-background px-2 py-1.5 text-sm hover:bg-accent hover:text-accent-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2"},Di={key:0,class:"text-muted-foreground"},Pi={class:"mb-3"},Mi={class:"space-y-1"},Li=["title","onClick"],Oi={class:"mb-3"},Wi={class:"flex flex-wrap gap-1"},Ri=["title","onClick"],Hi={key:0,class:"mb-3"},Ni={class:"flex flex-wrap gap-1"},Ui=["title","onClick"],Gi={class:"mb-3"},Xi={class:"flex items-center gap-2"},Vi={class:"relative"},Yi={key:1},qi={class:"flex items-center gap-2"},Bn="wysiwyg_recent_colors",Ki=Ve({__name:"ColorPicker",props:{modelValue:{},label:{default:""},showOpacity:{type:Boolean,default:!1},size:{default:"md"}},emits:["update:modelValue"],setup(L,{emit:x}){const n=L,f=x,d=E(!1),h=E("#000000"),b=E(100);function w(I){if(I.startsWith("rgba")){const c=I.match(/rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*([\d.]+))?\)/);if(c){const _=parseInt(c[1]).toString(16).padStart(2,"0"),N=parseInt(c[2]).toString(16).padStart(2,"0"),G=parseInt(c[3]).toString(16).padStart(2,"0"),J=c[4]?Math.round(parseFloat(c[4])*100):100;return{hex:`#${_}${N}${G}`,opacity:J}}}return I.length===9&&I.startsWith("#")?{hex:I.substring(0,7),opacity:Math.round(parseInt(I.substring(7),16)/255*100)}:{hex:I||"#000000",opacity:100}}Le(()=>n.modelValue,I=>{const c=w(I);h.value=c.hex,b.value=c.opacity},{immediate:!0});const k=[["#1E40AF","#3B82F6","#60A5FA","#93C5FD","#DBEAFE"],["#7C3AED","#8B5CF6","#A78BFA","#C4B5FD","#EDE9FE"],["#059669","#10B981","#34D399","#6EE7B7","#D1FAE5"],["#DC2626","#EF4444","#F87171","#FCA5A5","#FEE2E2"],["#111827","#4B5563","#9CA3AF","#D1D5DB","#F3F4F6"]],$=["#000000","#FFFFFF","#FF0000","#00FF00","#0000FF","#FFFF00","#FF00FF","#00FFFF","#FF8000","#8000FF"],j=E([]);function z(){try{const I=localStorage.getItem(Bn);I&&(j.value=JSON.parse(I))}catch{}}function r(I){const c=I.toUpperCase();j.value=[c,...j.value.filter(_=>_!==c)].slice(0,10);try{localStorage.setItem(Bn,JSON.stringify(j.value))}catch{}}z();function F(I,c){if(c>=100)return I;const _=parseInt(I.slice(1,3),16),N=parseInt(I.slice(3,5),16),G=parseInt(I.slice(5,7),16);return`rgba(${_}, ${N}, ${G}, ${(c/100).toFixed(2)})`}function O(I){h.value=I;const c=F(I,n.showOpacity?b.value:100);r(I),f("update:modelValue",c)}function T(){const I=F(h.value,n.showOpacity?b.value:100);r(h.value),f("update:modelValue",I)}function M(){const I=F(h.value,b.value);f("update:modelValue",I)}const R=le(()=>{switch(n.size){case"sm":return"w-5 h-5";case"lg":return"w-8 h-8";default:return"w-6 h-6"}}),H=le(()=>n.modelValue||"#000000");return(I,c)=>(l(),me(t(bn),{open:d.value,"onUpdate:open":c[5]||(c[5]=_=>d.value=_)},{default:C(()=>[s(t(yn),{"as-child":""},{default:C(()=>[e("button",Bi,[e("span",{class:ge([R.value,"rounded border border-gray-300 shadow-sm"]),style:re({backgroundColor:H.value})},null,6),I.label?(l(),a("span",Di,B(I.label),1)):Y("",!0)])]),_:1}),s(t(wn),{class:"w-64 p-3",align:"start"},{default:C(()=>[e("div",Pi,[s(t(Ct),{class:"mb-2 block text-xs text-muted-foreground"},{default:C(()=>[...c[6]||(c[6]=[se("Theme Colors",-1)])]),_:1}),e("div",Mi,[(l(),a(ee,null,oe(k,(_,N)=>e("div",{key:N,class:"flex gap-1"},[(l(!0),a(ee,null,oe(_,G=>(l(),a("button",{key:G,type:"button",class:"w-6 h-6 rounded border border-gray-200 hover:scale-110 transition-transform focus:outline-none focus:ring-2 focus:ring-ring",style:re({backgroundColor:G}),title:G,onClick:J=>O(G)},[h.value.toUpperCase()===G.toUpperCase()?(l(),me(t(pn),{key:0,class:ge(["w-4 h-4 mx-auto",N>=3&&N<4?"text-white":"text-gray-800"])},null,8,["class"])):Y("",!0)],12,Li))),128))])),64))])]),e("div",Oi,[s(t(Ct),{class:"mb-2 block text-xs text-muted-foreground"},{default:C(()=>[...c[7]||(c[7]=[se("Standard Colors",-1)])]),_:1}),e("div",Wi,[(l(),a(ee,null,oe($,_=>e("button",{key:_,type:"button",class:"w-6 h-6 rounded border border-gray-200 hover:scale-110 transition-transform focus:outline-none focus:ring-2 focus:ring-ring",style:re({backgroundColor:_}),title:_,onClick:N=>O(_)},[h.value.toUpperCase()===_.toUpperCase()?(l(),me(t(pn),{key:0,class:ge(["w-4 h-4 mx-auto",_==="#FFFFFF"||_==="#FFFF00"||_==="#00FFFF"?"text-gray-800":"text-white"])},null,8,["class"])):Y("",!0)],12,Ri)),64))])]),j.value.length>0?(l(),a("div",Hi,[s(t(Ct),{class:"mb-2 block text-xs text-muted-foreground"},{default:C(()=>[...c[8]||(c[8]=[se("Recent Colors",-1)])]),_:1}),e("div",Ni,[(l(!0),a(ee,null,oe(j.value,_=>(l(),a("button",{key:_,type:"button",class:"w-6 h-6 rounded border border-gray-200 hover:scale-110 transition-transform focus:outline-none focus:ring-2 focus:ring-ring",style:re({backgroundColor:_}),title:_,onClick:N=>O(_)},null,12,Ui))),128))])])):Y("",!0),e("div",Gi,[s(t(Ct),{class:"mb-2 block text-xs text-muted-foreground"},{default:C(()=>[...c[9]||(c[9]=[se("Custom Color",-1)])]),_:1}),e("div",Xi,[e("div",Vi,[ct(e("input",{type:"color","onUpdate:modelValue":c[0]||(c[0]=_=>h.value=_),class:"w-8 h-8 cursor-pointer rounded border-0 p-0",onChange:T},null,544),[[Kt,h.value]]),s(t(cl),{class:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-4 h-4 text-white pointer-events-none drop-shadow-md"})]),s(t(vn),{modelValue:h.value,"onUpdate:modelValue":c[1]||(c[1]=_=>h.value=_),class:"flex-1 h-8 text-xs font-mono uppercase",placeholder:"#000000",maxlength:"7",onChange:T},null,8,["modelValue"])])]),I.showOpacity?(l(),a("div",Yi,[s(t(Ct),{class:"mb-2 block text-xs text-muted-foreground"},{default:C(()=>[se(" Opacity: "+B(b.value)+"% ",1)]),_:1}),e("div",qi,[ct(e("input",{type:"range","onUpdate:modelValue":c[2]||(c[2]=_=>b.value=_),min:"0",max:"100",step:"1",class:"flex-1 h-2 rounded-lg appearance-none cursor-pointer bg-gray-200",onInput:M},null,544),[[Kt,b.value,void 0,{number:!0}]]),s(t(vn),{modelValue:b.value,"onUpdate:modelValue":c[3]||(c[3]=_=>b.value=_),modelModifiers:{number:!0},type:"number",min:"0",max:"100",class:"w-16 h-8 text-xs text-center",onChange:M},null,8,["modelValue"])])])):Y("",!0),s(t(ae),{class:"w-full mt-3",size:"sm",onClick:c[4]||(c[4]=_=>d.value=!1)},{default:C(()=>[...c[10]||(c[10]=[se(" Apply ",-1)])]),_:1})]),_:1})]),_:1},8,["open"]))}}),Xt=ut(Ki,[["__scopeId","data-v-66d35285"]]),Ji={class:"p-2 border-b"},Qi={class:"relative"},Zi={class:"max-h-60 overflow-y-auto"},er={key:0,class:"py-6 text-center text-sm text-muted-foreground"},qn=Ve({__name:"FontSelector",props:{modelValue:{}},emits:["update:modelValue"],setup(L,{emit:x}){const n=L,f=x,d=E(""),h={"Sans Serif":["Arial","Helvetica","Verdana","Tahoma","Trebuchet MS","Segoe UI","Open Sans","Roboto","Lato","Montserrat","Source Sans Pro","Nunito"],Serif:["Times New Roman","Georgia","Garamond","Palatino Linotype","Book Antiqua","Cambria","Merriweather","Playfair Display","Libre Baskerville"],Monospace:["Courier New","Consolas","Monaco","Menlo","Source Code Pro","Fira Code","JetBrains Mono"],Display:["Impact","Comic Sans MS","Brush Script MT","Pacifico","Lobster","Oswald","Anton"]};Object.values(h).flat();const b=le(()=>{if(!d.value.trim())return h;const $=d.value.toLowerCase(),j={};for(const[z,r]of Object.entries(h)){const F=r.filter(O=>O.toLowerCase().includes($));F.length>0&&(j[z]=F)}return j});function w($){f("update:modelValue",$)}const k=le(()=>n.modelValue||"Arial");return($,j)=>(l(),me(t(ls),{"model-value":k.value,"onUpdate:modelValue":w},{default:C(()=>[s(t(ss),{class:"w-40 h-8 text-sm"},{default:C(()=>[s(t(os),{placeholder:k.value},{default:C(()=>[e("span",{style:re({fontFamily:k.value})},B(k.value),5)]),_:1},8,["placeholder"])]),_:1}),s(t(as),{class:"max-h-80"},{default:C(()=>[e("div",Ji,[e("div",Qi,[s(t(ul),{class:"absolute left-2 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),s(t(vn),{modelValue:d.value,"onUpdate:modelValue":j[0]||(j[0]=z=>d.value=z),placeholder:"Search fonts...",class:"h-8 pl-8 text-sm",onClick:j[1]||(j[1]=dt(()=>{},["stop"]))},null,8,["modelValue"])])]),e("div",Zi,[(l(!0),a(ee,null,oe(b.value,(z,r)=>(l(),me(t(rs),{key:r},{default:C(()=>[s(t(Yl),{class:"text-xs text-muted-foreground px-2 py-1.5"},{default:C(()=>[se(B(r),1)]),_:2},1024),(l(!0),a(ee,null,oe(z,F=>(l(),me(t(is),{key:F,value:F,class:"py-2"},{default:C(()=>[e("span",{style:re({fontFamily:F})},B(F),5)]),_:2},1032,["value"]))),128))]),_:2},1024))),128)),Object.keys(b.value).length===0?(l(),a("div",er," No fonts found ")):Y("",!0)])]),_:1})]),_:1},8,["model-value"]))}}),tr={class:"editor-toolbar flex items-center gap-1 p-2 bg-white dark:bg-zinc-900 border-b border-zinc-200 dark:border-zinc-800"},nr={class:"toolbar-section flex items-center gap-1 pr-3 border-r border-zinc-200 dark:border-zinc-700"},lr={key:0,class:"toolbar-section flex items-center gap-1 px-3 border-r border-zinc-200 dark:border-zinc-700"},sr=["value"],or=["value"],ar={key:1,class:"toolbar-section flex items-center gap-1 px-3 border-r border-zinc-200 dark:border-zinc-700"},ir=["disabled"],rr=["disabled"],dr=["disabled"],cr=["disabled"],ur=["disabled"],fr=["disabled"],pr={key:2,class:"toolbar-section flex items-center gap-1 px-3 border-r border-zinc-200 dark:border-zinc-700"},gr=["disabled"],vr={class:"toolbar-section flex items-center gap-1 px-3 border-r border-zinc-200 dark:border-zinc-700"},hr=["disabled"],xr=["disabled"],mr=["disabled"],br=["disabled"],yr={class:"toolbar-section flex items-center gap-1 pl-3"},wr=Ve({__name:"EditorToolbar",props:{canUndo:{type:Boolean,default:!1},canRedo:{type:Boolean,default:!1},hasSelection:{type:Boolean,default:!1},hasMultipleSelection:{type:Boolean,default:!1},hasClipboard:{type:Boolean,default:!1},gridEnabled:{type:Boolean,default:!1},snapEnabled:{type:Boolean,default:!1},selectedElementType:{default:null},textColor:{default:"#111827"},fontFamily:{default:"Arial"},fontSize:{default:18}},emits:["add:text","add:shape","add:image","add:chart","add:table","format:bold","format:italic","format:underline","format:color","format:font","format:fontSize","align:horizontal","align:vertical","arrange:bring-front","arrange:send-back","arrange:bring-forward","arrange:send-backward","group","ungroup","undo","redo","duplicate","delete","toggle:grid","toggle:snap"],setup(L,{emit:x}){const n=L,f=x,d=le(()=>n.selectedElementType==="text"),h=le(()=>n.hasMultipleSelection),b=[8,10,12,14,16,18,20,24,28,32,36,42,48,56,64,72];function w(z){f("add:shape",z)}function k(z){f("format:color",z)}function $(z){f("format:font",z)}function j(z){const r=z.target;f("format:fontSize",parseInt(r.value))}return(z,r)=>(l(),a("div",tr,[e("div",nr,[e("button",{class:"toolbar-btn",title:"Add Text Box (T)",onClick:r[0]||(r[0]=F=>f("add:text"))},[s(t(hn),{class:"w-4 h-4"})]),s(ji,{onSelect:w}),e("button",{class:"toolbar-btn",title:"Add Image",onClick:r[1]||(r[1]=F=>f("add:image"))},[s(t(qt),{class:"w-4 h-4"})]),e("button",{class:"toolbar-btn",title:"Add Chart",onClick:r[2]||(r[2]=F=>f("add:chart"))},[s(t(Rn),{class:"w-4 h-4"})]),e("button",{class:"toolbar-btn",title:"Add Table",onClick:r[3]||(r[3]=F=>f("add:table"))},[s(t(fl),{class:"w-4 h-4"})])]),d.value?(l(),a("div",lr,[s(qn,{"model-value":z.fontFamily,"onUpdate:modelValue":$},null,8,["model-value"]),e("select",{value:z.fontSize,class:"h-8 px-2 text-sm border border-input rounded-md bg-background focus:outline-none focus:ring-2 focus:ring-ring",onChange:j},[(l(),a(ee,null,oe(b,F=>e("option",{key:F,value:F},B(F),9,or)),64))],40,sr),r[23]||(r[23]=e("div",{class:"w-px h-4 bg-zinc-200 dark:bg-zinc-700 mx-1"},null,-1)),e("button",{class:"toolbar-btn",title:"Bold (Ctrl+B)",onClick:r[4]||(r[4]=F=>f("format:bold"))},[s(t(pl),{class:"w-4 h-4"})]),e("button",{class:"toolbar-btn",title:"Italic (Ctrl+I)",onClick:r[5]||(r[5]=F=>f("format:italic"))},[s(t(gl),{class:"w-4 h-4"})]),e("button",{class:"toolbar-btn",title:"Underline (Ctrl+U)",onClick:r[6]||(r[6]=F=>f("format:underline"))},[s(t(vl),{class:"w-4 h-4"})]),r[24]||(r[24]=e("div",{class:"w-px h-4 bg-zinc-200 dark:bg-zinc-700 mx-1"},null,-1)),s(Xt,{"model-value":z.textColor,label:"A",size:"sm","onUpdate:modelValue":k},null,8,["model-value"])])):Y("",!0),z.hasSelection?(l(),a("div",ar,[e("button",{class:"toolbar-btn",disabled:!h.value,title:"Align Left",onClick:r[7]||(r[7]=F=>f("align:horizontal","left"))},[s(t(hl),{class:"w-4 h-4"})],8,ir),e("button",{class:"toolbar-btn",disabled:!h.value,title:"Align Center",onClick:r[8]||(r[8]=F=>f("align:horizontal","center"))},[s(t(xl),{class:"w-4 h-4"})],8,rr),e("button",{class:"toolbar-btn",disabled:!h.value,title:"Align Right",onClick:r[9]||(r[9]=F=>f("align:horizontal","right"))},[s(t(ml),{class:"w-4 h-4"})],8,dr),r[25]||(r[25]=e("div",{class:"w-px h-4 bg-zinc-200 dark:bg-zinc-700 mx-1"},null,-1)),e("button",{class:"toolbar-btn",disabled:!h.value,title:"Align Top",onClick:r[10]||(r[10]=F=>f("align:vertical","top"))},[s(t(bl),{class:"w-4 h-4"})],8,cr),e("button",{class:"toolbar-btn",disabled:!h.value,title:"Align Middle",onClick:r[11]||(r[11]=F=>f("align:vertical","middle"))},[s(t(yl),{class:"w-4 h-4"})],8,ur),e("button",{class:"toolbar-btn",disabled:!h.value,title:"Align Bottom",onClick:r[12]||(r[12]=F=>f("align:vertical","bottom"))},[s(t(wl),{class:"w-4 h-4"})],8,fr)])):Y("",!0),z.hasSelection?(l(),a("div",pr,[e("button",{class:"toolbar-btn",title:"Bring to Front",onClick:r[13]||(r[13]=F=>f("arrange:bring-front"))},[s(t(kl),{class:"w-4 h-4"})]),e("button",{class:"toolbar-btn",title:"Send to Back",onClick:r[14]||(r[14]=F=>f("arrange:send-back"))},[s(t(_l),{class:"w-4 h-4"})]),r[26]||(r[26]=e("div",{class:"w-px h-4 bg-zinc-200 dark:bg-zinc-700 mx-1"},null,-1)),e("button",{class:"toolbar-btn",disabled:!z.hasMultipleSelection,title:"Group (Ctrl+G)",onClick:r[15]||(r[15]=F=>f("group"))},[s(t(Sl),{class:"w-4 h-4"})],8,gr),e("button",{class:"toolbar-btn",title:"Ungroup (Ctrl+Shift+G)",onClick:r[16]||(r[16]=F=>f("ungroup"))},[s(t(zl),{class:"w-4 h-4"})])])):Y("",!0),e("div",vr,[e("button",{class:"toolbar-btn",disabled:!z.canUndo,title:"Undo (Ctrl+Z)",onClick:r[17]||(r[17]=F=>f("undo"))},[s(t(Cl),{class:"w-4 h-4"})],8,hr),e("button",{class:"toolbar-btn",disabled:!z.canRedo,title:"Redo (Ctrl+Shift+Z)",onClick:r[18]||(r[18]=F=>f("redo"))},[s(t($l),{class:"w-4 h-4"})],8,xr),r[27]||(r[27]=e("div",{class:"w-px h-4 bg-zinc-200 dark:bg-zinc-700 mx-1"},null,-1)),e("button",{class:"toolbar-btn",disabled:!z.hasSelection,title:"Duplicate (Ctrl+D)",onClick:r[19]||(r[19]=F=>f("duplicate"))},[s(t(xn),{class:"w-4 h-4"})],8,mr),e("button",{class:"toolbar-btn text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20",disabled:!z.hasSelection,title:"Delete (Del)",onClick:r[20]||(r[20]=F=>f("delete"))},[s(t(Mt),{class:"w-4 h-4"})],8,br)]),e("div",yr,[e("button",{class:ge(["toolbar-btn",{"bg-indigo-100 dark:bg-indigo-900/30 text-indigo-600":z.gridEnabled}]),title:"Toggle Grid",onClick:r[21]||(r[21]=F=>f("toggle:grid"))},[s(t(Fl),{class:"w-4 h-4"})],2),e("button",{class:ge(["toolbar-btn",{"bg-indigo-100 dark:bg-indigo-900/30 text-indigo-600":z.snapEnabled}]),title:"Snap to Grid",onClick:r[22]||(r[22]=F=>f("toggle:snap"))},[s(t(Hn),{class:"w-4 h-4"})],2)])]))}}),kr=ut(wr,[["__scopeId","data-v-261cdbc8"]]),_r={class:"element-inspector w-64 bg-white dark:bg-zinc-900 border-l border-zinc-200 dark:border-zinc-800 overflow-y-auto"},Sr={key:0,class:"p-4 text-center text-zinc-500 dark:text-zinc-400"},zr={class:"inspector-section"},Cr={key:0,class:"section-content"},$r={class:"grid grid-cols-2 gap-2"},Fr={class:"input-group"},Ir=["value"],Tr={class:"input-group"},Er=["value"],Ar={class:"grid grid-cols-2 gap-2 mt-2"},jr={class:"input-group"},Br=["value"],Dr={class:"input-group"},Pr=["value"],Mr={class:"mt-2"},Lr={class:"input-group"},Or={class:"input-label flex items-center gap-1"},Wr=["value"],Rr={class:"inspector-section"},Hr={key:0,class:"section-content"},Nr={class:"input-group"},Ur=["value"],Gr={class:"text-xs text-zinc-500"},Xr={key:0,class:"input-group mt-2"},Vr={key:1,class:"input-group mt-2"},Yr={key:2,class:"input-group mt-2"},qr=["value"],Kr={key:0,class:"inspector-section"},Jr={key:0,class:"section-content"},Qr={class:"input-group"},Zr={class:"input-group mt-2"},ed=["value"],td=["value"],nd={class:"input-group mt-2"},ld={class:"input-group mt-2"},sd={class:"flex gap-1"},od=["onClick"],ad={class:"input-group mt-2"},id={class:"flex gap-1"},rd={class:"input-group mt-2"},dd=["value"],cd={class:"inspector-section"},ud={key:0,class:"section-content"},fd=["value"],pd=Ve({__name:"ElementInspector",props:{element:{},speakerNotes:{}},emits:["update","update:speakerNotes"],setup(L,{emit:x}){const n=L,f=x,d=E({position:!0,appearance:!0,text:!0,notes:!1}),h=[8,9,10,11,12,14,16,18,20,24,28,32,36,40,48,56,64,72],b=[{value:"left",label:"Left"},{value:"center",label:"Center"},{value:"right",label:"Right"},{value:"justify",label:"Justify"}],w=le(()=>n.element!==null),k=le(()=>n.element?.type==="text"),$=le(()=>n.element?.type==="shape");function j(I,c){f("update",{[I]:c})}function z(I,c){f("update",{[I]:c})}function r(I){f("update",{rotation:I})}function F(I){f("update",{opacity:I})}function O(I){f("update",{fill:I})}function T(I){f("update",{stroke:I})}function M(I){f("update",{strokeWidth:I})}function R(I,c){n.element?.text&&f("update",{text:{...n.element.text,[I]:c}})}function H(I){d.value[I]=!d.value[I]}return(I,c)=>(l(),a("div",_r,[w.value?(l(),a(ee,{key:1},[e("div",zr,[e("button",{class:"section-header",onClick:c[0]||(c[0]=_=>H("position"))},[s(t(Il),{class:"w-4 h-4"}),c[19]||(c[19]=e("span",null,"Position & Size",-1)),d.value.position?(l(),me(t(Et),{key:0,class:"w-4 h-4 ml-auto"})):(l(),me(t(Qe),{key:1,class:"w-4 h-4 ml-auto"}))]),d.value.position?(l(),a("div",Cr,[e("div",$r,[e("div",Fr,[c[20]||(c[20]=e("label",{class:"input-label"},"X",-1)),e("input",{type:"number",class:"input-field",value:I.element?.x?.toFixed(1),step:"0.1",min:"0",max:"100",onInput:c[1]||(c[1]=_=>j("x",parseFloat(_.target.value)))},null,40,Ir),c[21]||(c[21]=e("span",{class:"input-unit"},"%",-1))]),e("div",Tr,[c[22]||(c[22]=e("label",{class:"input-label"},"Y",-1)),e("input",{type:"number",class:"input-field",value:I.element?.y?.toFixed(1),step:"0.1",min:"0",max:"100",onInput:c[2]||(c[2]=_=>j("y",parseFloat(_.target.value)))},null,40,Er),c[23]||(c[23]=e("span",{class:"input-unit"},"%",-1))])]),e("div",Ar,[e("div",jr,[c[24]||(c[24]=e("label",{class:"input-label"},"Width",-1)),e("input",{type:"number",class:"input-field",value:I.element?.width?.toFixed(1),step:"0.1",min:"1",max:"100",onInput:c[3]||(c[3]=_=>z("width",parseFloat(_.target.value)))},null,40,Br),c[25]||(c[25]=e("span",{class:"input-unit"},"%",-1))]),e("div",Dr,[c[26]||(c[26]=e("label",{class:"input-label"},"Height",-1)),e("input",{type:"number",class:"input-field",value:I.element?.height?.toFixed(1),step:"0.1",min:"1",max:"100",onInput:c[4]||(c[4]=_=>z("height",parseFloat(_.target.value)))},null,40,Pr),c[27]||(c[27]=e("span",{class:"input-unit"},"%",-1))])]),e("div",Mr,[e("div",Lr,[e("label",Or,[s(t(Tl),{class:"w-3 h-3"}),c[28]||(c[28]=se(" Rotation ",-1))]),e("input",{type:"number",class:"input-field",value:I.element?.rotation?.toFixed(0),step:"1",min:"0",max:"360",onInput:c[5]||(c[5]=_=>r(parseFloat(_.target.value)))},null,40,Wr),c[29]||(c[29]=e("span",{class:"input-unit"},"deg",-1))])])])):Y("",!0)]),e("div",Rr,[e("button",{class:"section-header",onClick:c[6]||(c[6]=_=>H("appearance"))},[s(t(Nn),{class:"w-4 h-4"}),c[30]||(c[30]=e("span",null,"Appearance",-1)),d.value.appearance?(l(),me(t(Et),{key:0,class:"w-4 h-4 ml-auto"})):(l(),me(t(Qe),{key:1,class:"w-4 h-4 ml-auto"}))]),d.value.appearance?(l(),a("div",Hr,[e("div",Nr,[c[31]||(c[31]=e("label",{class:"input-label"},"Opacity",-1)),e("input",{type:"range",class:"w-full",value:I.element?.opacity??1,min:"0",max:"1",step:"0.05",onInput:c[7]||(c[7]=_=>F(parseFloat(_.target.value)))},null,40,Ur),e("span",Gr,B(((I.element?.opacity??1)*100).toFixed(0))+"%",1)]),$.value?(l(),a("div",Xr,[c[32]||(c[32]=e("label",{class:"input-label"},"Fill Color",-1)),s(Xt,{"model-value":I.element?.fill||"#E5E7EB","show-opacity":"","onUpdate:modelValue":O},null,8,["model-value"])])):Y("",!0),$.value?(l(),a("div",Vr,[c[33]||(c[33]=e("label",{class:"input-label"},"Border Color",-1)),s(Xt,{"model-value":I.element?.stroke||"#9CA3AF","onUpdate:modelValue":T},null,8,["model-value"])])):Y("",!0),$.value?(l(),a("div",Yr,[c[34]||(c[34]=e("label",{class:"input-label"},"Border Width",-1)),e("input",{type:"number",class:"input-field",value:I.element?.strokeWidth??1,min:"0",max:"20",step:"1",onInput:c[8]||(c[8]=_=>M(parseInt(_.target.value)))},null,40,qr),c[35]||(c[35]=e("span",{class:"input-unit"},"px",-1))])):Y("",!0)])):Y("",!0)]),k.value&&I.element?.text?(l(),a("div",Kr,[e("button",{class:"section-header",onClick:c[9]||(c[9]=_=>H("text"))},[s(t(hn),{class:"w-4 h-4"}),c[36]||(c[36]=e("span",null,"Text",-1)),d.value.text?(l(),me(t(Et),{key:0,class:"w-4 h-4 ml-auto"})):(l(),me(t(Qe),{key:1,class:"w-4 h-4 ml-auto"}))]),d.value.text?(l(),a("div",Jr,[e("div",Qr,[c[37]||(c[37]=e("label",{class:"input-label"},"Font",-1)),s(qn,{"model-value":I.element.text.fontFamily,"onUpdate:modelValue":c[10]||(c[10]=_=>R("fontFamily",_))},null,8,["model-value"])]),e("div",Zr,[c[38]||(c[38]=e("label",{class:"input-label"},"Size",-1)),e("select",{class:"input-field",value:I.element.text.fontSize,onChange:c[11]||(c[11]=_=>R("fontSize",parseInt(_.target.value)))},[(l(),a(ee,null,oe(h,_=>e("option",{key:_,value:_},B(_)+"px ",9,td)),64))],40,ed)]),e("div",nd,[c[39]||(c[39]=e("label",{class:"input-label"},"Color",-1)),s(Xt,{"model-value":I.element.text.color,"onUpdate:modelValue":c[12]||(c[12]=_=>R("color",_))},null,8,["model-value"])]),e("div",ld,[c[40]||(c[40]=e("label",{class:"input-label"},"Alignment",-1)),e("div",sd,[(l(),a(ee,null,oe(b,_=>e("button",{key:_.value,class:ge(["flex-1 px-2 py-1 text-xs rounded border",{"bg-indigo-100 border-indigo-500 text-indigo-700":I.element.text.textAlign===_.value,"bg-white dark:bg-zinc-800 border-zinc-300 dark:border-zinc-600":I.element.text.textAlign!==_.value}]),onClick:N=>R("textAlign",_.value)},B(_.label),11,od)),64))])]),e("div",ad,[c[41]||(c[41]=e("label",{class:"input-label"},"Style",-1)),e("div",id,[e("button",{class:ge(["flex-1 px-2 py-1 text-xs rounded border font-bold",{"bg-indigo-100 border-indigo-500 text-indigo-700":I.element.text.fontWeight==="bold","bg-white dark:bg-zinc-800 border-zinc-300 dark:border-zinc-600":I.element.text.fontWeight!=="bold"}]),onClick:c[13]||(c[13]=_=>R("fontWeight",I.element.text.fontWeight==="bold"?"normal":"bold"))}," B ",2),e("button",{class:ge(["flex-1 px-2 py-1 text-xs rounded border italic",{"bg-indigo-100 border-indigo-500 text-indigo-700":I.element.text.fontStyle==="italic","bg-white dark:bg-zinc-800 border-zinc-300 dark:border-zinc-600":I.element.text.fontStyle!=="italic"}]),onClick:c[14]||(c[14]=_=>R("fontStyle",I.element.text.fontStyle==="italic"?"normal":"italic"))}," I ",2)])]),e("div",rd,[c[42]||(c[42]=e("label",{class:"input-label"},"Line Height",-1)),e("input",{type:"number",class:"input-field",value:I.element.text.lineHeight,min:"0.5",max:"3",step:"0.1",onInput:c[15]||(c[15]=_=>R("lineHeight",parseFloat(_.target.value)))},null,40,dd)])])):Y("",!0)])):Y("",!0),e("div",cd,[e("button",{class:"section-header",onClick:c[16]||(c[16]=_=>H("notes"))},[s(t(Un),{class:"w-4 h-4"}),c[43]||(c[43]=e("span",null,"Speaker Notes",-1)),d.value.notes?(l(),me(t(Et),{key:0,class:"w-4 h-4 ml-auto"})):(l(),me(t(Qe),{key:1,class:"w-4 h-4 ml-auto"}))]),d.value.notes?(l(),a("div",ud,[e("textarea",{class:"w-full h-32 px-2 py-1.5 text-sm border border-zinc-300 dark:border-zinc-600 rounded bg-white dark:bg-zinc-800 resize-none",placeholder:"Add speaker notes for this slide...",value:I.speakerNotes||"",onInput:c[17]||(c[17]=_=>f("update:speakerNotes",_.target.value))},null,40,fd)])):Y("",!0)])],64)):(l(),a("div",Sr,[...c[18]||(c[18]=[e("p",{class:"text-sm"},"Select an element to edit its properties",-1)])]))]))}}),gd=ut(pd,[["__scopeId","data-v-e0842a7b"]]);function vd(L){const{canvasInstance:x,elementsInstance:n,slide:f,onSelectionChange:d}=L,h=E([]),b=E(null);function w(){const Z=x.canvas.value;if(!Z)return[];const K=Z.getActiveObject();if(!K)return[];if(K instanceof Lt)return K.getObjects().map(m=>m.elementId).filter(Boolean);const p=K.elementId;return p?[p]:[]}function k(){h.value=w(),d?.(h.value)}function $(Z){const K=x.canvas.value;if(!K)return;if(K.discardActiveObject(),Z.length===0){h.value=[],K.renderAll(),d?.([]);return}const p=Z.map(m=>n.getFabricObject(m)).filter(m=>m!==void 0);if(p.length!==0){if(p.length===1)K.setActiveObject(p[0]);else{const m=new Lt(p,{canvas:K});K.setActiveObject(m)}h.value=Z,K.renderAll(),d?.(Z)}}function j(Z){const K=[...h.value];K.includes(Z)||(K.push(Z),$(K))}function z(Z){const K=h.value.filter(p=>p!==Z);$(K)}function r(Z){h.value.includes(Z)?z(Z):j(Z)}function F(){if(!f.value)return;const Z=f.value.elements.map(K=>K.id);$(Z)}function O(){$([])}const T=le(()=>f.value?f.value.elements.filter(Z=>h.value.includes(Z.id)):[]);function M(){T.value.length!==0&&(b.value=T.value.map(Z=>({...JSON.parse(JSON.stringify(Z))})))}function R(){M(),h.value.forEach(Z=>n.removeElement(Z)),O()}function H(){if(!b.value||b.value.length===0)return[];const Z=[],K=2;return b.value.forEach(p=>{const m={...JSON.parse(JSON.stringify(p)),id:Me(),x:p.x+K,y:p.y+K,zIndex:n.getNextZIndex()};n.addElement(m),Z.push(m)}),$(Z.map(p=>p.id)),Z}function I(){return M(),H()}function c(){if(h.value.length<2)return null;const Z=Me();return h.value.forEach(K=>{n.updateElement(K,{groupId:Z})}),Z}function _(Z){f.value&&f.value.elements.filter(K=>K.groupId===Z).forEach(K=>{n.updateElement(K.id,{groupId:void 0})})}function N(Z){if(T.value.length<2)return;const K=T.value;let p;switch(Z){case"left":p=Math.min(...K.map(P=>P.x));break;case"center":const m=Math.min(...K.map(P=>P.x)),U=Math.max(...K.map(P=>P.x+P.width)),W=(m+U)/2;K.forEach(P=>{n.updateElement(P.id,{x:W-P.width/2})});return;case"right":const te=Math.max(...K.map(P=>P.x+P.width));K.forEach(P=>{n.updateElement(P.id,{x:te-P.width})});return}K.forEach(m=>{n.updateElement(m.id,{x:p})})}function G(Z){if(T.value.length<2)return;const K=T.value;switch(Z){case"top":const p=Math.min(...K.map(P=>P.y));K.forEach(P=>{n.updateElement(P.id,{y:p})});break;case"middle":const m=Math.min(...K.map(P=>P.y)),U=Math.max(...K.map(P=>P.y+P.height)),W=(m+U)/2;K.forEach(P=>{n.updateElement(P.id,{y:W-P.height/2})});break;case"bottom":const te=Math.max(...K.map(P=>P.y+P.height));K.forEach(P=>{n.updateElement(P.id,{y:te-P.height})});break}}function J(Z){if(T.value.length<3)return;const K=[...T.value];if(Z==="horizontal"){K.sort((ne,de)=>ne.x-de.x);const p=K[0],m=K[K.length-1],U=m.x+m.width-p.x,W=K.reduce((ne,de)=>ne+de.width,0),te=(U-W)/(K.length-1);let P=p.x;K.forEach((ne,de)=>{de>0&&n.updateElement(ne.id,{x:P}),P+=ne.width+te})}else{K.sort((ne,de)=>ne.y-de.y);const p=K[0],m=K[K.length-1],U=m.y+m.height-p.y,W=K.reduce((ne,de)=>ne+de.height,0),te=(U-W)/(K.length-1);let P=p.y;K.forEach((ne,de)=>{de>0&&n.updateElement(ne.id,{y:P}),P+=ne.height+te})}}function V(){h.value.forEach(Z=>{n.updateElement(Z,{locked:!0})})}function we(){h.value.forEach(Z=>{n.updateElement(Z,{locked:!1})})}function $e(){T.value.some(K=>K.locked)?we():V()}const _e=le(()=>h.value.length>0),je=le(()=>h.value.length>1),Ae=le(()=>b.value!==null&&b.value.length>0),Oe=le(()=>h.value.length>=2),We=le(()=>T.value.some(Z=>Z.groupId!==void 0)),ye=le(()=>h.value.length>=2),ke=le(()=>h.value.length>=3);return x.on("selection:created",k),x.on("selection:updated",k),x.on("selection:cleared",k),{selectedIds:h,selectedElements:T,clipboard:b,hasSelection:_e,hasMultipleSelection:je,hasClipboard:Ae,canGroup:Oe,canUngroup:We,canAlign:ye,canDistribute:ke,selectElements:$,addToSelection:j,removeFromSelection:z,toggleSelection:r,selectAll:F,deselectAll:O,syncSelectionFromCanvas:k,copy:M,cut:R,paste:H,duplicate:I,groupElements:c,ungroupElements:_,alignHorizontal:N,alignVertical:G,distribute:J,lockSelected:V,unlockSelected:we,toggleLock:$e}}function hd(L){const{slides:x,activeSlideIndex:n,maxSize:f=50,debounceMs:d=500,onRestore:h}=L,b=E([]),w=E([]),k=E(!1),$=E(0);function j(){return{slides:JSON.parse(JSON.stringify(x.value)),activeSlideIndex:n.value,timestamp:Date.now()}}function z(N=!1){if(k.value)return;const G=Date.now();if(!N&&G-$.value<d)return;const J=j();if(b.value.length>0){const V=b.value[b.value.length-1];if(JSON.stringify(V.slides)===JSON.stringify(J.slides))return}b.value.push(J),b.value.length>f&&b.value.shift(),w.value=[],$.value=G}function r(){if(!H.value)return!1;k.value=!0;try{w.value.unshift(j());const N=b.value.pop();return x.value=JSON.parse(JSON.stringify(N.slides)),n.value=N.activeSlideIndex,h?.(N),!0}finally{k.value=!1}}function F(){if(!I.value)return!1;k.value=!0;try{b.value.push(j());const N=w.value.shift();return x.value=JSON.parse(JSON.stringify(N.slides)),n.value=N.activeSlideIndex,h?.(N),!0}finally{k.value=!1}}function O(){b.value=[],w.value=[],$.value=0}function T(){O(),z(!0)}function M(){return j()}function R(N){k.value=!0;try{b.value.push(j()),w.value=[],x.value=JSON.parse(JSON.stringify(N.slides)),n.value=N.activeSlideIndex,h?.(N)}finally{k.value=!1}}const H=le(()=>b.value.length>0),I=le(()=>w.value.length>0),c=le(()=>b.value.length),_=le(()=>w.value.length);return x.value.length>0&&z(!0),{past:b,future:w,isRestoring:k,canUndo:H,canRedo:I,historyLength:c,futureLength:_,pushState:z,undo:r,redo:F,clearHistory:O,resetHistory:T,getCurrentState:M,restoreState:R}}function xd(L,x=500){let n=null;return()=>{n&&clearTimeout(n),n=setTimeout(()=>{L.pushState(),n=null},x)}}function Kn(L={}){const{slides:x,onThemeChange:n}=L,f=E([]),d=E("modern"),h=E(!1),b=E(null);async function w(){if(!(f.value.length>0)){h.value=!0,b.value=null;try{const c=await fetch("/themes/themes.json");if(!c.ok)throw new Error(`Failed to load themes: ${c.statusText}`);const _=await c.json();f.value=_.themes,d.value=_.defaultThemeId}catch(c){b.value=c instanceof Error?c.message:"Failed to load themes",console.error("Error loading themes:",c),f.value=[k()]}finally{h.value=!1}}}function k(){return{id:"default",name:"Default",description:"Default theme",colors:{primary:"#3B82F6",secondary:"#6366F1",accent:"#10B981",background:"#FFFFFF",surface:"#F3F4F6",text:"#111827",textSecondary:"#6B7280",textInverse:"#FFFFFF"},fonts:{heading:{family:"Arial",weight:700,sizes:{title:44,h1:36,h2:28,h3:22}},body:{family:"Arial",weight:400,sizes:{large:18,normal:16,small:14}}},elements:{titleSlide:{titleColor:"#111827",subtitleColor:"#6B7280",backgroundColor:"#FFFFFF"},contentSlide:{headingColor:"#111827",bodyColor:"#374151",backgroundColor:"#FFFFFF"},shapes:{defaultFill:"#E5E7EB",defaultStroke:"#9CA3AF",accentFill:"#3B82F6"},charts:{colors:["#3B82F6","#6366F1","#8B5CF6","#EC4899","#10B981","#F59E0B"]}}}}const $=le(()=>f.value.find(c=>c.id===d.value)||f.value[0]||null);function j(c){const _=f.value.find(N=>N.id===c);_&&(d.value=c,n?.(_))}function z(c,_,N={}){const{preserveCustomizations:G=!0}=N,J={...c,themeId:_.id,backgroundColor:_.elements.contentSlide.backgroundColor};return J.elements=c.elements.map(V=>G&&V.isThemeOverridden?V:r(V,_)),J}function r(c,_){const N={...c};switch(c.type){case"text":if(N.text){const G=(N.text.fontSize||18)>=24;N.text={...N.text,fontFamily:G?_.fonts.heading.family:_.fonts.body.family,color:G?_.elements.contentSlide.headingColor||_.colors.primary:_.elements.contentSlide.bodyColor||_.colors.text}}break;case"shape":N.fill=_.elements.shapes.defaultFill,N.stroke=_.elements.shapes.defaultStroke;break;case"chart":N.chart&&(N.chart={...N.chart,datasets:N.chart.datasets.map((G,J)=>({...G,backgroundColor:_.elements.charts.colors[J%_.elements.charts.colors.length],borderColor:_.elements.charts.colors[J%_.elements.charts.colors.length]}))});break;case"table":N.table&&(N.table={...N.table,headerBackground:_.colors.surface,headerColor:_.colors.text});break}return N}function F(c,_,N={}){const G=f.value.find(J=>J.id===_);return G?c.map(J=>z(J,G,N)):c}function O(c={}){!x?.value||!$.value||(x.value=F(x.value,d.value,c))}function T(){return $.value?.colors||null}function M(){return $.value?.fonts||null}function R(c,_="body"){const N=$.value;if(!N)return{type:"text",text:{content:c,fontFamily:"Arial",fontSize:18,fontWeight:"normal",fontStyle:"normal",textAlign:"left",color:"#111827",lineHeight:1.4,letterSpacing:0}};const G=_==="body"?N.fonts.body:N.fonts.heading,J=_==="title"?G.sizes.title||44:_==="heading"?G.sizes.h1||36:G.sizes.normal||16,V=_==="body"?N.elements.contentSlide.bodyColor||N.colors.text:N.elements.contentSlide.headingColor||N.colors.primary;return{type:"text",text:{content:c,fontFamily:G.family,fontSize:J,fontWeight:_==="body"?"normal":"bold",fontStyle:"normal",textAlign:_==="title"?"center":"left",color:V,lineHeight:1.4,letterSpacing:0}}}function H(c="rectangle",_=!1){const N=$.value;return N?{type:"shape",fill:_?N.elements.shapes.accentFill:N.elements.shapes.defaultFill,stroke:N.elements.shapes.defaultStroke,shape:{shapeType:c,cornerRadius:c==="rounded-rectangle"?10:0}}:{type:"shape",fill:"#E5E7EB",stroke:"#9CA3AF",shape:{shapeType:c}}}function I(){return $.value?.elements.charts.colors||["#3B82F6","#6366F1","#8B5CF6","#EC4899","#10B981","#F59E0B"]}return{themes:f,currentThemeId:d,currentTheme:$,isLoading:h,error:b,loadThemes:w,setTheme:j,applyThemeToSlide:z,applyThemeToElement:r,applyThemeToAllSlides:F,applyCurrentTheme:O,getThemeColors:T,getThemeFonts:M,getChartColors:I,createThemedTextElement:R,createThemedShapeElement:H,getDefaultTheme:k}}const md={type:"fade",duration:300};function Jn(L){const{slides:x,initialSlideIndex:n=0,defaultTransition:f=md}=L,d=E(n),h=E(!1),b=E(!1),w=E(!0),k=E({...f}),$=E("forward"),j=E(0);let z=null;const r=le(()=>x.value[d.value]||null),F=le(()=>{const ye=d.value+1;return x.value[ye]||null}),O=le(()=>{const ye=d.value-1;return x.value[ye]||null}),T=le(()=>x.value.length),M=le(()=>T.value===0?0:(d.value+1)/T.value*100),R=le(()=>d.value<T.value-1),H=le(()=>d.value>0),I=le(()=>{const ye=Math.floor(j.value/1e3),ke=Math.floor(ye/3600),Z=Math.floor(ye%3600/60),K=ye%60;return ke>0?`${ke}:${Z.toString().padStart(2,"0")}:${K.toString().padStart(2,"0")}`:`${Z}:${K.toString().padStart(2,"0")}`});function c(ye){ye!==void 0&&(d.value=Math.max(0,Math.min(ye,T.value-1))),h.value=!0,_e()}function _(){h.value=!1,b.value=!1,je()}function N(){b.value=!b.value}function G(ye){const ke=Math.max(0,Math.min(ye,T.value-1));$.value=ke>d.value?"forward":"backward",d.value=ke}function J(){R.value&&($.value="forward",d.value++)}function V(){H.value&&($.value="backward",d.value--)}function we(){$.value="backward",d.value=0}function $e(){$.value="forward",d.value=T.value-1}function _e(){z||(w.value=!1,z=setInterval(()=>{j.value+=1e3},1e3))}function je(){z&&(clearInterval(z),z=null),w.value=!0}function Ae(){je(),j.value=0}function Oe(ye){k.value={...k.value,...ye}}function We(){const ye=k.value.type,ke=$.value;switch(ye){case"fade":return{enter:"transition-fade-enter",leave:"transition-fade-leave"};case"slide-left":case"slide-right":return{enter:ke==="forward"?"transition-slide-enter-right":"transition-slide-enter-left",leave:ke==="forward"?"transition-slide-leave-left":"transition-slide-leave-right"};case"slide-up":return{enter:"transition-slide-enter-up",leave:"transition-slide-leave-down"};case"zoom":return{enter:ke==="forward"?"transition-zoom-enter":"transition-zoom-enter-reverse",leave:ke==="forward"?"transition-zoom-leave":"transition-zoom-leave-reverse"};case"flip":return{enter:"transition-flip-enter",leave:"transition-flip-leave"};case"none":default:return{enter:"",leave:""}}}return Ot(()=>{z&&clearInterval(z)}),{currentSlideIndex:d,isPresenting:h,isPresenterView:b,isPaused:w,transition:k,transitionDirection:$,elapsedTime:j,formattedTime:I,currentSlide:r,nextSlide:F,previousSlide:O,totalSlides:T,progress:M,canGoNext:R,canGoPrevious:H,startPresentation:c,stopPresentation:_,togglePresenterView:N,goToSlide:G,nextSlideNav:J,previousSlideNav:V,firstSlide:we,lastSlide:$e,startTimer:_e,pauseTimer:je,resetTimer:Ae,setTransition:Oe,getTransitionClasses:We}}const bd=`
/* Fade transition */
.transition-fade-enter {
  animation: fadeIn var(--transition-duration, 300ms) ease-out;
}
.transition-fade-leave {
  animation: fadeOut var(--transition-duration, 300ms) ease-in;
}

@keyframes fadeIn {
  from { opacity: 0; }
  to { opacity: 1; }
}
@keyframes fadeOut {
  from { opacity: 1; }
  to { opacity: 0; }
}

/* Slide transitions */
.transition-slide-enter-right {
  animation: slideInRight var(--transition-duration, 300ms) ease-out;
}
.transition-slide-enter-left {
  animation: slideInLeft var(--transition-duration, 300ms) ease-out;
}
.transition-slide-leave-left {
  animation: slideOutLeft var(--transition-duration, 300ms) ease-in;
}
.transition-slide-leave-right {
  animation: slideOutRight var(--transition-duration, 300ms) ease-in;
}
.transition-slide-enter-up {
  animation: slideInUp var(--transition-duration, 300ms) ease-out;
}
.transition-slide-leave-down {
  animation: slideOutDown var(--transition-duration, 300ms) ease-in;
}

@keyframes slideInRight {
  from { transform: translateX(100%); opacity: 0; }
  to { transform: translateX(0); opacity: 1; }
}
@keyframes slideInLeft {
  from { transform: translateX(-100%); opacity: 0; }
  to { transform: translateX(0); opacity: 1; }
}
@keyframes slideOutLeft {
  from { transform: translateX(0); opacity: 1; }
  to { transform: translateX(-100%); opacity: 0; }
}
@keyframes slideOutRight {
  from { transform: translateX(0); opacity: 1; }
  to { transform: translateX(100%); opacity: 0; }
}
@keyframes slideInUp {
  from { transform: translateY(100%); opacity: 0; }
  to { transform: translateY(0); opacity: 1; }
}
@keyframes slideOutDown {
  from { transform: translateY(0); opacity: 1; }
  to { transform: translateY(100%); opacity: 0; }
}

/* Zoom transition */
.transition-zoom-enter {
  animation: zoomIn var(--transition-duration, 300ms) ease-out;
}
.transition-zoom-leave {
  animation: zoomOut var(--transition-duration, 300ms) ease-in;
}
.transition-zoom-enter-reverse {
  animation: zoomInReverse var(--transition-duration, 300ms) ease-out;
}
.transition-zoom-leave-reverse {
  animation: zoomOutReverse var(--transition-duration, 300ms) ease-in;
}

@keyframes zoomIn {
  from { transform: scale(0.8); opacity: 0; }
  to { transform: scale(1); opacity: 1; }
}
@keyframes zoomOut {
  from { transform: scale(1); opacity: 1; }
  to { transform: scale(1.2); opacity: 0; }
}
@keyframes zoomInReverse {
  from { transform: scale(1.2); opacity: 0; }
  to { transform: scale(1); opacity: 1; }
}
@keyframes zoomOutReverse {
  from { transform: scale(1); opacity: 1; }
  to { transform: scale(0.8); opacity: 0; }
}

/* Flip transition */
.transition-flip-enter {
  animation: flipIn var(--transition-duration, 300ms) ease-out;
}
.transition-flip-leave {
  animation: flipOut var(--transition-duration, 300ms) ease-in;
}

@keyframes flipIn {
  from { transform: rotateY(-90deg); opacity: 0; }
  to { transform: rotateY(0); opacity: 1; }
}
@keyframes flipOut {
  from { transform: rotateY(0); opacity: 1; }
  to { transform: rotateY(90deg); opacity: 0; }
}
`;function Dn(L){const x=window.crypto||window.msCrypto,n=()=>x.randomUUID();return{id:n(),title:L.name,elements:L.elements.map(f=>({...f,id:n()})),backgroundColor:L.backgroundColor||"#FFFFFF",backgroundImage:L.backgroundImage}}const yd={id:"title-centered",name:"Title Slide",description:"Centered title with subtitle",category:"title",backgroundColor:"#1E1B4B",elements:[{type:"text",x:10,y:35,width:80,height:15,text:{content:"Presentation Title",fontFamily:"Inter",fontSize:48,fontWeight:"bold",fontStyle:"normal",textAlign:"center",color:"#FFFFFF",lineHeight:1.2,letterSpacing:-.5}},{type:"text",x:15,y:52,width:70,height:8,text:{content:"Subtitle or Author Name",fontFamily:"Inter",fontSize:24,fontWeight:"normal",fontStyle:"normal",textAlign:"center",color:"#A5B4FC",lineHeight:1.4,letterSpacing:0}},{type:"shape",x:35,y:48,width:30,height:.5,shapeType:"rectangle",fill:"#6366F1",stroke:"transparent",strokeWidth:0}]},wd={id:"title-with-image",name:"Title with Image",description:"Title slide with background image area",category:"title",backgroundColor:"#0F172A",elements:[{type:"shape",x:50,y:0,width:50,height:100,shapeType:"rectangle",fill:"#1E293B",stroke:"transparent",strokeWidth:0},{type:"text",x:5,y:30,width:42,height:20,text:{content:"Your Title Here",fontFamily:"Inter",fontSize:42,fontWeight:"bold",fontStyle:"normal",textAlign:"left",color:"#FFFFFF",lineHeight:1.2,letterSpacing:-.5}},{type:"text",x:5,y:52,width:42,height:10,text:{content:"Supporting description text goes here",fontFamily:"Inter",fontSize:18,fontWeight:"normal",fontStyle:"normal",textAlign:"left",color:"#94A3B8",lineHeight:1.5,letterSpacing:0}}]},kd={id:"bullet-points",name:"Bullet Points",description:"Title with bullet list",category:"content",backgroundColor:"#FFFFFF",elements:[{type:"text",x:5,y:8,width:90,height:12,text:{content:"Section Title",fontFamily:"Inter",fontSize:36,fontWeight:"bold",fontStyle:"normal",textAlign:"left",color:"#1E293B",lineHeight:1.2,letterSpacing:-.3}},{type:"text",x:5,y:25,width:90,height:60,text:{content:`• First key point about your topic

• Second important insight or finding

• Third supporting argument

• Fourth conclusion or recommendation`,fontFamily:"Inter",fontSize:22,fontWeight:"normal",fontStyle:"normal",textAlign:"left",color:"#334155",lineHeight:1.6,letterSpacing:0}}]},_d={id:"content-with-image",name:"Content + Image",description:"Text content with image on right",category:"content",backgroundColor:"#FFFFFF",elements:[{type:"text",x:5,y:8,width:50,height:10,text:{content:"Section Title",fontFamily:"Inter",fontSize:32,fontWeight:"bold",fontStyle:"normal",textAlign:"left",color:"#1E293B",lineHeight:1.2,letterSpacing:-.3}},{type:"text",x:5,y:22,width:48,height:65,text:{content:`Add your detailed explanation here. This layout is perfect for when you need to combine textual content with a visual element.

• Supporting point one
• Supporting point two
• Supporting point three`,fontFamily:"Inter",fontSize:18,fontWeight:"normal",fontStyle:"normal",textAlign:"left",color:"#475569",lineHeight:1.6,letterSpacing:0}},{type:"shape",x:55,y:15,width:40,height:70,shapeType:"rectangle",fill:"#F1F5F9",stroke:"#E2E8F0",strokeWidth:1},{type:"text",x:55,y:45,width:40,height:10,text:{content:"Image Placeholder",fontFamily:"Inter",fontSize:14,fontWeight:"normal",fontStyle:"normal",textAlign:"center",color:"#94A3B8",lineHeight:1.4,letterSpacing:0}}]},Sd={id:"two-column",name:"Two Columns",description:"Split content in two columns",category:"content",backgroundColor:"#FFFFFF",elements:[{type:"text",x:5,y:8,width:90,height:10,text:{content:"Two-Column Layout",fontFamily:"Inter",fontSize:32,fontWeight:"bold",fontStyle:"normal",textAlign:"left",color:"#1E293B",lineHeight:1.2,letterSpacing:-.3}},{type:"text",x:5,y:22,width:43,height:8,text:{content:"Left Column",fontFamily:"Inter",fontSize:20,fontWeight:"bold",fontStyle:"normal",textAlign:"left",color:"#6366F1",lineHeight:1.3,letterSpacing:0}},{type:"text",x:5,y:32,width:43,height:55,text:{content:`• Point one

• Point two

• Point three`,fontFamily:"Inter",fontSize:18,fontWeight:"normal",fontStyle:"normal",textAlign:"left",color:"#475569",lineHeight:1.5,letterSpacing:0}},{type:"text",x:52,y:22,width:43,height:8,text:{content:"Right Column",fontFamily:"Inter",fontSize:20,fontWeight:"bold",fontStyle:"normal",textAlign:"left",color:"#6366F1",lineHeight:1.3,letterSpacing:0}},{type:"text",x:52,y:32,width:43,height:55,text:{content:`• Point one

• Point two

• Point three`,fontFamily:"Inter",fontSize:18,fontWeight:"normal",fontStyle:"normal",textAlign:"left",color:"#475569",lineHeight:1.5,letterSpacing:0}}]},zd={id:"comparison",name:"Comparison",description:"Side-by-side comparison",category:"comparison",backgroundColor:"#FFFFFF",elements:[{type:"text",x:5,y:8,width:90,height:10,text:{content:"Comparison",fontFamily:"Inter",fontSize:32,fontWeight:"bold",fontStyle:"normal",textAlign:"center",color:"#1E293B",lineHeight:1.2,letterSpacing:-.3}},{type:"shape",x:5,y:22,width:43,height:70,shapeType:"rectangle",fill:"#DCFCE7",stroke:"#22C55E",strokeWidth:2,cornerRadius:8},{type:"text",x:7,y:25,width:39,height:8,text:{content:"Option A",fontFamily:"Inter",fontSize:22,fontWeight:"bold",fontStyle:"normal",textAlign:"center",color:"#166534",lineHeight:1.3,letterSpacing:0}},{type:"text",x:7,y:36,width:39,height:50,text:{content:`• Advantage 1
• Advantage 2
• Advantage 3`,fontFamily:"Inter",fontSize:16,fontWeight:"normal",fontStyle:"normal",textAlign:"left",color:"#15803D",lineHeight:1.8,letterSpacing:0}},{type:"shape",x:52,y:22,width:43,height:70,shapeType:"rectangle",fill:"#FEE2E2",stroke:"#EF4444",strokeWidth:2,cornerRadius:8},{type:"text",x:54,y:25,width:39,height:8,text:{content:"Option B",fontFamily:"Inter",fontSize:22,fontWeight:"bold",fontStyle:"normal",textAlign:"center",color:"#991B1B",lineHeight:1.3,letterSpacing:0}},{type:"text",x:54,y:36,width:39,height:50,text:{content:`• Disadvantage 1
• Disadvantage 2
• Disadvantage 3`,fontFamily:"Inter",fontSize:16,fontWeight:"normal",fontStyle:"normal",textAlign:"left",color:"#B91C1C",lineHeight:1.8,letterSpacing:0}}]},Cd={id:"pros-cons",name:"Pros & Cons",description:"Advantages vs disadvantages",category:"comparison",backgroundColor:"#F8FAFC",elements:[{type:"text",x:5,y:8,width:90,height:10,text:{content:"Pros & Cons Analysis",fontFamily:"Inter",fontSize:32,fontWeight:"bold",fontStyle:"normal",textAlign:"center",color:"#1E293B",lineHeight:1.2,letterSpacing:-.3}},{type:"text",x:5,y:22,width:43,height:8,text:{content:"✓ Pros",fontFamily:"Inter",fontSize:24,fontWeight:"bold",fontStyle:"normal",textAlign:"left",color:"#16A34A",lineHeight:1.3,letterSpacing:0}},{type:"text",x:5,y:33,width:43,height:55,text:{content:`• First advantage

• Second advantage

• Third advantage`,fontFamily:"Inter",fontSize:18,fontWeight:"normal",fontStyle:"normal",textAlign:"left",color:"#334155",lineHeight:1.5,letterSpacing:0}},{type:"text",x:52,y:22,width:43,height:8,text:{content:"✗ Cons",fontFamily:"Inter",fontSize:24,fontWeight:"bold",fontStyle:"normal",textAlign:"left",color:"#DC2626",lineHeight:1.3,letterSpacing:0}},{type:"text",x:52,y:33,width:43,height:55,text:{content:`• First disadvantage

• Second disadvantage

• Third disadvantage`,fontFamily:"Inter",fontSize:18,fontWeight:"normal",fontStyle:"normal",textAlign:"left",color:"#334155",lineHeight:1.5,letterSpacing:0}}]},$d={id:"chart-placeholder",name:"Chart Slide",description:"Title with chart area",category:"data",backgroundColor:"#FFFFFF",elements:[{type:"text",x:5,y:5,width:90,height:10,text:{content:"Data Visualization",fontFamily:"Inter",fontSize:32,fontWeight:"bold",fontStyle:"normal",textAlign:"left",color:"#1E293B",lineHeight:1.2,letterSpacing:-.3}},{type:"chart",x:10,y:20,width:80,height:65,chart:{chartType:"bar",title:"",labels:["Q1","Q2","Q3","Q4"],datasets:[{label:"Series A",data:[65,78,90,81],backgroundColor:["#6366F1","#8B5CF6","#A855F7","#D946EF"]}],showLegend:!0,showGrid:!0}}]},Fd={id:"stats",name:"Key Statistics",description:"Highlight key numbers",category:"data",backgroundColor:"#0F172A",elements:[{type:"text",x:5,y:8,width:90,height:10,text:{content:"Key Findings",fontFamily:"Inter",fontSize:32,fontWeight:"bold",fontStyle:"normal",textAlign:"center",color:"#F8FAFC",lineHeight:1.2,letterSpacing:-.3}},{type:"text",x:5,y:30,width:28,height:15,text:{content:"85%",fontFamily:"Inter",fontSize:56,fontWeight:"bold",fontStyle:"normal",textAlign:"center",color:"#6366F1",lineHeight:1,letterSpacing:-1}},{type:"text",x:5,y:48,width:28,height:10,text:{content:"Success Rate",fontFamily:"Inter",fontSize:16,fontWeight:"normal",fontStyle:"normal",textAlign:"center",color:"#94A3B8",lineHeight:1.4,letterSpacing:0}},{type:"text",x:36,y:30,width:28,height:15,text:{content:"2.5x",fontFamily:"Inter",fontSize:56,fontWeight:"bold",fontStyle:"normal",textAlign:"center",color:"#22C55E",lineHeight:1,letterSpacing:-1}},{type:"text",x:36,y:48,width:28,height:10,text:{content:"Improvement",fontFamily:"Inter",fontSize:16,fontWeight:"normal",fontStyle:"normal",textAlign:"center",color:"#94A3B8",lineHeight:1.4,letterSpacing:0}},{type:"text",x:67,y:30,width:28,height:15,text:{content:"500+",fontFamily:"Inter",fontSize:56,fontWeight:"bold",fontStyle:"normal",textAlign:"center",color:"#F59E0B",lineHeight:1,letterSpacing:-1}},{type:"text",x:67,y:48,width:28,height:10,text:{content:"Participants",fontFamily:"Inter",fontSize:16,fontWeight:"normal",fontStyle:"normal",textAlign:"center",color:"#94A3B8",lineHeight:1.4,letterSpacing:0}}]},Id={id:"table",name:"Table Layout",description:"Data table presentation",category:"data",backgroundColor:"#FFFFFF",elements:[{type:"text",x:5,y:5,width:90,height:10,text:{content:"Data Overview",fontFamily:"Inter",fontSize:32,fontWeight:"bold",fontStyle:"normal",textAlign:"left",color:"#1E293B",lineHeight:1.2,letterSpacing:-.3}},{type:"table",x:5,y:20,width:90,height:65,table:{title:"",columns:[{key:"category",label:"Category"},{key:"value1",label:"Value 1"},{key:"value2",label:"Value 2"},{key:"change",label:"Change"}],rows:[{category:"Item A",value1:"100",value2:"120",change:"+20%"},{category:"Item B",value1:"85",value2:"95",change:"+12%"},{category:"Item C",value1:"92",value2:"88",change:"-4%"},{category:"Item D",value1:"78",value2:"105",change:"+35%"}],headerBackground:"#F1F5F9",headerColor:"#1E293B",alternateRowColors:!0}}]},Td={id:"thank-you",name:"Thank You",description:"Closing slide",category:"ending",backgroundColor:"#1E1B4B",elements:[{type:"text",x:10,y:35,width:80,height:15,text:{content:"Thank You",fontFamily:"Inter",fontSize:64,fontWeight:"bold",fontStyle:"normal",textAlign:"center",color:"#FFFFFF",lineHeight:1.1,letterSpacing:-1}},{type:"text",x:15,y:55,width:70,height:10,text:{content:"Questions & Discussion",fontFamily:"Inter",fontSize:24,fontWeight:"normal",fontStyle:"normal",textAlign:"center",color:"#A5B4FC",lineHeight:1.4,letterSpacing:0}}]},Ed={id:"questions",name:"Q&A Slide",description:"Questions and answers",category:"ending",backgroundColor:"#0F172A",elements:[{type:"shape",x:35,y:25,width:30,height:30,shapeType:"circle",fill:"#312E81",stroke:"#6366F1",strokeWidth:3},{type:"text",x:35,y:32,width:30,height:15,text:{content:"?",fontFamily:"Inter",fontSize:72,fontWeight:"bold",fontStyle:"normal",textAlign:"center",color:"#A5B4FC",lineHeight:1,letterSpacing:0}},{type:"text",x:10,y:65,width:80,height:10,text:{content:"Questions?",fontFamily:"Inter",fontSize:36,fontWeight:"bold",fontStyle:"normal",textAlign:"center",color:"#F8FAFC",lineHeight:1.2,letterSpacing:-.3}},{type:"text",x:15,y:78,width:70,height:8,text:{content:"I'm happy to answer any questions",fontFamily:"Inter",fontSize:18,fontWeight:"normal",fontStyle:"normal",textAlign:"center",color:"#64748B",lineHeight:1.4,letterSpacing:0}}]},Ad={id:"contact",name:"Contact Info",description:"Contact details slide",category:"ending",backgroundColor:"#FFFFFF",elements:[{type:"text",x:10,y:20,width:80,height:12,text:{content:"Get in Touch",fontFamily:"Inter",fontSize:40,fontWeight:"bold",fontStyle:"normal",textAlign:"center",color:"#1E293B",lineHeight:1.2,letterSpacing:-.5}},{type:"text",x:20,y:40,width:60,height:40,text:{content:`email@example.com

linkedin.com/in/yourname

yourwebsite.com`,fontFamily:"Inter",fontSize:20,fontWeight:"normal",fontStyle:"normal",textAlign:"center",color:"#6366F1",lineHeight:2,letterSpacing:0}}]};function jd(){const L=E([yd,wd,kd,_d,Sd,zd,Cd,$d,Fd,Id,Td,Ed,Ad]),x=le(()=>[{category:"title",label:"Title Slides",description:"Opening and section headers",templates:L.value.filter(b=>b.category==="title")},{category:"content",label:"Content",description:"Main content layouts",templates:L.value.filter(b=>b.category==="content")},{category:"comparison",label:"Comparison",description:"Compare options or data",templates:L.value.filter(b=>b.category==="comparison")},{category:"data",label:"Data & Charts",description:"Visualize data and statistics",templates:L.value.filter(b=>b.category==="data")},{category:"ending",label:"Ending",description:"Closing and Q&A slides",templates:L.value.filter(b=>b.category==="ending")}]);function n(b){return L.value.find(w=>w.id===b)}function f(b){return L.value.filter(w=>w.category===b)}function d(b){const w=n(b);return w?Dn(w):null}function h(){return{id:(window.crypto||window.msCrypto).randomUUID(),title:"Blank Slide",elements:[],backgroundColor:"#FFFFFF"}}return{allTemplates:L,templateGroups:x,getTemplateById:n,getTemplatesByCategory:f,createSlideFromTemplate:d,createBlankSlide:h,instantiateTemplate:Dn}}const Bd={class:"mb-3"},Dd={key:0,class:"flex items-center justify-center py-8"},Pd={key:1,class:"grid grid-cols-2 gap-3"},Md=["onMouseenter","onClick"],Ld={class:"w-full h-full p-2 flex flex-col"},Od={class:"flex-1 space-y-1"},Wd={class:"flex justify-end mt-1"},Rd={class:"text-left"},Hd={class:"flex items-center gap-1"},Nd={class:"text-sm font-medium"},Ud={class:"text-xs text-muted-foreground line-clamp-1"},Gd={class:"flex gap-1 mt-2"},Xd=["title"],Vd=["title"],Yd=["title"],qd=["title"],Kd={class:"mt-4 pt-4 border-t"},Jd={class:"flex items-center gap-2 text-sm"},Qd={class:"flex justify-end mt-3"},Zd={key:2,class:"mt-3 pt-3 border-t text-xs text-muted-foreground"},ec={class:"space-y-0.5"},tc=Ve({__name:"ThemeSelector",props:{currentThemeId:{default:"modern"}},emits:["select","apply"],setup(L,{emit:x}){const n=L,f=x,d=E(!1),h=E(null),b=E(!0),w=Kn();St(()=>{w.loadThemes()});const k=le(()=>w.themes.value),$=le(()=>w.isLoading.value);function j(F){f("select",F)}function z(F){f("apply",F,b.value),d.value=!1}function r(F){return{backgroundColor:F.colors.background,borderColor:F.colors.primary}}return(F,O)=>(l(),me(t(bn),{open:d.value,"onUpdate:open":O[3]||(O[3]=T=>d.value=T)},{default:C(()=>[s(t(yn),{"as-child":""},{default:C(()=>[s(t(ae),{variant:"outline",size:"sm",class:"gap-2"},{default:C(()=>[s(t(Nn),{class:"w-4 h-4"}),O[4]||(O[4]=e("span",null,"Themes",-1))]),_:1})]),_:1}),s(t(wn),{class:"w-96 p-4",align:"end"},{default:C(()=>[e("div",Bd,[s(t(Ct),{class:"text-sm font-medium"},{default:C(()=>[...O[5]||(O[5]=[se("Choose a Theme",-1)])]),_:1}),O[6]||(O[6]=e("p",{class:"text-xs text-muted-foreground mt-1"}," Select a professional theme for your presentation ",-1))]),$.value?(l(),a("div",Dd,[s(t(El),{class:"w-6 h-6 animate-spin text-muted-foreground"})])):(l(),a("div",Pd,[(l(!0),a(ee,null,oe(k.value,T=>(l(),a("button",{key:T.id,type:"button",class:ge(["relative group rounded-lg border-2 p-2 transition-all hover:shadow-md focus:outline-none focus:ring-2 focus:ring-ring",{"border-primary ring-2 ring-primary/20":n.currentThemeId===T.id,"border-gray-200 hover:border-gray-300":n.currentThemeId!==T.id}]),onMouseenter:M=>h.value=T.id,onMouseleave:O[0]||(O[0]=M=>h.value=null),onClick:M=>j(T.id)},[e("div",{class:"aspect-video rounded overflow-hidden mb-2",style:re(r(T))},[e("div",Ld,[e("div",{class:"h-1.5 w-2/3 rounded mb-1",style:re({backgroundColor:T.colors.primary})},null,4),e("div",{class:"h-1 w-1/2 rounded mb-2",style:re({backgroundColor:T.colors.textSecondary})},null,4),e("div",Od,[e("div",{class:"h-0.5 w-full rounded",style:re({backgroundColor:T.colors.text+"40"})},null,4),e("div",{class:"h-0.5 w-4/5 rounded",style:re({backgroundColor:T.colors.text+"40"})},null,4),e("div",{class:"h-0.5 w-3/4 rounded",style:re({backgroundColor:T.colors.text+"40"})},null,4)]),e("div",Wd,[e("div",{class:"w-3 h-3 rounded-sm",style:re({backgroundColor:T.colors.accent})},null,4)])])],4),e("div",Rd,[e("div",Hd,[e("span",Nd,B(T.name),1),n.currentThemeId===T.id?(l(),me(t(pn),{key:0,class:"w-3.5 h-3.5 text-primary"})):Y("",!0)]),e("p",Ud,B(T.description),1)]),e("div",Gd,[e("span",{class:"w-4 h-4 rounded-full border border-white shadow-sm",style:re({backgroundColor:T.colors.primary}),title:"Primary: "+T.colors.primary},null,12,Xd),e("span",{class:"w-4 h-4 rounded-full border border-white shadow-sm",style:re({backgroundColor:T.colors.secondary}),title:"Secondary: "+T.colors.secondary},null,12,Vd),e("span",{class:"w-4 h-4 rounded-full border border-white shadow-sm",style:re({backgroundColor:T.colors.accent}),title:"Accent: "+T.colors.accent},null,12,Yd),e("span",{class:"w-4 h-4 rounded-full border border-gray-200 shadow-sm",style:re({backgroundColor:T.colors.background}),title:"Background: "+T.colors.background},null,12,qd)])],42,Md))),128))])),e("div",Kd,[e("label",Jd,[ct(e("input",{type:"checkbox","onUpdate:modelValue":O[1]||(O[1]=T=>b.value=T),class:"rounded border-gray-300 text-primary focus:ring-primary"},null,512),[[Al,b.value]]),O[7]||(O[7]=e("span",null,"Apply to all slides",-1))]),e("div",Qd,[s(t(ae),{size:"sm",disabled:!n.currentThemeId,onClick:O[2]||(O[2]=T=>z(n.currentThemeId))},{default:C(()=>[...O[8]||(O[8]=[se(" Apply Theme ",-1)])]),_:1},8,["disabled"])])]),h.value&&k.value.find(T=>T.id===h.value)?(l(),a("div",Zd,[O[9]||(O[9]=e("div",{class:"flex items-center justify-between mb-1"},[e("span",{class:"font-medium"},"Fonts")],-1)),e("div",ec,[e("div",null," Headings: "+B(k.value.find(T=>T.id===h.value)?.fonts.heading.family),1),e("div",null," Body: "+B(k.value.find(T=>T.id===h.value)?.fonts.body.family),1)])])):Y("",!0)]),_:1})]),_:1},8,["open"]))}}),nc={class:"relative w-full h-full"},lc=["src"],sc={key:0,class:"controls-overlay"},oc={class:"absolute top-0 left-0 right-0 p-4 flex items-center justify-between bg-gradient-to-b from-black/50 to-transparent"},ac={class:"text-white/80 text-sm font-medium"},ic={class:"flex items-center gap-2"},rc={class:"relative"},dc={key:0,class:"absolute right-0 top-full mt-2 w-48 bg-zinc-800 rounded-lg shadow-xl overflow-hidden"},cc={class:"p-2"},uc=["onClick"],fc={class:"absolute bottom-0 left-0 right-0 p-4 bg-gradient-to-t from-black/50 to-transparent"},pc={class:"h-1 bg-white/20 rounded-full overflow-hidden mb-4"},gc={class:"flex items-center justify-center gap-4"},vc=["disabled"],hc=["disabled"],xc=Ve({__name:"PresentationMode",props:{slides:{},initialSlideIndex:{default:0},showControls:{type:Boolean,default:!0}},emits:["close","slide-change","open-presenter-view"],setup(L,{emit:x}){const n=L,f=x,d=Jn({slides:le(()=>n.slides),initialSlideIndex:n.initialSlideIndex,defaultTransition:{type:"fade",duration:300}}),h=E(!0),b=E(!1),w=E(!1);let k=null;const $=E(null),j=[{value:"none",label:"None"},{value:"fade",label:"Fade"},{value:"slide-left",label:"Slide"},{value:"zoom",label:"Zoom"},{value:"flip",label:"Flip"}];let z=0,r=0;function F(G){z=G.touches[0].clientX,r=G.touches[0].clientY}function O(G){const J=G.changedTouches[0].clientX,V=G.changedTouches[0].clientY,we=J-z,$e=V-r;Math.abs(we)>50&&Math.abs(we)>Math.abs($e)&&(we<0?T():M())}async function T(){!d.canGoNext.value||w.value||(w.value=!0,d.nextSlideNav(),await new Promise(G=>setTimeout(G,d.transition.value.duration)),w.value=!1)}async function M(){!d.canGoPrevious.value||w.value||(w.value=!0,d.previousSlideNav(),await new Promise(G=>setTimeout(G,d.transition.value.duration)),w.value=!1)}function R(G){switch(h.value=!0,I(),G.key){case"ArrowRight":case"ArrowDown":case" ":case"PageDown":case"Enter":G.preventDefault(),T();break;case"ArrowLeft":case"ArrowUp":case"PageUp":case"Backspace":G.preventDefault(),M();break;case"Home":G.preventDefault(),d.firstSlide();break;case"End":G.preventDefault(),d.lastSlide();break;case"Escape":G.preventDefault(),f("close");break;case"p":case"P":G.preventDefault(),f("open-presenter-view");break}}function H(){h.value=!0,I()}function I(){k&&clearTimeout(k),k=setTimeout(()=>{h.value=!1,b.value=!1},3e3)}async function c(){try{await document.documentElement.requestFullscreen()}catch{}}async function _(){try{document.fullscreenElement&&await document.exitFullscreen()}catch{}}function N(G){d.setTransition({type:G})}return Le(()=>d.currentSlideIndex.value,G=>{f("slide-change",G)}),St(()=>{window.addEventListener("keydown",R),d.startPresentation(n.initialSlideIndex),c(),I()}),Ot(()=>{window.removeEventListener("keydown",R),k&&clearTimeout(k),_()}),(G,J)=>(l(),a("div",{class:"presentation-mode fixed inset-0 z-50 bg-black",onMousemove:H,onTouchstart:F,onTouchend:O},[(l(),me(gn("style"),{innerHTML:t(bd)},null,8,["innerHTML"])),e("div",{ref_key:"slideContainerRef",ref:$,class:"absolute inset-0 flex items-center justify-center",style:re({"--transition-duration":`${t(d).transition.value.duration}ms`})},[t(d).currentSlide.value?(l(),a("div",{key:t(d).currentSlideIndex.value,class:ge(["slide-display aspect-video bg-white shadow-2xl overflow-hidden",t(d).getTransitionClasses().enter]),style:re({backgroundColor:t(d).currentSlide.value.backgroundColor||"#FFFFFF",maxWidth:"95vw",maxHeight:"95vh"})},[e("div",nc,[(l(!0),a(ee,null,oe(t(d).currentSlide.value.elements,V=>(l(),a("div",{key:V.id,class:"absolute",style:re({left:`${V.x}%`,top:`${V.y}%`,width:`${V.width}%`,height:`${V.height}%`,transform:`rotate(${V.rotation||0}deg)`,opacity:V.opacity??1,zIndex:V.zIndex||0})},[V.type==="text"&&V.text?(l(),a("div",{key:0,class:"w-full h-full overflow-hidden whitespace-pre-wrap",style:re({fontFamily:V.text.fontFamily,fontSize:`${V.text.fontSize}px`,fontWeight:V.text.fontWeight,fontStyle:V.text.fontStyle,textDecoration:V.text.textDecoration||"none",color:V.text.color,textAlign:V.text.textAlign,lineHeight:V.text.lineHeight})},B(V.text.content),5)):V.type==="shape"?(l(),a("div",{key:1,class:"w-full h-full",style:re({backgroundColor:V.fill,border:V.stroke?`${V.strokeWidth||1}px solid ${V.stroke}`:"none",borderRadius:V.shape?.shapeType==="circle"?"50%":V.shape?.shapeType==="rounded-rectangle"?"12px":"0"})},null,4)):V.type==="image"&&V.image?.url?(l(),a("img",{key:2,src:V.image.url,class:"w-full h-full",style:re({objectFit:V.image.fit||"contain"}),alt:""},null,12,lc)):Y("",!0)],4))),128))])],6)):Y("",!0)],4),s(Zt,{name:"fade"},{default:C(()=>[h.value&&G.showControls?(l(),a("div",sc,[e("div",oc,[e("div",ac,B(t(d).currentSlideIndex.value+1)+" / "+B(t(d).totalSlides.value),1),e("div",ic,[e("div",rc,[e("button",{class:"p-2 text-white/80 hover:text-white hover:bg-white/10 rounded-lg transition-colors",title:"Settings",onClick:J[0]||(J[0]=V=>b.value=!b.value)},[s(t(jl),{class:"w-5 h-5"})]),b.value?(l(),a("div",dc,[J[3]||(J[3]=e("div",{class:"px-3 py-2 border-b border-zinc-700 text-xs text-zinc-400 uppercase"}," Transition ",-1)),e("div",cc,[(l(),a(ee,null,oe(j,V=>e("button",{key:V.value,class:ge(["w-full px-3 py-2 text-left text-sm rounded hover:bg-zinc-700 transition-colors",t(d).transition.value.type===V.value?"text-indigo-400 bg-zinc-700":"text-white"]),onClick:we=>N(V.value)},B(V.label),11,uc)),64))])])):Y("",!0)]),e("button",{class:"p-2 text-white/80 hover:text-white hover:bg-white/10 rounded-lg transition-colors",title:"Presenter View (P)",onClick:J[1]||(J[1]=V=>f("open-presenter-view"))},[s(t(Gn),{class:"w-5 h-5"})]),e("button",{class:"p-2 text-white/80 hover:text-white hover:bg-white/10 rounded-lg transition-colors",title:"Exit (Esc)",onClick:J[2]||(J[2]=V=>f("close"))},[s(t(Qt),{class:"w-5 h-5"})])])]),e("div",fc,[e("div",pc,[e("div",{class:"h-full bg-white transition-all duration-300",style:re({width:`${t(d).progress.value}%`})},null,4)]),e("div",gc,[e("button",{class:"p-3 text-white/80 hover:text-white hover:bg-white/10 rounded-full transition-colors disabled:opacity-30 disabled:cursor-not-allowed",disabled:!t(d).canGoPrevious.value,onClick:M},[s(t(mt),{class:"w-8 h-8"})],8,vc),e("button",{class:"p-3 text-white/80 hover:text-white hover:bg-white/10 rounded-full transition-colors disabled:opacity-30 disabled:cursor-not-allowed",disabled:!t(d).canGoNext.value,onClick:T},[s(t(Qe),{class:"w-8 h-8"})],8,hc)])]),t(d).canGoPrevious.value?(l(),a("button",{key:0,class:"absolute left-0 top-1/2 -translate-y-1/2 w-20 h-full opacity-0 hover:opacity-100 transition-opacity bg-gradient-to-r from-black/30 to-transparent flex items-center justify-start pl-4",onClick:M},[s(t(mt),{class:"w-8 h-8 text-white/60"})])):Y("",!0),t(d).canGoNext.value?(l(),a("button",{key:1,class:"absolute right-0 top-1/2 -translate-y-1/2 w-20 h-full opacity-0 hover:opacity-100 transition-opacity bg-gradient-to-l from-black/30 to-transparent flex items-center justify-end pr-4",onClick:T},[s(t(Qe),{class:"w-8 h-8 text-white/60"})])):Y("",!0)])):Y("",!0)]),_:1})],32))}}),mc=ut(xc,[["__scopeId","data-v-bb3224a4"]]),bc={class:"presenter-view fixed inset-0 z-50 bg-zinc-900 flex"},yc={class:"flex-1 flex flex-col p-4 border-r border-zinc-700"},wc={class:"flex-1 flex items-center justify-center bg-black rounded-lg overflow-hidden"},kc={class:"relative w-full h-full"},_c=["src"],Sc={class:"flex items-center justify-between px-4 py-2 border-b border-zinc-700"},zc={class:"flex items-center gap-2 text-zinc-300"},Cc={class:"p-4 overflow-y-auto h-full text-zinc-300 text-sm whitespace-pre-wrap"},$c={class:"w-80 flex flex-col p-4"},Fc={class:"flex justify-end mb-4"},Ic={class:"bg-zinc-800 rounded-lg p-4 mb-4"},Tc={class:"flex items-center gap-2 text-zinc-400 mb-2"},Ec={class:"text-4xl font-mono text-white mb-3"},Ac={class:"flex gap-2"},jc={class:"bg-zinc-800 rounded-lg p-4 mb-4"},Bc={class:"flex items-center justify-between mb-3"},Dc=["disabled"],Pc={class:"text-center"},Mc={class:"text-2xl font-bold text-white"},Lc={class:"text-xs text-zinc-400"},Oc=["disabled"],Wc={class:"h-1 bg-zinc-700 rounded-full overflow-hidden"},Rc={class:"flex-1 bg-zinc-800 rounded-lg overflow-hidden"},Hc={class:"p-4 flex items-center justify-center h-full"},Nc={class:"relative w-full h-full transform scale-50 origin-top-left",style:{width:"200%",height:"200%"}},Uc={key:1,class:"text-zinc-500 text-sm text-center"},Gc=Ve({__name:"PresenterView",props:{slides:{},initialSlideIndex:{default:0}},emits:["close","slide-change"],setup(L,{emit:x}){const n=L,f=x,d=Jn({slides:le(()=>n.slides),initialSlideIndex:n.initialSlideIndex}),h=E(!0),b=E(!1),w=le(()=>d.currentSlide.value?.speaker_notes||"No speaker notes for this slide.");function k(j){switch(j.key){case"ArrowRight":case"ArrowDown":case" ":case"PageDown":j.preventDefault(),d.nextSlideNav();break;case"ArrowLeft":case"ArrowUp":case"PageUp":j.preventDefault(),d.previousSlideNav();break;case"Home":j.preventDefault(),d.firstSlide();break;case"End":j.preventDefault(),d.lastSlide();break;case"Escape":j.preventDefault(),f("close");break}}function $(){d.isPaused.value?d.startTimer():d.pauseTimer()}return Le(()=>d.currentSlideIndex.value,j=>{f("slide-change",j)}),St(()=>{window.addEventListener("keydown",k),d.startTimer()}),Ot(()=>{window.removeEventListener("keydown",k),d.pauseTimer()}),(j,z)=>(l(),a("div",bc,[e("div",yc,[e("div",wc,[e("div",{class:"slide-container aspect-video bg-white rounded shadow-2xl overflow-hidden",style:re({backgroundColor:t(d).currentSlide.value?.backgroundColor||"#FFFFFF"})},[e("div",kc,[t(d).currentSlide.value?(l(!0),a(ee,{key:0},oe(t(d).currentSlide.value.elements,r=>(l(),a("div",{key:r.id,class:"absolute",style:re({left:`${r.x}%`,top:`${r.y}%`,width:`${r.width}%`,height:`${r.height}%`,transform:`rotate(${r.rotation||0}deg)`,opacity:r.opacity??1,zIndex:r.zIndex||0})},[r.type==="text"&&r.text?(l(),a("div",{key:0,class:"w-full h-full overflow-hidden",style:re({fontFamily:r.text.fontFamily,fontSize:`${r.text.fontSize*.8}px`,fontWeight:r.text.fontWeight,fontStyle:r.text.fontStyle,color:r.text.color,textAlign:r.text.textAlign,lineHeight:r.text.lineHeight})},B(r.text.content),5)):r.type==="shape"?(l(),a("div",{key:1,class:"w-full h-full",style:re({backgroundColor:r.fill,border:r.stroke?`${r.strokeWidth||1}px solid ${r.stroke}`:"none",borderRadius:r.shape?.shapeType==="circle"?"50%":r.shape?.shapeType==="rounded-rectangle"?"8px":"0"})},null,4)):r.type==="image"&&r.image?.url?(l(),a("img",{key:2,src:r.image.url,class:"w-full h-full",style:re({objectFit:r.image.fit||"contain"}),alt:""},null,12,_c)):Y("",!0)],4))),128)):Y("",!0)])],4)]),h.value?(l(),a("div",{key:0,class:ge(["mt-4 bg-zinc-800 rounded-lg overflow-hidden",b.value?"flex-1":"h-32"])},[e("div",Sc,[e("div",zc,[s(t(Un),{class:"w-4 h-4"}),z[5]||(z[5]=e("span",{class:"text-sm font-medium"},"Speaker Notes",-1))]),e("button",{class:"p-1 text-zinc-400 hover:text-white transition-colors",onClick:z[0]||(z[0]=r=>b.value=!b.value)},[s(t(Jt),{class:"w-4 h-4"})])]),e("div",Cc,B(w.value),1)],2)):Y("",!0)]),e("div",$c,[e("div",Fc,[e("button",{class:"p-2 text-zinc-400 hover:text-white hover:bg-zinc-800 rounded-lg transition-colors",title:"Close presenter view (Esc)",onClick:z[1]||(z[1]=r=>f("close"))},[s(t(Qt),{class:"w-5 h-5"})])]),e("div",Ic,[e("div",Tc,[s(t(Bl),{class:"w-4 h-4"}),z[6]||(z[6]=e("span",{class:"text-sm"},"Elapsed Time",-1))]),e("div",Ec,B(t(d).formattedTime.value),1),e("div",Ac,[e("button",{class:"flex-1 flex items-center justify-center gap-1.5 px-3 py-2 bg-zinc-700 hover:bg-zinc-600 text-white rounded transition-colors",onClick:$},[t(d).isPaused.value?(l(),me(t(mn),{key:0,class:"w-4 h-4"})):(l(),me(t(Dl),{key:1,class:"w-4 h-4"})),se(" "+B(t(d).isPaused.value?"Start":"Pause"),1)]),e("button",{class:"px-3 py-2 bg-zinc-700 hover:bg-zinc-600 text-white rounded transition-colors",title:"Reset timer",onClick:z[2]||(z[2]=(...r)=>t(d).resetTimer&&t(d).resetTimer(...r))},[s(t(Xn),{class:"w-4 h-4"})])])]),e("div",jc,[e("div",Bc,[e("button",{class:"p-2 bg-zinc-700 hover:bg-zinc-600 disabled:opacity-40 disabled:cursor-not-allowed text-white rounded transition-colors",disabled:!t(d).canGoPrevious.value,onClick:z[3]||(z[3]=(...r)=>t(d).previousSlideNav&&t(d).previousSlideNav(...r))},[s(t(mt),{class:"w-5 h-5"})],8,Dc),e("div",Pc,[e("div",Mc,B(t(d).currentSlideIndex.value+1),1),e("div",Lc," of "+B(t(d).totalSlides.value),1)]),e("button",{class:"p-2 bg-zinc-700 hover:bg-zinc-600 disabled:opacity-40 disabled:cursor-not-allowed text-white rounded transition-colors",disabled:!t(d).canGoNext.value,onClick:z[4]||(z[4]=(...r)=>t(d).nextSlideNav&&t(d).nextSlideNav(...r))},[s(t(Qe),{class:"w-5 h-5"})],8,Oc)]),e("div",Wc,[e("div",{class:"h-full bg-indigo-500 transition-all duration-300",style:re({width:`${t(d).progress.value}%`})},null,4)])]),e("div",Rc,[z[7]||(z[7]=e("div",{class:"px-4 py-2 border-b border-zinc-700 text-zinc-400 text-sm"}," Next Slide ",-1)),e("div",Hc,[t(d).nextSlide.value?(l(),a("div",{key:0,class:"aspect-video w-full bg-white rounded shadow-lg overflow-hidden",style:re({backgroundColor:t(d).nextSlide.value.backgroundColor||"#FFFFFF"})},[e("div",Nc,[(l(!0),a(ee,null,oe(t(d).nextSlide.value.elements,r=>(l(),a("div",{key:r.id,class:"absolute",style:re({left:`${r.x}%`,top:`${r.y}%`,width:`${r.width}%`,height:`${r.height}%`,opacity:r.opacity??1,zIndex:r.zIndex||0})},[r.type==="text"&&r.text?(l(),a("div",{key:0,class:"w-full h-full overflow-hidden",style:re({fontFamily:r.text.fontFamily,fontSize:`${r.text.fontSize*.4}px`,fontWeight:r.text.fontWeight,color:r.text.color,textAlign:r.text.textAlign})},B(r.text.content),5)):r.type==="shape"?(l(),a("div",{key:1,class:"w-full h-full",style:re({backgroundColor:r.fill,borderRadius:r.shape?.shapeType==="circle"?"50%":"0"})},null,4)):Y("",!0)],4))),128))])],4)):(l(),a("div",Uc," End of presentation "))])]),z[8]||(z[8]=Wn('<div class="mt-4 text-xs text-zinc-500 text-center" data-v-7c710089><span class="inline-block px-1.5 py-0.5 bg-zinc-800 rounded mr-1" data-v-7c710089>←</span><span class="inline-block px-1.5 py-0.5 bg-zinc-800 rounded mr-2" data-v-7c710089>→</span> Navigate <span class="mx-2" data-v-7c710089>|</span><span class="inline-block px-1.5 py-0.5 bg-zinc-800 rounded" data-v-7c710089>Esc</span> Close </div>',1))])]))}}),Xc=ut(Gc,[["__scopeId","data-v-7c710089"]]),Vc={class:"bg-white dark:bg-zinc-900 rounded-2xl shadow-2xl w-full max-w-4xl max-h-[85vh] flex flex-col overflow-hidden animate-in zoom-in-95 duration-200"},Yc={class:"flex items-center justify-between px-6 py-4 border-b border-zinc-200 dark:border-zinc-800"},qc={class:"flex items-center gap-3"},Kc={class:"p-2 bg-indigo-100 dark:bg-indigo-900/30 rounded-lg"},Jc={class:"flex items-center gap-2 px-6 py-3 border-b border-zinc-200 dark:border-zinc-800 overflow-x-auto"},Qc=["onClick"],Zc={class:"flex-1 overflow-y-auto p-6"},eu={class:"mb-8"},tu={class:"absolute inset-0 flex flex-col items-center justify-center bg-zinc-50 dark:bg-zinc-800/50 group-hover:bg-indigo-50 dark:group-hover:bg-indigo-900/20 transition-colors"},nu={class:"flex items-center gap-2 mb-3"},lu={class:"text-sm font-medium text-zinc-700 dark:text-zinc-300"},su={class:"text-xs text-zinc-400"},ou={class:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4"},au=["onClick"],iu={key:2,class:"w-full h-full bg-zinc-200 dark:bg-zinc-700 rounded-sm"},ru={class:"absolute inset-0 bg-gradient-to-t from-black/60 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity"},du={class:"absolute bottom-0 left-0 right-0 p-2"},cu={class:"text-xs font-medium text-white truncate"},uu=Ve({__name:"SlideTemplateGallery",props:{open:{type:Boolean}},emits:["close","select"],setup(L,{emit:x}){const n=x,{templateGroups:f,createSlideFromTemplate:d,createBlankSlide:h}=jd(),b=E("all"),w={title:Hn,content:un,comparison:Ol,data:Rn,media:qt,ending:Ll},k=le(()=>b.value==="all"?f.value:f.value.filter(r=>r.category===b.value));function $(r){const F=d(r.id);F&&(n("select",F),n("close"))}function j(){n("select",h()),n("close")}function z(r){return{backgroundColor:r.backgroundColor||"#FFFFFF"}}return(r,F)=>(l(),me(Pl,{to:"body"},[s(Zt,{name:"fade"},{default:C(()=>[r.open?(l(),a("div",{key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm",onClick:F[2]||(F[2]=dt(O=>n("close"),["self"]))},[e("div",Vc,[e("div",Yc,[e("div",qc,[e("div",Kc,[s(t(Ml),{class:"w-5 h-5 text-indigo-600 dark:text-indigo-400"})]),F[3]||(F[3]=e("div",null,[e("h2",{class:"text-lg font-semibold text-zinc-900 dark:text-zinc-100"}," Choose a Layout "),e("p",{class:"text-sm text-zinc-500 dark:text-zinc-400"}," Select a template to start with ")],-1))]),e("button",{class:"p-2 rounded-lg hover:bg-zinc-100 dark:hover:bg-zinc-800 transition-colors",onClick:F[0]||(F[0]=O=>n("close"))},[s(t(Qt),{class:"w-5 h-5 text-zinc-500"})])]),e("div",Jc,[e("button",{class:ge(["px-3 py-1.5 text-sm font-medium rounded-lg transition-colors whitespace-nowrap",b.value==="all"?"bg-indigo-100 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-300":"text-zinc-600 dark:text-zinc-400 hover:bg-zinc-100 dark:hover:bg-zinc-800"]),onClick:F[1]||(F[1]=O=>b.value="all")}," All Templates ",2),(l(!0),a(ee,null,oe(t(f),O=>(l(),a("button",{key:O.category,class:ge(["flex items-center gap-1.5 px-3 py-1.5 text-sm font-medium rounded-lg transition-colors whitespace-nowrap",b.value===O.category?"bg-indigo-100 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-300":"text-zinc-600 dark:text-zinc-400 hover:bg-zinc-100 dark:hover:bg-zinc-800"]),onClick:T=>b.value=O.category},[(l(),me(gn(w[O.category]),{class:"w-4 h-4"})),se(" "+B(O.label),1)],10,Qc))),128))]),e("div",Zc,[e("div",eu,[F[5]||(F[5]=e("h3",{class:"text-sm font-medium text-zinc-700 dark:text-zinc-300 mb-3"}," Start Fresh ",-1)),e("button",{class:"group relative w-48 aspect-video rounded-xl border-2 border-dashed border-zinc-300 dark:border-zinc-700 hover:border-indigo-500 dark:hover:border-indigo-500 transition-all overflow-hidden",onClick:j},[e("div",tu,[s(t(Yt),{class:"w-8 h-8 text-zinc-400 group-hover:text-indigo-500 transition-colors mb-2"}),F[4]||(F[4]=e("span",{class:"text-sm font-medium text-zinc-500 group-hover:text-indigo-600 dark:group-hover:text-indigo-400 transition-colors"}," Blank Slide ",-1))])])]),(l(!0),a(ee,null,oe(k.value,O=>(l(),a("div",{key:O.category,class:"mb-8 last:mb-0"},[e("div",nu,[(l(),me(gn(w[O.category]),{class:"w-4 h-4 text-zinc-500"})),e("h3",lu,B(O.label),1),e("span",su,B(O.description),1)]),e("div",ou,[(l(!0),a(ee,null,oe(O.templates,T=>(l(),a("button",{key:T.id,class:"group relative aspect-video rounded-xl border border-zinc-200 dark:border-zinc-700 hover:border-indigo-500 dark:hover:border-indigo-500 hover:ring-2 hover:ring-indigo-500/20 transition-all overflow-hidden",onClick:M=>$(T)},[e("div",{class:"absolute inset-0 p-2",style:re(z(T))},[(l(!0),a(ee,null,oe(T.elements.slice(0,5),(M,R)=>(l(),a("div",{key:R,class:"absolute",style:re({left:`${M.x}%`,top:`${M.y}%`,width:`${M.width}%`,height:`${M.height}%`})},[M.type==="text"?(l(),a("div",{key:0,class:"w-full h-full rounded-sm",style:re({backgroundColor:M.text?.color?`${M.text.color}20`:"#00000010"})},null,4)):M.type==="shape"?(l(),a("div",{key:1,class:"w-full h-full rounded-sm",style:re({backgroundColor:M.fill||"#E5E7EB",borderRadius:M.shapeType==="circle"?"50%":void 0})},null,4)):(l(),a("div",iu))],4))),128))],4),e("div",ru,[e("div",du,[e("p",cu,B(T.name),1)])])],8,au))),128))])]))),128))])])])):Y("",!0)]),_:1})]))}}),fu=ut(uu,[["__scopeId","data-v-ae06b540"]]),pu={key:0,class:"flex h-full items-center justify-center bg-zinc-100 dark:bg-zinc-950"},gu={key:1,class:"wysiwyg-editor flex flex-col h-full bg-zinc-100 dark:bg-zinc-950"},vu={class:"flex flex-1 overflow-hidden"},hu={class:"space-y-2"},xu=["onClick"],mu={class:"absolute bottom-1 left-1 text-[10px] font-medium text-zinc-500 bg-white/80 dark:bg-zinc-800/80 px-1 rounded"},bu={class:"absolute top-1 right-1 opacity-0 group-hover:opacity-100 transition-opacity flex gap-1"},yu=["onClick"],wu=["onClick"],ku={class:"flex-1 flex flex-col"},_u={class:"flex-1 p-4 flex"},Su={class:"flex items-center justify-between px-4 py-2 bg-white dark:bg-zinc-900 border-t border-zinc-200 dark:border-zinc-800"},zu={class:"flex items-center gap-2"},Cu=["disabled"],$u={class:"text-sm text-zinc-600 dark:text-zinc-400"},Fu=["disabled"],Iu={class:"text-sm text-zinc-500"},Tu={key:0},Eu={key:1},Au={class:"flex items-center gap-2"},ju={class:"flex items-center bg-zinc-100 dark:bg-zinc-800 rounded-lg p-0.5"},Bu=Ve({__name:"WysiwygSlideEditor",props:{slides:{},activeIndex:{default:0},isSaving:{type:Boolean,default:!1},projectTitle:{default:"Untitled"}},emits:["update:slides","update:activeIndex","present","export"],setup(L,{emit:x}){const n=L,f=x,d=E(null),h=E(null),b=E(!1),w=E([]),k=E(0),$=E([]),j=E(!1),z=E(!1),r=E("modern"),F=E(!1),O=E(!1),T=E(0),M=E(!1),R=!0,H=Kn({slides:w});St(()=>{H.loadThemes()});let I=null,c=null;const _=E(null),N=le(()=>_.value),G=le(()=>w.value[k.value]||null),J=le(()=>!G.value||$.value.length!==1?null:G.value.elements.find(D=>D.id===$.value[0])||null),V=le(()=>J.value?.type||null),we=le(()=>$.value.length>0),$e=le(()=>$.value.length>1),_e=le(()=>{const D=_.value?.clipboard;return D?.value!==null&&(D?.value?.length??0)>0}),je=D=>{if(!D)return!0;const pe=D.replace("#","");if(pe.length!==6)return!0;const ve=parseInt(pe.slice(0,2),16),Be=parseInt(pe.slice(2,4),16),lt=parseInt(pe.slice(4,6),16);return(.299*ve+.587*Be+.114*lt)/255>.7},Ae=hd({slides:w,activeSlideIndex:k,maxSize:50,debounceMs:500,onRestore:D=>{ot(()=>{c?.loadElements()})}}),Oe=xd(Ae);Le(()=>n.slides,D=>{JSON.stringify(D)!==JSON.stringify(w.value)&&(w.value=JSON.parse(JSON.stringify(D)))},{immediate:!0,deep:!0}),Le(()=>n.activeIndex,D=>{D!==k.value&&(k.value=D)},{immediate:!0}),Le(w,D=>{f("update:slides",D),Oe()},{deep:!0}),Le(k,D=>{f("update:activeIndex",D),$.value=[],ot(()=>{I&&(I.resetZoom(),I.resetPan()),d.value?.fitToContainer(),c?.loadElements()})});function We(D){I=D,c=d.value?.getElements()||null,c&&I&&(_.value=vd({canvasInstance:I,elementsInstance:c,slide:G,onSelectionChange:pe=>{$.value=pe}}))}function ye(D){$.value=D}function ke(){$.value=[]}function Z(D){G.value&&(G.value.elements=D)}function K(D){}function p(){c&&c.addText({x:10,y:10,width:40,height:10,text:{content:"Double click to edit",fontFamily:"Arial",fontSize:24,fontWeight:"normal",fontStyle:"normal",textAlign:"left",color:"#111827",lineHeight:1.4,letterSpacing:0}})}function m(D){c&&c.addShape(D,{x:20,y:20,width:20,height:15,fill:"#6366F1",stroke:"#4F46E5",strokeWidth:2})}function U(){const D=document.createElement("input");D.type="file",D.accept="image/*",D.onchange=async pe=>{const ve=pe.target.files?.[0];if(!ve||!c)return;const Be=URL.createObjectURL(ve);c.addImage(Be,{x:25,y:20,width:30,height:30})},D.click()}function W(){if(!c)return;const D=H.getChartColors();c.addChart({x:15,y:25,width:50,height:40,chart:{chartType:"bar",title:"Chart Title",labels:["Category A","Category B","Category C","Category D"],datasets:[{label:"Series 1",data:[65,59,80,81],backgroundColor:D}],showLegend:!0,showGrid:!0}})}function te(){if(!c)return;const D=H.currentTheme.value;c.addTable({x:10,y:30,width:60,height:35,table:{title:"Table",columns:[{key:"col1",label:"Column 1"},{key:"col2",label:"Column 2"},{key:"col3",label:"Column 3"}],rows:[{col1:"Row 1",col2:"Data",col3:"Value"},{col1:"Row 2",col2:"Data",col3:"Value"},{col1:"Row 3",col2:"Data",col3:"Value"}],headerBackground:D?.colors.surface||"#F3F4F6",headerColor:D?.colors.text||"#111827",alternateRowColors:!0}})}function P(){J.value?.text&&be({text:{...J.value.text,fontWeight:J.value.text.fontWeight==="bold"?"normal":"bold"}})}function ne(){J.value?.text&&be({text:{...J.value.text,fontStyle:J.value.text.fontStyle==="italic"?"normal":"italic"}})}function de(){J.value?.text&&be({text:{...J.value.text,textDecoration:J.value.text.textDecoration==="underline"?"none":"underline"}})}function fe(D){J.value?.text&&be({text:{...J.value.text,color:D}})}function Fe(D){J.value?.text&&be({text:{...J.value.text,fontFamily:D}})}function Ie(D){J.value?.text&&be({text:{...J.value.text,fontSize:D}})}function ie(D){r.value=D,H.setTheme(D)}function Te(D,pe){if(r.value=D,H.setTheme(D),pe)w.value=H.applyThemeToAllSlides(w.value,D);else if(G.value){const ve=H.themes.value.find(Be=>Be.id===D);if(ve){const Be=H.applyThemeToSlide(G.value,ve);w.value[k.value]=Be}}ot(()=>{c?.loadElements()})}function Ee(D){N.value?.alignHorizontal(D)}function et(D){N.value?.alignVertical(D)}function tt(){$.value.length===1&&c?.bringToFront($.value[0])}function bt(){$.value.length===1&&c?.sendToBack($.value[0])}function he(){$.value.length===1&&c?.bringForward($.value[0])}function Re(){$.value.length===1&&c?.sendBackward($.value[0])}function De(){N.value?.groupElements()}function Se(){const D=J.value;D?.groupId&&N.value?.ungroupElements(D.groupId)}function Ke(){Ae.undo()}function Ye(){Ae.redo()}function A(){N.value?.duplicate()}function q(){c?.removeSelected(),$.value=[]}function ce(){j.value=!j.value}function xe(){z.value=!z.value}function be(D){!J.value||!c||c.updateElement(J.value.id,D)}function He(D){G.value&&(G.value.speaker_notes=D)}function Ne(){M.value=!0}function Ue(D){w.value.push(D),k.value=w.value.length-1,ot(()=>{c?.loadElements()})}function qe(D){const pe=w.value[D];if(!pe)return;const ve={...JSON.parse(JSON.stringify(pe)),id:Me(),title:`${pe.title} (Copy)`};ve.elements=ve.elements.map(Be=>({...Be,id:Me()})),w.value.splice(D+1,0,ve),k.value=D+1}function nt(D){w.value.length<=1||(w.value.splice(D,1),k.value>=w.value.length&&(k.value=w.value.length-1))}function Ge(D){k.value=D}function Xe(){k.value>0&&k.value--}function yt(){k.value<w.value.length-1&&k.value++}function $t(){T.value=k.value,F.value=!0}function at(){T.value=k.value,O.value=!0}function Je(){F.value=!1,O.value=!1}function y(D){if(["INPUT","TEXTAREA","SELECT"].includes(D.target?.tagName))return;const ve=D.metaKey||D.ctrlKey;if(ve&&D.key==="z"&&!D.shiftKey){D.preventDefault(),Ke();return}if(ve&&D.key==="z"&&D.shiftKey){D.preventDefault(),Ye();return}if(D.key==="Delete"||D.key==="Backspace"){we.value&&(D.preventDefault(),q());return}if(ve&&D.key==="c"){D.preventDefault(),N.value?.copy();return}if(ve&&D.key==="x"){D.preventDefault(),N.value?.cut();return}if(ve&&D.key==="v"){D.preventDefault(),N.value?.paste();return}if(ve&&D.key==="d"){D.preventDefault(),A();return}if(ve&&D.key==="b"){D.preventDefault(),P();return}if(ve&&D.key==="i"){D.preventDefault(),ne();return}if(ve&&D.key==="u"){D.preventDefault(),de();return}if(ve&&D.key==="g"&&!D.shiftKey){D.preventDefault(),De();return}if(ve&&D.key==="g"&&D.shiftKey){D.preventDefault(),Se();return}if(ve&&D.key==="a"){D.preventDefault(),I?.selectAll();return}if(D.key==="Escape"){I?.deselectAll();return}["ArrowLeft","ArrowRight"].includes(D.key)&&!we.value&&(D.preventDefault(),D.key==="ArrowLeft"&&Xe(),D.key==="ArrowRight"&&yt())}return St(()=>{window.addEventListener("keydown",y)}),Ot(()=>{window.removeEventListener("keydown",y)}),(D,pe)=>t(R)?(l(),a("div",pu,[...pe[3]||(pe[3]=[e("div",{class:"max-w-xl text-center px-6"},[e("div",{class:"mx-auto mb-4 inline-flex items-center rounded-full border border-zinc-200/70 bg-white px-4 py-1 text-[11px] font-semibold uppercase tracking-[0.25em] text-zinc-500 dark:border-white/10 dark:bg-white/5 dark:text-white/70"}," Coming Soon "),e("h3",{class:"text-2xl md:text-3xl font-display font-bold text-zinc-900 dark:text-white"}," Defense Slide Deck Editor "),e("p",{class:"mt-3 text-sm text-zinc-600 dark:text-white/70"}," The editor will let you refine layouts, rearrange slides, apply themes, and export presentation-ready decks directly from Finalyze. ")],-1)])])):(l(),a("div",gu,[s(kr,{showShapeMenu:b.value,"onUpdate:showShapeMenu":pe[0]||(pe[0]=ve=>b.value=ve),"can-undo":t(Ae).canUndo.value,"can-redo":t(Ae).canRedo.value,"has-selection":we.value,"has-multiple-selection":$e.value,"has-clipboard":_e.value,"grid-enabled":j.value,"snap-enabled":z.value,"selected-element-type":V.value,"text-color":J.value?.text?.color||"#111827","font-family":J.value?.text?.fontFamily||"Arial","font-size":J.value?.text?.fontSize||18,"onAdd:text":p,"onAdd:shape":m,"onAdd:image":U,"onAdd:chart":W,"onAdd:table":te,"onFormat:bold":P,"onFormat:italic":ne,"onFormat:underline":de,"onFormat:color":fe,"onFormat:font":Fe,"onFormat:fontSize":Ie,"onAlign:horizontal":Ee,"onAlign:vertical":et,"onArrange:bringFront":tt,"onArrange:sendBack":bt,"onArrange:bringForward":he,"onArrange:sendBackward":Re,onGroup:De,onUngroup:Se,onUndo:Ke,onRedo:Ye,onDuplicate:A,onDelete:q,"onToggle:grid":ce,"onToggle:snap":xe},null,8,["showShapeMenu","can-undo","can-redo","has-selection","has-multiple-selection","has-clipboard","grid-enabled","snap-enabled","selected-element-type","text-color","font-family","font-size"]),e("div",vu,[e("div",{ref_key:"slideThumbnailsRef",ref:h,class:"slide-thumbnails w-48 bg-white dark:bg-zinc-900 border-r border-zinc-200 dark:border-zinc-800 overflow-y-auto p-3"},[e("div",hu,[(l(!0),a(ee,null,oe(w.value,(ve,Be)=>(l(),a("div",{key:ve.id,class:ge(["slide-thumbnail group relative cursor-pointer",{"ring-2 ring-indigo-500":Be===k.value}]),onClick:lt=>Ge(Be)},[e("div",{class:"aspect-video bg-zinc-50 dark:bg-zinc-950 rounded border border-zinc-200 dark:border-zinc-700 overflow-hidden",style:re({backgroundColor:ve.backgroundColor})},[e("div",{class:"p-2 text-[6px] leading-tight truncate",style:re({color:je(ve.backgroundColor)?"#475569":"#F8FAFC"})},B(ve.title),5)],4),e("div",mu,B(Be+1),1),e("div",bu,[e("button",{class:"p-1 bg-white dark:bg-zinc-700 rounded shadow hover:bg-zinc-100 dark:hover:bg-zinc-600",title:"Duplicate slide",onClick:dt(lt=>qe(Be),["stop"])},[s(t(xn),{class:"w-3 h-3"})],8,yu),w.value.length>1?(l(),a("button",{key:0,class:"p-1 bg-white dark:bg-zinc-700 rounded shadow hover:bg-red-100 dark:hover:bg-red-900/30 text-red-600",title:"Delete slide",onClick:dt(lt=>nt(Be),["stop"])},[s(t(Mt),{class:"w-3 h-3"})],8,wu)):Y("",!0)])],10,xu))),128))]),e("button",{class:"w-full mt-3 py-2 flex items-center justify-center gap-1 text-sm text-zinc-600 dark:text-zinc-400 border-2 border-dashed border-zinc-300 dark:border-zinc-700 rounded hover:border-indigo-500 hover:text-indigo-600 transition-colors",onClick:Ne},[s(t(Yt),{class:"w-4 h-4"}),pe[4]||(pe[4]=se(" Add Slide ",-1))])],512),e("div",ku,[e("div",_u,[s(_i,{ref_key:"editorCanvasRef",ref:d,class:"flex-1",slide:G.value,"show-grid":j.value,"snap-to-grid":z.value,"onCanvas:ready":We,"onElement:selected":ye,"onElement:deselected":ke,"onElements:change":Z,"onElement:modified":K},null,8,["slide","show-grid","snap-to-grid"])]),e("div",Su,[e("div",zu,[e("button",{class:"p-1.5 rounded hover:bg-zinc-100 dark:hover:bg-zinc-800 disabled:opacity-40",disabled:k.value===0,onClick:Xe},[s(t(mt),{class:"w-4 h-4"})],8,Cu),e("span",$u,B(k.value+1)+" / "+B(w.value.length),1),e("button",{class:"p-1.5 rounded hover:bg-zinc-100 dark:hover:bg-zinc-800 disabled:opacity-40",disabled:k.value===w.value.length-1,onClick:yt},[s(t(Qe),{class:"w-4 h-4"})],8,Fu)]),e("div",Iu,[D.isSaving?(l(),a("span",Tu,"Saving...")):(l(),a("span",Eu,"All changes saved"))]),e("div",Au,[s(tc,{"current-theme-id":r.value,onSelect:ie,onApply:Te},null,8,["current-theme-id"]),e("div",ju,[e("button",{class:"flex items-center gap-1.5 px-3 py-1.5 text-sm rounded-md transition-colors hover:bg-white dark:hover:bg-zinc-700 text-zinc-600 dark:text-zinc-400",title:"Fullscreen presentation",onClick:$t},[s(t(Jt),{class:"w-4 h-4"}),pe[5]||(pe[5]=se(" Present ",-1))]),e("button",{class:"flex items-center gap-1.5 px-3 py-1.5 text-sm rounded-md transition-colors hover:bg-white dark:hover:bg-zinc-700 text-zinc-600 dark:text-zinc-400",title:"Presenter view with notes",onClick:at},[s(t(Gn),{class:"w-4 h-4"}),pe[6]||(pe[6]=se(" Speaker ",-1))])]),e("button",{class:"flex items-center gap-1.5 px-3 py-1.5 text-sm bg-indigo-600 text-white hover:bg-indigo-700 rounded transition-colors",onClick:pe[1]||(pe[1]=ve=>f("export"))},[s(t(Vn),{class:"w-4 h-4"}),pe[7]||(pe[7]=se(" Export ",-1))])])])]),s(gd,{element:J.value,"speaker-notes":G.value?.speaker_notes,onUpdate:be,"onUpdate:speakerNotes":He},null,8,["element","speaker-notes"])]),F.value?(l(),me(mc,{key:0,slides:w.value,"initial-slide-index":T.value,onClose:Je},null,8,["slides","initial-slide-index"])):Y("",!0),O.value?(l(),me(Xc,{key:1,slides:w.value,"initial-slide-index":T.value,onClose:Je},null,8,["slides","initial-slide-index"])):Y("",!0),s(fu,{open:M.value,onClose:pe[2]||(pe[2]=ve=>M.value=!1),onSelect:Ue},null,8,["open"])]))}}),Du=ut(Bu,[["__scopeId","data-v-a102e6ef"]]),Pu={class:"flex-1 min-h-[300px] relative overflow-hidden"},Mu={class:"text-xl md:text-4xl font-bold font-display text-white mb-6 md:mb-10 tracking-tight leading-tight"},Lu={class:"flex-1 overflow-y-auto custom-scrollbar pr-4 md:pr-6 pb-4 max-w-4xl"},Ou=["innerHTML"],Wu={key:1,class:"flex flex-col items-center justify-center h-full text-center space-y-4"},Ru={class:"h-12 w-12 rounded-full bg-indigo-500/10 flex items-center justify-center"},Hu={key:2,class:"absolute inset-0 bg-zinc-950/50 backdrop-blur-sm flex items-center justify-center z-10 rounded-xl"},Nu={class:"flex flex-col items-center gap-3"},Uu={key:0,class:"mt-6 pt-4 border-t border-white/5 flex items-center justify-between"},Gu={class:"flex items-center gap-1.5"},Xu=["onClick"],Vu={class:"flex items-center gap-2"},Yu={class:"text-sm font-mono text-zinc-500 w-12 text-center"},Pn=Ve({__name:"ExecutiveBriefingDeck",props:{slides:{default:()=>[]},isLoading:{type:Boolean}},emits:["refresh"],setup(L,{emit:x}){const n=L,f=E(0),d=E(null),{isSwiping:h,direction:b}=Vt(d);Le(h,(r,F)=>{F&&!r&&(b.value==="left"?k():b.value==="right"&&$())});const w=le(()=>n.slides[f.value]),k=()=>{f.value<n.slides.length-1&&f.value++},$=()=>{f.value>0&&f.value--},j=r=>{f.value=r},z=r=>{if(!r)return"";let F=r;return F=F.replace(/^#### (.*$)/gim,"<h4>$1</h4>"),F=F.replace(/^### (.*$)/gim,"<h3>$1</h3>"),F=F.replace(/^## (.*$)/gim,"<h2>$1</h2>"),F=F.replace(/^# (.*$)/gim,"<h1>$1</h1>"),F=F.replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>"),F=F.replace(/(?<!\*)\*([^*\n]+?)\*(?!\*)/g,"<em>$1</em>"),F.split(/\n\s*\n/).filter(T=>T.trim()).map(T=>{const M=T.trim();if(M.match(/^<h[1-4]>/))return M;if(M.includes(`
`)&&(M.match(/^\d+\.\s/)||M.match(/^[-*]\s/))){const R=M.split(`
`).map(c=>c.trim()).filter(c=>c),H=R.some(c=>c.match(/^\d+\.\s/)),I=R.map(c=>`<li>${c.replace(/^(\d+\.|[-*])\s/,"")}</li>`).join("");return H?`<ol>${I}</ol>`:`<ul>${I}</ul>`}return`<p>${M.replace(/\n/g,"<br>")}</p>`}).join("")};return(r,F)=>(l(),a("div",{class:"flex flex-col h-full relative",ref_key:"containerRef",ref:d},[e("div",Pu,[r.slides.length>0?(l(),me(Zt,{key:0,"enter-active-class":"transition-opacity duration-300 ease-out","enter-from-class":"opacity-0","enter-to-class":"opacity-100","leave-active-class":"transition-opacity duration-200 ease-in absolute inset-0","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:C(()=>[(l(),a("div",{key:f.value,class:"h-full flex flex-col"},[e("h3",Mu,B(w.value.title),1),e("div",Lu,[e("div",{innerHTML:z(w.value.content),class:"prose-sm md:prose-xl dark:prose-invert leading-relaxed md:leading-loose tracking-wide [&_p]:mb-4 md:[&_p]:mb-6 [&_strong]:text-indigo-400 [&_strong]:font-semibold text-zinc-50 [&_ul]:list-none [&_ul]:pl-0 [&_ol]:list-decimal [&_ol]:pl-5 [&_li]:mb-4 md:[&_li]:mb-6 [&_li]:pl-4 [&_li]:border-l-2 [&_li]:border-indigo-500/50"},null,8,Ou)])]))]),_:1})):r.isLoading?Y("",!0):(l(),a("div",Wu,[e("div",Ru,[s(t(rt),{class:"h-6 w-6 text-indigo-500/50"})]),F[0]||(F[0]=e("p",{class:"text-base text-zinc-500 max-w-xs"}," No executive briefing yet. Click refresh to generate a summary. ",-1))])),r.isLoading?(l(),a("div",Hu,[e("div",Nu,[s(t(Yn),{class:"h-6 w-6 text-indigo-400 animate-spin"}),F[1]||(F[1]=e("span",{class:"text-xs font-medium text-indigo-300"},"Analyzing Project...",-1))])])):Y("",!0)]),r.slides.length>0?(l(),a("div",Uu,[e("div",Gu,[(l(!0),a(ee,null,oe(r.slides,(O,T)=>(l(),a("button",{key:T,onClick:M=>j(T),class:ge(["h-1.5 rounded-full transition-all duration-300",f.value===T?"w-6 bg-indigo-500":"w-1.5 bg-zinc-700 hover:bg-zinc-600"])},null,10,Xu))),128))]),e("div",Vu,[s(t(ae),{variant:"ghost",size:"icon",class:"h-8 w-8 text-zinc-400 hover:text-white",disabled:f.value===0,onClick:$},{default:C(()=>[s(t(mt),{class:"h-4 w-4"})]),_:1},8,["disabled"]),e("span",Yu,B(f.value+1)+" / "+B(r.slides.length),1),s(t(ae),{variant:"ghost",size:"icon",class:"h-8 w-8 text-zinc-400 hover:text-white",disabled:f.value===r.slides.length-1,onClick:k},{default:C(()=>[s(t(Qe),{class:"h-4 w-4"})]),_:1},8,["disabled"])])])):Y("",!0)],512))}}),qu={class:"flex-1 min-h-[350px] relative overflow-hidden"},Ku={key:0,class:"mb-6"},Ju={class:"mb-6 md:mb-10"},Qu={class:"flex items-start gap-3 md:gap-4"},Zu={class:"h-8 w-8 md:h-10 md:w-10 shrink-0 rounded-lg md:rounded-xl bg-rose-500/10 flex items-center justify-center"},ef={class:"text-xl md:text-4xl font-bold font-display text-white tracking-tight leading-snug md:leading-tight"},tf={class:"flex-1 overflow-y-auto custom-scrollbar pr-4 md:pr-6 pb-6"},nf={class:"relative pl-5 md:pl-6"},lf={class:"flex items-center gap-2 mb-3 md:mb-4 text-indigo-400 font-medium text-[10px] md:text-sm tracking-wide uppercase"},sf=["innerHTML"],of={key:1,class:"flex flex-col items-center justify-center h-full text-center space-y-4"},af={class:"h-16 w-16 rounded-full bg-rose-500/10 flex items-center justify-center"},rf={key:2,class:"absolute inset-0 bg-zinc-950/50 backdrop-blur-sm flex items-center justify-center z-10 rounded-3xl border border-white/5"},df={class:"flex flex-col items-center gap-4"},cf={class:"relative"},uf={key:0,class:"mt-8 pt-6 border-t border-white/5 flex items-center justify-between"},ff={class:"flex items-center gap-2"},pf=["onClick"],gf={class:"flex items-center gap-3"},vf={class:"flex flex-col items-center min-w-[3rem]"},hf={class:"text-base font-bold text-white leading-none"},xf={class:"text-[10px] text-zinc-500 font-mono uppercase mt-1"},Mn=Ve({__name:"PredictedQuestionsDeck",props:{questions:{default:()=>[]},isLoading:{type:Boolean}},setup(L){const x=L,n=E(0),f=E(null),{isSwiping:d,direction:h}=Vt(f);Le(d,(z,r)=>{r&&!z&&(h.value==="left"?w():h.value==="right"&&k())});const b=le(()=>x.questions[n.value]),w=()=>{n.value<x.questions.length-1&&n.value++},k=()=>{n.value>0&&n.value--},$=z=>{n.value=z},j=z=>z?z.split(`

`).map(r=>`<p>${r.trim().replace(/\n/g,"<br>")}</p>`).join(""):"";return(z,r)=>(l(),a("div",{class:"flex flex-col h-full relative",ref_key:"containerRef",ref:f},[e("div",qu,[z.questions.length>0?(l(),me(Zt,{key:0,"enter-active-class":"transition-opacity duration-300 ease-out","enter-from-class":"opacity-0","enter-to-class":"opacity-100","leave-active-class":"transition-opacity duration-200 ease-in absolute inset-0","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:C(()=>[(l(),a("div",{key:n.value,class:"h-full flex flex-col pt-2"},[b.value.category?(l(),a("div",Ku,[s(t(_t),{variant:"outline",class:"text-[10px] uppercase tracking-widest bg-rose-500/5 text-rose-400 border-rose-500/20 px-3 py-1"},{default:C(()=>[se(B(b.value.category),1)]),_:1})])):Y("",!0),e("div",Ju,[e("div",Qu,[e("div",Zu,[s(t(Wl),{class:"h-4 w-4 md:h-5 md:w-5 text-rose-500"})]),e("h3",ef,B(b.value.question),1)])]),e("div",tf,[e("div",nf,[r[1]||(r[1]=e("div",{class:"absolute left-0 top-0 bottom-0 w-1 bg-gradient-to-b from-indigo-500 to-transparent rounded-full opacity-50"},null,-1)),e("div",lf,[s(t(Rl),{class:"h-3 w-3 md:h-4 md:w-4"}),r[0]||(r[0]=e("span",null,"Defense Strategy",-1))]),e("div",{innerHTML:j(b.value.suggested_answer),class:"text-zinc-300 text-base md:text-xl leading-relaxed tracking-wide italic font-serif [&_p]:mb-4 md:[&_p]:mb-6"},null,8,sf)])])]))]),_:1})):z.isLoading?Y("",!0):(l(),a("div",of,[e("div",af,[s(t(Tt),{class:"h-8 w-8 text-rose-500/50"})]),r[2]||(r[2]=e("div",{class:"space-y-2"},[e("p",{class:"text-lg font-medium text-white"},"No questions identified"),e("p",{class:"text-sm text-zinc-500 max-w-xs"}," Generate defense questions to prepare for potential examiner inquiry. ")],-1))])),z.isLoading?(l(),a("div",rf,[e("div",df,[e("div",cf,[s(t(Yn),{class:"h-10 w-10 text-rose-500 animate-spin"}),s(t(rt),{class:"h-4 w-4 text-rose-400 absolute -top-1 -right-1 animate-pulse"})]),r[3]||(r[3]=e("span",{class:"text-sm font-medium text-rose-200"},"Simulating Defense Panel...",-1))])])):Y("",!0)]),z.questions.length>0?(l(),a("div",uf,[e("div",ff,[(l(!0),a(ee,null,oe(z.questions,(F,O)=>(l(),a("button",{key:O,onClick:T=>$(O),class:ge(["h-2 rounded-full transition-all duration-300",n.value===O?"w-8 bg-rose-500":"w-2 bg-zinc-800 hover:bg-zinc-700"])},null,10,pf))),128))]),e("div",gf,[s(t(ae),{variant:"ghost",size:"icon",class:"h-10 w-10 rounded-xl border border-white/5 text-zinc-400 hover:text-white hover:bg-white/5 transition-all",disabled:n.value===0,onClick:k},{default:C(()=>[s(t(mt),{class:"h-5 w-5"})]),_:1},8,["disabled"]),e("div",vf,[e("span",hf,B(n.value+1),1),e("span",xf,B(z.questions.length)+" Total",1)]),s(t(ae),{variant:"ghost",size:"icon",class:"h-10 w-10 rounded-xl border border-white/5 text-zinc-400 hover:text-white hover:bg-white/5 transition-all",disabled:n.value===z.questions.length-1,onClick:w},{default:C(()=>[s(t(Qe),{class:"h-5 w-5"})]),_:1},8,["disabled"])])])):Y("",!0)],512))}});function mf(L){const x=E(null),n=E([]),f=E(null),d=E(null),h=E(!1),b=E(!1),w=E(!1),k=le(()=>!!x.value);return{session:x,messages:n,feedback:f,performanceMetrics:d,isStarting:h,isLoading:b,isSending:w,hasSession:k,startSession:async T=>{if(!h.value){h.value=!0;try{const{data:M}=await Ce.post(`/api/projects/${L}/defense/sessions`,T);return x.value=M.session,n.value=[],f.value=null,d.value=x.value?.performance_metrics??null,M.session}finally{h.value=!1}}},loadSession:async T=>{if(!b.value){b.value=!0;try{const{data:M}=await Ce.get(`/api/projects/${L}/defense/sessions/${T}`);x.value=M.session,n.value=M.session?.messages??[],f.value=M.session?.feedback??null,d.value=M.session?.performance_metrics??null}finally{b.value=!1}}},getNextQuestion:async(T,M,R)=>{const{data:H}=await Ce.get(`/api/projects/${L}/defense/sessions/${T}/next-question`,{params:{...M?{persona:M}:{},...R?{request_hint:1}:{}}});return n.value.push(H.message),x.value=H.session,H.message},sendResponse:async(T,M,R)=>{if(w.value)return;w.value=!0;const H=-Date.now(),I={id:H,session_id:T,role:"student",panelist_persona:null,content:M,response_time_ms:R??null};n.value.push(I);try{const{data:c}=await Ce.post(`/api/projects/${L}/defense/sessions/${T}/respond`,{response:M,response_time_ms:R}),_=n.value.findIndex(N=>N.id===H);return _>=0?n.value[_]=c.message:n.value.push(c.message),d.value=c.performance_metrics,c}catch(c){throw n.value=n.value.filter(_=>_.id!==H),c}finally{w.value=!1}},endSession:async T=>{const{data:M}=await Ce.post(`/api/projects/${L}/defense/sessions/${T}/end`);return x.value=M.session,f.value=M.feedback,d.value=M.session?.performance_metrics??null,M.feedback},loadTranscript:async T=>{const{data:M}=await Ce.get(`/api/projects/${L}/defense/sessions/${T}/transcript`);return n.value=M.messages,M.messages}}}const bf={fontFamily:"Arial",fontSize:18,fontWeight:"normal",fontStyle:"normal",textAlign:"left",color:"#374151",lineHeight:1.4,letterSpacing:0},ue={titleY:4,titleHeight:10,contentTop:16,contentBottom:94,contentGap:2,leftX:5,rightX:52,columnWidth:42,centeredX:12,centeredWidth:76},yf=L=>L*100/540,kt=(L,x)=>yf(L)*x,kn=(L,x)=>{const f=80*(L/90)*(16/x);return Math.max(20,Math.floor(f))},wf=(L,x,n)=>{const f=kn(x,n);return L.split(`
`).reduce((d,h)=>{const b=h.trim();return b?d+Math.max(1,Math.ceil(b.length/f)):d+1},0)},Ln=(L,x,n,f)=>{const d=L.split(/\s+/).filter(Boolean);if(!d.length)return[""];const h=kn(x,n),b=[];let w=[],k="",$=0;const j=()=>{k.trim()&&(w.push(k.trim()),k="",$+=1)};for(const z of d){const r=k?`${k} ${z}`:z;r.length>h?(j(),$>=f&&(b.push(w.join(" ")),w=[],$=0),k=z):k=r}return j(),w.length&&b.push(w.join(" ")),b},Pt=(L,x,n,f)=>{const d=[];let h=[],b=0;const w=kn(x,n);return L.forEach(k=>{const $=it(k),j=Math.max(1,Math.ceil(($.length+2)/w));h.length&&b+j>f&&(d.push(h),h=[],b=0),h.push($),b+=j}),h.length&&d.push(h),d},xt=(L,x,{x:n,y:f,width:d,fontSize:h,fontWeight:b="normal",textAlign:w="left",lineHeight:k=1.4,color:$="#374151",zIndex:j})=>{const z=wf(x,d,h),r=Math.max(kt(h,k)*z,kt(h,k));return L.push({id:Me(),type:"text",x:n,y:f,width:d,height:r,rotation:0,zIndex:j,opacity:1,text:{...bf,content:x,fontSize:h,fontWeight:b,textAlign:w,color:$,lineHeight:k}}),f+r+ue.contentGap},kf=L=>{if(!L.length)return;const x=L.reduce((r,F)=>{const O=F.x,T=F.y,M=F.x+F.width,R=F.y+F.height;return{minX:Math.min(r.minX,O),minY:Math.min(r.minY,T),maxX:Math.max(r.maxX,M),maxY:Math.max(r.maxY,R)}},{minX:100,minY:100,maxX:0,maxY:0}),n=x.maxX-x.minX,f=x.maxY-x.minY;if(n<=0||f<=0)return;const d=50,h=50,b=x.minX+n/2,w=x.minY+f/2;let k=d-b,$=h-w;const j=2,z=98;x.minX+k<j&&(k=j-x.minX),x.maxX+k>z&&(k=z-x.maxX),x.minY+$<j&&($=j-x.minY),x.maxY+$>z&&($=z-x.maxY),L.forEach(r=>{r.x=Math.max(0,Math.min(100-r.width,r.x+k)),r.y=Math.max(0,Math.min(100-r.height,r.y+$))})};function _f(L){return L.map((x,n)=>{const f=[];let d=0,h=ue.contentTop;const b=ue.contentBottom;f.push({id:Me(),type:"text",x:ue.centeredX,y:ue.titleY,width:ue.centeredWidth,height:ue.titleHeight,rotation:0,zIndex:d++,opacity:1,text:{content:x.title||`Slide ${n+1}`,fontFamily:"Arial",fontSize:32,fontWeight:"bold",fontStyle:"normal",textAlign:"center",color:"#111827",lineHeight:1.2,letterSpacing:0}});const w=x.layout||"bullets",k=x.content_type||"bullets";if(w==="two_column"){const $=x.bullets||[],j=Math.ceil($.length/2),z=$.slice(0,j),r=$.slice(j),F=Math.max(4,Math.floor((b-h)/kt(18,1.4)));Pt(z,ue.columnWidth,18,F).forEach(T=>{h=xt(f,T.map(M=>`• ${it(M)}`).join(`
`),{x:ue.leftX,y:h,width:ue.columnWidth,fontSize:18,zIndex:d++})});let O=ue.contentTop;Pt(r,ue.columnWidth,18,F).forEach(T=>{O=xt(f,T.map(M=>`• ${it(M)}`).join(`
`),{x:ue.rightX,y:O,width:ue.columnWidth,fontSize:18,zIndex:d++})})}else if(w==="image_left"||w==="image_right"){const $=w==="image_left"?ue.leftX:ue.rightX,j=w==="image_left"?ue.rightX:ue.leftX;if(x.image_url&&f.push({id:Me(),type:"image",x:$,y:ue.contentTop,width:ue.columnWidth,height:b-ue.contentTop,rotation:0,zIndex:d++,opacity:1,image:{url:x.image_url,fit:x.image_fit||"contain"}}),x.bullets?.length){const z=Math.max(4,Math.floor((b-h)/kt(18,1.4)));Pt(x.bullets,ue.columnWidth,18,z).forEach(r=>{h=xt(f,r.map(F=>`• ${it(F)}`).join(`
`),{x:j,y:h,width:ue.columnWidth,fontSize:18,zIndex:d++})})}}else{if(k==="paragraphs"&&x.paragraphs?.length){const j=Math.max(4,Math.floor((b-h)/kt(16,1.5)));x.paragraphs.forEach(z=>{if(h>=b)return;Ln(it(z),ue.centeredWidth,16,j).forEach(F=>{h>=b||(h=xt(f,F,{x:ue.centeredX,y:h,width:ue.centeredWidth,fontSize:16,textAlign:"justify",lineHeight:1.5,zIndex:d++}))})})}else if(k==="mixed"){if(x.paragraphs?.length){const j=Math.max(4,Math.floor((b-h)/kt(16,1.4)));x.paragraphs.forEach(z=>{h>=b||Ln(it(z),ue.centeredWidth,16,j).forEach(r=>{h>=b||(h=xt(f,r,{x:ue.centeredX,y:h,width:ue.centeredWidth,fontSize:16,lineHeight:1.4,zIndex:d++}))})})}if(x.headings?.length&&x.headings.forEach($=>{h>=b||($.heading&&(h=xt(f,it($.heading),{x:ue.centeredX,y:h,width:ue.centeredWidth,fontSize:20,fontWeight:"bold",color:"#1F2937",zIndex:d++})),$.content&&(h=xt(f,it($.content),{x:ue.centeredX+2,y:h,width:ue.centeredWidth-4,fontSize:15,color:"#374151",zIndex:d++})))}),x.bullets?.length){const $=Math.max(4,Math.floor((b-h)/kt(18,1.4)));Pt(x.bullets,ue.centeredWidth,18,$).forEach(j=>{h>=b||(h=xt(f,j.map(z=>`• ${it(z)}`).join(`
`),{x:ue.centeredX,y:h,width:ue.centeredWidth,fontSize:18,zIndex:d++}))})}}else if(x.bullets?.length){const $=Math.max(4,Math.floor((b-h)/kt(18,1.4)));Pt(x.bullets,ue.centeredWidth,18,$).forEach(j=>{h>=b||(h=xt(f,j.map(z=>`• ${it(z)}`).join(`
`),{x:ue.centeredX,y:h,width:ue.centeredWidth,fontSize:18,zIndex:d++}))})}x.charts?.length&&x.charts.forEach($=>{h>=b||(f.push({id:Me(),type:"chart",x:ue.centeredX+5,y:h,width:60,height:35,rotation:0,zIndex:d++,opacity:1,chart:{chartType:$.type||"bar",title:$.title||"",labels:$.x||[],datasets:($.series||[]).map(j=>({label:j.name,data:j.data,backgroundColor:["#6366F1","#8B5CF6","#EC4899","#F59E0B"]})),showLegend:!0,showGrid:!0}}),h+=38)}),x.tables?.length&&x.tables.forEach($=>{h>=b||(f.push({id:Me(),type:"table",x:ue.centeredX,y:h,width:70,height:25,rotation:0,zIndex:d++,opacity:1,table:{title:$.title||"",columns:$.columns.map((j,z)=>({key:`col${z}`,label:j})),rows:$.rows.map(j=>{const z={};return j.forEach((r,F)=>{z[`col${F}`]=r}),z}),headerBackground:"#F3F4F6",headerColor:"#111827",alternateRowColors:!0}}),h+=28)}),x.image_url&&w!=="image_left"&&w!=="image_right"&&f.push({id:Me(),type:"image",x:60,y:ue.contentTop,width:35,height:40,rotation:0,zIndex:d++,opacity:1,image:{url:x.image_url,fit:x.image_fit||"contain"}})}return{id:x.id||Me(),title:x.title||`Slide ${n+1}`,elements:(kf(f),f),backgroundColor:"#FFFFFF",speaker_notes:x.speaker_notes}})}function Sf(L){return L.map(x=>{const n={id:x.id,title:x.title,bullets:[],paragraphs:[],speaker_notes:x.speaker_notes,layout:"bullets"};x.elements.filter(w=>w.type==="text").forEach(w=>{w.text?.content&&(w.text.fontSize&&w.text.fontSize>=28?n.title=w.text.content:n.bullets?.push(w.text.content))});const d=x.elements.filter(w=>w.type==="chart");d.length>0&&(n.charts=d.map(w=>({type:w.chart?.chartType||"bar",title:w.chart?.title,x:w.chart?.labels||[],series:(w.chart?.datasets||[]).map(k=>({name:k.label||"Series",data:k.data||[]}))})));const h=x.elements.filter(w=>w.type==="table");h.length>0&&(n.tables=h.map(w=>({title:w.table?.title,columns:(w.table?.columns||[]).map(k=>k.label),rows:(w.table?.rows||[]).map(k=>(w.table?.columns||[]).map($=>String(k[$.key]||"")))})));const b=x.elements.find(w=>w.type==="image");return b?.image&&(n.image_url=b.image.url,n.image_fit=b.image.fit),n})}function it(L){return L?String(L).replace(/<br\s*\/?>/gi,`
`).replace(/<[^>]+>/g,"").replace(/&nbsp;/g," ").trim():""}function zf(L){if(!Array.isArray(L)||L.length===0)return!1;const x=L[0];return Array.isArray(x?.elements)}function On(L,x=!1){return Array.isArray(L)?zf(L)&&!x?L:_f(L):[]}const Cf={class:"mx-auto max-w-7xl px-4 py-8 sm:px-6 lg:px-8"},$f={class:"flex flex-col gap-6 md:flex-row md:items-end md:justify-between mb-12"},Ff={class:"space-y-4"},If={class:"flex items-center gap-2"},Tf={key:0,class:"flex items-start justify-between gap-3 rounded-2xl border border-amber-500/30 bg-amber-500/10 px-4 py-3 text-sm text-amber-100/90"},Ef={class:"flex flex-row md:flex-col items-center gap-4 md:gap-3 p-4 md:p-6 rounded-3xl border border-primary/10 bg-primary/5 backdrop-blur-sm w-full md:w-auto"},Af={class:"relative flex items-center justify-center shrink-0"},jf={class:"h-16 w-16 md:h-20 md:w-20 transform -rotate-90"},Bf=["stroke-dasharray","stroke-dashoffset"],Df=["stroke-dasharray","stroke-dashoffset"],Pf={class:"absolute text-base md:text-xl font-bold"},Mf={class:"flex p-1 rounded-2xl bg-muted/50 border border-border/50 mb-8 w-full sm:w-auto sm:inline-flex"},Lf={key:0,class:"grid gap-8 lg:grid-cols-12 animate-in fade-in slide-in-from-bottom-4 duration-700"},Of={class:"lg:col-span-8 space-y-8 transition-all duration-500"},Wf={class:"flex flex-col sm:flex-row sm:items-center justify-between gap-4 sm:gap-0"},Rf={class:"flex items-center gap-2"},Hf={key:0,class:"h-full"},Nf={key:1,class:"relative z-10 space-y-4"},Uf={key:2,class:"flex flex-col items-center justify-center py-12 text-center space-y-4"},Gf={class:"h-12 w-12 rounded-full bg-indigo-500/10 flex items-center justify-center"},Xf={class:"space-y-4 animate-in fade-in slide-in-from-bottom-4 duration-500 delay-75"},Vf={class:"flex flex-col sm:flex-row sm:items-center justify-between gap-4 sm:gap-0"},Yf={class:"flex items-center gap-2"},qf={class:"space-y-4 animate-in fade-in slide-in-from-bottom-4 duration-500"},Kf={class:"flex flex-col sm:flex-row sm:items-center justify-between gap-4 sm:gap-0"},Jf={class:"flex items-center gap-2"},Qf={class:"flex flex-col sm:flex-row sm:items-center justify-between gap-4 sm:gap-0"},Zf={class:"flex items-center gap-2"},ep={key:0,class:"h-full"},tp={key:1,class:"relative z-10 space-y-4"},np={key:2,class:"flex flex-col items-center justify-center py-12 text-center space-y-4"},lp={class:"h-12 w-12 rounded-full bg-indigo-500/10 flex items-center justify-center"},sp={class:"relative"},op={class:"absolute bottom-3 right-3 flex items-center gap-2"},ap={class:"grid grid-cols-1 sm:grid-cols-2 gap-3"},ip={key:0,class:"text-sm text-muted-foreground border-t border-emerald-500/10 pt-4 mt-2"},rp={class:"lg:col-span-4 space-y-8"},dp={class:"relative z-10 flex items-center gap-3 mb-2"},cp={class:"p-2 bg-indigo-500/10 rounded-xl backdrop-blur-md border border-indigo-500/20"},up={class:"relative z-10 flex flex-col md:flex-row md:items-center justify-between gap-4"},fp={class:"flex flex-col items-end gap-1.5"},pp={class:"flex items-center gap-1.5"},gp={key:0,class:"mb-3 text-[11px] text-zinc-400"},vp={key:0},hp={key:1},xp={key:2},mp={key:3},bp={key:4},yp={key:5},wp={key:6},kp={key:7},_p={key:8},Sp={key:1,class:"mb-3 text-[11px] text-rose-400"},zp={key:0,class:"flex-1 flex items-center justify-center"},Cp={key:0,class:"text-xs text-muted-foreground"},$p={key:1,class:"text-xs text-muted-foreground"},Fp={key:2,class:"space-y-3"},Ip={class:"space-y-1"},Tp={class:"text-xs font-semibold text-foreground"},Ep={class:"text-[11px] text-muted-foreground"},Ap={key:1,class:"flex flex-col items-center justify-center py-20 animate-in zoom-in-95 duration-700"},jp={class:"relative mb-8"},Bp={class:"grid grid-cols-1 md:grid-cols-2 gap-6 w-full max-w-5xl mb-12"},Dp={class:"text-xs text-muted-foreground/80"},Pp={class:"grid grid-cols-1 md:grid-cols-3 gap-6 w-full max-w-4xl mb-12"},Mp={class:"text-4xl mb-4"},Lp={class:"font-bold"},Op={class:"text-xs text-muted-foreground leading-relaxed"},Wp={key:2,class:"fixed inset-0 z-50 bg-zinc-950 flex flex-col items-center p-4 md:p-8 animate-in fade-in duration-500"},Rp={class:"w-full max-w-6xl flex items-center justify-between mb-8"},Hp={class:"flex items-center gap-4"},Np={class:"flex items-center gap-2 bg-zinc-900 px-4 py-2 rounded-full border border-zinc-800"},Up={class:"flex items-center gap-2 bg-zinc-900 px-4 py-2 rounded-full border border-zinc-800"},Gp={class:"text-xs text-zinc-300"},Xp={class:"grid lg:grid-cols-12 gap-8 w-full max-w-6xl flex-grow overflow-hidden"},Vp={class:"lg:col-span-4 space-y-4 md:space-y-6 overflow-y-auto pr-2 custom-scrollbar"},Yp={class:"grid grid-cols-1 sm:grid-cols-3 lg:grid-cols-1 gap-4 md:gap-6"},qp={class:"flex items-center gap-3 md:gap-4"},Kp={class:"h-10 w-10 md:h-12 md:w-12 rounded-2xl bg-zinc-800 flex items-center justify-center text-xl md:text-2xl"},Jp={class:"flex-1 min-w-0"},Qp={class:"flex items-center justify-between gap-2"},Zp={class:"font-bold text-zinc-200 text-sm md:text-base truncate"},eg={class:"text-[10px] md:text-xs text-zinc-500 truncate"},tg={class:"text-[10px] md:text-xs text-zinc-600"},ng={class:"grid grid-cols-3 lg:grid-cols-1 gap-4 md:gap-6"},lg={class:"space-y-2"},sg={class:"flex items-center justify-between text-[10px] md:text-xs"},og={class:"text-zinc-200"},ag={class:"space-y-2"},ig={class:"flex items-center justify-between text-[10px] md:text-xs"},rg={class:"text-zinc-200"},dg={class:"space-y-2"},cg={class:"flex items-center justify-between text-[10px] md:text-xs"},ug={class:"text-zinc-200"},fg={class:"lg:col-span-8 flex flex-col bg-zinc-900/40 rounded-[2.5rem] border border-zinc-800/50 backdrop-blur-xl overflow-hidden"},pg={class:"space-y-10 max-w-3xl mx-auto py-8"},gg={class:"flex items-center gap-2 mb-2 px-1"},vg={class:"text-[10px] font-bold text-zinc-500 uppercase tracking-widest"},hg={class:"text-[8px] text-zinc-600"},xg={key:0,class:"mt-3 flex gap-4 px-2"},mg={class:"text-[10px] font-bold text-zinc-600 hover:text-zinc-400 uppercase tracking-tighter flex items-center gap-1"},bg={class:"text-[10px] font-bold text-zinc-600 hover:text-zinc-400 uppercase tracking-tighter flex items-center gap-1"},yg={class:"p-4 md:p-8 border-t border-zinc-800/50 bg-black/20"},wg={class:"relative max-w-3xl mx-auto"},kg=["disabled"],_g={class:"absolute right-3 md:right-4 top-1/2 -translate-y-1/2 flex items-center gap-2"},Sg={class:"mt-4 flex justify-center gap-6"},zg={class:"flex items-center gap-2 text-[10px] font-bold text-zinc-500 hover:text-white transition-colors uppercase tracking-widest"},Ut=10,Cg=Ve({__name:"Defense",props:{project:{}},setup(L){const x=L,n=E("preparation"),f=E(!1),d=E(72),h=E(null),b=E(!1),w=E([{id:"skeptic",name:"The Skeptic",role:"Critical Reviewer",avatar:"🧐",color:"text-amber-500"},{id:"methodologist",name:"The Methodologist",role:"Technical Expert",avatar:"🧪",color:"text-blue-500"},{id:"generalist",name:"The Generalist",role:"Value Reviewer",avatar:"🌍",color:"text-green-500"}]),k=E([]),$=E(!1),j=E(!1),z=E(""),r=E(null),F=E([]),O=E(!1),T=E([]);E(0),E(0);const M=E(null);E(!1);const R=E(!1);E("slides");const H=E("idle"),I=E(null),c=E(null),_=E(!1),N=E(null),G=E(null),J=E([]),V=E([]),we=E(0),$e=E(!1),_e=E(""),je=E(null),Ae=E(!1),Oe=E(!1),We=E(!1),ye=E(null),ke=!0,{session:Z,messages:K,performanceMetrics:p,startSession:m,loadSession:U,getNextQuestion:W,sendResponse:te,endSession:P,isStarting:ne,isSending:de}=mf(x.project.id),fe=E(!1),Fe=()=>{fe.value=!fe.value},Ie=le(()=>w.value.reduce((S,i)=>(S[i.id]=i.name,S),{})),ie=S=>{const i=S?.response,Q=i?.data?.message;return i?.status===402||Q&&Q.includes("Insufficient credit balance")?(h.value=Q||"Insufficient credit balance. Please top up to continue.",on.error(h.value),!0):!1},Te=()=>{h.value=null},Ee=S=>{if(!S)return[];if(Array.isArray(S))return S;if(typeof S=="string")try{return Ee(JSON.parse(S))}catch{return[]}if(typeof S=="object"){const i=S.slides;return i?Ee(i):Object.values(S)}return[]},et=async()=>{if(!ne.value)try{const S=await Ce.get(`/api/projects/${x.project.id}/defense/sessions/active`);if(S.data.session){await pe(S.data.session.id);return}const i=w.value.map(Q=>Q.id);await m({selected_panelists:i,difficulty_level:"undergraduate",question_limit:Ut}),f.value=!0,n.value="simulation",Z.value&&await he()}catch(S){if(ie(S))return;console.error("Failed to start simulation:",S)}},tt=async(S=!1)=>{if(!b.value){b.value=S,console.log("[Defense] Finish & Analysis clicked",{sessionId:Z.value?.id,status:Z.value?.status});try{if(Z.value){const i=await P(Z.value.id);console.log("[Defense] endSession response",i),i?.recommendations&&i.recommendations.toLowerCase().includes("credit balance")&&(h.value=i.recommendations,on.error(i.recommendations)),S&&on.success("Simulation completed. Your score is ready.")}}catch(i){if(ie(i))return;console.error("[Defense] Failed to end simulation:",i)}finally{await D(),f.value=!1,n.value="preparation",b.value=!1}}},bt=async()=>{if(!Z.value||!z.value.trim())return;const S=z.value.trim();z.value="";try{if(await te(Z.value.id,S),Z.value?.question_limit&&Z.value.questions_asked>=Z.value.question_limit){await tt(!0);return}await he()}catch(i){if(ie(i))return;console.error("Failed to submit response:",i)}},he=async(S=!1)=>{if(Z.value){We.value=!0;try{const i=await W(Z.value.id,void 0,S);ye.value=i.panelist_persona??null}catch(i){if(ie(i))return;const Q=i?.response?.data?.message;if(Q&&Q.toLowerCase().includes("question limit")){await tt(!0);return}console.error("Failed to fetch next question:",i)}finally{We.value=!1}}},Re=async()=>{!Z.value||We.value||await he(!0)},De=async()=>{if(!O.value){O.value=!0;try{const i=(await Ce.get(`/api/projects/${x.project.id}/defense/executive-briefing`,{params:{force_refresh:1}})).data.briefing;if(typeof i=="string"&&i.includes("```json"))try{const Q=i.replace(/```json\n?|\n?```/g,""),Pe=JSON.parse(Q);F.value=Pe.slides||[],r.value=null}catch(Q){console.warn("Failed to parse briefing JSON",Q),r.value=i,F.value=[]}else typeof i=="object"&&i.slides?(F.value=i.slides,r.value=null):(r.value=i??null,F.value=[])}catch(S){ie(S),console.error("Failed to load executive briefing:",S)}finally{O.value=!1}}},Se=S=>{if(S)if(typeof S=="string"&&S.includes("```json"))try{const i=S.replace(/```json\n?|\n?```/g,""),Q=JSON.parse(i);T.value=Q.slides||[],M.value=null}catch(i){console.warn("Failed to parse presentation guide JSON",i),M.value=S,T.value=[]}else if(typeof S=="object"&&S.slides)T.value=S.slides,M.value=null;else if(typeof S=="string"&&S.trim().startsWith("{"))try{const i=JSON.parse(S);T.value=i.slides||[],M.value=null}catch{M.value=S,T.value=[]}else M.value=S,T.value=[]},Ke=async()=>{if(!(Ae.value||!_e.value.trim())){Ae.value=!0;try{const S=await Ce.post(`/api/projects/${x.project.id}/defense/opening-statement/analyze`,{opening_statement:_e.value.trim()});je.value=S.data.analysis??null}catch(S){ie(S),console.error("Failed to analyze opening statement:",S)}finally{Ae.value=!1}}},Ye=async()=>{if(!Oe.value){Oe.value=!0;try{const S=await Ce.get(`/api/projects/${x.project.id}/defense/opening-statement`,{params:{force_refresh:1}});_e.value=S.data.opening_statement??""}catch(S){ie(S),console.error("Failed to generate opening statement:",S)}finally{Oe.value=!1}}},A=S=>{if(!S){H.value="idle",I.value=null,c.value=null,G.value=null,J.value=[],V.value=[];return}H.value=S.status||"idle",I.value=S.pptx_url??null,c.value=S.error_message??null,G.value=S.id??null,S.is_wysiwyg?(V.value=On(S.slides||[]),J.value=Sf(V.value)):(J.value=Ee(S.slides),V.value=On(J.value)),V.value.length&&we.value>=V.value.length&&(we.value=0)},q=()=>{N.value&&(clearInterval(N.value),N.value=null)},ce=()=>{q(),N.value=setInterval(()=>{xe()},6e3)},xe=async()=>{try{const i=(await Ce.get(`/api/projects/${x.project.id}/defense/deck`)).data.deck??null;A(i),(i?.status==="ready"||i?.status==="outlined"||i?.status==="failed"||i?.status==="idle")&&q()}catch(S){if(ie(S))return;console.error("Failed to refresh defense deck status:",S)}},be=async(S=!1)=>{if(!_.value){_.value=!0;try{const i=await Ce.post(`/api/projects/${x.project.id}/defense/deck`,{force_refresh:S?1:0});A(i.data.deck??null),i.data.deck?.status!=="ready"&&ce()}catch(i){if(ie(i))return;console.error("Failed to generate defense deck:",i)}finally{_.value=!1}}},He=async()=>{if(G.value){_.value=!0;try{const S=await Ce.post(`/api/projects/${x.project.id}/defense/deck/${G.value}/export`);A(S.data.deck??null),(()=>{q(),N.value=setInterval(async()=>{try{const Pe=(await Ce.get(`/api/projects/${x.project.id}/defense/deck`)).data.deck??null;if(A(Pe),Pe?.status==="ready"&&Pe?.pptx_url){q(),_.value=!1;const ft=document.createElement("a");ft.href=Pe.pptx_url,ft.click()}else Pe?.status==="failed"&&(q(),_.value=!1)}catch(Q){console.error("Poll failed",Q)}},3e3)})()}catch(S){if(ie(S))return;console.error("Failed to export defense deck:",S),_.value=!1}}},Ne=async S=>{if(G.value){$e.value=!0;try{const i=await Ce.patch(`/api/projects/${x.project.id}/defense/deck/${G.value}`,{slides:S});A(i.data.deck??null)}catch(i){if(ie(i))return;console.error("Failed to save defense deck slides:",i)}finally{$e.value=!1}}},Ue=In(S=>{Ne(S)},800),qe=S=>{J.value=S,Ue(S)},nt=S=>{V.value=S,Xe(S)},Ge=async S=>{if(G.value){$e.value=!0;try{const i=await Ce.patch(`/api/projects/${x.project.id}/defense/deck/${G.value}`,{slides:S,is_wysiwyg:!0});i.data.deck&&(H.value=i.data.deck.status,I.value=i.data.deck.pptx_url??null)}catch(i){if(ie(i))return;console.error("Failed to save WYSIWYG slides:",i)}finally{$e.value=!1}}},Xe=In(S=>{Ge(S)},800),yt=async()=>{if(!j.value){j.value=!0;try{const S=await Ce.post(`/api/projects/${x.project.id}/defense/questions/generate`,{count:5});k.value=S.data.questions||[]}catch(S){ie(S),console.error("Failed to generate predicted questions:",S)}finally{j.value=!1}}},$t=async()=>{if(!$.value){$.value=!0;try{const S=await Ce.get(`/api/projects/${x.project.id}/defense/questions`,{params:{limit:5,skip_generation:1}});k.value=S.data.questions||[]}catch(S){ie(S),console.error("Failed to load predicted questions:",S)}finally{$.value=!1}}},at=async()=>{try{const i=(await Ce.get(`/api/projects/${x.project.id}/defense/preparation`)).data.preparation;if(i){if(r.value=i.executive_briefing??null,i.executive_briefing){if(typeof i.executive_briefing=="string"&&i.executive_briefing.includes("```json"))try{const Q=i.executive_briefing.replace(/```json\n?|\n?```/g,""),Pe=JSON.parse(Q);F.value=Pe.slides||[],r.value=null}catch{}else if(typeof i.executive_briefing=="object"&&i.executive_briefing.slides)F.value=i.executive_briefing.slides,r.value=null;else if(typeof i.executive_briefing=="string"&&i.executive_briefing.trim().startsWith("{"))try{const Q=JSON.parse(i.executive_briefing);F.value=Q.slides||[],r.value=null}catch{}}i.presentation_guide&&Se(i.presentation_guide),_e.value=i.opening_statement??"",je.value=i.opening_analysis??null,i.opening_statement||await Ye()}}catch(S){ie(S),console.error("Failed to load preparation data:",S)}},Je=E([]),y=E(!1),D=async()=>{if(!y.value){y.value=!0;try{const S=await Ce.get(`/api/projects/${x.project.id}/defense/sessions`);Je.value=S.data.sessions||[]}catch(S){ie(S),console.error("Failed to load session history:",S)}finally{y.value=!1}}},pe=async S=>{await U(S),f.value=!0,n.value="simulation"};async function ve(){try{const S=await Ce.get(`/api/projects/${x.project.id}/defense/sessions/active`);S.data.session&&await pe(S.data.session.id)}catch(S){ie(S),console.error("Failed to load active session:",S)}}const Be=le(()=>f.value?"bg-zinc-950 text-white":"bg-background"),lt=le(()=>K.value||[]),wt=le(()=>p.value?.readiness_score??d.value),Wt=le(()=>p.value?.clarity??0),Ft=le(()=>p.value?.technical_depth??0);le(()=>p.value?.question_coverage??0),le(()=>p.value?.confidence_score??0),le(()=>p.value?.response_time??0);const Rt=le(()=>lt.value.reduce((S,i)=>{if(i.role!=="panelist"||i.is_follow_up)return S;const Q=i.panelist_persona??"panelist";return S[Q]=(S[Q]||0)+1,S},{})),At=le(()=>Object.values(Rt.value).reduce((S,i)=>S+i,0)),Ht=le(()=>Ut),v=le(()=>{const S=w.value;if(S.length===0)return{};const i=Math.floor(Ut/S.length),Q=Ut%S.length,Pe=S.findIndex(ft=>ft.id==="generalist");return S.reduce((ft,en,_n)=>{const Qn=Pe>=0?_n===Pe:_n===0;return ft[en.id]=i+(Qn?Q:0),ft},{})}),o=le(()=>Z.value?.question_limit?`${At.value}/${Z.value.question_limit}`:"Adaptive"),u=S=>S.created_at?new Date(S.created_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):"",g=S=>S?new Date(S).toLocaleDateString():"";St(()=>{$t(),at(),D(),ve(),xe()});const X=E(null),ze=async()=>{await ot(),X.value&&(X.value.scrollTop=X.value.scrollHeight)};return Le(lt,()=>{ze()},{deep:!0}),Le(f,S=>{S&&ze()}),dn(()=>{q(),Ue.cancel()}),(S,i)=>(l(),me(Gl,{title:`Defense Preparation: ${S.project.title}`},{default:C(()=>[e("div",{class:ge(["min-h-screen transition-colors duration-700",Be.value])},[e("div",Cf,[e("div",$f,[e("div",Ff,[e("div",If,[s(t(ae),{variant:"ghost",size:"sm",onClick:i[0]||(i[0]=Q=>t(Hl).visit(S.route("projects.writing",S.project.slug))),class:ge(["h-8 w-8 rounded-full p-0",f.value?"text-zinc-400 hover:text-white":""])},{default:C(()=>[s(t(nn),{class:"h-4 w-4"})]),_:1},8,["class"]),s(t(_t),{variant:"outline",class:"gap-1 border-primary/20 bg-primary/5 text-primary"},{default:C(()=>[s(t(Nl),{class:"h-3 w-3"}),i[10]||(i[10]=se(" Defense Readiness ",-1))]),_:1})]),e("h1",{class:ge(["text-3xl font-bold tracking-tight md:text-6xl font-display",f.value?"text-white":"text-foreground"])}," Prepare for Victory ",2),e("p",{class:ge(["max-w-2xl text-base md:text-lg text-muted-foreground",f.value?"text-zinc-400":""])}," Master your project defense with AI-predicted questions, structured presentation guides, and high-stakes simulation. ",2),h.value?(l(),a("div",Tf,[e("span",null,B(h.value),1),s(t(ae),{variant:"ghost",size:"sm",class:"h-7 px-2 text-amber-100/90 hover:text-white",onClick:Te},{default:C(()=>[...i[11]||(i[11]=[se(" Dismiss ",-1)])]),_:1})])):Y("",!0)]),ct(e("div",Ef,[e("div",Af,[(l(),a("svg",jf,[i[12]||(i[12]=e("circle",{class:"text-muted/20 md:hidden","stroke-width":"5",stroke:"currentColor",fill:"transparent",r:"28",cx:"32",cy:"32"},null,-1)),i[13]||(i[13]=e("circle",{class:"text-muted/20 hidden md:block","stroke-width":"6",stroke:"currentColor",fill:"transparent",r:"34",cx:"40",cy:"40"},null,-1)),e("circle",{class:"text-primary transition-all duration-1000 ease-out md:hidden","stroke-width":"5","stroke-dasharray":2*Math.PI*28,"stroke-dashoffset":2*Math.PI*28*(1-wt.value/100),"stroke-linecap":"round",stroke:"currentColor",fill:"transparent",r:"28",cx:"32",cy:"32"},null,8,Bf),e("circle",{class:"text-primary transition-all duration-1000 ease-out hidden md:block","stroke-width":"6","stroke-dasharray":2*Math.PI*34,"stroke-dashoffset":2*Math.PI*34*(1-wt.value/100),"stroke-linecap":"round",stroke:"currentColor",fill:"transparent",r:"34",cx:"40",cy:"40"},null,8,Df)])),e("span",Pf,B(wt.value)+"%",1)]),i[14]||(i[14]=e("span",{class:"text-[10px] md:text-xs font-semibold uppercase tracking-wider text-muted-foreground text-center"},"Readiness Score",-1))],512),[[Tn,!f.value]])]),ct(e("div",Mf,[e("button",{onClick:i[1]||(i[1]=Q=>n.value="preparation"),class:ge(["flex-1 sm:flex-none flex items-center justify-center gap-2 px-4 md:px-6 py-2 rounded-xl text-sm font-medium transition-all",n.value==="preparation"?"bg-background shadow-sm text-foreground":"text-muted-foreground hover:text-foreground"])},[s(t(Ul),{class:"h-4 w-4"}),i[15]||(i[15]=e("span",{class:"hidden sm:inline"},"Preparation Suite",-1)),i[16]||(i[16]=e("span",{class:"sm:hidden"},"Prep",-1))],2),e("button",{onClick:i[2]||(i[2]=Q=>n.value="simulation"),class:ge(["flex-1 sm:flex-none flex items-center justify-center gap-2 px-4 md:px-6 py-2 rounded-xl text-sm font-medium transition-all",n.value==="simulation"?"bg-background shadow-sm text-foreground":"text-muted-foreground hover:text-foreground"])},[s(t(ln),{class:"h-4 w-4"}),i[17]||(i[17]=e("span",{class:"hidden sm:inline"},"Simulation Lab",-1)),i[18]||(i[18]=e("span",{class:"sm:hidden"},"Sim",-1))],2)],512),[[Tn,!f.value]]),n.value==="preparation"&&!f.value?(l(),a("div",Lf,[e("div",Of,[fe.value?(l(),a(ee,{key:1},[e("div",qf,[s(t(Ze),{class:"overflow-hidden border-none bg-zinc-900/30 shadow-none ring-1 ring-border/50"},{default:C(()=>[s(t(vt),{class:"pb-2"},{default:C(()=>[e("div",Kf,[s(t(ht),{class:"flex items-center gap-2 text-xl md:text-2xl font-display"},{default:C(()=>[s(t(Tt),{class:"h-5 w-5 text-rose-500"}),i[25]||(i[25]=se(" Predicted Defense Questions ",-1))]),_:1}),e("div",Jf,[s(t(_t),{variant:"secondary",class:"font-mono text-[10px]"},{default:C(()=>[se(B(k.value.length)+" TOP QUESTIONS",1)]),_:1}),s(t(ae),{variant:"ghost",size:"sm",class:"text-xs h-8",onClick:yt,disabled:j.value},{default:C(()=>[s(t(rt),{class:"h-3.5 w-3.5"}),se(" "+B(j.value?"Generating...":"Generate"),1)]),_:1},8,["disabled"]),s(t(ae),{variant:"ghost",size:"icon",class:"h-8 w-8 text-zinc-500 hover:text-rose-400",onClick:Fe,title:"Swap position"},{default:C(()=>[s(t(Nt),{class:"h-4 w-4"})]),_:1})])]),s(t(gt),{class:"text-rose-600/70 dark:text-rose-400/70 text-sm"},{default:C(()=>[...i[26]||(i[26]=[se(" Identify and prepare for high-probability questions examiners might ask. ",-1)])]),_:1})]),_:1}),s(t(st),{class:"relative pb-6 md:pb-10 px-6 md:px-10 min-h-[450px]"},{default:C(()=>[s(Mn,{questions:k.value,"is-loading":j.value},null,8,["questions","is-loading"])]),_:1})]),_:1})]),s(t(Ze),{class:"overflow-hidden border-none bg-zinc-900/30 shadow-none ring-1 ring-border/50 animate-in fade-in slide-in-from-bottom-4 duration-500 delay-75"},{default:C(()=>[s(t(vt),{class:"pb-2"},{default:C(()=>[e("div",Qf,[s(t(ht),{class:"flex items-center gap-2 text-xl md:text-2xl font-display"},{default:C(()=>[s(t(rt),{class:"h-5 w-5 text-indigo-500"}),i[27]||(i[27]=se(" Executive Briefing ",-1))]),_:1}),e("div",Zf,[s(t(ae),{variant:"ghost",size:"sm",class:"text-xs gap-1.5 h-8 w-fit",onClick:De,disabled:O.value},{default:C(()=>[s(t(jt),{class:"h-3.5 w-3.5"}),se(" "+B(O.value?"Loading...":"Refresh AI"),1)]),_:1},8,["disabled"]),s(t(ae),{variant:"ghost",size:"icon",class:"h-8 w-8 text-zinc-500 hover:text-indigo-400",onClick:Fe,title:"Swap position"},{default:C(()=>[s(t(Nt),{class:"h-4 w-4"})]),_:1})])]),s(t(gt),{class:"text-indigo-600/70 dark:text-indigo-400/70 text-sm"},{default:C(()=>[...i[28]||(i[28]=[se("Your project's core value proposition, synthesized for your defense. ",-1)])]),_:1})]),_:1}),s(t(st),{class:"relative pb-6 md:pb-10 px-6 md:px-10 min-h-[400px]"},{default:C(()=>[F.value.length>0?(l(),a("div",ep,[s(Pn,{slides:F.value,"is-loading":O.value,onRefresh:De},null,8,["slides","is-loading"])])):r.value?(l(),a("div",tp,[i[29]||(i[29]=e("div",{class:"absolute -left-6 top-0 bottom-0 w-1 bg-gradient-to-b from-indigo-500/80 via-purple-500/80 to-transparent rounded-full opacity-60"},null,-1)),s(rn,{content:r.value,"show-font-controls":!1,"viewer-class":"prose-sm md:prose-base dark:prose-invert leading-relaxed",class:"!bg-transparent"},null,8,["content"])])):(l(),a("div",np,[e("div",lp,[s(t(rt),{class:"h-6 w-6 text-indigo-500/50"})]),i[30]||(i[30]=e("p",{class:"text-base text-muted-foreground italic max-w-xs"}," No executive briefing yet. Click “Refresh AI” to generate a comprehensive summary of your research. ",-1))]))]),_:1})]),_:1})],64)):(l(),a(ee,{key:0},[s(t(Ze),{class:"overflow-hidden border-none bg-zinc-900/30 shadow-none ring-1 ring-border/50 animate-in fade-in slide-in-from-bottom-4 duration-500"},{default:C(()=>[s(t(vt),{class:"pb-2"},{default:C(()=>[e("div",Wf,[s(t(ht),{class:"flex items-center gap-2 text-xl md:text-2xl font-display"},{default:C(()=>[s(t(rt),{class:"h-5 w-5 text-indigo-500"}),i[19]||(i[19]=se(" Executive Briefing ",-1))]),_:1}),e("div",Rf,[s(t(ae),{variant:"ghost",size:"sm",class:"text-xs gap-1.5 h-8 w-fit",onClick:De,disabled:O.value},{default:C(()=>[s(t(jt),{class:"h-3.5 w-3.5"}),se(" "+B(O.value?"Loading...":"Refresh AI"),1)]),_:1},8,["disabled"]),s(t(ae),{variant:"ghost",size:"icon",class:"h-8 w-8 text-zinc-500 hover:text-indigo-400",onClick:Fe,title:"Swap position"},{default:C(()=>[s(t(Nt),{class:"h-4 w-4"})]),_:1})])]),s(t(gt),{class:"text-indigo-600/70 dark:text-indigo-400/70 text-sm"},{default:C(()=>[...i[20]||(i[20]=[se("Your project's core value proposition, synthesized for your defense. ",-1)])]),_:1})]),_:1}),s(t(st),{class:"relative pb-6 md:pb-10 px-6 md:px-10 min-h-[400px]"},{default:C(()=>[F.value.length>0?(l(),a("div",Hf,[s(Pn,{slides:F.value,"is-loading":O.value,onRefresh:De},null,8,["slides","is-loading"])])):r.value?(l(),a("div",Nf,[i[21]||(i[21]=e("div",{class:"absolute -left-6 top-0 bottom-0 w-1 bg-gradient-to-b from-indigo-500/80 via-purple-500/80 to-transparent rounded-full opacity-60"},null,-1)),s(rn,{content:r.value,"show-font-controls":!1,"viewer-class":"prose-sm md:prose-base dark:prose-invert leading-relaxed",class:"!bg-transparent"},null,8,["content"])])):(l(),a("div",Uf,[e("div",Gf,[s(t(rt),{class:"h-6 w-6 text-indigo-500/50"})]),i[22]||(i[22]=e("p",{class:"text-base text-muted-foreground italic max-w-xs"}," No executive briefing yet. Click “Refresh AI” to generate a comprehensive summary of your research. ",-1))]))]),_:1})]),_:1}),e("div",Xf,[s(t(Ze),{class:"overflow-hidden border-none bg-zinc-900/30 shadow-none ring-1 ring-border/50"},{default:C(()=>[s(t(vt),{class:"pb-2"},{default:C(()=>[e("div",Vf,[s(t(ht),{class:"flex items-center gap-2 text-xl md:text-2xl font-display"},{default:C(()=>[s(t(Tt),{class:"h-5 w-5 text-rose-500"}),i[23]||(i[23]=se(" Predicted Defense Questions ",-1))]),_:1}),e("div",Yf,[s(t(_t),{variant:"secondary",class:"font-mono text-[10px]"},{default:C(()=>[se(B(k.value.length)+" TOP QUESTIONS",1)]),_:1}),s(t(ae),{variant:"ghost",size:"sm",class:"text-xs h-8",onClick:yt,disabled:j.value},{default:C(()=>[s(t(rt),{class:"h-3.5 w-3.5"}),se(" "+B(j.value?"Generating...":"Generate"),1)]),_:1},8,["disabled"]),s(t(ae),{variant:"ghost",size:"icon",class:"h-8 w-8 text-zinc-500 hover:text-rose-400",onClick:Fe,title:"Swap position"},{default:C(()=>[s(t(Nt),{class:"h-4 w-4"})]),_:1})])]),s(t(gt),{class:"text-rose-600/70 dark:text-rose-400/70 text-sm"},{default:C(()=>[...i[24]||(i[24]=[se(" Identify and prepare for high-probability questions examiners might ask. ",-1)])]),_:1})]),_:1}),s(t(st),{class:"relative pb-6 md:pb-10 px-6 md:px-10 min-h-[450px]"},{default:C(()=>[s(Mn,{questions:k.value,"is-loading":j.value},null,8,["questions","is-loading"])]),_:1})]),_:1})])],64)),s(t(Ze),{class:"border-border/50 shadow-sm rounded-3xl overflow-hidden group"},{default:C(()=>[s(t(vt),{class:"pb-2"},{default:C(()=>[s(t(ht),{class:"flex items-center gap-2 text-base"},{default:C(()=>[s(t(sn),{class:"h-4 w-4 text-emerald-500"}),i[31]||(i[31]=se(" Opening Statement ",-1))]),_:1}),s(t(gt),null,{default:C(()=>[...i[32]||(i[32]=[se('Your 60-second "hook" to impress the panel.',-1)])]),_:1})]),_:1}),s(t(st),{class:"space-y-4"},{default:C(()=>[e("div",sp,[ct(e("textarea",{"onUpdate:modelValue":i[3]||(i[3]=Q=>_e.value=Q),rows:"4",class:"w-full rounded-2xl border-border/50 bg-muted/30 p-4 text-sm focus:ring-primary/20 transition-all",placeholder:"Type your opening statement here..."},null,512),[[Kt,_e.value]]),e("div",op,[s(t(ae),{variant:"outline",size:"icon",class:"h-8 w-8 rounded-full"},{default:C(()=>[s(t(sn),{class:"h-3.5 w-3.5"})]),_:1})])]),e("div",ap,[s(t(ae),{variant:"outline",class:"w-full text-xs font-bold gap-2 rounded-xl",onClick:Ye,disabled:Oe.value},{default:C(()=>[s(t(rt),{class:"h-3.5 w-3.5"}),se(" "+B(Oe.value?"Generating...":"GENERATE OPENING"),1)]),_:1},8,["disabled"]),s(t(ae),{variant:"secondary",class:"w-full text-xs font-bold gap-2 rounded-xl",onClick:Ke,disabled:Ae.value},{default:C(()=>[s(t(En),{class:"h-3.5 w-3.5"}),se(" "+B(Ae.value?"Analyzing...":"ANALYZE PITCH FLOW"),1)]),_:1},8,["disabled"])]),je.value?(l(),a("div",ip,[s(rn,{content:je.value,"show-font-controls":!1,class:"!bg-transparent","viewer-class":"prose-xs md:prose-sm"},null,8,["content"])])):Y("",!0)]),_:1})]),_:1})]),e("div",rp,[s(t(Ze),{class:"border-border/50 shadow-2xl shadow-indigo-500/10 rounded-3xl overflow-hidden bg-zinc-900/20"},{default:C(()=>[s(t(vt),{class:"relative overflow-hidden bg-gradient-to-br from-indigo-950 via-zinc-900 to-black text-white pb-6 border-b border-white/5"},{default:C(()=>[i[36]||(i[36]=e("div",{class:"absolute -right-6 -top-6 h-32 w-32 bg-indigo-500/10 rounded-full blur-3xl"},null,-1)),i[37]||(i[37]=e("div",{class:"absolute -left-10 -bottom-10 h-40 w-40 bg-purple-500/10 rounded-full blur-3xl"},null,-1)),e("div",dp,[e("div",cp,[s(t(cn),{class:"h-5 w-5 text-indigo-400"})]),s(t(ht),{class:"text-xl md:text-2xl font-display font-bold tracking-tight bg-gradient-to-r from-white to-zinc-400 bg-clip-text text-transparent"},{default:C(()=>[...i[33]||(i[33]=[se(" Presentation Guide",-1)])]),_:1})]),e("div",up,[s(t(gt),{class:"text-zinc-400 text-xs leading-relaxed max-w-[220px]"},{default:C(()=>[...i[34]||(i[34]=[se(" Step-by-step structure for high-impact defense slides. ",-1)])]),_:1}),e("div",fp,[J.value.length?(l(),a(ee,{key:0},[s(t(ae),{variant:"outline",size:"sm",class:"h-7 text-[10px] gap-1.5 border-white/5 bg-white/5 hover:bg-white/10 text-zinc-400",onClick:be,disabled:_.value},{default:C(()=>[s(t(Xn),{class:"h-3 w-3"}),i[35]||(i[35]=se(" Regenerate ",-1))]),_:1},8,["disabled"]),e("div",pp,[s(t(ae),{variant:"secondary",size:"sm",class:"h-7 text-[10px] gap-1.5 px-3 font-bold",onClick:He,disabled:_.value},{default:C(()=>[s(t(Vn),{class:"h-3 w-3"}),se(" "+B(_.value?"Generating...":"Download PPTX"),1)]),_:1},8,["disabled"]),s(t(ae),{variant:"ghost",size:"icon",class:"h-7 w-7 text-zinc-500 hover:text-white",onClick:i[4]||(i[4]=Q=>R.value=!0)},{default:C(()=>[s(t(Jt),{class:"h-3.5 w-3.5"})]),_:1})])],64)):(l(),me(t(ae),{key:1,variant:"secondary",size:"sm",class:"h-8 text-xs gap-1.5 font-bold",onClick:be,disabled:_.value},{default:C(()=>[s(t(rt),{class:"h-3.5 w-3.5"}),se(" "+B(_.value?"Generating...":"Generate Guide"),1)]),_:1},8,["disabled"]))])])]),_:1}),s(t(st),{class:"p-4 md:p-6 h-[500px] flex flex-col"},{default:C(()=>[H.value!=="idle"?(l(),a("div",gp,[H.value==="queued"?(l(),a("span",vp,"Deck queued.")):H.value==="outlining"?(l(),a("span",hp,"Generating slides with GPT-4o...")):H.value==="extracting"?(l(),a("span",xp,"Extracting chapter data...")):H.value==="extracted"?(l(),a("span",mp,"Extraction complete. Preparing slides...")):H.value==="generating"?(l(),a("span",bp,"Generating slides with GPT-4o...")):H.value==="outlined"?(l(),a("span",yp,"Slides ready for review.")):H.value==="rendering"?(l(),a("span",wp,"Rendering PPTX...")):H.value==="ready"?(l(),a("span",kp,"PPTX ready for download.")):H.value==="failed"?(l(),a("span",_p,"Failed to generate deck.")):Y("",!0)])):Y("",!0),H.value==="failed"&&c.value?(l(),a("div",Sp,B(c.value),1)):Y("",!0),s(gi,{project:S.project,slides:J.value,"active-index":we.value,"onUpdate:activeIndex":i[5]||(i[5]=Q=>we.value=Q),"is-saving":$e.value,compact:"","show-pptx":!!G.value,"pptx-url":I.value,"pptx-busy":_.value,"onUpdate:slides":qe,onToggleExpand:i[6]||(i[6]=Q=>R.value=!0),onDownloadPptx:He,onExportPptx:He},null,8,["project","slides","active-index","is-saving","show-pptx","pptx-url","pptx-busy"])]),_:1})]),_:1}),s(t(Xl),{open:R.value,"onUpdate:open":i[8]||(i[8]=Q=>R.value=Q)},{default:C(()=>[s(t(Vl),{class:"max-w-[98vw] w-full lg:max-w-[98vw] h-[95vh] flex flex-col p-0 bg-zinc-100 dark:bg-zinc-950 border-white/10 shadow-2xl overflow-hidden rounded-3xl"},{default:C(()=>[t(ke)?(l(),a("div",zp,[...i[38]||(i[38]=[e("div",{class:"max-w-2xl text-center px-6"},[e("div",{class:"mx-auto mb-4 inline-flex items-center rounded-full border border-zinc-200/70 bg-white px-4 py-1 text-[11px] font-semibold uppercase tracking-[0.25em] text-zinc-500 dark:border-white/10 dark:bg-white/5 dark:text-white/70"}," Coming Soon "),e("h3",{class:"text-2xl md:text-3xl font-display font-bold text-zinc-900 dark:text-white"}," Defense Slide Deck Editor "),e("p",{class:"mt-3 text-sm text-zinc-600 dark:text-white/70"}," We are polishing the slide deck editor before release. Once ready, you will be able to edit layouts, drag-and-drop elements, theme slides, and export a presentation-ready deck in minutes. ")],-1)])])):(l(),me(Du,{key:1,slides:V.value,"active-index":we.value,"is-saving":$e.value,"project-title":S.project.title,"onUpdate:slides":nt,"onUpdate:activeIndex":i[7]||(i[7]=Q=>we.value=Q),onExport:He},null,8,["slides","active-index","is-saving","project-title"]))]),_:1})]),_:1},8,["open"]),s(t(Ze),{class:"border-border/50 shadow-sm rounded-3xl overflow-hidden"},{default:C(()=>[s(t(vt),{class:"pb-2"},{default:C(()=>[s(t(ht),{class:"flex items-center gap-2 text-base"},{default:C(()=>[s(t(jt),{class:"h-4 w-4 text-amber-500"}),i[39]||(i[39]=se(" Session History ",-1))]),_:1}),s(t(gt),null,{default:C(()=>[...i[40]||(i[40]=[se("Your past defense simulations for this project.",-1)])]),_:1})]),_:1}),s(t(st),{class:"space-y-3"},{default:C(()=>[y.value?(l(),a("div",Cp," Loading sessions... ")):Je.value.length?(l(),a("div",Fp,[(l(!0),a(ee,null,oe(Je.value,Q=>(l(),a("div",{key:Q.id,class:"flex items-center justify-between gap-3 rounded-2xl border border-border/50 p-3"},[e("div",Ip,[e("div",Tp,B(g(Q.started_at||Q.created_at)),1),e("div",Ep,B(Q.status)+" • "+B(Q.questions_asked)+" Qs ",1)]),s(t(ae),{size:"sm",variant:"outline",onClick:Pe=>pe(Q.id)},{default:C(()=>[se(B(Q.status==="completed"?"Review":"Resume"),1)]),_:2},1032,["onClick"])]))),128))])):(l(),a("div",$p," No sessions yet. Start a simulation to create your first one. "))]),_:1})]),_:1})])])):Y("",!0),n.value==="simulation"&&!f.value?(l(),a("div",Ap,[e("div",jp,[i[41]||(i[41]=e("div",{class:"absolute -inset-4 bg-gradient-to-r from-primary to-purple-500 rounded-full opacity-20 blur-2xl animate-pulse"},null,-1)),s(t(ln),{class:"h-24 w-24 text-primary relative z-10"})]),i[52]||(i[52]=e("h2",{class:"text-3xl font-bold mb-4"},"The Mock Defense",-1)),i[53]||(i[53]=e("p",{class:"max-w-md text-center text-muted-foreground mb-12"}," Face a panel of AI examiners who will challenge your research from different perspectives. Record your session for post-defense feedback. ",-1)),e("div",Bp,[s(t(Ze),{class:"border-border/50 bg-card/50 backdrop-blur-sm rounded-3xl overflow-hidden"},{default:C(()=>[s(t(vt),{class:"pb-2"},{default:C(()=>[s(t(ht),{class:"text-base flex items-center gap-2"},{default:C(()=>[s(t(ln),{class:"h-4 w-4 text-primary"}),i[42]||(i[42]=se(" How the simulation works ",-1))]),_:1}),s(t(gt),null,{default:C(()=>[...i[43]||(i[43]=[se("Chair-moderated rotation with real-time feedback.",-1)])]),_:1})]),_:1}),s(t(st),{class:"space-y-3 text-sm text-muted-foreground"},{default:C(()=>[i[44]||(i[44]=e("p",null,"1) The chair opens, then panelists rotate with targeted questions.",-1)),i[45]||(i[45]=e("p",null,"2) You respond; the system scores clarity and technical depth.",-1)),i[46]||(i[46]=e("p",null,"3) Hints guide you before answers are revealed.",-1)),i[47]||(i[47]=e("p",null,"4) When the question limit is reached, the session auto-completes and scores.",-1)),e("p",Dp,"Total questions: "+B(Ht.value)+". Each question is worth 10 marks (100 total).",1)]),_:1})]),_:1}),s(t(Ze),{class:"border-border/50 bg-card/50 backdrop-blur-sm rounded-3xl overflow-hidden"},{default:C(()=>[s(t(vt),{class:"pb-2"},{default:C(()=>[s(t(ht),{class:"text-base flex items-center gap-2"},{default:C(()=>[s(t(Tt),{class:"h-4 w-4 text-emerald-500"}),i[48]||(i[48]=se(" Scoring breakdown ",-1))]),_:1}),s(t(gt),null,{default:C(()=>[...i[49]||(i[49]=[se("Readiness is a weighted summary of core metrics.",-1)])]),_:1})]),_:1}),s(t(st),{class:"space-y-3 text-sm text-muted-foreground"},{default:C(()=>[...i[50]||(i[50]=[e("div",{class:"flex items-center justify-between"},[e("span",null,"Per-question mark"),e("span",{class:"text-foreground font-semibold"},"10 marks total")],-1),e("div",{class:"flex items-center justify-between"},[e("span",null,"Derived from"),e("span",{class:"text-foreground font-semibold"},"Clarity + Depth")],-1),e("div",{class:"flex items-center justify-between"},[e("span",null,"Coverage, confidence, and response time"),e("span",{class:"text-foreground font-semibold"},"Shown as diagnostics")],-1),e("div",{class:"text-xs text-muted-foreground/80"}," 10 questions x 10 marks each = 100 total marks. Readiness uses clarity/depth averages. ",-1)])]),_:1})]),_:1})]),e("div",Pp,[(l(!0),a(ee,null,oe(w.value,Q=>(l(),me(t(Ze),{key:Q.id,class:"border-border/50 bg-card/50 backdrop-blur-sm rounded-3xl overflow-hidden hover:border-primary/30 transition-all"},{default:C(()=>[s(t(st),{class:"p-8 text-center space-y-3"},{default:C(()=>[e("div",Mp,B(Q.avatar),1),e("h4",Lp,B(Q.name),1),s(t(_t),{variant:"secondary",class:"text-[10px]"},{default:C(()=>[se(B(Q.role),1)]),_:2},1024),e("p",Op,B(Q.name==="The Skeptic"?"High pressure, doubts your findings.":Q.name==="The Methodologist"?"Strict on research design and ethics.":"Focuses on the bigger picture."),1)]),_:2},1024)]),_:2},1024))),128))]),s(t(ae),{size:"lg",onClick:et,disabled:t(ne),class:"px-12 py-8 text-xl font-bold rounded-3xl shadow-2xl shadow-primary/20 gap-4 hover:scale-105 transition-all"},{default:C(()=>[s(t(mn),{class:"h-6 w-6 fill-current"}),i[51]||(i[51]=se(" START SIMULATION ",-1))]),_:1},8,["disabled"])])):Y("",!0),f.value?(l(),a("div",Wp,[e("div",Rp,[e("div",Hp,[i[55]||(i[55]=e("div",{class:"h-3 w-3 rounded-full bg-rose-600 animate-pulse"},null,-1)),i[56]||(i[56]=e("span",{class:"text-xs font-bold tracking-[0.2em] text-zinc-500 uppercase"},"Live Simulation",-1)),e("div",Np,[s(t(jt),{class:"h-3.5 w-3.5 text-zinc-400"}),i[54]||(i[54]=e("span",{class:"text-sm font-mono text-zinc-300"},"14:22",-1))]),e("div",Up,[s(t(Tt),{class:"h-3.5 w-3.5 text-zinc-400"}),e("span",Gp,"Questions "+B(o.value),1)])]),s(t(ae),{variant:"ghost",onClick:tt,class:"rounded-full text-zinc-400 hover:text-white hover:bg-zinc-900 gap-2"},{default:C(()=>[i[57]||(i[57]=se(" Finish & Analysis ",-1)),s(t(nn),{class:"h-4 w-4 rotate-180"})]),_:1})]),e("div",Xp,[e("div",Vp,[i[63]||(i[63]=e("h3",{class:"text-[10px] md:text-sm font-bold text-zinc-500 uppercase tracking-widest px-2"}," The Panel",-1)),e("div",Yp,[(l(!0),a(ee,null,oe(w.value,Q=>(l(),me(t(Ze),{key:Q.id,class:"bg-zinc-900/50 border-zinc-800 hover:border-zinc-700 transition-all rounded-3xl"},{default:C(()=>[s(t(st),{class:"p-4 md:p-6"},{default:C(()=>[e("div",qp,[e("div",Kp,B(Q.avatar),1),e("div",Jp,[e("div",Qp,[e("span",Zp,B(Q.name),1),We.value&&(!ye.value||ye.value===Q.id)?(l(),me(t(_t),{key:0,class:"bg-amber-500/10 text-amber-500 border-none text-[8px] h-4 shrink-0"},{default:C(()=>[...i[58]||(i[58]=[se(" THINKING",-1)])]),_:1})):Y("",!0)]),e("span",eg,B(Q.role),1),e("div",tg," Questions asked: "+B(Rt.value[Q.id]??0)+" / "+B(v.value[Q.id]??0),1)])])]),_:2},1024)]),_:2},1024))),128))]),s(t(Ze),{class:"bg-zinc-900 border-none rounded-3xl p-4 md:p-6 mt-6 md:mt-12 bg-gradient-to-br from-zinc-900 to-black"},{default:C(()=>[i[62]||(i[62]=e("h4",{class:"text-[10px] md:text-xs font-bold text-zinc-500 mb-4 uppercase"},"Live Performance",-1)),e("div",ng,[e("div",lg,[e("div",sg,[i[59]||(i[59]=e("span",{class:"text-zinc-400"},"Clarity",-1)),e("span",og,B(Wt.value)+"%",1)]),s(t(an),{"model-value":Wt.value,class:"h-1 bg-zinc-800","indicator-class":"bg-blue-500"},null,8,["model-value"])]),e("div",ag,[e("div",ig,[i[60]||(i[60]=e("span",{class:"text-zinc-400"},"Depth",-1)),e("span",rg,B(Ft.value)+"%",1)]),s(t(an),{"model-value":Ft.value,class:"h-1 bg-zinc-800","indicator-class":"bg-emerald-500"},null,8,["model-value"])]),e("div",dg,[e("div",cg,[i[61]||(i[61]=e("span",{class:"text-zinc-400"},"Confidence",-1)),e("span",ug,B(t(p)?.confidence_score??0)+"%",1)]),s(t(an),{"model-value":t(p)?.confidence_score??0,class:"h-1 bg-zinc-800","indicator-class":"bg-rose-500"},null,8,["model-value"])])])]),_:1})]),e("div",fg,[e("div",{ref_key:"chatContainer",ref:X,class:"flex-grow p-8 overflow-y-auto custom-scrollbar"},[e("div",pg,[(l(!0),a(ee,null,oe(lt.value,(Q,Pe)=>(l(),a("div",{key:Pe,class:ge(["group animate-in fade-in slide-in-from-bottom-2 duration-500",Q.role==="student"?"flex flex-col items-end":"flex flex-col items-start"])},[e("div",gg,[e("span",vg,B(Q.role==="panelist"?Ie.value[Q.panelist_persona||""]||"Panelist":"Candidate"),1),e("span",hg,B(u(Q)),1)]),e("div",{class:ge(["p-5 rounded-3xl text-sm leading-relaxed max-w-[85%]",Q.role==="student"?"bg-zinc-100 text-zinc-950 rounded-tr-none":"bg-zinc-800/80 text-zinc-200 border border-zinc-700/50 rounded-tl-none"])},B(Q.content),3),Q.role==="panelist"?(l(),a("div",xg,[e("button",mg,[s(t(Tt),{class:"h-3 w-3"}),i[64]||(i[64]=se(" View Strategy ",-1))]),e("button",bg,[s(t(En),{class:"h-3 w-3"}),i[65]||(i[65]=se(" Analyze Critique ",-1))])])):Y("",!0)],2))),128))])],512),e("div",yg,[e("div",wg,[ct(e("textarea",{"onUpdate:modelValue":i[9]||(i[9]=Q=>z.value=Q),placeholder:"Speak your defense answer...",class:"w-full bg-zinc-950 border-zinc-800 rounded-2xl py-4 md:py-6 px-4 md:px-6 pr-20 md:pr-24 text-zinc-100 focus:ring-primary/40 focus:border-primary/40 placeholder-zinc-700 transition-all resize-none shadow-2xl text-sm md:text-base",disabled:t(de),rows:"2"},null,8,kg),[[Kt,z.value]]),e("div",_g,[i[66]||(i[66]=e("div",{class:"hidden sm:flex gap-1 h-8 px-2 items-center bg-zinc-900 rounded-full border border-zinc-800"},[e("div",{class:"h-2 w-0.5 bg-rose-500 animate-pulse"}),e("div",{class:"h-4 w-0.5 bg-rose-500 animate-pulse delay-75"}),e("div",{class:"h-2 w-0.5 bg-rose-500 animate-pulse delay-150"})],-1)),s(t(ae),{size:"icon",onClick:bt,disabled:t(de),class:"h-9 w-9 md:h-10 md:w-10 rounded-full bg-primary hover:bg-primary/90 text-white shadow-lg shadow-primary/20"},{default:C(()=>[s(t(nn),{class:"h-4 w-4 md:h-5 md:w-5 rotate-180"})]),_:1},8,["disabled"])])]),e("div",Sg,[e("button",zg,[s(t(sn),{class:"h-3.5 w-3.5"}),i[67]||(i[67]=se(" Hold Space to Speak ",-1))]),e("button",{class:"flex items-center gap-2 text-[10px] font-bold text-zinc-500 hover:text-white transition-colors uppercase tracking-widest",onClick:Re},[s(t(jt),{class:"h-3.5 w-3.5"}),i[68]||(i[68]=se(" Request Hint ",-1))])])])])])])):Y("",!0)])],2)]),_:1},8,["title"]))}}),e0=ut(Cg,[["__scopeId","data-v-50c14bf3"]]);export{e0 as default};
