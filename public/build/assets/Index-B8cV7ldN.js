import{bt as K,dU as M,cn as j,co as m,cp as a,cq as s,bE as e,cr as d,dV as X,cs as n,dk as Y,dW as H,ce as P,cl as U,bx as v,dX as Q,ch as R,ck as C,bs as S,dG as Z,bu as ee,cG as p,e6 as te,ct as u,cA as se,cL as re,dN as ae,cB as f,cS as oe,df as le,dw as de}from"./vendor-DwcF3VNb.js";import{_ as ne}from"./AdminLayout.vue_vue_type_script_setup_true_lang-Cjul3uBB.js";import{_ as ie}from"./DataTable.vue_vue_type_script_setup_true_lang-DNvUOLdH.js";import{_ as ue}from"./index-BU6y8D-V.js";import{_ as z}from"./Switch.vue_vue_type_script_setup_true_lang-1_DMAlPr.js";import{_ as V}from"./index-BpTO5Kag.js";import{_ as ce,a as me,b as _e,c as T,d as pe,e as fe}from"./Sonner.vue_vue_type_script_setup_true_lang-kLZ_SglN.js";import{_ as A,a as E}from"./CardContent.vue_vue_type_script_setup_true_lang-ByVWGonT.js";import{_ as ge}from"./CardDescription.vue_vue_type_script_setup_true_lang-DCwZv7vk.js";import{_ as N,a as L}from"./CardTitle.vue_vue_type_script_setup_true_lang-CANz9L_6.js";import{_ as h}from"./Input.vue_vue_type_script_setup_true_lang-CQe6L5n4.js";import{_ as x}from"./Label.vue_vue_type_script_setup_true_lang-BCx0cnBe.js";import{_ as F}from"./Textarea.vue_vue_type_script_setup_true_lang-CLVewTca.js";import{_ as ve}from"./Checkbox.vue_vue_type_script_setup_true_lang-ia8HOwdx.js";import{_ as xe,a as ye}from"./index-cXKiD0GD.js";import{_ as be}from"./AlertTitle.vue_vue_type_script_setup_true_lang-D6lURlAb.js";import{_ as we,a as he}from"./DialogContent.vue_vue_type_script_setup_true_lang-DTGeh0zi.js";import{_ as Ve}from"./DialogDescription.vue_vue_type_script_setup_true_lang-DJcKnsJu.js";import{_ as ke,a as $e}from"./DialogTitle.vue_vue_type_script_setup_true_lang-CCtpPhJI.js";import"./UserInfo.vue_vue_type_script_setup_true_lang-CpzsT-yS.js";import"./TooltipTrigger.vue_vue_type_script_setup_true_lang-C_drGNy-.js";import"./TableHeader.vue_vue_type_script_setup_true_lang-CoHpN3ea.js";const Ce=K({__name:"CategoryActions",props:{category:{}},setup(l){const c=l,y=M("onEditCategory"),k=()=>{confirm(`Delete ${c.category.name}?`)&&P.delete(U("admin.system.project-categories.destroy",{category:c.category.slug}),{preserveScroll:!0})};return(D,_)=>(m(),j(e(fe),null,{default:a(()=>[s(e(ce),{"as-child":""},{default:a(()=>[s(e(V),{variant:"ghost",class:"h-8 w-8 p-0"},{default:a(()=>[_[1]||(_[1]=d("span",{class:"sr-only"},"Open menu",-1)),s(e(X),{class:"h-4 w-4"})]),_:1})]),_:1}),s(e(me),{align:"end"},{default:a(()=>[s(e(_e),null,{default:a(()=>[..._[2]||(_[2]=[n("Actions",-1)])]),_:1}),s(e(T),{onClick:_[0]||(_[0]=b=>e(y)?.(c.category))},{default:a(()=>[s(e(Y),{class:"mr-2 h-4 w-4"}),_[3]||(_[3]=n(" Edit ",-1))]),_:1}),s(e(pe)),s(e(T),{onClick:k,class:"text-rose-600 focus:text-rose-600 focus:bg-rose-50"},{default:a(()=>[s(e(H),{class:"mr-2 h-4 w-4"}),_[4]||(_[4]=n(" Delete ",-1))]),_:1})]),_:1})]),_:1}))}}),je=(l,c)=>{P.put(U("admin.system.project-categories.toggle-active",{category:l.slug}),{is_active:c},{preserveScroll:!0})},Ue=[{accessorKey:"name",header:({column:l})=>v(V,{variant:"ghost",class:"-ml-2 text-xs hover:bg-muted/50",onClick:()=>l.toggleSorting(l.getIsSorted()==="asc")},()=>["Name",v(Q,{class:"ml-2 h-3 w-3"})]),cell:({row:l})=>{const c=l.getValue("name"),y=l.original.slug;return v("div",{class:"flex flex-col"},[v("span",{class:"font-medium"},c),v("span",{class:"text-xs text-muted-foreground"},y)])}},{accessorKey:"academic_levels",header:"Levels",cell:({row:l})=>{const c=l.original.academic_levels||[];return c.length?v("div",{class:"flex flex-wrap gap-1"},c.map(y=>v(ue,{variant:"outline",class:"capitalize text-[10px]"},()=>y))):"—"}},{accessorKey:"default_chapter_count",header:"Chapters",cell:({row:l})=>l.getValue("default_chapter_count")},{accessorKey:"target_word_count",header:"Target Words",cell:({row:l})=>l.getValue("target_word_count")??"—"},{accessorKey:"sort_order",header:"Order",cell:({row:l})=>l.getValue("sort_order")},{accessorKey:"is_active",header:"Active",cell:({row:l})=>v(z,{checked:l.original.is_active,"onUpdate:checked":c=>je(l.original,c)})},{id:"actions",cell:({row:l})=>v(Ce,{category:l.original})}],Se={class:"grid gap-4 md:grid-cols-2 mb-6"},Ae={class:"text-2xl font-bold"},Ee={class:"text-2xl font-bold"},Ne={class:"grid gap-4 py-4"},Le={class:"grid gap-4 md:grid-cols-2"},De={class:"space-y-1"},Be={key:0,class:"text-xs text-rose-500"},Oe={class:"space-y-1"},Te={key:0,class:"text-xs text-rose-500"},Fe={class:"space-y-2"},Ke={class:"grid gap-2 md:grid-cols-2"},Pe={class:"capitalize"},ze={key:0,class:"text-xs text-rose-500"},Ie={class:"space-y-1"},We={key:0,class:"text-xs text-rose-500"},qe={class:"grid gap-4 md:grid-cols-2"},Ge={class:"space-y-1"},Je={key:0,class:"text-xs text-rose-500"},Me={class:"space-y-1"},Xe={key:0,class:"text-xs text-rose-500"},Ye={class:"grid gap-4 md:grid-cols-2"},He={class:"space-y-1"},Qe={key:0,class:"text-xs text-rose-500"},Re={class:"space-y-1"},Ze={key:0,class:"text-xs text-rose-500"},et={class:"space-y-1"},tt={key:0,class:"text-xs text-rose-500"},st={class:"flex items-center justify-between rounded-md border border-border/70 bg-muted/30 px-3 py-2 text-sm"},rt={class:"flex justify-end gap-2"},Ct=K({__name:"Index",props:{categories:{},academicLevels:{},stats:{}},setup(l){const c=l,y=R(),k=C(()=>y.props.flash),D=C(()=>c.categories??[]),_=C(()=>c.academicLevels??[]),b=S(null),w=S(!1),g=S([]),B=()=>({name:"",slug:"",academic_levels:[],description:"",default_chapter_count:5,chapter_structure:"",target_word_count:"",target_duration:"",sort_order:0,is_active:!0}),r=Z({...B()}),$=C(()=>b.value!==null),O=()=>{b.value=null,r.clearErrors(),Object.assign(r,B()),g.value=[]},I=()=>{O(),w.value=!0},W=i=>{b.value=i.slug,r.clearErrors(),r.name=i.name??"",r.slug=i.slug??"",r.description=i.description??"",r.default_chapter_count=Number(i.default_chapter_count??5),r.chapter_structure=i.chapter_structure?.length?JSON.stringify(i.chapter_structure,null,2):"",r.target_word_count=i.target_word_count??"",r.target_duration=i.target_duration??"",r.sort_order=Number(i.sort_order??0),r.is_active=!!i.is_active,g.value=(i.academic_levels??[]).slice(),r.academic_levels=g.value.slice(),w.value=!0},q=(i,t)=>{t===!0?g.value=Array.from(new Set([...g.value,i])):g.value=g.value.filter(o=>o!==i),r.academic_levels=g.value.slice()},G=()=>{const i={preserveScroll:!0,onSuccess:()=>{w.value=!1,O()}};if($.value&&b.value!==null){r.put(U("admin.system.project-categories.update",{category:b.value}),i);return}r.post(U("admin.system.project-categories.store"),i)};return ee("onEditCategory",W),(i,t)=>(m(),j(ne,{title:"Project Categories",subtitle:"Manage project templates available in the wizard."},{default:a(()=>[d("div",Se,[s(e(A),{class:"bg-card text-card-foreground border-border/50 shadow-sm"},{default:a(()=>[s(e(N),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:a(()=>[s(e(L),{class:"text-sm font-medium text-muted-foreground"},{default:a(()=>[...t[11]||(t[11]=[n("Total Categories",-1)])]),_:1}),s(e(te),{class:"h-4 w-4 text-muted-foreground"})]),_:1}),s(e(E),null,{default:a(()=>[d("div",Ae,u(i.stats.total),1)]),_:1})]),_:1}),s(e(A),{class:"bg-card text-card-foreground border-border/50 shadow-sm"},{default:a(()=>[s(e(N),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:a(()=>[s(e(L),{class:"text-sm font-medium text-muted-foreground"},{default:a(()=>[...t[12]||(t[12]=[n("Active",-1)])]),_:1}),s(e(se),{class:"h-4 w-4 text-emerald-500"})]),_:1}),s(e(E),null,{default:a(()=>[d("div",Ee,u(i.stats.active),1)]),_:1})]),_:1})]),k.value?.success?(m(),j(e(xe),{key:0,class:"mb-6 border border-emerald-500/40 bg-emerald-500/10"},{default:a(()=>[s(e(re),{class:"h-4 w-4 text-emerald-500"}),s(e(be),null,{default:a(()=>[...t[13]||(t[13]=[n("Updated",-1)])]),_:1}),s(e(ye),null,{default:a(()=>[n(u(k.value.success),1)]),_:1})]),_:1})):p("",!0),s(e(A),{class:"border border-border/50 bg-card shadow-sm"},{default:a(()=>[s(e(N),{class:"flex flex-row items-center justify-between pb-3"},{default:a(()=>[d("div",null,[s(e(L),{class:"text-base font-semibold text-foreground"},{default:a(()=>[...t[14]||(t[14]=[n("Project Categories",-1)])]),_:1}),s(e(ge),null,{default:a(()=>[...t[15]||(t[15]=[n("Control templates and defaults for the project wizard.",-1)])]),_:1})]),s(e(V),{size:"sm",onClick:I},{default:a(()=>[s(e(ae),{class:"mr-2 h-4 w-4"}),t[16]||(t[16]=n(" Add Category ",-1))]),_:1})]),_:1}),s(e(E),null,{default:a(()=>[s(ie,{columns:e(Ue),data:D.value,"search-key":"name","search-placeholder":"Filter categories..."},null,8,["columns","data"])]),_:1})]),_:1}),s(e(we),{open:w.value,"onUpdate:open":t[10]||(t[10]=o=>w.value=o)},{default:a(()=>[s(e(he),{class:"sm:max-w-[760px] max-h-[90vh] overflow-y-auto"},{default:a(()=>[s(e(ke),null,{default:a(()=>[s(e($e),null,{default:a(()=>[n(u($.value?"Edit category":"Create category"),1)]),_:1}),s(e(Ve),null,{default:a(()=>[n(u($.value?"Update category settings.":"Add a new project category."),1)]),_:1})]),_:1}),d("div",Ne,[d("div",Le,[d("div",De,[s(e(x),null,{default:a(()=>[...t[17]||(t[17]=[n("Name",-1)])]),_:1}),s(e(h),{modelValue:e(r).name,"onUpdate:modelValue":t[0]||(t[0]=o=>e(r).name=o),placeholder:"Final Year Project"},null,8,["modelValue"]),e(r).errors.name?(m(),f("p",Be,u(e(r).errors.name),1)):p("",!0)]),d("div",Oe,[s(e(x),null,{default:a(()=>[...t[18]||(t[18]=[n("Slug",-1)])]),_:1}),s(e(h),{modelValue:e(r).slug,"onUpdate:modelValue":t[1]||(t[1]=o=>e(r).slug=o),placeholder:"final-year-project"},null,8,["modelValue"]),e(r).errors.slug?(m(),f("p",Te,u(e(r).errors.slug),1)):p("",!0)])]),d("div",Fe,[s(e(x),null,{default:a(()=>[...t[19]||(t[19]=[n("Academic Levels",-1)])]),_:1}),d("div",Ke,[(m(!0),f(oe,null,le(_.value,o=>(m(),f("label",{key:o,class:"flex items-center gap-2 rounded-md border border-border/70 bg-muted/30 px-3 py-2 text-sm"},[s(e(ve),{"model-value":g.value.includes(o),"onUpdate:modelValue":J=>q(o,J)},null,8,["model-value","onUpdate:modelValue"]),d("span",Pe,u(o),1)]))),128))]),e(r).errors.academic_levels?(m(),f("p",ze,u(e(r).errors.academic_levels),1)):p("",!0)]),d("div",Ie,[s(e(x),null,{default:a(()=>[...t[20]||(t[20]=[n("Description",-1)])]),_:1}),s(e(F),{modelValue:e(r).description,"onUpdate:modelValue":t[2]||(t[2]=o=>e(r).description=o),rows:"3",placeholder:"Describe this project category..."},null,8,["modelValue"]),e(r).errors.description?(m(),f("p",We,u(e(r).errors.description),1)):p("",!0)]),d("div",qe,[d("div",Ge,[s(e(x),null,{default:a(()=>[...t[21]||(t[21]=[n("Default Chapters",-1)])]),_:1}),s(e(h),{modelValue:e(r).default_chapter_count,"onUpdate:modelValue":t[3]||(t[3]=o=>e(r).default_chapter_count=o),type:"number",min:"1",max:"20"},null,8,["modelValue"]),e(r).errors.default_chapter_count?(m(),f("p",Je,u(e(r).errors.default_chapter_count),1)):p("",!0)]),d("div",Me,[s(e(x),null,{default:a(()=>[...t[22]||(t[22]=[n("Target Word Count",-1)])]),_:1}),s(e(h),{modelValue:e(r).target_word_count,"onUpdate:modelValue":t[4]||(t[4]=o=>e(r).target_word_count=o),type:"number",min:"0"},null,8,["modelValue"]),e(r).errors.target_word_count?(m(),f("p",Xe,u(e(r).errors.target_word_count),1)):p("",!0)])]),d("div",Ye,[d("div",He,[s(e(x),null,{default:a(()=>[...t[23]||(t[23]=[n("Target Duration",-1)])]),_:1}),s(e(h),{modelValue:e(r).target_duration,"onUpdate:modelValue":t[5]||(t[5]=o=>e(r).target_duration=o),placeholder:"2 semesters"},null,8,["modelValue"]),e(r).errors.target_duration?(m(),f("p",Qe,u(e(r).errors.target_duration),1)):p("",!0)]),d("div",Re,[s(e(x),null,{default:a(()=>[...t[24]||(t[24]=[n("Sort Order",-1)])]),_:1}),s(e(h),{modelValue:e(r).sort_order,"onUpdate:modelValue":t[6]||(t[6]=o=>e(r).sort_order=o),type:"number",min:"0"},null,8,["modelValue"]),e(r).errors.sort_order?(m(),f("p",Ze,u(e(r).errors.sort_order),1)):p("",!0)])]),d("div",et,[s(e(x),null,{default:a(()=>[...t[25]||(t[25]=[n("Chapter Structure (JSON)",-1)])]),_:1}),s(e(F),{modelValue:e(r).chapter_structure,"onUpdate:modelValue":t[7]||(t[7]=o=>e(r).chapter_structure=o),rows:"6",class:"font-mono text-xs",placeholder:'[{ "number": 1, "title": "Introduction" }]'},null,8,["modelValue"]),e(r).errors.chapter_structure?(m(),f("p",tt,u(e(r).errors.chapter_structure),1)):p("",!0)]),d("label",st,[t[26]||(t[26]=d("span",{class:"text-foreground"},"Active",-1)),s(e(z),{checked:e(r).is_active,"onUpdate:checked":t[8]||(t[8]=o=>e(r).is_active=o)},null,8,["checked"])])]),d("div",rt,[s(e(V),{variant:"ghost",onClick:t[9]||(t[9]=o=>w.value=!1)},{default:a(()=>[...t[27]||(t[27]=[n("Cancel",-1)])]),_:1}),s(e(V),{disabled:e(r).processing,onClick:G},{default:a(()=>[e(r).processing?(m(),j(e(de),{key:0,class:"mr-2 h-4 w-4 animate-spin"})):p("",!0),d("span",null,u($.value?"Update category":"Add category"),1)]),_:1},8,["disabled"])])]),_:1})]),_:1},8,["open"])]),_:1}))}});export{Ct as default};
