import{d as Te,r as h,y as Ie,aI as g,p as ke,g as C,o as c,w as l,b as t,e as r,u as s,bb as Ce,h as u,c as x,a as k,t as S,a3 as N,ay as je,bW as se,a1 as q,A as oe,by as Oe,a5 as re,X as Pe,aJ as Ee,n as F,F as ae,f as le,av as Ne,bk as Re,v as U}from"./vendor-Bd-YbXdQ.js";import{_ as G}from"./index-CPLcYuC3.js";import{_ as j}from"./index-DhgXNBxs.js";import{_ as A,a as ie}from"./CardContent.vue_vue_type_script_setup_true_lang-BpnkKGTV.js";import{_ as ne}from"./CardDescription.vue_vue_type_script_setup_true_lang-BcKHY0xO.js";import{_ as de,a as ce}from"./CardTitle.vue_vue_type_script_setup_true_lang-D5t81t7T.js";import{_ as Me}from"./Input.vue_vue_type_script_setup_true_lang-Bhu57pIq.js";import{_ as ue}from"./Label.vue_vue_type_script_setup_true_lang-BtVR4Xej.js";import{_ as $e,a as Fe,b as W,c as H}from"./TabsTrigger.vue_vue_type_script_setup_true_lang-BeLialJ9.js";import{_ as Ue}from"./Textarea.vue_vue_type_script_setup_true_lang-BI9Tv4TT.js";import{_ as X,a as Y,b as J}from"./TooltipTrigger.vue_vue_type_script_setup_true_lang-DqMmi_0R.js";import{_ as Ae}from"./WordBalanceDisplay.vue_vue_type_script_setup_true_lang-dtes2D1I.js";import{_ as Be,a as De,b as Le,c as ze,d as K}from"./SelectValue.vue_vue_type_script_setup_true_lang-CmjhnVHb.js";import{_ as Ve}from"./AppLayout.vue_vue_type_script_setup_true_lang-D4ExqbEz.js";import{s as T}from"./useAppearance-Y8PyvRNY.js";import{_ as pe}from"./SafeHtmlText.vue_vue_type_script_setup_true_lang-C6CJHb08.js";import{R as qe}from"./RichTextEditor-BCMX_Km-.js";import{_ as Ge}from"./PurchaseModal.vue_vue_type_script_setup_true_lang-D7fo_Lfx.js";import{u as We}from"./useWordBalance-BSd7Gmyj.js";import{_ as He}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./index-CPshGmzU.js";import"./useForwardExpose-BQPhk1XK.js";import"./Presence-TRPLJXzT.js";import"./VisuallyHidden-BP1uy0Yl.js";import"./RovingFocusItem-O9WwF-H2.js";import"./Sonner.vue_vue_type_script_setup_true_lang-aZGMRizj.js";import"./DialogTitle-RQf4465M.js";import"./useNonce-BrCVioIE.js";import"./ohash.D__AXeF1-C-E83dC9.js";import"./nullish-CHIgUVhi.js";import"./useFormControl-Co57Res6.js";import"./UserInfo.vue_vue_type_script_setup_true_lang-ZGI0bNeM.js";import"./AppLogo.vue_vue_type_script_setup_true_lang-C5t8rWLF.js";import"./PWAInstallPrompt.vue_vue_type_script_setup_true_lang-Dsf8Vg9K.js";import"./purify.es-DxJI3Wx7.js";import"./index-C3PXxNyG.js";import"./step-CXjX0ghh.js";import"./Progress.vue_vue_type_script_setup_true_lang-D4c9IteC.js";import"./DialogContent.vue_vue_type_script_setup_true_lang-B0_mTwB9.js";import"./DialogDescription.vue_vue_type_script_setup_true_lang-o698b8xn.js";import"./DialogFooter.vue_vue_type_script_setup_true_lang-CWpuYIJK.js";import"./DialogTitle.vue_vue_type_script_setup_true_lang-DzEVjang.js";const Xe={class:"min-h-screen bg-background relative selection:bg-primary/10 selection:text-primary"},Ye={class:"sticky top-0 z-40 w-full border-b border-border/40 bg-background/80 backdrop-blur-xl supports-[backdrop-filter]:bg-background/60"},Je={class:"container mx-auto flex h-16 items-center justify-between py-4"},Ke={class:"flex items-center gap-4"},Qe={class:"flex flex-col"},Ze={class:"text-sm font-semibold leading-none flex items-center gap-2"},et={key:0,class:"hidden sm:inline-flex h-1.5 w-1.5 rounded-full bg-primary animate-pulse"},tt={class:"lg:hidden"},st={class:"container mx-auto max-w-5xl py-8 pb-24 px-4 relative z-10 space-y-8"},ot={class:"space-y-4 text-center pb-2"},rt={class:"flex justify-center mb-6"},at={class:"relative flex items-center justify-center h-16 w-16 rounded-full bg-gradient-to-tr from-yellow-500/20 to-orange-500/20 border border-white/10 shadow-[0_0_30px_rgba(234,179,8,0.2)]"},lt={key:0,class:"lg:hidden grid grid-cols-2 gap-3 pb-4"},it={key:0,class:"flex flex-col gap-1 p-3 rounded-lg bg-muted/30 border border-border/50 col-span-2"},nt={class:"text-sm font-medium truncate"},dt={key:1,class:"flex flex-col gap-1 p-3 rounded-lg bg-muted/30 border border-border/50"},ct={class:"text-sm font-medium truncate"},ut={key:2,class:"flex flex-col gap-1 p-3 rounded-lg bg-muted/30 border border-border/50"},pt={class:"text-sm font-medium truncate"},mt={class:"flex justify-center"},gt={class:"grid grid-cols-1 lg:grid-cols-12 gap-8 items-start"},ft={class:"lg:col-span-12 xl:col-span-5 space-y-6"},vt={class:"space-y-2"},bt={class:"space-y-2"},xt={class:"px-6 pb-6 pt-0"},ht={key:1,class:"flex items-center justify-center w-full"},yt={class:"hidden xl:block"},wt={class:"flex items-start gap-3"},_t={class:"p-2 rounded-full bg-orange-500/10 text-orange-600 dark:text-orange-500 mt-0.5 group-hover:scale-110 transition-transform"},St={class:"lg:col-span-12 xl:col-span-7 space-y-6"},Tt={class:"absolute top-0 right-0 p-6 pointer-events-none opacity-20"},It={class:"flex-1 border rounded-xl overflow-hidden bg-secondary/30 focus-within:bg-background focus-within:ring-2 focus-within:ring-primary/20 transition-all"},kt={class:"px-6 pb-6 flex items-center justify-between gap-4"},Ct={class:"p-4 flex flex-col md:flex-row items-center justify-between gap-4"},jt={class:"flex items-center gap-3 w-full md:w-auto overflow-x-auto pb-2 md:pb-0 hide-scrollbar"},Ot={class:"flex items-center h-9 px-3 rounded-lg bg-background border border-border/50 text-xs font-medium whitespace-nowrap"},Pt={key:0,class:"h-6 w-[1px] bg-border mx-1 hidden md:block"},Et={key:1,class:"flex items-center h-9 px-3 rounded-lg bg-background border border-border/50 text-xs font-medium whitespace-nowrap"},Nt={key:0,class:"h-0.5 w-full bg-muted overflow-hidden"},Rt={class:"min-h-[400px]"},Mt={key:0,class:"flex flex-col items-center justify-center py-20 animate-in fade-in"},$t={class:"bg-primary/10 p-6 rounded-full mb-6 relative"},Ft={class:"text-xl font-semibold mb-2"},Ut={class:"text-muted-foreground text-sm max-w-xs text-center"},At={key:1,class:"flex flex-col items-center justify-center py-20 text-center animate-in fade-in zoom-in-95"},Bt={class:"h-32 w-32 rounded-3xl bg-gradient-to-tr from-muted/50 to-muted/10 border border-border/50 flex items-center justify-center mb-6 shadow-xl shadow-black/5 rotate-3 hover:rotate-0 transition-transform duration-500"},Dt={key:2,class:"grid grid-cols-1 gap-6"},Lt={class:"w-full md:w-64 shrink-0 bg-muted/20 md:border-r border-border/50 p-5 flex flex-col gap-4"},zt={class:"flex items-center justify-between md:justify-start gap-2"},Vt={class:"text-[10px] text-muted-foreground font-medium uppercase tracking-wider"},qt={class:"space-y-1"},Gt={class:"flex items-center gap-2"},Wt={class:"h-1.5 flex-1 bg-muted rounded-full overflow-hidden"},Ht={class:"text-xs font-bold"},Xt={class:"mt-auto pt-4 md:pt-0 grid grid-cols-2 md:grid-cols-1 gap-2"},Yt={class:"flex-1 p-5 md:pl-0 pt-0 md:pt-5 space-y-3"},Jt={class:"prose prose-sm dark:prose-invert max-w-none text-muted-foreground/80 leading-relaxed line-clamp-3 group-hover:line-clamp-none transition-all duration-300"},Kt={class:"flex flex-wrap gap-1.5 pt-3 mt-auto"},Qt={class:"text-center space-y-4 max-w-md p-8"},Zt={class:"bg-primary/10 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-6"},B=300,es=Te({__name:"TopicSelection",props:{project:{},savedTopics:{},prefillTopic:{}},setup(me){const d=me,_=h("existing"),y=h(!1),E=h(!1),v=h([]),O=h(""),ge=h(""),f=h(""),b=h(""),w=h(""),Q=h("all"),R=h("all");h(new Set);const{balance:D,showPurchaseModal:M,requiredWordsForModal:L,actionDescriptionForModal:z,closePurchaseModal:fe}=We(),$=h("balanced"),P=a=>a?a.replace(/<[^>]*>/g," ").replace(/\s+/g," ").trim():"";Ie(()=>{console.log("üìã TOPIC SELECTION - Project data received:",{topic:d.project.topic,title:d.project.title,description:d.project.description,description_exists:!!d.project.description,description_length:d.project.description?.length||0}),d.project.topic&&(f.value=P(d.project.topic),b.value=d.project.description||"",w.value=P(d.project.title||""),_.value="existing",console.log("‚úÖ TOPIC SELECTION - Form fields populated:",{customTopic:f.value?.substring(0,50),customDescription:b.value?.substring(0,50),customTitle:w.value}));try{const a=new URLSearchParams(window.location.search),e=a.get("prefill_topic"),o=a.get("prefill_title"),n=a.get("prefill_description");e&&e.trim()&&(_.value="existing",f.value=P(e),o&&o.trim()&&(w.value=P(o)),n&&n.trim()&&(b.value=n.trim()),g.success("Refined topic loaded",{description:"Review it in ‚ÄúEnter Topic‚Äù then continue."}),window.history.replaceState({},"",T("projects.topic-selection",d.project.slug)))}catch{}!d.project.topic&&!f.value.trim()&&d.prefillTopic?.title&&(_.value="existing",f.value=P(d.prefillTopic.title),w.value=P(d.prefillTopic.title),d.prefillTopic.description&&(b.value=d.prefillTopic.description)),d.savedTopics&&d.savedTopics.length>0&&(v.value=d.savedTopics,console.log("üì¶ SAVED TOPICS - Loaded from database",{count:d.savedTopics.length,topics:d.savedTopics.map(a=>a.title)}),d.project.topic||(_.value="generated"))});const p=h(""),I=h(""),Z=async()=>{if(console.log("üöÄ TOPIC GENERATION - Starting streaming topic generation"),D.value<B){L.value=B,z.value="generate research topics",M.value=!0,console.warn("‚ùå TOPIC GENERATION - Insufficient word balance",{current_balance:D.value,required:B});return}y.value=!0,v.value=[];let a=!1;try{I.value="connecting",p.value="Connecting to AI service...";const e=T("topics.stream",d.project.slug)+`?regenerate=true&geographic_focus=${encodeURIComponent($.value)}`;console.log("üì° TOPIC GENERATION - Connecting to stream:",e);const o=new EventSource(e);o.onopen=()=>{console.log("üì° SSE - Connection opened"),I.value="connecting",p.value="Connected to AI service - analyzing your project..."},o.onmessage=n=>{try{const i=JSON.parse(n.data);switch(console.log("üì° SSE - Message received:",i.type,i),i.type){case"start":I.value="analyzing",p.value=i.message||"Starting topic generation...";break;case"progress":i.message&&i.message.includes("academic context")?I.value="analyzing":i.message&&i.message.includes("generating")?I.value="generating":i.message&&i.message.includes("enriching")&&(I.value="enriching"),p.value=i.message||"Processing...",i.context&&console.log("üéì Academic context:",i.context);break;case"content":if(I.value="generating",i.chunk){const m=i.word_count||0;p.value=`Generating topics... (${m} words generated)`}i.topics&&i.from_cache&&(I.value="enriching",p.value="Loading topics from cache for faster response...");break;case"complete":I.value="complete",i.topics&&Array.isArray(i.topics)?(v.value=i.topics,p.value=`‚úì Successfully generated ${i.topics.length} personalized research topics!`,_.value="generated",g("Success",{description:`${i.topics.length} research topics generated successfully!`})):p.value=i.message||"Topics generated successfully!";break;case"error":{const m=i.message||"Stream error occurred";p.value=m,g("Error",{description:m}),a=!0,o.close(),y.value=!1;break}case"end":console.log("üì° SSE - Stream ended"),a=!0,o.close(),y.value=!1;break}}catch(i){console.error("üì° SSE - Failed to parse message:",i,n.data)}},o.onerror=n=>{if(a){console.log("üì° SSE - Ignoring connection error after stream closed");return}console.error("üì° SSE - Connection error:",n),o.close(),a=!0,v.value.length>0?(p.value=`‚úì Generated ${v.value.length} topics (connection ended early)`,_.value="generated",g("Partial Success",{description:`${v.value.length} topics generated before connection ended.`})):(console.log("üì° TOPIC GENERATION - Falling back to regular endpoint"),ve().catch(i=>{console.error("Fallback also failed:",i),p.value="Failed to generate topics. Please try again.",g("Error",{description:"Failed to generate topics. Please try again."})})),y.value=!1},setTimeout(()=>{!y.value||a||(console.log("‚è∞ TOPIC GENERATION - Timeout reached, closing stream"),o.close(),v.value.length>0?(p.value=`‚úì Generated ${v.value.length} topics (timeout reached)`,_.value="generated"):(p.value="Generation timed out. Please try again.",g("Timeout",{description:"Topic generation took longer than expected. Please try again."})),y.value=!1)},3e5)}catch(e){console.error("üí• TOPIC GENERATION - Error:",e),p.value="Failed to generate topics. Please try again.",g("Error",{description:e.message||"Failed to generate topics. Please try again."}),y.value=!1}},ve=async()=>{console.log("üîÑ TOPIC GENERATION - Using fallback method"),p.value="Retrying with fallback method...";try{const a=document.querySelector('meta[name="csrf-token"]')?.getAttribute("content");if(!a)throw new Error("CSRF token not found. Please refresh the page and try again.");const e=new AbortController,o=setTimeout(()=>e.abort(),3e5),n=await fetch(T("topics.generate",d.project.slug),{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":a,Accept:"application/json","X-Requested-With":"XMLHttpRequest"},body:JSON.stringify({regenerate:!0,geographic_focus:$.value}),signal:e.signal});if(clearTimeout(o),n.status===402){const m=await n.json().catch(()=>null);L.value=m?.required??B,z.value="generate research topics",M.value=!0,p.value=m?.message||"Insufficient word balance to generate topics.",g("Error",{description:p.value}),y.value=!1;return}if(!n.ok){let m=`HTTP error! status: ${n.status}`;try{m=(await n.clone().json()).message||m}catch{try{const V=await n.text();n.status===419?m="Session expired. Please refresh the page and try again.":n.status===504?m="Request timed out. Please try again in a few moments.":V.includes("<!DOCTYPE")&&(m="Server returned an error page instead of data. Please try again.")}catch{n.status===504&&(m="Request timed out. Please try again in a few moments.")}}throw new Error(m)}const i=await n.json();if(i.topics&&Array.isArray(i.topics))v.value=i.topics,p.value=`‚úì Successfully generated ${i.topics.length} research topics!`,_.value="generated",g("Success",{description:`${i.topics.length} research topics generated successfully!`});else throw new Error("Invalid response format: topics array not found")}catch(a){console.error("üí• FALLBACK GENERATION - Error:",a),p.value="Failed to generate topics. Please try again.",g("Error",{description:a.message||"Failed to generate topics. Please try again."})}},be=a=>{O.value=a.title,ge.value=a.description;const e=document.createElement("div");e.innerHTML=a.title;const o=e.textContent||e.innerText||a.title;f.value=o,b.value=a.description,w.value=ee(o),_.value="existing"},ee=a=>{const e=document.createElement("div");e.innerHTML=a;const o=(e.textContent||e.innerText||a).trim(),n=255;return o.length>n?o.slice(0,n):o},xe=ke(()=>{let a=v.value;return Q.value!=="all"&&(a=a.filter(e=>e.difficulty.toLowerCase().includes(Q.value.toLowerCase()))),R.value!=="all"&&(a=a.filter(e=>e.timeline===R.value)),a.sort((e,o)=>o.feasibility_score-e.feasibility_score)}),he=a=>{switch(a.toLowerCase()){case"beginner friendly":return"secondary";case"intermediate":return"default";case"advanced":return"destructive";default:return"secondary"}},te=a=>{const e=document.createElement("div");e.innerHTML=a.title;const o=(e.textContent||e.innerText||a.title).trim();if(!o){g("Error",{description:"Topic title is missing."});return}U.visit(T("topics.lab",{project:d.project.slug,new:"true",return_to_selection:1,topic_title:o,topic_description:a.description||""}))},ye=()=>{const a=(f.value||w.value||"").trim(),e=(b.value||"").trim();if(!a&&!e){g("Error",{description:"Please select or enter a topic first."});return}te({title:a||w.value||"Research Topic",description:e})},we=async()=>{if(console.log("üöÄ TOPIC SUBMISSION - Starting",{customTopic:f.value?.substring(0,50)+"...",customDescription:b.value?.substring(0,50)+"...",customTitle:w.value,project_slug:d.project.slug,current_url:window.location.href,timestamp:new Date().toISOString()}),console.log("üîç TOPIC SUBMISSION - Full form data:",{customTopic:f.value,customDescription:b.value,customTitle:w.value,customTopic_length:f.value?.length||0,customDescription_length:b.value?.length||0,customTitle_length:w.value?.length||0}),!f.value.trim()&&!b.value.trim()){console.log("‚ùå TOPIC SUBMISSION - Validation failed: No topic or description"),g("Error",{description:"Please enter a project topic and description."});return}E.value=!0;try{const a={topic:f.value.trim()||w.value.trim()||"Research Topic",title:w.value.trim()||ee(f.value||b.value),description:b.value.trim()};console.log("üì§ TOPIC SUBMISSION - Request data:",a),console.log("üìç TOPIC SUBMISSION - Request URL:",T("topics.select",d.project.slug));const e=document.querySelector('meta[name="csrf-token"]')?.getAttribute("content");if(console.log("üîê TOPIC SUBMISSION - CSRF token found:",!!e),console.log("üîê TOPIC SUBMISSION - CSRF token preview:",e?.substring(0,10)+"..."),!e)throw new Error("CSRF token not found. Please refresh the page and try again.");console.log("üì° TOPIC SUBMISSION - Making fetch request...");const o=await fetch(T("topics.select",d.project.slug),{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":e,Accept:"application/json","X-Requested-With":"XMLHttpRequest"},body:JSON.stringify(a)});if(console.log("üì• TOPIC SUBMISSION - Response received"),console.log("üì• TOPIC SUBMISSION - Response status:",o.status),console.log("üì• TOPIC SUBMISSION - Response statusText:",o.statusText),console.log("üì• TOPIC SUBMISSION - Response ok:",o.ok),console.log("üì• TOPIC SUBMISSION - Response headers:",Object.fromEntries(o.headers.entries())),o.ok){console.log("‚úÖ TOPIC SUBMISSION - Success! Processing response...");const n=await o.json();console.log("‚úÖ TOPIC SUBMISSION - Response data:",n),g("Topic Selected!",{description:"Your project topic has been set. You can now submit it for supervisor approval."}),console.log("üîÑ TOPIC SUBMISSION - Letting middleware handle redirect"),console.log("üîÑ TOPIC SUBMISSION - Current project slug:",d.project.slug),console.log("üîÑ TOPIC SUBMISSION - Target route:",T("projects.show",d.project.slug)),U.visit(T("projects.show",d.project.slug),{method:"get",replace:!0})}else{console.error("‚ùå TOPIC SUBMISSION - Request failed"),console.error("‚ùå TOPIC SUBMISSION - Status:",o.status),console.error("‚ùå TOPIC SUBMISSION - StatusText:",o.statusText);let n=`HTTP error! status: ${o.status}`;try{const i=await o.json();console.error("‚ùå TOPIC SUBMISSION - Error JSON:",i),n=i.message||n}catch{const m=await o.text();console.error("‚ùå TOPIC SUBMISSION - Error HTML (first 500 chars):",m.substring(0,500)),o.status===419?n="Session expired. Please refresh the page and try again.":m.includes("<!DOCTYPE")&&(n="Server returned an error page instead of data. Please try again.")}throw new Error(n)}}catch(a){console.error("üí• TOPIC SUBMISSION - Exception:",a),g("Error",{description:"Failed to select topic. Please try again."})}finally{E.value=!1,console.log("üèÅ TOPIC SUBMISSION - Finished (isSelecting set to false)")}},_e=async()=>{try{U.post(T("projects.go-back-to-wizard",d.project.slug),{},{onSuccess:()=>{g("Success",{description:"Returned to project setup"}),U.visit(T("projects.create"))},onError:()=>{g("Error",{description:"Failed to go back to setup. Please try again."})}})}catch{g("Error",{description:"Failed to go back to setup. Please try again."})}};return(a,e)=>(c(),C(Ve,{title:"Select Project Topic"},{default:l(()=>[t("div",Xe,[e[50]||(e[50]=t("div",{class:"fixed inset-0 pointer-events-none z-0"},[t("div",{class:"absolute top-0 right-0 w-3/4 h-3/4 bg-primary/5 rounded-full blur-[120px] opacity-50"}),t("div",{class:"absolute bottom-0 left-0 w-1/2 h-1/2 bg-blue-500/5 rounded-full blur-[100px] opacity-50"})],-1)),t("header",Ye,[t("div",Je,[t("div",Ke,[r(s(j),{onClick:_e,variant:"ghost",size:"icon",class:"h-9 w-9 rounded-full text-muted-foreground hover:text-foreground hover:bg-muted/80"},{default:l(()=>[r(s(Ce),{class:"h-4 w-4"})]),_:1}),t("div",Qe,[t("h1",Ze,[e[8]||(e[8]=u(" Topic Selection ",-1)),y.value?(c(),x("span",et)):k("",!0)]),e[9]||(e[9]=t("p",{class:"text-[10px] text-muted-foreground uppercase tracking-wider font-medium"},"Step 2 of 4",-1))])]),t("div",tt,[r(s(G),{variant:"outline",class:"font-normal bg-muted/50"},{default:l(()=>[u(S(a.project.type),1)]),_:1})])])]),t("main",st,[t("div",ot,[t("div",rt,[t("div",at,[e[10]||(e[10]=t("div",{class:"absolute inset-0 rounded-full bg-yellow-500/10 blur-xl"},null,-1)),r(s(N),{class:"h-8 w-8 text-yellow-400 drop-shadow-[0_0_10px_rgba(250,204,21,0.8)] relative z-10"})])]),e[11]||(e[11]=t("div",{class:"space-y-2"},[t("h2",{class:"text-3xl font-bold tracking-tight sm:text-4xl bg-gradient-to-br from-foreground via-foreground to-muted-foreground bg-clip-text text-transparent"}," Choose Your Project Topic "),t("p",{class:"mx-auto max-w-[600px] text-muted-foreground text-lg leading-relaxed"}," Define your specific area of interest or let AI help you discover unique project topics. ")],-1))]),a.project.field_of_study||a.project.university||a.project.course?(c(),x("div",lt,[a.project.field_of_study?(c(),x("div",it,[e[12]||(e[12]=t("span",{class:"text-[10px] uppercase text-muted-foreground font-medium"},"Field",-1)),t("span",nt,S(a.project.field_of_study),1)])):k("",!0),a.project.university?(c(),x("div",dt,[e[13]||(e[13]=t("span",{class:"text-[10px] uppercase text-muted-foreground font-medium"},"Institution",-1)),t("span",ct,S(a.project.university),1)])):k("",!0),a.project.course?(c(),x("div",ut,[e[14]||(e[14]=t("span",{class:"text-[10px] uppercase text-muted-foreground font-medium"},"Course / Dept",-1)),t("span",pt,S(a.project.course),1)])):k("",!0)])):k("",!0),r(s($e),{modelValue:_.value,"onUpdate:modelValue":e[6]||(e[6]=o=>_.value=o),class:"space-y-8"},{default:l(()=>[t("div",mt,[r(s(Ae),null,{default:l(()=>[r(s(Fe),{class:"grid grid-cols-3 w-full h-auto items-center justify-center rounded-2xl bg-muted/50 p-1.5 text-muted-foreground backdrop-blur-sm border border-border/50 shadow-inner sm:flex sm:w-auto"},{default:l(()=>[r(s(X),null,{default:l(()=>[r(s(Y),{"as-child":""},{default:l(()=>[r(s(W),{value:"existing",class:"rounded-xl px-2 py-2.5 text-[10px] sm:text-sm sm:px-6 transition-all data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm flex flex-col sm:flex-row items-center justify-center gap-1 sm:gap-2 h-full w-full sm:w-auto"},{default:l(()=>[r(s(je),{class:"h-3.5 w-3.5 sm:h-4 sm:w-4 sm:mr-0"}),e[15]||(e[15]=t("span",{class:"truncate sm:hidden"},"Add Existing",-1)),e[16]||(e[16]=t("span",{class:"hidden sm:inline"},"Add Existing Topic",-1))]),_:1})]),_:1}),r(s(J),null,{default:l(()=>[...e[17]||(e[17]=[t("p",null,"Enter a topic you already have in mind",-1)])]),_:1})]),_:1}),r(s(X),null,{default:l(()=>[r(s(Y),{"as-child":""},{default:l(()=>[r(s(W),{value:"generated",class:"rounded-xl px-2 py-2.5 text-[10px] sm:text-sm sm:px-6 transition-all data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm flex flex-col sm:flex-row items-center justify-center gap-1 sm:gap-2 h-full w-full sm:w-auto"},{default:l(()=>[r(s(N),{class:"h-3.5 w-3.5 sm:h-4 sm:w-4 sm:mr-0"}),e[18]||(e[18]=t("span",{class:"truncate sm:hidden"},"AI Suggestions",-1)),e[19]||(e[19]=t("span",{class:"hidden sm:inline"},"AI Suggested Topics",-1))]),_:1})]),_:1}),r(s(J),null,{default:l(()=>[...e[20]||(e[20]=[t("p",null,"Generate unique topics based on your profile",-1)])]),_:1})]),_:1}),r(s(X),null,{default:l(()=>[r(s(Y),{"as-child":""},{default:l(()=>[r(s(W),{value:"import",class:"rounded-xl px-2 py-2.5 text-[10px] sm:text-sm sm:px-6 transition-all data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm flex flex-col sm:flex-row items-center justify-center gap-1 sm:gap-2 h-full w-full sm:w-auto"},{default:l(()=>[r(s(se),{class:"h-3.5 w-3.5 sm:h-4 sm:w-4 sm:mr-0"}),e[21]||(e[21]=t("span",{class:"truncate sm:hidden"},"Import",-1)),e[22]||(e[22]=t("span",{class:"hidden sm:inline"},"Import Project",-1))]),_:1})]),_:1}),r(s(J),null,{default:l(()=>[...e[23]||(e[23]=[t("p",null,"Import a project from an external file",-1)])]),_:1})]),_:1})]),_:1})]),_:1})]),r(s(H),{value:"existing",class:"space-y-6 animate-in fade-in slide-in-from-bottom-4 duration-500"},{default:l(()=>[t("div",gt,[t("div",ft,[r(s(A),{class:"border-border/50 shadow-lg shadow-primary/5 bg-card/80 backdrop-blur-sm"},{default:l(()=>[r(s(de),null,{default:l(()=>[r(s(ce),{className:"text-lg"},{default:l(()=>[...e[24]||(e[24]=[u("Project Title",-1)])]),_:1}),r(s(ne),null,{default:l(()=>[...e[25]||(e[25]=[u(" Keep it clear and academic. ",-1)])]),_:1})]),_:1}),r(s(ie),{class:"space-y-6"},{default:l(()=>[t("div",vt,[r(s(ue),{for:"custom-title",class:"text-xs font-medium uppercase text-muted-foreground"},{default:l(()=>[...e[26]||(e[26]=[u("Title",-1)])]),_:1}),r(s(Me),{id:"custom-title",modelValue:w.value,"onUpdate:modelValue":e[0]||(e[0]=o=>w.value=o),placeholder:"e.g., The Impact of...",class:"h-12 bg-secondary/50 border-border/50 focus:bg-background focus:ring-primary/20 transition-all font-medium"},null,8,["modelValue"])]),t("div",bt,[r(s(ue),{for:"custom-topic",class:"text-xs font-medium uppercase text-muted-foreground"},{default:l(()=>[...e[27]||(e[27]=[u("Research Question / Topic",-1)])]),_:1}),r(s(Ue),{id:"custom-topic",modelValue:f.value,"onUpdate:modelValue":e[1]||(e[1]=o=>f.value=o),placeholder:"What is the main problem you are investigating?",rows:"5",class:"resize-none bg-secondary/50 border-border/50 focus:bg-background focus:ring-primary/20 transition-all"},null,8,["modelValue"])])]),_:1}),t("div",xt,[r(s(j),{onClick:we,size:"lg",disabled:!f.value.trim()&&!b.value.trim()||E.value,class:"w-full h-12 text-base font-medium shadow-lg shadow-primary/20 hover:shadow-primary/30 transition-all"},{default:l(()=>[E.value?(c(),C(s(q),{key:0,class:"mr-2 h-5 w-5 animate-spin"})):(c(),x("span",ht,[e[28]||(e[28]=u(" Confirm Selection ",-1)),r(s(oe),{class:"ml-2 h-4 w-4"})]))]),_:1},8,["disabled"])])]),_:1}),t("div",yt,[t("div",{onClick:e[2]||(e[2]=o=>_.value="generated"),class:"rounded-xl bg-orange-500/5 border border-orange-500/10 p-4 cursor-pointer hover:bg-orange-500/10 transition-colors group"},[t("div",wt,[t("div",_t,[r(s(N),{class:"h-4 w-4"})]),e[29]||(e[29]=t("div",{class:"space-y-1"},[t("h4",{class:"text-sm font-semibold text-orange-700 dark:text-orange-400"},"Need Inspiration?"),t("p",{class:"text-xs text-muted-foreground leading-relaxed"},[u(" If you're stuck, switch to the "),t("strong",null,"AI Suggestions"),u(" tab to generate research topics tailored to your profile. ")])],-1))])])])]),t("div",St,[r(s(A),{class:"border-border/50 shadow-lg shadow-primary/5 bg-card/80 backdrop-blur-sm flex flex-col h-full lg:min-h-[500px]"},{default:l(()=>[t("div",Tt,[r(s(Oe),{class:"w-32 h-32 text-primary"})]),r(s(de),null,{default:l(()=>[r(s(ce),{className:"text-lg"},{default:l(()=>[...e[30]||(e[30]=[u("Detailed Description",-1)])]),_:1}),r(s(ne),null,{default:l(()=>[...e[31]||(e[31]=[u(" Elaborate on your research objectives and scope. ",-1)])]),_:1})]),_:1}),r(s(ie),{class:"flex-1 min-h-[300px] flex flex-col"},{default:l(()=>[t("div",It,[r(qe,{modelValue:b.value,"onUpdate:modelValue":e[3]||(e[3]=o=>b.value=o),placeholder:"Start typing your research description here...","min-height":"300px","show-toolbar":!0},null,8,["modelValue"])])]),_:1}),t("div",kt,[e[33]||(e[33]=t("p",{class:"text-[10px] text-muted-foreground"}," * This description will be used to guide the AI in future steps. ",-1)),r(s(j),{onClick:ye,disabled:!f.value.trim()&&!b.value.trim()||E.value,variant:"ghost",size:"sm",class:"text-muted-foreground hover:text-primary"},{default:l(()=>[r(s(re),{class:"mr-2 h-3.5 w-3.5"}),e[32]||(e[32]=u(" Refine in Lab ",-1))]),_:1},8,["disabled"])])]),_:1})])])]),_:1}),r(s(H),{value:"generated",class:"space-y-6 pb-20 animate-in fade-in slide-in-from-bottom-4 duration-500"},{default:l(()=>[r(s(A),{class:"border-border/50 bg-card/50 backdrop-blur-sm sticky top-20 z-30 shadow-sm"},{default:l(()=>[t("div",Ct,[t("div",jt,[t("div",Ot,[e[37]||(e[37]=t("span",{class:"text-muted-foreground mr-2"},"Focus:",-1)),r(s(Be),{modelValue:$.value,"onUpdate:modelValue":e[4]||(e[4]=o=>$.value=o)},{default:l(()=>[r(s(De),{class:"h-auto p-0 border-none bg-transparent hover:bg-transparent focus:ring-0 focus:ring-offset-0 gap-1 text-xs font-semibold"},{default:l(()=>[r(s(Le),{placeholder:"Select Focus"})]),_:1}),r(s(ze),null,{default:l(()=>[r(s(K),{value:"balanced"},{default:l(()=>[...e[34]||(e[34]=[u("Balanced",-1)])]),_:1}),r(s(K),{value:"nigeria_west_africa"},{default:l(()=>[...e[35]||(e[35]=[u("West Africa",-1)])]),_:1}),r(s(K),{value:"global"},{default:l(()=>[...e[36]||(e[36]=[u("Global",-1)])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),v.value.length>0?(c(),x("div",Pt)):k("",!0),v.value.length>0?(c(),x("div",Et,[e[39]||(e[39]=t("span",{class:"text-muted-foreground mr-2"},"Timeline:",-1)),Pe(t("select",{"onUpdate:modelValue":e[5]||(e[5]=o=>R.value=o),class:"bg-transparent border-none text-foreground font-semibold focus:ring-0 p-0 cursor-pointer text-xs"},[...e[38]||(e[38]=[t("option",{value:"all"},"Any",-1),t("option",{value:"6-9 months"},"6-9 mo",-1),t("option",{value:"9-12 months"},"9-12 mo",-1),t("option",{value:"12+ months"},"12+ mo",-1)])],512),[[Ee,R.value]])])):k("",!0)]),r(s(j),{onClick:Z,disabled:y.value,size:"sm",class:F(v.value.length===0?"w-full md:w-auto shadow-lg shadow-primary/20":"")},{default:l(()=>[y.value?(c(),C(s(q),{key:0,class:"mr-2 h-4 w-4 animate-spin"})):v.value.length>0?(c(),C(s(re),{key:1,class:"mr-2 h-4 w-4"})):(c(),C(s(N),{key:2,class:"mr-2 h-4 w-4"})),u(" "+S(y.value?"Thinking...":v.value.length>0?"Regenerate":"Generate Ideas"),1)]),_:1},8,["disabled","class"])]),y.value?(c(),x("div",Nt,[...e[40]||(e[40]=[t("div",{class:"h-full bg-primary animate-progress-indeterminate"},null,-1)])])):k("",!0)]),_:1}),t("div",Rt,[y.value?(c(),x("div",Mt,[t("div",$t,[r(s(q),{class:"h-10 w-10 text-primary animate-spin"}),e[41]||(e[41]=t("div",{class:"absolute inset-0 rounded-full animate-ping bg-primary/20 opacity-75"},null,-1))]),t("h3",Ft,S(p.value||"Analyzing your profile..."),1),t("p",Ut," Our AI is scanning "+S(a.project.field_of_study)+" databases for relevant emerging topics. ",1)])):v.value.length===0?(c(),x("div",At,[t("div",Bt,[r(s(N),{class:"h-12 w-12 text-muted-foreground/40"})]),e[43]||(e[43]=t("h3",{class:"text-lg font-semibold mb-2"},"No Topics Generated Yet",-1)),e[44]||(e[44]=t("p",{class:"text-muted-foreground text-sm max-w-md mx-auto mb-8"},' Click "Generate Ideas" to get personalized research topics based on your level, university, and field of study. ',-1)),r(s(j),{onClick:Z,size:"lg",class:"rounded-full px-8 shadow-lg shadow-primary/20 hover:shadow-primary/30 hover:scale-105 transition-all"},{default:l(()=>[...e[42]||(e[42]=[u(" Generate First Batch ",-1)])]),_:1})])):(c(),x("div",Dt,[(c(!0),x(ae,null,le(xe.value,o=>(c(),x("div",{key:o.id,class:F(["group relative flex flex-col md:flex-row gap-0 md:gap-6 rounded-2xl border border-border/50 bg-card hover:bg-card/80 transition-all duration-300 hover:shadow-xl hover:shadow-primary/5 hover:border-primary/20 overflow-hidden",O.value===o.title?"ring-1 ring-primary border-primary bg-primary/5":""])},[t("div",Lt,[t("div",zt,[r(s(G),{variant:he(o.difficulty),class:"rounded-md px-2 py-0.5 text-[10px] uppercase font-bold"},{default:l(()=>[u(S(o.difficulty),1)]),_:2},1032,["variant"]),t("span",Vt,S(o.timeline),1)]),t("div",qt,[e[45]||(e[45]=t("div",{class:"text-[10px] uppercase tracking-wider text-muted-foreground font-bold"},"Feasibility",-1)),t("div",Gt,[t("div",Wt,[t("div",{class:F(["h-full rounded-full transition-all",o.feasibility_score>=80?"bg-green-500":o.feasibility_score>=60?"bg-yellow-500":"bg-red-500"]),style:Ne(`width: ${o.feasibility_score}%`)},null,6)]),t("span",Ht,S(o.feasibility_score)+"%",1)])]),t("div",Xt,[r(s(j),{onClick:n=>be(o),size:"sm",variant:O.value===o.title?"default":"outline",class:F(["w-full h-9 transition-all",O.value===o.title?"bg-primary text-primary-foreground shadow-lg shadow-primary/20":"hover:bg-primary hover:text-primary-foreground"])},{default:l(()=>[u(S(O.value===o.title?"Selected":"Select")+" ",1),O.value===o.title?(c(),C(s(Re),{key:0,class:"ml-2 h-3.5 w-3.5"})):(c(),C(s(oe),{key:1,class:"ml-2 h-3.5 w-3.5"}))]),_:2},1032,["onClick","variant","class"]),r(s(j),{onClick:n=>te(o),size:"sm",variant:"ghost",class:"w-full h-9 text-xs text-muted-foreground hover:text-foreground"},{default:l(()=>[...e[46]||(e[46]=[u(" Refine ",-1)])]),_:2},1032,["onClick"])])]),t("div",Yt,[r(pe,{content:o.title,as:"h3",class:"text-lg font-bold leading-snug text-foreground group-hover:text-primary transition-colors"},null,8,["content"]),t("div",Jt,[r(pe,{content:o.description,as:"div"},null,8,["content"])]),t("div",Kt,[(c(!0),x(ae,null,le(o.keywords.slice(0,4),n=>(c(),x("span",{key:n,class:"text-[10px] font-medium text-muted-foreground/70 bg-muted/30 px-2 py-0.5 rounded-full border border-border/30"}," #"+S(n),1))),128))])])],2))),128))]))])]),_:1}),r(s(H),{value:"import",class:"space-y-6 animate-in fade-in slide-in-from-bottom-4 duration-500"},{default:l(()=>[r(s(A),{class:"border-border/50 shadow-lg shadow-primary/5 bg-card/80 backdrop-blur-sm min-h-[400px] flex items-center justify-center"},{default:l(()=>[t("div",Qt,[t("div",Zt,[r(s(se),{class:"h-8 w-8 text-primary"})]),e[48]||(e[48]=t("h3",{class:"text-2xl font-bold"},"Import Existing Project",-1)),e[49]||(e[49]=t("p",{class:"text-muted-foreground leading-relaxed"}," We're working on a feature that will allow you to import your existing research proposals and documents directly into Finalyze. ",-1)),r(s(G),{variant:"secondary",class:"mt-4 text-sm px-4 py-1.5 font-medium"},{default:l(()=>[...e[47]||(e[47]=[u("Coming Soon",-1)])]),_:1})])]),_:1})]),_:1})]),_:1},8,["modelValue"])])]),r(Ge,{open:s(M),"current-balance":s(D),"required-words":s(L),action:s(z)||"generate research topics","onUpdate:open":e[7]||(e[7]=o=>M.value=o),onClose:s(fe)},null,8,["open","current-balance","required-words","action","onClose"])]),_:1}))}}),Vs=He(es,[["__scopeId","data-v-b148db36"]]);export{Vs as default};
