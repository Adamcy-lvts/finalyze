import{c as M,_ as v,a as C}from"./index-C57tJw-c.js";import{_ as S}from"./useTextHistory-Bd7uuNh6.js";import{_ as z,a as L,b as A,c as P,d as V,e as q,f as E,g as F}from"./AlertDialogTitle.vue_vue_type_script_setup_true_lang-DZ04f4eT.js";import{a as W}from"./useForwardExpose-CcIYequg.js";import{D as H}from"./DialogTrigger-HF82OFsn.js";import{d as k,c as x,o as u,w as o,r as j,L as I,M as G,u as s,m as R,g as b,a as c,e as l,k as a,s as p,t as d,F as Q,E as J,q as y,n as w,x as K,y as O}from"./app-CRHIBinC.js";import{_ as T}from"./index-B9nH2UNr.js";import{t as N}from"./Sonner.vue_vue_type_script_setup_true_lang-BSZsdVc9.js";import{P as U}from"./plus-C3-bO-mH.js";import{C as X}from"./chevron-right-DmNXX95H.js";import{C as Y}from"./circle-check-big-DFxpbQTN.js";import{L as Z}from"./lock-CSnUgptk.js";import{T as ee}from"./target-BSFJp2Pz.js";import{T as te}from"./trash-2-DESwagxW.js";var re=k({__name:"AlertDialogTrigger",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"button"}},setup(m){const _=m;return W(),(n,f)=>(u(),x(s(H),I(G(_)),{default:o(()=>[j(n.$slots,"default")]),_:3},16))}}),se=re;/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ae=M("BookMarkedIcon",[["path",{d:"M10 2v8l3-3 3 3V2",key:"sqw3rj"}],["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]]),ne=k({__name:"AlertDialogTrigger",props:{asChild:{type:Boolean},as:{}},setup(m){const _=m;return(n,f)=>(u(),x(s(se),R({"data-slot":"alert-dialog-trigger"},_),{default:o(()=>[j(n.$slots,"default")]),_:3},16))}}),oe={class:"flex h-full flex-col bg-transparent"},le={class:"px-4 py-3 border-b border-border/40"},ue={class:"text-xs font-bold uppercase tracking-wider text-muted-foreground flex items-center gap-2"},de={class:"mt-2 flex items-center justify-between"},ie={class:"text-xs font-medium text-foreground"},ce={class:"p-2 space-y-1"},pe=["onClick"],he={class:"flex-shrink-0 mt-0.5"},me={key:1,class:"h-6 w-6 rounded-md bg-primary text-primary-foreground flex items-center justify-center shadow-sm ring-2 ring-primary/20"},_e={class:"text-xs font-bold"},fe={key:2,class:"h-6 w-6 rounded-md bg-muted text-muted-foreground flex items-center justify-center border border-border"},ge={class:"text-xs font-medium"},be={key:3,class:"h-6 w-6 rounded-md bg-muted/50 text-muted-foreground/30 flex items-center justify-center border border-border/50"},xe={class:"flex-1 text-left min-w-0"},ve={class:"flex items-center gap-2 mt-1.5"},Ce={class:"text-[10px] text-muted-foreground/70 flex items-center gap-1"},ye={key:0,class:"absolute right-2 top-3 opacity-0 group-hover:opacity-100 transition-opacity"},we={class:"p-3 border-t border-border/40 bg-muted/5"},ke={key:1,class:"flex gap-2"},$e={class:"truncate max-w-[120px]"},Fe=k({__name:"ChapterNavigation",props:{allChapters:{},currentChapter:{},project:{},outlines:{},facultyChapters:{},currentWordCount:{},targetWordCount:{},writingQualityScore:{},chapterContentLength:{}},emits:["goToChapter","generateNextChapter","deleteChapter"],setup(m,{emit:_}){const n=m,f=_,g=b(()=>n.facultyChapters&&n.facultyChapters.length>0?n.facultyChapters.map(t=>{const r=n.allChapters.find(i=>i.chapter_number===t.number),e=n.outlines?.find(i=>i.chapter_number===t.number);return{chapter_number:t.number,title:t.title,target_word_count:t.word_count,status:r?r.status:"not_started",exists:!!r,id:r?.id,slug:r?.slug,outline:e||null,facultyChapter:t}}):n.outlines&&n.outlines.length>0?n.outlines.map(t=>{const r=n.allChapters.find(e=>e.chapter_number===t.chapter_number);return{chapter_number:t.chapter_number,title:t.chapter_title,target_word_count:t.target_word_count,status:r?r.status:"not_started",exists:!!r,id:r?.id,slug:r?.slug,outline:t,facultyChapter:null}}):n.allChapters&&n.allChapters.length>0?n.allChapters.map(t=>({chapter_number:t.chapter_number,title:t.title,target_word_count:0,status:t.status,exists:!0,id:t.id,slug:t.slug,outline:null,facultyChapter:null})):[]);b(()=>!0);const h=b(()=>{const t=n.currentChapter.chapter_number;return g.value.find(e=>e.chapter_number===t+1)});b(()=>{const t=n.currentChapter.chapter_number;return g.value.find(e=>e.chapter_number===t-1)});const $=t=>{f("goToChapter",t)},D=()=>{f("generateNextChapter")},B=(t,r)=>{r&&K.delete(O("chapters.destroy",{project:n.project.slug,chapter:r}),{preserveState:!0,preserveScroll:!0,only:["allChapters","chapter"],onSuccess:e=>{const i=e.props.flash?.message||"Chapter deleted successfully";N.success(i)},onError:e=>{const i=typeof e=="string"?e:"Failed to delete chapter.";N.error(i)}})};return(t,r)=>(u(),c("div",oe,[l("div",le,[l("h2",ue,[a(s(ae),{class:"h-3.5 w-3.5"}),r[1]||(r[1]=p(" Table of Contents ",-1))]),l("div",de,[l("span",ie,d(g.value.length)+" Chapters",1),a(s(T),{variant:"secondary",class:"text-[10px] h-5 px-1.5 font-normal"},{default:o(()=>[p(d(Math.round(t.currentWordCount/(t.targetWordCount||1)*100))+"% Complete ",1)]),_:1})])]),a(s(S),{class:"flex-1"},{default:o(()=>[l("div",ce,[(u(!0),c(Q,null,J(g.value,e=>(u(),c("div",{key:e.chapter_number,class:"group relative"},[l("button",{onClick:i=>$(e.chapter_number),class:w(s(C)("flex w-full items-start gap-3 rounded-lg px-3 py-3 text-sm transition-all duration-200 border border-transparent",e.chapter_number===t.currentChapter.chapter_number?"bg-primary/5 border-primary/10 shadow-sm":"hover:bg-muted/50 hover:border-border/50"))},[l("div",he,[e.status==="approved"||e.status==="completed"?(u(),c("div",{key:0,class:w(s(C)("h-6 w-6 rounded-md flex items-center justify-center",e.chapter_number===t.currentChapter.chapter_number?"bg-green-500 text-white shadow-sm ring-2 ring-green-500/20":"bg-green-500/10 text-green-600 border border-green-500/20"))},[a(s(Y),{class:"h-3.5 w-3.5"})],2)):e.chapter_number===t.currentChapter.chapter_number?(u(),c("div",me,[l("span",_e,d(e.chapter_number),1)])):e.exists?(u(),c("div",fe,[l("span",ge,d(e.chapter_number),1)])):(u(),c("div",be,[a(s(Z),{class:"h-3 w-3"})]))]),l("div",xe,[l("p",{class:w(s(C)("truncate font-medium leading-tight",e.chapter_number===t.currentChapter.chapter_number?"text-foreground":"text-muted-foreground group-hover:text-foreground"))},d(e.title),3),l("div",ve,[l("span",Ce,[a(s(ee),{class:"h-3 w-3"}),p(" "+d(e.target_word_count)+" words ",1)]),e.exists?y("",!0):(u(),x(s(T),{key:0,variant:"outline",class:"h-4 px-1 text-[9px] border-dashed text-muted-foreground/60"},{default:o(()=>[...r[2]||(r[2]=[p(" Not Started ",-1)])]),_:1}))])])],10,pe),e.exists&&e.chapter_number!==t.currentChapter.chapter_number?(u(),c("div",ye,[a(s(z),null,{default:o(()=>[a(s(ne),{asChild:""},{default:o(()=>[a(s(v),{variant:"ghost",size:"icon",class:"h-6 w-6 text-muted-foreground/50 hover:text-destructive hover:bg-destructive/10 rounded-md"},{default:o(()=>[a(s(te),{class:"h-3 w-3"})]),_:1})]),_:1}),a(s(L),null,{default:o(()=>[a(s(A),null,{default:o(()=>[a(s(P),null,{default:o(()=>[p("Delete Chapter "+d(e.chapter_number)+"?",1)]),_:2},1024),a(s(V),null,{default:o(()=>[p(' This will permanently delete "'+d(e.title)+'" and all its content. ',1)]),_:2},1024)]),_:2},1024),a(s(q),null,{default:o(()=>[a(s(E),null,{default:o(()=>[...r[3]||(r[3]=[p("Cancel",-1)])]),_:1}),a(s(F),{class:"bg-destructive text-destructive-foreground hover:bg-destructive/90",onClick:i=>B(e.id,e.slug)},{default:o(()=>[...r[4]||(r[4]=[p(" Delete ",-1)])]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)])):y("",!0)]))),128))])]),_:1}),l("div",we,[h.value&&!h.value.exists?(u(),x(s(v),{key:0,onClick:D,class:"w-full bg-primary text-primary-foreground shadow-sm hover:bg-primary/90 transition-all h-9 text-xs font-medium",size:"sm"},{default:o(()=>[a(s(U),{class:"mr-2 h-3.5 w-3.5"}),p(" Start Chapter "+d(h.value.chapter_number),1)]),_:1})):h.value?(u(),c("div",ke,[a(s(v),{variant:"outline",class:"w-full justify-between bg-background hover:bg-accent/50 h-9 text-xs",size:"sm",onClick:r[0]||(r[0]=e=>$(h.value.chapter_number))},{default:o(()=>[l("span",$e,"Next: "+d(h.value.title),1),a(s(X),{class:"h-3.5 w-3.5 ml-2 flex-shrink-0"})]),_:1})])):y("",!0)])]))}});export{Fe as _};
