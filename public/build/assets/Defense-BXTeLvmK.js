const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/vendor-BwJgEX4g.js","assets/vendor-CzjmNn-c.css"])))=>i.map(i=>d[i]);
import{bt as ze,cB as a,co as o,cr as e,cq as l,bE as n,fd as Ot,cG as V,ct as T,gS as Rt,cp as $,cs as ne,cU as wn,cS as ee,df as le,cn as he,bs as A,ck as U,ci as Ee,bA as yt,cw as ct,eS as Yt,bD as st,cu as de,hA as Kt,cF as Zt,cL as rt,cI as qn,da as bt,db as Qe,d6 as ms,h2 as xs,dX as Vt,cC as bs,bB as fn,h5 as gn,e5 as ys,gY as Xn,dN as Qt,cO as kn,f3 as ws,hB as ks,fV as _s,hC as Ss,dH as vn,f6 as Jt,dO as _n,dW as Mt,h0 as Sn,cY as en,cQ as ce,eR as $s,fe as dt,eM as tn,g9 as Bn,cE as Et,cb as Fe,bz as zs,hD as Ht,hE as hn,hF as Dn,hG as Ct,hH as Cs,hI as gt,hJ as qt,hK as Ne,hL as Tt,hM as rn,hN as jn,hO as Pn,hP as Ln,_ as Fs,hQ as Is,cR as Wt,hR as Ts,hS as Es,ft as mn,d1 as As,fJ as Yn,f7 as Bs,e_ as Ds,e$ as js,f0 as Ps,cM as Ls,eT as Ms,eU as Os,hT as Rs,hU as Hs,hV as Ws,hW as Ns,hX as Us,hY as Gs,hZ as Vs,cP as qs,h_ as Xs,h$ as Ys,dZ as Kn,i0 as Ks,i1 as Qs,f9 as Qn,i2 as Jn,dw as Js,i3 as Zs,dK as xn,eD as eo,i4 as Zn,dj as to,i5 as no,dv as es,eW as so,i6 as oo,i7 as lo,i8 as io,fg as ts,dl as bn,e1 as ao,cx as ns,cD as ro,cm as Mn,ce as co,cj as dn}from"./vendor-BwJgEX4g.js";import{a as uo}from"./AppLayout.vue_vue_type_script_setup_true_lang-DgIUSJU0.js";import{_ as ae}from"./index-Dh4Dof5h.js";import{_ as _t}from"./index-DXsLaJg_.js";import{_ as et,a as ot}from"./CardContent.vue_vue_type_script_setup_true_lang-CHCDuRZd.js";import{_ as cn}from"./Progress.vue_vue_type_script_setup_true_lang-Dgae3pP5.js";import{_ as lt}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{_ as ht}from"./CardDescription.vue_vue_type_script_setup_true_lang-CUZkTCdh.js";import{_ as mt,a as xt}from"./CardTitle.vue_vue_type_script_setup_true_lang-CFv199a3.js";import{R as un,_ as po}from"./SelectLabel.vue_vue_type_script_setup_true_lang-BCwWObAm.js";import{a as ss,_ as os}from"./DialogContent.vue_vue_type_script_setup_true_lang-9N0hzFWp.js";import{_ as fo,a as go,b as vo,c as ho,d as mo,e as xo,f as bo,g as yo}from"./AlertDialogTitle.vue_vue_type_script_setup_true_lang-DYbp3fW0.js";import{b as $n,c as zn,d as Cn}from"./WordBalanceDisplay.vue_vue_type_script_setup_true_lang-CgPuWSvn.js";import{_ as Ft}from"./Label.vue_vue_type_script_setup_true_lang-BCDEh9UE.js";import{_ as yn}from"./Input.vue_vue_type_script_setup_true_lang-BcqgGMan.js";import{_ as wo,a as ko,b as _o,c as So,d as $o}from"./SelectValue.vue_vue_type_script_setup_true_lang-DtEl4IcM.js";import{_ as zo}from"./SelectGroup.vue_vue_type_script_setup_true_lang-DV5ELwSS.js";import"./UserInfo.vue_vue_type_script_setup_true_lang-Be-HwAt8.js";import"./TooltipTrigger.vue_vue_type_script_setup_true_lang-DJ0GQY-9.js";import"./Sonner.vue_vue_type_script_setup_true_lang-BX3Dlz2r.js";import"./AppLogo.vue_vue_type_script_setup_true_lang-CKHRxUG0.js";import"./useAppearance-ninCSMwp.js";import"./useWordBalance-CZEmJJqq.js";import"./PWAInstallPrompt.vue_vue_type_script_setup_true_lang-6LJd3mi5.js";import"./vendor-tiptap-C_SwIIdp.js";import"./MermaidExtension-BAW3KdnI.js";import"./vendor-mermaid-DpXUzUXc.js";const Co={class:"w-full max-w-6xl flex items-center justify-between mb-8"},Fo={class:"flex items-center gap-4"},Io={class:"flex items-center gap-2 bg-zinc-900 px-4 py-2 rounded-full border border-zinc-800"},To={class:"flex flex-col leading-tight"},Eo={class:"text-[10px] uppercase tracking-widest text-zinc-500"},Ao={class:"text-sm font-mono text-zinc-300"},Bo={key:0,class:"text-[9px] uppercase tracking-widest text-zinc-600"},Do={class:"flex items-center gap-2 bg-zinc-900 px-4 py-2 rounded-full border border-zinc-800"},jo={class:"text-xs text-zinc-300"},Po=ze({__name:"DefenseSimulationHud",props:{formattedSimulationTime:{},timeLabel:{},secondaryTimeLabel:{},secondaryTime:{},questionLimitLabel:{}},emits:["stop"],setup(P,{emit:h}){const t=h;return(r,s)=>(o(),a("div",Co,[e("div",Fo,[s[1]||(s[1]=e("div",{class:"h-3 w-3 rounded-full bg-rose-600 animate-pulse"},null,-1)),s[2]||(s[2]=e("span",{class:"text-xs font-bold tracking-[0.2em] text-zinc-500 uppercase"},"Live Simulation",-1)),e("div",Io,[l(n(Ot),{class:"h-3.5 w-3.5 text-zinc-400"}),e("div",To,[e("span",Eo,T(r.timeLabel),1),e("span",Ao,T(r.formattedSimulationTime),1),r.secondaryTime&&r.secondaryTimeLabel?(o(),a("span",Bo,T(r.secondaryTimeLabel)+" "+T(r.secondaryTime),1)):V("",!0)])]),e("div",Do,[l(n(Rt),{class:"h-3.5 w-3.5 text-zinc-400"}),e("span",jo,"Questions "+T(r.questionLimitLabel),1)])]),l(n(ae),{variant:"ghost",onClick:s[0]||(s[0]=d=>t("stop")),class:"rounded-full text-zinc-400 hover:text-white hover:bg-zinc-900 gap-2"},{default:$(()=>[s[3]||(s[3]=ne(" Finish & Analysis ",-1)),l(n(wn),{class:"h-4 w-4 rotate-180"})]),_:1})]))}}),Lo={class:"lg:col-span-4 space-y-4 md:space-y-6 overflow-y-auto pr-2 custom-scrollbar"},Mo={class:"grid grid-cols-1 sm:grid-cols-3 lg:grid-cols-1 gap-4 md:gap-6"},Oo={class:"flex items-center gap-3 md:gap-4"},Ro={class:"h-10 w-10 md:h-12 md:w-12 rounded-2xl bg-zinc-800 flex items-center justify-center text-xl md:text-2xl"},Ho={class:"flex-1 min-w-0"},Wo={class:"flex items-center justify-between gap-2"},No={class:"font-bold text-zinc-200 text-sm md:text-base truncate"},Uo={class:"text-[10px] md:text-xs text-zinc-500 truncate"},Go={class:"text-[10px] md:text-xs text-zinc-600"},Vo={class:"grid grid-cols-3 lg:grid-cols-1 gap-4 md:gap-6"},qo={class:"space-y-2"},Xo={class:"flex items-center justify-between text-[10px] md:text-xs"},Yo={class:"text-zinc-200"},Ko={class:"space-y-2"},Qo={class:"flex items-center justify-between text-[10px] md:text-xs"},Jo={class:"text-zinc-200"},Zo={class:"space-y-2"},el={class:"flex items-center justify-between text-[10px] md:text-xs"},tl={class:"text-zinc-200"},nl=ze({__name:"DefensePanelVisualization",props:{activeSimulationPersonas:{},isFetchingQuestion:{type:Boolean},thinkingPersonaId:{},panelistQuestionCounts:{},panelistQuestionTarget:{},clarityScore:{},depthScore:{},confidenceScore:{}},setup(P){return(h,t)=>(o(),a("div",Lo,[t[5]||(t[5]=e("h3",{class:"text-[10px] md:text-sm font-bold text-zinc-500 uppercase tracking-widest px-2"},"The Panel",-1)),e("div",Mo,[(o(!0),a(ee,null,le(h.activeSimulationPersonas,r=>(o(),he(n(et),{key:r.id,class:"bg-zinc-900/50 border-zinc-800 hover:border-zinc-700 transition-all rounded-3xl"},{default:$(()=>[l(n(ot),{class:"p-4 md:p-6"},{default:$(()=>[e("div",Oo,[e("div",Ro,T(r.avatar),1),e("div",Ho,[e("div",Wo,[e("span",No,T(r.name),1),h.isFetchingQuestion&&(!h.thinkingPersonaId||h.thinkingPersonaId===r.id)?(o(),he(n(_t),{key:0,class:"bg-amber-500/10 text-amber-500 border-none text-[8px] h-4 shrink-0"},{default:$(()=>[...t[0]||(t[0]=[ne(" THINKING",-1)])]),_:1})):V("",!0)]),e("span",Uo,T(r.role),1),e("div",Go," Questions asked: "+T(h.panelistQuestionCounts[r.id]??0)+" / "+T(h.panelistQuestionTarget[r.id]??0),1)])])]),_:2},1024)]),_:2},1024))),128))]),l(n(et),{class:"bg-zinc-900 border-none rounded-3xl p-4 md:p-6 mt-6 md:mt-12 bg-gradient-to-br from-zinc-900 to-black"},{default:$(()=>[t[4]||(t[4]=e("h4",{class:"text-[10px] md:text-xs font-bold text-zinc-500 mb-4 uppercase"},"Live Performance",-1)),e("div",Vo,[e("div",qo,[e("div",Xo,[t[1]||(t[1]=e("span",{class:"text-zinc-400"},"Clarity",-1)),e("span",Yo,T(h.clarityScore)+"%",1)]),l(n(cn),{"model-value":h.clarityScore,class:"h-1 bg-zinc-800","indicator-class":"bg-blue-500"},null,8,["model-value"])]),e("div",Ko,[e("div",Qo,[t[2]||(t[2]=e("span",{class:"text-zinc-400"},"Depth",-1)),e("span",Jo,T(h.depthScore)+"%",1)]),l(n(cn),{"model-value":h.depthScore,class:"h-1 bg-zinc-800","indicator-class":"bg-emerald-500"},null,8,["model-value"])]),e("div",Zo,[e("div",el,[t[3]||(t[3]=e("span",{class:"text-zinc-400"},"Confidence",-1)),e("span",tl,T(h.confidenceScore)+"%",1)]),l(n(cn),{"model-value":h.confidenceScore,class:"h-1 bg-zinc-800","indicator-class":"bg-rose-500"},null,8,["model-value"])])])]),_:1})]))}}),sl=lt(nl,[["__scopeId","data-v-7bbc4555"]]),ol={class:"lg:col-span-8 flex flex-col bg-zinc-900/40 rounded-[2.5rem] border border-zinc-800/50 backdrop-blur-xl overflow-hidden"},ll={class:"space-y-10 max-w-3xl mx-auto py-8"},il={class:"flex items-center gap-2 mb-2 px-1"},al={class:"text-[10px] font-bold text-zinc-500 uppercase tracking-widest"},rl={class:"text-[8px] text-zinc-600"},dl={class:"p-4 md:p-8 border-t border-zinc-800/50 bg-black/20"},cl={class:"relative max-w-3xl mx-auto"},ul=["disabled"],pl={class:"absolute right-3 md:right-4 top-1/2 -translate-y-1/2 flex items-center gap-2"},fl={class:"mt-4 flex justify-center gap-6"},gl=ze({__name:"DefenseChatInterface",props:{messages:{},personaLookup:{},modelValue:{},isSending:{type:Boolean}},emits:["update:modelValue","submit","requestHint"],setup(P,{emit:h}){const t=P,r=h,s=A(null),d=U({get:()=>t.modelValue,set:v=>r("update:modelValue",v)}),c=async()=>{await st(),s.value&&(s.value.scrollTop=s.value.scrollHeight)},g=v=>v.created_at?new Date(v.created_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):"";return Ee(()=>t.messages,()=>{c()},{deep:!0}),yt(()=>{c()}),(v,w)=>(o(),a("div",ol,[e("div",{ref_key:"chatContainer",ref:s,class:"flex-grow p-8 overflow-y-auto custom-scrollbar"},[e("div",ll,[(o(!0),a(ee,null,le(v.messages,(E,S)=>(o(),a("div",{key:S,class:de(["group animate-in fade-in slide-in-from-bottom-2 duration-500",E.role==="student"?"flex flex-col items-end":"flex flex-col items-start"])},[e("div",il,[e("span",al,T(E.role==="panelist"?v.personaLookup[E.panelist_persona||""]||"Panelist":"Candidate"),1),e("span",rl,T(g(E)),1)]),e("div",{class:de(["p-5 rounded-3xl text-sm leading-relaxed max-w-[85%]",E.role==="student"?"bg-zinc-100 text-zinc-950 rounded-tr-none":"bg-zinc-800/80 text-zinc-200 border border-zinc-700/50 rounded-tl-none"])},T(E.content),3)],2))),128))])],512),e("div",dl,[e("div",cl,[ct(e("textarea",{"onUpdate:modelValue":w[0]||(w[0]=E=>d.value=E),placeholder:"Type your defense answer...",class:"w-full bg-zinc-950 border-zinc-800 rounded-2xl py-4 md:py-6 px-4 md:px-6 pr-20 md:pr-24 text-zinc-100 focus:ring-primary/40 focus:border-primary/40 placeholder-zinc-700 transition-all resize-none shadow-2xl text-sm md:text-base",disabled:v.isSending,rows:"2"},null,8,ul),[[Yt,d.value]]),e("div",pl,[l(n(ae),{size:"icon",onClick:w[1]||(w[1]=E=>r("submit")),disabled:v.isSending,class:"h-9 w-9 md:h-10 md:w-10 rounded-full bg-primary text-primary-foreground hover:bg-primary/90 shadow-lg shadow-primary/20"},{default:$(()=>[l(n(wn),{class:"h-4 w-4 md:h-5 md:w-5 rotate-180"})]),_:1},8,["disabled"])])]),e("div",fl,[e("button",{class:"flex items-center gap-2 text-[10px] font-bold text-zinc-500 hover:text-white transition-colors uppercase tracking-widest",onClick:w[2]||(w[2]=E=>r("requestHint"))},[l(n(Ot),{class:"h-3.5 w-3.5"}),w[3]||(w[3]=ne(" Request Hint ",-1))])])])]))}}),vl=lt(gl,[["__scopeId","data-v-9ab6bf2a"]]),hl={class:"flex-1 min-h-[300px] relative overflow-hidden"},ml={class:"text-xl md:text-4xl font-bold font-display text-white mb-6 md:mb-10 tracking-tight leading-tight"},xl={class:"flex-1 overflow-y-auto custom-scrollbar pr-4 md:pr-6 pb-4 max-w-4xl"},bl=["innerHTML"],yl={key:1,class:"flex flex-col items-center justify-center h-full text-center space-y-4"},wl={class:"h-12 w-12 rounded-full bg-indigo-500/10 flex items-center justify-center"},kl={key:2,class:"absolute inset-0 bg-zinc-950/50 backdrop-blur-sm flex items-center justify-center z-10 rounded-xl"},_l={class:"flex flex-col items-center gap-3"},Sl={key:0,class:"mt-6 pt-4 border-t border-white/5 flex items-center justify-between"},$l={class:"flex items-center gap-1.5"},zl=["onClick"],Cl={class:"flex items-center gap-2"},Fl={class:"text-sm font-mono text-zinc-500 w-12 text-center"},On=ze({__name:"ExecutiveBriefingDeck",props:{slides:{default:()=>[]},isLoading:{type:Boolean}},emits:["refresh"],setup(P,{emit:h}){const t=P,r=A(0),s=A(null),{isSwiping:d,direction:c}=Kt(s);Ee(d,(u,F)=>{F&&!u&&(c.value==="left"?v():c.value==="right"&&w())});const g=U(()=>t.slides[r.value]),v=()=>{r.value<t.slides.length-1&&r.value++},w=()=>{r.value>0&&r.value--},E=u=>{r.value=u},S=u=>{if(!u)return"";let F=u;return F=F.replace(/^#### (.*$)/gim,"<h4>$1</h4>"),F=F.replace(/^### (.*$)/gim,"<h3>$1</h3>"),F=F.replace(/^## (.*$)/gim,"<h2>$1</h2>"),F=F.replace(/^# (.*$)/gim,"<h1>$1</h1>"),F=F.replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>"),F=F.replace(/(?<!\*)\*([^*\n]+?)\*(?!\*)/g,"<em>$1</em>"),F.split(/\n\s*\n/).filter(C=>C.trim()).map(C=>{const M=C.trim();if(M.match(/^<h[1-4]>/))return M;if(M.includes(`
`)&&(M.match(/^\d+\.\s/)||M.match(/^[-*]\s/))){const W=M.split(`
`).map(p=>p.trim()).filter(p=>p),K=W.some(p=>p.match(/^\d+\.\s/)),I=W.map(p=>`<li>${p.replace(/^(\d+\.|[-*])\s/,"")}</li>`).join("");return K?`<ol>${I}</ol>`:`<ul>${I}</ul>`}return`<p>${M.replace(/\n/g,"<br>")}</p>`}).join("")};return(u,F)=>(o(),a("div",{class:"flex flex-col h-full relative",ref_key:"containerRef",ref:s},[e("div",hl,[u.slides.length>0?(o(),he(Zt,{key:0,"enter-active-class":"transition-opacity duration-300 ease-out","enter-from-class":"opacity-0","enter-to-class":"opacity-100","leave-active-class":"transition-opacity duration-200 ease-in absolute inset-0","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:$(()=>[(o(),a("div",{key:r.value,class:"h-full flex flex-col"},[e("h3",ml,T(g.value.title),1),e("div",xl,[e("div",{innerHTML:S(g.value.content),class:"prose-sm md:prose-xl dark:prose-invert leading-relaxed md:leading-loose tracking-wide [&_p]:mb-4 md:[&_p]:mb-6 [&_strong]:text-indigo-400 [&_strong]:font-semibold text-zinc-50 [&_ul]:list-none [&_ul]:pl-0 [&_ol]:list-decimal [&_ol]:pl-5 [&_li]:mb-4 md:[&_li]:mb-6 [&_li]:pl-4 [&_li]:border-l-2 [&_li]:border-indigo-500/50"},null,8,bl)])]))]),_:1})):u.isLoading?V("",!0):(o(),a("div",yl,[e("div",wl,[l(n(rt),{class:"h-6 w-6 text-indigo-500/50"})]),F[0]||(F[0]=e("p",{class:"text-base text-zinc-500 max-w-xs"}," No executive briefing yet. Click refresh to generate a summary. ",-1))])),u.isLoading?(o(),a("div",kl,[e("div",_l,[l(n(qn),{class:"h-6 w-6 text-indigo-400 animate-spin"}),F[1]||(F[1]=e("span",{class:"text-xs font-medium text-indigo-300"},"Analyzing Project...",-1))])])):V("",!0)]),u.slides.length>0?(o(),a("div",Sl,[e("div",$l,[(o(!0),a(ee,null,le(u.slides,(R,C)=>(o(),a("button",{key:C,onClick:M=>E(C),class:de(["h-1.5 rounded-full transition-all duration-300",r.value===C?"w-6 bg-indigo-500":"w-1.5 bg-zinc-700 hover:bg-zinc-600"])},null,10,zl))),128))]),e("div",Cl,[l(n(ae),{variant:"ghost",size:"icon",class:"h-8 w-8 text-zinc-400 hover:text-white",disabled:r.value===0,onClick:w},{default:$(()=>[l(n(bt),{class:"h-4 w-4"})]),_:1},8,["disabled"]),e("span",Fl,T(r.value+1)+" / "+T(u.slides.length),1),l(n(ae),{variant:"ghost",size:"icon",class:"h-8 w-8 text-zinc-400 hover:text-white",disabled:r.value===u.slides.length-1,onClick:v},{default:$(()=>[l(n(Qe),{class:"h-4 w-4"})]),_:1},8,["disabled"])])])):V("",!0)],512))}}),Il={class:"flex-1 min-h-[350px] relative overflow-hidden"},Tl={key:0,class:"mb-6"},El={class:"mb-6 md:mb-10"},Al={class:"flex items-start gap-3 md:gap-4"},Bl={class:"h-8 w-8 md:h-10 md:w-10 shrink-0 rounded-lg md:rounded-xl bg-rose-500/10 flex items-center justify-center"},Dl={class:"text-xl md:text-4xl font-bold font-display text-white tracking-tight leading-snug md:leading-tight"},jl={class:"flex-1 overflow-y-auto custom-scrollbar pr-4 md:pr-6 pb-6"},Pl={class:"relative pl-5 md:pl-6"},Ll={class:"flex items-center gap-2 mb-3 md:mb-4 text-indigo-400 font-medium text-[10px] md:text-sm tracking-wide uppercase"},Ml=["innerHTML"],Ol={key:1,class:"flex flex-col items-center justify-center h-full text-center space-y-4"},Rl={class:"h-16 w-16 rounded-full bg-rose-500/10 flex items-center justify-center"},Hl={key:2,class:"absolute inset-0 bg-zinc-950/50 backdrop-blur-sm flex items-center justify-center z-10 rounded-3xl border border-white/5"},Wl={class:"flex flex-col items-center gap-4"},Nl={class:"relative"},Ul={key:0,class:"mt-8 pt-6 border-t border-white/5 flex items-center justify-between"},Gl={class:"flex items-center gap-2"},Vl=["onClick"],ql={class:"flex items-center gap-3"},Xl={class:"flex flex-col items-center min-w-[3rem]"},Yl={class:"text-base font-bold text-white leading-none"},Kl={class:"text-[10px] text-zinc-500 font-mono uppercase mt-1"},Rn=ze({__name:"PredictedQuestionsDeck",props:{questions:{default:()=>[]},isLoading:{type:Boolean}},setup(P){const h=P,t=A(0),r=A(null),{isSwiping:s,direction:d}=Kt(r);Ee(s,(S,u)=>{u&&!S&&(d.value==="left"?g():d.value==="right"&&v())});const c=U(()=>h.questions[t.value]),g=()=>{t.value<h.questions.length-1&&t.value++},v=()=>{t.value>0&&t.value--},w=S=>{t.value=S},E=S=>S?S.split(`

`).map(u=>`<p>${u.trim().replace(/\n/g,"<br>")}</p>`).join(""):"";return(S,u)=>(o(),a("div",{class:"flex flex-col h-full relative",ref_key:"containerRef",ref:r},[e("div",Il,[S.questions.length>0?(o(),he(Zt,{key:0,"enter-active-class":"transition-opacity duration-300 ease-out","enter-from-class":"opacity-0","enter-to-class":"opacity-100","leave-active-class":"transition-opacity duration-200 ease-in absolute inset-0","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:$(()=>[(o(),a("div",{key:t.value,class:"h-full flex flex-col pt-2"},[c.value.category?(o(),a("div",Tl,[l(n(_t),{variant:"outline",class:"text-[10px] uppercase tracking-widest bg-rose-500/5 text-rose-400 border-rose-500/20 px-3 py-1"},{default:$(()=>[ne(T(c.value.category),1)]),_:1})])):V("",!0),e("div",El,[e("div",Al,[e("div",Bl,[l(n(ms),{class:"h-4 w-4 md:h-5 md:w-5 text-rose-500"})]),e("h3",Dl,T(c.value.question),1)])]),e("div",jl,[e("div",Pl,[u[1]||(u[1]=e("div",{class:"absolute left-0 top-0 bottom-0 w-1 bg-gradient-to-b from-indigo-500 to-transparent rounded-full opacity-50"},null,-1)),e("div",Ll,[l(n(xs),{class:"h-3 w-3 md:h-4 md:w-4"}),u[0]||(u[0]=e("span",null,"Defense Strategy",-1))]),e("div",{innerHTML:E(c.value.suggested_answer),class:"text-zinc-300 text-base md:text-xl leading-relaxed tracking-wide italic font-serif [&_p]:mb-4 md:[&_p]:mb-6"},null,8,Ml)])])]))]),_:1})):S.isLoading?V("",!0):(o(),a("div",Ol,[e("div",Rl,[l(n(Rt),{class:"h-8 w-8 text-rose-500/50"})]),u[2]||(u[2]=e("div",{class:"space-y-2"},[e("p",{class:"text-lg font-medium text-white"},"No questions identified"),e("p",{class:"text-sm text-zinc-500 max-w-xs"}," Generate defense questions to prepare for potential examiner inquiry. ")],-1))])),S.isLoading?(o(),a("div",Hl,[e("div",Wl,[e("div",Nl,[l(n(qn),{class:"h-10 w-10 text-rose-500 animate-spin"}),l(n(rt),{class:"h-4 w-4 text-rose-400 absolute -top-1 -right-1 animate-pulse"})]),u[3]||(u[3]=e("span",{class:"text-sm font-medium text-rose-200"},"Simulating Defense Panel...",-1))])])):V("",!0)]),S.questions.length>0?(o(),a("div",Ul,[e("div",Gl,[(o(!0),a(ee,null,le(S.questions,(F,R)=>(o(),a("button",{key:R,onClick:C=>w(R),class:de(["h-2 rounded-full transition-all duration-300",t.value===R?"w-8 bg-rose-500":"w-2 bg-zinc-800 hover:bg-zinc-700"])},null,10,Vl))),128))]),e("div",ql,[l(n(ae),{variant:"ghost",size:"icon",class:"h-10 w-10 rounded-xl border border-white/5 text-zinc-400 hover:text-white hover:bg-white/5 transition-all",disabled:t.value===0,onClick:v},{default:$(()=>[l(n(bt),{class:"h-5 w-5"})]),_:1},8,["disabled"]),e("div",Xl,[e("span",Yl,T(t.value+1),1),e("span",Kl,T(S.questions.length)+" Total",1)]),l(n(ae),{variant:"ghost",size:"icon",class:"h-10 w-10 rounded-xl border border-white/5 text-zinc-400 hover:text-white hover:bg-white/5 transition-all",disabled:t.value===S.questions.length-1,onClick:g},{default:$(()=>[l(n(Qe),{class:"h-5 w-5"})]),_:1},8,["disabled"])])])):V("",!0)],512))}}),Ql={key:0,class:"absolute inset-0 bg-black/20 dark:bg-black/40 rounded-[2.5rem] pointer-events-none z-10"},Jl={class:"space-y-8"},Zl={class:"flex flex-col sm:flex-row sm:items-center justify-between gap-4 sm:gap-0"},ei={class:"flex items-center gap-2"},ti={key:0,class:"h-full"},ni={key:1,class:"relative z-10 space-y-4"},si={key:2,class:"flex flex-col items-center justify-center py-12 text-center space-y-4"},oi={class:"h-12 w-12 rounded-full bg-indigo-500/10 flex items-center justify-center"},li={class:"space-y-4 animate-in fade-in slide-in-from-bottom-4 duration-500 delay-75"},ii={class:"flex flex-col sm:flex-row sm:items-center justify-between gap-4 sm:gap-0"},ai={class:"flex items-center gap-2"},ri={class:"space-y-4 animate-in fade-in slide-in-from-bottom-4 duration-500"},di={class:"flex flex-col sm:flex-row sm:items-center justify-between gap-4 sm:gap-0"},ci={class:"flex items-center gap-2"},ui={class:"flex flex-col sm:flex-row sm:items-center justify-between gap-4 sm:gap-0"},pi={class:"flex items-center gap-2"},fi={key:0,class:"h-full"},gi={key:1,class:"relative z-10 space-y-4"},vi={key:2,class:"flex flex-col items-center justify-center py-12 text-center space-y-4"},hi={class:"h-12 w-12 rounded-full bg-indigo-500/10 flex items-center justify-center"},mi={class:"relative"},xi={class:"grid grid-cols-1 sm:grid-cols-2 gap-3"},bi={key:0,class:"text-sm text-muted-foreground border-t border-emerald-500/10 pt-4 mt-2"},yi=ze({__name:"DefensePrepLeftColumn",props:{isDeckSwapped:{type:Boolean},predictedQuestions:{},isGeneratingQuestions:{type:Boolean},briefingSlides:{},executiveBriefing:{},isBriefingLoading:{type:Boolean},openingAnalysis:{},isOpeningGenerating:{type:Boolean},isOpeningAnalyzing:{type:Boolean},modelValue:{},highlightPrep:{type:Boolean},highlightOpening:{type:Boolean}},emits:["update:modelValue","generatePredictedQuestions","refreshExecutiveBriefing","toggleDeckSwap","generateOpeningStatement","analyzeOpeningStatement"],setup(P,{emit:h}){const t=P,r=h,s=U({get:()=>t.modelValue,set:d=>r("update:modelValue",d)});return(d,c)=>(o(),a("div",{class:de(["lg:col-span-8 transition-all duration-500 relative",d.highlightPrep?"ring-2 ring-primary/40 ring-offset-2 ring-offset-background rounded-[2.5rem]":""])},[d.highlightOpening?(o(),a("div",Ql)):V("",!0),e("div",Jl,[d.isDeckSwapped?(o(),a(ee,{key:1},[e("div",ri,[l(n(et),{class:"overflow-hidden border-none bg-zinc-900/30 shadow-none ring-1 ring-border/50"},{default:$(()=>[l(n(mt),{class:"pb-2"},{default:$(()=>[e("div",di,[l(n(xt),{class:"flex items-center gap-2 text-xl md:text-2xl font-display"},{default:$(()=>[l(n(Rt),{class:"h-5 w-5 text-rose-500"}),c[19]||(c[19]=ne(" Predicted Defense Questions ",-1))]),_:1}),e("div",ci,[l(n(_t),{variant:"secondary",class:"font-mono text-[10px]"},{default:$(()=>[ne(T(d.predictedQuestions.length)+" TOP QUESTIONS",1)]),_:1}),l(n(ae),{variant:"ghost",size:"sm",class:"text-xs h-8",onClick:c[5]||(c[5]=g=>r("generatePredictedQuestions")),disabled:d.isGeneratingQuestions},{default:$(()=>[l(n(rt),{class:"h-3.5 w-3.5"}),ne(" "+T(d.isGeneratingQuestions?"Generating...":"Generate"),1)]),_:1},8,["disabled"]),l(n(ae),{variant:"ghost",size:"icon",class:"h-8 w-8 text-zinc-500 hover:text-rose-400",onClick:c[6]||(c[6]=g=>r("toggleDeckSwap")),title:"Swap position"},{default:$(()=>[l(n(Vt),{class:"h-4 w-4"})]),_:1})])]),l(n(ht),{class:"text-rose-600/70 dark:text-rose-400/70 text-sm"},{default:$(()=>[...c[20]||(c[20]=[ne(" Identify and prepare for high-probability questions examiners might ask. ",-1)])]),_:1})]),_:1}),l(n(ot),{class:"relative pb-6 md:pb-10 px-6 md:px-10 min-h-[450px]"},{default:$(()=>[l(Rn,{questions:d.predictedQuestions,"is-loading":d.isGeneratingQuestions},null,8,["questions","is-loading"])]),_:1})]),_:1})]),l(n(et),{class:"overflow-hidden border-none bg-zinc-900/30 shadow-none ring-1 ring-border/50 animate-in fade-in slide-in-from-bottom-4 duration-500 delay-75"},{default:$(()=>[l(n(mt),{class:"pb-2"},{default:$(()=>[e("div",ui,[l(n(xt),{class:"flex items-center gap-2 text-xl md:text-2xl font-display"},{default:$(()=>[l(n(rt),{class:"h-5 w-5 text-indigo-500"}),c[21]||(c[21]=ne(" Executive Briefing ",-1))]),_:1}),e("div",pi,[l(n(ae),{variant:"ghost",size:"sm",class:"text-xs gap-1.5 h-8 w-fit",onClick:c[7]||(c[7]=g=>r("refreshExecutiveBriefing")),disabled:d.isBriefingLoading},{default:$(()=>[l(n(Ot),{class:"h-3.5 w-3.5"}),ne(" "+T(d.isBriefingLoading?"Loading...":"Refresh AI"),1)]),_:1},8,["disabled"]),l(n(ae),{variant:"ghost",size:"icon",class:"h-8 w-8 text-zinc-500 hover:text-indigo-400",onClick:c[8]||(c[8]=g=>r("toggleDeckSwap")),title:"Swap position"},{default:$(()=>[l(n(Vt),{class:"h-4 w-4"})]),_:1})])]),l(n(ht),{class:"text-indigo-600/70 dark:text-indigo-400/70 text-sm"},{default:$(()=>[...c[22]||(c[22]=[ne(" Your project's core value proposition, synthesized for your defense. ",-1)])]),_:1})]),_:1}),l(n(ot),{class:"relative pb-6 md:pb-10 px-6 md:px-10 min-h-[400px]"},{default:$(()=>[d.briefingSlides.length>0?(o(),a("div",fi,[l(On,{slides:d.briefingSlides,"is-loading":d.isBriefingLoading,onRefresh:c[9]||(c[9]=g=>r("refreshExecutiveBriefing"))},null,8,["slides","is-loading"])])):d.executiveBriefing?(o(),a("div",gi,[c[23]||(c[23]=e("div",{class:"absolute -left-6 top-0 bottom-0 w-1 bg-gradient-to-b from-indigo-500/80 via-purple-500/80 to-transparent rounded-full opacity-60"},null,-1)),l(un,{content:d.executiveBriefing,"show-font-controls":!1,"viewer-class":"prose-sm md:prose-base dark:prose-invert leading-relaxed",class:"!bg-transparent"},null,8,["content"])])):(o(),a("div",vi,[e("div",hi,[l(n(rt),{class:"h-6 w-6 text-indigo-500/50"})]),c[24]||(c[24]=e("p",{class:"text-base text-muted-foreground italic max-w-xs"},' No executive briefing yet. Click "Refresh AI" to generate a comprehensive summary of your research. ',-1))]))]),_:1})]),_:1})],64)):(o(),a(ee,{key:0},[l(n(et),{class:"overflow-hidden border-none bg-zinc-900/30 shadow-none ring-1 ring-border/50 animate-in fade-in slide-in-from-bottom-4 duration-500"},{default:$(()=>[l(n(mt),{class:"pb-2"},{default:$(()=>[e("div",Zl,[l(n(xt),{class:"flex items-center gap-2 text-xl md:text-2xl font-display"},{default:$(()=>[l(n(rt),{class:"h-5 w-5 text-indigo-500"}),c[13]||(c[13]=ne(" Executive Briefing ",-1))]),_:1}),e("div",ei,[l(n(ae),{variant:"ghost",size:"sm",class:"text-xs gap-1.5 h-8 w-fit",onClick:c[0]||(c[0]=g=>r("refreshExecutiveBriefing")),disabled:d.isBriefingLoading},{default:$(()=>[l(n(Ot),{class:"h-3.5 w-3.5"}),ne(" "+T(d.isBriefingLoading?"Loading...":"Refresh AI"),1)]),_:1},8,["disabled"]),l(n(ae),{variant:"ghost",size:"icon",class:"h-8 w-8 text-zinc-500 hover:text-indigo-400",onClick:c[1]||(c[1]=g=>r("toggleDeckSwap")),title:"Swap position"},{default:$(()=>[l(n(Vt),{class:"h-4 w-4"})]),_:1})])]),l(n(ht),{class:"text-indigo-600/70 dark:text-indigo-400/70 text-sm"},{default:$(()=>[...c[14]||(c[14]=[ne(" Your project's core value proposition, synthesized for your defense. ",-1)])]),_:1})]),_:1}),l(n(ot),{class:"relative pb-6 md:pb-10 px-6 md:px-10 min-h-[400px]"},{default:$(()=>[d.briefingSlides.length>0?(o(),a("div",ti,[l(On,{slides:d.briefingSlides,"is-loading":d.isBriefingLoading,onRefresh:c[2]||(c[2]=g=>r("refreshExecutiveBriefing"))},null,8,["slides","is-loading"])])):d.executiveBriefing?(o(),a("div",ni,[c[15]||(c[15]=e("div",{class:"absolute -left-6 top-0 bottom-0 w-1 bg-gradient-to-b from-indigo-500/80 via-purple-500/80 to-transparent rounded-full opacity-60"},null,-1)),l(un,{content:d.executiveBriefing,"show-font-controls":!1,"viewer-class":"prose-sm md:prose-base dark:prose-invert leading-relaxed",class:"!bg-transparent"},null,8,["content"])])):(o(),a("div",si,[e("div",oi,[l(n(rt),{class:"h-6 w-6 text-indigo-500/50"})]),c[16]||(c[16]=e("p",{class:"text-base text-muted-foreground italic max-w-xs"},' No executive briefing yet. Click "Refresh AI" to generate a comprehensive summary of your research. ',-1))]))]),_:1})]),_:1}),e("div",li,[l(n(et),{class:"overflow-hidden border-none bg-zinc-900/30 shadow-none ring-1 ring-border/50"},{default:$(()=>[l(n(mt),{class:"pb-2"},{default:$(()=>[e("div",ii,[l(n(xt),{class:"flex items-center gap-2 text-xl md:text-2xl font-display"},{default:$(()=>[l(n(Rt),{class:"h-5 w-5 text-rose-500"}),c[17]||(c[17]=ne(" Predicted Defense Questions ",-1))]),_:1}),e("div",ai,[l(n(_t),{variant:"secondary",class:"font-mono text-[10px]"},{default:$(()=>[ne(T(d.predictedQuestions.length)+" TOP QUESTIONS",1)]),_:1}),l(n(ae),{variant:"ghost",size:"sm",class:"text-xs h-8",onClick:c[3]||(c[3]=g=>r("generatePredictedQuestions")),disabled:d.isGeneratingQuestions},{default:$(()=>[l(n(rt),{class:"h-3.5 w-3.5"}),ne(" "+T(d.isGeneratingQuestions?"Generating...":"Generate"),1)]),_:1},8,["disabled"]),l(n(ae),{variant:"ghost",size:"icon",class:"h-8 w-8 text-zinc-500 hover:text-rose-400",onClick:c[4]||(c[4]=g=>r("toggleDeckSwap")),title:"Swap position"},{default:$(()=>[l(n(Vt),{class:"h-4 w-4"})]),_:1})])]),l(n(ht),{class:"text-rose-600/70 dark:text-rose-400/70 text-sm"},{default:$(()=>[...c[18]||(c[18]=[ne(" Identify and prepare for high-probability questions examiners might ask. ",-1)])]),_:1})]),_:1}),l(n(ot),{class:"relative pb-6 md:pb-10 px-6 md:px-10 min-h-[450px]"},{default:$(()=>[l(Rn,{questions:d.predictedQuestions,"is-loading":d.isGeneratingQuestions},null,8,["questions","is-loading"])]),_:1})]),_:1})])],64)),l(n(et),{class:de(["border-border/50 shadow-sm rounded-3xl overflow-hidden group",d.highlightOpening?"relative z-20 ring-2 ring-primary/50 shadow-[0_0_0_6px_rgba(14,165,233,0.15)]":d.highlightPrep?"opacity-40 transition-opacity":""])},{default:$(()=>[l(n(mt),{class:"pb-2"},{default:$(()=>[l(n(xt),{class:"flex items-center gap-2 text-base"},{default:$(()=>[...c[25]||(c[25]=[ne(" Opening Statement ",-1)])]),_:1}),l(n(ht),null,{default:$(()=>[...c[26]||(c[26]=[ne('Your 60-second "hook" to impress the panel.',-1)])]),_:1})]),_:1}),l(n(ot),{class:"space-y-4"},{default:$(()=>[e("div",mi,[ct(e("textarea",{"onUpdate:modelValue":c[10]||(c[10]=g=>s.value=g),rows:"4",class:"w-full rounded-2xl border-border/50 bg-muted/30 p-4 text-sm focus:ring-primary/20 transition-all",placeholder:"Type your opening statement here..."},null,512),[[Yt,s.value]])]),e("div",xi,[l(n(ae),{variant:"outline",class:"w-full text-xs font-bold gap-2 rounded-xl",onClick:c[11]||(c[11]=g=>r("generateOpeningStatement")),disabled:d.isOpeningGenerating},{default:$(()=>[l(n(rt),{class:"h-3.5 w-3.5"}),ne(" "+T(d.isOpeningGenerating?"Generating...":"GENERATE OPENING"),1)]),_:1},8,["disabled"]),l(n(ae),{variant:"secondary",class:"w-full text-xs font-bold gap-2 rounded-xl",onClick:c[12]||(c[12]=g=>r("analyzeOpeningStatement")),disabled:d.isOpeningAnalyzing},{default:$(()=>[l(n(bs),{class:"h-3.5 w-3.5"}),ne(" "+T(d.isOpeningAnalyzing?"Analyzing...":"ANALYZE PITCH FLOW"),1)]),_:1},8,["disabled"])]),d.openingAnalysis?(o(),a("div",bi,[l(un,{content:d.openingAnalysis,"show-font-controls":!1,class:"!bg-transparent","viewer-class":"prose-xs md:prose-sm"},null,8,["content"])])):V("",!0)]),_:1})]),_:1},8,["class"])])],2))}}),wi={key:0,class:"flex flex-col h-full bg-zinc-950/20 overflow-hidden rounded-2xl border border-white/5"},ki={key:0,class:"flex items-center justify-between px-3 py-2 bg-zinc-900/80 border-b border-white/5 shrink-0 gap-4"},_i={class:"flex items-center gap-3 shrink-0"},Si={class:"p-1.5 bg-indigo-500/10 rounded-lg hidden xs:flex"},$i={class:"flex items-center gap-2"},zi={key:0,class:"h-1 w-1 rounded-full bg-indigo-500 animate-pulse"},Ci={class:"flex items-center gap-2 overflow-x-auto no-scrollbar py-0.5"},Fi={class:"flex items-center gap-1 bg-white/5 pl-2 pr-1 py-0.5 rounded-md border border-white/10"},Ii={class:"flex items-center gap-1 bg-white/5 rounded-md border border-white/10 p-0.5"},Ti={class:"hidden md:flex items-center gap-1 bg-white/5 rounded-md border border-white/10 p-0.5"},Ei={class:"flex items-center gap-1"},Ai={class:"flex items-center gap-2 shrink-0"},Bi={class:"flex items-center"},Di={key:1,class:"px-4 py-2 text-xs text-rose-300 bg-rose-500/10 border-b border-rose-500/20"},ji={class:"flex-1 flex overflow-hidden min-h-0 relative group"},Pi={key:0,ref:"sidebarRef",class:"w-64 bg-zinc-900/60 border-r border-white/5 flex flex-col h-full overflow-hidden transition-all duration-300"},Li={class:"px-4 py-3 border-b border-white/5 flex items-center justify-between"},Mi={class:"flex-1 overflow-y-auto custom-scrollbar p-3 space-y-3"},Oi=["onDragstart","onDragover","onDragleave","onDrop","onClick"],Ri={class:"absolute top-2 left-2 z-10 h-5 w-5 rounded bg-black/60 backdrop-blur-md flex items-center justify-center border border-white/10"},Hi={class:"absolute inset-y-0 left-0 w-12 flex items-center justify-center z-20 pointer-events-none"},Wi={class:"absolute inset-y-0 right-0 w-12 flex items-center justify-center z-20 pointer-events-none"},Ni={class:"space-y-3 shrink-0"},Ui={class:"h-1 w-full bg-white/5 rounded-full overflow-hidden"},Gi={class:"flex flex-col items-center gap-1.5 px-1"},Vi={class:"flex items-center gap-6"},qi=["disabled"],Xi={class:"text-[9px] font-bold text-indigo-500/80 uppercase tracking-[0.2em]"},Yi=["disabled"],Ki={class:"text-sm font-display font-bold text-white tracking-tight text-center"},Qi={class:"space-y-5"},Ji={key:0,class:"p-4 bg-indigo-500/5 border border-indigo-500/10 rounded-2xl space-y-2.5 animate-in fade-in slide-in-from-bottom-2 duration-500"},Zi={class:"flex items-center gap-2 text-indigo-400"},ea={class:"text-xs text-zinc-300 leading-relaxed font-medium italic"},ta={class:"space-y-4"},na={key:0,class:"space-y-4"},sa=["innerHTML"],oa={key:1,class:"space-y-4"},la={key:1,class:"mt-8 pt-6 border-t border-white/5"},ia={class:"text-[11px] text-zinc-400 leading-relaxed italic"},aa={class:"w-full max-w-6xl aspect-video bg-zinc-900 rounded-lg shadow-2xl border border-white/10 relative overflow-hidden flex flex-col group/canvas transition-all duration-500"},ra={class:"relative z-10 p-4 lg:p-8 flex flex-col h-full"},da={class:"mb-2"},ca={class:"flex-1 mt-2 lg:mt-4 overflow-hidden"},ua={key:0,class:"h-full flex items-center justify-center border-2 border-dashed border-white/5 rounded-lg"},pa={key:1,class:"grid grid-cols-2 gap-6 h-full"},fa={class:"space-y-3 overflow-auto"},ga={class:"space-y-3"},va=["data-paragraph-index","onInput","onBlur"],ha={key:0,class:"space-y-2 lg:space-y-3 mt-2"},ma=["data-bullet-index","onInput","onKeydown","onBlur","innerHTML"],xa={class:"flex gap-2"},ba={class:"text-sm lg:text-base font-semibold text-indigo-400"},ya={class:"text-sm lg:text-base text-zinc-300 leading-relaxed"},wa={key:2,class:"space-y-2 lg:space-y-3"},ka=["data-bullet-index","onInput","onKeydown","onBlur","innerHTML"],_a={class:"space-y-3 overflow-auto"},Sa={class:"space-y-3"},$a=["data-paragraph-index","onInput","onBlur"],za={key:0,class:"space-y-2 lg:space-y-3 mt-2"},Ca=["data-bullet-index","onInput","onKeydown","onBlur","innerHTML"],Fa={class:"flex gap-2"},Ia={class:"text-sm lg:text-base font-semibold text-indigo-400"},Ta={class:"text-sm lg:text-base text-zinc-300 leading-relaxed"},Ea={key:2,class:"space-y-2 lg:space-y-3"},Aa=["data-bullet-index","onInput","onKeydown","onBlur","innerHTML"],Ba={key:2,class:"flex gap-6 h-full"},Da=["src"],ja={key:2,class:"text-zinc-500 text-xs uppercase tracking-widest"},Pa={key:3,class:"absolute bottom-2 left-2 right-2 z-20 bg-black/60 border border-white/10 rounded-md p-2 flex items-center gap-2"},La=["value"],Ma=["value"],Oa={key:0,class:"space-y-2 flex-1"},Ra={class:"flex flex-col gap-0.5 opacity-0 group-hover/item:opacity-100 transition-opacity shrink-0"},Ha=["onClick","disabled"],Wa=["onClick","disabled"],Na={class:"flex-1 flex items-start gap-2"},Ua={key:0,class:"text-indigo-500 font-bold mt-0.5"},Ga=["data-mixed-index","onBlur"],Va=["onClick"],qa={class:"flex gap-2 mt-3"},Xa={key:1,class:"space-y-3"},Ya=["data-paragraph-index","onInput","onBlur"],Ka={key:2,class:"space-y-3"},Qa={class:"text-sm lg:text-base font-semibold text-indigo-400"},Ja={class:"text-sm lg:text-base text-zinc-300 leading-relaxed"},Za={key:3,class:"space-y-2 lg:space-y-4"},er=["data-bullet-index","onInput","onKeydown","onBlur","innerHTML"],tr={key:4,class:"flex flex-col h-full"},nr={class:"flex gap-2 mt-3"},sr={key:0,class:"space-y-3 lg:space-y-4"},or=["data-paragraph-index","onInput","onBlur"],lr={key:1,class:"space-y-4"},ir={class:"text-sm lg:text-base font-semibold text-indigo-400"},ar={class:"text-sm lg:text-base text-zinc-300 leading-relaxed"},rr={key:1,class:"space-y-2"},dr={class:"flex flex-col gap-0.5 opacity-0 group-hover/item:opacity-100 transition-opacity shrink-0"},cr=["onClick","disabled"],ur=["onClick","disabled"],pr={class:"flex-1 flex items-start gap-2"},fr={key:0,class:"text-indigo-500 font-bold mt-0.5"},gr=["data-mixed-index","onBlur"],vr=["onClick"],hr={class:"flex gap-2 mt-3"},mr={key:0,class:"space-y-2 lg:space-y-4"},xr=["data-bullet-index","onInput","onKeydown","onBlur","innerHTML"],br={key:1,class:"flex flex-col h-full"},yr={class:"flex gap-2 mt-3"},wr={class:"mt-6 flex items-center justify-center gap-1.5 py-2"},kr=["onClick","title"],_r={class:"absolute bottom-12 left-1/2 -translate-x-1/2 z-[110] flex items-center gap-6 px-6 py-3 bg-zinc-900/80 backdrop-blur-xl rounded-full border border-white/10 shadow-2xl opacity-0 hover:opacity-100 transition-opacity duration-300"},Sr=["disabled"],$r={class:"flex flex-col items-center min-w-[120px]"},zr={class:"text-2xl font-display font-bold text-white"},Cr=["disabled"],Fr={class:"relative z-10 flex flex-col h-full max-w-7xl mx-auto w-full"},Ir={class:"flex-1 min-h-0 flex flex-col items-center justify-center"},Tr={class:"mb-12 lg:mb-16"},Er={class:"text-xs lg:text-sm uppercase tracking-[0.4em] font-bold text-indigo-500/60 mb-6 block drop-shadow-[0_0_10px_rgba(99,102,241,0.3)]"},Ar={key:0,class:"text-4xl lg:text-7xl font-display font-bold text-white tracking-tight leading-tight"},Br={class:"relative w-full"},Dr={key:0,class:"flex flex-col items-center justify-center text-center py-20"},jr={class:"text-6xl lg:text-9xl font-display font-bold text-white tracking-tighter leading-none mb-8"},Pr=["innerHTML"],Lr=["innerHTML"],Mr={key:1,class:"grid grid-cols-2 gap-12 lg:gap-20"},Or={class:"space-y-10"},Rr={class:"text-3xl lg:text-5xl font-bold text-indigo-400 tracking-tight"},Hr={class:"text-2xl lg:text-4xl text-zinc-300 leading-relaxed font-light"},Wr={key:2,class:"space-y-10"},Nr=["innerHTML"],Ur={class:"space-y-10"},Gr={class:"text-3xl lg:text-5xl font-bold text-indigo-400 tracking-tight"},Vr={class:"text-2xl lg:text-4xl text-zinc-300 leading-relaxed font-light"},qr={key:1,class:"space-y-10"},Xr=["innerHTML"],Yr={key:2,class:"flex flex-col lg:flex-row gap-12 lg:gap-20 h-full"},Kr=["src"],Qr={key:1,class:"text-zinc-500 text-sm uppercase tracking-widest"},Jr={key:0,class:"space-y-8"},Zr={key:1,class:"space-y-8"},ed={class:"text-3xl lg:text-5xl font-bold text-indigo-400 tracking-tight"},td={class:"text-2xl lg:text-4xl text-zinc-300 leading-relaxed font-light"},nd={key:2,class:"space-y-10"},sd=["innerHTML"],od={key:3,class:"space-y-12"},ld={key:0,class:"space-y-8"},id={key:1,class:"space-y-12"},ad={class:"text-3xl lg:text-5xl font-bold text-indigo-400 tracking-tight"},rd={class:"text-2xl lg:text-4xl text-zinc-300 leading-relaxed font-light"},dd={key:1,class:"space-y-10"},cd={key:0,class:"space-y-6"},ud={key:1,class:"space-y-8"},pd={class:"text-2xl lg:text-4xl font-bold text-indigo-400"},fd={class:"text-xl lg:text-3xl text-zinc-300 leading-relaxed font-light"},gd={key:2,class:"space-y-8"},vd=["innerHTML"],hd={key:0,class:"space-y-10"},md=["innerHTML"],xd={class:"mt-12 lg:mt-16 pt-8 border-t border-white/5 flex justify-between items-center opacity-40 shrink-0"},bd={class:"flex items-center gap-8"},yd={class:"text-sm lg:text-base font-mono tracking-[0.3em] text-zinc-400 uppercase"},wd={class:"text-lg lg:text-xl font-display font-medium text-white"},kd={key:1,class:"flex flex-col items-center justify-center py-20 text-center space-y-6 h-full bg-zinc-950/20 rounded-2xl border border-dashed border-white/5"},_d={class:"h-20 w-20 rounded-full bg-indigo-500/10 flex items-center justify-center animate-bounce"},Sd=ze({__name:"DeckViewer",props:{project:{},slides:{},activeIndex:{},isSaving:{type:Boolean,default:!1},compact:{type:Boolean,default:!1},canDownload:{type:Boolean,default:!1},showPptx:{type:Boolean,default:!1},pptxUrl:{default:null},pptxBusy:{type:Boolean,default:!1}},emits:["update:activeIndex","update:slides","toggle-expand","download-pptx","export-pptx"],setup(P,{emit:h}){const t=P,r=h,s=A([]),d=A(!1),c=A(null),g=A(null),v=A("title"),w=A(!1),E=A(null),S=A(null),u=A(null),F=A(!1),R=A(null),C=A(null),M=A(null),W=A(null),K=A(null),I=b=>JSON.parse(JSON.stringify(b)),p=A(!1);Ee(()=>t.slides,b=>{if(p.value){p.value=!1;return}s.value=I(b||[])},{deep:!0,immediate:!0});const z=b=>{p.value=!0,s.value=b,r("update:slides",b)},H=b=>{if(!s.value.length)return;const i=I(s.value),f=I([i[b]])[0],x=b+1;i.splice(x,0,f),z(i),r("update:activeIndex",x)},G=b=>{if(!s.value.length)return;const i=I(s.value);if(i.splice(b,1),z(i),!i.length){r("update:activeIndex",0);return}const f=b<=t.activeIndex?Math.max(0,t.activeIndex-1):t.activeIndex;r("update:activeIndex",f)},Q=b=>{E.value=b,w.value=!0},Y=()=>{E.value!==null&&(G(E.value),w.value=!1,E.value=null)},ke=()=>{R.value=null,u.value?.click()},Re=async b=>{if(b)try{await Fe.delete("/editor/images",{data:{url:b}})}catch{}},Ce=async b=>{if(!b.type.startsWith("image/")){R.value="Please select an image file.";return}F.value=!0,R.value=null;try{const i=new FormData;i.append("image",b);const f=await Fe.post("/editor/images",i,{headers:{"Content-Type":"multipart/form-data"}});if(f.data?.success&&f.data.url){const x=C.value;xe(t.activeIndex,"image_url",f.data.url),xe(t.activeIndex,"image_scale",1),xe(t.activeIndex,"image_fit","cover"),xe(t.activeIndex,"image_position_x",50),xe(t.activeIndex,"image_position_y",50),x&&await Re(x)}else R.value="Upload failed."}catch(i){R.value=i?.response?.data?.message||"Upload failed."}finally{F.value=!1,C.value=null,u.value&&(u.value.value="")}},Ae=b=>{const f=b.target.files?.[0];f&&Ce(f)},Le=()=>{C.value=k.value?.image_url||null,ke()},Be=async()=>{const b=k.value?.image_url||null;xe(t.activeIndex,"image_url",""),xe(t.activeIndex,"image_scale",1),xe(t.activeIndex,"image_fit","cover"),xe(t.activeIndex,"image_position_x",50),xe(t.activeIndex,"image_position_y",50),await Re(b)},He=b=>{const i=Number(b.target.value);Number.isNaN(i)||xe(t.activeIndex,"image_scale",i)},fe=b=>{const i=b.target.value;xe(t.activeIndex,"image_fit",i)},ye=(b,i,f)=>Math.min(Math.max(b,i),f),se=b=>{if(!k.value?.image_url)return;const i=b.currentTarget;if(!i)return;const f="touches"in b?b.touches[0]:b;M.value={startX:f.clientX,startY:f.clientY,originX:k.value.image_position_x??50,originY:k.value.image_position_y??50,container:i}},q=b=>{if(!M.value)return;const i="touches"in b?b.touches[0]:b,{startX:f,startY:x,originX:X,originY:Te,container:Ze}=M.value;if(!Ze)return;const Dt=Ze.getBoundingClientRect(),Ut=(i.clientX-f)/Dt.width*100,sn=(i.clientY-x)/Dt.height*100,on=ye(X+Ut,0,100),ln=ye(Te+sn,0,100);xe(t.activeIndex,"image_position_x",Math.round(on)),xe(t.activeIndex,"image_position_y",Math.round(ln))},m=()=>{M.value=null},y=b=>{S.value=b},N=b=>{document.execCommand(b,!1);const i=document.activeElement;if(!i)return;const f=O(i.innerHTML),x=i.dataset?.bulletIndex;if(x!==void 0){const X=Number(x);Number.isNaN(X)||y({type:"bullet",index:X,html:f});return}i.getAttribute("contenteditable")==="true"&&y({type:"title",html:f})},O=b=>{const i=document.createElement("div");i.innerHTML=b;const f=x=>{if(x.nodeType===Node.TEXT_NODE)return Ue(x.textContent||"");if(x.nodeType!==Node.ELEMENT_NODE)return"";const X=x,Te=X.tagName.toLowerCase(),Ze=Array.from(X.childNodes).map(f).join("");return Te==="strong"||Te==="b"?`<strong>${Ze}</strong>`:Te==="em"||Te==="i"?`<em>${Ze}</em>`:Te==="br"?"<br />":Ze};return Array.from(i.childNodes).map(f).join("")},J=(b,i)=>{const f=i.target;if(!f)return;const x=O(f.innerHTML);y({type:"bullet",index:b,html:x})},L=(b,i)=>{const f=i.target;if(!f)return;const x=O(f.innerHTML);We(t.activeIndex,b,x),S.value?.type==="bullet"&&S.value.index===b&&(S.value=null)},te=async(b,i)=>{if((i.metaKey||i.ctrlKey)&&i.key.toLowerCase()==="b"){i.preventDefault(),N("bold");return}if((i.metaKey||i.ctrlKey)&&i.key.toLowerCase()==="i"){i.preventDefault(),N("italic");return}if(i.key==="Enter"){i.preventDefault();const f=i.target;f&&We(t.activeIndex,b,O(f.innerHTML));const x=I(s.value),X=Array.isArray(x[t.activeIndex]?.bullets)?[...x[t.activeIndex].bullets]:[];X.splice(b+1,0,""),x[t.activeIndex]={...x[t.activeIndex],bullets:X},z(x),await st();const Te=`[data-bullet-index="${b+1}"]`;document.querySelector(Te)?.focus();return}if(i.key==="Backspace"){const f=i.target;if(f&&f.innerText.trim()===""){const x=I(s.value),X=Array.isArray(x[t.activeIndex]?.bullets)?[...x[t.activeIndex].bullets]:[];if(X.length>1){i.preventDefault(),X.splice(b,1),x[t.activeIndex]={...x[t.activeIndex],bullets:X},z(x),await st();const Ze=`[data-bullet-index="${Math.max(0,b-1)}"]`;document.querySelector(Ze)?.focus()}}}},ue=b=>{const i=b.target;i&&y({type:"title",html:O(i.innerHTML)})},oe=b=>{const i=b.target;i&&(xe(t.activeIndex,"title",i.innerText.trim()),S.value?.type==="title"&&(S.value=null))},Me={title:{title:"Title Slide",bullets:["Project title","Name • Department • Date"],layout:"title",visuals:"",speaker_notes:""},problem:{title:"Research Problem",bullets:["Context and motivation","Key gap or pain point","Why it matters"],layout:"bullets",visuals:"Problem landscape diagram",speaker_notes:""},objectives:{title:"Objectives",bullets:["Primary objective","Secondary objective","Success criteria"],layout:"bullets",visuals:"Objective hierarchy diagram",speaker_notes:""},methodology:{title:"Methodology",bullets:["Research design","Data collection","Analysis approach"],layout:"image_left",visuals:"Methodology flowchart",speaker_notes:""},results:{title:"Results",bullets:["Key finding #1","Key finding #2","Performance metrics"],layout:"two_column",visuals:"Results summary chart",speaker_notes:""},conclusion:{title:"Conclusion",bullets:["Summary of contributions","Impact and implications","Future work"],layout:"bullets",visuals:"",speaker_notes:""}},Se=()=>{const b=Me[v.value]||Me.title,i=I(s.value),f=t.activeIndex+1;i.splice(f,0,{...b}),z(i),r("update:activeIndex",f)},we=(b,i)=>{if(b===i)return;const f=I(s.value),[x]=f.splice(b,1);f.splice(i,0,x),z(f);let X=t.activeIndex;t.activeIndex===b?X=i:b<i&&t.activeIndex>b&&t.activeIndex<=i?X=t.activeIndex-1:b>i&&t.activeIndex>=i&&t.activeIndex<b&&(X=t.activeIndex+1),r("update:activeIndex",X)},Ie=(b,i)=>{c.value=i,g.value=i,b.dataTransfer&&(b.dataTransfer.effectAllowed="move",b.dataTransfer.setData("text/plain",String(i)))},De=b=>{c.value!==null&&(g.value=b)},tt=b=>{g.value===b&&(g.value=null)},ut=b=>{c.value!==null&&(we(c.value,b),c.value=null,g.value=null)},pt=()=>{c.value=null,g.value=null},xe=(b,i,f)=>{const x=I(s.value);x[b]={...x[b],[i]:f},z(x)},We=(b,i,f)=>{const x=I(s.value),X=Array.isArray(x[b]?.bullets)?[...x[b].bullets]:[];X[i]=f,x[b]={...x[b],bullets:X},z(x)},Ue=b=>b.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;"),$e=b=>b.includes("<")?O(b):Ue(b).replace(/\*\*(.+?)\*\*/g,"<strong>$1</strong>").replace(/\*(.+?)\*/g,"<em>$1</em>"),_e=(b=[])=>{const i=Math.ceil(b.length/2);return[b.slice(0,i),b.slice(i)]},Xe=(b=[])=>{const i=Math.ceil(b.length/2),f=b.slice(0,i).map((X,Te)=>({text:X,index:Te})),x=b.slice(i).map((X,Te)=>({text:X,index:Te+i}));return[f,x]},D=(b=[])=>{const i=Math.ceil(b.length/2),f=b.slice(0,i).map((X,Te)=>({text:X,index:Te})),x=b.slice(i).map((X,Te)=>({text:X,index:Te+i}));return[f,x]},Z=(b,i)=>{const x=i.target.innerText.trim(),X=[...k.value.paragraphs||[]];X[b]=x,xe(t.activeIndex,"paragraphs",X)},re=(b,i)=>{if(!i.target.innerText.trim()){const X=[...k.value.paragraphs||[]];X.splice(b,1),xe(t.activeIndex,"paragraphs",X)}},me=()=>{const b=[...k.value.paragraphs||[]];b.push("New paragraph"),xe(t.activeIndex,"paragraphs",b)},be=b=>{const i=[...k.value.paragraphs||[]],f=Math.ceil(i.length/2);b==="left"?i.splice(f,0,"New paragraph"):i.push("New paragraph"),xe(t.activeIndex,"paragraphs",i)},Ye=async()=>{const b=I(s.value),i=b[t.activeIndex],f=Array.isArray(i?.bullets)?[...i.bullets]:[];f.push("New bullet point");const x=(i?.paragraphs?.length??0)>0,X=i?.content_type==="paragraphs";b[t.activeIndex]={...i,bullets:f,content_type:x||X?"mixed":i?.content_type||"bullets"},z(b),await st();const Te=`[data-bullet-index="${f.length-1}"]`;document.querySelector(Te)?.focus()},Ge=U(()=>{const b=k.value;if(b.mixed_content?.length)return b.mixed_content;const i=[];return(b.paragraphs||[]).forEach(f=>i.push({type:"paragraph",text:f})),(b.bullets||[]).forEach(f=>i.push({type:"bullet",text:f})),i}),Ve=b=>{if(!b)return;const i=I(s.value);i[t.activeIndex]={...i[t.activeIndex],mixed_content:b,content_type:b.length>0?"mixed":"bullets",paragraphs:b.filter(f=>f.type==="paragraph").map(f=>f.text),bullets:b.filter(f=>f.type==="bullet").map(f=>f.text)},z(i)},qe=(b,i)=>{const f=[...Ge.value];if(!f.length)return;const x=i==="up"?b-1:b+1;x<0||x>=f.length||([f[b],f[x]]=[f[x],f[b]],Ve(f))},Je=(b,i)=>{const f=[...Ge.value];f[b]&&(f[b]={...f[b],text:i},Ve(f))},Oe=b=>{const i=[...Ge.value];if(i.splice(b,1),i.length===0){const f=I(s.value);f[t.activeIndex]={...f[t.activeIndex],mixed_content:[],content_type:"bullets",paragraphs:[],bullets:[]},z(f);return}Ve(i)},je=b=>{const i=[...Ge.value];i.push({type:b,text:b==="paragraph"?"New paragraph":"New bullet point"}),Ve(i)},St={mounted(b,i){b.innerText=i.value||""},updated(b,i){document.activeElement!==b&&(b.innerText=i.value||"")}},$t=(b,i)=>{const x=i.target.innerText.trim();Je(b,x)},it=()=>{t.activeIndex<s.value.length-1&&r("update:activeIndex",t.activeIndex+1)},nt=()=>{t.activeIndex>0&&r("update:activeIndex",t.activeIndex-1)},k=U(()=>{const b={title:"",bullets:[],speaker_notes:"",visuals:"",charts:[],tables:[]};return!s.value||s.value.length===0?b:s.value[t.activeIndex]||b}),j=async()=>{if(d.value=!0,await st(),W.value)try{W.value.requestFullscreen?await W.value.requestFullscreen():W.value.webkitRequestFullscreen?await W.value.webkitRequestFullscreen():W.value.msRequestFullscreen&&await W.value.msRequestFullscreen()}catch(b){console.warn("Fullscreen request failed:",b)}},ge=A(1),ve=()=>{if(!K.value)return;const b=K.value,i=b.querySelector(".slide-content");if(!i)return;const x=b.clientHeight*.8,X=i.scrollHeight;X>x?ge.value=x/X:ge.value=1};Ee([d,()=>t.activeIndex],()=>{d.value&&st(ve)});const Pe=()=>{d.value&&ve()},ft=()=>{document.fullscreenElement&&document.exitFullscreen().catch(()=>{}),d.value=!1},It=A(null),{isSwiping:nn,direction:At}=Kt(It);Ee(nn,b=>{!b&&At.value&&!d.value&&(At.value==="left"&&it(),At.value==="right"&&nt())});const{isSwiping:Nt,direction:wt}=Kt(K);Ee(Nt,b=>{!b&&d.value&&wt.value&&(wt.value==="left"&&it(),wt.value==="right"&&nt())}),yt(()=>{const b=()=>{!document.fullscreenElement&&d.value&&(d.value=!1)};document.addEventListener("fullscreenchange",b),window.addEventListener("resize",Pe),fn(()=>{document.removeEventListener("fullscreenchange",b),window.removeEventListener("resize",Pe)})});const Bt=b=>{d.value&&((b.key==="ArrowRight"||b.key===" ")&&it(),b.key==="ArrowLeft"&&nt(),b.key==="Escape"&&ft())};return typeof window<"u"&&(window.addEventListener("keydown",Bt),window.addEventListener("mousemove",q),window.addEventListener("mouseup",m),window.addEventListener("touchmove",q),window.addEventListener("touchend",m)),fn(()=>{typeof window>"u"||(window.removeEventListener("keydown",Bt),window.removeEventListener("mousemove",q),window.removeEventListener("mouseup",m),window.removeEventListener("touchmove",q),window.removeEventListener("touchend",m))}),(b,i)=>(o(),a(ee,null,[s.value.length?(o(),a("div",wi,[b.compact?V("",!0):(o(),a("div",ki,[e("div",_i,[e("div",Si,[l(n(gn),{class:"h-4 w-4 text-indigo-400"})]),e("div",$i,[i[29]||(i[29]=e("h3",{class:"text-[11px] font-bold text-white whitespace-nowrap"},"Slide Editor",-1)),l(n(_t),{variant:"outline",class:"text-[9px] px-1.5 h-4 bg-white/5 border-white/10 text-zinc-400 whitespace-nowrap"},{default:$(()=>[ne(T(t.activeIndex+1)+" / "+T(s.value.length),1)]),_:1}),t.isSaving?(o(),a("div",zi)):V("",!0)])]),e("div",Ci,[e("div",Fi,[ct(e("select",{class:"bg-transparent border-none text-[10px] text-zinc-400 focus:ring-0 outline-none w-20 cursor-pointer h-6","onUpdate:modelValue":i[0]||(i[0]=f=>v.value=f)},[...i[30]||(i[30]=[Xn('<option value="title" data-v-9b401f55>Title</option><option value="problem" data-v-9b401f55>Problem</option><option value="objectives" data-v-9b401f55>Objectives</option><option value="methodology" data-v-9b401f55>Methodology</option><option value="results" data-v-9b401f55>Results</option><option value="conclusion" data-v-9b401f55>Conclusion</option>',6)])],512),[[ys,v.value]]),l(n(ae),{variant:"ghost",size:"icon",class:"h-6 w-6 text-indigo-400 hover:text-white",onClick:Se,title:"Add Slide"},{default:$(()=>[l(n(Qt),{class:"h-3.5 w-3.5"})]),_:1})]),i[35]||(i[35]=e("div",{class:"h-4 w-[1px] bg-white/10 shrink-0"},null,-1)),e("div",Ii,[l(n(ae),{variant:"ghost",size:"icon",class:de(["h-6 w-6 transition-colors",(k.value.layout||"bullets")==="title"?"bg-indigo-500/20 text-indigo-400":"text-zinc-400 hover:text-white"]),onClick:i[1]||(i[1]=f=>xe(t.activeIndex,"layout","title")),title:"Title Layout"},{default:$(()=>[l(n(kn),{class:"h-3.5 w-3.5"})]),_:1},8,["class"]),l(n(ae),{variant:"ghost",size:"icon",class:de(["h-6 w-6 transition-colors",(k.value.layout||"bullets")==="bullets"?"bg-indigo-500/20 text-indigo-400":"text-zinc-400 hover:text-white"]),onClick:i[2]||(i[2]=f=>xe(t.activeIndex,"layout","bullets")),title:"Bullets"},{default:$(()=>[l(n(ws),{class:"h-3.5 w-3.5"})]),_:1},8,["class"]),l(n(ae),{variant:"ghost",size:"icon",class:de(["h-6 w-6 transition-colors",(k.value.layout||"bullets")==="two_column"?"bg-indigo-500/20 text-indigo-400":"text-zinc-400 hover:text-white"]),onClick:i[3]||(i[3]=f=>xe(t.activeIndex,"layout","two_column")),title:"Two Columns"},{default:$(()=>[l(n(ks),{class:"h-3.5 w-3.5"})]),_:1},8,["class"]),l(n(ae),{variant:"ghost",size:"icon",class:de(["h-6 w-6 transition-colors",(k.value.layout||"bullets")==="image_left"?"bg-indigo-500/20 text-indigo-400":"text-zinc-400 hover:text-white"]),onClick:i[4]||(i[4]=f=>xe(t.activeIndex,"layout","image_left")),title:"Image Left"},{default:$(()=>[l(n(_s),{class:"h-3.5 w-3.5"})]),_:1},8,["class"]),l(n(ae),{variant:"ghost",size:"icon",class:de(["h-6 w-6 transition-colors",(k.value.layout||"bullets")==="image_right"?"bg-indigo-500/20 text-indigo-400":"text-zinc-400 hover:text-white"]),onClick:i[5]||(i[5]=f=>xe(t.activeIndex,"layout","image_right")),title:"Image Right"},{default:$(()=>[l(n(Ss),{class:"h-3.5 w-3.5"})]),_:1},8,["class"])]),e("div",Ti,[l(n(ae),{variant:"ghost",size:"icon",class:"h-6 w-6 text-zinc-400 hover:text-white",onClick:i[6]||(i[6]=f=>N("bold")),title:"Bold"},{default:$(()=>[...i[31]||(i[31]=[e("span",{class:"font-bold text-[10px]"},"B",-1)])]),_:1}),l(n(ae),{variant:"ghost",size:"icon",class:"h-6 w-6 text-zinc-400 hover:text-white",onClick:i[7]||(i[7]=f=>N("italic")),title:"Italic"},{default:$(()=>[...i[32]||(i[32]=[e("span",{class:"italic text-[10px]"},"I",-1)])]),_:1}),l(n(ae),{variant:"ghost",size:"icon",class:"h-6 w-6 text-zinc-400 hover:text-white",onClick:i[8]||(i[8]=f=>je("paragraph")),title:"Add Paragraph"},{default:$(()=>[l(n(vn),{class:"h-3.5 w-3.5"})]),_:1}),l(n(ae),{variant:"ghost",size:"icon",class:"h-6 w-6 text-zinc-400 hover:text-white",onClick:i[9]||(i[9]=f=>je("bullet")),title:"Add Bullet"},{default:$(()=>[l(n(Qt),{class:"h-3 w-3"})]),_:1}),l(n(ae),{variant:"ghost",size:"icon",class:"h-6 w-6 text-zinc-400 hover:text-white",title:"Upload Image",disabled:F.value,onClick:ke},{default:$(()=>[l(n(Jt),{class:"h-3.5 w-3.5"})]),_:1},8,["disabled"])]),i[36]||(i[36]=e("div",{class:"h-4 w-[1px] bg-white/10 shrink-0"},null,-1)),e("div",Ei,[l(n(ae),{variant:"ghost",size:"icon",class:"h-7 w-7 text-zinc-500 hover:text-white",onClick:i[10]||(i[10]=f=>H(t.activeIndex)),title:"Duplicate"},{default:$(()=>[l(n(_n),{class:"h-3.5 w-3.5"})]),_:1}),l(n(ae),{variant:"ghost",size:"icon",class:"h-7 w-7 text-zinc-500 hover:text-rose-400",onClick:i[11]||(i[11]=f=>Q(t.activeIndex)),title:"Delete"},{default:$(()=>[l(n(Mt),{class:"h-3.5 w-3.5"})]),_:1})]),i[37]||(i[37]=e("div",{class:"h-4 w-[1px] bg-white/10 shrink-0"},null,-1)),e("div",Ai,[l(n(ae),{variant:"secondary",size:"sm",class:"h-7 text-[10px] px-2.5 gap-1.5 font-bold",onClick:j},{default:$(()=>[l(n(Sn),{class:"h-3 w-3 fill-current"}),i[33]||(i[33]=ne()),i[34]||(i[34]=e("span",{class:"hidden xs:inline"},"PRESENT",-1))]),_:1}),e("div",Bi,[t.showPptx?(o(),he(n(ae),{key:0,variant:"ghost",size:"icon",class:"h-7 w-7 text-zinc-500 hover:text-white",disabled:t.pptxBusy,onClick:i[12]||(i[12]=f=>t.pptxUrl?r("download-pptx"):r("export-pptx")),title:t.pptxUrl?"Download PPTX":"Export PPTX"},{default:$(()=>[l(n(vn),{class:"h-3.5 w-3.5"})]),_:1},8,["disabled","title"])):V("",!0),b.compact?(o(),he(n(ae),{key:1,variant:"ghost",size:"icon",class:"h-7 w-7 text-zinc-500 hover:text-white",onClick:i[13]||(i[13]=f=>r("toggle-expand")),title:"Expand"},{default:$(()=>[l(n(en),{class:"h-3.5 w-3.5"})]),_:1})):V("",!0)])])])])),e("input",{ref_key:"imageUploadInput",ref:u,type:"file",class:"hidden",accept:"image/*",onChange:Ae},null,544),R.value&&!b.compact?(o(),a("div",Di,T(R.value),1)):V("",!0),e("div",ji,[b.compact?V("",!0):(o(),a("div",Pi,[e("div",Li,[i[38]||(i[38]=e("span",{class:"text-[10px] font-bold text-zinc-500 uppercase tracking-widest"},"Navigator",-1)),l(n(_t),{variant:"outline",class:"text-[9px] bg-white/5 border-white/10"},{default:$(()=>[ne(T(s.value.length)+" Slides",1)]),_:1})]),e("div",Mi,[(o(!0),a(ee,null,le(s.value,(f,x)=>(o(),a("div",{key:x,draggable:"true",onDragstart:X=>Ie(X,x),onDragover:dt(X=>De(x),["prevent"]),onDragleave:X=>tt(x),onDrop:X=>ut(x),onDragend:pt,onClick:X=>r("update:activeIndex",x),class:de(["group/thumb relative aspect-video bg-zinc-950 rounded-lg border cursor-pointer transition-all duration-300 overflow-hidden",[t.activeIndex===x?"border-indigo-500 ring-2 ring-indigo-500/20 shadow-[0_0_15px_rgba(99,102,241,0.2)]":"border-white/5 hover:border-white/20",g.value===x?"translate-y-2":""]])},[e("div",Ri,[e("span",{class:de(["text-[10px] font-bold",t.activeIndex===x?"text-indigo-400":"text-zinc-500"])},T(x+1),3)]),i[39]||(i[39]=e("div",{class:"p-3 h-full flex flex-col gap-1.5 opacity-60 group-hover/thumb:opacity-100 transition-opacity"},[e("div",{class:"h-1.5 w-1/2 bg-white/20 rounded"}),e("div",{class:"h-1 w-3/4 bg-white/5 rounded"}),e("div",{class:"h-1 w-2/3 bg-white/5 rounded"})],-1))],42,Oi))),128))])],512)),e("div",Hi,[l(n(ae),{variant:"ghost",size:"icon",class:"h-10 w-10 rounded-full bg-black/40 border border-white/10 text-white backdrop-blur-md opacity-0 group-hover:opacity-100 transition-all pointer-events-auto -translate-x-4 group-hover:translate-x-2",disabled:t.activeIndex===0,onClick:nt},{default:$(()=>[l(n(bt),{class:"h-6 w-6"})]),_:1},8,["disabled"])]),e("div",Wi,[l(n(ae),{variant:"ghost",size:"icon",class:"h-10 w-10 rounded-full bg-black/40 border border-white/10 text-white backdrop-blur-md opacity-0 group-hover:opacity-100 transition-all pointer-events-auto translate-x-4 group-hover:-translate-x-2",disabled:t.activeIndex===s.value.length-1,onClick:it},{default:$(()=>[l(n(Qe),{class:"h-6 w-6"})]),_:1},8,["disabled"])]),e("div",{class:de(["flex-1 flex flex-col min-w-0 overflow-hidden relative",b.compact?"bg-zinc-950/60":"bg-zinc-950/40"])},[b.compact?(o(),a("div",{key:0,class:"flex-1 flex flex-col overflow-y-auto custom-scrollbar p-5 space-y-6",ref_key:"editorPreviewContainer",ref:It},[e("div",Ni,[e("div",Ui,[e("div",{class:"h-full bg-indigo-500 shadow-[0_0_10px_rgba(99,102,241,0.4)] transition-all duration-700 ease-out",style:ce({width:`${(t.activeIndex+1)/s.value.length*100}%`})},null,4)]),e("div",Gi,[e("div",Vi,[e("button",{onClick:nt,disabled:t.activeIndex===0,class:"p-1 text-zinc-500 hover:text-white disabled:opacity-10 transition-colors"},[l(n(bt),{class:"h-5 w-5"})],8,qi),e("div",Xi," Slide "+T(t.activeIndex+1)+" of "+T(s.value.length),1),e("button",{onClick:it,disabled:t.activeIndex===s.value.length-1,class:"p-1 text-zinc-500 hover:text-white disabled:opacity-10 transition-colors"},[l(n(Qe),{class:"h-5 w-5"})],8,Yi)]),e("div",Ki,T(k.value.title),1)])]),i[43]||(i[43]=e("div",{class:"h-[1px] bg-white/5 w-full"},null,-1)),e("div",Qi,[k.value.visuals?(o(),a("div",Ji,[e("div",Zi,[l(n(Jt),{class:"h-3.5 w-3.5"}),i[40]||(i[40]=e("span",{class:"text-[10px] font-bold uppercase tracking-widest"},"Visual Strategy",-1))]),e("p",ea,'"'+T(k.value.visuals)+'"',1)])):V("",!0),e("div",ta,[k.value.bullets&&k.value.bullets.length?(o(),a("div",na,[(o(!0),a(ee,null,le(k.value.bullets,(f,x)=>(o(),a("div",{key:x,class:"flex gap-4 group animate-in fade-in slide-in-from-left-2 duration-500",style:ce({animationDelay:`${x*100}ms`})},[i[41]||(i[41]=e("div",{class:"mt-1.5 h-1.5 w-1.5 rounded-full bg-indigo-500 shrink-0 shadow-[0_0_8px_rgba(99,102,241,0.6)]"},null,-1)),e("p",{class:"text-xs lg:text-sm text-zinc-200 leading-relaxed font-light",innerHTML:$e(f)},null,8,sa)],4))),128))])):k.value.paragraphs&&k.value.paragraphs.length?(o(),a("div",oa,[(o(!0),a(ee,null,le(k.value.paragraphs,(f,x)=>(o(),a("p",{key:x,class:"text-xs text-zinc-300 leading-relaxed border-l-2 border-white/5 pl-4 py-1"},T(f),1))),128))])):V("",!0)]),k.value.speaker_notes?(o(),a("div",la,[i[42]||(i[42]=e("div",{class:"text-[10px] font-bold text-zinc-500 uppercase tracking-widest mb-3"}," Speaker Notes",-1)),e("p",ia,T(k.value.speaker_notes),1)])):V("",!0)])],512)):(o(),a("div",{key:1,class:"flex-1 flex flex-col items-center justify-center overflow-auto custom-scrollbar relative bg-black/20 p-6",ref_key:"editorPreviewContainer",ref:It},[e("div",aa,[i[60]||(i[60]=e("div",{class:"absolute inset-0 bg-gradient-to-br from-indigo-500/5 via-transparent to-purple-500/5 pointer-events-none"},null,-1)),e("div",ra,[e("div",da,[i[44]||(i[44]=e("span",{class:"text-[8px] lg:text-[10px] uppercase tracking-[0.2em] font-bold text-indigo-500/60 mb-1 block"},"Premium Deck",-1)),e("h1",{class:"text-sm lg:text-2xl font-display font-bold text-white tracking-tight leading-tight line-clamp-2 focus:outline-none inline-edit",contenteditable:"true","data-placeholder":"Slide Title",onInput:ue,onBlur:oe,onKeydown:i[14]||(i[14]=$s(dt(()=>{},["prevent"]),["enter"]))},T(k.value.title),33)]),e("div",ca,[(k.value.layout||"bullets")==="title"?(o(),a("div",ua,[...i[45]||(i[45]=[e("p",{class:"text-zinc-600 text-xs italic"},"Title-only layout.",-1)])])):(k.value.layout||"bullets")==="two_column"?(o(),a("div",pa,[e("div",fa,[k.value.paragraphs&&k.value.paragraphs.length?(o(),a(ee,{key:0},[e("div",ga,[(o(!0),a(ee,null,le(D(k.value.paragraphs||[])[0],f=>(o(),a("p",{key:"p-"+f.index,class:"text-sm lg:text-base text-zinc-300 leading-relaxed focus:outline-none inline-edit cursor-text",contenteditable:"true","data-paragraph-index":f.index,"data-placeholder":"Paragraph",onInput:x=>Z(f.index,x),onBlur:x=>re(f.index,x)},T(f.text),41,va))),128)),k.value.bullets&&k.value.bullets.length?(o(),a("ul",ha,[(o(!0),a(ee,null,le(Xe(k.value.bullets||[])[0],f=>(o(),a("li",{key:"bl-"+f.index,class:"flex gap-3 text-zinc-300"},[i[46]||(i[46]=e("span",{class:"text-indigo-500 font-bold"},"•",-1)),e("span",{class:"text-sm lg:text-base leading-relaxed focus:outline-none inline-edit",contenteditable:"true","data-bullet-index":f.index,"data-placeholder":"Bullet",onInput:x=>J(f.index,x),onKeydown:x=>te(f.index,x),onBlur:x=>L(f.index,x),innerHTML:$e(f.text)},null,40,ma)]))),128))])):V("",!0)]),e("div",xa,[e("button",{onClick:i[15]||(i[15]=f=>be("left")),class:"flex-1 py-2 border border-dashed border-white/10 rounded text-zinc-600 text-xs hover:border-indigo-500/50 hover:text-indigo-400 transition-colors"}," + Paragraph "),e("button",{onClick:Ye,class:"flex-1 py-2 border border-dashed border-white/10 rounded text-zinc-600 text-xs hover:border-indigo-500/50 hover:text-indigo-400 transition-colors"}," + Bullet ")])],64)):k.value.headings&&k.value.headings.length?(o(!0),a(ee,{key:1},le(k.value.headings.slice(0,Math.ceil(k.value.headings.length/2)),(f,x)=>(o(),a("div",{key:"h-"+x,class:"space-y-1"},[e("h3",ba,T(f.heading),1),e("p",ya,T(f.content),1)]))),128)):k.value.bullets&&k.value.bullets.length?(o(),a("ul",wa,[(o(!0),a(ee,null,le(Xe(k.value.bullets||[])[0],f=>(o(),a("li",{key:f.index,class:"flex gap-3 text-zinc-300"},[i[47]||(i[47]=e("span",{class:"text-indigo-500 font-bold"},"•",-1)),e("span",{class:"text-sm lg:text-base leading-relaxed focus:outline-none inline-edit",contenteditable:"true","data-bullet-index":f.index,"data-placeholder":"Bullet",onInput:x=>J(f.index,x),onKeydown:x=>te(f.index,x),onBlur:x=>L(f.index,x),innerHTML:$e(f.text)},null,40,ka)]))),128))])):(o(),a("button",{key:3,onClick:i[16]||(i[16]=f=>be("left")),class:"h-full w-full flex items-center justify-center border-2 border-dashed border-white/5 rounded-lg hover:border-indigo-500/30 transition-colors cursor-pointer"},[...i[48]||(i[48]=[e("p",{class:"text-zinc-600 text-xs italic hover:text-indigo-400"},"+ Add content",-1)])]))]),e("div",_a,[k.value.paragraphs&&k.value.paragraphs.length>1?(o(),a(ee,{key:0},[e("div",Sa,[(o(!0),a(ee,null,le(D(k.value.paragraphs||[])[1],f=>(o(),a("p",{key:"pr-"+f.index,class:"text-sm lg:text-base text-zinc-300 leading-relaxed focus:outline-none inline-edit cursor-text",contenteditable:"true","data-paragraph-index":f.index,"data-placeholder":"Paragraph",onInput:x=>Z(f.index,x),onBlur:x=>re(f.index,x)},T(f.text),41,$a))),128)),k.value.bullets&&k.value.bullets.length>1?(o(),a("ul",za,[(o(!0),a(ee,null,le(Xe(k.value.bullets||[])[1],f=>(o(),a("li",{key:"br-"+f.index,class:"flex gap-3 text-zinc-300"},[i[49]||(i[49]=e("span",{class:"text-indigo-500 font-bold"},"•",-1)),e("span",{class:"text-sm lg:text-base leading-relaxed focus:outline-none inline-edit",contenteditable:"true","data-bullet-index":f.index,"data-placeholder":"Bullet",onInput:x=>J(f.index,x),onKeydown:x=>te(f.index,x),onBlur:x=>L(f.index,x),innerHTML:$e(f.text)},null,40,Ca)]))),128))])):V("",!0)]),e("div",Fa,[e("button",{onClick:i[17]||(i[17]=f=>be("right")),class:"flex-1 py-2 border border-dashed border-white/10 rounded text-zinc-600 text-xs hover:border-indigo-500/50 hover:text-indigo-400 transition-colors"}," + Paragraph "),e("button",{onClick:Ye,class:"flex-1 py-2 border border-dashed border-white/10 rounded text-zinc-600 text-xs hover:border-indigo-500/50 hover:text-indigo-400 transition-colors"}," + Bullet ")])],64)):k.value.headings&&k.value.headings.length>1?(o(!0),a(ee,{key:1},le(k.value.headings.slice(Math.ceil(k.value.headings.length/2)),(f,x)=>(o(),a("div",{key:"hr-"+x,class:"space-y-1"},[e("h3",Ia,T(f.heading),1),e("p",Ta,T(f.content),1)]))),128)):k.value.bullets&&k.value.bullets.length>1?(o(),a("ul",Ea,[(o(!0),a(ee,null,le(Xe(k.value.bullets||[])[1],f=>(o(),a("li",{key:f.index,class:"flex gap-3 text-zinc-300"},[i[50]||(i[50]=e("span",{class:"text-indigo-500 font-bold"},"•",-1)),e("span",{class:"text-sm lg:text-base leading-relaxed focus:outline-none inline-edit",contenteditable:"true","data-bullet-index":f.index,"data-placeholder":"Bullet",onInput:x=>J(f.index,x),onKeydown:x=>te(f.index,x),onBlur:x=>L(f.index,x),innerHTML:$e(f.text)},null,40,Aa)]))),128))])):(o(),a("button",{key:3,onClick:i[18]||(i[18]=f=>be("right")),class:"h-full w-full flex items-center justify-center border-2 border-dashed border-white/5 rounded-lg hover:border-indigo-500/30 transition-colors cursor-pointer"},[...i[51]||(i[51]=[e("p",{class:"text-zinc-600 text-xs italic hover:text-indigo-400"},"+ Add content",-1)])]))])])):(k.value.layout||"bullets")==="image_left"||(k.value.layout||"bullets")==="image_right"?(o(),a("div",Ba,[e("div",{class:de(["w-1/2 rounded-lg border border-white/10 bg-white/5 flex items-center justify-center relative overflow-hidden",(k.value.layout||"bullets")==="image_left"?"order-1":"order-2"]),onMousedown:dt(se,["prevent"]),onTouchstart:dt(se,["prevent"])},[k.value.image_url?V("",!0):(o(),a("button",{key:0,type:"button",class:"absolute inset-0 z-10",onClick:ke})),k.value.image_url?(o(),a("img",{key:1,src:k.value.image_url,alt:"Slide visual",class:"h-full w-full cursor-grab",style:ce({objectFit:k.value.image_fit||"cover",objectPosition:`${k.value.image_position_x??50}% ${k.value.image_position_y??50}%`,transform:`scale(${k.value.image_scale||1})`})},null,12,Da)):(o(),a("span",ja,"Click to insert image")),k.value.image_url?(o(),a("div",Pa,[l(n(ae),{variant:"ghost",size:"sm",class:"h-6 text-[10px] gap-1 text-zinc-200 hover:bg-white/10",onClick:dt(Le,["stop"])},{default:$(()=>[...i[52]||(i[52]=[ne(" Replace ",-1)])]),_:1}),l(n(ae),{variant:"ghost",size:"sm",class:"h-6 text-[10px] gap-1 text-rose-200 hover:bg-white/10",onClick:dt(Be,["stop"])},{default:$(()=>[...i[53]||(i[53]=[ne(" Remove ",-1)])]),_:1}),e("select",{class:"ml-auto h-6 bg-zinc-950/60 border border-white/10 rounded-md px-1 text-[10px] text-zinc-200 focus:ring-1 focus:ring-indigo-500 outline-none",value:k.value.image_fit||"cover",onChange:fe},[...i[54]||(i[54]=[e("option",{value:"cover"},"Cover",-1),e("option",{value:"contain"},"Contain",-1)])],40,La),e("input",{type:"range",min:"0.5",max:"2",step:"0.05",class:"w-20",value:k.value.image_scale||1,onInput:He},null,40,Ma)])):V("",!0)],34),e("div",{class:de(["flex-1 overflow-auto flex flex-col",(k.value.layout||"bullets")==="image_left"?"order-2":"order-1"])},[k.value.paragraphs?.length&&k.value.bullets?.length||k.value.mixed_content?.length?(o(),a("div",Oa,[(o(!0),a(ee,null,le(Ge.value,(f,x)=>(o(),a("div",{key:"mixed-"+x,class:"group/item flex items-start gap-2 relative"},[e("div",Ra,[e("button",{onClick:X=>qe(x,"up"),disabled:x===0,class:"p-0.5 text-zinc-500 hover:text-indigo-400 disabled:opacity-20 disabled:cursor-not-allowed"},[l(n(Bn),{class:"h-3 w-3"})],8,Ha),e("button",{onClick:X=>qe(x,"down"),disabled:x===Ge.value.length-1,class:"p-0.5 text-zinc-500 hover:text-indigo-400 disabled:opacity-20 disabled:cursor-not-allowed"},[l(n(Et),{class:"h-3 w-3"})],8,Wa)]),e("div",Na,[f.type==="bullet"?(o(),a("span",Ua,"•")):V("",!0),ct(e("span",{class:"flex-1 text-sm lg:text-base leading-relaxed focus:outline-none inline-edit cursor-text text-zinc-300",contenteditable:"true","data-mixed-index":x,onBlur:X=>$t(x,X)},null,40,Ga),[[St,f.text]])]),e("button",{onClick:X=>Oe(x),class:"p-1 text-zinc-600 hover:text-rose-400 opacity-0 group-hover/item:opacity-100 transition-opacity shrink-0"},[l(n(Mt),{class:"h-3 w-3"})],8,Va)]))),128)),e("div",qa,[e("button",{onClick:i[19]||(i[19]=f=>je("paragraph")),class:"flex-1 py-2 border border-dashed border-white/10 rounded text-zinc-600 text-xs hover:border-indigo-500/50 hover:text-indigo-400 transition-colors"}," + Paragraph "),e("button",{onClick:i[20]||(i[20]=f=>je("bullet")),class:"flex-1 py-2 border border-dashed border-white/10 rounded text-zinc-600 text-xs hover:border-indigo-500/50 hover:text-indigo-400 transition-colors"}," + Bullet ")])])):k.value.paragraphs&&k.value.paragraphs.length?(o(),a("div",Xa,[(o(!0),a(ee,null,le(k.value.paragraphs,(f,x)=>(o(),a("p",{key:"p-"+x,class:"text-sm lg:text-base text-zinc-300 leading-relaxed focus:outline-none inline-edit cursor-text",contenteditable:"true","data-paragraph-index":x,"data-placeholder":"Paragraph",onInput:X=>Z(x,X),onBlur:X=>re(x,X)},T(f),41,Ya))),128)),e("div",{class:"flex gap-2"},[e("button",{onClick:me,class:"flex-1 py-2 border border-dashed border-white/10 rounded text-zinc-600 text-xs hover:border-indigo-500/50 hover:text-indigo-400 transition-colors"}," + Paragraph "),e("button",{onClick:Ye,class:"flex-1 py-2 border border-dashed border-white/10 rounded text-zinc-600 text-xs hover:border-indigo-500/50 hover:text-indigo-400 transition-colors"}," + Bullet ")])])):k.value.headings&&k.value.headings.length?(o(),a("div",Ka,[(o(!0),a(ee,null,le(k.value.headings,(f,x)=>(o(),a("div",{key:"h-"+x,class:"space-y-1"},[e("h3",Qa,T(f.heading),1),e("p",Ja,T(f.content),1)]))),128)),e("button",{onClick:Ye,class:"w-full py-2 border border-dashed border-white/10 rounded text-zinc-600 text-xs hover:border-indigo-500/50 hover:text-indigo-400 transition-colors"}," + Add bullet ")])):k.value.bullets&&k.value.bullets.length?(o(),a("ul",Za,[(o(!0),a(ee,null,le(k.value.bullets,(f,x)=>(o(),a("li",{key:x,class:"flex gap-3 text-zinc-300"},[i[55]||(i[55]=e("span",{class:"text-indigo-500 font-bold"},"•",-1)),e("span",{class:"text-sm lg:text-base leading-relaxed focus:outline-none inline-edit",contenteditable:"true","data-bullet-index":x,"data-placeholder":"Bullet",onInput:X=>J(x,X),onKeydown:X=>te(x,X),onBlur:X=>L(x,X),innerHTML:$e(f)},null,40,er)]))),128))])):(o(),a("div",tr,[i[56]||(i[56]=e("div",{class:"flex-1 flex items-center justify-center border-2 border-dashed border-white/5 rounded-lg"},[e("p",{class:"text-zinc-600 text-xs italic"},"No content yet")],-1)),e("div",nr,[e("button",{onClick:i[21]||(i[21]=f=>je("paragraph")),class:"flex-1 py-2 border border-dashed border-white/10 rounded text-zinc-600 text-xs hover:border-indigo-500/50 hover:text-indigo-400 transition-colors"}," + Paragraph "),e("button",{onClick:i[22]||(i[22]=f=>je("bullet")),class:"flex-1 py-2 border border-dashed border-white/10 rounded text-zinc-600 text-xs hover:border-indigo-500/50 hover:text-indigo-400 transition-colors"}," + Bullet ")])]))],2)])):(o(),a(ee,{key:3},[k.value.content_type==="paragraphs"?(o(),a(ee,{key:0},[k.value.paragraphs&&k.value.paragraphs.length?(o(),a("div",sr,[(o(!0),a(ee,null,le(k.value.paragraphs,(f,x)=>(o(),a("p",{key:x,class:"text-sm lg:text-base text-zinc-300 leading-relaxed focus:outline-none inline-edit cursor-text",contenteditable:"true","data-paragraph-index":x,"data-placeholder":"Paragraph",onInput:X=>Z(x,X),onBlur:X=>re(x,X)},T(f),41,or))),128)),e("div",{class:"flex gap-2"},[e("button",{onClick:me,class:"flex-1 py-2 border border-dashed border-white/10 rounded text-zinc-600 text-xs hover:border-indigo-500/50 hover:text-indigo-400 transition-colors"}," + Add paragraph "),e("button",{onClick:Ye,class:"flex-1 py-2 border border-dashed border-white/10 rounded text-zinc-600 text-xs hover:border-indigo-500/50 hover:text-indigo-400 transition-colors"}," + Add bullet ")])])):k.value.headings&&k.value.headings.length?(o(),a("div",lr,[(o(!0),a(ee,null,le(k.value.headings,(f,x)=>(o(),a("div",{key:x,class:"space-y-1.5"},[e("h3",ir,T(f.heading),1),e("p",ar,T(f.content),1)]))),128)),e("button",{onClick:Ye,class:"w-full py-2 border border-dashed border-white/10 rounded text-zinc-600 text-xs hover:border-indigo-500/50 hover:text-indigo-400 transition-colors"}," + Add bullet ")])):(o(),a("button",{key:2,onClick:me,class:"h-full w-full flex items-center justify-center border-2 border-dashed border-white/5 rounded-lg hover:border-indigo-500/30 transition-colors cursor-pointer"},[...i[57]||(i[57]=[e("p",{class:"text-zinc-600 text-xs italic hover:text-indigo-400"},"+ Add paragraph",-1)])]))],64)):k.value.content_type==="mixed"?(o(),a("div",rr,[(o(!0),a(ee,null,le(Ge.value,(f,x)=>(o(),a("div",{key:"mixed-"+x,class:"group/item flex items-start gap-2 relative"},[e("div",dr,[e("button",{onClick:X=>qe(x,"up"),disabled:x===0,class:"p-0.5 text-zinc-500 hover:text-indigo-400 disabled:opacity-20 disabled:cursor-not-allowed"},[l(n(Bn),{class:"h-3 w-3"})],8,cr),e("button",{onClick:X=>qe(x,"down"),disabled:x===Ge.value.length-1,class:"p-0.5 text-zinc-500 hover:text-indigo-400 disabled:opacity-20 disabled:cursor-not-allowed"},[l(n(Et),{class:"h-3 w-3"})],8,ur)]),e("div",pr,[f.type==="bullet"?(o(),a("span",fr,"•")):V("",!0),ct(e("span",{class:"flex-1 text-sm lg:text-base leading-relaxed focus:outline-none inline-edit cursor-text text-zinc-300",contenteditable:"true","data-mixed-index":x,onBlur:X=>$t(x,X)},null,40,gr),[[St,f.text]])]),e("button",{onClick:X=>Oe(x),class:"p-1 text-zinc-600 hover:text-rose-400 opacity-0 group-hover/item:opacity-100 transition-opacity shrink-0"},[l(n(Mt),{class:"h-3 w-3"})],8,vr)]))),128)),e("div",hr,[e("button",{onClick:i[23]||(i[23]=f=>je("paragraph")),class:"flex-1 py-2 border border-dashed border-white/10 rounded text-zinc-600 text-xs hover:border-indigo-500/50 hover:text-indigo-400 transition-colors"}," + Paragraph "),e("button",{onClick:i[24]||(i[24]=f=>je("bullet")),class:"flex-1 py-2 border border-dashed border-white/10 rounded text-zinc-600 text-xs hover:border-indigo-500/50 hover:text-indigo-400 transition-colors"}," + Bullet ")])])):(o(),a(ee,{key:2},[k.value.bullets&&k.value.bullets.length?(o(),a("ul",mr,[(o(!0),a(ee,null,le(k.value.bullets,(f,x)=>(o(),a("li",{key:x,class:"flex gap-3 text-zinc-300"},[i[58]||(i[58]=e("span",{class:"text-indigo-500 font-bold"},"•",-1)),e("span",{class:"text-sm lg:text-base leading-relaxed focus:outline-none inline-edit",contenteditable:"true","data-bullet-index":x,"data-placeholder":"Bullet",onInput:X=>J(x,X),onKeydown:X=>te(x,X),onBlur:X=>L(x,X),innerHTML:$e(f)},null,40,xr)]))),128))])):(o(),a("div",br,[i[59]||(i[59]=e("div",{class:"flex-1 flex items-center justify-center border-2 border-dashed border-white/5 rounded-lg"},[e("p",{class:"text-zinc-600 text-xs italic"},"No content yet")],-1)),e("div",yr,[e("button",{onClick:i[25]||(i[25]=f=>je("paragraph")),class:"flex-1 py-2 border border-dashed border-white/10 rounded text-zinc-600 text-xs hover:border-indigo-500/50 hover:text-indigo-400 transition-colors"}," + Paragraph "),e("button",{onClick:i[26]||(i[26]=f=>je("bullet")),class:"flex-1 py-2 border border-dashed border-white/10 rounded text-zinc-600 text-xs hover:border-indigo-500/50 hover:text-indigo-400 transition-colors"}," + Bullet ")])]))],64))],64))])])]),e("div",wr,[(o(!0),a(ee,null,le(s.value,(f,x)=>(o(),a("button",{key:x,onClick:X=>r("update:activeIndex",x),class:de(["w-1.5 h-1.5 rounded-full transition-all focus:outline-none",t.activeIndex===x?"bg-indigo-500 w-4":"bg-white/10 hover:bg-white/20"]),title:`Go to slide ${x+1}`},null,10,kr))),128))])],512))],2)]),d.value?(o(),a("div",{key:2,ref_key:"presentationContainer",ref:W,class:"fixed inset-0 z-[100] bg-zinc-950 flex flex-col animate-in fade-in duration-300"},[e("button",{onClick:ft,class:"absolute top-6 right-6 z-[110] p-2 bg-white/5 hover:bg-white/10 rounded-full text-zinc-400 hover:text-white transition-all"},[l(n(tn),{class:"h-6 w-6"})]),e("div",_r,[e("button",{onClick:nt,disabled:t.activeIndex===0,class:"p-2 text-zinc-400 hover:text-white disabled:opacity-30 transition-all"},[l(n(bt),{class:"h-8 w-8"})],8,Sr),e("div",$r,[i[61]||(i[61]=e("span",{class:"text-[10px] font-bold text-indigo-500 uppercase tracking-widest"},"Slide",-1)),e("span",zr,T(t.activeIndex+1)+" / "+T(s.value.length),1)]),e("button",{onClick:it,disabled:t.activeIndex===s.value.length-1,class:"p-2 text-zinc-400 hover:text-white disabled:opacity-30 transition-all"},[l(n(Qe),{class:"h-8 w-8"})],8,Cr)]),i[71]||(i[71]=e("div",{class:"absolute bottom-10 right-10 z-[110] hidden md:block"},[e("div",{class:"flex items-center gap-3 px-4 py-2 bg-indigo-500/10 border border-indigo-500/20 rounded-full backdrop-blur-md"},[e("div",{class:"h-2 w-2 rounded-full bg-indigo-500 animate-pulse"}),e("span",{class:"text-[10px] font-mono font-bold text-indigo-400 uppercase tracking-[0.2em]"},"Live Presentation")])],-1)),e("div",{class:"flex-1 flex items-center justify-center p-0",ref_key:"presentationSlideRef",ref:K},[(o(),a("div",{key:t.activeIndex,class:"w-full h-full bg-zinc-950 relative overflow-hidden flex flex-col p-12 lg:p-24 lg:px-32 slide-in-premium"},[i[69]||(i[69]=e("div",{class:"absolute inset-0 bg-[radial-gradient(circle_at_50%_50%,rgba(99,102,241,0.08),transparent_70%)] pointer-events-none"},null,-1)),i[70]||(i[70]=e("div",{class:"absolute inset-0 bg-gradient-to-br from-indigo-500/5 via-transparent to-purple-500/5 pointer-events-none"},null,-1)),e("div",Fr,[e("div",Ir,[e("div",{class:"slide-content w-full transition-transform duration-500 origin-center",style:ce({transform:`scale(${ge.value})`})},[e("div",Tr,[e("span",Er,T(b.project?.title||"DEFENSE PREPARATION"),1),(k.value.layout||"bullets")!=="title"?(o(),a("h1",Ar,T(k.value.title),1)):V("",!0)]),e("div",Br,[(k.value.layout||"bullets")==="title"?(o(),a("div",Dr,[i[62]||(i[62]=e("div",{class:"h-1 w-24 bg-indigo-500 mb-12 shadow-[0_0_20px_rgba(99,102,241,0.6)]"},null,-1)),e("h1",jr,T(k.value.title),1),k.value.bullets&&k.value.bullets[0]?(o(),a("p",{key:0,class:"text-2xl lg:text-4xl text-zinc-400 font-light tracking-widest uppercase",innerHTML:$e(k.value.bullets[0])},null,8,Pr)):V("",!0),k.value.bullets&&k.value.bullets[1]?(o(),a("div",{key:1,class:"mt-12 text-sm lg:text-lg text-indigo-400/60 font-mono tracking-[0.4em] uppercase",innerHTML:$e(k.value.bullets[1])},null,8,Lr)):V("",!0)])):(k.value.layout||"bullets")==="two_column"?(o(),a("div",Mr,[e("div",Or,[k.value.paragraphs&&k.value.paragraphs.length?(o(!0),a(ee,{key:0},le(k.value.paragraphs,(f,x)=>(o(),a("p",{key:"p-"+x,class:"text-2xl lg:text-4xl text-zinc-100 font-medium leading-relaxed"},T(f),1))),128)):k.value.headings&&k.value.headings.length?(o(!0),a(ee,{key:1},le(k.value.headings.slice(0,Math.ceil(k.value.headings.length/2)),(f,x)=>(o(),a("div",{key:"h-"+x,class:"space-y-4"},[e("h3",Rr,T(f.heading),1),e("p",Hr,T(f.content),1)]))),128)):k.value.bullets&&k.value.bullets.length?(o(),a("ul",Wr,[(o(!0),a(ee,null,le(_e(k.value.bullets||[])[0],(f,x)=>(o(),a("li",{key:x,class:"flex gap-10 items-start group"},[i[63]||(i[63]=e("div",{class:"mt-5 h-3.5 w-3.5 rounded-full bg-indigo-500 shadow-[0_0_20px_rgba(99,102,241,0.6)] group-hover:scale-125 transition-transform duration-300 shrink-0"},null,-1)),e("p",{class:"text-3xl lg:text-5xl text-zinc-100 font-medium leading-[1.15] tracking-tight",innerHTML:$e(f)},null,8,Nr)]))),128))])):V("",!0)]),e("div",Ur,[k.value.headings&&k.value.headings.length>1?(o(!0),a(ee,{key:0},le(k.value.headings.slice(Math.ceil(k.value.headings.length/2)),(f,x)=>(o(),a("div",{key:"hr-"+x,class:"space-y-4"},[e("h3",Gr,T(f.heading),1),e("p",Vr,T(f.content),1)]))),128)):k.value.bullets&&k.value.bullets.length>1?(o(),a("ul",qr,[(o(!0),a(ee,null,le(_e(k.value.bullets||[])[1],(f,x)=>(o(),a("li",{key:x,class:"flex gap-10 items-start group"},[i[64]||(i[64]=e("div",{class:"mt-5 h-3.5 w-3.5 rounded-full bg-indigo-500 shadow-[0_0_20px_rgba(99,102,241,0.6)] group-hover:scale-125 transition-transform duration-300 shrink-0"},null,-1)),e("p",{class:"text-3xl lg:text-5xl text-zinc-100 font-medium leading-[1.15] tracking-tight",innerHTML:$e(f)},null,8,Xr)]))),128))])):V("",!0)])])):(k.value.layout||"bullets")==="image_left"||(k.value.layout||"bullets")==="image_right"?(o(),a("div",Yr,[e("div",{class:de(["w-full lg:w-1/2 min-h-[400px] lg:min-h-0 rounded-3xl border border-white/10 bg-white/5 flex items-center justify-center relative overflow-hidden shadow-2xl",(k.value.layout||"bullets")==="image_left"?"lg:order-1":"lg:order-2"])},[k.value.image_url?(o(),a("img",{key:0,src:k.value.image_url,alt:"Slide visual",class:"h-full w-full object-contain",style:ce({objectPosition:`${k.value.image_position_x??50}% ${k.value.image_position_y??50}%`,transform:`scale(${k.value.image_scale||1})`})},null,12,Kr)):(o(),a("span",Qr,"No Visual Content"))],2),e("div",{class:de(["flex-1",(k.value.layout||"bullets")==="image_left"?"lg:order-2":"lg:order-1"])},[k.value.paragraphs&&k.value.paragraphs.length?(o(),a("div",Jr,[(o(!0),a(ee,null,le(k.value.paragraphs,(f,x)=>(o(),a("p",{key:"p-"+x,class:"text-2xl lg:text-4xl text-zinc-100 font-medium leading-relaxed"},T(f),1))),128))])):k.value.headings&&k.value.headings.length?(o(),a("div",Zr,[(o(!0),a(ee,null,le(k.value.headings,(f,x)=>(o(),a("div",{key:"h-"+x,class:"space-y-4"},[e("h3",ed,T(f.heading),1),e("p",td,T(f.content),1)]))),128))])):k.value.bullets&&k.value.bullets.length?(o(),a("ul",nd,[(o(!0),a(ee,null,le(k.value.bullets,(f,x)=>(o(),a("li",{key:x,class:"flex gap-10 items-start"},[i[65]||(i[65]=e("div",{class:"mt-5 h-3.5 w-3.5 rounded-full bg-indigo-500 shadow-[0_0_20px_rgba(99,102,241,0.6)] shrink-0"},null,-1)),e("p",{class:"text-3xl lg:text-5xl text-zinc-100 font-medium leading-[1.15] tracking-tight",innerHTML:$e(f)},null,8,sd)]))),128))])):V("",!0)],2)])):(o(),a("div",od,[k.value.content_type==="paragraphs"?(o(),a(ee,{key:0},[k.value.paragraphs&&k.value.paragraphs.length?(o(),a("div",ld,[(o(!0),a(ee,null,le(k.value.paragraphs,(f,x)=>(o(),a("p",{key:x,class:"text-3xl lg:text-5xl text-zinc-100 font-medium leading-[1.15] tracking-tight"},T(f),1))),128))])):k.value.headings&&k.value.headings.length?(o(),a("div",id,[(o(!0),a(ee,null,le(k.value.headings,(f,x)=>(o(),a("div",{key:x,class:"space-y-4"},[e("h3",ad,T(f.heading),1),e("p",rd,T(f.content),1)]))),128))])):V("",!0)],64)):k.value.content_type==="mixed"?(o(),a("div",dd,[k.value.paragraphs&&k.value.paragraphs.length?(o(),a("div",cd,[(o(!0),a(ee,null,le(k.value.paragraphs,(f,x)=>(o(),a("p",{key:"p-"+x,class:"text-2xl lg:text-4xl text-zinc-100 leading-relaxed"},T(f),1))),128))])):V("",!0),k.value.headings&&k.value.headings.length?(o(),a("div",ud,[(o(!0),a(ee,null,le(k.value.headings,(f,x)=>(o(),a("div",{key:"h-"+x,class:"space-y-3"},[e("h3",pd,T(f.heading),1),e("p",fd,T(f.content),1)]))),128))])):V("",!0),k.value.bullets&&k.value.bullets.length?(o(),a("ul",gd,[(o(!0),a(ee,null,le(k.value.bullets,(f,x)=>(o(),a("li",{key:"b-"+x,class:"flex gap-10 items-start"},[i[66]||(i[66]=e("div",{class:"mt-4 h-3 w-3 rounded-full bg-indigo-500 shadow-[0_0_20px_rgba(99,102,241,0.6)] shrink-0"},null,-1)),e("p",{class:"text-3xl lg:text-5xl text-zinc-100 font-medium leading-[1.15] tracking-tight",innerHTML:$e(f)},null,8,vd)]))),128))])):V("",!0)])):(o(),a(ee,{key:2},[k.value.bullets&&k.value.bullets.length?(o(),a("ul",hd,[(o(!0),a(ee,null,le(k.value.bullets,(f,x)=>(o(),a("li",{key:x,class:"flex gap-10 items-start"},[i[67]||(i[67]=e("div",{class:"mt-5 h-3.5 w-3.5 rounded-full bg-indigo-500 shadow-[0_0_20px_rgba(99,102,241,0.6)] shrink-0"},null,-1)),e("p",{class:"text-3xl lg:text-5xl text-zinc-100 font-medium leading-[1.15] tracking-tight",innerHTML:$e(f)},null,8,md)]))),128))])):V("",!0)],64))]))])],4)]),e("div",xd,[i[68]||(i[68]=e("div",{class:"text-2xl lg:text-3xl font-bold tracking-tighter text-white"},[ne(" FINALYZE"),e("span",{class:"text-indigo-500"},".")],-1)),e("div",bd,[e("div",yd,T(b.project?.title||"DEFENSE PREPARATION"),1),e("div",wd," Slide "+T(t.activeIndex+1),1)])])])]))],512)],512)):V("",!0)])):(o(),a("div",kd,[e("div",_d,[l(n(gn),{class:"h-10 w-10 text-indigo-500/50"})]),i[72]||(i[72]=e("div",{class:"space-y-2 px-6"},[e("h3",{class:"text-xl font-bold text-white"},"No Slides Found"),e("p",{class:"text-sm text-zinc-500 max-w-xs mx-auto"}," Generate your defense deck to start building the perfect presentation. ")],-1))])),l(n(fo),{open:w.value,"onUpdate:open":i[28]||(i[28]=f=>{w.value=f})},{default:$(()=>[l(n(go),null,{default:$(()=>[l(n(vo),null,{default:$(()=>[l(n(ho),null,{default:$(()=>[...i[73]||(i[73]=[ne("Delete slide?",-1)])]),_:1}),l(n(mo),null,{default:$(()=>[...i[74]||(i[74]=[ne(" This will permanently remove the slide from your deck. ",-1)])]),_:1})]),_:1}),l(n(xo),null,{default:$(()=>[l(n(bo),{onClick:i[27]||(i[27]=f=>{w.value=!1,E.value=null})},{default:$(()=>[...i[75]||(i[75]=[ne("Cancel ",-1)])]),_:1}),l(n(yo),{class:"bg-rose-500 text-white hover:bg-rose-600",onClick:Y},{default:$(()=>[...i[76]||(i[76]=[ne(" Delete ",-1)])]),_:1})]),_:1})]),_:1})]),_:1},8,["open"])],64))}}),$d=lt(Sd,[["__scopeId","data-v-9b401f55"]]),Hn=16/9,jt=960,Pt=540;function zd(P,h={}){const t=zs(null),r=A({zoom:1,panX:0,panY:0,gridEnabled:h.showGrid??!1,snapEnabled:h.snapToGrid??!1,gridSize:h.gridSize??20}),s=A([]),d=A(!1),c=A(!1),g=A(!1),v=A(!1),w=[];function E(D=h.width??jt,Z=h.height??Pt){if(P.value)return t.value&&t.value.dispose(),t.value=new Cs(P.value,{width:D,height:Z,backgroundColor:h.backgroundColor??"#FFFFFF",selection:!0,preserveObjectStacking:!0,renderOnAddRemove:!0,stopContextMenu:!0,fireRightClick:!0,enableRetinaScaling:!0}),t.value.selection=!0,t.value.skipTargetFind=!1,t.value.selectionColor="rgba(99, 102, 241, 0.1)",t.value.selectionBorderColor="#6366F1",t.value.selectionLineWidth=1,gt.prototype.objectCaching=!0,gt.ownDefaults.borderColor="#6366F1",gt.ownDefaults.cornerColor="#6366F1",gt.ownDefaults.cornerStrokeColor="#FFFFFF",gt.ownDefaults.cornerStyle="circle",gt.ownDefaults.cornerSize=10,gt.ownDefaults.transparentCorners=!1,gt.ownDefaults.borderScaleFactor=1.5,gt.ownDefaults.padding=4,S(),r.value.gridEnabled&&Ce(),t.value}function S(){t.value&&(t.value.on("selection:created",u),t.value.on("selection:updated",F),t.value.on("selection:cleared",R),t.value.on("object:modified",C),t.value.on("object:moving",M),t.value.on("object:scaling",W),t.value.on("object:rotating",K),t.value.on("mouse:down",I),t.value.on("mouse:move",p),t.value.on("mouse:up",z),t.value.on("mouse:wheel",H),t.value.on("mouse:dblclick",G))}function u(D){D.selected&&(s.value=D.selected,d.value=!0),Y("selection:created",{selected:D.selected||[]})}function F(D){D.selected&&(s.value=D.selected),Y("selection:updated",{selected:D.selected||[],deselected:D.deselected||[]})}function R(D){s.value=[],d.value=!1,Y("selection:cleared",{deselected:D.deselected||[]})}function C(D){const Z=D.target;Z&&(r.value.snapEnabled&&Z.left!==void 0&&Z.top!==void 0&&(Z.set({left:He(Z.left),top:He(Z.top)}),Z.setCoords(),t.value?.renderAll()),c.value=!1,g.value=!1,v.value=!1,Y("object:modified",{target:Z,transform:D.transform}))}function M(D){c.value=!0;const Z=D.target;Z&&(O(Z),Y("object:moving",{target:Z}))}function W(D){g.value=!0,Y("object:scaling",{target:D.target})}function K(D){v.value=!0,Y("object:rotating",{target:D.target})}function I(D){const Z=t.value?.getScenePoint(D.e);Y("mouse:down",{x:Z?.x??0,y:Z?.y??0,button:D.e.button??0,shiftKey:D.e.shiftKey??!1,ctrlKey:D.e.ctrlKey??!1,altKey:D.e.altKey??!1,target:D.target})}function p(D){const Z=t.value?.getScenePoint(D.e);Y("mouse:move",{x:Z?.x??0,y:Z?.y??0,button:D.e.button??0,shiftKey:D.e.shiftKey??!1,ctrlKey:D.e.ctrlKey??!1,altKey:D.e.altKey??!1,target:D.target})}function z(D){const Z=t.value?.getScenePoint(D.e);Y("mouse:up",{x:Z?.x??0,y:Z?.y??0,button:D.e.button??0,shiftKey:D.e.shiftKey??!1,ctrlKey:D.e.ctrlKey??!1,altKey:D.e.altKey??!1,target:D.target})}function H(D){if(D.e.ctrlKey){D.e.preventDefault();const Z=D.e.deltaY>0?-.1:.1;ye(Z,D.e.offsetX,D.e.offsetY)}Y("mouse:wheel",{deltaY:D.e.deltaY,ctrlKey:D.e.ctrlKey})}function G(D){Y("mouse:dblclick",{target:D.target})}const Q=new Map;function Y(D,Z){const re=Q.get(D);re&&re.forEach(me=>me(Z))}function ke(D,Z){return Q.has(D)||Q.set(D,new Set),Q.get(D).add(Z),()=>Re(D,Z)}function Re(D,Z){Q.get(D)?.delete(Z)}function Ce(){if(!t.value)return;Ae();const{gridSize:D}=r.value,Z=t.value.width||jt,re=t.value.height||Pt;for(let me=0;me<=Z/D;me++){const be=new Ct([me*D,0,me*D,re],{stroke:"#E5E7EB",strokeWidth:1,selectable:!1,evented:!1,excludeFromExport:!0});w.push(be),t.value.add(be)}for(let me=0;me<=re/D;me++){const be=new Ct([0,me*D,Z,me*D],{stroke:"#E5E7EB",strokeWidth:1,selectable:!1,evented:!1,excludeFromExport:!0});w.push(be),t.value.add(be)}w.forEach(me=>t.value?.sendObjectToBack(me)),t.value.renderAll()}function Ae(){t.value&&(w.forEach(D=>t.value?.remove(D)),w.length=0)}function Le(){r.value.gridEnabled=!r.value.gridEnabled,r.value.gridEnabled?Ce():Ae()}function Be(){r.value.snapEnabled=!r.value.snapEnabled}function He(D){const{gridSize:Z}=r.value;return Math.round(D/Z)*Z}function fe(D,Z,re){if(!t.value)return;const me=Math.max(.1,Math.min(3,D));r.value.zoom=me;const be=Z!==void 0&&re!==void 0?new Dn(Z,re):new Dn(t.value.width/2,t.value.height/2);t.value.zoomToPoint(be,me),t.value.renderAll()}function ye(D,Z,re){const me=r.value.zoom+D;fe(me,Z,re)}function se(){ye(.1)}function q(){ye(-.1)}function m(){fe(1),N()}function y(D,Z){if(!t.value)return;r.value.panX=D,r.value.panY=Z;const re=t.value.viewportTransform;re&&(re[4]=D,re[5]=Z,t.value.setViewportTransform(re),t.value.renderAll())}function N(){y(0,0)}function O(D){if(!t.value||D.left===void 0||D.top===void 0)return;const Z=t.value.width||jt,re=t.value.height||Pt,me=D.scaleX??1,be=D.scaleY??1,Ye=(D.width??0)*me,Ge=(D.height??0)*be;let Ve=!1,qe=D.left,Je=D.top;const Oe=20;qe+Ye<Oe?(qe=Oe-Ye,Ve=!0):qe>Z-Oe&&(qe=Z-Oe,Ve=!0),Je+Ge<Oe?(Je=Oe-Ge,Ve=!0):Je>re-Oe&&(Je=re-Oe,Ve=!0),Ve&&D.set({left:qe,top:Je})}function J(D,Z){t.value&&(t.value.setDimensions({width:D,height:Z}),r.value.gridEnabled&&Ce(),t.value.renderAll())}function L(D){if(!t.value)return;const Z=D.clientWidth,re=D.clientHeight;let me=Z,be=me/Hn;return be>re&&(be=re,me=be*Hn),J(me,be),{width:me,height:be}}function te(D){t.value&&(t.value.backgroundColor=D,t.value.renderAll())}async function ue(D,Z={}){if(t.value)try{const re=await hn.fromURL(D,{crossOrigin:"anonymous"});if(!t.value||!re)return;const me=t.value.width||jt,be=t.value.height||Pt;re.set({originX:"left",originY:"top",scaleX:me/(re.width||1),scaleY:be/(re.height||1),...Z}),t.value.backgroundImage=re,t.value.renderAll()}catch(re){console.error("Failed to load background image:",re)}}function oe(){t.value&&(t.value.backgroundImage=void 0,t.value.renderAll())}function Me(){if(!t.value)return;const D=t.value.getObjects().filter(re=>re.selectable);if(D.length===0)return;t.value.discardActiveObject();const Z=new Ht(D,{canvas:t.value});t.value.setActiveObject(Z),t.value.renderAll()}function Se(){t.value&&(t.value.discardActiveObject(),t.value.renderAll())}function we(D){t.value&&(t.value.setActiveObject(D),t.value.renderAll())}function Ie(D){if(!t.value)return;const Z=t.value.getObjects().find(re=>re.elementId===D);Z&&we(Z)}function De(){return t.value?.toObject(["elementId","elementType","locked"])}function tt(D="png",Z=1){return t.value?.toDataURL({multiplier:1,format:D,quality:Z})}function ut(){return t.value?.toSVG()}function pt(){t.value?.renderAll()}function xe(){t.value?.requestRenderAll()}function We(){t.value&&(t.value.dispose(),t.value=null),Q.clear(),w.length=0}const Ue=U(()=>s.value.length>0),$e=U(()=>s.value.length>1),_e=U(()=>t.value?.width??jt),Xe=U(()=>t.value?.height??Pt);return{canvas:t,state:r,selectedObjects:s,isSelecting:d,isDragging:c,isResizing:g,isRotating:v,hasSelection:Ue,multipleSelected:$e,canvasWidth:_e,canvasHeight:Xe,initCanvas:E,dispose:We,toggleGrid:Le,toggleSnapToGrid:Be,drawGrid:Ce,clearGrid:Ae,setZoom:fe,zoomBy:ye,zoomIn:se,zoomOut:q,resetZoom:m,setPan:y,resetPan:N,resizeCanvas:J,fitToContainer:L,setBackgroundColor:te,setBackgroundImage:ue,clearBackgroundImage:oe,selectAll:Me,deselectAll:Se,selectObject:we,selectObjectById:Ie,on:ke,off:Re,toJSON:De,toDataURL:tt,toSVG:ut,render:pt,requestRender:xe}}const Wn={content:"Text",fontFamily:"Arial",fontSize:18,fontWeight:"normal",fontStyle:"normal",textAlign:"left",color:"#111827",lineHeight:1.4,letterSpacing:0},Cd={shapeType:"rectangle",cornerRadius:0};function Fd(P){const{canvasInstance:h,slide:t,onElementsChange:r}=P,s=new Map;function d(){return t.value?t.value.elements.reduce((y,N)=>Math.max(y,N.zIndex),0)+1:1}function c(m,y){return m/100*y}function g(m,y){return m/y*100}function v(m){const y=h.canvas.value;if(!y)return null;const N=y.width||960,O=y.height||540,J=c(m.x,N),L=c(m.y,O),te=c(m.width,N),ue=c(m.height,O);let oe=null;switch(m.type){case"text":oe=w(m,J,L,te);break;case"shape":oe=E(m,J,L,te,ue);break;case"image":return S(m,J,L,te,ue),null;case"chart":return u(m,J,L,te,ue),null;case"table":oe=R(m,J,L,te,ue);break;default:return console.warn(`Unknown element type: ${m.type}`),null}return oe&&(C(oe,m),oe.elementId=m.id,oe.elementType=m.type),oe}function w(m,y,N,O,J){const L=m.text||Wn;return new qt(L.content,{left:y,top:N,width:O,fontSize:L.fontSize,fontFamily:L.fontFamily,fontWeight:L.fontWeight==="bold"?"bold":"normal",fontStyle:L.fontStyle==="italic"?"italic":"normal",fill:L.color,textAlign:L.textAlign,lineHeight:L.lineHeight,charSpacing:L.letterSpacing*10,underline:L.textDecoration==="underline",linethrough:L.textDecoration==="line-through",editable:!0,splitByGrapheme:!1})}function E(m,y,N,O,J){const L=m.shape||Cd;let te;switch(L.shapeType){case"circle":te=new jn({left:y,top:N,rx:O/2,ry:J/2,fill:m.fill||"#E5E7EB",stroke:m.stroke||"#9CA3AF",strokeWidth:m.strokeWidth||1});break;case"triangle":te=new rn({left:y,top:N,width:O,height:J,fill:m.fill||"#E5E7EB",stroke:m.stroke||"#9CA3AF",strokeWidth:m.strokeWidth||1});break;case"line":te=new Ct([y,N,y+O,N+J],{stroke:m.stroke||"#9CA3AF",strokeWidth:m.strokeWidth||2,fill:""});break;case"arrow":const ue=new Ct([0,J/2,O-15,J/2],{stroke:m.stroke||"#9CA3AF",strokeWidth:m.strokeWidth||2}),oe=new rn({left:O-15,top:J/2-8,width:15,height:16,fill:m.stroke||"#9CA3AF",angle:90});te=new Ln([ue,oe],{left:y,top:N});break;case"rounded-rectangle":te=new Tt({left:y,top:N,width:O,height:J,fill:m.fill||"#E5E7EB",stroke:m.stroke||"#9CA3AF",strokeWidth:m.strokeWidth||1,rx:L.cornerRadius||10,ry:L.cornerRadius||10});break;case"rectangle":default:te=new Tt({left:y,top:N,width:O,height:J,fill:m.fill||"#E5E7EB",stroke:m.stroke||"#9CA3AF",strokeWidth:m.strokeWidth||1});break}return te}async function S(m,y,N,O,J){const L=m.image;if(L?.url)try{const te=await hn.fromURL(L.url,{crossOrigin:"anonymous"}),ue=h.canvas.value;if(!ue||!te)return;const oe=te.width||1,Me=te.height||1;let Se=O/oe,we=J/Me;if(L.fit==="contain"){const Ie=Math.min(Se,we);Se=Ie,we=Ie}else if(L.fit==="cover"){const Ie=Math.max(Se,we);Se=Ie,we=Ie}te.set({left:y,top:N,scaleX:Se,scaleY:we,angle:m.rotation||0,opacity:m.opacity??1}),C(te,m),te.elementId=m.id,te.elementType=m.type,ue.add(te),s.set(m.id,te),ue.renderAll()}catch(te){console.error("Failed to load image:",te)}}async function u(m,y,N,O,J){const L=m.chart;if(!L)return;const te=document.createElement("canvas");te.width=O*2,te.height=J*2;const ue=te.getContext("2d");if(ue)try{const{default:oe}=await Fs(async()=>{const{default:De}=await import("./vendor-BwJgEX4g.js").then(tt=>tt.ix);return{default:De}},__vite__mapDeps([0,1])),Me=new oe(ue,{type:L.chartType,data:{labels:L.labels,datasets:L.datasets.map(De=>({label:De.label,data:De.data,backgroundColor:De.backgroundColor||F(De.data.length),borderColor:De.borderColor||"#4F46E5",borderWidth:De.borderWidth||1}))},options:{responsive:!1,maintainAspectRatio:!1,animation:!1,plugins:{legend:{display:L.showLegend??!0,position:"bottom"},title:{display:!!L.title,text:L.title||"",font:{size:14,weight:"bold"}}},scales:["bar","line","scatter","area"].includes(L.chartType)?{x:{grid:{display:L.showGrid??!0}},y:{grid:{display:L.showGrid??!0}}}:void 0}});await new Promise(De=>setTimeout(De,100));const Se=te.toDataURL("image/png");Me.destroy();const we=await hn.fromURL(Se),Ie=h.canvas.value;if(!Ie||!we)return;we.set({left:y,top:N,scaleX:O/(we.width||1),scaleY:J/(we.height||1),angle:m.rotation||0,opacity:m.opacity??1}),C(we,m),we.elementId=m.id,we.elementType=m.type,Ie.add(we),s.set(m.id,we),Ie.renderAll()}catch(oe){console.error("Failed to create chart:",oe)}}function F(m){const y=["#6366F1","#8B5CF6","#EC4899","#F43F5E","#F97316","#EAB308","#22C55E","#14B8A6","#06B6D4","#3B82F6"];return Array.from({length:m},(N,O)=>y[O%y.length])}function R(m,y,N,O,J){const L=m.table,te=L?.columns||[],ue=L?.rows||[],oe=[],Me=8,Se=32,we=28,Ie=O/Math.max(te.length,1),De=new Tt({left:0,top:0,width:O,height:J,fill:"#FFFFFF",stroke:"#E5E7EB",strokeWidth:1});oe.push(De);const tt=new Tt({left:0,top:0,width:O,height:Se,fill:L?.headerBackground||"#F3F4F6"});oe.push(tt),te.forEach((xe,We)=>{const Ue=new Pn(xe.label,{left:We*Ie+Me,top:Me,fontSize:12,fontWeight:"bold",fontFamily:"Arial",fill:L?.headerColor||"#111827"});if(oe.push(Ue),We>0){const $e=new Ct([We*Ie,0,We*Ie,J],{stroke:"#E5E7EB",strokeWidth:1});oe.push($e)}});const ut=new Ct([0,Se,O,Se],{stroke:"#D1D5DB",strokeWidth:1});return oe.push(ut),ue.forEach((xe,We)=>{const Ue=Se+We*we;if(L?.alternateRowColors&&We%2===1){const _e=new Tt({left:0,top:Ue,width:O,height:we,fill:"#F9FAFB"});oe.push(_e)}const $e=new Ct([0,Ue+we,O,Ue+we],{stroke:"#E5E7EB",strokeWidth:1});oe.push($e),te.forEach((_e,Xe)=>{const D=String(xe[_e.key]??""),Z=new Pn(D,{left:Xe*Ie+Me,top:Ue+Me,fontSize:11,fontFamily:"Arial",fill:"#374151"});oe.push(Z)})}),new Ln(oe,{left:y,top:N})}function C(m,y){m.set({angle:y.rotation||0,opacity:y.opacity??1,selectable:!y.locked,evented:!y.locked,visible:!y.hidden}),y.shadow&&m.set("shadow",new Is({color:y.shadow.color,blur:y.shadow.blur,offsetX:y.shadow.offsetX,offsetY:y.shadow.offsetY}))}function M(m){if(!t.value)throw new Error("No active slide");m.id||(m.id=Ne()),t.value.elements.push(m);const y=v(m);if(y){const N=h.canvas.value;N&&(N.add(y),s.set(m.id,y),N.setActiveObject(y),N.renderAll())}return r?.(t.value.elements),m}function W(m={}){const y={id:Ne(),type:"text",x:m.x??10,y:m.y??10,width:m.width??40,height:m.height??10,rotation:0,zIndex:d(),text:{...Wn,...m.text},...m};return M(y)}function K(m="rectangle",y={}){const N={id:Ne(),type:"shape",x:y.x??20,y:y.y??20,width:y.width??20,height:y.height??15,rotation:0,zIndex:d(),fill:y.fill??"#E5E7EB",stroke:y.stroke??"#9CA3AF",strokeWidth:y.strokeWidth??1,shape:{shapeType:m,cornerRadius:m==="rounded-rectangle"?10:0,...y.shape},...y};return M(N)}function I(m,y={}){const N={id:Ne(),type:"image",x:y.x??25,y:y.y??20,width:y.width??30,height:y.height??30,rotation:0,zIndex:d(),image:{url:m,fit:"contain",...y.image},...y};return M(N)}function p(m={}){const y={id:Ne(),type:"chart",x:m.x??15,y:m.y??25,width:m.width??50,height:m.height??40,rotation:0,zIndex:d(),chart:{chartType:"bar",title:"Chart Title",labels:["Category A","Category B","Category C","Category D"],datasets:[{label:"Series 1",data:[65,59,80,81]}],showLegend:!0,showGrid:!0,...m.chart},...m};return M(y)}function z(m={}){const y={id:Ne(),type:"table",x:m.x??10,y:m.y??30,width:m.width??60,height:m.height??35,rotation:0,zIndex:d(),table:{title:"Table",columns:[{key:"col1",label:"Column 1"},{key:"col2",label:"Column 2"},{key:"col3",label:"Column 3"}],rows:[{col1:"Row 1",col2:"Data",col3:"Value"},{col1:"Row 2",col2:"Data",col3:"Value"},{col1:"Row 3",col2:"Data",col3:"Value"}],headerBackground:"#F3F4F6",headerColor:"#111827",alternateRowColors:!0,...m.table},...m};return M(y)}function H(m,y){if(!t.value)return;const N=t.value.elements.findIndex(L=>L.id===m);if(N===-1)return;const O=t.value.elements[N];Object.assign(O,y);const J=s.get(m);J&&G(J,O),r?.(t.value.elements)}function G(m,y){const N=h.canvas.value;if(!N)return;const O=N.width||960,J=N.height||540,L=c(y.x,O),te=c(y.y,J),ue=c(y.width,O),oe=c(y.height,J);m.set({left:L,top:te,angle:y.rotation||0,opacity:y.opacity??1,selectable:!y.locked,evented:!y.locked,visible:!y.hidden}),y.type==="text"&&y.text&&m instanceof qt&&(m.set({width:ue,text:y.text.content,fontSize:y.text.fontSize,fontFamily:y.text.fontFamily,fontWeight:y.text.fontWeight==="bold"?"bold":"normal",fontStyle:y.text.fontStyle==="italic"?"italic":"normal",fill:y.text.color,textAlign:y.text.textAlign,lineHeight:y.text.lineHeight,charSpacing:(y.text.letterSpacing||0)*10,underline:y.text.textDecoration==="underline",linethrough:y.text.textDecoration==="line-through"}),m.initDimensions()),y.type==="shape"&&(m.set({fill:y.fill,stroke:y.stroke,strokeWidth:y.strokeWidth}),(m instanceof Tt||m instanceof rn)&&m.set({width:ue,height:oe}),m instanceof jn&&m.set({rx:ue/2,ry:oe/2})),m.setCoords(),N.renderAll()}function Q(m){if(!t.value)return;const y=t.value.elements.findIndex(O=>O.id===m);if(y===-1)return;t.value.elements.splice(y,1);const N=s.get(m);if(N){const O=h.canvas.value;O&&(O.remove(N),O.renderAll()),s.delete(m)}r?.(t.value.elements)}function Y(){const m=h.canvas.value;if(!m)return;const y=m.getActiveObject();if(y)if(y instanceof Ht)y.getObjects().forEach(O=>{const J=O.elementId;J&&Q(J)}),m.discardActiveObject();else{const N=y.elementId;N&&Q(N)}}function ke(m){if(!t.value)return null;const y=t.value.elements.find(O=>O.id===m);if(!y)return null;const N={...JSON.parse(JSON.stringify(y)),id:Ne(),x:y.x+2,y:y.y+2,zIndex:d()};return M(N)}function Re(){const m=h.canvas.value;if(!m)return[];const y=m.getActiveObject();if(!y)return[];const N=[];if(y instanceof Ht)y.getObjects().forEach(J=>{const L=J.elementId;if(L){const te=ke(L);te&&N.push(te)}});else{const O=y.elementId;if(O){const J=ke(O);J&&N.push(J)}}return N}function Ce(m){return t.value?.elements.find(y=>y.id===m)}function Ae(m){return s.get(m)}function Le(m){if(!t.value)return;const y=Ce(m);if(!y)return;const N=d();y.zIndex=N;const O=s.get(m);O&&(h.canvas.value?.bringObjectToFront(O),h.render()),r?.(t.value.elements)}function Be(m){if(!t.value)return;const y=Ce(m);if(!y)return;const N=Math.min(...t.value.elements.map(J=>J.zIndex));y.zIndex=N-1;const O=s.get(m);O&&(h.canvas.value?.sendObjectToBack(O),h.render()),r?.(t.value.elements)}function He(m){const y=s.get(m);y&&(h.canvas.value?.bringObjectForward(y),h.render())}function fe(m){const y=s.get(m);y&&(h.canvas.value?.sendObjectBackwards(y),h.render())}function ye(m){if(!t.value)return;const y=s.get(m);if(!y)return;const N=h.canvas.value;if(!N)return;const O=Ce(m);if(!O)return;const J=N.width||960,L=N.height||540,te=y.left??0,ue=y.top??0,oe=y.scaleX??1,Me=y.scaleY??1,Se=(y.width??0)*oe,we=(y.height??0)*Me;O.x=g(te,J),O.y=g(ue,L),O.width=g(Se,J),O.height=g(we,L),O.rotation=y.angle||0,O.type==="text"&&y instanceof qt&&O.text&&(O.text.content=y.text||""),r?.(t.value.elements)}function se(){const m=h.canvas.value;if(!m||!t.value)return;m.getObjects().filter(O=>O.elementId!==void 0).forEach(O=>m.remove(O)),s.clear(),[...t.value.elements].sort((O,J)=>O.zIndex-J.zIndex).forEach(O=>{const J=v(O);J&&(J.set({selectable:O.locked!==!0,evented:O.locked!==!0,hasControls:!0,hasBorders:!0}),m.add(J),s.set(O.id,J))}),m.selection=!0,m.skipTargetFind=!1,m.forEachObject(O=>{O.set({selectable:!0,evented:!0})}),m.renderAll()}function q(){if(!t.value)return;t.value.elements=[];const m=h.canvas.value;m&&(m.getObjects().filter(N=>N.elementId!==void 0).forEach(N=>m.remove(N)),m.renderAll()),s.clear(),r?.(t.value.elements)}return{addElement:M,addText:W,addShape:K,addImage:I,addChart:p,addTable:z,updateElement:H,removeElement:Q,removeSelected:Y,duplicateElement:ke,duplicateSelected:Re,getElementById:Ce,getFabricObject:Ae,getNextZIndex:d,bringToFront:Le,sendToBack:Be,bringForward:He,sendBackward:fe,syncFromFabricObject:ye,loadElements:se,clearElements:q,percentToPixels:c,pixelsToPercent:g}}const Id={class:"canvas-wrapper relative shadow-2xl rounded-sm"},Td=["width","height"],Ed={key:0,class:"absolute bottom-4 right-4 px-3 py-1.5 bg-zinc-900/80 text-white text-sm font-medium rounded-lg"},Ad={key:1,class:"absolute inset-0 flex items-center justify-center bg-zinc-100 dark:bg-zinc-900"},Bd=ze({__name:"EditorCanvas",props:{slide:{},width:{default:960},height:{default:540},showGrid:{type:Boolean,default:!1},snapToGrid:{type:Boolean,default:!1},gridSize:{default:20},readonly:{type:Boolean,default:!1}},emits:["element:modified","element:selected","element:deselected","elements:change","canvas:ready","canvas:contextmenu"],setup(P,{expose:h,emit:t}){const r=P,s=t,d=A(null),c=A(null),g=U(()=>r.slide),v=zd(d,{width:r.width,height:r.height,backgroundColor:r.slide?.backgroundColor||"#FFFFFF",showGrid:r.showGrid,snapToGrid:r.snapToGrid,gridSize:r.gridSize}),w=Fd({canvasInstance:v,slide:g,onElementsChange:W=>{s("elements:change",W)}});let E=null,S={width:0,height:0},u=null;yt(async()=>{await st(),d.value&&(v.initCanvas(r.width,r.height),F(),r.slide&&v.setBackgroundColor(r.slide.backgroundColor||"#FFFFFF"),R(),w.loadElements(),c.value&&(E=new ResizeObserver(()=>{u&&clearTimeout(u),u=setTimeout(()=>{R()},100)}),E.observe(c.value)),s("canvas:ready",v))}),Wt(()=>{u&&clearTimeout(u),E&&c.value&&(E.unobserve(c.value),E.disconnect()),v.dispose()}),Ee(()=>r.slide,(W,K)=>{v.canvas.value&&(W?.id!==K?.id&&w.loadElements(),W&&v.setBackgroundColor(W.backgroundColor||"#FFFFFF"))},{deep:!0}),Ee(()=>r.showGrid,W=>{W?v.drawGrid():v.clearGrid()}),Ee(()=>r.snapToGrid,W=>{v.state.value.snapEnabled=W});function F(){v.on("selection:created",W=>{const K=W.selected.map(I=>I.elementId).filter(Boolean);s("element:selected",K)}),v.on("selection:updated",W=>{const K=W.selected.map(I=>I.elementId).filter(Boolean);s("element:selected",K)}),v.on("selection:cleared",()=>{s("element:deselected")}),v.on("object:modified",W=>{const K=W.target.elementId;if(K){w.syncFromFabricObject(K);const I=w.getElementById(K);I&&s("element:modified",I)}}),v.on("mouse:down",W=>{if(W.button===2){const K=W.target?W.target.elementId:void 0;s("canvas:contextmenu",{x:W.x,y:W.y,elementId:K})}}),v.on("mouse:dblclick",W=>{const K=W.target;K&&K.elementType==="text"&&K instanceof qt&&(K.enterEditing(),K.selectAll())}),v.on("text:changed",W=>{const K=W.target?.elementId;K&&w.syncFromFabricObject(K)}),v.on("text:editing:exited",W=>{const K=W.target?.elementId;K&&w.syncFromFabricObject(K)})}function R(){if(c.value){const W=v.fitToContainer(c.value);W&&(W.width!==S.width||W.height!==S.height)&&(S=W,w.loadElements())}}function C(){return v}function M(){return w}return h({canvasInstance:v,elementsInstance:w,getCanvas:C,getElements:M,fitToContainer:R}),(W,K)=>(o(),a("div",{ref_key:"containerRef",ref:c,class:de(["editor-canvas-container relative flex items-center justify-center bg-zinc-200 dark:bg-zinc-800 overflow-hidden w-full h-full",{"cursor-not-allowed opacity-75":W.readonly}])},[e("div",Id,[e("canvas",{ref_key:"canvasRef",ref:d,width:W.width,height:W.height},null,8,Td)]),n(v).state.value.zoom!==1?(o(),a("div",Ed,T(Math.round(n(v).state.value.zoom*100))+"% ",1)):V("",!0),W.slide?V("",!0):(o(),a("div",Ad,[...K[0]||(K[0]=[e("p",{class:"text-zinc-500 dark:text-zinc-400"},"No slide selected",-1)])]))],2))}}),Dd=lt(Bd,[["__scopeId","data-v-e0a63787"]]),jd={class:"grid grid-cols-3 gap-2"},Pd=["title","onClick"],Ld={class:"w-8 h-8 text-muted-foreground",viewBox:"0 0 32 32",fill:"none",stroke:"currentColor","stroke-width":"2"},Md={key:0,x:"4",y:"8",width:"24",height:"16",rx:"0",fill:"currentColor","fill-opacity":"0.1"},Od={key:1,x:"4",y:"8",width:"24",height:"16",rx:"4",fill:"currentColor","fill-opacity":"0.1"},Rd={key:2,cx:"16",cy:"16",rx:"12",ry:"10",fill:"currentColor","fill-opacity":"0.1"},Hd={key:3,points:"16,4 28,28 4,28",fill:"currentColor","fill-opacity":"0.1"},Wd={key:5,x1:"4",y1:"28",x2:"28",y2:"4"},Nd={class:"text-xs text-muted-foreground mt-1"},Ud=ze({__name:"ShapeLibrary",emits:["select"],setup(P,{emit:h}){const t=h,r=[{type:"rectangle",name:"Rectangle",icon:"rectangle"},{type:"rounded-rectangle",name:"Rounded Rectangle",icon:"rounded-rectangle"},{type:"circle",name:"Circle",icon:"circle"},{type:"triangle",name:"Triangle",icon:"triangle"},{type:"arrow",name:"Arrow",icon:"arrow"},{type:"line",name:"Line",icon:"line"}],s=U(()=>r);function d(c){t("select",c)}return(c,g)=>(o(),he(n($n),null,{default:$(()=>[l(n(zn),{"as-child":""},{default:$(()=>[l(n(ae),{variant:"ghost",size:"sm",title:"Add Shape"},{default:$(()=>[l(n(Ts),{class:"w-4 h-4"}),g[0]||(g[0]=e("span",{class:"sr-only"},"Add Shape",-1))]),_:1})]),_:1}),l(n(Cn),{class:"w-56 p-3",align:"start"},{default:$(()=>[l(n(Ft),{class:"mb-3 block text-sm font-medium"},{default:$(()=>[...g[1]||(g[1]=[ne("Basic Shapes",-1)])]),_:1}),e("div",jd,[(o(!0),a(ee,null,le(s.value,v=>(o(),a("button",{key:v.type,type:"button",class:"flex flex-col items-center justify-center p-2 rounded-md border border-gray-200 hover:border-primary hover:bg-accent transition-colors focus:outline-none focus:ring-2 focus:ring-ring",title:v.name,onClick:w=>d(v.type)},[(o(),a("svg",Ld,[v.icon==="rectangle"?(o(),a("rect",Md)):v.icon==="rounded-rectangle"?(o(),a("rect",Od)):v.icon==="circle"?(o(),a("ellipse",Rd)):v.icon==="triangle"?(o(),a("polygon",Hd)):v.icon==="arrow"?(o(),a(ee,{key:4},[g[2]||(g[2]=e("line",{x1:"4",y1:"16",x2:"22",y2:"16"},null,-1)),g[3]||(g[3]=e("polyline",{points:"18,10 24,16 18,22",fill:"none"},null,-1))],64)):v.icon==="line"?(o(),a("line",Wd)):V("",!0)])),e("span",Nd,T(v.name),1)],8,Pd))),128))]),g[4]||(g[4]=e("p",{class:"mt-3 text-xs text-muted-foreground"}," Click a shape to add it to the slide ",-1))]),_:1})]),_:1}))}}),Gd={type:"button",class:"inline-flex items-center gap-2 rounded-md border border-input bg-background px-2 py-1.5 text-sm hover:bg-accent hover:text-accent-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2"},Vd={key:0,class:"text-muted-foreground"},qd={class:"mb-3"},Xd={class:"space-y-1"},Yd=["title","onClick"],Kd={class:"mb-3"},Qd={class:"flex flex-wrap gap-1"},Jd=["title","onClick"],Zd={key:0,class:"mb-3"},ec={class:"flex flex-wrap gap-1"},tc=["title","onClick"],nc={class:"mb-3"},sc={class:"flex items-center gap-2"},oc={class:"relative"},lc={key:1},ic={class:"flex items-center gap-2"},Nn="wysiwyg_recent_colors",ac=ze({__name:"ColorPicker",props:{modelValue:{},label:{default:""},showOpacity:{type:Boolean,default:!1},size:{default:"md"}},emits:["update:modelValue"],setup(P,{emit:h}){const t=P,r=h,s=A(!1),d=A("#000000"),c=A(100);function g(I){if(I.startsWith("rgba")){const p=I.match(/rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*([\d.]+))?\)/);if(p){const z=parseInt(p[1]).toString(16).padStart(2,"0"),H=parseInt(p[2]).toString(16).padStart(2,"0"),G=parseInt(p[3]).toString(16).padStart(2,"0"),Q=p[4]?Math.round(parseFloat(p[4])*100):100;return{hex:`#${z}${H}${G}`,opacity:Q}}}return I.length===9&&I.startsWith("#")?{hex:I.substring(0,7),opacity:Math.round(parseInt(I.substring(7),16)/255*100)}:{hex:I||"#000000",opacity:100}}Ee(()=>t.modelValue,I=>{const p=g(I);d.value=p.hex,c.value=p.opacity},{immediate:!0});const v=[["#1E40AF","#3B82F6","#60A5FA","#93C5FD","#DBEAFE"],["#7C3AED","#8B5CF6","#A78BFA","#C4B5FD","#EDE9FE"],["#059669","#10B981","#34D399","#6EE7B7","#D1FAE5"],["#DC2626","#EF4444","#F87171","#FCA5A5","#FEE2E2"],["#111827","#4B5563","#9CA3AF","#D1D5DB","#F3F4F6"]],w=["#000000","#FFFFFF","#FF0000","#00FF00","#0000FF","#FFFF00","#FF00FF","#00FFFF","#FF8000","#8000FF"],E=A([]);function S(){try{const I=localStorage.getItem(Nn);I&&(E.value=JSON.parse(I))}catch{}}function u(I){const p=I.toUpperCase();E.value=[p,...E.value.filter(z=>z!==p)].slice(0,10);try{localStorage.setItem(Nn,JSON.stringify(E.value))}catch{}}S();function F(I,p){if(p>=100)return I;const z=parseInt(I.slice(1,3),16),H=parseInt(I.slice(3,5),16),G=parseInt(I.slice(5,7),16);return`rgba(${z}, ${H}, ${G}, ${(p/100).toFixed(2)})`}function R(I){d.value=I;const p=F(I,t.showOpacity?c.value:100);u(I),r("update:modelValue",p)}function C(){const I=F(d.value,t.showOpacity?c.value:100);u(d.value),r("update:modelValue",I)}function M(){const I=F(d.value,c.value);r("update:modelValue",I)}const W=U(()=>{switch(t.size){case"sm":return"w-5 h-5";case"lg":return"w-8 h-8";default:return"w-6 h-6"}}),K=U(()=>t.modelValue||"#000000");return(I,p)=>(o(),he(n($n),{open:s.value,"onUpdate:open":p[5]||(p[5]=z=>s.value=z)},{default:$(()=>[l(n(zn),{"as-child":""},{default:$(()=>[e("button",Gd,[e("span",{class:de([W.value,"rounded border border-gray-300 shadow-sm"]),style:ce({backgroundColor:K.value})},null,6),I.label?(o(),a("span",Vd,T(I.label),1)):V("",!0)])]),_:1}),l(n(Cn),{class:"w-64 p-3",align:"start"},{default:$(()=>[e("div",qd,[l(n(Ft),{class:"mb-2 block text-xs text-muted-foreground"},{default:$(()=>[...p[6]||(p[6]=[ne("Theme Colors",-1)])]),_:1}),e("div",Xd,[(o(),a(ee,null,le(v,(z,H)=>e("div",{key:H,class:"flex gap-1"},[(o(!0),a(ee,null,le(z,G=>(o(),a("button",{key:G,type:"button",class:"w-6 h-6 rounded border border-gray-200 hover:scale-110 transition-transform focus:outline-none focus:ring-2 focus:ring-ring",style:ce({backgroundColor:G}),title:G,onClick:Q=>R(G)},[d.value.toUpperCase()===G.toUpperCase()?(o(),he(n(mn),{key:0,class:de(["w-4 h-4 mx-auto",H>=3&&H<4?"text-white":"text-gray-800"])},null,8,["class"])):V("",!0)],12,Yd))),128))])),64))])]),e("div",Kd,[l(n(Ft),{class:"mb-2 block text-xs text-muted-foreground"},{default:$(()=>[...p[7]||(p[7]=[ne("Standard Colors",-1)])]),_:1}),e("div",Qd,[(o(),a(ee,null,le(w,z=>e("button",{key:z,type:"button",class:"w-6 h-6 rounded border border-gray-200 hover:scale-110 transition-transform focus:outline-none focus:ring-2 focus:ring-ring",style:ce({backgroundColor:z}),title:z,onClick:H=>R(z)},[d.value.toUpperCase()===z.toUpperCase()?(o(),he(n(mn),{key:0,class:de(["w-4 h-4 mx-auto",z==="#FFFFFF"||z==="#FFFF00"||z==="#00FFFF"?"text-gray-800":"text-white"])},null,8,["class"])):V("",!0)],12,Jd)),64))])]),E.value.length>0?(o(),a("div",Zd,[l(n(Ft),{class:"mb-2 block text-xs text-muted-foreground"},{default:$(()=>[...p[8]||(p[8]=[ne("Recent Colors",-1)])]),_:1}),e("div",ec,[(o(!0),a(ee,null,le(E.value,z=>(o(),a("button",{key:z,type:"button",class:"w-6 h-6 rounded border border-gray-200 hover:scale-110 transition-transform focus:outline-none focus:ring-2 focus:ring-ring",style:ce({backgroundColor:z}),title:z,onClick:H=>R(z)},null,12,tc))),128))])])):V("",!0),e("div",nc,[l(n(Ft),{class:"mb-2 block text-xs text-muted-foreground"},{default:$(()=>[...p[9]||(p[9]=[ne("Custom Color",-1)])]),_:1}),e("div",sc,[e("div",oc,[ct(e("input",{type:"color","onUpdate:modelValue":p[0]||(p[0]=z=>d.value=z),class:"w-8 h-8 cursor-pointer rounded border-0 p-0",onChange:C},null,544),[[Yt,d.value]]),l(n(Es),{class:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-4 h-4 text-white pointer-events-none drop-shadow-md"})]),l(n(yn),{modelValue:d.value,"onUpdate:modelValue":p[1]||(p[1]=z=>d.value=z),class:"flex-1 h-8 text-xs font-mono uppercase",placeholder:"#000000",maxlength:"7",onChange:C},null,8,["modelValue"])])]),I.showOpacity?(o(),a("div",lc,[l(n(Ft),{class:"mb-2 block text-xs text-muted-foreground"},{default:$(()=>[ne(" Opacity: "+T(c.value)+"% ",1)]),_:1}),e("div",ic,[ct(e("input",{type:"range","onUpdate:modelValue":p[2]||(p[2]=z=>c.value=z),min:"0",max:"100",step:"1",class:"flex-1 h-2 rounded-lg appearance-none cursor-pointer bg-gray-200",onInput:M},null,544),[[Yt,c.value,void 0,{number:!0}]]),l(n(yn),{modelValue:c.value,"onUpdate:modelValue":p[3]||(p[3]=z=>c.value=z),modelModifiers:{number:!0},type:"number",min:"0",max:"100",class:"w-16 h-8 text-xs text-center",onChange:M},null,8,["modelValue"])])])):V("",!0),l(n(ae),{class:"w-full mt-3",size:"sm",onClick:p[4]||(p[4]=z=>s.value=!1)},{default:$(()=>[...p[10]||(p[10]=[ne(" Apply ",-1)])]),_:1})]),_:1})]),_:1},8,["open"]))}}),Xt=lt(ac,[["__scopeId","data-v-66d35285"]]),rc={class:"p-2 border-b"},dc={class:"relative"},cc={class:"max-h-60 overflow-y-auto"},uc={key:0,class:"py-6 text-center text-sm text-muted-foreground"},ls=ze({__name:"FontSelector",props:{modelValue:{}},emits:["update:modelValue"],setup(P,{emit:h}){const t=P,r=h,s=A(""),d={"Sans Serif":["Arial","Helvetica","Verdana","Tahoma","Trebuchet MS","Segoe UI","Open Sans","Roboto","Lato","Montserrat","Source Sans Pro","Nunito"],Serif:["Times New Roman","Georgia","Garamond","Palatino Linotype","Book Antiqua","Cambria","Merriweather","Playfair Display","Libre Baskerville"],Monospace:["Courier New","Consolas","Monaco","Menlo","Source Code Pro","Fira Code","JetBrains Mono"],Display:["Impact","Comic Sans MS","Brush Script MT","Pacifico","Lobster","Oswald","Anton"]};Object.values(d).flat();const c=U(()=>{if(!s.value.trim())return d;const w=s.value.toLowerCase(),E={};for(const[S,u]of Object.entries(d)){const F=u.filter(R=>R.toLowerCase().includes(w));F.length>0&&(E[S]=F)}return E});function g(w){r("update:modelValue",w)}const v=U(()=>t.modelValue||"Arial");return(w,E)=>(o(),he(n(wo),{"model-value":v.value,"onUpdate:modelValue":g},{default:$(()=>[l(n(ko),{class:"w-40 h-8 text-sm"},{default:$(()=>[l(n(_o),{placeholder:v.value},{default:$(()=>[e("span",{style:ce({fontFamily:v.value})},T(v.value),5)]),_:1},8,["placeholder"])]),_:1}),l(n(So),{class:"max-h-80"},{default:$(()=>[e("div",rc,[e("div",dc,[l(n(As),{class:"absolute left-2 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),l(n(yn),{modelValue:s.value,"onUpdate:modelValue":E[0]||(E[0]=S=>s.value=S),placeholder:"Search fonts...",class:"h-8 pl-8 text-sm",onClick:E[1]||(E[1]=dt(()=>{},["stop"]))},null,8,["modelValue"])])]),e("div",cc,[(o(!0),a(ee,null,le(c.value,(S,u)=>(o(),he(n(zo),{key:u},{default:$(()=>[l(n(po),{class:"text-xs text-muted-foreground px-2 py-1.5"},{default:$(()=>[ne(T(u),1)]),_:2},1024),(o(!0),a(ee,null,le(S,F=>(o(),he(n($o),{key:F,value:F,class:"py-2"},{default:$(()=>[e("span",{style:ce({fontFamily:F})},T(F),5)]),_:2},1032,["value"]))),128))]),_:2},1024))),128)),Object.keys(c.value).length===0?(o(),a("div",uc," No fonts found ")):V("",!0)])]),_:1})]),_:1},8,["model-value"]))}}),pc={class:"editor-toolbar flex items-center gap-1 p-2 bg-white dark:bg-zinc-900 border-b border-zinc-200 dark:border-zinc-800"},fc={class:"toolbar-section flex items-center gap-1 pr-3 border-r border-zinc-200 dark:border-zinc-700"},gc={key:0,class:"toolbar-section flex items-center gap-1 px-3 border-r border-zinc-200 dark:border-zinc-700"},vc=["value"],hc=["value"],mc={key:1,class:"toolbar-section flex items-center gap-1 px-3 border-r border-zinc-200 dark:border-zinc-700"},xc=["disabled"],bc=["disabled"],yc=["disabled"],wc=["disabled"],kc=["disabled"],_c=["disabled"],Sc={key:2,class:"toolbar-section flex items-center gap-1 px-3 border-r border-zinc-200 dark:border-zinc-700"},$c=["disabled"],zc={class:"toolbar-section flex items-center gap-1 px-3 border-r border-zinc-200 dark:border-zinc-700"},Cc=["disabled"],Fc=["disabled"],Ic=["disabled"],Tc=["disabled"],Ec={class:"toolbar-section flex items-center gap-1 pl-3"},Ac=ze({__name:"EditorToolbar",props:{canUndo:{type:Boolean,default:!1},canRedo:{type:Boolean,default:!1},hasSelection:{type:Boolean,default:!1},hasMultipleSelection:{type:Boolean,default:!1},hasClipboard:{type:Boolean,default:!1},gridEnabled:{type:Boolean,default:!1},snapEnabled:{type:Boolean,default:!1},selectedElementType:{default:null},textColor:{default:"#111827"},fontFamily:{default:"Arial"},fontSize:{default:18}},emits:["add:text","add:shape","add:image","add:chart","add:table","format:bold","format:italic","format:underline","format:color","format:font","format:fontSize","align:horizontal","align:vertical","arrange:bring-front","arrange:send-back","arrange:bring-forward","arrange:send-backward","group","ungroup","undo","redo","duplicate","delete","toggle:grid","toggle:snap"],setup(P,{emit:h}){const t=P,r=h,s=U(()=>t.selectedElementType==="text"),d=U(()=>t.hasMultipleSelection),c=[8,10,12,14,16,18,20,24,28,32,36,42,48,56,64,72];function g(S){r("add:shape",S)}function v(S){r("format:color",S)}function w(S){r("format:font",S)}function E(S){const u=S.target;r("format:fontSize",parseInt(u.value))}return(S,u)=>(o(),a("div",pc,[e("div",fc,[e("button",{class:"toolbar-btn",title:"Add Text Box (T)",onClick:u[0]||(u[0]=F=>r("add:text"))},[l(n(kn),{class:"w-4 h-4"})]),l(Ud,{onSelect:g}),e("button",{class:"toolbar-btn",title:"Add Image",onClick:u[1]||(u[1]=F=>r("add:image"))},[l(n(Jt),{class:"w-4 h-4"})]),e("button",{class:"toolbar-btn",title:"Add Chart",onClick:u[2]||(u[2]=F=>r("add:chart"))},[l(n(Yn),{class:"w-4 h-4"})]),e("button",{class:"toolbar-btn",title:"Add Table",onClick:u[3]||(u[3]=F=>r("add:table"))},[l(n(Bs),{class:"w-4 h-4"})])]),s.value?(o(),a("div",gc,[l(ls,{"model-value":S.fontFamily,"onUpdate:modelValue":w},null,8,["model-value"]),e("select",{value:S.fontSize,class:"h-8 px-2 text-sm border border-input rounded-md bg-background focus:outline-none focus:ring-2 focus:ring-ring",onChange:E},[(o(),a(ee,null,le(c,F=>e("option",{key:F,value:F},T(F),9,hc)),64))],40,vc),u[23]||(u[23]=e("div",{class:"w-px h-4 bg-zinc-200 dark:bg-zinc-700 mx-1"},null,-1)),e("button",{class:"toolbar-btn",title:"Bold (Ctrl+B)",onClick:u[4]||(u[4]=F=>r("format:bold"))},[l(n(Ds),{class:"w-4 h-4"})]),e("button",{class:"toolbar-btn",title:"Italic (Ctrl+I)",onClick:u[5]||(u[5]=F=>r("format:italic"))},[l(n(js),{class:"w-4 h-4"})]),e("button",{class:"toolbar-btn",title:"Underline (Ctrl+U)",onClick:u[6]||(u[6]=F=>r("format:underline"))},[l(n(Ps),{class:"w-4 h-4"})]),u[24]||(u[24]=e("div",{class:"w-px h-4 bg-zinc-200 dark:bg-zinc-700 mx-1"},null,-1)),l(Xt,{"model-value":S.textColor,label:"A",size:"sm","onUpdate:modelValue":v},null,8,["model-value"])])):V("",!0),S.hasSelection?(o(),a("div",mc,[e("button",{class:"toolbar-btn",disabled:!d.value,title:"Align Left",onClick:u[7]||(u[7]=F=>r("align:horizontal","left"))},[l(n(Ls),{class:"w-4 h-4"})],8,xc),e("button",{class:"toolbar-btn",disabled:!d.value,title:"Align Center",onClick:u[8]||(u[8]=F=>r("align:horizontal","center"))},[l(n(Ms),{class:"w-4 h-4"})],8,bc),e("button",{class:"toolbar-btn",disabled:!d.value,title:"Align Right",onClick:u[9]||(u[9]=F=>r("align:horizontal","right"))},[l(n(Os),{class:"w-4 h-4"})],8,yc),u[25]||(u[25]=e("div",{class:"w-px h-4 bg-zinc-200 dark:bg-zinc-700 mx-1"},null,-1)),e("button",{class:"toolbar-btn",disabled:!d.value,title:"Align Top",onClick:u[10]||(u[10]=F=>r("align:vertical","top"))},[l(n(Rs),{class:"w-4 h-4"})],8,wc),e("button",{class:"toolbar-btn",disabled:!d.value,title:"Align Middle",onClick:u[11]||(u[11]=F=>r("align:vertical","middle"))},[l(n(Hs),{class:"w-4 h-4"})],8,kc),e("button",{class:"toolbar-btn",disabled:!d.value,title:"Align Bottom",onClick:u[12]||(u[12]=F=>r("align:vertical","bottom"))},[l(n(Ws),{class:"w-4 h-4"})],8,_c)])):V("",!0),S.hasSelection?(o(),a("div",Sc,[e("button",{class:"toolbar-btn",title:"Bring to Front",onClick:u[13]||(u[13]=F=>r("arrange:bring-front"))},[l(n(Ns),{class:"w-4 h-4"})]),e("button",{class:"toolbar-btn",title:"Send to Back",onClick:u[14]||(u[14]=F=>r("arrange:send-back"))},[l(n(Us),{class:"w-4 h-4"})]),u[26]||(u[26]=e("div",{class:"w-px h-4 bg-zinc-200 dark:bg-zinc-700 mx-1"},null,-1)),e("button",{class:"toolbar-btn",disabled:!S.hasMultipleSelection,title:"Group (Ctrl+G)",onClick:u[15]||(u[15]=F=>r("group"))},[l(n(Gs),{class:"w-4 h-4"})],8,$c),e("button",{class:"toolbar-btn",title:"Ungroup (Ctrl+Shift+G)",onClick:u[16]||(u[16]=F=>r("ungroup"))},[l(n(Vs),{class:"w-4 h-4"})])])):V("",!0),e("div",zc,[e("button",{class:"toolbar-btn",disabled:!S.canUndo,title:"Undo (Ctrl+Z)",onClick:u[17]||(u[17]=F=>r("undo"))},[l(n(qs),{class:"w-4 h-4"})],8,Cc),e("button",{class:"toolbar-btn",disabled:!S.canRedo,title:"Redo (Ctrl+Shift+Z)",onClick:u[18]||(u[18]=F=>r("redo"))},[l(n(Xs),{class:"w-4 h-4"})],8,Fc),u[27]||(u[27]=e("div",{class:"w-px h-4 bg-zinc-200 dark:bg-zinc-700 mx-1"},null,-1)),e("button",{class:"toolbar-btn",disabled:!S.hasSelection,title:"Duplicate (Ctrl+D)",onClick:u[19]||(u[19]=F=>r("duplicate"))},[l(n(_n),{class:"w-4 h-4"})],8,Ic),e("button",{class:"toolbar-btn text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20",disabled:!S.hasSelection,title:"Delete (Del)",onClick:u[20]||(u[20]=F=>r("delete"))},[l(n(Mt),{class:"w-4 h-4"})],8,Tc)]),e("div",Ec,[e("button",{class:de(["toolbar-btn",{"bg-indigo-100 dark:bg-indigo-900/30 text-indigo-600":S.gridEnabled}]),title:"Toggle Grid",onClick:u[21]||(u[21]=F=>r("toggle:grid"))},[l(n(Ys),{class:"w-4 h-4"})],2),e("button",{class:de(["toolbar-btn",{"bg-indigo-100 dark:bg-indigo-900/30 text-indigo-600":S.snapEnabled}]),title:"Snap to Grid",onClick:u[22]||(u[22]=F=>r("toggle:snap"))},[l(n(Kn),{class:"w-4 h-4"})],2)])]))}}),Bc=lt(Ac,[["__scopeId","data-v-261cdbc8"]]),Dc={class:"element-inspector w-64 bg-white dark:bg-zinc-900 border-l border-zinc-200 dark:border-zinc-800 overflow-y-auto"},jc={key:0,class:"p-4 text-center text-zinc-500 dark:text-zinc-400"},Pc={class:"inspector-section"},Lc={key:0,class:"section-content"},Mc={class:"grid grid-cols-2 gap-2"},Oc={class:"input-group"},Rc=["value"],Hc={class:"input-group"},Wc=["value"],Nc={class:"grid grid-cols-2 gap-2 mt-2"},Uc={class:"input-group"},Gc=["value"],Vc={class:"input-group"},qc=["value"],Xc={class:"mt-2"},Yc={class:"input-group"},Kc={class:"input-label flex items-center gap-1"},Qc=["value"],Jc={class:"inspector-section"},Zc={key:0,class:"section-content"},eu={class:"input-group"},tu=["value"],nu={class:"text-xs text-zinc-500"},su={key:0,class:"input-group mt-2"},ou={key:1,class:"input-group mt-2"},lu={key:2,class:"input-group mt-2"},iu=["value"],au={key:0,class:"inspector-section"},ru={key:0,class:"section-content"},du={class:"input-group"},cu={class:"input-group mt-2"},uu=["value"],pu=["value"],fu={class:"input-group mt-2"},gu={class:"input-group mt-2"},vu={class:"flex gap-1"},hu=["onClick"],mu={class:"input-group mt-2"},xu={class:"flex gap-1"},bu={class:"input-group mt-2"},yu=["value"],wu={class:"inspector-section"},ku={key:0,class:"section-content"},_u=["value"],Su=ze({__name:"ElementInspector",props:{element:{},speakerNotes:{}},emits:["update","update:speakerNotes"],setup(P,{emit:h}){const t=P,r=h,s=A({position:!0,appearance:!0,text:!0,notes:!1}),d=[8,9,10,11,12,14,16,18,20,24,28,32,36,40,48,56,64,72],c=[{value:"left",label:"Left"},{value:"center",label:"Center"},{value:"right",label:"Right"},{value:"justify",label:"Justify"}],g=U(()=>t.element!==null),v=U(()=>t.element?.type==="text"),w=U(()=>t.element?.type==="shape");function E(I,p){r("update",{[I]:p})}function S(I,p){r("update",{[I]:p})}function u(I){r("update",{rotation:I})}function F(I){r("update",{opacity:I})}function R(I){r("update",{fill:I})}function C(I){r("update",{stroke:I})}function M(I){r("update",{strokeWidth:I})}function W(I,p){t.element?.text&&r("update",{text:{...t.element.text,[I]:p}})}function K(I){s.value[I]=!s.value[I]}return(I,p)=>(o(),a("div",Dc,[g.value?(o(),a(ee,{key:1},[e("div",Pc,[e("button",{class:"section-header",onClick:p[0]||(p[0]=z=>K("position"))},[l(n(Ks),{class:"w-4 h-4"}),p[19]||(p[19]=e("span",null,"Position & Size",-1)),s.value.position?(o(),he(n(Et),{key:0,class:"w-4 h-4 ml-auto"})):(o(),he(n(Qe),{key:1,class:"w-4 h-4 ml-auto"}))]),s.value.position?(o(),a("div",Lc,[e("div",Mc,[e("div",Oc,[p[20]||(p[20]=e("label",{class:"input-label"},"X",-1)),e("input",{type:"number",class:"input-field",value:I.element?.x?.toFixed(1),step:"0.1",min:"0",max:"100",onInput:p[1]||(p[1]=z=>E("x",parseFloat(z.target.value)))},null,40,Rc),p[21]||(p[21]=e("span",{class:"input-unit"},"%",-1))]),e("div",Hc,[p[22]||(p[22]=e("label",{class:"input-label"},"Y",-1)),e("input",{type:"number",class:"input-field",value:I.element?.y?.toFixed(1),step:"0.1",min:"0",max:"100",onInput:p[2]||(p[2]=z=>E("y",parseFloat(z.target.value)))},null,40,Wc),p[23]||(p[23]=e("span",{class:"input-unit"},"%",-1))])]),e("div",Nc,[e("div",Uc,[p[24]||(p[24]=e("label",{class:"input-label"},"Width",-1)),e("input",{type:"number",class:"input-field",value:I.element?.width?.toFixed(1),step:"0.1",min:"1",max:"100",onInput:p[3]||(p[3]=z=>S("width",parseFloat(z.target.value)))},null,40,Gc),p[25]||(p[25]=e("span",{class:"input-unit"},"%",-1))]),e("div",Vc,[p[26]||(p[26]=e("label",{class:"input-label"},"Height",-1)),e("input",{type:"number",class:"input-field",value:I.element?.height?.toFixed(1),step:"0.1",min:"1",max:"100",onInput:p[4]||(p[4]=z=>S("height",parseFloat(z.target.value)))},null,40,qc),p[27]||(p[27]=e("span",{class:"input-unit"},"%",-1))])]),e("div",Xc,[e("div",Yc,[e("label",Kc,[l(n(Qs),{class:"w-3 h-3"}),p[28]||(p[28]=ne(" Rotation ",-1))]),e("input",{type:"number",class:"input-field",value:I.element?.rotation?.toFixed(0),step:"1",min:"0",max:"360",onInput:p[5]||(p[5]=z=>u(parseFloat(z.target.value)))},null,40,Qc),p[29]||(p[29]=e("span",{class:"input-unit"},"deg",-1))])])])):V("",!0)]),e("div",Jc,[e("button",{class:"section-header",onClick:p[6]||(p[6]=z=>K("appearance"))},[l(n(Qn),{class:"w-4 h-4"}),p[30]||(p[30]=e("span",null,"Appearance",-1)),s.value.appearance?(o(),he(n(Et),{key:0,class:"w-4 h-4 ml-auto"})):(o(),he(n(Qe),{key:1,class:"w-4 h-4 ml-auto"}))]),s.value.appearance?(o(),a("div",Zc,[e("div",eu,[p[31]||(p[31]=e("label",{class:"input-label"},"Opacity",-1)),e("input",{type:"range",class:"w-full",value:I.element?.opacity??1,min:"0",max:"1",step:"0.05",onInput:p[7]||(p[7]=z=>F(parseFloat(z.target.value)))},null,40,tu),e("span",nu,T(((I.element?.opacity??1)*100).toFixed(0))+"%",1)]),w.value?(o(),a("div",su,[p[32]||(p[32]=e("label",{class:"input-label"},"Fill Color",-1)),l(Xt,{"model-value":I.element?.fill||"#E5E7EB","show-opacity":"","onUpdate:modelValue":R},null,8,["model-value"])])):V("",!0),w.value?(o(),a("div",ou,[p[33]||(p[33]=e("label",{class:"input-label"},"Border Color",-1)),l(Xt,{"model-value":I.element?.stroke||"#9CA3AF","onUpdate:modelValue":C},null,8,["model-value"])])):V("",!0),w.value?(o(),a("div",lu,[p[34]||(p[34]=e("label",{class:"input-label"},"Border Width",-1)),e("input",{type:"number",class:"input-field",value:I.element?.strokeWidth??1,min:"0",max:"20",step:"1",onInput:p[8]||(p[8]=z=>M(parseInt(z.target.value)))},null,40,iu),p[35]||(p[35]=e("span",{class:"input-unit"},"px",-1))])):V("",!0)])):V("",!0)]),v.value&&I.element?.text?(o(),a("div",au,[e("button",{class:"section-header",onClick:p[9]||(p[9]=z=>K("text"))},[l(n(kn),{class:"w-4 h-4"}),p[36]||(p[36]=e("span",null,"Text",-1)),s.value.text?(o(),he(n(Et),{key:0,class:"w-4 h-4 ml-auto"})):(o(),he(n(Qe),{key:1,class:"w-4 h-4 ml-auto"}))]),s.value.text?(o(),a("div",ru,[e("div",du,[p[37]||(p[37]=e("label",{class:"input-label"},"Font",-1)),l(ls,{"model-value":I.element.text.fontFamily,"onUpdate:modelValue":p[10]||(p[10]=z=>W("fontFamily",z))},null,8,["model-value"])]),e("div",cu,[p[38]||(p[38]=e("label",{class:"input-label"},"Size",-1)),e("select",{class:"input-field",value:I.element.text.fontSize,onChange:p[11]||(p[11]=z=>W("fontSize",parseInt(z.target.value)))},[(o(),a(ee,null,le(d,z=>e("option",{key:z,value:z},T(z)+"px ",9,pu)),64))],40,uu)]),e("div",fu,[p[39]||(p[39]=e("label",{class:"input-label"},"Color",-1)),l(Xt,{"model-value":I.element.text.color,"onUpdate:modelValue":p[12]||(p[12]=z=>W("color",z))},null,8,["model-value"])]),e("div",gu,[p[40]||(p[40]=e("label",{class:"input-label"},"Alignment",-1)),e("div",vu,[(o(),a(ee,null,le(c,z=>e("button",{key:z.value,class:de(["flex-1 px-2 py-1 text-xs rounded border",{"bg-indigo-100 border-indigo-500 text-indigo-700":I.element.text.textAlign===z.value,"bg-white dark:bg-zinc-800 border-zinc-300 dark:border-zinc-600":I.element.text.textAlign!==z.value}]),onClick:H=>W("textAlign",z.value)},T(z.label),11,hu)),64))])]),e("div",mu,[p[41]||(p[41]=e("label",{class:"input-label"},"Style",-1)),e("div",xu,[e("button",{class:de(["flex-1 px-2 py-1 text-xs rounded border font-bold",{"bg-indigo-100 border-indigo-500 text-indigo-700":I.element.text.fontWeight==="bold","bg-white dark:bg-zinc-800 border-zinc-300 dark:border-zinc-600":I.element.text.fontWeight!=="bold"}]),onClick:p[13]||(p[13]=z=>W("fontWeight",I.element.text.fontWeight==="bold"?"normal":"bold"))}," B ",2),e("button",{class:de(["flex-1 px-2 py-1 text-xs rounded border italic",{"bg-indigo-100 border-indigo-500 text-indigo-700":I.element.text.fontStyle==="italic","bg-white dark:bg-zinc-800 border-zinc-300 dark:border-zinc-600":I.element.text.fontStyle!=="italic"}]),onClick:p[14]||(p[14]=z=>W("fontStyle",I.element.text.fontStyle==="italic"?"normal":"italic"))}," I ",2)])]),e("div",bu,[p[42]||(p[42]=e("label",{class:"input-label"},"Line Height",-1)),e("input",{type:"number",class:"input-field",value:I.element.text.lineHeight,min:"0.5",max:"3",step:"0.1",onInput:p[15]||(p[15]=z=>W("lineHeight",parseFloat(z.target.value)))},null,40,yu)])])):V("",!0)])):V("",!0),e("div",wu,[e("button",{class:"section-header",onClick:p[16]||(p[16]=z=>K("notes"))},[l(n(Jn),{class:"w-4 h-4"}),p[43]||(p[43]=e("span",null,"Speaker Notes",-1)),s.value.notes?(o(),he(n(Et),{key:0,class:"w-4 h-4 ml-auto"})):(o(),he(n(Qe),{key:1,class:"w-4 h-4 ml-auto"}))]),s.value.notes?(o(),a("div",ku,[e("textarea",{class:"w-full h-32 px-2 py-1.5 text-sm border border-zinc-300 dark:border-zinc-600 rounded bg-white dark:bg-zinc-800 resize-none",placeholder:"Add speaker notes for this slide...",value:I.speakerNotes||"",onInput:p[17]||(p[17]=z=>r("update:speakerNotes",z.target.value))},null,40,_u)])):V("",!0)])],64)):(o(),a("div",jc,[...p[18]||(p[18]=[e("p",{class:"text-sm"},"Select an element to edit its properties",-1)])]))]))}}),$u=lt(Su,[["__scopeId","data-v-e0842a7b"]]);function zu(P){const{canvasInstance:h,elementsInstance:t,slide:r,onSelectionChange:s}=P,d=A([]),c=A(null);function g(){const se=h.canvas.value;if(!se)return[];const q=se.getActiveObject();if(!q)return[];if(q instanceof Ht)return q.getObjects().map(y=>y.elementId).filter(Boolean);const m=q.elementId;return m?[m]:[]}function v(){d.value=g(),s?.(d.value)}function w(se){const q=h.canvas.value;if(!q)return;if(q.discardActiveObject(),se.length===0){d.value=[],q.renderAll(),s?.([]);return}const m=se.map(y=>t.getFabricObject(y)).filter(y=>y!==void 0);if(m.length!==0){if(m.length===1)q.setActiveObject(m[0]);else{const y=new Ht(m,{canvas:q});q.setActiveObject(y)}d.value=se,q.renderAll(),s?.(se)}}function E(se){const q=[...d.value];q.includes(se)||(q.push(se),w(q))}function S(se){const q=d.value.filter(m=>m!==se);w(q)}function u(se){d.value.includes(se)?S(se):E(se)}function F(){if(!r.value)return;const se=r.value.elements.map(q=>q.id);w(se)}function R(){w([])}const C=U(()=>r.value?r.value.elements.filter(se=>d.value.includes(se.id)):[]);function M(){C.value.length!==0&&(c.value=C.value.map(se=>({...JSON.parse(JSON.stringify(se))})))}function W(){M(),d.value.forEach(se=>t.removeElement(se)),R()}function K(){if(!c.value||c.value.length===0)return[];const se=[],q=2;return c.value.forEach(m=>{const y={...JSON.parse(JSON.stringify(m)),id:Ne(),x:m.x+q,y:m.y+q,zIndex:t.getNextZIndex()};t.addElement(y),se.push(y)}),w(se.map(m=>m.id)),se}function I(){return M(),K()}function p(){if(d.value.length<2)return null;const se=Ne();return d.value.forEach(q=>{t.updateElement(q,{groupId:se})}),se}function z(se){r.value&&r.value.elements.filter(q=>q.groupId===se).forEach(q=>{t.updateElement(q.id,{groupId:void 0})})}function H(se){if(C.value.length<2)return;const q=C.value;let m;switch(se){case"left":m=Math.min(...q.map(L=>L.x));break;case"center":const y=Math.min(...q.map(L=>L.x)),N=Math.max(...q.map(L=>L.x+L.width)),O=(y+N)/2;q.forEach(L=>{t.updateElement(L.id,{x:O-L.width/2})});return;case"right":const J=Math.max(...q.map(L=>L.x+L.width));q.forEach(L=>{t.updateElement(L.id,{x:J-L.width})});return}q.forEach(y=>{t.updateElement(y.id,{x:m})})}function G(se){if(C.value.length<2)return;const q=C.value;switch(se){case"top":const m=Math.min(...q.map(L=>L.y));q.forEach(L=>{t.updateElement(L.id,{y:m})});break;case"middle":const y=Math.min(...q.map(L=>L.y)),N=Math.max(...q.map(L=>L.y+L.height)),O=(y+N)/2;q.forEach(L=>{t.updateElement(L.id,{y:O-L.height/2})});break;case"bottom":const J=Math.max(...q.map(L=>L.y+L.height));q.forEach(L=>{t.updateElement(L.id,{y:J-L.height})});break}}function Q(se){if(C.value.length<3)return;const q=[...C.value];if(se==="horizontal"){q.sort((te,ue)=>te.x-ue.x);const m=q[0],y=q[q.length-1],N=y.x+y.width-m.x,O=q.reduce((te,ue)=>te+ue.width,0),J=(N-O)/(q.length-1);let L=m.x;q.forEach((te,ue)=>{ue>0&&t.updateElement(te.id,{x:L}),L+=te.width+J})}else{q.sort((te,ue)=>te.y-ue.y);const m=q[0],y=q[q.length-1],N=y.y+y.height-m.y,O=q.reduce((te,ue)=>te+ue.height,0),J=(N-O)/(q.length-1);let L=m.y;q.forEach((te,ue)=>{ue>0&&t.updateElement(te.id,{y:L}),L+=te.height+J})}}function Y(){d.value.forEach(se=>{t.updateElement(se,{locked:!0})})}function ke(){d.value.forEach(se=>{t.updateElement(se,{locked:!1})})}function Re(){C.value.some(q=>q.locked)?ke():Y()}const Ce=U(()=>d.value.length>0),Ae=U(()=>d.value.length>1),Le=U(()=>c.value!==null&&c.value.length>0),Be=U(()=>d.value.length>=2),He=U(()=>C.value.some(se=>se.groupId!==void 0)),fe=U(()=>d.value.length>=2),ye=U(()=>d.value.length>=3);return h.on("selection:created",v),h.on("selection:updated",v),h.on("selection:cleared",v),{selectedIds:d,selectedElements:C,clipboard:c,hasSelection:Ce,hasMultipleSelection:Ae,hasClipboard:Le,canGroup:Be,canUngroup:He,canAlign:fe,canDistribute:ye,selectElements:w,addToSelection:E,removeFromSelection:S,toggleSelection:u,selectAll:F,deselectAll:R,syncSelectionFromCanvas:v,copy:M,cut:W,paste:K,duplicate:I,groupElements:p,ungroupElements:z,alignHorizontal:H,alignVertical:G,distribute:Q,lockSelected:Y,unlockSelected:ke,toggleLock:Re}}function Cu(P){const{slides:h,activeSlideIndex:t,maxSize:r=50,debounceMs:s=500,onRestore:d}=P,c=A([]),g=A([]),v=A(!1),w=A(0);function E(){return{slides:JSON.parse(JSON.stringify(h.value)),activeSlideIndex:t.value,timestamp:Date.now()}}function S(H=!1){if(v.value)return;const G=Date.now();if(!H&&G-w.value<s)return;const Q=E();if(c.value.length>0){const Y=c.value[c.value.length-1];if(JSON.stringify(Y.slides)===JSON.stringify(Q.slides))return}c.value.push(Q),c.value.length>r&&c.value.shift(),g.value=[],w.value=G}function u(){if(!K.value)return!1;v.value=!0;try{g.value.unshift(E());const H=c.value.pop();return h.value=JSON.parse(JSON.stringify(H.slides)),t.value=H.activeSlideIndex,d?.(H),!0}finally{v.value=!1}}function F(){if(!I.value)return!1;v.value=!0;try{c.value.push(E());const H=g.value.shift();return h.value=JSON.parse(JSON.stringify(H.slides)),t.value=H.activeSlideIndex,d?.(H),!0}finally{v.value=!1}}function R(){c.value=[],g.value=[],w.value=0}function C(){R(),S(!0)}function M(){return E()}function W(H){v.value=!0;try{c.value.push(E()),g.value=[],h.value=JSON.parse(JSON.stringify(H.slides)),t.value=H.activeSlideIndex,d?.(H)}finally{v.value=!1}}const K=U(()=>c.value.length>0),I=U(()=>g.value.length>0),p=U(()=>c.value.length),z=U(()=>g.value.length);return h.value.length>0&&S(!0),{past:c,future:g,isRestoring:v,canUndo:K,canRedo:I,historyLength:p,futureLength:z,pushState:S,undo:u,redo:F,clearHistory:R,resetHistory:C,getCurrentState:M,restoreState:W}}function Fu(P,h=500){let t=null;return()=>{t&&clearTimeout(t),t=setTimeout(()=>{P.pushState(),t=null},h)}}function is(P={}){const{slides:h,onThemeChange:t}=P,r=A([]),s=A("modern"),d=A(!1),c=A(null);async function g(){if(!(r.value.length>0)){d.value=!0,c.value=null;try{const p=await fetch("/themes/themes.json");if(!p.ok)throw new Error(`Failed to load themes: ${p.statusText}`);const z=await p.json();r.value=z.themes,s.value=z.defaultThemeId}catch(p){c.value=p instanceof Error?p.message:"Failed to load themes",console.error("Error loading themes:",p),r.value=[v()]}finally{d.value=!1}}}function v(){return{id:"default",name:"Default",description:"Default theme",colors:{primary:"#3B82F6",secondary:"#6366F1",accent:"#10B981",background:"#FFFFFF",surface:"#F3F4F6",text:"#111827",textSecondary:"#6B7280",textInverse:"#FFFFFF"},fonts:{heading:{family:"Arial",weight:700,sizes:{title:44,h1:36,h2:28,h3:22}},body:{family:"Arial",weight:400,sizes:{large:18,normal:16,small:14}}},elements:{titleSlide:{titleColor:"#111827",subtitleColor:"#6B7280",backgroundColor:"#FFFFFF"},contentSlide:{headingColor:"#111827",bodyColor:"#374151",backgroundColor:"#FFFFFF"},shapes:{defaultFill:"#E5E7EB",defaultStroke:"#9CA3AF",accentFill:"#3B82F6"},charts:{colors:["#3B82F6","#6366F1","#8B5CF6","#EC4899","#10B981","#F59E0B"]}}}}const w=U(()=>r.value.find(p=>p.id===s.value)||r.value[0]||null);function E(p){const z=r.value.find(H=>H.id===p);z&&(s.value=p,t?.(z))}function S(p,z,H={}){const{preserveCustomizations:G=!0}=H,Q={...p,themeId:z.id,backgroundColor:z.elements.contentSlide.backgroundColor};return Q.elements=p.elements.map(Y=>G&&Y.isThemeOverridden?Y:u(Y,z)),Q}function u(p,z){const H={...p};switch(p.type){case"text":if(H.text){const G=(H.text.fontSize||18)>=24;H.text={...H.text,fontFamily:G?z.fonts.heading.family:z.fonts.body.family,color:G?z.elements.contentSlide.headingColor||z.colors.primary:z.elements.contentSlide.bodyColor||z.colors.text}}break;case"shape":H.fill=z.elements.shapes.defaultFill,H.stroke=z.elements.shapes.defaultStroke;break;case"chart":H.chart&&(H.chart={...H.chart,datasets:H.chart.datasets.map((G,Q)=>({...G,backgroundColor:z.elements.charts.colors[Q%z.elements.charts.colors.length],borderColor:z.elements.charts.colors[Q%z.elements.charts.colors.length]}))});break;case"table":H.table&&(H.table={...H.table,headerBackground:z.colors.surface,headerColor:z.colors.text});break}return H}function F(p,z,H={}){const G=r.value.find(Q=>Q.id===z);return G?p.map(Q=>S(Q,G,H)):p}function R(p={}){!h?.value||!w.value||(h.value=F(h.value,s.value,p))}function C(){return w.value?.colors||null}function M(){return w.value?.fonts||null}function W(p,z="body"){const H=w.value;if(!H)return{type:"text",text:{content:p,fontFamily:"Arial",fontSize:18,fontWeight:"normal",fontStyle:"normal",textAlign:"left",color:"#111827",lineHeight:1.4,letterSpacing:0}};const G=z==="body"?H.fonts.body:H.fonts.heading,Q=z==="title"?G.sizes.title||44:z==="heading"?G.sizes.h1||36:G.sizes.normal||16,Y=z==="body"?H.elements.contentSlide.bodyColor||H.colors.text:H.elements.contentSlide.headingColor||H.colors.primary;return{type:"text",text:{content:p,fontFamily:G.family,fontSize:Q,fontWeight:z==="body"?"normal":"bold",fontStyle:"normal",textAlign:z==="title"?"center":"left",color:Y,lineHeight:1.4,letterSpacing:0}}}function K(p="rectangle",z=!1){const H=w.value;return H?{type:"shape",fill:z?H.elements.shapes.accentFill:H.elements.shapes.defaultFill,stroke:H.elements.shapes.defaultStroke,shape:{shapeType:p,cornerRadius:p==="rounded-rectangle"?10:0}}:{type:"shape",fill:"#E5E7EB",stroke:"#9CA3AF",shape:{shapeType:p}}}function I(){return w.value?.elements.charts.colors||["#3B82F6","#6366F1","#8B5CF6","#EC4899","#10B981","#F59E0B"]}return{themes:r,currentThemeId:s,currentTheme:w,isLoading:d,error:c,loadThemes:g,setTheme:E,applyThemeToSlide:S,applyThemeToElement:u,applyThemeToAllSlides:F,applyCurrentTheme:R,getThemeColors:C,getThemeFonts:M,getChartColors:I,createThemedTextElement:W,createThemedShapeElement:K,getDefaultTheme:v}}const Iu={type:"fade",duration:300};function as(P){const{slides:h,initialSlideIndex:t=0,defaultTransition:r=Iu}=P,s=A(t),d=A(!1),c=A(!1),g=A(!0),v=A({...r}),w=A("forward"),E=A(0);let S=null;const u=U(()=>h.value[s.value]||null),F=U(()=>{const fe=s.value+1;return h.value[fe]||null}),R=U(()=>{const fe=s.value-1;return h.value[fe]||null}),C=U(()=>h.value.length),M=U(()=>C.value===0?0:(s.value+1)/C.value*100),W=U(()=>s.value<C.value-1),K=U(()=>s.value>0),I=U(()=>{const fe=Math.floor(E.value/1e3),ye=Math.floor(fe/3600),se=Math.floor(fe%3600/60),q=fe%60;return ye>0?`${ye}:${se.toString().padStart(2,"0")}:${q.toString().padStart(2,"0")}`:`${se}:${q.toString().padStart(2,"0")}`});function p(fe){fe!==void 0&&(s.value=Math.max(0,Math.min(fe,C.value-1))),d.value=!0,Ce()}function z(){d.value=!1,c.value=!1,Ae()}function H(){c.value=!c.value}function G(fe){const ye=Math.max(0,Math.min(fe,C.value-1));w.value=ye>s.value?"forward":"backward",s.value=ye}function Q(){W.value&&(w.value="forward",s.value++)}function Y(){K.value&&(w.value="backward",s.value--)}function ke(){w.value="backward",s.value=0}function Re(){w.value="forward",s.value=C.value-1}function Ce(){S||(g.value=!1,S=setInterval(()=>{E.value+=1e3},1e3))}function Ae(){S&&(clearInterval(S),S=null),g.value=!0}function Le(){Ae(),E.value=0}function Be(fe){v.value={...v.value,...fe}}function He(){const fe=v.value.type,ye=w.value;switch(fe){case"fade":return{enter:"transition-fade-enter",leave:"transition-fade-leave"};case"slide-left":case"slide-right":return{enter:ye==="forward"?"transition-slide-enter-right":"transition-slide-enter-left",leave:ye==="forward"?"transition-slide-leave-left":"transition-slide-leave-right"};case"slide-up":return{enter:"transition-slide-enter-up",leave:"transition-slide-leave-down"};case"zoom":return{enter:ye==="forward"?"transition-zoom-enter":"transition-zoom-enter-reverse",leave:ye==="forward"?"transition-zoom-leave":"transition-zoom-leave-reverse"};case"flip":return{enter:"transition-flip-enter",leave:"transition-flip-leave"};case"none":default:return{enter:"",leave:""}}}return Wt(()=>{S&&clearInterval(S)}),{currentSlideIndex:s,isPresenting:d,isPresenterView:c,isPaused:g,transition:v,transitionDirection:w,elapsedTime:E,formattedTime:I,currentSlide:u,nextSlide:F,previousSlide:R,totalSlides:C,progress:M,canGoNext:W,canGoPrevious:K,startPresentation:p,stopPresentation:z,togglePresenterView:H,goToSlide:G,nextSlideNav:Q,previousSlideNav:Y,firstSlide:ke,lastSlide:Re,startTimer:Ce,pauseTimer:Ae,resetTimer:Le,setTransition:Be,getTransitionClasses:He}}const Tu=`
/* Fade transition */
.transition-fade-enter {
  animation: fadeIn var(--transition-duration, 300ms) ease-out;
}
.transition-fade-leave {
  animation: fadeOut var(--transition-duration, 300ms) ease-in;
}

@keyframes fadeIn {
  from { opacity: 0; }
  to { opacity: 1; }
}
@keyframes fadeOut {
  from { opacity: 1; }
  to { opacity: 0; }
}

/* Slide transitions */
.transition-slide-enter-right {
  animation: slideInRight var(--transition-duration, 300ms) ease-out;
}
.transition-slide-enter-left {
  animation: slideInLeft var(--transition-duration, 300ms) ease-out;
}
.transition-slide-leave-left {
  animation: slideOutLeft var(--transition-duration, 300ms) ease-in;
}
.transition-slide-leave-right {
  animation: slideOutRight var(--transition-duration, 300ms) ease-in;
}
.transition-slide-enter-up {
  animation: slideInUp var(--transition-duration, 300ms) ease-out;
}
.transition-slide-leave-down {
  animation: slideOutDown var(--transition-duration, 300ms) ease-in;
}

@keyframes slideInRight {
  from { transform: translateX(100%); opacity: 0; }
  to { transform: translateX(0); opacity: 1; }
}
@keyframes slideInLeft {
  from { transform: translateX(-100%); opacity: 0; }
  to { transform: translateX(0); opacity: 1; }
}
@keyframes slideOutLeft {
  from { transform: translateX(0); opacity: 1; }
  to { transform: translateX(-100%); opacity: 0; }
}
@keyframes slideOutRight {
  from { transform: translateX(0); opacity: 1; }
  to { transform: translateX(100%); opacity: 0; }
}
@keyframes slideInUp {
  from { transform: translateY(100%); opacity: 0; }
  to { transform: translateY(0); opacity: 1; }
}
@keyframes slideOutDown {
  from { transform: translateY(0); opacity: 1; }
  to { transform: translateY(100%); opacity: 0; }
}

/* Zoom transition */
.transition-zoom-enter {
  animation: zoomIn var(--transition-duration, 300ms) ease-out;
}
.transition-zoom-leave {
  animation: zoomOut var(--transition-duration, 300ms) ease-in;
}
.transition-zoom-enter-reverse {
  animation: zoomInReverse var(--transition-duration, 300ms) ease-out;
}
.transition-zoom-leave-reverse {
  animation: zoomOutReverse var(--transition-duration, 300ms) ease-in;
}

@keyframes zoomIn {
  from { transform: scale(0.8); opacity: 0; }
  to { transform: scale(1); opacity: 1; }
}
@keyframes zoomOut {
  from { transform: scale(1); opacity: 1; }
  to { transform: scale(1.2); opacity: 0; }
}
@keyframes zoomInReverse {
  from { transform: scale(1.2); opacity: 0; }
  to { transform: scale(1); opacity: 1; }
}
@keyframes zoomOutReverse {
  from { transform: scale(1); opacity: 1; }
  to { transform: scale(0.8); opacity: 0; }
}

/* Flip transition */
.transition-flip-enter {
  animation: flipIn var(--transition-duration, 300ms) ease-out;
}
.transition-flip-leave {
  animation: flipOut var(--transition-duration, 300ms) ease-in;
}

@keyframes flipIn {
  from { transform: rotateY(-90deg); opacity: 0; }
  to { transform: rotateY(0); opacity: 1; }
}
@keyframes flipOut {
  from { transform: rotateY(0); opacity: 1; }
  to { transform: rotateY(90deg); opacity: 0; }
}
`;function Un(P){const h=window.crypto||window.msCrypto,t=()=>h.randomUUID();return{id:t(),title:P.name,elements:P.elements.map(r=>({...r,id:t()})),backgroundColor:P.backgroundColor||"#FFFFFF",backgroundImage:P.backgroundImage}}const Eu={id:"title-centered",name:"Title Slide",description:"Centered title with subtitle",category:"title",backgroundColor:"#1E1B4B",elements:[{type:"text",x:10,y:35,width:80,height:15,text:{content:"Presentation Title",fontFamily:"Inter",fontSize:48,fontWeight:"bold",fontStyle:"normal",textAlign:"center",color:"#FFFFFF",lineHeight:1.2,letterSpacing:-.5}},{type:"text",x:15,y:52,width:70,height:8,text:{content:"Subtitle or Author Name",fontFamily:"Inter",fontSize:24,fontWeight:"normal",fontStyle:"normal",textAlign:"center",color:"#A5B4FC",lineHeight:1.4,letterSpacing:0}},{type:"shape",x:35,y:48,width:30,height:.5,shapeType:"rectangle",fill:"#6366F1",stroke:"transparent",strokeWidth:0}]},Au={id:"title-with-image",name:"Title with Image",description:"Title slide with background image area",category:"title",backgroundColor:"#0F172A",elements:[{type:"shape",x:50,y:0,width:50,height:100,shapeType:"rectangle",fill:"#1E293B",stroke:"transparent",strokeWidth:0},{type:"text",x:5,y:30,width:42,height:20,text:{content:"Your Title Here",fontFamily:"Inter",fontSize:42,fontWeight:"bold",fontStyle:"normal",textAlign:"left",color:"#FFFFFF",lineHeight:1.2,letterSpacing:-.5}},{type:"text",x:5,y:52,width:42,height:10,text:{content:"Supporting description text goes here",fontFamily:"Inter",fontSize:18,fontWeight:"normal",fontStyle:"normal",textAlign:"left",color:"#94A3B8",lineHeight:1.5,letterSpacing:0}}]},Bu={id:"bullet-points",name:"Bullet Points",description:"Title with bullet list",category:"content",backgroundColor:"#FFFFFF",elements:[{type:"text",x:5,y:8,width:90,height:12,text:{content:"Section Title",fontFamily:"Inter",fontSize:36,fontWeight:"bold",fontStyle:"normal",textAlign:"left",color:"#1E293B",lineHeight:1.2,letterSpacing:-.3}},{type:"text",x:5,y:25,width:90,height:60,text:{content:`• First key point about your topic

• Second important insight or finding

• Third supporting argument

• Fourth conclusion or recommendation`,fontFamily:"Inter",fontSize:22,fontWeight:"normal",fontStyle:"normal",textAlign:"left",color:"#334155",lineHeight:1.6,letterSpacing:0}}]},Du={id:"content-with-image",name:"Content + Image",description:"Text content with image on right",category:"content",backgroundColor:"#FFFFFF",elements:[{type:"text",x:5,y:8,width:50,height:10,text:{content:"Section Title",fontFamily:"Inter",fontSize:32,fontWeight:"bold",fontStyle:"normal",textAlign:"left",color:"#1E293B",lineHeight:1.2,letterSpacing:-.3}},{type:"text",x:5,y:22,width:48,height:65,text:{content:`Add your detailed explanation here. This layout is perfect for when you need to combine textual content with a visual element.

• Supporting point one
• Supporting point two
• Supporting point three`,fontFamily:"Inter",fontSize:18,fontWeight:"normal",fontStyle:"normal",textAlign:"left",color:"#475569",lineHeight:1.6,letterSpacing:0}},{type:"shape",x:55,y:15,width:40,height:70,shapeType:"rectangle",fill:"#F1F5F9",stroke:"#E2E8F0",strokeWidth:1},{type:"text",x:55,y:45,width:40,height:10,text:{content:"Image Placeholder",fontFamily:"Inter",fontSize:14,fontWeight:"normal",fontStyle:"normal",textAlign:"center",color:"#94A3B8",lineHeight:1.4,letterSpacing:0}}]},ju={id:"two-column",name:"Two Columns",description:"Split content in two columns",category:"content",backgroundColor:"#FFFFFF",elements:[{type:"text",x:5,y:8,width:90,height:10,text:{content:"Two-Column Layout",fontFamily:"Inter",fontSize:32,fontWeight:"bold",fontStyle:"normal",textAlign:"left",color:"#1E293B",lineHeight:1.2,letterSpacing:-.3}},{type:"text",x:5,y:22,width:43,height:8,text:{content:"Left Column",fontFamily:"Inter",fontSize:20,fontWeight:"bold",fontStyle:"normal",textAlign:"left",color:"#6366F1",lineHeight:1.3,letterSpacing:0}},{type:"text",x:5,y:32,width:43,height:55,text:{content:`• Point one

• Point two

• Point three`,fontFamily:"Inter",fontSize:18,fontWeight:"normal",fontStyle:"normal",textAlign:"left",color:"#475569",lineHeight:1.5,letterSpacing:0}},{type:"text",x:52,y:22,width:43,height:8,text:{content:"Right Column",fontFamily:"Inter",fontSize:20,fontWeight:"bold",fontStyle:"normal",textAlign:"left",color:"#6366F1",lineHeight:1.3,letterSpacing:0}},{type:"text",x:52,y:32,width:43,height:55,text:{content:`• Point one

• Point two

• Point three`,fontFamily:"Inter",fontSize:18,fontWeight:"normal",fontStyle:"normal",textAlign:"left",color:"#475569",lineHeight:1.5,letterSpacing:0}}]},Pu={id:"comparison",name:"Comparison",description:"Side-by-side comparison",category:"comparison",backgroundColor:"#FFFFFF",elements:[{type:"text",x:5,y:8,width:90,height:10,text:{content:"Comparison",fontFamily:"Inter",fontSize:32,fontWeight:"bold",fontStyle:"normal",textAlign:"center",color:"#1E293B",lineHeight:1.2,letterSpacing:-.3}},{type:"shape",x:5,y:22,width:43,height:70,shapeType:"rectangle",fill:"#DCFCE7",stroke:"#22C55E",strokeWidth:2,cornerRadius:8},{type:"text",x:7,y:25,width:39,height:8,text:{content:"Option A",fontFamily:"Inter",fontSize:22,fontWeight:"bold",fontStyle:"normal",textAlign:"center",color:"#166534",lineHeight:1.3,letterSpacing:0}},{type:"text",x:7,y:36,width:39,height:50,text:{content:`• Advantage 1
• Advantage 2
• Advantage 3`,fontFamily:"Inter",fontSize:16,fontWeight:"normal",fontStyle:"normal",textAlign:"left",color:"#15803D",lineHeight:1.8,letterSpacing:0}},{type:"shape",x:52,y:22,width:43,height:70,shapeType:"rectangle",fill:"#FEE2E2",stroke:"#EF4444",strokeWidth:2,cornerRadius:8},{type:"text",x:54,y:25,width:39,height:8,text:{content:"Option B",fontFamily:"Inter",fontSize:22,fontWeight:"bold",fontStyle:"normal",textAlign:"center",color:"#991B1B",lineHeight:1.3,letterSpacing:0}},{type:"text",x:54,y:36,width:39,height:50,text:{content:`• Disadvantage 1
• Disadvantage 2
• Disadvantage 3`,fontFamily:"Inter",fontSize:16,fontWeight:"normal",fontStyle:"normal",textAlign:"left",color:"#B91C1C",lineHeight:1.8,letterSpacing:0}}]},Lu={id:"pros-cons",name:"Pros & Cons",description:"Advantages vs disadvantages",category:"comparison",backgroundColor:"#F8FAFC",elements:[{type:"text",x:5,y:8,width:90,height:10,text:{content:"Pros & Cons Analysis",fontFamily:"Inter",fontSize:32,fontWeight:"bold",fontStyle:"normal",textAlign:"center",color:"#1E293B",lineHeight:1.2,letterSpacing:-.3}},{type:"text",x:5,y:22,width:43,height:8,text:{content:"✓ Pros",fontFamily:"Inter",fontSize:24,fontWeight:"bold",fontStyle:"normal",textAlign:"left",color:"#16A34A",lineHeight:1.3,letterSpacing:0}},{type:"text",x:5,y:33,width:43,height:55,text:{content:`• First advantage

• Second advantage

• Third advantage`,fontFamily:"Inter",fontSize:18,fontWeight:"normal",fontStyle:"normal",textAlign:"left",color:"#334155",lineHeight:1.5,letterSpacing:0}},{type:"text",x:52,y:22,width:43,height:8,text:{content:"✗ Cons",fontFamily:"Inter",fontSize:24,fontWeight:"bold",fontStyle:"normal",textAlign:"left",color:"#DC2626",lineHeight:1.3,letterSpacing:0}},{type:"text",x:52,y:33,width:43,height:55,text:{content:`• First disadvantage

• Second disadvantage

• Third disadvantage`,fontFamily:"Inter",fontSize:18,fontWeight:"normal",fontStyle:"normal",textAlign:"left",color:"#334155",lineHeight:1.5,letterSpacing:0}}]},Mu={id:"chart-placeholder",name:"Chart Slide",description:"Title with chart area",category:"data",backgroundColor:"#FFFFFF",elements:[{type:"text",x:5,y:5,width:90,height:10,text:{content:"Data Visualization",fontFamily:"Inter",fontSize:32,fontWeight:"bold",fontStyle:"normal",textAlign:"left",color:"#1E293B",lineHeight:1.2,letterSpacing:-.3}},{type:"chart",x:10,y:20,width:80,height:65,chart:{chartType:"bar",title:"",labels:["Q1","Q2","Q3","Q4"],datasets:[{label:"Series A",data:[65,78,90,81],backgroundColor:["#6366F1","#8B5CF6","#A855F7","#D946EF"]}],showLegend:!0,showGrid:!0}}]},Ou={id:"stats",name:"Key Statistics",description:"Highlight key numbers",category:"data",backgroundColor:"#0F172A",elements:[{type:"text",x:5,y:8,width:90,height:10,text:{content:"Key Findings",fontFamily:"Inter",fontSize:32,fontWeight:"bold",fontStyle:"normal",textAlign:"center",color:"#F8FAFC",lineHeight:1.2,letterSpacing:-.3}},{type:"text",x:5,y:30,width:28,height:15,text:{content:"85%",fontFamily:"Inter",fontSize:56,fontWeight:"bold",fontStyle:"normal",textAlign:"center",color:"#6366F1",lineHeight:1,letterSpacing:-1}},{type:"text",x:5,y:48,width:28,height:10,text:{content:"Success Rate",fontFamily:"Inter",fontSize:16,fontWeight:"normal",fontStyle:"normal",textAlign:"center",color:"#94A3B8",lineHeight:1.4,letterSpacing:0}},{type:"text",x:36,y:30,width:28,height:15,text:{content:"2.5x",fontFamily:"Inter",fontSize:56,fontWeight:"bold",fontStyle:"normal",textAlign:"center",color:"#22C55E",lineHeight:1,letterSpacing:-1}},{type:"text",x:36,y:48,width:28,height:10,text:{content:"Improvement",fontFamily:"Inter",fontSize:16,fontWeight:"normal",fontStyle:"normal",textAlign:"center",color:"#94A3B8",lineHeight:1.4,letterSpacing:0}},{type:"text",x:67,y:30,width:28,height:15,text:{content:"500+",fontFamily:"Inter",fontSize:56,fontWeight:"bold",fontStyle:"normal",textAlign:"center",color:"#F59E0B",lineHeight:1,letterSpacing:-1}},{type:"text",x:67,y:48,width:28,height:10,text:{content:"Participants",fontFamily:"Inter",fontSize:16,fontWeight:"normal",fontStyle:"normal",textAlign:"center",color:"#94A3B8",lineHeight:1.4,letterSpacing:0}}]},Ru={id:"table",name:"Table Layout",description:"Data table presentation",category:"data",backgroundColor:"#FFFFFF",elements:[{type:"text",x:5,y:5,width:90,height:10,text:{content:"Data Overview",fontFamily:"Inter",fontSize:32,fontWeight:"bold",fontStyle:"normal",textAlign:"left",color:"#1E293B",lineHeight:1.2,letterSpacing:-.3}},{type:"table",x:5,y:20,width:90,height:65,table:{title:"",columns:[{key:"category",label:"Category"},{key:"value1",label:"Value 1"},{key:"value2",label:"Value 2"},{key:"change",label:"Change"}],rows:[{category:"Item A",value1:"100",value2:"120",change:"+20%"},{category:"Item B",value1:"85",value2:"95",change:"+12%"},{category:"Item C",value1:"92",value2:"88",change:"-4%"},{category:"Item D",value1:"78",value2:"105",change:"+35%"}],headerBackground:"#F1F5F9",headerColor:"#1E293B",alternateRowColors:!0}}]},Hu={id:"thank-you",name:"Thank You",description:"Closing slide",category:"ending",backgroundColor:"#1E1B4B",elements:[{type:"text",x:10,y:35,width:80,height:15,text:{content:"Thank You",fontFamily:"Inter",fontSize:64,fontWeight:"bold",fontStyle:"normal",textAlign:"center",color:"#FFFFFF",lineHeight:1.1,letterSpacing:-1}},{type:"text",x:15,y:55,width:70,height:10,text:{content:"Questions & Discussion",fontFamily:"Inter",fontSize:24,fontWeight:"normal",fontStyle:"normal",textAlign:"center",color:"#A5B4FC",lineHeight:1.4,letterSpacing:0}}]},Wu={id:"questions",name:"Q&A Slide",description:"Questions and answers",category:"ending",backgroundColor:"#0F172A",elements:[{type:"shape",x:35,y:25,width:30,height:30,shapeType:"circle",fill:"#312E81",stroke:"#6366F1",strokeWidth:3},{type:"text",x:35,y:32,width:30,height:15,text:{content:"?",fontFamily:"Inter",fontSize:72,fontWeight:"bold",fontStyle:"normal",textAlign:"center",color:"#A5B4FC",lineHeight:1,letterSpacing:0}},{type:"text",x:10,y:65,width:80,height:10,text:{content:"Questions?",fontFamily:"Inter",fontSize:36,fontWeight:"bold",fontStyle:"normal",textAlign:"center",color:"#F8FAFC",lineHeight:1.2,letterSpacing:-.3}},{type:"text",x:15,y:78,width:70,height:8,text:{content:"I'm happy to answer any questions",fontFamily:"Inter",fontSize:18,fontWeight:"normal",fontStyle:"normal",textAlign:"center",color:"#64748B",lineHeight:1.4,letterSpacing:0}}]},Nu={id:"contact",name:"Contact Info",description:"Contact details slide",category:"ending",backgroundColor:"#FFFFFF",elements:[{type:"text",x:10,y:20,width:80,height:12,text:{content:"Get in Touch",fontFamily:"Inter",fontSize:40,fontWeight:"bold",fontStyle:"normal",textAlign:"center",color:"#1E293B",lineHeight:1.2,letterSpacing:-.5}},{type:"text",x:20,y:40,width:60,height:40,text:{content:`email@example.com

linkedin.com/in/yourname

yourwebsite.com`,fontFamily:"Inter",fontSize:20,fontWeight:"normal",fontStyle:"normal",textAlign:"center",color:"#6366F1",lineHeight:2,letterSpacing:0}}]};function Uu(){const P=A([Eu,Au,Bu,Du,ju,Pu,Lu,Mu,Ou,Ru,Hu,Wu,Nu]),h=U(()=>[{category:"title",label:"Title Slides",description:"Opening and section headers",templates:P.value.filter(c=>c.category==="title")},{category:"content",label:"Content",description:"Main content layouts",templates:P.value.filter(c=>c.category==="content")},{category:"comparison",label:"Comparison",description:"Compare options or data",templates:P.value.filter(c=>c.category==="comparison")},{category:"data",label:"Data & Charts",description:"Visualize data and statistics",templates:P.value.filter(c=>c.category==="data")},{category:"ending",label:"Ending",description:"Closing and Q&A slides",templates:P.value.filter(c=>c.category==="ending")}]);function t(c){return P.value.find(g=>g.id===c)}function r(c){return P.value.filter(g=>g.category===c)}function s(c){const g=t(c);return g?Un(g):null}function d(){return{id:(window.crypto||window.msCrypto).randomUUID(),title:"Blank Slide",elements:[],backgroundColor:"#FFFFFF"}}return{allTemplates:P,templateGroups:h,getTemplateById:t,getTemplatesByCategory:r,createSlideFromTemplate:s,createBlankSlide:d,instantiateTemplate:Un}}const Gu={class:"mb-3"},Vu={key:0,class:"flex items-center justify-center py-8"},qu={key:1,class:"grid grid-cols-2 gap-3"},Xu=["onMouseenter","onClick"],Yu={class:"w-full h-full p-2 flex flex-col"},Ku={class:"flex-1 space-y-1"},Qu={class:"flex justify-end mt-1"},Ju={class:"text-left"},Zu={class:"flex items-center gap-1"},ep={class:"text-sm font-medium"},tp={class:"text-xs text-muted-foreground line-clamp-1"},np={class:"flex gap-1 mt-2"},sp=["title"],op=["title"],lp=["title"],ip=["title"],ap={class:"mt-4 pt-4 border-t"},rp={class:"flex items-center gap-2 text-sm"},dp={class:"flex justify-end mt-3"},cp={key:2,class:"mt-3 pt-3 border-t text-xs text-muted-foreground"},up={class:"space-y-0.5"},pp=ze({__name:"ThemeSelector",props:{currentThemeId:{default:"modern"}},emits:["select","apply"],setup(P,{emit:h}){const t=P,r=h,s=A(!1),d=A(null),c=A(!0),g=is();yt(()=>{g.loadThemes()});const v=U(()=>g.themes.value),w=U(()=>g.isLoading.value);function E(F){r("select",F)}function S(F){r("apply",F,c.value),s.value=!1}function u(F){return{backgroundColor:F.colors.background,borderColor:F.colors.primary}}return(F,R)=>(o(),he(n($n),{open:s.value,"onUpdate:open":R[3]||(R[3]=C=>s.value=C)},{default:$(()=>[l(n(zn),{"as-child":""},{default:$(()=>[l(n(ae),{variant:"outline",size:"sm",class:"gap-2"},{default:$(()=>[l(n(Qn),{class:"w-4 h-4"}),R[4]||(R[4]=e("span",null,"Themes",-1))]),_:1})]),_:1}),l(n(Cn),{class:"w-96 p-4",align:"end"},{default:$(()=>[e("div",Gu,[l(n(Ft),{class:"text-sm font-medium"},{default:$(()=>[...R[5]||(R[5]=[ne("Choose a Theme",-1)])]),_:1}),R[6]||(R[6]=e("p",{class:"text-xs text-muted-foreground mt-1"}," Select a professional theme for your presentation ",-1))]),w.value?(o(),a("div",Vu,[l(n(Js),{class:"w-6 h-6 animate-spin text-muted-foreground"})])):(o(),a("div",qu,[(o(!0),a(ee,null,le(v.value,C=>(o(),a("button",{key:C.id,type:"button",class:de(["relative group rounded-lg border-2 p-2 transition-all hover:shadow-md focus:outline-none focus:ring-2 focus:ring-ring",{"border-primary ring-2 ring-primary/20":t.currentThemeId===C.id,"border-gray-200 hover:border-gray-300":t.currentThemeId!==C.id}]),onMouseenter:M=>d.value=C.id,onMouseleave:R[0]||(R[0]=M=>d.value=null),onClick:M=>E(C.id)},[e("div",{class:"aspect-video rounded overflow-hidden mb-2",style:ce(u(C))},[e("div",Yu,[e("div",{class:"h-1.5 w-2/3 rounded mb-1",style:ce({backgroundColor:C.colors.primary})},null,4),e("div",{class:"h-1 w-1/2 rounded mb-2",style:ce({backgroundColor:C.colors.textSecondary})},null,4),e("div",Ku,[e("div",{class:"h-0.5 w-full rounded",style:ce({backgroundColor:C.colors.text+"40"})},null,4),e("div",{class:"h-0.5 w-4/5 rounded",style:ce({backgroundColor:C.colors.text+"40"})},null,4),e("div",{class:"h-0.5 w-3/4 rounded",style:ce({backgroundColor:C.colors.text+"40"})},null,4)]),e("div",Qu,[e("div",{class:"w-3 h-3 rounded-sm",style:ce({backgroundColor:C.colors.accent})},null,4)])])],4),e("div",Ju,[e("div",Zu,[e("span",ep,T(C.name),1),t.currentThemeId===C.id?(o(),he(n(mn),{key:0,class:"w-3.5 h-3.5 text-primary"})):V("",!0)]),e("p",tp,T(C.description),1)]),e("div",np,[e("span",{class:"w-4 h-4 rounded-full border border-white shadow-sm",style:ce({backgroundColor:C.colors.primary}),title:"Primary: "+C.colors.primary},null,12,sp),e("span",{class:"w-4 h-4 rounded-full border border-white shadow-sm",style:ce({backgroundColor:C.colors.secondary}),title:"Secondary: "+C.colors.secondary},null,12,op),e("span",{class:"w-4 h-4 rounded-full border border-white shadow-sm",style:ce({backgroundColor:C.colors.accent}),title:"Accent: "+C.colors.accent},null,12,lp),e("span",{class:"w-4 h-4 rounded-full border border-gray-200 shadow-sm",style:ce({backgroundColor:C.colors.background}),title:"Background: "+C.colors.background},null,12,ip)])],42,Xu))),128))])),e("div",ap,[e("label",rp,[ct(e("input",{type:"checkbox","onUpdate:modelValue":R[1]||(R[1]=C=>c.value=C),class:"rounded border-gray-300 text-primary focus:ring-primary"},null,512),[[Zs,c.value]]),R[7]||(R[7]=e("span",null,"Apply to all slides",-1))]),e("div",dp,[l(n(ae),{size:"sm",disabled:!t.currentThemeId,onClick:R[2]||(R[2]=C=>S(t.currentThemeId))},{default:$(()=>[...R[8]||(R[8]=[ne(" Apply Theme ",-1)])]),_:1},8,["disabled"])])]),d.value&&v.value.find(C=>C.id===d.value)?(o(),a("div",cp,[R[9]||(R[9]=e("div",{class:"flex items-center justify-between mb-1"},[e("span",{class:"font-medium"},"Fonts")],-1)),e("div",up,[e("div",null," Headings: "+T(v.value.find(C=>C.id===d.value)?.fonts.heading.family),1),e("div",null," Body: "+T(v.value.find(C=>C.id===d.value)?.fonts.body.family),1)])])):V("",!0)]),_:1})]),_:1},8,["open"]))}}),fp={class:"relative w-full h-full"},gp=["src"],vp={key:0,class:"controls-overlay"},hp={class:"absolute top-0 left-0 right-0 p-4 flex items-center justify-between bg-gradient-to-b from-black/50 to-transparent"},mp={class:"text-white/80 text-sm font-medium"},xp={class:"flex items-center gap-2"},bp={class:"relative"},yp={key:0,class:"absolute right-0 top-full mt-2 w-48 bg-zinc-800 rounded-lg shadow-xl overflow-hidden"},wp={class:"p-2"},kp=["onClick"],_p={class:"absolute bottom-0 left-0 right-0 p-4 bg-gradient-to-t from-black/50 to-transparent"},Sp={class:"h-1 bg-white/20 rounded-full overflow-hidden mb-4"},$p={class:"flex items-center justify-center gap-4"},zp=["disabled"],Cp=["disabled"],Fp=ze({__name:"PresentationMode",props:{slides:{},initialSlideIndex:{default:0},showControls:{type:Boolean,default:!0}},emits:["close","slide-change","open-presenter-view"],setup(P,{emit:h}){const t=P,r=h,s=as({slides:U(()=>t.slides),initialSlideIndex:t.initialSlideIndex,defaultTransition:{type:"fade",duration:300}}),d=A(!0),c=A(!1),g=A(!1);let v=null;const w=A(null),E=[{value:"none",label:"None"},{value:"fade",label:"Fade"},{value:"slide-left",label:"Slide"},{value:"zoom",label:"Zoom"},{value:"flip",label:"Flip"}];let S=0,u=0;function F(G){S=G.touches[0].clientX,u=G.touches[0].clientY}function R(G){const Q=G.changedTouches[0].clientX,Y=G.changedTouches[0].clientY,ke=Q-S,Re=Y-u;Math.abs(ke)>50&&Math.abs(ke)>Math.abs(Re)&&(ke<0?C():M())}async function C(){!s.canGoNext.value||g.value||(g.value=!0,s.nextSlideNav(),await new Promise(G=>setTimeout(G,s.transition.value.duration)),g.value=!1)}async function M(){!s.canGoPrevious.value||g.value||(g.value=!0,s.previousSlideNav(),await new Promise(G=>setTimeout(G,s.transition.value.duration)),g.value=!1)}function W(G){switch(d.value=!0,I(),G.key){case"ArrowRight":case"ArrowDown":case" ":case"PageDown":case"Enter":G.preventDefault(),C();break;case"ArrowLeft":case"ArrowUp":case"PageUp":case"Backspace":G.preventDefault(),M();break;case"Home":G.preventDefault(),s.firstSlide();break;case"End":G.preventDefault(),s.lastSlide();break;case"Escape":G.preventDefault(),r("close");break;case"p":case"P":G.preventDefault(),r("open-presenter-view");break}}function K(){d.value=!0,I()}function I(){v&&clearTimeout(v),v=setTimeout(()=>{d.value=!1,c.value=!1},3e3)}async function p(){try{await document.documentElement.requestFullscreen()}catch{}}async function z(){try{document.fullscreenElement&&await document.exitFullscreen()}catch{}}function H(G){s.setTransition({type:G})}return Ee(()=>s.currentSlideIndex.value,G=>{r("slide-change",G)}),yt(()=>{window.addEventListener("keydown",W),s.startPresentation(t.initialSlideIndex),p(),I()}),Wt(()=>{window.removeEventListener("keydown",W),v&&clearTimeout(v),z()}),(G,Q)=>(o(),a("div",{class:"presentation-mode fixed inset-0 z-50 bg-black",onMousemove:K,onTouchstart:F,onTouchend:R},[(o(),he(xn("style"),{innerHTML:n(Tu)},null,8,["innerHTML"])),e("div",{ref_key:"slideContainerRef",ref:w,class:"absolute inset-0 flex items-center justify-center",style:ce({"--transition-duration":`${n(s).transition.value.duration}ms`})},[n(s).currentSlide.value?(o(),a("div",{key:n(s).currentSlideIndex.value,class:de(["slide-display aspect-video bg-white shadow-2xl overflow-hidden",n(s).getTransitionClasses().enter]),style:ce({backgroundColor:n(s).currentSlide.value.backgroundColor||"#FFFFFF",maxWidth:"95vw",maxHeight:"95vh"})},[e("div",fp,[(o(!0),a(ee,null,le(n(s).currentSlide.value.elements,Y=>(o(),a("div",{key:Y.id,class:"absolute",style:ce({left:`${Y.x}%`,top:`${Y.y}%`,width:`${Y.width}%`,height:`${Y.height}%`,transform:`rotate(${Y.rotation||0}deg)`,opacity:Y.opacity??1,zIndex:Y.zIndex||0})},[Y.type==="text"&&Y.text?(o(),a("div",{key:0,class:"w-full h-full overflow-hidden whitespace-pre-wrap",style:ce({fontFamily:Y.text.fontFamily,fontSize:`${Y.text.fontSize}px`,fontWeight:Y.text.fontWeight,fontStyle:Y.text.fontStyle,textDecoration:Y.text.textDecoration||"none",color:Y.text.color,textAlign:Y.text.textAlign,lineHeight:Y.text.lineHeight})},T(Y.text.content),5)):Y.type==="shape"?(o(),a("div",{key:1,class:"w-full h-full",style:ce({backgroundColor:Y.fill,border:Y.stroke?`${Y.strokeWidth||1}px solid ${Y.stroke}`:"none",borderRadius:Y.shape?.shapeType==="circle"?"50%":Y.shape?.shapeType==="rounded-rectangle"?"12px":"0"})},null,4)):Y.type==="image"&&Y.image?.url?(o(),a("img",{key:2,src:Y.image.url,class:"w-full h-full",style:ce({objectFit:Y.image.fit||"contain"}),alt:""},null,12,gp)):V("",!0)],4))),128))])],6)):V("",!0)],4),l(Zt,{name:"fade"},{default:$(()=>[d.value&&G.showControls?(o(),a("div",vp,[e("div",hp,[e("div",mp,T(n(s).currentSlideIndex.value+1)+" / "+T(n(s).totalSlides.value),1),e("div",xp,[e("div",bp,[e("button",{class:"p-2 text-white/80 hover:text-white hover:bg-white/10 rounded-lg transition-colors",title:"Settings",onClick:Q[0]||(Q[0]=Y=>c.value=!c.value)},[l(n(eo),{class:"w-5 h-5"})]),c.value?(o(),a("div",yp,[Q[3]||(Q[3]=e("div",{class:"px-3 py-2 border-b border-zinc-700 text-xs text-zinc-400 uppercase"}," Transition ",-1)),e("div",wp,[(o(),a(ee,null,le(E,Y=>e("button",{key:Y.value,class:de(["w-full px-3 py-2 text-left text-sm rounded hover:bg-zinc-700 transition-colors",n(s).transition.value.type===Y.value?"text-indigo-400 bg-zinc-700":"text-white"]),onClick:ke=>H(Y.value)},T(Y.label),11,kp)),64))])])):V("",!0)]),e("button",{class:"p-2 text-white/80 hover:text-white hover:bg-white/10 rounded-lg transition-colors",title:"Presenter View (P)",onClick:Q[1]||(Q[1]=Y=>r("open-presenter-view"))},[l(n(Zn),{class:"w-5 h-5"})]),e("button",{class:"p-2 text-white/80 hover:text-white hover:bg-white/10 rounded-lg transition-colors",title:"Exit (Esc)",onClick:Q[2]||(Q[2]=Y=>r("close"))},[l(n(tn),{class:"w-5 h-5"})])])]),e("div",_p,[e("div",Sp,[e("div",{class:"h-full bg-white transition-all duration-300",style:ce({width:`${n(s).progress.value}%`})},null,4)]),e("div",$p,[e("button",{class:"p-3 text-white/80 hover:text-white hover:bg-white/10 rounded-full transition-colors disabled:opacity-30 disabled:cursor-not-allowed",disabled:!n(s).canGoPrevious.value,onClick:M},[l(n(bt),{class:"w-8 h-8"})],8,zp),e("button",{class:"p-3 text-white/80 hover:text-white hover:bg-white/10 rounded-full transition-colors disabled:opacity-30 disabled:cursor-not-allowed",disabled:!n(s).canGoNext.value,onClick:C},[l(n(Qe),{class:"w-8 h-8"})],8,Cp)])]),n(s).canGoPrevious.value?(o(),a("button",{key:0,class:"absolute left-0 top-1/2 -translate-y-1/2 w-20 h-full opacity-0 hover:opacity-100 transition-opacity bg-gradient-to-r from-black/30 to-transparent flex items-center justify-start pl-4",onClick:M},[l(n(bt),{class:"w-8 h-8 text-white/60"})])):V("",!0),n(s).canGoNext.value?(o(),a("button",{key:1,class:"absolute right-0 top-1/2 -translate-y-1/2 w-20 h-full opacity-0 hover:opacity-100 transition-opacity bg-gradient-to-l from-black/30 to-transparent flex items-center justify-end pr-4",onClick:C},[l(n(Qe),{class:"w-8 h-8 text-white/60"})])):V("",!0)])):V("",!0)]),_:1})],32))}}),Ip=lt(Fp,[["__scopeId","data-v-bb3224a4"]]),Tp={class:"presenter-view fixed inset-0 z-50 bg-zinc-900 flex"},Ep={class:"flex-1 flex flex-col p-4 border-r border-zinc-700"},Ap={class:"flex-1 flex items-center justify-center bg-black rounded-lg overflow-hidden"},Bp={class:"relative w-full h-full"},Dp=["src"],jp={class:"flex items-center justify-between px-4 py-2 border-b border-zinc-700"},Pp={class:"flex items-center gap-2 text-zinc-300"},Lp={class:"p-4 overflow-y-auto h-full text-zinc-300 text-sm whitespace-pre-wrap"},Mp={class:"w-80 flex flex-col p-4"},Op={class:"flex justify-end mb-4"},Rp={class:"bg-zinc-800 rounded-lg p-4 mb-4"},Hp={class:"flex items-center gap-2 text-zinc-400 mb-2"},Wp={class:"text-4xl font-mono text-white mb-3"},Np={class:"flex gap-2"},Up={class:"bg-zinc-800 rounded-lg p-4 mb-4"},Gp={class:"flex items-center justify-between mb-3"},Vp=["disabled"],qp={class:"text-center"},Xp={class:"text-2xl font-bold text-white"},Yp={class:"text-xs text-zinc-400"},Kp=["disabled"],Qp={class:"h-1 bg-zinc-700 rounded-full overflow-hidden"},Jp={class:"flex-1 bg-zinc-800 rounded-lg overflow-hidden"},Zp={class:"p-4 flex items-center justify-center h-full"},ef={class:"relative w-full h-full transform scale-50 origin-top-left",style:{width:"200%",height:"200%"}},tf={key:1,class:"text-zinc-500 text-sm text-center"},nf=ze({__name:"PresenterView",props:{slides:{},initialSlideIndex:{default:0}},emits:["close","slide-change"],setup(P,{emit:h}){const t=P,r=h,s=as({slides:U(()=>t.slides),initialSlideIndex:t.initialSlideIndex}),d=A(!0),c=A(!1),g=U(()=>s.currentSlide.value?.speaker_notes||"No speaker notes for this slide.");function v(E){switch(E.key){case"ArrowRight":case"ArrowDown":case" ":case"PageDown":E.preventDefault(),s.nextSlideNav();break;case"ArrowLeft":case"ArrowUp":case"PageUp":E.preventDefault(),s.previousSlideNav();break;case"Home":E.preventDefault(),s.firstSlide();break;case"End":E.preventDefault(),s.lastSlide();break;case"Escape":E.preventDefault(),r("close");break}}function w(){s.isPaused.value?s.startTimer():s.pauseTimer()}return Ee(()=>s.currentSlideIndex.value,E=>{r("slide-change",E)}),yt(()=>{window.addEventListener("keydown",v),s.startTimer()}),Wt(()=>{window.removeEventListener("keydown",v),s.pauseTimer()}),(E,S)=>(o(),a("div",Tp,[e("div",Ep,[e("div",Ap,[e("div",{class:"slide-container aspect-video bg-white rounded shadow-2xl overflow-hidden",style:ce({backgroundColor:n(s).currentSlide.value?.backgroundColor||"#FFFFFF"})},[e("div",Bp,[n(s).currentSlide.value?(o(!0),a(ee,{key:0},le(n(s).currentSlide.value.elements,u=>(o(),a("div",{key:u.id,class:"absolute",style:ce({left:`${u.x}%`,top:`${u.y}%`,width:`${u.width}%`,height:`${u.height}%`,transform:`rotate(${u.rotation||0}deg)`,opacity:u.opacity??1,zIndex:u.zIndex||0})},[u.type==="text"&&u.text?(o(),a("div",{key:0,class:"w-full h-full overflow-hidden",style:ce({fontFamily:u.text.fontFamily,fontSize:`${u.text.fontSize*.8}px`,fontWeight:u.text.fontWeight,fontStyle:u.text.fontStyle,color:u.text.color,textAlign:u.text.textAlign,lineHeight:u.text.lineHeight})},T(u.text.content),5)):u.type==="shape"?(o(),a("div",{key:1,class:"w-full h-full",style:ce({backgroundColor:u.fill,border:u.stroke?`${u.strokeWidth||1}px solid ${u.stroke}`:"none",borderRadius:u.shape?.shapeType==="circle"?"50%":u.shape?.shapeType==="rounded-rectangle"?"8px":"0"})},null,4)):u.type==="image"&&u.image?.url?(o(),a("img",{key:2,src:u.image.url,class:"w-full h-full",style:ce({objectFit:u.image.fit||"contain"}),alt:""},null,12,Dp)):V("",!0)],4))),128)):V("",!0)])],4)]),d.value?(o(),a("div",{key:0,class:de(["mt-4 bg-zinc-800 rounded-lg overflow-hidden",c.value?"flex-1":"h-32"])},[e("div",jp,[e("div",Pp,[l(n(Jn),{class:"w-4 h-4"}),S[5]||(S[5]=e("span",{class:"text-sm font-medium"},"Speaker Notes",-1))]),e("button",{class:"p-1 text-zinc-400 hover:text-white transition-colors",onClick:S[0]||(S[0]=u=>c.value=!c.value)},[l(n(en),{class:"w-4 h-4"})])]),e("div",Lp,T(g.value),1)],2)):V("",!0)]),e("div",Mp,[e("div",Op,[e("button",{class:"p-2 text-zinc-400 hover:text-white hover:bg-zinc-800 rounded-lg transition-colors",title:"Close presenter view (Esc)",onClick:S[1]||(S[1]=u=>r("close"))},[l(n(tn),{class:"w-5 h-5"})])]),e("div",Rp,[e("div",Hp,[l(n(to),{class:"w-4 h-4"}),S[6]||(S[6]=e("span",{class:"text-sm"},"Elapsed Time",-1))]),e("div",Wp,T(n(s).formattedTime.value),1),e("div",Np,[e("button",{class:"flex-1 flex items-center justify-center gap-1.5 px-3 py-2 bg-zinc-700 hover:bg-zinc-600 text-white rounded transition-colors",onClick:w},[n(s).isPaused.value?(o(),he(n(Sn),{key:0,class:"w-4 h-4"})):(o(),he(n(no),{key:1,class:"w-4 h-4"})),ne(" "+T(n(s).isPaused.value?"Start":"Pause"),1)]),e("button",{class:"px-3 py-2 bg-zinc-700 hover:bg-zinc-600 text-white rounded transition-colors",title:"Reset timer",onClick:S[2]||(S[2]=(...u)=>n(s).resetTimer&&n(s).resetTimer(...u))},[l(n(es),{class:"w-4 h-4"})])])]),e("div",Up,[e("div",Gp,[e("button",{class:"p-2 bg-zinc-700 hover:bg-zinc-600 disabled:opacity-40 disabled:cursor-not-allowed text-white rounded transition-colors",disabled:!n(s).canGoPrevious.value,onClick:S[3]||(S[3]=(...u)=>n(s).previousSlideNav&&n(s).previousSlideNav(...u))},[l(n(bt),{class:"w-5 h-5"})],8,Vp),e("div",qp,[e("div",Xp,T(n(s).currentSlideIndex.value+1),1),e("div",Yp," of "+T(n(s).totalSlides.value),1)]),e("button",{class:"p-2 bg-zinc-700 hover:bg-zinc-600 disabled:opacity-40 disabled:cursor-not-allowed text-white rounded transition-colors",disabled:!n(s).canGoNext.value,onClick:S[4]||(S[4]=(...u)=>n(s).nextSlideNav&&n(s).nextSlideNav(...u))},[l(n(Qe),{class:"w-5 h-5"})],8,Kp)]),e("div",Qp,[e("div",{class:"h-full bg-indigo-500 transition-all duration-300",style:ce({width:`${n(s).progress.value}%`})},null,4)])]),e("div",Jp,[S[7]||(S[7]=e("div",{class:"px-4 py-2 border-b border-zinc-700 text-zinc-400 text-sm"}," Next Slide ",-1)),e("div",Zp,[n(s).nextSlide.value?(o(),a("div",{key:0,class:"aspect-video w-full bg-white rounded shadow-lg overflow-hidden",style:ce({backgroundColor:n(s).nextSlide.value.backgroundColor||"#FFFFFF"})},[e("div",ef,[(o(!0),a(ee,null,le(n(s).nextSlide.value.elements,u=>(o(),a("div",{key:u.id,class:"absolute",style:ce({left:`${u.x}%`,top:`${u.y}%`,width:`${u.width}%`,height:`${u.height}%`,opacity:u.opacity??1,zIndex:u.zIndex||0})},[u.type==="text"&&u.text?(o(),a("div",{key:0,class:"w-full h-full overflow-hidden",style:ce({fontFamily:u.text.fontFamily,fontSize:`${u.text.fontSize*.4}px`,fontWeight:u.text.fontWeight,color:u.text.color,textAlign:u.text.textAlign})},T(u.text.content),5)):u.type==="shape"?(o(),a("div",{key:1,class:"w-full h-full",style:ce({backgroundColor:u.fill,borderRadius:u.shape?.shapeType==="circle"?"50%":"0"})},null,4)):V("",!0)],4))),128))])],4)):(o(),a("div",tf," End of presentation "))])]),S[8]||(S[8]=Xn('<div class="mt-4 text-xs text-zinc-500 text-center" data-v-7c710089><span class="inline-block px-1.5 py-0.5 bg-zinc-800 rounded mr-1" data-v-7c710089>←</span><span class="inline-block px-1.5 py-0.5 bg-zinc-800 rounded mr-2" data-v-7c710089>→</span> Navigate <span class="mx-2" data-v-7c710089>|</span><span class="inline-block px-1.5 py-0.5 bg-zinc-800 rounded" data-v-7c710089>Esc</span> Close </div>',1))])]))}}),sf=lt(nf,[["__scopeId","data-v-7c710089"]]),of={class:"bg-white dark:bg-zinc-900 rounded-2xl shadow-2xl w-full max-w-4xl max-h-[85vh] flex flex-col overflow-hidden animate-in zoom-in-95 duration-200"},lf={class:"flex items-center justify-between px-6 py-4 border-b border-zinc-200 dark:border-zinc-800"},af={class:"flex items-center gap-3"},rf={class:"p-2 bg-indigo-100 dark:bg-indigo-900/30 rounded-lg"},df={class:"flex items-center gap-2 px-6 py-3 border-b border-zinc-200 dark:border-zinc-800 overflow-x-auto"},cf=["onClick"],uf={class:"flex-1 overflow-y-auto p-6"},pf={class:"mb-8"},ff={class:"absolute inset-0 flex flex-col items-center justify-center bg-zinc-50 dark:bg-zinc-800/50 group-hover:bg-indigo-50 dark:group-hover:bg-indigo-900/20 transition-colors"},gf={class:"flex items-center gap-2 mb-3"},vf={class:"text-sm font-medium text-zinc-700 dark:text-zinc-300"},hf={class:"text-xs text-zinc-400"},mf={class:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4"},xf=["onClick"],bf={key:2,class:"w-full h-full bg-zinc-200 dark:bg-zinc-700 rounded-sm"},yf={class:"absolute inset-0 bg-gradient-to-t from-black/60 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity"},wf={class:"absolute bottom-0 left-0 right-0 p-2"},kf={class:"text-xs font-medium text-white truncate"},_f=ze({__name:"SlideTemplateGallery",props:{open:{type:Boolean}},emits:["close","select"],setup(P,{emit:h}){const t=h,{templateGroups:r,createSlideFromTemplate:s,createBlankSlide:d}=Uu(),c=A("all"),g={title:Kn,content:vn,comparison:io,data:Yn,media:Jt,ending:lo},v=U(()=>c.value==="all"?r.value:r.value.filter(u=>u.category===c.value));function w(u){const F=s(u.id);F&&(t("select",F),t("close"))}function E(){t("select",d()),t("close")}function S(u){return{backgroundColor:u.backgroundColor||"#FFFFFF"}}return(u,F)=>(o(),he(so,{to:"body"},[l(Zt,{name:"fade"},{default:$(()=>[u.open?(o(),a("div",{key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm",onClick:F[2]||(F[2]=dt(R=>t("close"),["self"]))},[e("div",of,[e("div",lf,[e("div",af,[e("div",rf,[l(n(oo),{class:"w-5 h-5 text-indigo-600 dark:text-indigo-400"})]),F[3]||(F[3]=e("div",null,[e("h2",{class:"text-lg font-semibold text-zinc-900 dark:text-zinc-100"}," Choose a Layout "),e("p",{class:"text-sm text-zinc-500 dark:text-zinc-400"}," Select a template to start with ")],-1))]),e("button",{class:"p-2 rounded-lg hover:bg-zinc-100 dark:hover:bg-zinc-800 transition-colors",onClick:F[0]||(F[0]=R=>t("close"))},[l(n(tn),{class:"w-5 h-5 text-zinc-500"})])]),e("div",df,[e("button",{class:de(["px-3 py-1.5 text-sm font-medium rounded-lg transition-colors whitespace-nowrap",c.value==="all"?"bg-indigo-100 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-300":"text-zinc-600 dark:text-zinc-400 hover:bg-zinc-100 dark:hover:bg-zinc-800"]),onClick:F[1]||(F[1]=R=>c.value="all")}," All Templates ",2),(o(!0),a(ee,null,le(n(r),R=>(o(),a("button",{key:R.category,class:de(["flex items-center gap-1.5 px-3 py-1.5 text-sm font-medium rounded-lg transition-colors whitespace-nowrap",c.value===R.category?"bg-indigo-100 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-300":"text-zinc-600 dark:text-zinc-400 hover:bg-zinc-100 dark:hover:bg-zinc-800"]),onClick:C=>c.value=R.category},[(o(),he(xn(g[R.category]),{class:"w-4 h-4"})),ne(" "+T(R.label),1)],10,cf))),128))]),e("div",uf,[e("div",pf,[F[5]||(F[5]=e("h3",{class:"text-sm font-medium text-zinc-700 dark:text-zinc-300 mb-3"}," Start Fresh ",-1)),e("button",{class:"group relative w-48 aspect-video rounded-xl border-2 border-dashed border-zinc-300 dark:border-zinc-700 hover:border-indigo-500 dark:hover:border-indigo-500 transition-all overflow-hidden",onClick:E},[e("div",ff,[l(n(Qt),{class:"w-8 h-8 text-zinc-400 group-hover:text-indigo-500 transition-colors mb-2"}),F[4]||(F[4]=e("span",{class:"text-sm font-medium text-zinc-500 group-hover:text-indigo-600 dark:group-hover:text-indigo-400 transition-colors"}," Blank Slide ",-1))])])]),(o(!0),a(ee,null,le(v.value,R=>(o(),a("div",{key:R.category,class:"mb-8 last:mb-0"},[e("div",gf,[(o(),he(xn(g[R.category]),{class:"w-4 h-4 text-zinc-500"})),e("h3",vf,T(R.label),1),e("span",hf,T(R.description),1)]),e("div",mf,[(o(!0),a(ee,null,le(R.templates,C=>(o(),a("button",{key:C.id,class:"group relative aspect-video rounded-xl border border-zinc-200 dark:border-zinc-700 hover:border-indigo-500 dark:hover:border-indigo-500 hover:ring-2 hover:ring-indigo-500/20 transition-all overflow-hidden",onClick:M=>w(C)},[e("div",{class:"absolute inset-0 p-2",style:ce(S(C))},[(o(!0),a(ee,null,le(C.elements.slice(0,5),(M,W)=>(o(),a("div",{key:W,class:"absolute",style:ce({left:`${M.x}%`,top:`${M.y}%`,width:`${M.width}%`,height:`${M.height}%`})},[M.type==="text"?(o(),a("div",{key:0,class:"w-full h-full rounded-sm",style:ce({backgroundColor:M.text?.color?`${M.text.color}20`:"#00000010"})},null,4)):M.type==="shape"?(o(),a("div",{key:1,class:"w-full h-full rounded-sm",style:ce({backgroundColor:M.fill||"#E5E7EB",borderRadius:M.shapeType==="circle"?"50%":void 0})},null,4)):(o(),a("div",bf))],4))),128))],4),e("div",yf,[e("div",wf,[e("p",kf,T(C.name),1)])])],8,xf))),128))])]))),128))])])])):V("",!0)]),_:1})]))}}),Sf=lt(_f,[["__scopeId","data-v-ae06b540"]]),$f={key:0,class:"flex h-full items-center justify-center bg-zinc-100 dark:bg-zinc-950"},zf={key:1,class:"wysiwyg-editor flex flex-col h-full bg-zinc-100 dark:bg-zinc-950"},Cf={class:"flex flex-1 overflow-hidden"},Ff={class:"space-y-2"},If=["onClick"],Tf={class:"absolute bottom-1 left-1 text-[10px] font-medium text-zinc-500 bg-white/80 dark:bg-zinc-800/80 px-1 rounded"},Ef={class:"absolute top-1 right-1 opacity-0 group-hover:opacity-100 transition-opacity flex gap-1"},Af=["onClick"],Bf=["onClick"],Df={class:"flex-1 flex flex-col"},jf={class:"flex-1 p-4 flex"},Pf={class:"flex items-center justify-between px-4 py-2 bg-white dark:bg-zinc-900 border-t border-zinc-200 dark:border-zinc-800"},Lf={class:"flex items-center gap-2"},Mf=["disabled"],Of={class:"text-sm text-zinc-600 dark:text-zinc-400"},Rf=["disabled"],Hf={class:"text-sm text-zinc-500"},Wf={key:0},Nf={key:1},Uf={class:"flex items-center gap-2"},Gf={class:"flex items-center bg-zinc-100 dark:bg-zinc-800 rounded-lg p-0.5"},Vf=ze({__name:"WysiwygSlideEditor",props:{slides:{},activeIndex:{default:0},isSaving:{type:Boolean,default:!1},projectTitle:{default:"Untitled"}},emits:["update:slides","update:activeIndex","present","export"],setup(P,{emit:h}){const t=P,r=h,s=A(null),d=A(null),c=A(!1),g=A([]),v=A(0),w=A([]),E=A(!1),S=A(!1),u=A("modern"),F=A(!1),R=A(!1),C=A(0),M=A(!1),W=!0,K=is({slides:g});yt(()=>{K.loadThemes()});let I=null,p=null;const z=A(null),H=U(()=>z.value),G=U(()=>g.value[v.value]||null),Q=U(()=>!G.value||w.value.length!==1?null:G.value.elements.find(j=>j.id===w.value[0])||null),Y=U(()=>Q.value?.type||null),ke=U(()=>w.value.length>0),Re=U(()=>w.value.length>1),Ce=U(()=>{const j=z.value?.clipboard;return j?.value!==null&&(j?.value?.length??0)>0}),Ae=j=>{if(!j)return!0;const ge=j.replace("#","");if(ge.length!==6)return!0;const ve=parseInt(ge.slice(0,2),16),Pe=parseInt(ge.slice(2,4),16),ft=parseInt(ge.slice(4,6),16);return(.299*ve+.587*Pe+.114*ft)/255>.7},Le=Cu({slides:g,activeSlideIndex:v,maxSize:50,debounceMs:500,onRestore:j=>{st(()=>{p?.loadElements()})}}),Be=Fu(Le);Ee(()=>t.slides,j=>{JSON.stringify(j)!==JSON.stringify(g.value)&&(g.value=JSON.parse(JSON.stringify(j)))},{immediate:!0,deep:!0}),Ee(()=>t.activeIndex,j=>{j!==v.value&&(v.value=j)},{immediate:!0}),Ee(g,j=>{r("update:slides",j),Be()},{deep:!0}),Ee(v,j=>{r("update:activeIndex",j),w.value=[],st(()=>{I&&(I.resetZoom(),I.resetPan()),s.value?.fitToContainer(),p?.loadElements()})});function He(j){I=j,p=s.value?.getElements()||null,p&&I&&(z.value=zu({canvasInstance:I,elementsInstance:p,slide:G,onSelectionChange:ge=>{w.value=ge}}))}function fe(j){w.value=j}function ye(){w.value=[]}function se(j){G.value&&(G.value.elements=j)}function q(j){}function m(){p&&p.addText({x:10,y:10,width:40,height:10,text:{content:"Double click to edit",fontFamily:"Arial",fontSize:24,fontWeight:"normal",fontStyle:"normal",textAlign:"left",color:"#111827",lineHeight:1.4,letterSpacing:0}})}function y(j){p&&p.addShape(j,{x:20,y:20,width:20,height:15,fill:"#6366F1",stroke:"#4F46E5",strokeWidth:2})}function N(){const j=document.createElement("input");j.type="file",j.accept="image/*",j.onchange=async ge=>{const ve=ge.target.files?.[0];if(!ve||!p)return;const Pe=URL.createObjectURL(ve);p.addImage(Pe,{x:25,y:20,width:30,height:30})},j.click()}function O(){if(!p)return;const j=K.getChartColors();p.addChart({x:15,y:25,width:50,height:40,chart:{chartType:"bar",title:"Chart Title",labels:["Category A","Category B","Category C","Category D"],datasets:[{label:"Series 1",data:[65,59,80,81],backgroundColor:j}],showLegend:!0,showGrid:!0}})}function J(){if(!p)return;const j=K.currentTheme.value;p.addTable({x:10,y:30,width:60,height:35,table:{title:"Table",columns:[{key:"col1",label:"Column 1"},{key:"col2",label:"Column 2"},{key:"col3",label:"Column 3"}],rows:[{col1:"Row 1",col2:"Data",col3:"Value"},{col1:"Row 2",col2:"Data",col3:"Value"},{col1:"Row 3",col2:"Data",col3:"Value"}],headerBackground:j?.colors.surface||"#F3F4F6",headerColor:j?.colors.text||"#111827",alternateRowColors:!0}})}function L(){Q.value?.text&&be({text:{...Q.value.text,fontWeight:Q.value.text.fontWeight==="bold"?"normal":"bold"}})}function te(){Q.value?.text&&be({text:{...Q.value.text,fontStyle:Q.value.text.fontStyle==="italic"?"normal":"italic"}})}function ue(){Q.value?.text&&be({text:{...Q.value.text,textDecoration:Q.value.text.textDecoration==="underline"?"none":"underline"}})}function oe(j){Q.value?.text&&be({text:{...Q.value.text,color:j}})}function Me(j){Q.value?.text&&be({text:{...Q.value.text,fontFamily:j}})}function Se(j){Q.value?.text&&be({text:{...Q.value.text,fontSize:j}})}function we(j){u.value=j,K.setTheme(j)}function Ie(j,ge){if(u.value=j,K.setTheme(j),ge)g.value=K.applyThemeToAllSlides(g.value,j);else if(G.value){const ve=K.themes.value.find(Pe=>Pe.id===j);if(ve){const Pe=K.applyThemeToSlide(G.value,ve);g.value[v.value]=Pe}}st(()=>{p?.loadElements()})}function De(j){H.value?.alignHorizontal(j)}function tt(j){H.value?.alignVertical(j)}function ut(){w.value.length===1&&p?.bringToFront(w.value[0])}function pt(){w.value.length===1&&p?.sendToBack(w.value[0])}function xe(){w.value.length===1&&p?.bringForward(w.value[0])}function We(){w.value.length===1&&p?.sendBackward(w.value[0])}function Ue(){H.value?.groupElements()}function $e(){const j=Q.value;j?.groupId&&H.value?.ungroupElements(j.groupId)}function _e(){Le.undo()}function Xe(){Le.redo()}function D(){H.value?.duplicate()}function Z(){p?.removeSelected(),w.value=[]}function re(){E.value=!E.value}function me(){S.value=!S.value}function be(j){!Q.value||!p||p.updateElement(Q.value.id,j)}function Ye(j){G.value&&(G.value.speaker_notes=j)}function Ge(){M.value=!0}function Ve(j){g.value.push(j),v.value=g.value.length-1,st(()=>{p?.loadElements()})}function qe(j){const ge=g.value[j];if(!ge)return;const ve={...JSON.parse(JSON.stringify(ge)),id:Ne(),title:`${ge.title} (Copy)`};ve.elements=ve.elements.map(Pe=>({...Pe,id:Ne()})),g.value.splice(j+1,0,ve),v.value=j+1}function Je(j){g.value.length<=1||(g.value.splice(j,1),v.value>=g.value.length&&(v.value=g.value.length-1))}function Oe(j){v.value=j}function je(){v.value>0&&v.value--}function St(){v.value<g.value.length-1&&v.value++}function $t(){C.value=v.value,F.value=!0}function it(){C.value=v.value,R.value=!0}function nt(){F.value=!1,R.value=!1}function k(j){if(["INPUT","TEXTAREA","SELECT"].includes(j.target?.tagName))return;const ve=j.metaKey||j.ctrlKey;if(ve&&j.key==="z"&&!j.shiftKey){j.preventDefault(),_e();return}if(ve&&j.key==="z"&&j.shiftKey){j.preventDefault(),Xe();return}if(j.key==="Delete"||j.key==="Backspace"){ke.value&&(j.preventDefault(),Z());return}if(ve&&j.key==="c"){j.preventDefault(),H.value?.copy();return}if(ve&&j.key==="x"){j.preventDefault(),H.value?.cut();return}if(ve&&j.key==="v"){j.preventDefault(),H.value?.paste();return}if(ve&&j.key==="d"){j.preventDefault(),D();return}if(ve&&j.key==="b"){j.preventDefault(),L();return}if(ve&&j.key==="i"){j.preventDefault(),te();return}if(ve&&j.key==="u"){j.preventDefault(),ue();return}if(ve&&j.key==="g"&&!j.shiftKey){j.preventDefault(),Ue();return}if(ve&&j.key==="g"&&j.shiftKey){j.preventDefault(),$e();return}if(ve&&j.key==="a"){j.preventDefault(),I?.selectAll();return}if(j.key==="Escape"){I?.deselectAll();return}["ArrowLeft","ArrowRight"].includes(j.key)&&!ke.value&&(j.preventDefault(),j.key==="ArrowLeft"&&je(),j.key==="ArrowRight"&&St())}return yt(()=>{window.addEventListener("keydown",k)}),Wt(()=>{window.removeEventListener("keydown",k)}),(j,ge)=>n(W)?(o(),a("div",$f,[...ge[3]||(ge[3]=[e("div",{class:"max-w-xl text-center px-6"},[e("div",{class:"mx-auto mb-4 inline-flex items-center rounded-full border border-zinc-200/70 bg-white px-4 py-1 text-[11px] font-semibold uppercase tracking-[0.25em] text-zinc-500 dark:border-white/10 dark:bg-white/5 dark:text-white/70"}," Coming Soon "),e("h3",{class:"text-2xl md:text-3xl font-display font-bold text-zinc-900 dark:text-white"}," Defense Slide Deck Editor "),e("p",{class:"mt-3 text-sm text-zinc-600 dark:text-white/70"}," The editor will let you refine layouts, rearrange slides, apply themes, and export presentation-ready decks directly from Finalyze. ")],-1)])])):(o(),a("div",zf,[l(Bc,{showShapeMenu:c.value,"onUpdate:showShapeMenu":ge[0]||(ge[0]=ve=>c.value=ve),"can-undo":n(Le).canUndo.value,"can-redo":n(Le).canRedo.value,"has-selection":ke.value,"has-multiple-selection":Re.value,"has-clipboard":Ce.value,"grid-enabled":E.value,"snap-enabled":S.value,"selected-element-type":Y.value,"text-color":Q.value?.text?.color||"#111827","font-family":Q.value?.text?.fontFamily||"Arial","font-size":Q.value?.text?.fontSize||18,"onAdd:text":m,"onAdd:shape":y,"onAdd:image":N,"onAdd:chart":O,"onAdd:table":J,"onFormat:bold":L,"onFormat:italic":te,"onFormat:underline":ue,"onFormat:color":oe,"onFormat:font":Me,"onFormat:fontSize":Se,"onAlign:horizontal":De,"onAlign:vertical":tt,"onArrange:bringFront":ut,"onArrange:sendBack":pt,"onArrange:bringForward":xe,"onArrange:sendBackward":We,onGroup:Ue,onUngroup:$e,onUndo:_e,onRedo:Xe,onDuplicate:D,onDelete:Z,"onToggle:grid":re,"onToggle:snap":me},null,8,["showShapeMenu","can-undo","can-redo","has-selection","has-multiple-selection","has-clipboard","grid-enabled","snap-enabled","selected-element-type","text-color","font-family","font-size"]),e("div",Cf,[e("div",{ref_key:"slideThumbnailsRef",ref:d,class:"slide-thumbnails w-48 bg-white dark:bg-zinc-900 border-r border-zinc-200 dark:border-zinc-800 overflow-y-auto p-3"},[e("div",Ff,[(o(!0),a(ee,null,le(g.value,(ve,Pe)=>(o(),a("div",{key:ve.id,class:de(["slide-thumbnail group relative cursor-pointer",{"ring-2 ring-indigo-500":Pe===v.value}]),onClick:ft=>Oe(Pe)},[e("div",{class:"aspect-video bg-zinc-50 dark:bg-zinc-950 rounded border border-zinc-200 dark:border-zinc-700 overflow-hidden",style:ce({backgroundColor:ve.backgroundColor})},[e("div",{class:"p-2 text-[6px] leading-tight truncate",style:ce({color:Ae(ve.backgroundColor)?"#475569":"#F8FAFC"})},T(ve.title),5)],4),e("div",Tf,T(Pe+1),1),e("div",Ef,[e("button",{class:"p-1 bg-white dark:bg-zinc-700 rounded shadow hover:bg-zinc-100 dark:hover:bg-zinc-600",title:"Duplicate slide",onClick:dt(ft=>qe(Pe),["stop"])},[l(n(_n),{class:"w-3 h-3"})],8,Af),g.value.length>1?(o(),a("button",{key:0,class:"p-1 bg-white dark:bg-zinc-700 rounded shadow hover:bg-red-100 dark:hover:bg-red-900/30 text-red-600",title:"Delete slide",onClick:dt(ft=>Je(Pe),["stop"])},[l(n(Mt),{class:"w-3 h-3"})],8,Bf)):V("",!0)])],10,If))),128))]),e("button",{class:"w-full mt-3 py-2 flex items-center justify-center gap-1 text-sm text-zinc-600 dark:text-zinc-400 border-2 border-dashed border-zinc-300 dark:border-zinc-700 rounded hover:border-indigo-500 hover:text-indigo-600 transition-colors",onClick:Ge},[l(n(Qt),{class:"w-4 h-4"}),ge[4]||(ge[4]=ne(" Add Slide ",-1))])],512),e("div",Df,[e("div",jf,[l(Dd,{ref_key:"editorCanvasRef",ref:s,class:"flex-1",slide:G.value,"show-grid":E.value,"snap-to-grid":S.value,"onCanvas:ready":He,"onElement:selected":fe,"onElement:deselected":ye,"onElements:change":se,"onElement:modified":q},null,8,["slide","show-grid","snap-to-grid"])]),e("div",Pf,[e("div",Lf,[e("button",{class:"p-1.5 rounded hover:bg-zinc-100 dark:hover:bg-zinc-800 disabled:opacity-40",disabled:v.value===0,onClick:je},[l(n(bt),{class:"w-4 h-4"})],8,Mf),e("span",Of,T(v.value+1)+" / "+T(g.value.length),1),e("button",{class:"p-1.5 rounded hover:bg-zinc-100 dark:hover:bg-zinc-800 disabled:opacity-40",disabled:v.value===g.value.length-1,onClick:St},[l(n(Qe),{class:"w-4 h-4"})],8,Rf)]),e("div",Hf,[j.isSaving?(o(),a("span",Wf,"Saving...")):(o(),a("span",Nf,"All changes saved"))]),e("div",Uf,[l(pp,{"current-theme-id":u.value,onSelect:we,onApply:Ie},null,8,["current-theme-id"]),e("div",Gf,[e("button",{class:"flex items-center gap-1.5 px-3 py-1.5 text-sm rounded-md transition-colors hover:bg-white dark:hover:bg-zinc-700 text-zinc-600 dark:text-zinc-400",title:"Fullscreen presentation",onClick:$t},[l(n(en),{class:"w-4 h-4"}),ge[5]||(ge[5]=ne(" Present ",-1))]),e("button",{class:"flex items-center gap-1.5 px-3 py-1.5 text-sm rounded-md transition-colors hover:bg-white dark:hover:bg-zinc-700 text-zinc-600 dark:text-zinc-400",title:"Presenter view with notes",onClick:it},[l(n(Zn),{class:"w-4 h-4"}),ge[6]||(ge[6]=ne(" Speaker ",-1))])]),e("button",{class:"flex items-center gap-1.5 px-3 py-1.5 text-sm bg-indigo-600 text-white hover:bg-indigo-700 rounded transition-colors",onClick:ge[1]||(ge[1]=ve=>r("export"))},[l(n(ts),{class:"w-4 h-4"}),ge[7]||(ge[7]=ne(" Export ",-1))])])])]),l($u,{element:Q.value,"speaker-notes":G.value?.speaker_notes,onUpdate:be,"onUpdate:speakerNotes":Ye},null,8,["element","speaker-notes"])]),F.value?(o(),he(Ip,{key:0,slides:g.value,"initial-slide-index":C.value,onClose:nt},null,8,["slides","initial-slide-index"])):V("",!0),R.value?(o(),he(sf,{key:1,slides:g.value,"initial-slide-index":C.value,onClose:nt},null,8,["slides","initial-slide-index"])):V("",!0),l(Sf,{open:M.value,onClose:ge[2]||(ge[2]=ve=>M.value=!1),onSelect:Ve},null,8,["open"])]))}}),qf=lt(Vf,[["__scopeId","data-v-a102e6ef"]]),Xf={class:"space-y-8"},Yf={class:"relative z-10 flex items-center gap-3 mb-2"},Kf={class:"p-2 bg-indigo-500/10 rounded-xl backdrop-blur-md border border-indigo-500/20"},Qf={class:"relative z-10 flex flex-col md:flex-row md:items-center justify-between gap-4"},Jf={class:"flex flex-col items-end gap-1.5"},Zf={class:"flex items-center gap-1.5"},eg={key:0,class:"mb-3 text-[11px] text-zinc-400"},tg={key:0},ng={key:1},sg={key:2},og={key:3},lg={key:4},ig={key:5},ag={key:6},rg={key:7},dg={key:8},cg={key:1,class:"mb-3 text-[11px] text-rose-400"},ug={key:0,class:"flex-1 flex items-center justify-center"},pg={key:0,class:"text-xs text-muted-foreground"},fg={key:1,class:"text-xs text-muted-foreground"},gg={key:2,class:"space-y-3"},vg={class:"space-y-1"},hg={class:"text-xs font-semibold text-foreground"},mg={class:"text-[11px] text-muted-foreground"},xg=ze({__name:"DefensePrepRightColumn",props:{project:{},deckSlides:{},deckStatus:{},deckError:{},deckDownloadUrl:{},deckId:{},activeDeckSlideIndex:{},isDeckGenerating:{type:Boolean},isDeckSaving:{type:Boolean},isGuideExpanded:{type:Boolean},isProduction:{type:Boolean},wysiwygSlides:{},sessionHistory:{},isHistoryLoading:{type:Boolean}},emits:["generateDefenseDeck","downloadPptx","update:activeDeckSlideIndex","update:isGuideExpanded","update:deckSlides","update:wysiwygSlides","openSession"],setup(P,{emit:h}){const t=P,r=h,s=U({get:()=>t.activeDeckSlideIndex,set:g=>r("update:activeDeckSlideIndex",g)}),d=U({get:()=>t.isGuideExpanded,set:g=>r("update:isGuideExpanded",g)}),c=g=>g?new Date(g).toLocaleDateString():"";return(g,v)=>(o(),a("div",Xf,[l(n(et),{class:"border-border/50 shadow-2xl shadow-indigo-500/10 rounded-3xl overflow-hidden bg-zinc-900/20"},{default:$(()=>[l(n(mt),{class:"relative overflow-hidden bg-gradient-to-br from-indigo-950 via-zinc-900 to-black text-white pb-6 border-b border-white/5"},{default:$(()=>[v[16]||(v[16]=e("div",{class:"absolute -right-6 -top-6 h-32 w-32 bg-indigo-500/10 rounded-full blur-3xl"},null,-1)),v[17]||(v[17]=e("div",{class:"absolute -left-10 -bottom-10 h-40 w-40 bg-purple-500/10 rounded-full blur-3xl"},null,-1)),e("div",Yf,[e("div",Kf,[l(n(gn),{class:"h-5 w-5 text-indigo-400"})]),l(n(xt),{class:"text-xl md:text-2xl font-display font-bold tracking-tight bg-gradient-to-r from-white to-zinc-400 bg-clip-text text-transparent"},{default:$(()=>[...v[13]||(v[13]=[ne(" Presentation Guide",-1)])]),_:1})]),e("div",Qf,[l(n(ht),{class:"text-zinc-400 text-xs leading-relaxed max-w-[220px]"},{default:$(()=>[...v[14]||(v[14]=[ne(" Step-by-step structure for high-impact defense slides. ",-1)])]),_:1}),e("div",Jf,[g.deckSlides.length?(o(),a(ee,{key:0},[l(n(ae),{variant:"outline",size:"sm",class:"h-7 text-[10px] gap-1.5 border-white/5 bg-white/5 hover:bg-white/10 text-zinc-400",onClick:v[0]||(v[0]=w=>r("generateDefenseDeck")),disabled:g.isDeckGenerating},{default:$(()=>[l(n(es),{class:"h-3 w-3"}),v[15]||(v[15]=ne(" Regenerate ",-1))]),_:1},8,["disabled"]),e("div",Zf,[l(n(ae),{variant:"secondary",size:"sm",class:"h-7 text-[10px] gap-1.5 px-3 font-bold",onClick:v[1]||(v[1]=w=>r("downloadPptx")),disabled:g.isDeckGenerating},{default:$(()=>[l(n(ts),{class:"h-3 w-3"}),ne(" "+T(g.isDeckGenerating?"Generating...":"Download PPTX"),1)]),_:1},8,["disabled"]),l(n(ae),{variant:"ghost",size:"icon",class:"h-7 w-7 text-zinc-500 hover:text-white",onClick:v[2]||(v[2]=w=>d.value=!0)},{default:$(()=>[l(n(en),{class:"h-3.5 w-3.5"})]),_:1})])],64)):(o(),he(n(ae),{key:1,variant:"secondary",size:"sm",class:"h-8 text-xs gap-1.5 font-bold",onClick:v[3]||(v[3]=w=>r("generateDefenseDeck")),disabled:g.isDeckGenerating},{default:$(()=>[l(n(rt),{class:"h-3.5 w-3.5"}),ne(" "+T(g.isDeckGenerating?"Generating...":"Generate Guide"),1)]),_:1},8,["disabled"]))])])]),_:1}),l(n(ot),{class:"p-4 md:p-6 h-[500px] flex flex-col"},{default:$(()=>[g.deckStatus!=="idle"?(o(),a("div",eg,[g.deckStatus==="queued"?(o(),a("span",tg,"Deck queued.")):g.deckStatus==="outlining"?(o(),a("span",ng,"Generating slides with GPT-4o...")):g.deckStatus==="extracting"?(o(),a("span",sg,"Extracting chapter data...")):g.deckStatus==="extracted"?(o(),a("span",og,"Extraction complete. Preparing slides...")):g.deckStatus==="generating"?(o(),a("span",lg,"Generating slides with GPT-4o...")):g.deckStatus==="outlined"?(o(),a("span",ig,"Slides ready for review.")):g.deckStatus==="rendering"?(o(),a("span",ag,"Rendering PPTX...")):g.deckStatus==="ready"?(o(),a("span",rg,"PPTX ready for download.")):g.deckStatus==="failed"?(o(),a("span",dg,"Failed to generate deck.")):V("",!0)])):V("",!0),g.deckStatus==="failed"&&g.deckError?(o(),a("div",cg,T(g.deckError),1)):V("",!0),l($d,{project:g.project,slides:g.deckSlides,"active-index":s.value,"onUpdate:activeIndex":v[4]||(v[4]=w=>s.value=w),"is-saving":g.isDeckSaving,compact:"","show-pptx":!!g.deckId,"pptx-url":g.deckDownloadUrl,"pptx-busy":g.isDeckGenerating,"onUpdate:slides":v[5]||(v[5]=w=>r("update:deckSlides",w)),onToggleExpand:v[6]||(v[6]=w=>d.value=!0),onDownloadPptx:v[7]||(v[7]=w=>r("downloadPptx")),onExportPptx:v[8]||(v[8]=w=>r("downloadPptx"))},null,8,["project","slides","active-index","is-saving","show-pptx","pptx-url","pptx-busy"])]),_:1})]),_:1}),l(n(os),{open:d.value,"onUpdate:open":v[12]||(v[12]=w=>d.value=w)},{default:$(()=>[l(n(ss),{class:"max-w-[98vw] w-full lg:max-w-[98vw] h-[95vh] flex flex-col p-0 bg-zinc-100 dark:bg-zinc-950 border-white/10 shadow-2xl overflow-hidden rounded-3xl"},{default:$(()=>[g.isProduction?(o(),a("div",ug,[...v[18]||(v[18]=[e("div",{class:"max-w-2xl text-center px-6"},[e("div",{class:"mx-auto mb-4 inline-flex items-center rounded-full border border-zinc-200/70 bg-white px-4 py-1 text-[11px] font-semibold uppercase tracking-[0.25em] text-zinc-500 dark:border-white/10 dark:bg-white/5 dark:text-white/70"}," Coming Soon "),e("h3",{class:"text-2xl md:text-3xl font-display font-bold text-zinc-900 dark:text-white"}," Defense Slide Deck Editor "),e("p",{class:"mt-3 text-sm text-zinc-600 dark:text-white/70"}," We are polishing the slide deck editor before release. Once ready, you will be able to edit layouts, drag-and-drop elements, theme slides, and export a presentation-ready deck in minutes. ")],-1)])])):(o(),he(qf,{key:1,slides:g.wysiwygSlides,"active-index":s.value,"is-saving":g.isDeckSaving,"project-title":g.project.title,"onUpdate:slides":v[9]||(v[9]=w=>r("update:wysiwygSlides",w)),"onUpdate:activeIndex":v[10]||(v[10]=w=>s.value=w),onExport:v[11]||(v[11]=w=>r("downloadPptx"))},null,8,["slides","active-index","is-saving","project-title"]))]),_:1})]),_:1},8,["open"]),l(n(et),{class:"border-border/50 shadow-sm rounded-3xl overflow-hidden"},{default:$(()=>[l(n(mt),{class:"pb-2"},{default:$(()=>[l(n(xt),{class:"flex items-center gap-2 text-base"},{default:$(()=>[l(n(Ot),{class:"h-4 w-4 text-amber-500"}),v[19]||(v[19]=ne(" Session History ",-1))]),_:1}),l(n(ht),null,{default:$(()=>[...v[20]||(v[20]=[ne("Your past defense simulations for this project.",-1)])]),_:1})]),_:1}),l(n(ot),{class:"space-y-3"},{default:$(()=>[g.isHistoryLoading?(o(),a("div",pg," Loading sessions... ")):g.sessionHistory.length?(o(),a("div",gg,[(o(!0),a(ee,null,le(g.sessionHistory,w=>(o(),a("div",{key:w.id,class:"flex items-center justify-between gap-3 rounded-2xl border border-border/50 p-3"},[e("div",vg,[e("div",hg,T(c(w.started_at||w.created_at)),1),e("div",mg,T(w.status)+" • "+T(w.questions_asked)+" Qs ",1)]),l(n(ae),{size:"sm",variant:"outline",onClick:E=>r("openSession",w.id)},{default:$(()=>[ne(T(w.status==="completed"?"Review":"Resume"),1)]),_:2},1032,["onClick"])]))),128))])):(o(),a("div",fg," No sessions yet. Start a simulation to create your first one. "))]),_:1})]),_:1})]))}}),bg={class:"relative mb-8"},yg={class:"grid grid-cols-1 md:grid-cols-2 gap-6 w-full max-w-5xl mb-12"},wg={class:"text-xs text-muted-foreground/80"},kg={class:"grid grid-cols-1 md:grid-cols-3 gap-6 w-full max-w-4xl mb-12"},_g={class:"text-4xl mb-4"},Sg={class:"font-bold"},$g={class:"text-xs text-muted-foreground leading-relaxed"},zg=ze({__name:"DefenseSimulationLabIntro",props:{plannedQuestionLimit:{},activeSimulationPersonas:{},isStarting:{type:Boolean},highlight:{type:Boolean}},emits:["start"],setup(P,{emit:h}){const t=h;return(r,s)=>(o(),a("div",{class:de(["flex flex-col items-center justify-center py-20 animate-in zoom-in-95 duration-700",r.highlight?"ring-2 ring-primary/40 shadow-[0_0_0_6px_rgba(14,165,233,0.15)] rounded-[2.5rem]":""])},[e("div",bg,[s[1]||(s[1]=e("div",{class:"absolute -inset-4 bg-gradient-to-r from-primary to-purple-500 rounded-full opacity-20 blur-2xl animate-pulse"},null,-1)),l(n(bn),{class:"h-24 w-24 text-primary relative z-10"})]),s[12]||(s[12]=e("h2",{class:"text-3xl font-bold mb-4"},"The Mock Defense",-1)),s[13]||(s[13]=e("p",{class:"max-w-md text-center text-muted-foreground mb-12"}," Face a panel of AI examiners who will challenge your research from different perspectives. Record your session for post-defense feedback. ",-1)),e("div",yg,[l(n(et),{class:"border-border/50 bg-card/50 backdrop-blur-sm rounded-3xl overflow-hidden"},{default:$(()=>[l(n(mt),{class:"pb-2"},{default:$(()=>[l(n(xt),{class:"text-base flex items-center gap-2"},{default:$(()=>[l(n(bn),{class:"h-4 w-4 text-primary"}),s[2]||(s[2]=ne(" How the simulation works ",-1))]),_:1}),l(n(ht),null,{default:$(()=>[...s[3]||(s[3]=[ne("Chair-moderated rotation with real-time feedback.",-1)])]),_:1})]),_:1}),l(n(ot),{class:"space-y-3 text-sm text-muted-foreground"},{default:$(()=>[s[4]||(s[4]=e("p",null,"1) The chair opens, then panelists rotate with targeted questions.",-1)),s[5]||(s[5]=e("p",null,"2) You respond; the system scores clarity and technical depth.",-1)),s[6]||(s[6]=e("p",null,"3) Hints guide you before answers are revealed.",-1)),s[7]||(s[7]=e("p",null,"4) When the question limit is reached, the session auto-completes and scores.",-1)),e("p",wg,"Total questions: "+T(r.plannedQuestionLimit)+". Each question is worth 10 marks (100 total).",1)]),_:1})]),_:1}),l(n(et),{class:"border-border/50 bg-card/50 backdrop-blur-sm rounded-3xl overflow-hidden"},{default:$(()=>[l(n(mt),{class:"pb-2"},{default:$(()=>[l(n(xt),{class:"text-base flex items-center gap-2"},{default:$(()=>[l(n(Rt),{class:"h-4 w-4 text-emerald-500"}),s[8]||(s[8]=ne(" Scoring breakdown ",-1))]),_:1}),l(n(ht),null,{default:$(()=>[...s[9]||(s[9]=[ne("Readiness is a weighted summary of core metrics.",-1)])]),_:1})]),_:1}),l(n(ot),{class:"space-y-3 text-sm text-muted-foreground"},{default:$(()=>[...s[10]||(s[10]=[e("div",{class:"flex items-center justify-between"},[e("span",null,"Per-question mark"),e("span",{class:"text-foreground font-semibold"},"10 marks total")],-1),e("div",{class:"flex items-center justify-between"},[e("span",null,"Derived from"),e("span",{class:"text-foreground font-semibold"},"Clarity + Depth")],-1),e("div",{class:"flex items-center justify-between"},[e("span",null,"Coverage, confidence, and response time"),e("span",{class:"text-foreground font-semibold"},"Shown as diagnostics")],-1),e("div",{class:"text-xs text-muted-foreground/80"}," 10 questions x 10 marks each = 100 total marks. Readiness uses clarity/depth averages. ",-1)])]),_:1})]),_:1})]),e("div",kg,[(o(!0),a(ee,null,le(r.activeSimulationPersonas,d=>(o(),he(n(et),{key:d.id,class:"border-border/50 bg-card/50 backdrop-blur-sm rounded-3xl overflow-hidden hover:border-primary/30 transition-all"},{default:$(()=>[l(n(ot),{class:"p-8 text-center space-y-3"},{default:$(()=>[e("div",_g,T(d.avatar),1),e("h4",Sg,T(d.name),1),l(n(_t),{variant:"secondary",class:"text-[10px]"},{default:$(()=>[ne(T(d.role),1)]),_:2},1024),e("p",$g,T(d.name==="The Skeptic"?"High pressure, doubts your findings.":d.name==="The Methodologist"?"Strict on research design and ethics.":"Focuses on the bigger picture."),1)]),_:2},1024)]),_:2},1024))),128))]),l(n(ae),{size:"lg",onClick:s[0]||(s[0]=d=>t("start")),disabled:r.isStarting,class:"px-12 py-8 text-xl font-bold rounded-3xl shadow-2xl shadow-primary/20 gap-4 hover:scale-105 transition-all"},{default:$(()=>[l(n(Sn),{class:"h-6 w-6 fill-current"}),s[11]||(s[11]=ne(" START SIMULATION ",-1))]),_:1},8,["disabled"])],2))}}),Cg={class:"flex flex-col gap-6 md:flex-row md:items-end md:justify-between mb-12"},Fg={class:"space-y-4"},Ig={class:"flex items-center gap-2"},Tg={key:0,class:"flex items-start justify-between gap-3 rounded-2xl border border-amber-500/30 bg-amber-500/10 px-4 py-3 text-sm text-amber-100/90"},Eg={class:"flex flex-row md:flex-col items-center gap-4 md:gap-3 p-4 md:p-6 rounded-3xl border border-primary/10 bg-primary/5 backdrop-blur-sm w-full md:w-auto"},Ag={class:"relative flex items-center justify-center shrink-0"},Bg={class:"h-16 w-16 md:h-20 md:w-20 transform -rotate-90"},Dg=["stroke-dasharray","stroke-dashoffset"],jg=["stroke-dasharray","stroke-dashoffset"],Pg={class:"absolute text-base md:text-xl font-bold"},Lg={class:"text-[10px] md:text-xs font-semibold uppercase tracking-wider text-muted-foreground text-center"},Mg={key:0,class:"text-[10px] md:text-xs text-muted-foreground text-center"},Og=ze({__name:"DefenseHeader",props:{isSimulating:{type:Boolean},formattedReadinessScore:{},overallReadinessScore:{},lowBalanceMessage:{}},emits:["back","dismissLowBalance","replayOnboarding"],setup(P,{emit:h}){const t=h;return(r,s)=>(o(),a("div",Cg,[e("div",Fg,[e("div",Ig,[l(n(ae),{variant:"ghost",size:"sm",onClick:s[0]||(s[0]=d=>t("back")),class:de(["h-8 w-8 rounded-full p-0",r.isSimulating?"text-zinc-400 hover:text-white":""])},{default:$(()=>[l(n(wn),{class:"h-4 w-4"})]),_:1},8,["class"]),l(n(_t),{variant:"outline",class:"gap-1 border-primary/20 bg-primary/5 text-primary"},{default:$(()=>[l(n(ao),{class:"h-3 w-3"}),s[3]||(s[3]=ne(" Defense Readiness ",-1))]),_:1}),l(n(ae),{variant:"ghost",size:"sm",class:"text-[10px] uppercase tracking-widest text-muted-foreground",disabled:r.isSimulating,onClick:s[1]||(s[1]=d=>t("replayOnboarding"))},{default:$(()=>[...s[4]||(s[4]=[ne(" Replay tour ",-1)])]),_:1},8,["disabled"])]),e("h1",{class:de(["text-3xl font-bold tracking-tight md:text-6xl font-display",r.isSimulating?"text-white":"text-foreground"])}," Prepare for Victory ",2),e("p",{class:de(["max-w-2xl text-base md:text-lg text-muted-foreground",r.isSimulating?"text-zinc-400":""])}," Master your project defense with AI-predicted questions, structured presentation guides, and high-stakes simulation. ",2),r.lowBalanceMessage?(o(),a("div",Tg,[e("span",null,T(r.lowBalanceMessage),1),l(n(ae),{variant:"ghost",size:"sm",class:"h-7 px-2 text-amber-100/90 hover:text-white",onClick:s[2]||(s[2]=d=>t("dismissLowBalance"))},{default:$(()=>[...s[5]||(s[5]=[ne(" Dismiss ",-1)])]),_:1})])):V("",!0)]),ct(e("div",Eg,[e("div",Ag,[(o(),a("svg",Bg,[s[6]||(s[6]=e("circle",{class:"text-muted/20 md:hidden","stroke-width":"5",stroke:"currentColor",fill:"transparent",r:"28",cx:"32",cy:"32"},null,-1)),s[7]||(s[7]=e("circle",{class:"text-muted/20 hidden md:block","stroke-width":"6",stroke:"currentColor",fill:"transparent",r:"34",cx:"40",cy:"40"},null,-1)),e("circle",{class:"text-primary transition-all duration-1000 ease-out md:hidden","stroke-width":"5","stroke-dasharray":2*Math.PI*28,"stroke-dashoffset":2*Math.PI*28*(1-(r.formattedReadinessScore??0)/100),"stroke-linecap":"round",stroke:"currentColor",fill:"transparent",r:"28",cx:"32",cy:"32"},null,8,Dg),e("circle",{class:"text-primary transition-all duration-1000 ease-out hidden md:block","stroke-width":"6","stroke-dasharray":2*Math.PI*34,"stroke-dashoffset":2*Math.PI*34*(1-(r.formattedReadinessScore??0)/100),"stroke-linecap":"round",stroke:"currentColor",fill:"transparent",r:"34",cx:"40",cy:"40"},null,8,jg)])),e("span",Pg,T(r.formattedReadinessScore===null?"—":`${r.formattedReadinessScore}%`),1)]),e("span",Lg,T(r.formattedReadinessScore===null?"Not started":"Readiness Score"),1),r.overallReadinessScore!==null?(o(),a("span",Mg," Overall "+T(r.overallReadinessScore)+"% ",1)):V("",!0)],512),[[ns,!r.isSimulating]])]))}}),Rg={class:"flex p-1 rounded-2xl bg-muted/50 border border-border/50 mb-8 w-full sm:w-auto sm:inline-flex"},Hg=ze({__name:"DefenseViewToggle",props:{modelValue:{},isSimulating:{type:Boolean}},emits:["update:modelValue"],setup(P,{emit:h}){const t=h;return(r,s)=>ct((o(),a("div",Rg,[e("button",{onClick:s[0]||(s[0]=d=>t("update:modelValue","preparation")),class:de(["flex-1 sm:flex-none flex items-center justify-center gap-2 px-4 md:px-6 py-2 rounded-xl text-sm font-medium transition-all",r.modelValue==="preparation"?"bg-background shadow-sm text-foreground":"text-muted-foreground hover:text-foreground"])},[l(n(ro),{class:"h-4 w-4"}),s[2]||(s[2]=e("span",{class:"hidden sm:inline"},"Preparation Suite",-1)),s[3]||(s[3]=e("span",{class:"sm:hidden"},"Prep",-1))],2),e("button",{onClick:s[1]||(s[1]=d=>t("update:modelValue","simulation")),class:de(["flex-1 sm:flex-none flex items-center justify-center gap-2 px-4 md:px-6 py-2 rounded-xl text-sm font-medium transition-all",r.modelValue==="simulation"?"bg-background shadow-sm text-foreground":"text-muted-foreground hover:text-foreground"])},[l(n(bn),{class:"h-4 w-4"}),s[4]||(s[4]=e("span",{class:"hidden sm:inline"},"Simulation Lab",-1)),s[5]||(s[5]=e("span",{class:"sm:hidden"},"Sim",-1))],2)],512)),[[ns,!r.isSimulating]])}}),Wg={class:"space-y-6"},Ng={class:"space-y-2"},Ug={class:"text-[10px] font-semibold uppercase tracking-[0.3em] text-muted-foreground"},Gg={class:"text-xl md:text-2xl font-display font-bold text-foreground"},Vg={class:"text-sm md:text-base text-muted-foreground leading-relaxed"},qg={class:"flex items-center justify-between gap-3"},Xg={class:"flex items-center gap-2"},Yg=ze({__name:"DefenseOnboardingDialog",props:{modelValue:{type:Boolean},steps:{},step:{}},emits:["update:modelValue","update:step","complete","skip"],setup(P,{emit:h}){const t=P,r=h,s=U({get:()=>t.step,set:S=>r("update:step",S)}),d=U({get:()=>t.modelValue,set:S=>r("update:modelValue",S)}),c=U(()=>t.steps[s.value]),g=U(()=>s.value>=t.steps.length-1);Ee(()=>t.modelValue,S=>{S&&(s.value=0)});const v=()=>{if(g.value){r("complete"),r("update:modelValue",!1);return}s.value+=1},w=()=>{s.value=Math.max(0,s.value-1)},E=()=>{r("skip"),r("update:modelValue",!1)};return(S,u)=>(o(),he(n(os),{open:d.value,"onUpdate:open":u[0]||(u[0]=F=>d.value=F)},{default:$(()=>[l(n(ss),{class:"max-w-xl w-[95vw] rounded-3xl border border-border/60 bg-background/95 backdrop-blur-xl shadow-2xl"},{default:$(()=>[e("div",Wg,[e("div",Ng,[e("div",Ug," Step "+T(s.value+1)+" of "+T(S.steps.length),1),e("h3",Gg,T(c.value?.title),1),e("p",Vg,T(c.value?.description),1)]),e("div",qg,[l(n(ae),{variant:"ghost",size:"sm",class:"text-xs",onClick:E},{default:$(()=>[...u[1]||(u[1]=[ne(" Skip ",-1)])]),_:1}),e("div",Xg,[l(n(ae),{variant:"outline",size:"sm",class:"text-xs",disabled:s.value===0,onClick:w},{default:$(()=>[...u[2]||(u[2]=[ne(" Back ",-1)])]),_:1},8,["disabled"]),l(n(ae),{size:"sm",class:"text-xs font-semibold",onClick:v},{default:$(()=>[ne(T(g.value?"Start":"Next"),1)]),_:1})])])])]),_:1})]),_:1},8,["open"]))}});function Kg(P){const h=A(null),t=A([]),r=A(null),s=A(null),d=A(!1),c=A(!1),g=A(!1),v=U(()=>!!h.value);return{session:h,messages:t,feedback:r,performanceMetrics:s,isStarting:d,isLoading:c,isSending:g,hasSession:v,startSession:async C=>{if(!d.value){d.value=!0;try{const{data:M}=await Fe.post(`/api/projects/${P}/defense/sessions`,C);return h.value=M.session,t.value=[],r.value=null,s.value=h.value?.performance_metrics??null,M.session}finally{d.value=!1}}},loadSession:async C=>{if(!c.value){c.value=!0;try{const{data:M}=await Fe.get(`/api/projects/${P}/defense/sessions/${C}`);h.value=M.session,t.value=M.session?.messages??[],r.value=M.session?.feedback??null,s.value=M.session?.performance_metrics??null}finally{c.value=!1}}},getNextQuestion:async(C,M,W)=>{const{data:K}=await Fe.get(`/api/projects/${P}/defense/sessions/${C}/next-question`,{params:{...M?{persona:M}:{},...W?{request_hint:1}:{}}});return t.value.push(K.message),h.value=K.session,K.message},sendResponse:async(C,M,W)=>{if(g.value)return;g.value=!0;const K=-Date.now(),I={id:K,session_id:C,role:"student",panelist_persona:null,content:M,response_time_ms:W??null};t.value.push(I);try{const{data:p}=await Fe.post(`/api/projects/${P}/defense/sessions/${C}/respond`,{response:M,response_time_ms:W}),z=t.value.findIndex(H=>H.id===K);return z>=0?t.value[z]=p.message:t.value.push(p.message),s.value=p.performance_metrics,p}catch(p){throw t.value=t.value.filter(z=>z.id!==K),p}finally{g.value=!1}},endSession:async C=>{const{data:M}=await Fe.post(`/api/projects/${P}/defense/sessions/${C}/end`);return h.value=M.session,r.value=M.feedback,s.value=M.session?.performance_metrics??null,M.feedback},loadTranscript:async C=>{const{data:M}=await Fe.get(`/api/projects/${P}/defense/sessions/${C}/transcript`);return t.value=M.messages,M.messages}}}const Qg={fontFamily:"Arial",fontSize:18,fontWeight:"normal",fontStyle:"normal",textAlign:"left",color:"#374151",lineHeight:1.4,letterSpacing:0},pe={titleY:4,titleHeight:10,contentTop:16,contentBottom:94,contentGap:2,leftX:5,rightX:52,columnWidth:42,centeredX:12,centeredWidth:76},Jg=P=>P*100/540,kt=(P,h)=>Jg(P)*h,Fn=(P,h)=>{const r=80*(P/90)*(16/h);return Math.max(20,Math.floor(r))},Zg=(P,h,t)=>{const r=Fn(h,t);return P.split(`
`).reduce((s,d)=>{const c=d.trim();return c?s+Math.max(1,Math.ceil(c.length/r)):s+1},0)},Gn=(P,h,t,r)=>{const s=P.split(/\s+/).filter(Boolean);if(!s.length)return[""];const d=Fn(h,t),c=[];let g=[],v="",w=0;const E=()=>{v.trim()&&(g.push(v.trim()),v="",w+=1)};for(const S of s){const u=v?`${v} ${S}`:S;u.length>d?(E(),w>=r&&(c.push(g.join(" ")),g=[],w=0),v=S):v=u}return E(),g.length&&c.push(g.join(" ")),c},Lt=(P,h,t,r)=>{const s=[];let d=[],c=0;const g=Fn(h,t);return P.forEach(v=>{const w=at(v),E=Math.max(1,Math.ceil((w.length+2)/g));d.length&&c+E>r&&(s.push(d),d=[],c=0),d.push(w),c+=E}),d.length&&s.push(d),s},vt=(P,h,{x:t,y:r,width:s,fontSize:d,fontWeight:c="normal",textAlign:g="left",lineHeight:v=1.4,color:w="#374151",zIndex:E})=>{const S=Zg(h,s,d),u=Math.max(kt(d,v)*S,kt(d,v));return P.push({id:Ne(),type:"text",x:t,y:r,width:s,height:u,rotation:0,zIndex:E,opacity:1,text:{...Qg,content:h,fontSize:d,fontWeight:c,textAlign:g,color:w,lineHeight:v}}),r+u+pe.contentGap},ev=P=>{if(!P.length)return;const h=P.reduce((u,F)=>{const R=F.x,C=F.y,M=F.x+F.width,W=F.y+F.height;return{minX:Math.min(u.minX,R),minY:Math.min(u.minY,C),maxX:Math.max(u.maxX,M),maxY:Math.max(u.maxY,W)}},{minX:100,minY:100,maxX:0,maxY:0}),t=h.maxX-h.minX,r=h.maxY-h.minY;if(t<=0||r<=0)return;const s=50,d=50,c=h.minX+t/2,g=h.minY+r/2;let v=s-c,w=d-g;const E=2,S=98;h.minX+v<E&&(v=E-h.minX),h.maxX+v>S&&(v=S-h.maxX),h.minY+w<E&&(w=E-h.minY),h.maxY+w>S&&(w=S-h.maxY),P.forEach(u=>{u.x=Math.max(0,Math.min(100-u.width,u.x+v)),u.y=Math.max(0,Math.min(100-u.height,u.y+w))})};function tv(P){return P.map((h,t)=>{const r=[];let s=0,d=pe.contentTop;const c=pe.contentBottom;r.push({id:Ne(),type:"text",x:pe.centeredX,y:pe.titleY,width:pe.centeredWidth,height:pe.titleHeight,rotation:0,zIndex:s++,opacity:1,text:{content:h.title||`Slide ${t+1}`,fontFamily:"Arial",fontSize:32,fontWeight:"bold",fontStyle:"normal",textAlign:"center",color:"#111827",lineHeight:1.2,letterSpacing:0}});const g=h.layout||"bullets",v=h.content_type||"bullets";if(g==="two_column"){const w=h.bullets||[],E=Math.ceil(w.length/2),S=w.slice(0,E),u=w.slice(E),F=Math.max(4,Math.floor((c-d)/kt(18,1.4)));Lt(S,pe.columnWidth,18,F).forEach(C=>{d=vt(r,C.map(M=>`• ${at(M)}`).join(`
`),{x:pe.leftX,y:d,width:pe.columnWidth,fontSize:18,zIndex:s++})});let R=pe.contentTop;Lt(u,pe.columnWidth,18,F).forEach(C=>{R=vt(r,C.map(M=>`• ${at(M)}`).join(`
`),{x:pe.rightX,y:R,width:pe.columnWidth,fontSize:18,zIndex:s++})})}else if(g==="image_left"||g==="image_right"){const w=g==="image_left"?pe.leftX:pe.rightX,E=g==="image_left"?pe.rightX:pe.leftX;if(h.image_url&&r.push({id:Ne(),type:"image",x:w,y:pe.contentTop,width:pe.columnWidth,height:c-pe.contentTop,rotation:0,zIndex:s++,opacity:1,image:{url:h.image_url,fit:h.image_fit||"contain"}}),h.bullets?.length){const S=Math.max(4,Math.floor((c-d)/kt(18,1.4)));Lt(h.bullets,pe.columnWidth,18,S).forEach(u=>{d=vt(r,u.map(F=>`• ${at(F)}`).join(`
`),{x:E,y:d,width:pe.columnWidth,fontSize:18,zIndex:s++})})}}else{if(v==="paragraphs"&&h.paragraphs?.length){const E=Math.max(4,Math.floor((c-d)/kt(16,1.5)));h.paragraphs.forEach(S=>{if(d>=c)return;Gn(at(S),pe.centeredWidth,16,E).forEach(F=>{d>=c||(d=vt(r,F,{x:pe.centeredX,y:d,width:pe.centeredWidth,fontSize:16,textAlign:"justify",lineHeight:1.5,zIndex:s++}))})})}else if(v==="mixed"){if(h.paragraphs?.length){const E=Math.max(4,Math.floor((c-d)/kt(16,1.4)));h.paragraphs.forEach(S=>{d>=c||Gn(at(S),pe.centeredWidth,16,E).forEach(u=>{d>=c||(d=vt(r,u,{x:pe.centeredX,y:d,width:pe.centeredWidth,fontSize:16,lineHeight:1.4,zIndex:s++}))})})}if(h.headings?.length&&h.headings.forEach(w=>{d>=c||(w.heading&&(d=vt(r,at(w.heading),{x:pe.centeredX,y:d,width:pe.centeredWidth,fontSize:20,fontWeight:"bold",color:"#1F2937",zIndex:s++})),w.content&&(d=vt(r,at(w.content),{x:pe.centeredX+2,y:d,width:pe.centeredWidth-4,fontSize:15,color:"#374151",zIndex:s++})))}),h.bullets?.length){const w=Math.max(4,Math.floor((c-d)/kt(18,1.4)));Lt(h.bullets,pe.centeredWidth,18,w).forEach(E=>{d>=c||(d=vt(r,E.map(S=>`• ${at(S)}`).join(`
`),{x:pe.centeredX,y:d,width:pe.centeredWidth,fontSize:18,zIndex:s++}))})}}else if(h.bullets?.length){const w=Math.max(4,Math.floor((c-d)/kt(18,1.4)));Lt(h.bullets,pe.centeredWidth,18,w).forEach(E=>{d>=c||(d=vt(r,E.map(S=>`• ${at(S)}`).join(`
`),{x:pe.centeredX,y:d,width:pe.centeredWidth,fontSize:18,zIndex:s++}))})}h.charts?.length&&h.charts.forEach(w=>{d>=c||(r.push({id:Ne(),type:"chart",x:pe.centeredX+5,y:d,width:60,height:35,rotation:0,zIndex:s++,opacity:1,chart:{chartType:w.type||"bar",title:w.title||"",labels:w.x||[],datasets:(w.series||[]).map(E=>({label:E.name,data:E.data,backgroundColor:["#6366F1","#8B5CF6","#EC4899","#F59E0B"]})),showLegend:!0,showGrid:!0}}),d+=38)}),h.tables?.length&&h.tables.forEach(w=>{d>=c||(r.push({id:Ne(),type:"table",x:pe.centeredX,y:d,width:70,height:25,rotation:0,zIndex:s++,opacity:1,table:{title:w.title||"",columns:w.columns.map((E,S)=>({key:`col${S}`,label:E})),rows:w.rows.map(E=>{const S={};return E.forEach((u,F)=>{S[`col${F}`]=u}),S}),headerBackground:"#F3F4F6",headerColor:"#111827",alternateRowColors:!0}}),d+=28)}),h.image_url&&g!=="image_left"&&g!=="image_right"&&r.push({id:Ne(),type:"image",x:60,y:pe.contentTop,width:35,height:40,rotation:0,zIndex:s++,opacity:1,image:{url:h.image_url,fit:h.image_fit||"contain"}})}return{id:h.id||Ne(),title:h.title||`Slide ${t+1}`,elements:(ev(r),r),backgroundColor:"#FFFFFF",speaker_notes:h.speaker_notes}})}function nv(P){return P.map(h=>{const t={id:h.id,title:h.title,bullets:[],paragraphs:[],speaker_notes:h.speaker_notes,layout:"bullets"};h.elements.filter(g=>g.type==="text").forEach(g=>{g.text?.content&&(g.text.fontSize&&g.text.fontSize>=28?t.title=g.text.content:t.bullets?.push(g.text.content))});const s=h.elements.filter(g=>g.type==="chart");s.length>0&&(t.charts=s.map(g=>({type:g.chart?.chartType||"bar",title:g.chart?.title,x:g.chart?.labels||[],series:(g.chart?.datasets||[]).map(v=>({name:v.label||"Series",data:v.data||[]}))})));const d=h.elements.filter(g=>g.type==="table");d.length>0&&(t.tables=d.map(g=>({title:g.table?.title,columns:(g.table?.columns||[]).map(v=>v.label),rows:(g.table?.rows||[]).map(v=>(g.table?.columns||[]).map(w=>String(v[w.key]||"")))})));const c=h.elements.find(g=>g.type==="image");return c?.image&&(t.image_url=c.image.url,t.image_fit=c.image.fit),t})}function at(P){return P?String(P).replace(/<br\s*\/?>/gi,`
`).replace(/<[^>]+>/g,"").replace(/&nbsp;/g," ").trim():""}function sv(P){if(!Array.isArray(P)||P.length===0)return!1;const h=P[0];return Array.isArray(h?.elements)}function Vn(P,h=!1){return Array.isArray(P)?sv(P)&&!h?P:tv(P):[]}const ov={class:"mx-auto max-w-7xl px-4 py-8 sm:px-6 lg:px-8"},lv={key:0,class:"grid gap-8 lg:grid-cols-12 animate-in fade-in slide-in-from-bottom-4 duration-700"},iv={key:2,class:"fixed inset-0 z-50 bg-zinc-950 flex flex-col items-center p-4 md:p-8 animate-in fade-in duration-500"},av={class:"grid lg:grid-cols-12 gap-8 w-full max-w-6xl flex-grow overflow-hidden"},pn="defense:onboarding:v1",jv=ze({__name:"Defense",props:{project:{},defenseConfig:{}},setup(P){const h=P,t=U(()=>({default_question_limit:h.defenseConfig?.default_question_limit??10,default_difficulty:h.defenseConfig?.default_difficulty??"undergraduate",personas:h.defenseConfig?.personas??[]})),r=A("preparation"),s=A(!1),d=A(0),c=A(null),g=A(null),v=A(null),w=A(null),E=A(null),S=A(!1),u=U(()=>t.value.default_question_limit),F={skeptic:"🧐",methodologist:"🧪",generalist:"🌍",theorist:"📚",practitioner:"🧭"},R=U(()=>t.value.personas.map(_=>({..._,avatar:_.avatar??F[_.id]??"•"}))),C=A(!1),M=A(0),W=[{title:"Scan your prep materials",description:"Review the executive briefing and predicted questions before you start. The goal is clarity, not memorization."},{title:"Draft a strong opening",description:"Write a concise opening statement and refine it with analysis so you hit the right tone immediately."},{title:"Run the mock defense",description:"Start the simulation, answer questions, and request hints when you need momentum."}],K=A([]),I=A(!1),p=A(!1),z=A(""),H=A(null),G=A([]),Q=A(!1),Y=A([]);A(0),A(0);const ke=A(null);A(!1);const Re=A(!1);A("slides");const Ce=A("idle"),Ae=A(null),Le=A(null),Be=A(!1),He=A(null),fe=A(null),ye=A([]),se=A([]),q=A(0),m=A(!1),y=A(""),N=A(null),O=A(!1),J=A(!1),L=A(!1),te=A(null),ue=!0,{session:oe,messages:Me,performanceMetrics:Se,startSession:we,loadSession:Ie,getNextQuestion:De,sendResponse:tt,endSession:ut,isStarting:pt,isSending:xe}=Kg(h.project.id),We=A(!1),Ue=()=>{We.value=!We.value},$e=U(()=>R.value.reduce((_,B)=>(_[B.id]=B.name,_),{})),_e=_=>{const B=_?.response,ie=B?.data?.message;return B?.status===402||ie&&ie.includes("Insufficient credit balance")?(E.value=ie||"Insufficient credit balance. Please top up to continue.",dn.error(E.value),!0):!1},Xe=()=>{E.value=null},D=_=>{if(!_)return[];if(Array.isArray(_))return _;if(typeof _=="string")try{return D(JSON.parse(_))}catch{return[]}if(typeof _=="object"){const B=_.slides;return B?D(B):Object.values(_)}return[]},Z=async()=>{if(!pt.value)try{const _=await Fe.get(`/api/projects/${h.project.id}/defense/sessions/active`);if(_.data.session){await b(_.data.session.id);return}const B=R.value.map(ie=>ie.id);await we({selected_panelists:B,difficulty_level:t.value.default_difficulty,question_limit:u.value}),g.value=oe.value?.started_at?null:Date.now(),s.value=!0,r.value="simulation",oe.value&&await be()}catch(_){if(_e(_))return;console.error("Failed to start simulation:",_)}},re=async(_=!1)=>{if(!S.value){S.value=_,console.log("[Defense] Finish & Analysis clicked",{sessionId:oe.value?.id,status:oe.value?.status});try{if(oe.value){const B=await ut(oe.value.id);console.log("[Defense] endSession response",B),B?.recommendations&&B.recommendations.toLowerCase().includes("credit balance")&&(E.value=B.recommendations,dn.error(B.recommendations)),_&&dn.success("Simulation completed. Your score is ready.")}}catch(B){if(_e(B))return;console.error("[Defense] Failed to end simulation:",B)}finally{await Bt(),s.value=!1,r.value="preparation",S.value=!1,g.value=null,d.value=0}}},me=async()=>{if(!oe.value||!z.value.trim())return;const _=z.value.trim();z.value="";try{if(await tt(oe.value.id,_),oe.value?.question_limit&&oe.value.questions_asked>=oe.value.question_limit){await re(!0);return}await be()}catch(B){if(_e(B))return;const ie=B?.response?.data?.message;if(ie&&ie.toLowerCase().includes("time limit")){await re(!0);return}console.error("Failed to submit response:",B)}},be=async(_=!1)=>{if(oe.value){L.value=!0;try{const B=await De(oe.value.id,void 0,_);te.value=B.panelist_persona??null}catch(B){if(_e(B))return;const ie=B?.response?.data?.message;if(ie&&ie.toLowerCase().includes("time limit")){await re(!0);return}if(ie&&ie.toLowerCase().includes("question limit")){await re(!0);return}console.error("Failed to fetch next question:",B)}finally{L.value=!1}}},Ye=async()=>{!oe.value||L.value||await be(!0)},Ge=async()=>{if(!Q.value){Q.value=!0;try{const B=(await Fe.get(`/api/projects/${h.project.id}/defense/executive-briefing`,{params:{force_refresh:1}})).data.briefing;if(typeof B=="string"&&B.includes("```json"))try{const ie=B.replace(/```json\n?|\n?```/g,""),Ke=JSON.parse(ie);G.value=Ke.slides||[],H.value=null}catch(ie){console.warn("Failed to parse briefing JSON",ie),H.value=B,G.value=[]}else typeof B=="object"&&B.slides?(G.value=B.slides,H.value=null):(H.value=B??null,G.value=[])}catch(_){_e(_),console.error("Failed to load executive briefing:",_)}finally{Q.value=!1}}},Ve=_=>{if(_)if(typeof _=="string"&&_.includes("```json"))try{const B=_.replace(/```json\n?|\n?```/g,""),ie=JSON.parse(B);Y.value=ie.slides||[],ke.value=null}catch(B){console.warn("Failed to parse presentation guide JSON",B),ke.value=_,Y.value=[]}else if(typeof _=="object"&&_.slides)Y.value=_.slides,ke.value=null;else if(typeof _=="string"&&_.trim().startsWith("{"))try{const B=JSON.parse(_);Y.value=B.slides||[],ke.value=null}catch{ke.value=_,Y.value=[]}else ke.value=_,Y.value=[]},qe=async()=>{if(!(O.value||!y.value.trim())){O.value=!0;try{const _=await Fe.post(`/api/projects/${h.project.id}/defense/opening-statement/analyze`,{opening_statement:y.value.trim()});N.value=_.data.analysis??null}catch(_){_e(_),console.error("Failed to analyze opening statement:",_)}finally{O.value=!1}}},Je=async()=>{if(!J.value){J.value=!0;try{const _=await Fe.get(`/api/projects/${h.project.id}/defense/opening-statement`,{params:{force_refresh:1}});y.value=_.data.opening_statement??""}catch(_){_e(_),console.error("Failed to generate opening statement:",_)}finally{J.value=!1}}},Oe=_=>{if(!_){Ce.value="idle",Ae.value=null,Le.value=null,fe.value=null,ye.value=[],se.value=[];return}Ce.value=_.status||"idle",Ae.value=_.pptx_url??null,Le.value=_.error_message??null,fe.value=_.id??null,_.is_wysiwyg?(se.value=Vn(_.slides||[]),ye.value=nv(se.value)):(ye.value=D(_.slides),se.value=Vn(ye.value)),se.value.length&&q.value>=se.value.length&&(q.value=0)},je=()=>{He.value&&(clearInterval(He.value),He.value=null)},St=()=>{je(),He.value=setInterval(()=>{$t()},6e3)},$t=async()=>{try{const B=(await Fe.get(`/api/projects/${h.project.id}/defense/deck`)).data.deck??null;Oe(B),(B?.status==="ready"||B?.status==="outlined"||B?.status==="failed"||B?.status==="idle")&&je()}catch(_){if(_e(_))return;console.error("Failed to refresh defense deck status:",_)}},it=async(_=!1)=>{if(!Be.value){Be.value=!0;try{const B=await Fe.post(`/api/projects/${h.project.id}/defense/deck`,{force_refresh:_?1:0});Oe(B.data.deck??null),B.data.deck?.status!=="ready"&&St()}catch(B){if(_e(B))return;console.error("Failed to generate defense deck:",B)}finally{Be.value=!1}}},nt=async()=>{if(fe.value){Be.value=!0;try{const _=await Fe.post(`/api/projects/${h.project.id}/defense/deck/${fe.value}/export`);Oe(_.data.deck??null),(()=>{je(),He.value=setInterval(async()=>{try{const Ke=(await Fe.get(`/api/projects/${h.project.id}/defense/deck`)).data.deck??null;if(Oe(Ke),Ke?.status==="ready"&&Ke?.pptx_url){je(),Be.value=!1;const zt=document.createElement("a");zt.href=Ke.pptx_url,zt.click()}else Ke?.status==="failed"&&(je(),Be.value=!1)}catch(ie){console.error("Poll failed",ie)}},3e3)})()}catch(_){if(_e(_))return;console.error("Failed to export defense deck:",_),Be.value=!1}}},k=async _=>{if(fe.value){m.value=!0;try{const B=await Fe.patch(`/api/projects/${h.project.id}/defense/deck/${fe.value}`,{slides:_});Oe(B.data.deck??null)}catch(B){if(_e(B))return;console.error("Failed to save defense deck slides:",B)}finally{m.value=!1}}},j=Mn(_=>{k(_)},800),ge=_=>{ye.value=_,j(_)},ve=_=>{se.value=_,ft(_)},Pe=async _=>{if(fe.value){m.value=!0;try{const B=await Fe.patch(`/api/projects/${h.project.id}/defense/deck/${fe.value}`,{slides:_,is_wysiwyg:!0});B.data.deck&&(Ce.value=B.data.deck.status,Ae.value=B.data.deck.pptx_url??null)}catch(B){if(_e(B))return;console.error("Failed to save WYSIWYG slides:",B)}finally{m.value=!1}}},ft=Mn(_=>{Pe(_)},800),It=async()=>{if(!p.value){p.value=!0;try{const _=await Fe.post(`/api/projects/${h.project.id}/defense/questions/generate`,{count:5});K.value=_.data.questions||[]}catch(_){_e(_),console.error("Failed to generate predicted questions:",_)}finally{p.value=!1}}},nn=async()=>{if(!I.value){I.value=!0;try{const _=await Fe.get(`/api/projects/${h.project.id}/defense/questions`,{params:{limit:5,skip_generation:1}});K.value=_.data.questions||[]}catch(_){_e(_),console.error("Failed to load predicted questions:",_)}finally{I.value=!1}}},At=async()=>{try{const B=(await Fe.get(`/api/projects/${h.project.id}/defense/preparation`)).data.preparation;if(B){if(H.value=B.executive_briefing??null,B.executive_briefing){if(typeof B.executive_briefing=="string"&&B.executive_briefing.includes("```json"))try{const ie=B.executive_briefing.replace(/```json\n?|\n?```/g,""),Ke=JSON.parse(ie);G.value=Ke.slides||[],H.value=null}catch{}else if(typeof B.executive_briefing=="object"&&B.executive_briefing.slides)G.value=B.executive_briefing.slides,H.value=null;else if(typeof B.executive_briefing=="string"&&B.executive_briefing.trim().startsWith("{"))try{const ie=JSON.parse(B.executive_briefing);G.value=ie.slides||[],H.value=null}catch{}}B.presentation_guide&&Ve(B.presentation_guide),y.value=B.opening_statement??"",N.value=B.opening_analysis??null,B.opening_statement||await Je()}}catch(_){_e(_),console.error("Failed to load preparation data:",_)}},Nt=A([]),wt=A(!1),Bt=async()=>{if(!wt.value){wt.value=!0;try{const _=await Fe.get(`/api/projects/${h.project.id}/defense/sessions`);Nt.value=_.data.sessions||[],w.value=_.data.overall_readiness_score??null}catch(_){_e(_),console.error("Failed to load session history:",_)}finally{wt.value=!1}}},b=async _=>{await Ie(_),g.value=oe.value?.started_at?null:Date.now(),s.value=!0,r.value="simulation"};async function i(){try{const _=await Fe.get(`/api/projects/${h.project.id}/defense/sessions/active`);_.data.session&&await b(_.data.session.id)}catch(_){_e(_),console.error("Failed to load active session:",_)}}const f=U(()=>s.value?"bg-zinc-950 text-white":"bg-background"),x=U(()=>Me.value||[]),X=U(()=>Se.value?.readiness_score??v.value??null),Te=U(()=>Se.value?.clarity??0),Ze=U(()=>Se.value?.technical_depth??0);U(()=>Se.value?.question_coverage??0);const Dt=U(()=>Se.value?.confidence_score??0);U(()=>Se.value?.response_time??0);const Ut=U(()=>x.value.reduce((_,B)=>{if(B.role!=="panelist"||B.is_follow_up)return _;const ie=B.panelist_persona??"panelist";return _[ie]=(_[ie]||0)+1,_},{})),sn=U(()=>Object.values(Ut.value).reduce((_,B)=>_+B,0)),on=U(()=>u.value),ln=U(()=>{const _=R.value;if(_.length===0)return{};const B=Math.floor(u.value/_.length),ie=u.value%_.length,Ke=_.findIndex(zt=>zt.id==="generalist");return _.reduce((zt,vs,An)=>{const hs=Ke>=0?An===Ke:An===0;return zt[vs.id]=B+(hs?ie:0),zt},{})}),rs=U(()=>oe.value?.question_limit?`${sn.value}/${oe.value.question_limit}`:"Adaptive"),an=()=>{const _=oe.value?.started_at?Date.parse(oe.value.started_at):null,ie=(Number.isNaN(_)?null:_)??g.value;if(!ie){d.value=0;return}d.value=Math.max(0,Math.floor((Date.now()-ie)/1e3))},ds=()=>{c.value||(an(),c.value=setInterval(an,1e3))},In=()=>{c.value&&(clearInterval(c.value),c.value=null)},Tn=U(()=>{const _=d.value,B=Math.floor(_/60),ie=_%60;return`${String(B).padStart(2,"0")}:${String(ie).padStart(2,"0")}`}),Gt=U(()=>{const _=oe.value?.time_limit_minutes;if(!_)return null;const B=_*60;return Math.max(0,B-d.value)}),cs=U(()=>{const _=Gt.value;if(_===null)return Tn.value;const B=Math.floor(_/60),ie=_%60;return`${String(B).padStart(2,"0")}:${String(ie).padStart(2,"0")}`}),us=U(()=>Gt.value===null?"Elapsed":"Time left"),En=U(()=>Gt.value!==null);yt(()=>{nn(),At(),Bt(),i(),$t(),typeof window<"u"&&!localStorage.getItem(pn)&&(M.value=0,C.value=!0)});const ps=()=>{typeof window<"u"&&localStorage.setItem(pn,"1"),C.value=!1},fs=()=>{typeof window<"u"&&localStorage.setItem(pn,"1"),C.value=!1},gs=()=>{M.value=0,C.value=!0};return Ee([s,oe],([_,B])=>{if(_){C.value=!1,B?.started_at?g.value=null:g.value||(g.value=Date.now()),ds(),an();return}In()},{immediate:!0}),Ee([d,Gt,s],async([_,B,ie])=>{if(!(!ie||S.value)){if(B!==null&&B<=0){await re(!0);return}oe.value?.time_limit_minutes&&_>=oe.value.time_limit_minutes*60&&await re(!0)}}),Ee([C,M],([_,B])=>{!_||s.value||(r.value=B===2?"simulation":"preparation")}),fn(()=>{je(),j.cancel(),In()}),(_,B)=>(o(),he(uo,{title:`Defense Preparation: ${_.project.title}`},{default:$(()=>[l(Yg,{modelValue:C.value,"onUpdate:modelValue":B[0]||(B[0]=ie=>C.value=ie),step:M.value,"onUpdate:step":B[1]||(B[1]=ie=>M.value=ie),steps:W,onComplete:ps,onSkip:fs},null,8,["modelValue","step"]),e("div",{class:de(["min-h-screen transition-colors duration-700",f.value])},[e("div",ov,[l(Og,{"is-simulating":s.value,"formatted-readiness-score":X.value,"overall-readiness-score":w.value,"low-balance-message":E.value,class:de(C.value&&M.value===2?"opacity-40 transition-opacity":""),onBack:B[2]||(B[2]=ie=>n(co).visit(_.route("projects.writing",_.project.slug))),onDismissLowBalance:Xe,onReplayOnboarding:gs},null,8,["is-simulating","formatted-readiness-score","overall-readiness-score","low-balance-message","class"]),l(Hg,{modelValue:r.value,"onUpdate:modelValue":B[3]||(B[3]=ie=>r.value=ie),"is-simulating":s.value,class:de(C.value&&M.value===2?"opacity-40 transition-opacity":"")},null,8,["modelValue","is-simulating","class"]),r.value==="preparation"&&!s.value?(o(),a("div",lv,[l(yi,{modelValue:y.value,"onUpdate:modelValue":B[4]||(B[4]=ie=>y.value=ie),"is-deck-swapped":We.value,"predicted-questions":K.value,"is-generating-questions":p.value,"briefing-slides":G.value,"executive-briefing":H.value,"is-briefing-loading":Q.value,"opening-analysis":N.value,"is-opening-generating":J.value,"is-opening-analyzing":O.value,"highlight-prep":C.value&&M.value===0,"highlight-opening":C.value&&M.value===1,onGeneratePredictedQuestions:It,onRefreshExecutiveBriefing:Ge,onToggleDeckSwap:Ue,onGenerateOpeningStatement:Je,onAnalyzeOpeningStatement:qe},null,8,["modelValue","is-deck-swapped","predicted-questions","is-generating-questions","briefing-slides","executive-briefing","is-briefing-loading","opening-analysis","is-opening-generating","is-opening-analyzing","highlight-prep","highlight-opening"]),e("div",{class:de(["lg:col-span-4",C.value&&M.value<2?"opacity-40 transition-opacity":""])},[l(xg,{project:_.project,"deck-slides":ye.value,"deck-status":Ce.value,"deck-error":Le.value,"deck-download-url":Ae.value,"deck-id":fe.value,"is-deck-generating":Be.value,"is-deck-saving":m.value,"is-guide-expanded":Re.value,"is-production":n(ue),"wysiwyg-slides":se.value,"session-history":Nt.value,"is-history-loading":wt.value,"active-deck-slide-index":q.value,onGenerateDefenseDeck:it,onDownloadPptx:nt,"onUpdate:deckSlides":ge,"onUpdate:wysiwygSlides":ve,"onUpdate:activeDeckSlideIndex":B[5]||(B[5]=ie=>q.value=ie),"onUpdate:isGuideExpanded":B[6]||(B[6]=ie=>Re.value=ie),onOpenSession:b},null,8,["project","deck-slides","deck-status","deck-error","deck-download-url","deck-id","is-deck-generating","is-deck-saving","is-guide-expanded","is-production","wysiwyg-slides","session-history","is-history-loading","active-deck-slide-index"])],2)])):V("",!0),r.value==="simulation"&&!s.value?(o(),he(zg,{key:1,"planned-question-limit":on.value,"active-simulation-personas":R.value,"is-starting":n(pt),highlight:C.value&&M.value===2,onStart:Z},null,8,["planned-question-limit","active-simulation-personas","is-starting","highlight"])):V("",!0),s.value?(o(),a("div",iv,[l(Po,{"formatted-simulation-time":cs.value,"time-label":us.value,"secondary-time-label":En.value?"Elapsed":void 0,"secondary-time":En.value?Tn.value:void 0,"question-limit-label":rs.value,onStop:re},null,8,["formatted-simulation-time","time-label","secondary-time-label","secondary-time","question-limit-label"]),e("div",av,[l(sl,{"active-simulation-personas":R.value,"is-fetching-question":L.value,"thinking-persona-id":te.value,"panelist-question-counts":Ut.value,"panelist-question-target":ln.value,"clarity-score":Te.value,"depth-score":Ze.value,"confidence-score":Dt.value},null,8,["active-simulation-personas","is-fetching-question","thinking-persona-id","panelist-question-counts","panelist-question-target","clarity-score","depth-score","confidence-score"]),l(vl,{modelValue:z.value,"onUpdate:modelValue":B[7]||(B[7]=ie=>z.value=ie),messages:x.value,"persona-lookup":$e.value,"is-sending":n(xe),onSubmit:me,onRequestHint:Ye},null,8,["modelValue","messages","persona-lookup","is-sending"])])])):V("",!0)])],2)]),_:1},8,["title"]))}});export{jv as default};
