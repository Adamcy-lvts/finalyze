import{d as Ce,i as R,o as l,j as p,c as y,f as M,g as o,k as r,u as e,n as L,aa as we,b as u,t as ee,q as It,z as b,y as I,F as Qe,h as Ut,ad as te,U as B,p as ye,S as Ft,e as D,T as He,a4 as Gt,a0 as Dt,X as q}from"./app-DmDY3i1s.js";import{t as w}from"./index-1dHZDo5D.js";import{_ as x}from"./index-pvj8zh0q.js";import{_ as qt}from"./index-CzcKwKw3.js";import{_ as N}from"./Separator.vue_vue_type_script_setup_true_lang-BtvW8kjE.js";import{_ as Nt}from"./Progress.vue_vue_type_script_setup_true_lang-CpxrMfPw.js";import{aa as Ht}from"./RichTextEditor-jUjD1agr.js";import{c as Kt,u as Wt,a as Vt,b as Qt,_ as Xt,M as Yt}from"./useManualEditorSuggestions-Bp3DkI19.js";import{S as Xe}from"./sparkles-Q2CXxawr.js";import{R as Zt}from"./refresh-cw-CQfwKiV-.js";import{X as Ye}from"./x-C6YtmVEX.js";import{_ as Ze}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{_ as Jt}from"./Input.vue_vue_type_script_setup_true_lang-C6wizbX4.js";import{a as es}from"./ScrollArea.vue_vue_type_script_setup_true_lang-C9jenCyt.js";import{B as ts}from"./bot-DCU5HIWK.js";import{L as Je}from"./loader-circle-CfQs1o-z.js";import{S as ss}from"./send-DmO8e7cf.js";import{_ as os}from"./ChapterNavigation.vue_vue_type_script_setup_true_lang-ADQ-cYHV.js";import{u as rs,M as as,a as ns,P as is,_ as ls,b as Ke}from"./useTextHistory-BT9VqOe_.js";import{_ as cs}from"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-DkmOmkOi.js";import{e as ds}from"./WordBalanceDisplay.vue_vue_type_script_setup_true_lang-Cx7ZH98l.js";import{_ as us}from"./PurchaseModal.vue_vue_type_script_setup_true_lang-C1HReA1x.js";import{r as et,u as ps}from"./useWordBalance-Cuv-XiF4.js";import{u as ms}from"./index-BclU5STu.js";import{A as We}from"./arrow-left-BB_47ieV.js";import{M as gs}from"./menu-6XuxeR5v.js";import{S as xe}from"./save-Cic6CLfl.js";import{M as Ve}from"./message-square-XKY6Ut13.js";import{C as hs}from"./chevron-left-D9BinPsL.js";import{C as fs}from"./chevron-right-BY5UNTPU.js";import{a as vs,P as xs}from"./AlertDialogTitle.vue_vue_type_script_setup_true_lang-C9jvJV8A.js";import{M as bs,S as ws}from"./sun-DQBhYc3p.js";import{M as ys}from"./minimize-2-BSnM00cf.js";import{B as Cs}from"./brain-DBWcy1ai.js";import{C as _s}from"./circle-check-big-B4nP-dfc.js";import"./Separator-BUBJY5ZU.js";import"./Presence-DZHOGbpA.js";import"./useForwardExpose-CqeRUKkD.js";import"./nullish-CHIgUVhi.js";import"./purify.es-DxJI3Wx7.js";import"./index-BWEDi_FC.js";import"./step-DrZ9DcYd.js";import"./chart-column-DG8hHOEr.js";import"./calendar-DrO0nzdX.js";import"./users-D_A0iZEC.js";import"./circle-alert-BxNa4bq-.js";import"./eye-Cmi3DnhU.js";import"./check-ffT0m3wq.js";import"./type-D7vMHb6w.js";import"./download-DZ4T8Ron.js";import"./trash-2-DwaxN4Dt.js";import"./DialogTitle.vue_vue_type_script_setup_true_lang-Bpo_fc4e.js";import"./DialogTitle-BJJ0J_H9.js";import"./DialogDescription.vue_vue_type_script_setup_true_lang-B1xeCcBt.js";import"./DialogFooter.vue_vue_type_script_setup_true_lang-CRabafRw.js";import"./Label.vue_vue_type_script_setup_true_lang-CO4sk_lO.js";import"./minus-vcP8v5HK.js";import"./plus-CCnv3CrO.js";import"./list-rA4-hh1q.js";import"./CollapsibleTrigger.vue_vue_type_script_setup_true_lang-C1cXEbcv.js";import"./SafeHtmlText.vue_vue_type_script_setup_true_lang-B6vnkEPR.js";import"./lightbulb-1TvCtDDI.js";import"./chevron-down-0Tsp4fKF.js";import"./DefensePreparationPanel.vue_vue_type_script_setup_true_lang-BEz5oXwM.js";import"./index-CfNEVhfN.js";import"./CardContent.vue_vue_type_script_setup_true_lang-BfRHlvzP.js";import"./CardTitle.vue_vue_type_script_setup_true_lang-Bsz0w3Q2.js";import"./Switch.vue_vue_type_script_setup_true_lang-DBAZxgSE.js";import"./VisuallyHiddenInput-D7NzF2c4.js";import"./VisuallyHidden-CtRO-Oro.js";import"./circle-help-CZlanvFL.js";import"./thumbs-up-C4vTjaOu.js";import"./useNonce-CIc5Pfh-.js";import"./DialogTrigger-BMrcRIrm.js";import"./lock-C3SvUdX4.js";import"./target-Bl99_XGh.js";import"./book-open-Bh5CnvqH.js";import"./search-YaHtseD0.js";import"./Checkbox.vue_vue_type_script_setup_true_lang-DSdvxs-b.js";import"./ohash.D__AXeF1-C-E83dC9.js";import"./RovingFocusItem-BQVKfREK.js";import"./file-text-CYEfTtY2.js";import"./TooltipTrigger.vue_vue_type_script_setup_true_lang-B40z9hf7.js";import"./coins-qD47p5p2.js";import"./arrow-right-BHZz_O9W.js";const ks={key:0,class:"fixed bottom-20 left-1/2 z-50 -translate-x-1/2 px-3"},Ss={class:"flex items-center gap-3 rounded-full border bg-background/95 px-4 py-2 shadow-lg backdrop-blur"},Ms={class:"ml-1 flex items-center gap-1"},zs=Ce({__name:"ChapterStarterOverlay",props:{show:{type:Boolean},isGenerating:{type:Boolean}},emits:["regenerate","dismiss"],setup(C,{emit:a}){const h=a;return(g,i)=>(l(),R(we,{name:"slide-up"},{default:p(()=>[g.show?(l(),y("div",ks,[o("div",Ss,[r(e(Xe),{class:"h-4 w-4 shrink-0 text-primary"}),i[2]||(i[2]=o("span",{class:"text-sm"},"AI suggests an opening",-1)),i[3]||(i[3]=o("kbd",{class:"rounded bg-muted px-1.5 py-0.5 text-xs"},"Tab",-1)),i[4]||(i[4]=o("span",{class:"text-xs text-muted-foreground"},"to accept",-1)),o("div",Ms,[r(e(x),{variant:"ghost",size:"icon",class:"h-6 w-6",disabled:g.isGenerating,title:"Regenerate",onClick:i[0]||(i[0]=f=>h("regenerate"))},{default:p(()=>[r(e(Zt),{class:L(["h-3 w-3",{"animate-spin":g.isGenerating}])},null,8,["class"])]),_:1},8,["disabled"]),r(e(x),{variant:"ghost",size:"icon",class:"h-6 w-6",title:"Dismiss",onClick:i[1]||(i[1]=f=>h("dismiss"))},{default:p(()=>[r(e(Ye),{class:"h-3 w-3"})]),_:1})])])])):M("",!0)]),_:1}))}}),$s=Ze(zs,[["__scopeId","data-v-d5492de7"]]),js={class:"flex flex-col h-full bg-transparent"},Ts={class:"p-4 border-b border-border/50 flex justify-between items-start bg-background/50 backdrop-blur-sm"},As={class:"flex items-center gap-2"},Es={class:"p-1.5 rounded-md bg-primary/10 text-primary"},Rs={key:0,class:"px-4 py-2 bg-muted/30 border-b border-border/50 text-xs flex gap-3 text-muted-foreground"},Ls={key:0,class:"ml-auto text-amber-600 dark:text-amber-400 font-medium flex items-center gap-1"},Os={class:"space-y-6"},Ps={key:0,class:"flex flex-col items-center justify-center text-center py-12 px-4 space-y-4 opacity-0 animate-in fade-in slide-in-from-bottom-4 duration-700 fill-mode-forwards"},Bs={class:"w-12 h-12 rounded-full bg-primary/5 flex items-center justify-center mb-2"},Is={class:"grid grid-cols-1 gap-2 w-full max-w-xs mt-4"},Us={class:"space-y-1"},Fs=["innerHTML"],Gs={key:1,class:"flex gap-3"},Ds={class:"w-8 h-8 rounded-full bg-muted flex items-center justify-center shrink-0"},qs={class:"p-4 border-t border-border/50 bg-background/50 backdrop-blur-sm"},Ns={class:"relative"},Hs=Ce({__name:"ManualChatSidebar",props:{messages:{},isLoading:{type:Boolean},analysis:{}},emits:["send","close"],setup(C,{emit:a}){const h=C,g=a,i=u(""),f=u(null),_=()=>{i.value.trim()&&!h.isLoading&&(g("send",i.value),i.value="")},O=c=>{c.key==="Enter"&&!c.shiftKey&&(c.preventDefault(),_())};return ee(()=>h.messages.length,async()=>{if(await It(),f.value){const c=f.value.$el.querySelector("[data-radix-scroll-area-viewport]");c&&(c.scrollTop=c.scrollHeight)}}),(c,d)=>(l(),y("div",js,[o("div",Ts,[o("div",null,[o("div",As,[o("div",Es,[r(e(ts),{class:"w-4 h-4"})]),d[4]||(d[4]=o("h3",{class:"font-semibold text-foreground"},"AI Assistant",-1))]),d[5]||(d[5]=o("p",{class:"text-xs text-muted-foreground mt-1 ml-1"},"Context-aware writing companion",-1))]),r(e(x),{variant:"ghost",size:"icon",class:"h-8 w-8 -mr-2",onClick:d[0]||(d[0]=m=>c.$emit("close"))},{default:p(()=>[r(e(Ye),{class:"w-4 h-4"})]),_:1})]),c.analysis?(l(),y("div",Rs,[o("span",null,b(c.analysis.word_count)+" words",1),d[6]||(d[6]=o("span",null,"â€¢",-1)),o("span",null,b(c.analysis.citation_count)+" citations",1),c.analysis.detected_issues.length>0?(l(),y("span",Ls,b(c.analysis.detected_issues.length)+" issues ",1)):M("",!0)])):M("",!0),r(e(es),{ref_key:"messagesContainer",ref:f,class:"flex-1 p-4"},{default:p(()=>[o("div",Os,[c.messages.length===0?(l(),y("div",Ps,[o("div",Bs,[r(e(Xe),{class:"w-6 h-6 text-primary/60"})]),d[9]||(d[9]=o("div",{class:"space-y-1"},[o("h4",{class:"font-medium text-foreground"},"How can I help?"),o("p",{class:"text-sm text-muted-foreground max-w-[240px]"}," I can help you structure your arguments, find citations, or rephrase complex sentences. ")],-1)),o("div",Is,[r(e(x),{variant:"outline",size:"sm",class:"justify-start h-auto py-2 text-xs font-normal",onClick:d[1]||(d[1]=m=>{i.value="Analyze the structure of this chapter",_()})},{default:p(()=>[...d[7]||(d[7]=[I(' "Analyze the structure of this chapter" ',-1)])]),_:1}),r(e(x),{variant:"outline",size:"sm",class:"justify-start h-auto py-2 text-xs font-normal",onClick:d[2]||(d[2]=m=>{i.value="Suggest some relevant citations",_()})},{default:p(()=>[...d[8]||(d[8]=[I(' "Suggest some relevant citations" ',-1)])]),_:1})])])):M("",!0),(l(!0),y(Qe,null,Ut(c.messages,(m,v)=>(l(),y("div",{key:v,class:L(["flex gap-3 max-w-[90%]",m.role==="user"?"ml-auto flex-row-reverse":""])},[o("div",{class:L(["w-8 h-8 rounded-full flex items-center justify-center shrink-0 text-xs font-medium",m.role==="user"?"bg-primary text-primary-foreground":"bg-muted text-muted-foreground"])},b(m.role==="user"?"You":"AI"),3),o("div",Us,[o("div",{class:L(["p-3 rounded-2xl text-sm shadow-sm",m.role==="user"?"bg-primary text-primary-foreground rounded-tr-sm":"bg-card border text-card-foreground rounded-tl-sm"])},[o("div",{innerHTML:m.content,class:"prose prose-sm dark:prose-invert max-w-none break-words"},null,8,Fs)],2),o("p",{class:L(["text-[10px] text-muted-foreground opacity-70 px-1",m.role==="user"?"text-right":""])},b(new Date(m.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})),3)])],2))),128)),c.isLoading?(l(),y("div",Gs,[o("div",Ds,[r(e(Je),{class:"w-4 h-4 animate-spin text-muted-foreground"})]),d[10]||(d[10]=o("div",{class:"bg-card border px-4 py-3 rounded-2xl rounded-tl-sm text-sm text-muted-foreground shadow-sm"}," Thinking... ",-1))])):M("",!0)])]),_:1},512),o("div",qs,[o("div",Ns,[r(e(Jt),{modelValue:i.value,"onUpdate:modelValue":d[3]||(d[3]=m=>i.value=m),placeholder:"Ask anything about your chapter...",onKeydown:O,disabled:c.isLoading,class:"pr-10 py-6 bg-background/80 border-border/60 focus-visible:ring-primary/20 shadow-sm"},null,8,["modelValue","disabled"]),r(e(x),{onClick:_,disabled:c.isLoading||!i.value.trim(),size:"icon",class:L(["absolute right-1.5 top-1.5 h-9 w-9 transition-all duration-200",i.value.trim()?"opacity-100 scale-100":"opacity-70 scale-90"])},{default:p(()=>[r(e(ss),{class:"w-4 h-4"})]),_:1},8,["disabled","class"])]),d[11]||(d[11]=o("p",{class:"text-[10px] text-center text-muted-foreground mt-2"}," AI can make mistakes. Review generated content. ",-1))])]))}});function Ks(C,a=[]){const h=u(!1),g=u(a),i=u(!1),f=u(null);return{isChatOpen:h,messages:g,isLoading:i,toggleChat:()=>{h.value=!h.value},sendMessage:async c=>{if(c.trim()){g.value.push({role:"user",content:c,timestamp:new Date}),i.value=!0;try{const m=(await te.post(B("projects.manual-editor.chat",{project:C.project.slug,chapter:C.chapter_number}),{message:c,history:g.value})).data.message;g.value.push({role:"assistant",content:m,timestamp:new Date});const v=Kt(m||"");if(v>0)try{await et(v,"Manual editor: Chat","chapter",C.id),await f.value?.()}catch(j){console.error("Failed to record word usage (manual chat):",j)}}catch(d){console.error("Failed to send chat message:",d),g.value.push({role:"assistant",content:"I'm having trouble responding right now. Please try again.",timestamp:new Date})}finally{i.value=!1}}},setOnUsageRecorded:c=>{f.value=c}}}const Ws=C=>C?C.replace(/<style[\s\S]*?<\/style>/gi,"").replace(/<script[\s\S]*?<\/script>/gi,"").replace(/<[^>]+>/g," ").replace(/&nbsp;/gi," ").replace(/\s+/g," ").trim():"",be=C=>Ws(C).length===0;function Vs(C,a,h,g){const i=u(null),f=u(!1),_=u(!1),O=async()=>{if(!f.value&&!(g?.canGenerate&&!g.canGenerate())&&be(h.value)){f.value=!0;try{await te.get("/sanctum/csrf-cookie");const m=await te.post(B("api.projects.chapters.generate-starter",{project:C,chapter:a.chapter_number})),v=String(m.data?.starter??"").trim();i.value=v||null,_.value=!!i.value}catch(m){throw i.value=null,_.value=!1,m}finally{f.value=!1}}},c=()=>{_.value=!1,i.value=null},d=()=>{_.value=!1,i.value=null};return ye(()=>{be(h.value)&&O().catch(()=>{})}),ee(h,m=>{be(m)||(_.value=!1,i.value=null)},{flush:"post"}),{starterText:i,isGenerating:f,showStarter:_,generateStarter:O,acceptStarter:c,dismissStarter:d}}function Qs(C,a,h){const g=u(null),i=u(!1),f=u(0),_=u(null),O=async j=>{_.value=j;const A=++f.value;if(!j.textBefore.trim()){g.value=null;return}i.value=!0;try{await te.get("/sanctum/csrf-cookie");const W=await te.post(B("api.projects.chapters.autocomplete",{project:C,chapter:a}),{text_before:j.textBefore,text_after:j.textAfter,chapter_title:j.chapterTitle,chapter_outline:j.chapterOutline,project_topic:j.projectTopic});if(A!==f.value)return;const de=String(W.data?.completion??""),se=Xs(j.textBefore,de);g.value=se||null}catch(W){if(A!==f.value)return;throw g.value=null,W}finally{A===f.value&&(i.value=!1)}},c=ms(O,500);return{ghostText:g,isLoading:i,debouncedRequest:c,requestCompletion:O,acceptSuggestion:()=>{g.value=null},dismissSuggestion:()=>{g.value=null},triggerManually:async()=>{_.value&&await O(_.value)},editorRef:h}}function Xs(C,a){const h=a.replace(/\s+$/g,"");if(!h)return"";const i=C.replace(/\s+$/g,"").slice(-1),f=h.slice(0,1);return/^[,.;:!?)]$/.test(f)||!i||/\s/.test(i)?h:/[A-Za-z0-9)\]]/.test(i)&&/[A-Za-z0-9([]/.test(f)?` ${h}`:h}const Ys={class:"manual-editor h-screen flex flex-col bg-background dark:bg-background transition-colors duration-300"},Zs={class:"md:hidden border-b h-14 px-3 flex justify-between items-center bg-background/80 backdrop-blur-md sticky top-0 z-50 transition-all duration-200"},Js={class:"flex items-center gap-2"},eo={class:"flex flex-col justify-center min-w-0 flex-1 mx-2"},to={class:"items-center gap-2 text-xs font-medium text-muted-foreground mb-1 hidden sm:flex"},so={class:"flex items-center gap-2 -ml-1"},oo={class:"font-bold text-base text-foreground truncate"},ro={class:"truncate"},ao={class:"flex gap-2 items-center"},no={class:"hidden md:flex flex-col w-full z-50 sticky top-0 bg-background/80 backdrop-blur-md transition-all duration-200 border-b"},io={class:"h-10 border-b border-border/40 flex items-center justify-center px-4 bg-background/60 relative"},lo={class:"flex items-center gap-2"},co={class:"flex items-center gap-1 absolute right-4"},uo={class:"h-12 flex items-center justify-between px-4 bg-background/40"},po={class:"flex items-center gap-3"},mo={class:"flex items-center gap-1"},go={class:"flex items-center gap-2 px-3 py-1.5 rounded-full bg-muted/30 border border-border/40"},ho={class:"flex items-center gap-1.5"},fo={class:"text-xs font-medium text-muted-foreground"},vo={key:0,class:"flex items-center gap-1.5"},xo={key:1,class:"text-xs text-muted-foreground"},bo={class:"flex items-center gap-3"},wo={class:"flex items-center gap-1 bg-muted/30 p-1 rounded-full border border-border/40"},yo={class:"text-xs font-medium"},Co={class:"w-full bg-background border-b px-3 md:px-6 py-2 flex flex-col gap-1"},_o={class:"flex justify-between items-center text-xs text-muted-foreground mb-1"},ko={class:"flex-1 flex overflow-hidden"},So={key:0,class:"w-[320px] border-r bg-background/80 backdrop-blur-xl border-border/50 shadow-xl z-20 overflow-y-auto custom-scrollbar"},Mo={class:"p-4"},zo={class:"mb-3"},$o={class:"text-xs text-muted-foreground"},jo={class:"flex-1 overflow-auto p-2 md:p-6 bg-background"},To={key:0,class:"w-1/2 flex flex-col bg-background overflow-hidden"},Ao={class:"flex-1 overflow-y-auto custom-scrollbar"},Eo={key:0,class:"w-[400px] border-l bg-background/80 backdrop-blur-xl border-border/50 shadow-2xl z-20 overflow-y-auto custom-scrollbar flex flex-col"},Ro={key:0,class:"flex-1 overflow-hidden"},Lo={class:"h-full border-b border-border/50"},Oo={key:1,class:"p-4 space-y-6"},Po={key:0,class:"space-y-2"},Bo={key:1,class:"space-y-2"},Io={class:"flex items-center justify-between"},Uo={class:"text-xs whitespace-pre-wrap rounded-lg border border-border/50 bg-muted/30 p-3"},Fo={class:"space-y-2"},Go={class:"border-t p-2 md:p-3 flex flex-col gap-3 text-xs md:text-sm bg-muted/30"},Do={class:"flex flex-col sm:flex-row justify-between gap-3 sm:gap-2 items-start sm:items-center w-full"},qo={class:"flex gap-2 md:gap-4 flex-wrap items-center"},No={class:"text-muted-foreground"},Ho={class:"text-foreground"},Ko={key:0,class:"text-muted-foreground hidden sm:inline"},Wo={class:"text-foreground"},Vo={key:1,class:"text-muted-foreground hidden md:inline"},Qo={class:"text-foreground"},Xo={key:2,class:"text-muted-foreground hidden lg:inline"},Yo={class:"flex gap-2 items-center w-full sm:w-auto"},Zo={class:"text-xs font-medium"},Jo=Ce({__name:"ManualEditor",props:{project:{},chapter:{},allChapters:{},facultyChapters:{},currentSuggestion:{},contextAnalysis:{},initialProgressGuidance:{},chatHistory:{}},setup(C){const a=C,h=Ft();ee(()=>h.props?.flash,t=>{t&&(t.success&&w.success(t.success),t.error&&w.error(t.error))},{deep:!0,immediate:!0});const{wordBalance:g,balance:i,showPurchaseModal:f,requiredWordsForModal:_,actionDescriptionForModal:O,checkAndPrompt:c,closePurchaseModal:d,refreshBalance:m}=ps(),{content:v,isDirty:j,isSaving:A,lastSaved:W,updateContent:de,manualSave:se}=Wt(a.chapter,a.project.slug),{currentSuggestion:ue,currentAnalysis:k,isAnalyzing:pe,saveSuggestion:_e,clearSuggestion:ke,applySuggestion:Se}=Vt(a.chapter,a.project.slug,a.currentSuggestion,v,{onUsageRecorded:()=>m()}),{addToHistory:tt}=rs(a.chapter.content||""),H=u(null),{isChatOpen:Me,messages:st,isLoading:ot,toggleChat:rt,sendMessage:at,setOnUsageRecorded:nt}=Ks(a.chapter,a.chatHistory||[]);nt(()=>m());const ze=u(a.chapter.title||"");u(!1),u(!1),u("");const $e=()=>{Q.value&&je(),z.value=!0,rt()},V=t=>{de(t),tt(t),zt()};D(()=>{const t=ze.value?.trim(),s=v.value?.trim();return!!(t&&t.length>0&&s&&s.length>50)});const it=()=>typeof window<"u"&&window.innerWidth<1024,oe=(t,s)=>{try{const n=localStorage.getItem(t);return n!==null?n==="true":s}catch{return s}},T=u(it()),E=u(oe("manualEditor_showLeftSidebar",!T.value)),z=u(oe("manualEditor_showRightSidebar",!T.value)),re=u(""),me=u(null),X=u("");u(!1),u([]),u(!1);const U=u(!0),Q=u((()=>{try{return localStorage.getItem("citationOperationMode")==="true"}catch{return!1}})()),lt=()=>{Q.value=!0,z.value=!1;try{localStorage.setItem("citationOperationMode","true")}catch{}},je=()=>{Q.value=!1,z.value=!0;try{localStorage.setItem("citationOperationMode","false")}catch{}},Te=u(!1),ct=async()=>{w.info("Fullscreen temporarily disabled")},dt=()=>{q.visit(B("projects.analysis",{project:a.project.slug}))};ye(()=>{}),He(()=>{});const{isDark:Ae,toggle:ut}=Gt(),pt=D(()=>{const t=k.value?.word_count??a.chapter.word_count,s=a.chapter.target_word_count||1e3;return Math.min(t/s*100,100)});D(()=>A.value?"Saving...":W.value?`Saved ${W.value}`:"Not saved");const mt=()=>{E.value=!E.value},gt=()=>{z.value=!z.value},ht=()=>c(200,"generate chapter starter"),{starterText:ae,isGenerating:ft,showStarter:F,generateStarter:vt,acceptStarter:xt,dismissStarter:Ee}=Vs(a.project.slug,a.chapter,v,{canGenerate:ht}),bt=D(()=>{const t=a.facultyChapters||[],s=t.find(S=>S?.chapter_number===a.chapter.chapter_number)??t.find(S=>S?.number===a.chapter.chapter_number);if(!s)return"";const n=[];if(s.description&&n.push(String(s.description)),Array.isArray(s.sections))for(const S of s.sections){if(!S)continue;const P=(S.title??S.section_title??"").toString().trim(),K=(S.description??S.section_description??"").toString().trim();P&&K?n.push(`${P}: ${K}`):P&&n.push(P)}return n.join(`
`)}),{ghostText:Re,isLoading:wt,debouncedRequest:yt,requestCompletion:Ct,acceptSuggestion:_t,dismissSuggestion:kt}=Qs(a.project.slug,a.chapter.chapter_number,H),St=D(()=>F.value&&ae.value?ae.value:Re.value),Mt=D(()=>F.value&&ae.value?"html":"text");function Le(){const t=H.value?.editor?.();if(!t)return null;const s=t.state.selection;if(!s.empty||F.value)return null;const n=t.state.doc,S=s.from,P=s.to,K=Math.max(0,S-500),le=Math.min(n.content.size,P+200),Z=n.textBetween(K,S,`
`,`
`),qe=n.textBetween(P,le,`
`,`
`);return{textBefore:Z,textAfter:qe,chapterTitle:ze.value||a.chapter.title||"",chapterOutline:bt.value||"",projectTopic:a.project?.topic||""}}function zt(){if(F.value||re.value||wt.value||Re.value)return;const t=Le();t&&yt(t).catch(()=>{})}const $t=async()=>{try{await vt()}catch(t){console.error("Failed to generate starter:",t),w.error("Failed to generate starter")}};ee(E,t=>{if(!T.value)try{localStorage.setItem("manualEditor_showLeftSidebar",String(t))}catch(s){console.error("Failed to save left sidebar state:",s)}}),ee(z,t=>{if(!T.value)try{localStorage.setItem("manualEditor_showRightSidebar",String(t))}catch(s){console.error("Failed to save right sidebar state:",s)}});const Oe=t=>{(t.ctrlKey||t.metaKey)&&t.key==="s"&&(t.preventDefault(),ie())};ye(()=>{T.value=window.innerWidth<1024,T.value&&(E.value=!1,z.value=!1);const t=()=>{const s=T.value;T.value=window.innerWidth<1024,s!==T.value&&(T.value?(E.value=!1,z.value=!1):(E.value=oe("manualEditor_showLeftSidebar",!0),z.value=oe("manualEditor_showRightSidebar",!0)))};window.addEventListener("resize",t),window.addEventListener("keydown",Oe),He(()=>{window.removeEventListener("resize",t),window.removeEventListener("keydown",Oe)})});const Pe=t=>{V(t),w.success("Applied improved text")},Be=t=>{if(H.value?.replaceSelection(t,me.value||void 0)??!1){w.success("Expanded selection");return}V(`${v.value}

${t}`),w.success("Added expanded text")},Ie=t=>{X.value=t,U.value=!0;try{navigator.clipboard?.writeText(t)}catch{}w.success("Citation suggestions ready")},Ue=t=>{if(H.value?.replaceSelection(t,me.value||void 0)??!1){w.success("Applied rephrased text");return}V(`${v.value}

${t}`),w.success("Added rephrased text")},Fe=(t,s)=>c(t,s),ne=async(t,s)=>{const n=Math.max(0,Math.round(t||0));n&&(await et(n,s,"chapter",a.chapter.id),await m())},jt=t=>t.replace(/<[^>]*>/g," "),Tt=t=>jt(t).split(/\s+/).filter(Boolean).length,At=async t=>{const s=Tt(t);if(F.value){xt(),await ne(s,"chapter starter accepted");return}_t(),await ne(s,"autocomplete accepted")},Et=()=>{if(F.value){Ee();return}kt()},Rt=async()=>{if(F.value)return;const t=Le();if(t)try{await Ct(t)}catch(s){console.error("Failed to autocomplete:",s),w.error("Autocomplete failed")}},Lt=async()=>{if(X.value)try{await navigator.clipboard.writeText(X.value),w.success("Copied citation suggestions")}catch{w.error("Could not copy citation suggestions")}},ge=D(()=>a.allChapters.find(t=>t.chapter_number===a.chapter.chapter_number-1)),he=D(()=>a.allChapters.find(t=>t.chapter_number===a.chapter.chapter_number+1)),fe=(t,s)=>{if(s&&v.value){const S=s.trim(),P=document.createElement("div");P.innerHTML=v.value;const K=P.textContent||P.innerText||"",le=K.indexOf(S);if(le!==-1){const Z=le+S.length,Ne=K.substring(Z).match(/^[^.!?]*[.!?]/);let ve;Ne?ve=Z+Ne[0].length:ve=Z;let $=0,ce=0;const G=v.value;for(;$<G.length&&ce<ve;)if(G[$]==="<"){for(;$<G.length&&G[$]!==">";)$++;$++}else if(G[$]==="&"){const J=G.indexOf(";",$);J!==-1&&J-$<10?($=J+1,ce++):($++,ce++)}else $++,ce++;if($>0){const J=G.substring(0,$),Pt=G.substring($),Bt=`${J} ${t}${Pt}`;V(Bt),w.success("Citation inserted at claim location");return}}}const n=H.value?.getCursorPosition?.();if(typeof n=="number"&&(H.value?.replaceTextAt?.({from:n,to:n},` ${t} `)??!1)){w.success("Citation inserted at cursor");return}V(`${v.value} ${t}`),w.success("Citation appended to content")},Y=t=>{j.value&&!confirm("You have unsaved changes. Are you sure you want to switch chapters?")||q.visit(B("projects.manual-editor.show",{project:a.project.slug,chapter:t}))},Ge=()=>{const t=a.chapter.chapter_number+1;a.allChapters.find(n=>n.chapter_number===t)?Y(t):w.info("Please create the next chapter from the dashboard first.")},De=t=>{confirm("Are you sure you want to delete this chapter?")&&q.delete(B("chapters.destroy",{project:a.project.slug,chapter:a.allChapters.find(s=>s.id===t)?.slug}),{onSuccess:()=>w.success("Chapter deleted")})},ie=async()=>{try{await se(),w.success("Chapter saved successfully")}catch{w.error("Failed to save chapter")}},Ot=async()=>{console.log("ðŸ”µ [MARK COMPLETE] Function called"),console.log("ðŸ”µ [MARK COMPLETE] Current word count:",k.value?.word_count??a.chapter.word_count);try{console.log("ðŸ”µ [MARK COMPLETE] Saving chapter..."),await se(),console.log("âœ… [MARK COMPLETE] Chapter saved");const t=B("projects.manual-editor.mark-complete",{project:a.project.slug,chapter:a.chapter.chapter_number});console.log("ðŸ”µ [MARK COMPLETE] Posting to:",t),q.post(t,{},{onSuccess:()=>{console.log("âœ… [MARK COMPLETE] Request successful")},onError:s=>{console.error("âŒ [MARK COMPLETE] Request failed:",s)}})}catch(t){console.error("âŒ [MARK COMPLETE] Error:",t),w.error("Failed to save chapter before marking complete")}};return(t,s)=>(l(),y(Qe,null,[r(e(Dt),{title:`${t.chapter.title} - Manual Editor`},null,8,["title"]),o("div",Ys,[o("header",Zs,[o("div",Js,[r(e(x),{variant:"ghost",size:"icon",class:"h-8 w-8 text-zinc-700 dark:text-zinc-300 hover:text-foreground",onClick:s[0]||(s[0]=n=>e(q).visit(e(B)("projects.show",t.project.slug))),title:"Back to Project"},{default:p(()=>[r(e(We),{class:"w-4 h-4"})]),_:1}),r(e(N),{orientation:"vertical",class:"h-6"}),r(e(x),{onClick:s[1]||(s[1]=n=>E.value=!0),variant:"ghost",size:"icon",class:"h-8 w-8 lg:hidden text-muted-foreground hover:text-foreground",title:"Open Chapter Navigation"},{default:p(()=>[r(e(gs),{class:"w-4 h-4"})]),_:1})]),o("div",eo,[o("div",to,[o("span",{class:"hover:text-foreground transition-colors cursor-pointer truncate",onClick:s[2]||(s[2]=n=>e(q).visit(e(B)("projects.show",t.project.slug)))},b(t.project.title),1)]),o("div",so,[o("div",oo,[o("span",ro,"Ch. "+b(t.chapter.chapter_number),1)])])]),o("div",ao,[r(e(x),{variant:"ghost",size:"icon",class:"h-8 w-8",onClick:ie,disabled:e(A),title:"Save"},{default:p(()=>[r(e(xe),{class:"w-4 h-4"})]),_:1},8,["disabled"]),r(e(N),{orientation:"vertical",class:"h-6 mx-1 opacity-50"}),r(e(x),{onClick:s[3]||(s[3]=n=>z.value=!0),variant:"ghost",size:"icon",class:"h-8 w-8 text-muted-foreground hover:text-foreground",title:"Open Tools"},{default:p(()=>[r(e(Ve),{class:"w-4 h-4"})]),_:1})])]),o("div",no,[o("div",io,[o("div",lo,[o("h1",{class:"text-sm font-bold text-foreground cursor-pointer hover:text-primary transition-colors",onClick:s[4]||(s[4]=n=>e(q).visit(e(B)("projects.show",t.project.slug)))},b(t.project.title),1),r(e(qt),{variant:"secondary",class:"h-5 px-2 text-[10px] rounded-full"},{default:p(()=>[I("Ch "+b(t.chapter.chapter_number),1)]),_:1})]),o("div",co,[ge.value?(l(),R(e(x),{key:0,variant:"ghost",size:"sm",class:"h-6 px-2 text-zinc-500 hover:text-foreground gap-1 rounded-full text-[10px]",onClick:s[5]||(s[5]=n=>Y(ge.value.chapter_number)),title:`Previous: ${ge.value.title}`},{default:p(()=>[r(e(hs),{class:"w-3 h-3"}),s[17]||(s[17]=I(" Prev ",-1))]),_:1},8,["title"])):M("",!0),he.value?(l(),R(e(x),{key:1,variant:"ghost",size:"sm",class:"h-6 px-2 text-zinc-500 hover:text-foreground gap-1 rounded-full text-[10px]",onClick:s[6]||(s[6]=n=>Y(he.value.chapter_number)),title:`Next: ${he.value.title}`},{default:p(()=>[s[18]||(s[18]=I(" Next ",-1)),r(e(fs),{class:"w-3 h-3"})]),_:1},8,["title"])):M("",!0)])]),o("div",uo,[o("div",po,[o("div",mo,[r(e(x),{variant:"ghost",size:"icon",class:"h-8 w-8 text-zinc-700 dark:text-zinc-300 hover:text-foreground rounded-full",onClick:s[7]||(s[7]=n=>e(q).visit(e(B)("projects.show",t.project.slug))),title:"Back to Project"},{default:p(()=>[r(e(We),{class:"w-4 h-4"})]),_:1}),s[19]||(s[19]=o("div",{class:"h-4 w-px bg-border/50 mx-1"},null,-1)),r(e(x),{onClick:mt,variant:"ghost",size:"icon",class:L(["h-8 w-8 transition-all duration-300 rounded-full",E.value?"text-primary":"text-zinc-700 dark:text-zinc-300 hover:text-foreground"]),title:"Toggle Chapter Navigation"},{default:p(()=>[E.value?(l(),R(e(vs),{key:0,class:"w-4 h-4"})):(l(),R(e(xs),{key:1,class:"w-4 h-4"}))]),_:1},8,["class"])]),s[21]||(s[21]=o("div",{class:"h-4 w-px bg-border/50"},null,-1)),o("div",go,[o("div",ho,[o("div",{class:L(["w-2 h-2 rounded-full transition-colors duration-300",e(j)?"bg-amber-500 animate-pulse":"bg-emerald-500"])},null,2),o("span",fo,b(e(j)?"Unsaved":"Saved"),1)]),r(e(N),{orientation:"vertical",class:"h-3"}),e(pe)?(l(),y("div",vo,[r(e(Je),{class:"w-3 h-3 animate-spin text-primary"}),s[20]||(s[20]=o("span",{class:"text-xs text-muted-foreground"},"Analyzing",-1))])):(l(),y("div",xo,b(e(k)?.word_count??t.chapter.word_count)+" words ",1))])]),s[24]||(s[24]=o("div",{class:"flex-1 px-4 min-w-0"},[o("div",{id:"manual-editor-toolbar",class:"mx-auto max-w-[950px]"})],-1)),o("div",bo,[o("div",wo,[r(e(x),{variant:"ghost",size:"icon",class:"h-7 w-7 rounded-full text-zinc-700 dark:text-zinc-300 hover:text-foreground",onClick:e(ut),title:e(Ae)?"Switch to Light Mode":"Switch to Dark Mode"},{default:p(()=>[e(Ae)?(l(),R(e(bs),{key:0,class:"w-4 h-4"})):(l(),R(e(ws),{key:1,class:"w-4 h-4"}))]),_:1},8,["onClick","title"]),r(e(x),{variant:"ghost",size:"icon",class:"h-7 w-7 rounded-full text-zinc-700 dark:text-zinc-300 hover:text-foreground",onClick:ct,title:Te.value?"Exit Full Screen":"Enter Full Screen"},{default:p(()=>[Te.value?(l(),R(e(ys),{key:0,class:"w-4 h-4"})):(l(),R(e(as),{key:1,class:"w-4 h-4"}))]),_:1},8,["title"]),r(e(x),{onClick:$e,variant:"ghost",size:"icon",class:L(["h-7 w-7 rounded-full transition-all duration-300",e(Me)?"bg-background shadow-sm text-primary":"text-zinc-700 dark:text-zinc-300 hover:text-foreground"]),title:"Toggle AI Chat Mode"},{default:p(()=>[r(e(Ve),{class:"w-4 h-4"})]),_:1},8,["class"]),r(e(x),{onClick:gt,variant:"ghost",size:"icon",class:L(["h-7 w-7 rounded-full transition-all duration-300",z.value?"bg-background shadow-sm text-primary":"text-zinc-700 dark:text-zinc-300 hover:text-foreground"]),title:"Toggle Tools Sidebar"},{default:p(()=>[z.value?(l(),R(e(ns),{key:0,class:"w-4 h-4"})):(l(),R(e(is),{key:1,class:"w-4 h-4"}))]),_:1},8,["class"])]),s[23]||(s[23]=o("div",{class:"w-px h-4 bg-border/50"},null,-1)),e(g)?(l(),R(ds,{key:0,balance:e(g),compact:""},null,8,["balance"])):M("",!0),r(ls,{project:t.project,"current-chapter":t.chapter,"all-chapters":t.allChapters,size:"sm",variant:"outline",class:"h-9","button-class":"rounded-full bg-background/50"},null,8,["project","current-chapter","all-chapters"]),r(e(x),{variant:"ghost",size:"sm",class:"h-9 gap-2 text-zinc-700 dark:text-zinc-300 hover:text-foreground rounded-full bg-background/50 border border-transparent hover:border-border/50",onClick:dt,title:"Open bulk analysis"},{default:p(()=>[r(e(Cs),{class:"w-4 h-4"}),s[22]||(s[22]=o("span",{class:"text-xs font-medium"},"Analyze",-1))]),_:1}),r(e(x),{variant:"outline",size:"sm",class:"h-9 gap-2 text-zinc-700 dark:text-zinc-300 hover:text-foreground rounded-full bg-background/50",onClick:ie,disabled:e(A),title:"Save (Ctrl+S)"},{default:p(()=>[r(e(xe),{class:"w-4 h-4"}),o("span",yo,b(e(A)?"Saving...":"Save"),1)]),_:1},8,["disabled"])])])]),o("div",Co,[o("div",_o,[s[25]||(s[25]=o("span",{class:"font-medium"},"Writing Progress",-1)),o("span",null,b(e(k)?.word_count??t.chapter.word_count)+" / "+b(t.chapter.target_word_count)+" words",1)]),r(e(Nt),{"model-value":pt.value,class:"h-1.5"},null,8,["model-value"])]),o("div",ko,[r(we,{"enter-active-class":"transition-all duration-500 cubic-bezier(0.4, 0, 0.2, 1)","enter-from-class":"-ml-[320px] opacity-0","enter-to-class":"ml-0 opacity-100","leave-active-class":"transition-all duration-500 cubic-bezier(0.4, 0, 0.2, 1)","leave-from-class":"ml-0 opacity-100","leave-to-class":"-ml-[320px] opacity-0"},{default:p(()=>[E.value&&!T.value?(l(),y("aside",So,[o("div",Mo,[o("div",zo,[s[26]||(s[26]=o("h2",{class:"text-sm font-semibold text-foreground mb-1"},"Table of Contents",-1)),o("p",$o,b(t.allChapters.length)+" Chapters",1)]),r(os,{"all-chapters":t.allChapters,"current-chapter":t.chapter,project:t.project,outlines:t.project.outlines||[],"faculty-chapters":t.facultyChapters||[],"current-word-count":e(k)?.word_count||t.chapter.word_count,"target-word-count":t.chapter.target_word_count,"writing-quality-score":0,"chapter-content-length":e(v)?.length||0,onGoToChapter:Y,onGenerateNextChapter:Ge,onDeleteChapter:De},null,8,["all-chapters","current-chapter","project","outlines","faculty-chapters","current-word-count","target-word-count","chapter-content-length"])])])):M("",!0)]),_:1}),o("div",{class:L(["flex-1 flex overflow-hidden",Q.value?"flex-row":"flex-col"])},[o("div",{class:L(["flex flex-col overflow-hidden",Q.value?"w-1/2 border-r border-border/50":"flex-1"])},[o("div",jo,[r(Ht,{ref_key:"editorRef",ref:H,modelValue:e(v),"onUpdate:modelValue":V,"onUpdate:selectedText":s[8]||(s[8]=n=>re.value=n),"onUpdate:selectionRange":s[9]||(s[9]=n=>me.value=n),"ghost-text":St.value,"ghost-text-format":Mt.value,onGhostAccepted:At,onGhostDismissed:Et,onGhostManualTrigger:Rt,"manual-mode":!0,"toolbar-teleport-target":T.value?"":"#manual-editor-toolbar",class:"min-h-full"},null,8,["modelValue","ghost-text","ghost-text-format","toolbar-teleport-target"])])],2),Q.value?(l(),y("div",To,[o("div",Ao,[r(Ke,{"show-citation-helper":U.value,"onUpdate:showCitationHelper":s[10]||(s[10]=n=>U.value=n),"chapter-content":e(v),"chapter-id":t.chapter.id,"citation-operation-mode":!0,onInsertCitation:fe,onExitOperationMode:je},null,8,["show-citation-helper","chapter-content","chapter-id"])])])):M("",!0)],2),r(we,{"enter-active-class":"transition-all duration-500 cubic-bezier(0.4, 0, 0.2, 1)","enter-from-class":"-mr-[400px] opacity-0","enter-to-class":"mr-0 opacity-100","leave-active-class":"transition-all duration-500 cubic-bezier(0.4, 0, 0.2, 1)","leave-from-class":"mr-0 opacity-100","leave-to-class":"-mr-[400px] opacity-0"},{default:p(()=>[z.value&&!T.value?(l(),y("aside",Eo,[e(Me)?(l(),y("div",Ro,[o("div",Lo,[r(Hs,{messages:e(st),"is-loading":e(ot),analysis:e(k),class:"h-full",onSend:e(at),onClose:$e},null,8,["messages","is-loading","analysis","onSend"])])])):(l(),y("div",Oo,[e(ue)?(l(),y("div",Po,[r(Qt,{suggestion:e(ue),analysis:e(k),onSave:e(_e),onClear:e(ke),onApply:e(Se)},null,8,["suggestion","analysis","onSave","onClear","onApply"]),r(e(N),{class:"bg-border/50"})])):M("",!0),r(Xt,{"project-slug":t.project.slug,"chapter-number":t.chapter.chapter_number,"selected-text":re.value,"chapter-content":e(v),"is-processing":e(pe)||e(A),"ensure-balance":Fe,"on-usage":ne,onTextImproved:Pe,onTextExpanded:Be,onCitationsSuggested:Ie,onTextRephrased:Ue,onOpenCitationHelper:s[11]||(s[11]=n=>U.value=!0)},null,8,["project-slug","chapter-number","selected-text","chapter-content","is-processing"]),r(e(N),{class:"bg-border/50"}),X.value?(l(),y("div",Bo,[o("div",Io,[s[28]||(s[28]=o("h3",{class:"text-sm font-semibold text-foreground"},"Citation Suggestions",-1)),r(e(x),{size:"sm",variant:"outline",onClick:Lt},{default:p(()=>[...s[27]||(s[27]=[I(" Copy ",-1)])]),_:1})]),o("pre",Uo,b(X.value),1),r(e(N),{class:"bg-border/50"})])):M("",!0),o("div",Fo,[r(Ke,{"show-citation-helper":U.value,"onUpdate:showCitationHelper":s[12]||(s[12]=n=>U.value=n),"chapter-content":e(v),"chapter-id":t.chapter.id,onInsertCitation:fe,onEnterOperationMode:lt},null,8,["show-citation-helper","chapter-content","chapter-id"])]),r(e(N),{class:"bg-border/50"}),r(e(N),{class:"bg-border/50"})]))])):M("",!0)]),_:1}),r(Yt,{"show-left-sidebar":E.value,"show-right-sidebar":z.value,"is-mobile":T.value,"all-chapters":t.allChapters,"current-chapter":t.chapter,project:t.project,"faculty-chapters":t.facultyChapters,"current-word-count":e(k)?.word_count||t.chapter.word_count,"target-word-count":t.chapter.target_word_count,"chapter-content-length":e(v)?.length||0,"selected-text":re.value,"is-analyzing":e(pe),"is-saving":e(A),"current-suggestion":e(ue),"current-analysis":e(k),"chapter-content":e(v),"show-citation-helper":U.value,"ensure-balance":Fe,"on-usage":ne,"onUpdate:showLeftSidebar":s[13]||(s[13]=n=>E.value=n),"onUpdate:showRightSidebar":s[14]||(s[14]=n=>z.value=n),"onUpdate:showCitationHelper":s[15]||(s[15]=n=>U.value=n),onGoToChapter:Y,onGenerateNextChapter:Ge,onDeleteChapter:De,onSaveSuggestion:e(_e),onClearSuggestion:e(ke),onApplySuggestion:e(Se),onTextImproved:Pe,onTextExpanded:Be,onCitationsSuggested:Ie,onTextRephrased:Ue,onInsertCitation:fe},null,8,["show-left-sidebar","show-right-sidebar","is-mobile","all-chapters","current-chapter","project","faculty-chapters","current-word-count","target-word-count","chapter-content-length","selected-text","is-analyzing","is-saving","current-suggestion","current-analysis","chapter-content","show-citation-helper","onSaveSuggestion","onClearSuggestion","onApplySuggestion"])]),o("footer",Go,[o("div",Do,[o("div",qo,[o("span",No,[s[29]||(s[29]=o("span",{class:"hidden sm:inline"},"Words: ",-1)),o("strong",Ho,b(e(k)?.word_count??t.chapter.word_count),1),I(" / "+b(t.chapter.target_word_count),1)]),e(k)?(l(),y("span",Ko,[s[30]||(s[30]=I(" Citations: ",-1)),o("strong",Wo,b(e(k).citation_count),1)])):M("",!0),e(k)?(l(),y("span",Vo,[s[31]||(s[31]=I(" Tables: ",-1)),o("strong",Qo,b(e(k).table_count),1)])):M("",!0),e(k)?(l(),y("span",Xo," Quality: "+b(e(k).quality_metrics.reading_level),1)):M("",!0)]),o("div",Yo,[r(e(x),{variant:"outline",size:"sm",class:"h-8 md:h-9 gap-2 flex-1 sm:flex-initial",onClick:ie,disabled:e(A),title:"Save chapter"},{default:p(()=>[r(e(xe),{class:"w-3.5 h-3.5 md:w-4 md:h-4"}),o("span",Zo,b(e(A)?"Saving...":"Save"),1)]),_:1},8,["disabled"]),r(e(x),{variant:"default",size:"sm",class:"h-8 md:h-9 gap-2 flex-1 sm:flex-initial",onClick:Ot,disabled:e(A),title:"Save and mark chapter as complete"},{default:p(()=>[r(e(_s),{class:"w-3.5 h-3.5 md:w-4 md:h-4"}),s[32]||(s[32]=o("span",{class:"text-xs font-medium hidden sm:inline"},"Mark Complete",-1)),s[33]||(s[33]=o("span",{class:"text-xs font-medium sm:hidden"},"Complete",-1))]),_:1},8,["disabled"])])])]),r(us,{open:e(f),"current-balance":e(i),"required-words":e(_),action:e(O),"onUpdate:open":s[16]||(s[16]=n=>f.value=n),onClose:e(d)},null,8,["open","current-balance","required-words","action","onClose"]),r(e(cs),{position:"top-center"})]),r($s,{show:e(F)&&!!e(ae),"is-generating":e(ft),onRegenerate:$t,onDismiss:e(Ee)},null,8,["show","is-generating","onDismiss"])],64))}}),Ea=Ze(Jo,[["__scopeId","data-v-f1567860"]]);export{Ea as default};
