import{d as N,y as G,a as Q,w as V,C,o as l,u as o,E as n,H as r,K as e,P as d,O as _,M as i,n as c,c as u,Q as y,S as $,T as W}from"./app-C0iaHDzA.js";import{_ as q,a as K}from"./index-DtaXEV0f.js";import{_ as h}from"./index-CFG1xxFQ.js";import{_ as x}from"./index-B8MfLIKH.js";import{_ as F,a as O}from"./CardContent.vue_vue_type_script_setup_true_lang-CvS13D9K.js";import{_ as H,a as I}from"./CardTitle.vue_vue_type_script_setup_true_lang-Dtj1h7eV.js";import{_ as X,a as Y,b as J}from"./CollapsibleTrigger.vue_vue_type_script_setup_true_lang-BlLY6ehe.js";import{_ as Z}from"./Progress.vue_vue_type_script_setup_true_lang-CaOGjHp0.js";import{_ as ee}from"./ScrollArea.vue_vue_type_script_setup_true_lang-DP_1lNp_.js";import{_ as te}from"./Separator.vue_vue_type_script_setup_true_lang-Ea4RDEqY.js";import{_ as se}from"./Switch.vue_vue_type_script_setup_true_lang-DjomhfHM.js";import{S as v}from"./shield-nwQhQbWS.js";import{C as oe}from"./chevron-down-IOA8eJLm.js";import{L as re}from"./loader-circle-Ckfjc31V.js";import{C as j}from"./circle-help-IGqCbBzI.js";import{L}from"./lightbulb-DqtcVVGo.js";import{W as ae}from"./useTextHistory-C1R-Hnm5.js";import{R as z}from"./refresh-cw-CuED62tU.js";import{D as ne}from"./download-BBGA26JQ.js";import{T as ie,a as le}from"./thumbs-up-DhQlqVUh.js";import{X as de}from"./x-D8_aAgCu.js";import{C as ue}from"./circle-alert-DXq1kxq1.js";const me={class:"flex items-center gap-2"},ce={class:"space-y-3 p-3 bg-gradient-to-r from-blue-50 to-indigo-50 border border-blue-200 rounded-lg dark:from-blue-950/30 dark:to-indigo-950/30 dark:border-blue-800"},fe={class:"flex items-center justify-center gap-2"},pe={class:"text-center"},he={class:"text-xs text-blue-600 dark:text-blue-400"},ge={class:"flex items-center justify-between rounded-md border border-dashed border-border/60 px-3 py-2 bg-muted/30"},xe={class:"flex flex-col text-xs text-muted-foreground"},ve={class:"flex items-center gap-2"},be={class:"text-[11px] text-muted-foreground"},_e={key:0,class:"py-8"},ye={class:"flex flex-col items-center justify-center space-y-2"},we={class:"text-xs text-muted-foreground text-center"},ke={class:"space-y-3"},Ce={class:"space-y-2"},$e={class:"text-xs font-medium text-muted-foreground flex items-center gap-1"},Ge={class:"flex gap-1 flex-wrap"},We={key:0,class:"space-y-2"},De={class:"text-xs font-medium text-muted-foreground flex items-center gap-1"},Pe={class:"flex flex-wrap gap-1"},Qe={class:"space-y-3 pr-3"},je={class:"absolute top-2 left-2 opacity-60 group-hover:opacity-100 transition-opacity"},Le={class:"flex items-start justify-between gap-3"},ze={class:"flex-1 space-y-2"},Ae={class:"flex items-center gap-2"},Te={class:"text-xs font-bold text-primary bg-primary/10 px-2 py-0.5 rounded-full"},Se={class:"font-medium text-foreground leading-relaxed"},Be={class:"flex items-center gap-1 opacity-70 group-hover:opacity-100 transition-opacity"},Ee={key:0,class:"mt-4 space-y-4 border-t border-dashed pt-4 animate-in slide-in-from-top-2 duration-200"},Me={class:"bg-muted/30 rounded-lg p-3 space-y-2"},Re={class:"flex items-center gap-2"},Ue={class:"text-sm text-muted-foreground leading-relaxed pl-6"},Ne={key:0,class:"bg-primary/5 rounded-lg p-3 space-y-2"},Ve={class:"flex items-center gap-2"},qe={class:"space-y-1.5 pl-6"},Ke={class:"flex items-center justify-between text-xs text-muted-foreground/70 border-t border-dashed pt-2"},Fe={class:"flex items-center gap-1"},Oe={key:2,class:"py-12 text-center"},He={key:0,class:"space-y-4"},Ie={class:"relative"},Xe={class:"absolute inset-0 flex items-center justify-center opacity-10"},Ye={class:"relative"},Je={class:"text-xs text-muted-foreground mb-1"},Ze={class:"max-w-md mx-auto space-y-2"},et={class:"flex justify-between text-xs text-muted-foreground"},tt={class:"font-medium"},st={key:1,class:"relative"},ot={class:"absolute inset-0 flex items-center justify-center opacity-10"},rt={class:"relative"},at={class:"grid grid-cols-2 gap-3"},Dt=N({__name:"DefensePreparationPanel",props:{showDefensePrep:{type:Boolean,default:!0},questions:{},isLoading:{type:Boolean},isGenerating:{type:Boolean},chapterContext:{},defenseWatcher:{},autoGenerateEnabled:{type:Boolean,default:!1}},emits:["update:showDefensePrep","generate-more","refresh","mark-helpful","hide-question","toggle-auto-generate"],setup(A,{emit:T}){const w=A,f=T,k=G("all"),g=G("all"),b=G(null),D=Q(()=>{let s=[...w.questions];return k.value!=="all"&&(s=s.filter(t=>t.difficulty===k.value)),g.value!=="all"&&(s=s.filter(t=>t.category===g.value)),s.slice(0,5)}),P=Q(()=>{const s=new Set(w.questions.map(t=>t.category));return Array.from(s)}),S={easy:"text-green-700 bg-green-100 border-green-300 hover:bg-green-200 transition-colors",medium:"text-amber-700 bg-amber-100 border-amber-300 hover:bg-amber-200 transition-colors",hard:"text-red-700 bg-red-100 border-red-300 hover:bg-red-200 transition-colors"},B=s=>{f("update:showDefensePrep",s)},E=s=>{b.value=b.value===s?null:s},M=()=>{const s=D.value.map((m,R)=>`Q${R+1}: ${m.question}

Suggested Answer: ${m.suggested_answer}

Key Points:
${m.key_points.map(U=>`â€¢ ${U}`).join(`
`)}

---
`).join(`
`),t=new Blob([s],{type:"text/plain"}),a=URL.createObjectURL(t),p=document.createElement("a");p.href=a,p.download=`defense-questions-chapter-${w.chapterContext.chapter_number}.txt`,p.click(),URL.revokeObjectURL(a)};return V(()=>w.questions,()=>{b.value=null}),(s,t)=>(l(),C(o(F),{class:"border border-border/60 shadow-sm dark:border-border/50 dark:shadow-none transition-all duration-300 hover:shadow-md"},{default:n(()=>[r(o(X),{open:s.showDefensePrep,"onUpdate:open":B},{default:n(()=>[r(o(Y),{class:"w-full"},{default:n(()=>[r(o(H),{class:"pb-3 transition-colors bg-muted/40 hover:bg-muted/60 dark:bg-transparent dark:hover:bg-muted/30"},{default:n(()=>[r(o(I),{class:"flex items-center justify-between text-sm"},{default:n(()=>[e("span",me,[r(o(v),{class:"h-4 w-4 text-muted-foreground"}),t[4]||(t[4]=d(" Defense Preparation ",-1)),r(o(h),{variant:"secondary",class:"ml-1 text-xs"},{default:n(()=>[d(" Ch. "+i(s.chapterContext.chapter_number),1)]),_:1}),s.questions.length?(l(),C(o(h),{key:0,variant:"outline",class:"ml-1 text-xs"},{default:n(()=>[d(i(s.questions.length)+" questions ",1)]),_:1})):_("",!0)]),r(o(oe),{class:c(["h-4 w-4 text-muted-foreground transition-transform",s.showDefensePrep?"rotate-180":""])},null,8,["class"])]),_:1})]),_:1})]),_:1}),r(o(J),null,{default:n(()=>[r(o(O),{class:"space-y-4 pt-0"},{default:n(()=>[e("div",ce,[e("div",fe,[r(o(v),{class:"h-4 w-4 text-blue-600 flex-shrink-0"}),e("div",pe,[t[5]||(t[5]=e("div",{class:"text-sm font-medium text-blue-800 dark:text-blue-300"},"AI-Powered Defense Preparation",-1)),e("div",he,"Generate practice questions tailored to Chapter "+i(s.chapterContext.chapter_number)+" content",1)])]),t[6]||(t[6]=e("div",{class:"text-center"},[e("p",{class:"text-xs text-blue-700 dark:text-blue-300"},'ðŸ’¡ Click "Generate Questions" below to create personalized defense questions')],-1))]),e("div",ge,[e("div",xe,[t[7]||(t[7]=e("span",{class:"font-semibold text-foreground"},"Generation Mode",-1)),e("span",null,i(s.autoGenerateEnabled?"Auto generate when ready":"Manual - click to generate"),1)]),e("div",ve,[e("span",be,i(s.autoGenerateEnabled?"Auto":"Manual"),1),r(o(se),{checked:s.autoGenerateEnabled,"onUpdate:checked":t[0]||(t[0]=a=>f("toggle-auto-generate",a))},null,8,["checked"])])]),s.isLoading&&!s.questions.length?(l(),u("div",_e,[e("div",ye,[r(o(re),{class:"h-8 w-8 animate-spin text-muted-foreground"}),e("p",we,[d(" Analyzing Chapter "+i(s.chapterContext.chapter_number)+" content",1),t[8]||(t[8]=e("br",null,null,-1)),t[9]||(t[9]=d(" to generate defense questions... ",-1))])])])):s.questions.length?(l(),u(y,{key:1},[e("div",ke,[e("div",Ce,[e("h4",$e,[r(o(j),{class:"h-3 w-3"}),t[10]||(t[10]=d(" Filter by Difficulty ",-1))]),e("div",Ge,[(l(),u(y,null,$(["all","easy","medium","hard"],a=>r(o(h),{key:a,variant:k.value===a?"default":"secondary",onClick:p=>k.value=a,class:"cursor-pointer text-xs capitalize hover:scale-105 transition-all duration-200 hover:shadow-sm"},{default:n(()=>[d(i(a==="all"?"All Levels":a),1)]),_:2},1032,["variant","onClick"])),64))])]),P.value.length>1?(l(),u("div",We,[e("h4",De,[r(o(L),{class:"h-3 w-3"}),t[11]||(t[11]=d(" Filter by Topic ",-1))]),e("div",Pe,[r(o(h),{variant:"secondary",onClick:t[1]||(t[1]=a=>g.value="all"),class:c([g.value==="all"?"bg-primary text-primary-foreground shadow-sm":"hover:bg-muted","cursor-pointer text-xs hover:scale-105 transition-all duration-200"])},{default:n(()=>[...t[12]||(t[12]=[d(" All Topics ",-1)])]),_:1},8,["class"]),(l(!0),u(y,null,$(P.value,a=>(l(),C(o(h),{key:a,variant:"secondary",onClick:p=>g.value=a,class:c([g.value===a?"bg-primary text-primary-foreground shadow-sm":"hover:bg-muted","cursor-pointer text-xs capitalize hover:scale-105 transition-all duration-200"])},{default:n(()=>[d(i(a),1)]),_:2},1032,["onClick","class"]))),128))])])):_("",!0)]),r(o(te)),r(o(ee),{class:"h-[420px]"},{default:n(()=>[e("div",Qe,[(l(!0),u(y,null,$(D.value,(a,p)=>(l(),u("div",{key:a.id,class:"group relative"},[r(o(q),{class:c(["cursor-pointer transition-all duration-200 hover:shadow-md hover:border-primary/50",[b.value===a.id?"ring-2 ring-primary shadow-lg border-primary/50 bg-primary/5":"hover:bg-muted/30"]]),onClick:m=>E(a.id)},{default:n(()=>[e("div",je,[r(o(j),{class:"h-3 w-3"})]),r(o(K),{class:"ml-5 text-sm"},{default:n(()=>[e("div",Le,[e("div",ze,[e("div",Ae,[e("span",Te," Q"+i(p+1),1),r(o(h),{class:c([S[a.difficulty],"text-xs px-2 py-0.5 font-medium border cursor-pointer"])},{default:n(()=>[d(i(a.difficulty),1)]),_:2},1032,["class"]),r(o(h),{variant:"outline",class:"text-xs px-2 py-0.5 bg-muted/50"},{default:n(()=>[d(i(a.category),1)]),_:2},1024)]),e("p",Se,i(a.question),1)]),e("div",Be,[r(o(x),{onClick:W(m=>f("mark-helpful",a.id,!0),["stop"]),variant:"ghost",size:"icon",class:c(["h-7 w-7 hover:scale-110 transition-transform",a.user_marked_helpful===!0?"text-green-600 bg-green-100 hover:bg-green-200":"hover:text-green-600 hover:bg-green-50"])},{default:n(()=>[r(o(ie),{class:"h-3.5 w-3.5"})]),_:2},1032,["onClick","class"]),r(o(x),{onClick:W(m=>f("mark-helpful",a.id,!1),["stop"]),variant:"ghost",size:"icon",class:c(["h-7 w-7 hover:scale-110 transition-transform",a.user_marked_helpful===!1?"text-red-600 bg-red-100 hover:bg-red-200":"hover:text-red-600 hover:bg-red-50"])},{default:n(()=>[r(o(le),{class:"h-3.5 w-3.5"})]),_:2},1032,["onClick","class"]),r(o(x),{onClick:W(m=>f("hide-question",a.id),["stop"]),variant:"ghost",size:"icon",class:"h-7 w-7 hover:scale-110 transition-transform hover:text-red-500 hover:bg-red-50"},{default:n(()=>[r(o(de),{class:"h-3.5 w-3.5"})]),_:2},1032,["onClick"])])]),b.value===a.id?(l(),u("div",Ee,[e("div",Me,[e("div",Re,[r(o(L),{class:"h-4 w-4 text-amber-600"}),t[13]||(t[13]=e("strong",{class:"text-sm font-semibold text-foreground"},"Suggested Approach",-1))]),e("p",Ue,i(a.suggested_answer),1)]),a.key_points.length?(l(),u("div",Ne,[e("div",Ve,[r(o(ue),{class:"h-4 w-4 text-primary"}),t[14]||(t[14]=e("strong",{class:"text-sm font-semibold text-foreground"},"Key Points to Cover",-1))]),e("ul",qe,[(l(!0),u(y,null,$(a.key_points,m=>(l(),u("li",{key:m,class:"text-sm text-muted-foreground flex items-start gap-2"},[t[15]||(t[15]=e("span",{class:"text-primary font-bold text-xs mt-1"},"â€¢",-1)),e("span",null,i(m),1)]))),128))])])):_("",!0),e("div",Ke,[e("span",Fe,[r(o(z),{class:"h-3 w-3"}),d(" Viewed "+i(a.times_viewed)+" time"+i(a.times_viewed!==1?"s":""),1)]),t[16]||(t[16]=e("span",{class:"text-xs text-primary/70"}," Click to collapse ",-1))])])):_("",!0)]),_:2},1024)]),_:2},1032,["class","onClick"])]))),128))])]),_:1})],64)):(l(),u("div",Oe,[s.defenseWatcher?.shouldShowProgress?(l(),u("div",He,[e("div",Ie,[e("div",Xe,[r(o(v),{class:"h-24 w-24"})]),e("div",Ye,[r(o(v),{class:"mx-auto h-12 w-12 text-amber-500/60 mb-4"}),t[17]||(t[17]=e("h3",{class:"text-sm font-medium text-foreground mb-2"}," Write More to Generate Questions ",-1)),e("p",Je," Minimum "+i(s.defenseWatcher.threshold)+" words required ",1),t[18]||(t[18]=e("p",{class:"text-xs text-muted-foreground/80 mb-4"},' Keep writing to enable the "Generate Questions" button ',-1)),e("div",Ze,[r(o(Z),{value:s.defenseWatcher.progressPercentage,class:"h-2"},null,8,["value"]),e("div",et,[e("span",null,i(s.chapterContext.word_count)+" words",1),e("span",tt,i(s.defenseWatcher.threshold)+" words needed",1)])])])])])):(l(),u("div",st,[e("div",ot,[r(o(v),{class:"h-24 w-24"})]),e("div",rt,[r(o(v),{class:"mx-auto h-12 w-12 text-muted-foreground/40 mb-4"}),t[19]||(t[19]=e("h3",{class:"text-sm font-medium text-foreground mb-2"}," No Questions Yet ",-1)),t[20]||(t[20]=e("p",{class:"text-xs text-muted-foreground mb-1"},' Click the "Generate Questions" button below to create ',-1)),t[21]||(t[21]=e("p",{class:"text-xs text-muted-foreground/80"}," AI-powered defense questions based on your chapter content ",-1))])]))])),e("div",at,[r(o(x),{onClick:t[2]||(t[2]=a=>f("generate-more")),disabled:s.isGenerating||s.defenseWatcher&&!s.defenseWatcher.meetsThreshold,size:"sm",variant:s.questions.length?"outline":"default",class:c(["text-xs font-medium transition-all duration-200 shadow-sm",!s.questions.length&&(!s.defenseWatcher||s.defenseWatcher.meetsThreshold)?"bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 text-white shadow-md hover:shadow-lg hover:scale-105 ring-2 ring-blue-300 dark:ring-blue-800":"hover:scale-105 hover:shadow-md"])},{default:n(()=>[r(o(ae),{class:c(["mr-2 h-4 w-4",s.isGenerating?"animate-spin":""])},null,8,["class"]),d(" "+i(s.isGenerating?"Generating...":s.defenseWatcher&&!s.defenseWatcher.meetsThreshold?`Need ${s.defenseWatcher.wordsRemaining} More Words`:s.questions.length?"Generate More":"Generate Questions"),1)]),_:1},8,["disabled","variant","class"]),r(o(x),{onClick:t[3]||(t[3]=a=>f("refresh")),disabled:s.isLoading||!s.questions.length,size:"sm",variant:"outline",class:"text-xs font-medium hover:scale-105 transition-all duration-200 shadow-sm hover:shadow-md"},{default:n(()=>[r(o(z),{class:"mr-2 h-4 w-4"}),t[22]||(t[22]=d(" Shuffle ",-1))]),_:1},8,["disabled"])]),s.questions.length?(l(),C(o(x),{key:3,onClick:M,size:"sm",variant:"ghost",class:"w-full text-xs font-medium hover:bg-primary/10 hover:text-primary transition-all duration-200"},{default:n(()=>[r(o(ne),{class:"mr-2 h-4 w-4"}),t[23]||(t[23]=d(" Export Questions ",-1))]),_:1})):_("",!0)]),_:1})]),_:1})]),_:1},8,["open"])]),_:1}))}});export{Dt as _};
