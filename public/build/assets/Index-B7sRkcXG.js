import{bt as T,dU as M,cn as $,co as f,cp as a,cq as s,bE as e,cr as d,dV as z,cs as o,dk as W,dW as X,ce as G,cl as S,bx as _,dX as H,ch as J,ck as C,bs as D,dG as Q,bu as R,cG as p,e4 as Y,ct as m,cA as Z,cL as ee,dN as se,cB as v,cS as te,df as ae,dw as le}from"./vendor-BwJgEX4g.js";import{_ as re}from"./AdminLayout.vue_vue_type_script_setup_true_lang-BzzpffZS.js";import{_ as oe}from"./DataTable.vue_vue_type_script_setup_true_lang-DzhIEXL0.js";import{_ as I}from"./Switch.vue_vue_type_script_setup_true_lang-Ch_R0qD7.js";import{_ as k}from"./index-Dh4Dof5h.js";import{_ as ue,a as de,b as ie,c as O,d as ne,e as ce}from"./Sonner.vue_vue_type_script_setup_true_lang-BX3Dlz2r.js";import{_ as h,a as F}from"./CardContent.vue_vue_type_script_setup_true_lang-CHCDuRZd.js";import{_ as me}from"./CardDescription.vue_vue_type_script_setup_true_lang-CUZkTCdh.js";import{_ as U,a as E}from"./CardTitle.vue_vue_type_script_setup_true_lang-CFv199a3.js";import{_ as A}from"./Input.vue_vue_type_script_setup_true_lang-BcqgGMan.js";import{_ as b}from"./Label.vue_vue_type_script_setup_true_lang-BCDEh9UE.js";import{_ as fe}from"./Textarea.vue_vue_type_script_setup_true_lang-0xuNlPvZ.js";import{_ as _e,a as pe}from"./index-1ECBvjik.js";import{_ as ge}from"./AlertTitle.vue_vue_type_script_setup_true_lang-C6MI-NlN.js";import{_ as ye,a as ve}from"./DialogContent.vue_vue_type_script_setup_true_lang-9N0hzFWp.js";import{_ as xe}from"./DialogDescription.vue_vue_type_script_setup_true_lang-CmiNOxGF.js";import{_ as be,a as $e}from"./DialogTitle.vue_vue_type_script_setup_true_lang-uESiFFP8.js";import{_ as ke,a as we,b as Ve,c as Ce,d as K}from"./SelectValue.vue_vue_type_script_setup_true_lang-DtEl4IcM.js";import"./UserInfo.vue_vue_type_script_setup_true_lang-Be-HwAt8.js";import"./TooltipTrigger.vue_vue_type_script_setup_true_lang-DJ0GQY-9.js";import"./TableHeader.vue_vue_type_script_setup_true_lang-C1Tt6Hbq.js";const Se=T({__name:"FacultyActions",props:{faculty:{}},setup(r){const n=r,x=M("onEditFaculty"),w=()=>{confirm(`Delete ${n.faculty.name}?`)&&G.delete(S("admin.system.faculties.destroy",{faculty:n.faculty.id}),{preserveScroll:!0})};return(j,c)=>(f(),$(e(ce),null,{default:a(()=>[s(e(ue),{"as-child":""},{default:a(()=>[s(e(k),{variant:"ghost",class:"h-8 w-8 p-0"},{default:a(()=>[c[1]||(c[1]=d("span",{class:"sr-only"},"Open menu",-1)),s(e(z),{class:"h-4 w-4"})]),_:1})]),_:1}),s(e(de),{align:"end"},{default:a(()=>[s(e(ie),null,{default:a(()=>[...c[2]||(c[2]=[o("Actions",-1)])]),_:1}),s(e(O),{onClick:c[0]||(c[0]=g=>e(x)?.(n.faculty))},{default:a(()=>[s(e(W),{class:"mr-2 h-4 w-4"}),c[3]||(c[3]=o(" Edit ",-1))]),_:1}),s(e(ne)),s(e(O),{onClick:w,class:"text-rose-600 focus:text-rose-600 focus:bg-rose-50"},{default:a(()=>[s(e(X),{class:"mr-2 h-4 w-4"}),c[4]||(c[4]=o(" Delete ",-1))]),_:1})]),_:1})]),_:1}))}}),he=(r,n)=>{G.put(S("admin.system.faculties.toggle-active",{faculty:r.id}),{is_active:n},{preserveScroll:!0})},Fe=[{accessorKey:"name",header:({column:r})=>_(k,{variant:"ghost",class:"-ml-2 text-xs hover:bg-muted/50",onClick:()=>r.toggleSorting(r.getIsSorted()==="asc")},()=>["Name",_(H,{class:"ml-2 h-3 w-3"})]),cell:({row:r})=>{const n=r.getValue("name"),x=r.original.slug;return _("div",{class:"flex flex-col"},[_("span",{class:"font-medium"},n),_("span",{class:"text-xs text-muted-foreground"},x)])}},{accessorKey:"faculty_structure_name",header:"Structure",cell:({row:r})=>r.original.faculty_structure_name||"â€”"},{accessorKey:"sort_order",header:"Order",cell:({row:r})=>r.getValue("sort_order")},{accessorKey:"is_active",header:"Active",cell:({row:r})=>_(I,{checked:r.original.is_active,"onUpdate:checked":n=>he(r.original,n)})},{id:"actions",cell:({row:r})=>_(Se,{faculty:r.original})}],Ue={class:"grid gap-4 md:grid-cols-2 mb-6"},Ee={class:"text-2xl font-bold"},Ae={class:"text-2xl font-bold"},je={class:"grid gap-4 py-4"},Ne={class:"grid gap-4 md:grid-cols-2"},Be={class:"space-y-1"},De={key:0,class:"text-xs text-rose-500"},Oe={class:"space-y-1"},Ke={key:0,class:"text-xs text-rose-500"},Te={class:"grid gap-4 md:grid-cols-2"},Ge={class:"space-y-1"},Ie={key:0,class:"text-xs text-rose-500"},Le={class:"space-y-1"},Pe={key:0,class:"text-xs text-rose-500"},qe={class:"space-y-1"},Me={key:0,class:"text-xs text-rose-500"},ze={class:"flex items-center justify-between rounded-md border border-border/70 bg-muted/30 px-3 py-2 text-sm"},We={class:"flex justify-end gap-2"},_s=T({__name:"Index",props:{faculties:{},structures:{},stats:{}},setup(r){const n=r,x=J(),w=C(()=>x.props.flash),j=C(()=>n.faculties??[]),c=C(()=>n.structures??[]),g=D(null),y=D(!1),N=()=>({name:"",slug:"",description:"",faculty_structure_id:"",sort_order:0,is_active:!0}),l=Q({...N()}),V=C(()=>g.value!==null),B=()=>{g.value=null,l.clearErrors(),Object.assign(l,N())},L=()=>{B(),y.value=!0},P=i=>{g.value=i.id,l.clearErrors(),l.name=i.name??"",l.slug=i.slug??"",l.description=i.description??"",l.faculty_structure_id=i.faculty_structure_id?String(i.faculty_structure_id):"",l.sort_order=Number(i.sort_order??0),l.is_active=!!i.is_active,y.value=!0},q=()=>{const i={preserveScroll:!0,onSuccess:()=>{y.value=!1,B()}};if(l.faculty_structure_id||(l.faculty_structure_id=null),V.value&&g.value!==null){l.put(S("admin.system.faculties.update",{faculty:g.value}),i);return}l.post(S("admin.system.faculties.store"),i)};return R("onEditFaculty",P),(i,t)=>(f(),$(re,{title:"Faculties",subtitle:"Manage faculties available for project setup."},{default:a(()=>[d("div",Ue,[s(e(h),{class:"bg-card text-card-foreground border-border/50 shadow-sm"},{default:a(()=>[s(e(U),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:a(()=>[s(e(E),{class:"text-sm font-medium text-muted-foreground"},{default:a(()=>[...t[8]||(t[8]=[o("Total Faculties",-1)])]),_:1}),s(e(Y),{class:"h-4 w-4 text-muted-foreground"})]),_:1}),s(e(F),null,{default:a(()=>[d("div",Ee,m(i.stats.total),1)]),_:1})]),_:1}),s(e(h),{class:"bg-card text-card-foreground border-border/50 shadow-sm"},{default:a(()=>[s(e(U),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:a(()=>[s(e(E),{class:"text-sm font-medium text-muted-foreground"},{default:a(()=>[...t[9]||(t[9]=[o("Active",-1)])]),_:1}),s(e(Z),{class:"h-4 w-4 text-emerald-500"})]),_:1}),s(e(F),null,{default:a(()=>[d("div",Ae,m(i.stats.active),1)]),_:1})]),_:1})]),w.value?.success?(f(),$(e(_e),{key:0,class:"mb-6 border border-emerald-500/40 bg-emerald-500/10"},{default:a(()=>[s(e(ee),{class:"h-4 w-4 text-emerald-500"}),s(e(ge),null,{default:a(()=>[...t[10]||(t[10]=[o("Updated",-1)])]),_:1}),s(e(pe),null,{default:a(()=>[o(m(w.value.success),1)]),_:1})]),_:1})):p("",!0),s(e(h),{class:"border border-border/50 bg-card shadow-sm"},{default:a(()=>[s(e(U),{class:"flex flex-row items-center justify-between pb-3"},{default:a(()=>[d("div",null,[s(e(E),{class:"text-base font-semibold text-foreground"},{default:a(()=>[...t[11]||(t[11]=[o("Faculties",-1)])]),_:1}),s(e(me),null,{default:a(()=>[...t[12]||(t[12]=[o("Keep faculties aligned with their structure templates.",-1)])]),_:1})]),s(e(k),{size:"sm",onClick:L},{default:a(()=>[s(e(se),{class:"mr-2 h-4 w-4"}),t[13]||(t[13]=o(" Add Faculty ",-1))]),_:1})]),_:1}),s(e(F),null,{default:a(()=>[s(oe,{columns:e(Fe),data:j.value,"search-key":"name","search-placeholder":"Filter faculties..."},null,8,["columns","data"])]),_:1})]),_:1}),s(e(ye),{open:y.value,"onUpdate:open":t[7]||(t[7]=u=>y.value=u)},{default:a(()=>[s(e(ve),{class:"sm:max-w-[700px] max-h-[90vh] overflow-y-auto"},{default:a(()=>[s(e(be),null,{default:a(()=>[s(e($e),null,{default:a(()=>[o(m(V.value?"Edit faculty":"Create faculty"),1)]),_:1}),s(e(xe),null,{default:a(()=>[o(m(V.value?"Update faculty details.":"Add a new faculty to the catalog."),1)]),_:1})]),_:1}),d("div",je,[d("div",Ne,[d("div",Be,[s(e(b),null,{default:a(()=>[...t[14]||(t[14]=[o("Name",-1)])]),_:1}),s(e(A),{modelValue:e(l).name,"onUpdate:modelValue":t[0]||(t[0]=u=>e(l).name=u),placeholder:"Science"},null,8,["modelValue"]),e(l).errors.name?(f(),v("p",De,m(e(l).errors.name),1)):p("",!0)]),d("div",Oe,[s(e(b),null,{default:a(()=>[...t[15]||(t[15]=[o("Slug",-1)])]),_:1}),s(e(A),{modelValue:e(l).slug,"onUpdate:modelValue":t[1]||(t[1]=u=>e(l).slug=u),placeholder:"science"},null,8,["modelValue"]),e(l).errors.slug?(f(),v("p",Ke,m(e(l).errors.slug),1)):p("",!0)])]),d("div",Te,[d("div",Ge,[s(e(b),null,{default:a(()=>[...t[16]||(t[16]=[o("Structure Template",-1)])]),_:1}),s(e(ke),{modelValue:e(l).faculty_structure_id,"onUpdate:modelValue":t[2]||(t[2]=u=>e(l).faculty_structure_id=u)},{default:a(()=>[s(e(we),null,{default:a(()=>[s(e(Ve),{placeholder:"Select structure"})]),_:1}),s(e(Ce),null,{default:a(()=>[s(e(K),{value:""},{default:a(()=>[...t[17]||(t[17]=[o("No structure",-1)])]),_:1}),(f(!0),v(te,null,ae(c.value,u=>(f(),$(e(K),{key:u.id,value:String(u.id)},{default:a(()=>[o(m(u.faculty_name),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"]),e(l).errors.faculty_structure_id?(f(),v("p",Ie,m(e(l).errors.faculty_structure_id),1)):p("",!0)]),d("div",Le,[s(e(b),null,{default:a(()=>[...t[18]||(t[18]=[o("Sort Order",-1)])]),_:1}),s(e(A),{modelValue:e(l).sort_order,"onUpdate:modelValue":t[3]||(t[3]=u=>e(l).sort_order=u),type:"number",min:"0"},null,8,["modelValue"]),e(l).errors.sort_order?(f(),v("p",Pe,m(e(l).errors.sort_order),1)):p("",!0)])]),d("div",qe,[s(e(b),null,{default:a(()=>[...t[19]||(t[19]=[o("Description",-1)])]),_:1}),s(e(fe),{modelValue:e(l).description,"onUpdate:modelValue":t[4]||(t[4]=u=>e(l).description=u),rows:"3",placeholder:"Optional description..."},null,8,["modelValue"]),e(l).errors.description?(f(),v("p",Me,m(e(l).errors.description),1)):p("",!0)]),d("label",ze,[t[20]||(t[20]=d("span",{class:"text-foreground"},"Active",-1)),s(e(I),{checked:e(l).is_active,"onUpdate:checked":t[5]||(t[5]=u=>e(l).is_active=u)},null,8,["checked"])])]),d("div",We,[s(e(k),{variant:"ghost",onClick:t[6]||(t[6]=u=>y.value=!1)},{default:a(()=>[...t[21]||(t[21]=[o("Cancel",-1)])]),_:1}),s(e(k),{disabled:e(l).processing,onClick:q},{default:a(()=>[e(l).processing?(f(),$(e(le),{key:0,class:"mr-2 h-4 w-4 animate-spin"})):p("",!0),d("span",null,m(V.value?"Update faculty":"Add faculty"),1)]),_:1},8,["disabled"])])]),_:1})]),_:1},8,["open"])]),_:1}))}});export{_s as default};
