import{_ as C,a as v}from"./index-BhKU_YgD.js";import{_ as S}from"./ScrollArea.vue_vue_type_script_setup_true_lang-Udg4rw_Q.js";import{_ as z,b as P,c as M,d as A,e as E,f as L,g as V,h as W}from"./AlertDialogTitle.vue_vue_type_script_setup_true_lang-CpCEsvCK.js";import{b as F}from"./useForwardExpose-CaqOkBGp.js";import{D as R}from"./DialogTrigger-B4ajdgjx.js";import{d as k,C as x,o as u,E as o,r as D,a5 as q,a8 as G,u as s,D as Q,a as b,c,K as l,H as a,P as p,M as d,Q as H,S as I,O as y,n as w,R as J,J as K}from"./app-Bo8mbAfA.js";import{_ as T}from"./index-2iaKBSZ8.js";import{t as N}from"./index-B_MauiHY.js";import{B as O}from"./book-marked-2CxinhrV.js";import{P as U}from"./plus-C3UDVPn1.js";import{C as X}from"./chevron-right-D3DgVsqA.js";import{C as Y}from"./circle-check-big-DK9Yqmpw.js";import{L as Z}from"./lock-DX5X2v3_.js";import{T as ee}from"./target-CQBPhanr.js";import{T as te}from"./trash-2-D6zuQNGS.js";var re=k({__name:"AlertDialogTrigger",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"button"}},setup(m){const _=m;return F(),(n,f)=>(u(),x(s(R),q(G(_)),{default:o(()=>[D(n.$slots,"default")]),_:3},16))}}),se=re;const ae=k({__name:"AlertDialogTrigger",props:{asChild:{type:Boolean},as:{}},setup(m){const _=m;return(n,f)=>(u(),x(s(se),Q({"data-slot":"alert-dialog-trigger"},_),{default:o(()=>[D(n.$slots,"default")]),_:3},16))}}),ne={class:"flex h-full flex-col bg-transparent"},oe={class:"px-4 py-3 border-b border-border/40"},le={class:"text-xs font-bold uppercase tracking-wider text-muted-foreground flex items-center gap-2"},ue={class:"mt-2 flex items-center justify-between"},de={class:"text-xs font-medium text-foreground"},ie={class:"p-2 space-y-1"},ce=["onClick"],pe={class:"flex-shrink-0 mt-0.5"},he={key:1,class:"h-6 w-6 rounded-md bg-primary text-primary-foreground flex items-center justify-center shadow-sm ring-2 ring-primary/20"},me={class:"text-xs font-bold"},_e={key:2,class:"h-6 w-6 rounded-md bg-muted text-muted-foreground flex items-center justify-center border border-border"},fe={class:"text-xs font-medium"},ge={key:3,class:"h-6 w-6 rounded-md bg-muted/50 text-muted-foreground/30 flex items-center justify-center border border-border/50"},be={class:"flex-1 text-left min-w-0"},xe={class:"flex items-center gap-2 mt-1.5"},Ce={class:"text-[10px] text-muted-foreground/70 flex items-center gap-1"},ve={key:0,class:"absolute right-2 top-3 opacity-0 group-hover:opacity-100 transition-opacity"},ye={class:"p-3 border-t border-border/40 bg-muted/5"},we={key:1,class:"flex gap-2"},ke={class:"truncate max-w-[120px]"},Fe=k({__name:"ChapterNavigation",props:{allChapters:{},currentChapter:{},project:{},outlines:{},facultyChapters:{},currentWordCount:{},targetWordCount:{},writingQualityScore:{},chapterContentLength:{}},emits:["goToChapter","generateNextChapter","deleteChapter"],setup(m,{emit:_}){const n=m,f=_,g=b(()=>n.facultyChapters&&n.facultyChapters.length>0?n.facultyChapters.map(t=>{const r=n.allChapters.find(i=>i.chapter_number===t.number),e=n.outlines?.find(i=>i.chapter_number===t.number);return{chapter_number:t.number,title:t.title,target_word_count:t.word_count,status:r?r.status:"not_started",exists:!!r,id:r?.id,slug:r?.slug,outline:e||null,facultyChapter:t}}):n.outlines&&n.outlines.length>0?n.outlines.map(t=>{const r=n.allChapters.find(e=>e.chapter_number===t.chapter_number);return{chapter_number:t.chapter_number,title:t.chapter_title,target_word_count:t.target_word_count,status:r?r.status:"not_started",exists:!!r,id:r?.id,slug:r?.slug,outline:t,facultyChapter:null}}):n.allChapters&&n.allChapters.length>0?n.allChapters.map(t=>({chapter_number:t.chapter_number,title:t.title,target_word_count:0,status:t.status,exists:!0,id:t.id,slug:t.slug,outline:null,facultyChapter:null})):[]);b(()=>!0);const h=b(()=>{const t=n.currentChapter.chapter_number;return g.value.find(e=>e.chapter_number===t+1)});b(()=>{const t=n.currentChapter.chapter_number;return g.value.find(e=>e.chapter_number===t-1)});const $=t=>{f("goToChapter",t)},j=()=>{f("generateNextChapter")},B=(t,r)=>{r&&J.delete(K("chapters.destroy",{project:n.project.slug,chapter:r}),{preserveState:!0,preserveScroll:!0,only:["allChapters","chapter"],onSuccess:e=>{const i=e.props.flash?.message||"Chapter deleted successfully";N.success(i)},onError:e=>{const i=typeof e=="string"?e:"Failed to delete chapter.";N.error(i)}})};return(t,r)=>(u(),c("div",ne,[l("div",oe,[l("h2",le,[a(s(O),{class:"h-3.5 w-3.5"}),r[1]||(r[1]=p(" Table of Contents ",-1))]),l("div",ue,[l("span",de,d(g.value.length)+" Chapters",1),a(s(T),{variant:"secondary",class:"text-[10px] h-5 px-1.5 font-normal"},{default:o(()=>[p(d(Math.round(t.currentWordCount/(t.targetWordCount||1)*100))+"% Complete ",1)]),_:1})])]),a(s(S),{class:"flex-1"},{default:o(()=>[l("div",ie,[(u(!0),c(H,null,I(g.value,e=>(u(),c("div",{key:e.chapter_number,class:"group relative"},[l("button",{onClick:i=>$(e.chapter_number),class:w(s(v)("flex w-full items-start gap-3 rounded-lg px-3 py-3 text-sm transition-all duration-200 border border-transparent",e.chapter_number===t.currentChapter.chapter_number?"bg-primary/5 border-primary/10 shadow-sm":"hover:bg-muted/50 hover:border-border/50"))},[l("div",pe,[e.status==="approved"||e.status==="completed"?(u(),c("div",{key:0,class:w(s(v)("h-6 w-6 rounded-md flex items-center justify-center",e.chapter_number===t.currentChapter.chapter_number?"bg-green-500 text-white shadow-sm ring-2 ring-green-500/20":"bg-green-500/10 text-green-700 dark:text-green-400 border border-green-500/20"))},[a(s(Y),{class:"h-3.5 w-3.5"})],2)):e.chapter_number===t.currentChapter.chapter_number?(u(),c("div",he,[l("span",me,d(e.chapter_number),1)])):e.exists?(u(),c("div",_e,[l("span",fe,d(e.chapter_number),1)])):(u(),c("div",ge,[a(s(Z),{class:"h-3 w-3"})]))]),l("div",be,[l("p",{class:w(s(v)("truncate font-medium leading-tight",e.chapter_number===t.currentChapter.chapter_number?"text-foreground":"text-muted-foreground group-hover:text-foreground"))},d(e.title),3),l("div",xe,[l("span",Ce,[a(s(ee),{class:"h-3 w-3"}),p(" "+d(e.target_word_count)+" words ",1)]),e.exists?y("",!0):(u(),x(s(T),{key:0,variant:"outline",class:"h-4 px-1 text-[9px] border-dashed text-muted-foreground/60"},{default:o(()=>[...r[2]||(r[2]=[p(" Not Started ",-1)])]),_:1}))])])],10,ce),e.exists&&e.chapter_number!==t.currentChapter.chapter_number?(u(),c("div",ve,[a(s(z),null,{default:o(()=>[a(s(ae),{asChild:""},{default:o(()=>[a(s(C),{variant:"ghost",size:"icon",class:"h-6 w-6 text-muted-foreground/50 hover:text-destructive hover:bg-destructive/10 rounded-md"},{default:o(()=>[a(s(te),{class:"h-3 w-3"})]),_:1})]),_:1}),a(s(P),null,{default:o(()=>[a(s(M),null,{default:o(()=>[a(s(A),null,{default:o(()=>[p("Delete Chapter "+d(e.chapter_number)+"?",1)]),_:2},1024),a(s(E),null,{default:o(()=>[p(' This will permanently delete "'+d(e.title)+'" and all its content. ',1)]),_:2},1024)]),_:2},1024),a(s(L),null,{default:o(()=>[a(s(V),null,{default:o(()=>[...r[3]||(r[3]=[p("Cancel",-1)])]),_:1}),a(s(W),{class:"bg-destructive text-destructive-foreground hover:bg-destructive/90",onClick:i=>B(e.id,e.slug)},{default:o(()=>[...r[4]||(r[4]=[p(" Delete ",-1)])]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)])):y("",!0)]))),128))])]),_:1}),l("div",ye,[h.value&&!h.value.exists?(u(),x(s(C),{key:0,onClick:j,class:"w-full bg-primary text-primary-foreground shadow-sm hover:bg-primary/90 transition-all h-9 text-xs font-medium",size:"sm"},{default:o(()=>[a(s(U),{class:"mr-2 h-3.5 w-3.5"}),p(" Start Chapter "+d(h.value.chapter_number),1)]),_:1})):h.value?(u(),c("div",we,[a(s(C),{variant:"outline",class:"w-full justify-between bg-background hover:bg-accent/50 h-9 text-xs text-zinc-700 dark:text-zinc-300",size:"sm",onClick:r[0]||(r[0]=e=>$(h.value.chapter_number))},{default:o(()=>[l("span",ke,"Next: "+d(h.value.title),1),a(s(X),{class:"h-3.5 w-3.5 ml-2 flex-shrink-0"})]),_:1})])):y("",!0)])]))}});export{Fe as _};
