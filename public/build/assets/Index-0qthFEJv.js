import{d as H,I as A,g as k,o as v,w as t,e as s,u as e,b as f,c0 as ae,h as o,c3 as re,X as oe,c4 as le,aG as de,bk as ne,bo as ue,_ as J,aw as m,bG as ie,m as q,r as C,ax as F,c1 as W,ar as me,t as p,c5 as fe,c6 as ce,c as P,a as $,a1 as I}from"./vendor-Bi-OfESq.js";import{_ as pe}from"./AdminLayout.vue_vue_type_script_setup_true_lang-SkSjBj8N.js";import{_ as D,a as R}from"./CardContent.vue_vue_type_script_setup_true_lang-hI6CIJ8Y.js";import{_ as _e}from"./CardDescription.vue_vue_type_script_setup_true_lang-C0xkupM9.js";import{_ as j,a as B}from"./CardTitle.vue_vue_type_script_setup_true_lang-B2K6zULM.js";import{_ as ve}from"./DataTable.vue_vue_type_script_setup_true_lang-uyhQjqh5.js";import{_ as b}from"./index-Bt90G_JS.js";import{_ as z}from"./index-Isya7Tix.js";import{a as we,b as ge,e as be,c as V,f as xe,_ as ye}from"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-BzGYI4X_.js";import{s as S}from"./app-BXCYb-rZ.js";import{a as L,_ as O}from"./DialogContent.vue_vue_type_script_setup_true_lang-BgoeTIye.js";import{_ as M}from"./DialogDescription.vue_vue_type_script_setup_true_lang-oSz0MzUo.js";import{_ as T}from"./DialogFooter.vue_vue_type_script_setup_true_lang-W_UkA0Wa.js";import{_ as G,a as X}from"./DialogTitle.vue_vue_type_script_setup_true_lang-BzYxERPb.js";import{_ as K}from"./Input.vue_vue_type_script_setup_true_lang-DQnvOcR-.js";import{_ as U}from"./Label.vue_vue_type_script_setup_true_lang-B0S6IESV.js";import{_ as $e}from"./Textarea.vue_vue_type_script_setup_true_lang-B1KXkKg2.js";import"./UserInfo.vue_vue_type_script_setup_true_lang-DcY1sPuq.js";import"./Presence-CF0v4nrQ.js";import"./useForwardExpose-RFhk291K.js";import"./index-CAP3Ft32.js";import"./DialogTitle-DkxZZug9.js";import"./TooltipTrigger.vue_vue_type_script_setup_true_lang-DDlQqk4-.js";import"./VisuallyHidden-CHAFMzXk.js";import"./index-CLOl789g.js";import"./TableHeader.vue_vue_type_script_setup_true_lang-CaM13-VK.js";const ke=H({__name:"UserActions",props:{user:{}},setup(l){const _=l,E=A("onResetPassword"),N=A("onAddWords"),i=A("onDeductWords"),x=A("onSuspend"),g=()=>{confirm(`Are you sure you want to delete ${_.user.name}?`)&&J.delete(S("admin.users.destroy",{user:_.user.id}),{preserveScroll:!0})},y=()=>{confirm(`Unsuspend ${_.user.name}?`)&&J.post(S("admin.users.unban",{user:_.user.id}),{},{preserveScroll:!0})};return(c,r)=>(v(),k(e(ye),null,{default:t(()=>[s(e(we),{"as-child":""},{default:t(()=>[s(e(b),{variant:"ghost",class:"h-8 w-8 p-0"},{default:t(()=>[r[4]||(r[4]=f("span",{class:"sr-only"},"Open menu",-1)),s(e(ae),{class:"h-4 w-4"})]),_:1})]),_:1}),s(e(ge),{align:"end"},{default:t(()=>[s(e(be),null,{default:t(()=>[...r[5]||(r[5]=[o("Actions",-1)])]),_:1}),s(e(V),{onClick:r[0]||(r[0]=d=>e(E)?.(c.user))},{default:t(()=>[s(e(re),{class:"mr-2 h-4 w-4"}),r[6]||(r[6]=o(" Reset Password ",-1))]),_:1}),s(e(V),{onClick:r[1]||(r[1]=d=>e(N)?.(c.user))},{default:t(()=>[s(e(oe),{class:"mr-2 h-4 w-4"}),r[7]||(r[7]=o(" Add Words ",-1))]),_:1}),s(e(V),{onClick:r[2]||(r[2]=d=>e(i)?.(c.user))},{default:t(()=>[s(e(le),{class:"mr-2 h-4 w-4"}),r[8]||(r[8]=o(" Deduct Words ",-1))]),_:1}),s(e(xe)),c.user.is_banned?(v(),k(e(V),{key:1,onClick:y,class:"text-emerald-600 focus:text-emerald-600 focus:bg-emerald-50"},{default:t(()=>[s(e(ne),{class:"mr-2 h-4 w-4"}),r[10]||(r[10]=o(" Unsuspend ",-1))]),_:1})):(v(),k(e(V),{key:0,onClick:r[3]||(r[3]=d=>e(x)?.(c.user)),class:"text-amber-600 focus:text-amber-600 focus:bg-amber-50"},{default:t(()=>[s(e(de),{class:"mr-2 h-4 w-4"}),r[9]||(r[9]=o(" Suspend ",-1))]),_:1})),s(e(V),{onClick:g,class:"text-rose-600 focus:text-rose-600 focus:bg-rose-50"},{default:t(()=>[s(e(ue),{class:"mr-2 h-4 w-4"}),r[11]||(r[11]=o(" Delete ",-1))]),_:1})]),_:1})]),_:1}))}}),Ve=[{accessorKey:"id",header:"ID",cell:({row:l})=>m("div",{class:"text-muted-foreground font-mono text-xs"},`#${l.getValue("id")}`)},{accessorKey:"name",header:"Name",cell:({row:l})=>m("div",{class:"font-medium text-foreground"},l.getValue("name"))},{accessorKey:"email",header:({column:l})=>m(b,{variant:"ghost",class:"-ml-2 text-xs hover:bg-muted/50",onClick:()=>l.toggleSorting(l.getIsSorted()==="asc")},()=>["Email",m(ie,{class:"ml-2 h-3 w-3"})]),cell:({row:l})=>m("div",{class:"text-muted-foreground"},l.getValue("email"))},{accessorKey:"package",header:"Package",cell:({row:l})=>m(z,{variant:"outline",class:"font-normal"},()=>l.getValue("package"))},{accessorKey:"word_balance",header:"Balance",cell:({row:l})=>m("div",{class:"font-mono text-xs"},l.getValue("word_balance").toLocaleString())},{accessorKey:"total_words_purchased",header:"Purchased",cell:({row:l})=>m("div",{class:"text-muted-foreground text-xs"},l.getValue("total_words_purchased").toLocaleString())},{accessorKey:"projects_count",header:()=>m("div",{class:"text-center"},"Projects"),cell:({row:l})=>m("div",{class:"text-center font-medium"},l.getValue("projects_count"))},{accessorKey:"payments_count",header:()=>m("div",{class:"text-center"},"Payments"),cell:({row:l})=>m("div",{class:"text-center font-medium"},l.getValue("payments_count"))},{accessorKey:"is_banned",header:"Status",cell:({row:l})=>{const _=l.getValue("is_banned");return m(z,{variant:_?"destructive":"secondary",class:_?"":"bg-emerald-500/15 text-emerald-600 hover:bg-emerald-500/25 border-emerald-500/20"},()=>_?"Banned":"Active")}},{accessorKey:"created_at",header:"Joined",cell:({row:l})=>m("div",{class:"text-muted-foreground text-sm"},new Date(l.getValue("created_at")).toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric"}))},{id:"actions",cell:({row:l})=>m(ke,{user:l.original})}],Ce={class:"grid gap-4 md:grid-cols-3 mb-8"},Ue={class:"text-2xl font-bold"},Se={class:"text-2xl font-bold"},Ae={class:"text-2xl font-bold"},We={class:"grid gap-4 py-4"},Pe={class:"space-y-2"},De={key:0,class:"text-sm text-destructive"},Re={class:"space-y-2"},je={class:"grid gap-4 py-4"},Be={class:"space-y-2"},Ke={key:0,class:"text-sm text-destructive"},Ee={class:"space-y-2"},Ne={key:0,class:"text-sm text-destructive"},Fe={class:"grid gap-4 py-4"},Ie={class:"space-y-2"},Le={key:0,class:"text-sm text-destructive"},cs=H({__name:"Index",props:{users:{}},setup(l){const _=l,E=q(()=>_.users.data.filter(u=>!u.is_banned).length),N=q(()=>_.users.data.filter(u=>u.is_banned).length),i=C(null),x=C(!1),g=C(!1),y=C(!1),c=C(!1),r=F({password:"",password_confirmation:""}),d=F({words:void 0,reason:""}),w=F({reason:""}),Q=u=>{i.value=u,r.reset(),r.clearErrors(),x.value=!0},Y=u=>{i.value=u,c.value=!1,d.reset(),d.clearErrors(),g.value=!0},Z=u=>{i.value=u,c.value=!0,d.reset(),d.clearErrors(),g.value=!0},h=u=>{i.value=u,w.reset(),w.clearErrors(),y.value=!0};W("onResetPassword",Q),W("onAddWords",Y),W("onDeductWords",Z),W("onSuspend",h);const ee=()=>{i.value&&r.post(S("admin.users.reset-password",i.value.id),{onSuccess:()=>{x.value=!1,r.reset()}})},se=()=>{if(!i.value)return;const u=Math.abs(Number(d.words));d.words=c.value?-u:u,d.post(S("admin.users.adjust-balance",i.value.id),{onSuccess:()=>{g.value=!1,d.reset()}})},te=()=>{i.value&&w.post(S("admin.users.ban",i.value.id),{onSuccess:()=>{y.value=!1,w.reset()}})};return(u,a)=>(v(),k(pe,{title:"Users",subtitle:"Manage your platform's user base."},{default:t(()=>[f("div",Ce,[s(e(D),{class:"bg-card text-card-foreground border-border/50 shadow-sm"},{default:t(()=>[s(e(j),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:t(()=>[s(e(B),{class:"text-sm font-medium text-muted-foreground"},{default:t(()=>[...a[11]||(a[11]=[o("Total Users",-1)])]),_:1}),s(e(me),{class:"h-4 w-4 text-muted-foreground"})]),_:1}),s(e(R),null,{default:t(()=>[f("div",Ue,p(u.users.data.length),1)]),_:1})]),_:1}),s(e(D),{class:"bg-card text-card-foreground border-border/50 shadow-sm"},{default:t(()=>[s(e(j),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:t(()=>[s(e(B),{class:"text-sm font-medium text-muted-foreground"},{default:t(()=>[...a[12]||(a[12]=[o("Active Users",-1)])]),_:1}),s(e(fe),{class:"h-4 w-4 text-emerald-500"})]),_:1}),s(e(R),null,{default:t(()=>[f("div",Se,p(E.value),1)]),_:1})]),_:1}),s(e(D),{class:"bg-card text-card-foreground border-border/50 shadow-sm"},{default:t(()=>[s(e(j),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:t(()=>[s(e(B),{class:"text-sm font-medium text-muted-foreground"},{default:t(()=>[...a[13]||(a[13]=[o("Banned Users",-1)])]),_:1}),s(e(ce),{class:"h-4 w-4 text-rose-500"})]),_:1}),s(e(R),null,{default:t(()=>[f("div",Ae,p(N.value),1)]),_:1})]),_:1})]),s(e(D),{class:"border border-border/50 bg-card shadow-sm"},{default:t(()=>[s(e(j),{class:"flex flex-row items-center justify-between pb-3"},{default:t(()=>[f("div",null,[s(e(B),{class:"text-base font-semibold text-foreground"},{default:t(()=>[...a[14]||(a[14]=[o("All Users",-1)])]),_:1}),s(e(_e),null,{default:t(()=>[...a[15]||(a[15]=[o("A list of all registered users including their name, email, and status.",-1)])]),_:1})])]),_:1}),s(e(R),null,{default:t(()=>[s(ve,{columns:e(Ve),data:u.users.data,"search-key":"email","search-placeholder":"Filter by email..."},null,8,["columns","data"])]),_:1})]),_:1}),s(e(L),{open:x.value,"onUpdate:open":a[3]||(a[3]=n=>x.value=n)},{default:t(()=>[s(e(O),{class:"sm:max-w-[425px]"},{default:t(()=>[s(e(G),null,{default:t(()=>[s(e(X),null,{default:t(()=>[...a[16]||(a[16]=[o("Reset Password",-1)])]),_:1}),s(e(M),null,{default:t(()=>[o(" Set a new password for "+p(i.value?.name)+". ",1)]),_:1})]),_:1}),f("div",We,[f("div",Pe,[s(e(U),{for:"password"},{default:t(()=>[...a[17]||(a[17]=[o("New Password",-1)])]),_:1}),s(e(K),{id:"password",type:"password",modelValue:e(r).password,"onUpdate:modelValue":a[0]||(a[0]=n=>e(r).password=n)},null,8,["modelValue"]),e(r).errors.password?(v(),P("p",De,p(e(r).errors.password),1)):$("",!0)]),f("div",Re,[s(e(U),{for:"password_confirmation"},{default:t(()=>[...a[18]||(a[18]=[o("Confirm Password",-1)])]),_:1}),s(e(K),{id:"password_confirmation",type:"password",modelValue:e(r).password_confirmation,"onUpdate:modelValue":a[1]||(a[1]=n=>e(r).password_confirmation=n)},null,8,["modelValue"])])]),s(e(T),null,{default:t(()=>[s(e(b),{variant:"outline",onClick:a[2]||(a[2]=n=>x.value=!1)},{default:t(()=>[...a[19]||(a[19]=[o("Cancel",-1)])]),_:1}),s(e(b),{onClick:ee,disabled:e(r).processing},{default:t(()=>[e(r).processing?(v(),k(e(I),{key:0,class:"mr-2 h-4 w-4 animate-spin"})):$("",!0),a[20]||(a[20]=o(" Reset Password ",-1))]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["open"]),s(e(L),{open:g.value,"onUpdate:open":a[7]||(a[7]=n=>g.value=n)},{default:t(()=>[s(e(O),{class:"sm:max-w-[425px]"},{default:t(()=>[s(e(G),null,{default:t(()=>[s(e(X),null,{default:t(()=>[o(p(c.value?"Deduct Words":"Add Words"),1)]),_:1}),s(e(M),null,{default:t(()=>[o(p(c.value?"Remove words from":"Add words to")+" "+p(i.value?.name)+"'s balance. ",1)]),_:1})]),_:1}),f("div",je,[f("div",Be,[s(e(U),{for:"words"},{default:t(()=>[...a[21]||(a[21]=[o("Amount of Words",-1)])]),_:1}),s(e(K),{id:"words",type:"number",min:"0",modelValue:e(d).words,"onUpdate:modelValue":a[4]||(a[4]=n=>e(d).words=n),placeholder:"e.g. 5000"},null,8,["modelValue"]),e(d).errors.words?(v(),P("p",Ke,p(e(d).errors.words),1)):$("",!0)]),f("div",Ee,[s(e(U),{for:"reason"},{default:t(()=>[...a[22]||(a[22]=[o("Reason",-1)])]),_:1}),s(e(K),{id:"reason",modelValue:e(d).reason,"onUpdate:modelValue":a[5]||(a[5]=n=>e(d).reason=n),placeholder:"e.g. Bonus, Refund, Adjustment"},null,8,["modelValue"]),e(d).errors.reason?(v(),P("p",Ne,p(e(d).errors.reason),1)):$("",!0)])]),s(e(T),null,{default:t(()=>[s(e(b),{variant:"outline",onClick:a[6]||(a[6]=n=>g.value=!1)},{default:t(()=>[...a[23]||(a[23]=[o("Cancel",-1)])]),_:1}),s(e(b),{onClick:se,disabled:e(d).processing,variant:c.value?"destructive":"default"},{default:t(()=>[e(d).processing?(v(),k(e(I),{key:0,class:"mr-2 h-4 w-4 animate-spin"})):$("",!0),o(" "+p(c.value?"Deduct Words":"Add Words"),1)]),_:1},8,["disabled","variant"])]),_:1})]),_:1})]),_:1},8,["open"]),s(e(L),{open:y.value,"onUpdate:open":a[10]||(a[10]=n=>y.value=n)},{default:t(()=>[s(e(O),{class:"sm:max-w-[425px]"},{default:t(()=>[s(e(G),null,{default:t(()=>[s(e(X),null,{default:t(()=>[...a[24]||(a[24]=[o("Suspend User",-1)])]),_:1}),s(e(M),null,{default:t(()=>[o(" Ban "+p(i.value?.name)+" from accessing the platform. ",1)]),_:1})]),_:1}),f("div",Fe,[f("div",Ie,[s(e(U),{for:"ban_reason"},{default:t(()=>[...a[25]||(a[25]=[o("Reason for Suspension",-1)])]),_:1}),s(e($e),{id:"ban_reason",modelValue:e(w).reason,"onUpdate:modelValue":a[8]||(a[8]=n=>e(w).reason=n),placeholder:"e.g. Violation of terms..."},null,8,["modelValue"]),e(w).errors.reason?(v(),P("p",Le,p(e(w).errors.reason),1)):$("",!0)])]),s(e(T),null,{default:t(()=>[s(e(b),{variant:"outline",onClick:a[9]||(a[9]=n=>y.value=!1)},{default:t(()=>[...a[26]||(a[26]=[o("Cancel",-1)])]),_:1}),s(e(b),{variant:"destructive",onClick:te,disabled:e(w).processing},{default:t(()=>[e(w).processing?(v(),k(e(I),{key:0,class:"mr-2 h-4 w-4 animate-spin"})):$("",!0),a[27]||(a[27]=o(" Suspend User ",-1))]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["open"])]),_:1}))}});export{cs as default};
