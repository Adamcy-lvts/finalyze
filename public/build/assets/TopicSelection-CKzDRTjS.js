import{d as Te,b as x,p as Ie,U as I,e as Ce,i as O,o as p,j as l,g as t,k as a,u as r,y as c,z as g,c as S,f as ie,Q as H,a1 as W,n as C,l as ke,F as X,h as Y,X as F}from"./app-C4Yg38RJ.js";import{_ as D}from"./index-Bwvau0Ya.js";import{_ as j}from"./index-D5k4420Y.js";import{_ as P,a as J}from"./CardContent.vue_vue_type_script_setup_true_lang-CDIY1Fom.js";import{_ as le}from"./CardDescription.vue_vue_type_script_setup_true_lang-B6QLQUc8.js";import{_ as K,a as Q}from"./CardTitle.vue_vue_type_script_setup_true_lang-Dgp96WVn.js";import{_ as Oe}from"./Input.vue_vue_type_script_setup_true_lang-B_hbsX1Z.js";import{_ as Z}from"./Label.vue_vue_type_script_setup_true_lang-C0GS_IoN.js";import{_ as je,a as Pe,b as ne,c as de}from"./TabsTrigger.vue_vue_type_script_setup_true_lang-B5Xc-2l3.js";import{_ as Ee}from"./Textarea.vue_vue_type_script_setup_true_lang-BLuot9Ym.js";import{_ as Ne}from"./AppLayout.vue_vue_type_script_setup_true_lang-BvRDhCK3.js";import{t as f}from"./index-C7EEW2-P.js";import{_ as ce}from"./SafeHtmlText.vue_vue_type_script_setup_true_lang-QFivA_Ft.js";import{aa as Me}from"./RichTextEditor-UCZfYbOg.js";import{_ as Re}from"./PurchaseModal.vue_vue_type_script_setup_true_lang-DHfiJ_fK.js";import{u as Be}from"./useWordBalance-BDf4wK_z.js";import{A as Ue}from"./arrow-left-5P1B6ZPc.js";import{L as E}from"./lightbulb-B_SdX3s4.js";import{B as Ae}from"./book-open-OrFrSF-d.js";import{G as Fe}from"./graduation-cap-CdljDq5i.js";import{S as De}from"./school-DUtu9H47.js";import{F as Le}from"./file-text-VIk9l4Ed.js";import{M as L}from"./message-square-DL76dtXI.js";import{L as ee}from"./loader-circle-D0mA_mCq.js";import{A as ue}from"./arrow-right-CTr1CAIU.js";import{R as $e}from"./refresh-cw-Bz_MNg1I.js";import{C as pe}from"./circle-check-big-DAHts8Q9.js";import{_ as Ge}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./index-BVtTWkvO.js";import"./useForwardExpose-B0LRJfHl.js";import"./Presence-Bg4JRrHR.js";import"./VisuallyHidden-ClD5PwBy.js";import"./RovingFocusItem-3cLQFLJh.js";import"./UserInfo.vue_vue_type_script_setup_true_lang-IuGcA18J.js";import"./DialogTitle-BhsPRZdQ.js";import"./x-CpmNAXg6.js";import"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-CF7qarPd.js";import"./TooltipTrigger.vue_vue_type_script_setup_true_lang-DGA408pa.js";import"./coins-CPkLLPmI.js";import"./log-out-ChfKR0Nk.js";import"./AppLogo.vue_vue_type_script_setup_true_lang-DAqEOlWb.js";import"./library-CjjHOly-.js";import"./plus-C3vmXQEs.js";import"./chevron-right-DWz1EY8d.js";import"./WordBalanceDisplay.vue_vue_type_script_setup_true_lang-5leGFbHt.js";import"./sun-C9T5JmNf.js";import"./purify.es-DxJI3Wx7.js";import"./Progress.vue_vue_type_script_setup_true_lang-BLXPTf21.js";import"./nullish-CHIgUVhi.js";import"./index-BWEDi_FC.js";import"./step-DrZ9DcYd.js";import"./chart-column-CBvQpicn.js";import"./calendar-D6kMWK1-.js";import"./brain-BJCA96Mb.js";import"./users-D8JdotqH.js";import"./circle-alert-C9OagM7Y.js";import"./eye-DWbenqO0.js";import"./check-NjhrG_Ed.js";import"./type-C3pA5IMm.js";import"./download-BwFq65nG.js";import"./trash-2-mqN3ZeR-.js";import"./DialogTitle.vue_vue_type_script_setup_true_lang-D7mpGJIc.js";import"./DialogDescription.vue_vue_type_script_setup_true_lang-DuCwZhx2.js";import"./DialogFooter.vue_vue_type_script_setup_true_lang-Dmitwsg3.js";import"./minus-KBh4sp4X.js";import"./list-BXt-O05F.js";import"./sparkles-kjhXVihk.js";const Ve={class:"min-h-screen bg-gradient-to-b from-background via-background/95 to-muted/20"},qe={class:"mx-auto max-w-7xl space-y-10 p-6 pb-20 lg:p-10"},ze={class:"flex items-center justify-between"},He={class:"flex h-8 w-8 items-center justify-center rounded-full bg-muted/50 group-hover:bg-primary/10 transition-colors mr-2"},We={class:"space-y-4 text-center animate-in fade-in slide-in-from-bottom-4 duration-700"},Xe={class:"mx-auto flex h-20 w-20 items-center justify-center rounded-2xl bg-gradient-to-br from-primary/20 to-primary/5 shadow-lg shadow-primary/10 ring-1 ring-white/20"},Ye={class:"space-y-2"},Je={class:"mx-auto max-w-2xl text-lg text-muted-foreground leading-relaxed"},Ke={class:"font-medium text-foreground"},Qe={class:"font-medium text-foreground"},Ze={class:"animate-in fade-in slide-in-from-bottom-6 duration-700 delay-100"},et={class:"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-4"},tt={class:"p-6 relative"},ot={class:"mb-4 flex h-10 w-10 items-center justify-center rounded-xl bg-blue-500/10 text-blue-500 group-hover:scale-110 group-hover:bg-blue-500/20 transition-all duration-300"},rt={class:"space-y-1"},st={class:"font-bold text-lg leading-tight text-foreground"},at={class:"p-6 relative"},it={class:"mb-4 flex h-10 w-10 items-center justify-center rounded-xl bg-purple-500/10 text-purple-500 group-hover:scale-110 group-hover:bg-purple-500/20 transition-all duration-300"},lt={class:"space-y-1"},nt={class:"font-bold text-lg leading-tight text-foreground capitalize"},dt={class:"p-6 relative"},ct={class:"mb-4 flex h-10 w-10 items-center justify-center rounded-xl bg-orange-500/10 text-orange-500 group-hover:scale-110 group-hover:bg-orange-500/20 transition-all duration-300"},ut={class:"space-y-1"},pt=["title"],mt={class:"p-6 relative"},gt={class:"mb-4 flex h-10 w-10 items-center justify-center rounded-xl bg-green-500/10 text-green-500 group-hover:scale-110 group-hover:bg-green-500/20 transition-all duration-300"},ft={class:"space-y-1"},vt={class:"font-bold text-lg leading-tight text-foreground"},bt={class:"animate-in fade-in slide-in-from-bottom-8 duration-700 delay-200"},ht={class:"flex justify-center"},xt={class:"grid grid-cols-1 lg:grid-cols-3 gap-8"},yt={class:"p-1.5 rounded-md bg-primary/10 text-primary"},wt={class:"space-y-3"},_t={class:"space-y-3"},St={class:"p-1.5 rounded-md bg-primary/10 text-primary"},Tt={class:"space-y-3 flex-1 flex flex-col"},It={class:"flex-1 border rounded-md overflow-hidden bg-background"},Ct={class:"pt-4 mt-auto"},kt={key:1,class:"flex items-center"},Ot={class:"flex flex-col md:flex-row md:items-center justify-between gap-4"},jt={class:"space-y-1"},Pt={class:"p-1.5 rounded-md bg-primary/10 text-primary"},Et={class:"flex items-center gap-3"},Nt={class:"flex items-center gap-2 bg-background/50 p-1 rounded-lg border border-border/50"},Mt={key:0,class:"mt-6 flex flex-wrap items-center gap-4 animate-in fade-in slide-in-from-top-2"},Rt={class:"flex items-center gap-2 bg-background/50 p-1 rounded-lg border border-border/50"},Bt={class:"flex items-center gap-2 bg-background/50 p-1 rounded-lg border border-border/50"},Ut={class:"ml-auto"},At={key:0,class:"flex flex-col items-center justify-center h-[400px] p-8 text-center space-y-8 animate-in fade-in duration-500"},Ft={class:"relative"},Dt={class:"relative flex items-center justify-center h-20 w-20 rounded-full bg-background border-2 border-primary/20 shadow-xl"},Lt={class:"space-y-4 max-w-md w-full"},$t={class:"space-y-2"},Gt={class:"flex justify-between text-xs font-medium text-muted-foreground px-1"},Vt={class:"h-2 w-full bg-muted/50 rounded-full overflow-hidden"},qt={class:"grid grid-cols-4 gap-2 pt-4"},zt={key:1,class:"flex flex-col items-center justify-center h-[400px] p-8 text-center space-y-6 animate-in fade-in zoom-in-95 duration-500"},Ht={class:"h-24 w-24 rounded-3xl bg-muted/30 flex items-center justify-center mb-2"},Wt={key:2,class:"p-6 flex flex-col gap-8"},Xt={key:0,class:"absolute top-0 right-0 p-0 z-10"},Yt={class:"bg-primary text-primary-foreground rounded-bl-xl px-3 py-1.5 shadow-sm flex items-center gap-1.5"},Jt={class:"p-6 flex flex-col gap-4 flex-1"},Kt={class:"flex flex-wrap gap-2"},Qt={class:"flex flex-wrap gap-1.5 pt-2"},Zt={class:"mt-auto pt-4 space-y-4"},eo={class:"flex items-center gap-3 bg-muted/20 p-3 rounded-lg border border-border/30"},to={class:"relative h-10 w-10 flex items-center justify-center shrink-0"},oo={class:"h-full w-full -rotate-90",viewBox:"0 0 36 36"},ro=["stroke-dasharray"],so={class:"absolute text-[10px] font-bold"},ao={class:"flex flex-col"},io={class:"lg:col-span-2 group relative flex flex-col rounded-xl border border-border/50 bg-card/50 transition-all duration-300 hover:shadow-lg hover:border-primary/20"},lo={class:"p-6 md:p-8 flex flex-col h-full"},no={class:"flex items-center gap-2 mb-4 pb-4 border-b border-border/30"},co={class:"p-1.5 rounded-md bg-primary/10 text-primary"},uo={class:"prose prose-sm dark:prose-invert max-w-none text-muted-foreground leading-relaxed flex-1"},$=300,po=Te({__name:"TopicSelection",props:{project:{},savedTopics:{}},setup(me){const d=me,T=x("existing"),w=x(!1),N=x(!1),v=x([]),k=x(""),ge=x(""),b=x(""),h=x(""),y=x(""),R=x("all"),B=x("all");x(new Set);const{balance:G,showPurchaseModal:U,requiredWordsForModal:V,actionDescriptionForModal:q,closePurchaseModal:fe}=Be(),A=x("balanced");Ie(()=>{console.log("üìã TOPIC SELECTION - Project data received:",{topic:d.project.topic,title:d.project.title,description:d.project.description,description_exists:!!d.project.description,description_length:d.project.description?.length||0}),d.project.topic&&(b.value=d.project.topic,h.value=d.project.description||"",y.value=d.project.title||"",T.value="existing",console.log("‚úÖ TOPIC SELECTION - Form fields populated:",{customTopic:b.value?.substring(0,50),customDescription:h.value?.substring(0,50),customTitle:y.value}));try{const s=new URLSearchParams(window.location.search),e=s.get("prefill_topic"),o=s.get("prefill_title"),i=s.get("prefill_description");e&&e.trim()&&(T.value="existing",b.value=e.trim(),o&&o.trim()&&(y.value=o.trim()),i&&i.trim()&&(h.value=i.trim()),f.success("Refined topic loaded",{description:"Review it in ‚ÄúEnter Topic‚Äù then continue."}),window.history.replaceState({},"",I("projects.topic-selection",d.project.slug)))}catch{}d.savedTopics&&d.savedTopics.length>0&&(v.value=d.savedTopics,console.log("üì¶ SAVED TOPICS - Loaded from database",{count:d.savedTopics.length,topics:d.savedTopics.map(s=>s.title)}),d.project.topic||(T.value="generated"))});const u=x(""),_=x(""),M={connecting:{order:1,label:"Connecting to AI service"},analyzing:{order:2,label:"Analyzing your project context"},generating:{order:3,label:"Generating research topics"},enriching:{order:4,label:"Enriching with metadata"},complete:{order:5,label:"Complete"}},ve=s=>{const e=M[_.value]?.order||0,o=M[s]?.order||0;return o<e?"h-3 w-3 rounded-full bg-green-500":o===e?"h-3 w-3 rounded-full bg-primary animate-pulse":"h-3 w-3 rounded-full bg-muted"},te=()=>{const s=M[_.value]?.order||0,e=Object.keys(M).length;return Math.min(s/e*100,100)},oe=async()=>{if(console.log("üöÄ TOPIC GENERATION - Starting streaming topic generation"),G.value<$){V.value=$,q.value="generate research topics",U.value=!0,console.warn("‚ùå TOPIC GENERATION - Insufficient word balance",{current_balance:G.value,required:$});return}w.value=!0,v.value=[];let s=!1;try{_.value="connecting",u.value="Connecting to AI service...";const e=I("topics.stream",d.project.slug)+`?regenerate=true&geographic_focus=${encodeURIComponent(A.value)}`;console.log("üì° TOPIC GENERATION - Connecting to stream:",e);const o=new EventSource(e);o.onopen=()=>{console.log("üì° SSE - Connection opened"),_.value="connecting",u.value="Connected to AI service - analyzing your project..."},o.onmessage=i=>{try{const n=JSON.parse(i.data);switch(console.log("üì° SSE - Message received:",n.type,n),n.type){case"start":_.value="analyzing",u.value=n.message||"Starting topic generation...";break;case"progress":n.message&&n.message.includes("academic context")?_.value="analyzing":n.message&&n.message.includes("generating")?_.value="generating":n.message&&n.message.includes("enriching")&&(_.value="enriching"),u.value=n.message||"Processing...",n.context&&console.log("üéì Academic context:",n.context);break;case"content":if(_.value="generating",n.chunk){const m=n.word_count||0;u.value=`Generating topics... (${m} words generated)`}n.topics&&n.from_cache&&(_.value="enriching",u.value="Loading topics from cache for faster response...");break;case"complete":_.value="complete",n.topics&&Array.isArray(n.topics)?(v.value=n.topics,u.value=`‚úì Successfully generated ${n.topics.length} personalized research topics!`,T.value="generated",f("Success",{description:`${n.topics.length} research topics generated successfully!`})):u.value=n.message||"Topics generated successfully!";break;case"error":{const m=n.message||"Stream error occurred";u.value=m,f("Error",{description:m}),s=!0,o.close(),w.value=!1;break}case"end":console.log("üì° SSE - Stream ended"),s=!0,o.close(),w.value=!1;break}}catch(n){console.error("üì° SSE - Failed to parse message:",n,i.data)}},o.onerror=i=>{if(s){console.log("üì° SSE - Ignoring connection error after stream closed");return}console.error("üì° SSE - Connection error:",i),o.close(),s=!0,v.value.length>0?(u.value=`‚úì Generated ${v.value.length} topics (connection ended early)`,T.value="generated",f("Partial Success",{description:`${v.value.length} topics generated before connection ended.`})):(console.log("üì° TOPIC GENERATION - Falling back to regular endpoint"),be().catch(n=>{console.error("Fallback also failed:",n),u.value="Failed to generate topics. Please try again.",f("Error",{description:"Failed to generate topics. Please try again."})})),w.value=!1},setTimeout(()=>{!w.value||s||(console.log("‚è∞ TOPIC GENERATION - Timeout reached, closing stream"),o.close(),v.value.length>0?(u.value=`‚úì Generated ${v.value.length} topics (timeout reached)`,T.value="generated"):(u.value="Generation timed out. Please try again.",f("Timeout",{description:"Topic generation took longer than expected. Please try again."})),w.value=!1)},3e5)}catch(e){console.error("üí• TOPIC GENERATION - Error:",e),u.value="Failed to generate topics. Please try again.",f("Error",{description:e.message||"Failed to generate topics. Please try again."}),w.value=!1}},be=async()=>{console.log("üîÑ TOPIC GENERATION - Using fallback method"),u.value="Retrying with fallback method...";try{const s=document.querySelector('meta[name="csrf-token"]')?.getAttribute("content");if(!s)throw new Error("CSRF token not found. Please refresh the page and try again.");const e=new AbortController,o=setTimeout(()=>e.abort(),3e5),i=await fetch(I("topics.generate",d.project.slug),{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":s,Accept:"application/json","X-Requested-With":"XMLHttpRequest"},body:JSON.stringify({regenerate:!0,geographic_focus:A.value}),signal:e.signal});if(clearTimeout(o),i.status===402){const m=await i.json().catch(()=>null);V.value=m?.required??$,q.value="generate research topics",U.value=!0,u.value=m?.message||"Insufficient word balance to generate topics.",f("Error",{description:u.value}),w.value=!1;return}if(!i.ok){let m=`HTTP error! status: ${i.status}`;try{m=(await i.clone().json()).message||m}catch{try{const z=await i.text();i.status===419?m="Session expired. Please refresh the page and try again.":i.status===504?m="Request timed out. Please try again in a few moments.":z.includes("<!DOCTYPE")&&(m="Server returned an error page instead of data. Please try again.")}catch{i.status===504&&(m="Request timed out. Please try again in a few moments.")}}throw new Error(m)}const n=await i.json();if(n.topics&&Array.isArray(n.topics))v.value=n.topics,u.value=`‚úì Successfully generated ${n.topics.length} research topics!`,T.value="generated",f("Success",{description:`${n.topics.length} research topics generated successfully!`});else throw new Error("Invalid response format: topics array not found")}catch(s){console.error("üí• FALLBACK GENERATION - Error:",s),u.value="Failed to generate topics. Please try again.",f("Error",{description:s.message||"Failed to generate topics. Please try again."})}},he=s=>{k.value=s.title,ge.value=s.description;const e=document.createElement("div");e.innerHTML=s.title;const o=e.textContent||e.innerText||s.title;b.value=o,h.value=s.description,y.value=re(o),T.value="existing"},re=s=>{const e=document.createElement("div");e.innerHTML=s;const o=(e.textContent||e.innerText||s).trim(),i=255;return o.length>i?o.slice(0,i):o},se=Ce(()=>{let s=v.value;return R.value!=="all"&&(s=s.filter(e=>e.difficulty.toLowerCase().includes(R.value.toLowerCase()))),B.value!=="all"&&(s=s.filter(e=>e.timeline===B.value)),s.sort((e,o)=>o.feasibility_score-e.feasibility_score)}),xe=s=>{switch(s.toLowerCase()){case"beginner friendly":return"secondary";case"intermediate":return"default";case"advanced":return"destructive";default:return"secondary"}},ae=s=>{const e=document.createElement("div");e.innerHTML=s.title;const o=(e.textContent||e.innerText||s.title).trim();if(!o){f("Error",{description:"Topic title is missing."});return}F.visit(I("topics.lab",{project:d.project.slug,new:"true",return_to_selection:1,topic_title:o,topic_description:s.description||""}))},ye=()=>{const s=(b.value||y.value||"").trim(),e=(h.value||"").trim();if(!s&&!e){f("Error",{description:"Please select or enter a topic first."});return}ae({title:s||y.value||"Research Topic",description:e})},we=async()=>{if(console.log("üöÄ TOPIC SUBMISSION - Starting",{customTopic:b.value?.substring(0,50)+"...",customDescription:h.value?.substring(0,50)+"...",customTitle:y.value,project_slug:d.project.slug,current_url:window.location.href,timestamp:new Date().toISOString()}),console.log("üîç TOPIC SUBMISSION - Full form data:",{customTopic:b.value,customDescription:h.value,customTitle:y.value,customTopic_length:b.value?.length||0,customDescription_length:h.value?.length||0,customTitle_length:y.value?.length||0}),!b.value.trim()&&!h.value.trim()){console.log("‚ùå TOPIC SUBMISSION - Validation failed: No topic or description"),f("Error",{description:"Please enter a project topic and description."});return}N.value=!0;try{const s={topic:b.value.trim()||y.value.trim()||"Research Topic",title:y.value.trim()||re(b.value||h.value),description:h.value.trim()};console.log("üì§ TOPIC SUBMISSION - Request data:",s),console.log("üìç TOPIC SUBMISSION - Request URL:",I("topics.select",d.project.slug));const e=document.querySelector('meta[name="csrf-token"]')?.getAttribute("content");if(console.log("üîê TOPIC SUBMISSION - CSRF token found:",!!e),console.log("üîê TOPIC SUBMISSION - CSRF token preview:",e?.substring(0,10)+"..."),!e)throw new Error("CSRF token not found. Please refresh the page and try again.");console.log("üì° TOPIC SUBMISSION - Making fetch request...");const o=await fetch(I("topics.select",d.project.slug),{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":e,Accept:"application/json","X-Requested-With":"XMLHttpRequest"},body:JSON.stringify(s)});if(console.log("üì• TOPIC SUBMISSION - Response received"),console.log("üì• TOPIC SUBMISSION - Response status:",o.status),console.log("üì• TOPIC SUBMISSION - Response statusText:",o.statusText),console.log("üì• TOPIC SUBMISSION - Response ok:",o.ok),console.log("üì• TOPIC SUBMISSION - Response headers:",Object.fromEntries(o.headers.entries())),o.ok){console.log("‚úÖ TOPIC SUBMISSION - Success! Processing response...");const i=await o.json();console.log("‚úÖ TOPIC SUBMISSION - Response data:",i),f("Topic Selected!",{description:"Your project topic has been set. You can now submit it for supervisor approval."}),console.log("üîÑ TOPIC SUBMISSION - Letting middleware handle redirect"),console.log("üîÑ TOPIC SUBMISSION - Current project slug:",d.project.slug),console.log("üîÑ TOPIC SUBMISSION - Target route:",I("projects.show",d.project.slug)),F.visit(I("projects.show",d.project.slug),{method:"get",replace:!0})}else{console.error("‚ùå TOPIC SUBMISSION - Request failed"),console.error("‚ùå TOPIC SUBMISSION - Status:",o.status),console.error("‚ùå TOPIC SUBMISSION - StatusText:",o.statusText);let i=`HTTP error! status: ${o.status}`;try{const n=await o.json();console.error("‚ùå TOPIC SUBMISSION - Error JSON:",n),i=n.message||i}catch{const m=await o.text();console.error("‚ùå TOPIC SUBMISSION - Error HTML (first 500 chars):",m.substring(0,500)),o.status===419?i="Session expired. Please refresh the page and try again.":m.includes("<!DOCTYPE")&&(i="Server returned an error page instead of data. Please try again.")}throw new Error(i)}}catch(s){console.error("üí• TOPIC SUBMISSION - Exception:",s),f("Error",{description:"Failed to select topic. Please try again."})}finally{N.value=!1,console.log("üèÅ TOPIC SUBMISSION - Finished (isSelecting set to false)")}},_e=async()=>{try{F.post(I("projects.go-back-to-wizard",d.project.slug),{},{onSuccess:()=>{f("Success",{description:"Returned to project setup"}),F.visit(I("projects.create"))},onError:()=>{f("Error",{description:"Failed to go back to setup. Please try again."})}})}catch{f("Error",{description:"Failed to go back to setup. Please try again."})}};return(s,e)=>(p(),O(Ne,{title:"Select Project Topic"},{default:l(()=>[t("div",Ve,[t("div",qe,[t("div",ze,[a(r(j),{onClick:_e,variant:"ghost",size:"sm",class:"group text-muted-foreground hover:text-foreground transition-colors"},{default:l(()=>[t("div",He,[a(r(Ue),{class:"h-4 w-4 transition-transform group-hover:-translate-x-0.5"})]),e[8]||(e[8]=c(" Back to Project Setup ",-1))]),_:1})]),t("div",We,[t("div",Xe,[a(r(E),{class:"h-10 w-10 text-primary"})]),t("div",Ye,[e[11]||(e[11]=t("h1",{class:"text-4xl font-bold tracking-tight sm:text-5xl bg-gradient-to-br from-foreground to-foreground/70 bg-clip-text text-transparent"}," Choose Your Project Topic ",-1)),t("p",Je,[e[9]||(e[9]=c(" Select or generate a research topic for your ",-1)),t("span",Ke,g(s.project.type),1),t("span",Qe,g(s.project.field_of_study),1),e[10]||(e[10]=c(" project. ",-1))])])]),t("div",Ze,[t("div",et,[a(r(P),{class:"group relative overflow-hidden border-border/50 bg-card/50 backdrop-blur-sm transition-all duration-300 hover:shadow-lg hover:shadow-primary/5 hover:border-primary/20 hover:-translate-y-1"},{default:l(()=>[e[13]||(e[13]=t("div",{class:"absolute -right-6 -top-6 h-24 w-24 rounded-full bg-blue-500/10 group-hover:bg-blue-500/20 transition-colors blur-2xl"},null,-1)),t("div",tt,[t("div",ot,[a(r(Ae),{class:"h-5 w-5"})]),t("div",rt,[e[12]||(e[12]=t("span",{class:"text-xs font-medium uppercase tracking-wider text-muted-foreground"},"Field of Study",-1)),t("div",st,g(s.project.field_of_study),1)])])]),_:1}),a(r(P),{class:"group relative overflow-hidden border-border/50 bg-card/50 backdrop-blur-sm transition-all duration-300 hover:shadow-lg hover:shadow-primary/5 hover:border-primary/20 hover:-translate-y-1"},{default:l(()=>[e[15]||(e[15]=t("div",{class:"absolute -right-6 -top-6 h-24 w-24 rounded-full bg-purple-500/10 group-hover:bg-purple-500/20 transition-colors blur-2xl"},null,-1)),t("div",at,[t("div",it,[a(r(Fe),{class:"h-5 w-5"})]),t("div",lt,[e[14]||(e[14]=t("span",{class:"text-xs font-medium uppercase tracking-wider text-muted-foreground"},"Academic Level",-1)),t("div",nt,g(s.project.type),1)])])]),_:1}),a(r(P),{class:"group relative overflow-hidden border-border/50 bg-card/50 backdrop-blur-sm transition-all duration-300 hover:shadow-lg hover:shadow-primary/5 hover:border-primary/20 hover:-translate-y-1"},{default:l(()=>[e[17]||(e[17]=t("div",{class:"absolute -right-6 -top-6 h-24 w-24 rounded-full bg-orange-500/10 group-hover:bg-orange-500/20 transition-colors blur-2xl"},null,-1)),t("div",dt,[t("div",ct,[a(r(De),{class:"h-5 w-5"})]),t("div",ut,[e[16]||(e[16]=t("span",{class:"text-xs font-medium uppercase tracking-wider text-muted-foreground"},"University",-1)),t("div",{class:"font-bold text-lg leading-tight text-foreground",title:s.project.full_university_name||s.project.university},g(s.project.full_university_name||s.project.university),9,pt)])])]),_:1}),a(r(P),{class:"group relative overflow-hidden border-border/50 bg-card/50 backdrop-blur-sm transition-all duration-300 hover:shadow-lg hover:shadow-primary/5 hover:border-primary/20 hover:-translate-y-1"},{default:l(()=>[e[19]||(e[19]=t("div",{class:"absolute -right-6 -top-6 h-24 w-24 rounded-full bg-green-500/10 group-hover:bg-green-500/20 transition-colors blur-2xl"},null,-1)),t("div",mt,[t("div",gt,[a(r(Le),{class:"h-5 w-5"})]),t("div",ft,[e[18]||(e[18]=t("span",{class:"text-xs font-medium uppercase tracking-wider text-muted-foreground"},"Course",-1)),t("div",vt,g(s.project.course),1)])])]),_:1})])]),t("div",bt,[a(r(je),{modelValue:T.value,"onUpdate:modelValue":e[6]||(e[6]=o=>T.value=o),class:"space-y-8"},{default:l(()=>[t("div",ht,[a(r(Pe),{class:"grid w-full max-w-md grid-cols-2 p-1 bg-muted/50 backdrop-blur-sm"},{default:l(()=>[a(r(ne),{value:"existing",class:"data-[state=active]:bg-background data-[state=active]:shadow-sm transition-all duration-300"},{default:l(()=>[...e[20]||(e[20]=[c(" Enter Topic ",-1)])]),_:1}),a(r(ne),{value:"generated",class:"data-[state=active]:bg-background data-[state=active]:shadow-sm transition-all duration-300"},{default:l(()=>[...e[21]||(e[21]=[c(" AI Generated Topics ",-1)])]),_:1})]),_:1})]),a(r(de),{value:"existing",class:"focus-visible:outline-none"},{default:l(()=>[t("div",xt,[a(r(P),{class:"lg:col-span-1 border-border/50 shadow-lg shadow-primary/5 overflow-hidden group flex flex-col"},{default:l(()=>[e[26]||(e[26]=t("div",{class:"absolute -right-20 -top-20 h-64 w-64 rounded-full bg-primary/5 transition-colors blur-3xl pointer-events-none"},null,-1)),a(r(K),{class:"pb-2 border-b border-border/40 bg-muted/10"},{default:l(()=>[a(r(Q),{class:"flex items-center gap-2 text-lg"},{default:l(()=>[t("div",yt,[a(r(E),{class:"h-4 w-4"})]),e[22]||(e[22]=c(" Project Details ",-1))]),_:1})]),_:1}),a(r(J),{class:"space-y-6 pt-6 flex-1"},{default:l(()=>[t("div",wt,[a(r(Z),{for:"custom-title",class:"text-sm font-medium text-foreground/80"},{default:l(()=>[...e[23]||(e[23]=[c("Project Title",-1)])]),_:1}),a(r(Oe),{id:"custom-title",modelValue:y.value,"onUpdate:modelValue":e[0]||(e[0]=o=>y.value=o),placeholder:"A concise title...",maxlength:255,class:"h-12 bg-muted/30 border-border/50 focus:bg-background transition-all"},null,8,["modelValue"])]),t("div",_t,[a(r(Z),{for:"custom-topic",class:"text-sm font-medium text-foreground/80"},{default:l(()=>[...e[24]||(e[24]=[c("Research Topic",-1)])]),_:1}),a(r(Ee),{id:"custom-topic",modelValue:b.value,"onUpdate:modelValue":e[1]||(e[1]=o=>b.value=o),placeholder:"Enter your main research topic or question...",rows:"4",class:"resize-none bg-muted/30 border-border/50 focus:bg-background transition-all"},null,8,["modelValue"]),e[25]||(e[25]=t("p",{class:"text-xs text-muted-foreground"},"The main topic you want to investigate.",-1))])]),_:1})]),_:1}),a(r(P),{class:"lg:col-span-2 border-border/50 shadow-lg shadow-primary/5 overflow-hidden group flex flex-col"},{default:l(()=>[e[32]||(e[32]=t("div",{class:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-transparent via-primary/50 to-transparent opacity-20"},null,-1)),a(r(K),{class:"pb-2 border-b border-border/40 bg-muted/10"},{default:l(()=>[a(r(Q),{class:"flex items-center gap-2 text-lg"},{default:l(()=>[t("div",St,[a(r(L),{class:"h-4 w-4"})]),e[27]||(e[27]=c(" Detailed Description ",-1))]),_:1}),a(r(le),null,{default:l(()=>[...e[28]||(e[28]=[c(" Provide a comprehensive description of your research. ",-1)])]),_:1})]),_:1}),a(r(J),{class:"space-y-6 pt-6 flex-1 flex flex-col"},{default:l(()=>[t("div",Tt,[a(r(Z),{for:"custom-description",class:"sr-only"},{default:l(()=>[...e[29]||(e[29]=[c("Project Description",-1)])]),_:1}),t("div",It,[a(Me,{modelValue:h.value,"onUpdate:modelValue":e[2]||(e[2]=o=>h.value=o),placeholder:"Describe your research focus, objectives, problem statement, and scope in detail...","min-height":"300px","show-toolbar":!0},null,8,["modelValue"])])]),t("div",Ct,[a(r(j),{onClick:we,disabled:!b.value.trim()&&!h.value.trim()||N.value,class:"w-full h-12 text-base font-medium shadow-lg shadow-primary/20 hover:shadow-primary/30 transition-all"},{default:l(()=>[N.value?(p(),O(r(ee),{key:0,class:"mr-2 h-5 w-5 animate-spin"})):(p(),S("span",kt,[e[30]||(e[30]=c(" Continue with This Topic ",-1)),a(r(ue),{class:"ml-2 h-5 w-5"})]))]),_:1},8,["disabled"]),a(r(j),{onClick:ye,disabled:!b.value.trim()&&!h.value.trim()||N.value,variant:"outline",class:"w-full h-12 text-base font-medium mt-3"},{default:l(()=>[a(r(L),{class:"mr-2 h-5 w-5"}),e[31]||(e[31]=c(" Refine in Topic Lab ",-1))]),_:1},8,["disabled"])])]),_:1})]),_:1})])]),_:1}),a(r(de),{value:"generated",class:"focus-visible:outline-none"},{default:l(()=>[a(r(P),{class:"border-border/40 shadow-lg shadow-primary/5 overflow-hidden min-h-[500px] flex flex-col"},{default:l(()=>[a(r(K),{class:"border-b border-border/40 bg-muted/10 pb-6"},{default:l(()=>[t("div",Ot,[t("div",jt,[a(r(Q),{class:"flex items-center gap-2 text-xl"},{default:l(()=>[t("div",Pt,[a(r(E),{class:"h-5 w-5"})]),e[33]||(e[33]=c(" AI Generated Suggestions ",-1))]),_:1}),a(r(le),null,{default:l(()=>[...e[34]||(e[34]=[c(" Tailored research topics based on your academic profile. ",-1)])]),_:1})]),t("div",Et,[t("div",Nt,[e[36]||(e[36]=t("span",{class:"text-xs font-medium px-2 text-muted-foreground"},"Focus",-1)),H(t("select",{"onUpdate:modelValue":e[3]||(e[3]=o=>A.value=o),class:"h-8 rounded-md border-0 bg-transparent text-xs font-medium focus:ring-0 cursor-pointer hover:bg-muted/50 transition-colors"},[...e[35]||(e[35]=[t("option",{value:"balanced"},"Balanced",-1),t("option",{value:"nigeria_west_africa"},"Nigeria / West Africa",-1),t("option",{value:"global"},"Global",-1)])],512),[[W,A.value]])]),a(r(j),{onClick:oe,disabled:w.value,variant:v.value.length>0?"outline":"default",class:C(["h-10 transition-all",v.value.length===0?"shadow-lg shadow-primary/20 hover:shadow-primary/30":""])},{default:l(()=>[w.value?(p(),O(r(ee),{key:0,class:"mr-2 h-4 w-4 animate-spin"})):v.value.length>0?(p(),O(r($e),{key:1,class:"mr-2 h-4 w-4"})):(p(),O(r(E),{key:2,class:"mr-2 h-4 w-4"})),c(" "+g(w.value?"Generating...":v.value.length>0?"Regenerate":"Generate Topics"),1)]),_:1},8,["disabled","variant","class"])])]),v.value.length>0?(p(),S("div",Mt,[t("div",Rt,[e[38]||(e[38]=t("span",{class:"text-xs font-medium px-2 text-muted-foreground"},"Difficulty",-1)),H(t("select",{"onUpdate:modelValue":e[4]||(e[4]=o=>R.value=o),class:"h-8 rounded-md border-0 bg-transparent text-xs font-medium focus:ring-0 cursor-pointer hover:bg-muted/50 transition-colors"},[...e[37]||(e[37]=[t("option",{value:"all"},"All Levels",-1),t("option",{value:"beginner"},"Beginner Friendly",-1),t("option",{value:"intermediate"},"Intermediate",-1),t("option",{value:"advanced"},"Advanced",-1)])],512),[[W,R.value]])]),t("div",Bt,[e[40]||(e[40]=t("span",{class:"text-xs font-medium px-2 text-muted-foreground"},"Timeline",-1)),H(t("select",{"onUpdate:modelValue":e[5]||(e[5]=o=>B.value=o),class:"h-8 rounded-md border-0 bg-transparent text-xs font-medium focus:ring-0 cursor-pointer hover:bg-muted/50 transition-colors"},[...e[39]||(e[39]=[t("option",{value:"all"},"Any Duration",-1),t("option",{value:"6-9 months"},"6-9 months",-1),t("option",{value:"9-12 months"},"9-12 months",-1),t("option",{value:"12+ months"},"12+ months",-1)])],512),[[W,B.value]])]),t("div",Ut,[a(r(D),{variant:"secondary",class:"h-8 px-3 text-xs font-medium"},{default:l(()=>[c(g(se.value.length)+" results ",1)]),_:1})])])):ie("",!0)]),_:1}),a(r(J),{class:"p-0 flex-1 bg-muted/5"},{default:l(()=>[w.value?(p(),S("div",At,[t("div",Ft,[e[41]||(e[41]=t("div",{class:"absolute inset-0 rounded-full bg-primary/20 animate-ping opacity-75"},null,-1)),t("div",Dt,[a(r(ee),{class:"h-10 w-10 text-primary animate-spin"})])]),t("div",Lt,[e[43]||(e[43]=t("h3",{class:"text-xl font-semibold bg-gradient-to-br from-foreground to-muted-foreground bg-clip-text text-transparent"}," Crafting Your Topics ",-1)),t("div",$t,[t("div",Gt,[t("span",null,g(u.value||"Initializing..."),1),t("span",null,g(Math.round(te()))+"%",1)]),t("div",Vt,[t("div",{class:"h-full bg-primary transition-all duration-500 ease-out relative overflow-hidden",style:ke(`width: ${te()}%`)},[...e[42]||(e[42]=[t("div",{class:"absolute inset-0 bg-white/20 animate-[shimmer_2s_infinite]"},null,-1)])],4)])]),t("div",qt,[(p(),S(X,null,Y(M,(o,i)=>t("div",{key:i,class:C(["flex flex-col items-center gap-2",i==="complete"?"hidden":""])},[t("div",{class:C(["h-2 w-2 rounded-full transition-colors duration-300",ve(i)])},null,2),t("span",{class:C(["text-[10px] uppercase tracking-wider font-medium text-muted-foreground",_.value===i?"text-primary":""])},g(i),3)],2)),64))])])])):v.value.length===0?(p(),S("div",zt,[t("div",Ht,[a(r(E),{class:"h-12 w-12 text-muted-foreground/50"})]),e[45]||(e[45]=t("div",{class:"max-w-sm space-y-2"},[t("h3",{class:"text-lg font-semibold"},"No Topics Generated Yet"),t("p",{class:"text-muted-foreground text-sm"},' Click the "Generate Topics" button to let our AI analyze your profile and suggest personalized research topics. ')],-1)),a(r(j),{onClick:oe,size:"lg",class:"shadow-lg shadow-primary/20 hover:shadow-primary/30 transition-all"},{default:l(()=>[a(r(E),{class:"mr-2 h-5 w-5"}),e[44]||(e[44]=c(" Generate Topics ",-1))]),_:1})])):(p(),S("div",Wt,[(p(!0),S(X,null,Y(se.value,o=>(p(),S("div",{key:o.id,class:"grid grid-cols-1 lg:grid-cols-3 gap-6 animate-in fade-in slide-in-from-bottom-2 duration-500"},[t("div",{class:C(["lg:col-span-1 group relative flex flex-col rounded-xl border border-border/50 bg-card transition-all duration-300 hover:shadow-xl hover:shadow-primary/5 hover:border-primary/30 hover:-translate-y-1 overflow-hidden",k.value===o.title?"ring-2 ring-primary border-primary bg-primary/5":""])},[k.value===o.title?(p(),S("div",Xt,[t("div",Yt,[a(r(pe),{class:"h-3.5 w-3.5"}),e[46]||(e[46]=t("span",{class:"text-[10px] font-bold uppercase tracking-wider"},"Selected",-1))])])):ie("",!0),t("div",Jt,[a(ce,{content:o.title,as:"h3",class:"text-lg font-bold leading-tight text-foreground group-hover:text-primary transition-colors"},null,8,["content"]),t("div",Kt,[a(r(D),{variant:xe(o.difficulty),class:"text-[10px] uppercase tracking-wider font-semibold py-0.5"},{default:l(()=>[c(g(o.difficulty),1)]),_:2},1032,["variant"]),a(r(D),{variant:"outline",class:"text-[10px] uppercase tracking-wider font-medium border-border text-muted-foreground"},{default:l(()=>[c(g(o.timeline),1)]),_:2},1024),a(r(D),{variant:"secondary",class:"text-[10px] uppercase tracking-wider font-medium bg-muted/50"},{default:l(()=>[c(g(o.research_type),1)]),_:2},1024)]),t("div",Qt,[(p(!0),S(X,null,Y(o.keywords,i=>(p(),S("span",{key:i,class:"text-[10px] font-medium text-muted-foreground bg-muted/30 px-2 py-1 rounded-md border border-border/30"}," #"+g(i),1))),128))]),t("div",Zt,[t("div",eo,[t("div",to,[(p(),S("svg",oo,[e[47]||(e[47]=t("path",{class:"text-muted/30",d:"M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831",fill:"none",stroke:"currentColor","stroke-width":"3"},null,-1)),t("path",{class:C(o.feasibility_score>=80?"text-green-500":o.feasibility_score>=60?"text-yellow-500":"text-red-500"),"stroke-dasharray":`${o.feasibility_score}, 100`,d:"M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831",fill:"none",stroke:"currentColor","stroke-width":"3","stroke-linecap":"round"},null,10,ro)])),t("span",so,g(o.feasibility_score)+"%",1)]),t("div",ao,[e[48]||(e[48]=t("span",{class:"text-[10px] uppercase tracking-wider font-semibold text-muted-foreground"},"Feasibility",-1)),t("span",{class:C(["text-xs font-medium",o.feasibility_score>=80?"text-green-600":o.feasibility_score>=60?"text-yellow-600":"text-red-600"])},g(o.feasibility_score>=80?"High":o.feasibility_score>=60?"Medium":"Low"),3)])]),a(r(j),{onClick:i=>he(o),variant:k.value===o.title?"secondary":"default",class:C(["w-full shadow-sm transition-all duration-300",k.value===o.title?"bg-green-100 text-green-700 hover:bg-green-200 border-green-200":"hover:shadow-md hover:scale-[1.02]"])},{default:l(()=>[c(g(k.value===o.title?"Selected":"Select This Topic")+" ",1),k.value===o.title?(p(),O(r(pe),{key:0,class:"ml-2 h-3.5 w-3.5"})):(p(),O(r(ue),{key:1,class:"ml-2 h-3.5 w-3.5"}))]),_:2},1032,["onClick","variant","class"]),a(r(j),{onClick:i=>ae(o),variant:"outline",class:"w-full mt-2"},{default:l(()=>[a(r(L),{class:"mr-2 h-4 w-4"}),e[49]||(e[49]=c(" Refine in Topic Lab ",-1))]),_:2},1032,["onClick"])])])],2),t("div",io,[t("div",lo,[t("div",no,[t("div",co,[a(r(L),{class:"h-4 w-4"})]),e[50]||(e[50]=t("span",{class:"text-sm font-semibold uppercase tracking-wider text-muted-foreground"},"Description",-1))]),t("div",uo,[a(ce,{content:o.description,as:"div"},null,8,["content"])])])])]))),128))]))]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])])])]),a(Re,{open:r(U),"current-balance":r(G),"required-words":r(V),action:r(q)||"generate research topics","onUpdate:open":e[7]||(e[7]=o=>U.value=o),onClose:r(fe)},null,8,["open","current-balance","required-words","action","onClose"])]),_:1}))}}),Cr=Ge(po,[["__scopeId","data-v-dde8f20b"]]);export{Cr as default};
