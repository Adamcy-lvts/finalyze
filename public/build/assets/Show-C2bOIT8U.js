import{bt as ue,ch as pe,ck as k,bs as $,dG as A,cn as g,co as u,cp as l,cG as _,cr as n,cq as r,bE as e,cL as ce,cs as a,ct as p,dr as _e,cl as x,dN as L,cB as c,cS as U,df as q,cw as z,e5 as B,dw as O}from"./vendor-DwcF3VNb.js";import{_ as me}from"./AdminLayout.vue_vue_type_script_setup_true_lang-Cjul3uBB.js";import{_ as E}from"./index-BU6y8D-V.js";import{_ as v}from"./index-BpTO5Kag.js";import{_ as F,a as fe}from"./CardContent.vue_vue_type_script_setup_true_lang-ByVWGonT.js";import{_ as G}from"./CardDescription.vue_vue_type_script_setup_true_lang-DCwZv7vk.js";import{_ as I,a as P}from"./CardTitle.vue_vue_type_script_setup_true_lang-CANz9L_6.js";import{_ as W,a as J}from"./DialogContent.vue_vue_type_script_setup_true_lang-DTGeh0zi.js";import{_ as M,a as R}from"./DialogTitle.vue_vue_type_script_setup_true_lang-CCtpPhJI.js";import{_ as y}from"./Input.vue_vue_type_script_setup_true_lang-CQe6L5n4.js";import{_ as m}from"./Label.vue_vue_type_script_setup_true_lang-BCx0cnBe.js";import{_ as T}from"./Textarea.vue_vue_type_script_setup_true_lang-CLVewTca.js";import{_ as H}from"./Switch.vue_vue_type_script_setup_true_lang-1_DMAlPr.js";import{_ as ve,a as ye}from"./index-cXKiD0GD.js";import{_ as ge}from"./AlertTitle.vue_vue_type_script_setup_true_lang-D6lURlAb.js";import{_ as xe,a as be,b as he,c as ke}from"./AccordionTrigger.vue_vue_type_script_setup_true_lang-IUuPmHxw.js";import"./Sonner.vue_vue_type_script_setup_true_lang-kLZ_SglN.js";import"./UserInfo.vue_vue_type_script_setup_true_lang-CpzsT-yS.js";import"./TooltipTrigger.vue_vue_type_script_setup_true_lang-C_drGNy-.js";const we={class:"mb-4 flex items-center justify-between gap-3"},Ve={class:"text-sm text-muted-foreground"},Ce={key:0,class:"text-sm text-muted-foreground"},$e={class:"flex items-center gap-3"},Se={class:"font-medium"},je={class:"text-xs text-muted-foreground"},Ue={class:"flex items-center justify-between gap-2"},qe={class:"text-xs text-muted-foreground"},Ee={class:"flex items-center gap-2"},Te={key:0,class:"text-sm text-muted-foreground whitespace-pre-wrap"},De={class:"flex items-center justify-between"},Ne={key:1,class:"text-sm text-muted-foreground"},Ae={key:2,class:"space-y-2"},Le={class:"space-y-1"},ze={class:"flex items-center gap-2"},Be={class:"font-medium"},Oe={class:"text-xs text-muted-foreground"},Fe={key:0,class:"text-xs text-muted-foreground whitespace-pre-wrap"},Ge={class:"flex items-center gap-2"},Ie={class:"grid gap-4 py-4"},Pe={class:"grid gap-4 md:grid-cols-2"},We={class:"space-y-1"},Je=["value"],Me={key:0,class:"text-xs text-rose-500"},Re={class:"space-y-1"},He=["value"],Ke={key:0,class:"text-xs text-rose-500"},Qe={class:"grid gap-4 md:grid-cols-3"},Xe={class:"space-y-1"},Ye={key:0,class:"text-xs text-rose-500"},Ze={class:"space-y-1 md:col-span-2"},et={key:0,class:"text-xs text-rose-500"},tt={class:"space-y-1"},st={key:0,class:"text-xs text-rose-500"},rt={class:"grid gap-4 md:grid-cols-3"},ot={class:"space-y-1"},lt={key:0,class:"text-xs text-rose-500"},it={class:"space-y-1"},nt={key:0,class:"text-xs text-rose-500"},dt={class:"space-y-1"},at={key:0,class:"text-xs text-rose-500"},ut={class:"flex items-center justify-between rounded-md border border-border/70 bg-muted/30 px-3 py-2 text-sm"},pt={class:"flex justify-end gap-2"},ct={class:"grid gap-4 py-4"},_t={class:"grid gap-4 md:grid-cols-3"},mt={class:"space-y-1"},ft={key:0,class:"text-xs text-rose-500"},vt={class:"space-y-1 md:col-span-2"},yt={key:0,class:"text-xs text-rose-500"},gt={class:"space-y-1"},xt={key:0,class:"text-xs text-rose-500"},bt={class:"space-y-1"},ht={key:0,class:"text-xs text-rose-500"},kt={class:"space-y-1"},wt={key:0,class:"text-xs text-rose-500"},Vt={class:"grid gap-4 md:grid-cols-2"},Ct={class:"space-y-1"},$t={key:0,class:"text-xs text-rose-500"},St={class:"space-y-1"},jt={key:0,class:"text-xs text-rose-500"},Ut={class:"flex items-center justify-between rounded-md border border-border/70 bg-muted/30 px-3 py-2 text-sm"},qt={class:"flex justify-end gap-2"},Qt=ue({__name:"Show",props:{structure:{},chapters:{},academicLevels:{},projectTypes:{}},setup(K){const S=K,Q=pe(),N=k(()=>Q.props.flash),w=k(()=>S.structure),j=k(()=>S.chapters??[]),X=k(()=>S.academicLevels??[]),Y=k(()=>S.projectTypes??[]),Z=k(()=>`${w.value.faculty_name} · Chapters`),b=$(!1),V=$(null),o=A({academic_level:"all",project_type:"thesis",chapter_number:1,chapter_title:"",description:"",target_word_count:3e3,completion_threshold:80,is_required:!0,sort_order:1}),ee=()=>{V.value=null,o.clearErrors(),o.academic_level="all",o.project_type="thesis",o.chapter_number=j.value?.length?Math.max(...j.value.map(d=>d.chapter_number))+1:1,o.chapter_title="",o.description="",o.target_word_count=3e3,o.completion_threshold=80,o.is_required=!0,o.sort_order=o.chapter_number,b.value=!0},te=d=>{V.value=d.id,o.clearErrors(),o.academic_level=d.academic_level,o.project_type=d.project_type,o.chapter_number=d.chapter_number,o.chapter_title=d.chapter_title,o.description=d.description??"",o.target_word_count=d.target_word_count,o.completion_threshold=d.completion_threshold,o.is_required=d.is_required,o.sort_order=d.sort_order,b.value=!0},se=()=>{o.clearErrors();const d={preserveScroll:!0,onSuccess:()=>{b.value=!1}};V.value?o.put(x("admin.system.faculty-structures.chapters.update",{chapter:V.value}),d):o.post(x("admin.system.faculty-structures.chapters.store",{structure:w.value.id}),d)},re=d=>{confirm(`Delete chapter ${d.chapter_number}: ${d.chapter_title}? This will delete its sections.`)&&o.delete(x("admin.system.faculty-structures.chapters.destroy",{chapter:d.id}),{preserveScroll:!0})},h=$(!1),C=$(null),D=$(null),i=A({section_number:"",section_title:"",description:"",writing_guidance:"",tips:"",target_word_count:500,is_required:!0,sort_order:0}),oe=d=>{if(d==null)return"";if(typeof d=="string")return d;try{return Array.isArray(d)?d.join(`
`):JSON.stringify(d,null,2)}catch{return""}},le=d=>{C.value=null,D.value=d.id,i.clearErrors(),i.section_number=`${d.chapter_number}.1`,i.section_title="",i.description="",i.writing_guidance="",i.tips="",i.target_word_count=500,i.is_required=!0,i.sort_order=(d.sections?.length??0)+1,h.value=!0},ie=(d,t)=>{C.value=t.id,D.value=d.id,i.clearErrors(),i.section_number=t.section_number,i.section_title=t.section_title,i.description=t.description??"",i.writing_guidance=t.writing_guidance??"",i.tips=oe(t.tips),i.target_word_count=t.target_word_count,i.is_required=t.is_required,i.sort_order=t.sort_order,h.value=!0},ne=()=>{i.clearErrors();const d={preserveScroll:!0,onSuccess:()=>{h.value=!1}};C.value?i.put(x("admin.system.faculty-structures.sections.update",{section:C.value}),d):i.post(x("admin.system.faculty-structures.sections.store",{chapter:D.value}),d)},de=(d,t)=>{confirm(`Delete section ${t.section_number}: ${t.section_title}?`)&&i.delete(x("admin.system.faculty-structures.sections.destroy",{section:t.id}),{preserveScroll:!0})};return(d,t)=>(u(),g(me,{title:Z.value,subtitle:"Edit chapters and sections that drive project chapter structure."},{default:l(()=>[N.value?.success?(u(),g(e(ve),{key:0,class:"mb-6 border border-emerald-500/40 bg-emerald-500/10"},{default:l(()=>[r(e(ce),{class:"h-4 w-4 text-emerald-500"}),r(e(ge),null,{default:l(()=>[...t[21]||(t[21]=[a("Updated",-1)])]),_:1}),r(e(ye),null,{default:l(()=>[a(p(N.value.success),1)]),_:1})]),_:1})):_("",!0),n("div",we,[n("div",Ve,[r(e(_e),{href:e(x)("admin.system.faculty-structures"),class:"text-primary hover:text-primary/80 font-medium transition-colors"},{default:l(()=>[...t[22]||(t[22]=[a(" ← Back to structures ",-1)])]),_:1},8,["href"])]),r(e(v),{size:"sm",onClick:ee},{default:l(()=>[r(e(L),{class:"mr-2 h-4 w-4"}),t[23]||(t[23]=a(" Add Chapter ",-1))]),_:1})]),r(e(F),{class:"border border-border/50 bg-card shadow-sm mb-6"},{default:l(()=>[r(e(I),null,{default:l(()=>[r(e(P),{class:"text-base font-semibold text-foreground"},{default:l(()=>[...t[24]||(t[24]=[a("Structure",-1)])]),_:1}),r(e(G),null,{default:l(()=>[a(p(w.value.faculty_name)+" ("+p(w.value.faculty_slug)+") · Active: "+p(w.value.is_active?"yes":"no"),1)]),_:1})]),_:1})]),_:1}),r(e(F),{class:"border border-border/50 bg-card shadow-sm"},{default:l(()=>[r(e(I),null,{default:l(()=>[r(e(P),{class:"text-base font-semibold text-foreground"},{default:l(()=>[...t[25]||(t[25]=[a("Chapters",-1)])]),_:1}),r(e(G),null,{default:l(()=>[...t[26]||(t[26]=[a("Chapters + sections for this structure.",-1)])]),_:1})]),_:1}),r(e(fe),null,{default:l(()=>[j.value.length?(u(),g(e(xe),{key:1,type:"multiple",class:"w-full"},{default:l(()=>[(u(!0),c(U,null,q(j.value,s=>(u(),g(e(be),{key:s.id,value:String(s.id)},{default:l(()=>[r(e(he),null,{default:l(()=>[n("div",$e,[r(e(E),{variant:"outline"},{default:l(()=>[a("#"+p(s.chapter_number),1)]),_:2},1024),n("span",Se,p(s.chapter_title),1),n("span",je,p(s.academic_level)+" · "+p(s.project_type)+" · "+p(s.target_word_count)+" words ",1),s.is_required?_("",!0):(u(),g(e(E),{key:0,variant:"secondary"},{default:l(()=>[...t[27]||(t[27]=[a("optional",-1)])]),_:1}))])]),_:2},1024),r(e(ke),{class:"space-y-4"},{default:l(()=>[n("div",Ue,[n("div",qe," Completion threshold: "+p(s.completion_threshold)+"% · Sort: "+p(s.sort_order),1),n("div",Ee,[r(e(v),{variant:"outline",size:"sm",onClick:f=>te(s)},{default:l(()=>[...t[28]||(t[28]=[a("Edit",-1)])]),_:2},1032,["onClick"]),r(e(v),{variant:"destructive",size:"sm",onClick:f=>re(s)},{default:l(()=>[...t[29]||(t[29]=[a("Delete",-1)])]),_:2},1032,["onClick"])])]),s.description?(u(),c("div",Te,p(s.description),1)):_("",!0),n("div",De,[t[31]||(t[31]=n("div",{class:"text-sm font-semibold"},"Sections",-1)),r(e(v),{size:"sm",variant:"outline",onClick:f=>le(s)},{default:l(()=>[r(e(L),{class:"mr-2 h-4 w-4"}),t[30]||(t[30]=a(" Add Section ",-1))]),_:2},1032,["onClick"])]),s.sections?.length?(u(),c("div",Ae,[(u(!0),c(U,null,q(s.sections,f=>(u(),c("div",{key:f.id,class:"flex items-start justify-between gap-3 rounded-md border border-border/60 bg-muted/20 px-3 py-3"},[n("div",Le,[n("div",ze,[r(e(E),{variant:"outline"},{default:l(()=>[a(p(f.section_number),1)]),_:2},1024),n("span",Be,p(f.section_title),1),n("span",Oe,p(f.target_word_count)+" words",1),f.is_required?_("",!0):(u(),g(e(E),{key:0,variant:"secondary"},{default:l(()=>[...t[32]||(t[32]=[a("optional",-1)])]),_:1}))]),f.description?(u(),c("div",Fe,p(f.description),1)):_("",!0)]),n("div",Ge,[r(e(v),{size:"sm",variant:"outline",onClick:ae=>ie(s,f)},{default:l(()=>[...t[33]||(t[33]=[a("Edit",-1)])]),_:2},1032,["onClick"]),r(e(v),{size:"sm",variant:"destructive",onClick:ae=>de(s,f)},{default:l(()=>[...t[34]||(t[34]=[a("Delete",-1)])]),_:2},1032,["onClick"])])]))),128))])):(u(),c("div",Ne," No sections yet. "))]),_:2},1024)]),_:2},1032,["value"]))),128))]),_:1})):(u(),c("div",Ce," No chapters yet. Click “Add Chapter”. "))]),_:1})]),_:1}),r(e(W),{open:b.value,"onUpdate:open":t[10]||(t[10]=s=>b.value=s)},{default:l(()=>[r(e(J),{class:"sm:max-w-[700px]"},{default:l(()=>[r(e(M),null,{default:l(()=>[r(e(R),null,{default:l(()=>[a(p(V.value?"Edit chapter":"Create chapter"),1)]),_:1})]),_:1}),n("div",Ie,[n("div",Pe,[n("div",We,[r(e(m),null,{default:l(()=>[...t[35]||(t[35]=[a("Academic Level",-1)])]),_:1}),z(n("select",{"onUpdate:modelValue":t[0]||(t[0]=s=>e(o).academic_level=s),class:"h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm"},[(u(!0),c(U,null,q(X.value,s=>(u(),c("option",{key:s,value:s},p(s),9,Je))),128))],512),[[B,e(o).academic_level]]),e(o).errors.academic_level?(u(),c("p",Me,p(e(o).errors.academic_level),1)):_("",!0)]),n("div",Re,[r(e(m),null,{default:l(()=>[...t[36]||(t[36]=[a("Project Type",-1)])]),_:1}),z(n("select",{"onUpdate:modelValue":t[1]||(t[1]=s=>e(o).project_type=s),class:"h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm"},[(u(!0),c(U,null,q(Y.value,s=>(u(),c("option",{key:s,value:s},p(s),9,He))),128))],512),[[B,e(o).project_type]]),e(o).errors.project_type?(u(),c("p",Ke,p(e(o).errors.project_type),1)):_("",!0)])]),n("div",Qe,[n("div",Xe,[r(e(m),null,{default:l(()=>[...t[37]||(t[37]=[a("Chapter #",-1)])]),_:1}),r(e(y),{modelValue:e(o).chapter_number,"onUpdate:modelValue":t[2]||(t[2]=s=>e(o).chapter_number=s),type:"number",min:"1",max:"30"},null,8,["modelValue"]),e(o).errors.chapter_number?(u(),c("p",Ye,p(e(o).errors.chapter_number),1)):_("",!0)]),n("div",Ze,[r(e(m),null,{default:l(()=>[...t[38]||(t[38]=[a("Title",-1)])]),_:1}),r(e(y),{modelValue:e(o).chapter_title,"onUpdate:modelValue":t[3]||(t[3]=s=>e(o).chapter_title=s)},null,8,["modelValue"]),e(o).errors.chapter_title?(u(),c("p",et,p(e(o).errors.chapter_title),1)):_("",!0)])]),n("div",tt,[r(e(m),null,{default:l(()=>[...t[39]||(t[39]=[a("Description",-1)])]),_:1}),r(e(T),{modelValue:e(o).description,"onUpdate:modelValue":t[4]||(t[4]=s=>e(o).description=s),rows:"3"},null,8,["modelValue"]),e(o).errors.description?(u(),c("p",st,p(e(o).errors.description),1)):_("",!0)]),n("div",rt,[n("div",ot,[r(e(m),null,{default:l(()=>[...t[40]||(t[40]=[a("Target Words",-1)])]),_:1}),r(e(y),{modelValue:e(o).target_word_count,"onUpdate:modelValue":t[5]||(t[5]=s=>e(o).target_word_count=s),type:"number",min:"100"},null,8,["modelValue"]),e(o).errors.target_word_count?(u(),c("p",lt,p(e(o).errors.target_word_count),1)):_("",!0)]),n("div",it,[r(e(m),null,{default:l(()=>[...t[41]||(t[41]=[a("Completion %",-1)])]),_:1}),r(e(y),{modelValue:e(o).completion_threshold,"onUpdate:modelValue":t[6]||(t[6]=s=>e(o).completion_threshold=s),type:"number",min:"1",max:"100"},null,8,["modelValue"]),e(o).errors.completion_threshold?(u(),c("p",nt,p(e(o).errors.completion_threshold),1)):_("",!0)]),n("div",dt,[r(e(m),null,{default:l(()=>[...t[42]||(t[42]=[a("Sort Order",-1)])]),_:1}),r(e(y),{modelValue:e(o).sort_order,"onUpdate:modelValue":t[7]||(t[7]=s=>e(o).sort_order=s),type:"number",min:"0",max:"1000"},null,8,["modelValue"]),e(o).errors.sort_order?(u(),c("p",at,p(e(o).errors.sort_order),1)):_("",!0)])]),n("label",ut,[t[43]||(t[43]=n("span",{class:"text-foreground"},"Required",-1)),r(e(H),{checked:e(o).is_required,"onUpdate:checked":t[8]||(t[8]=s=>e(o).is_required=s)},null,8,["checked"])])]),n("div",pt,[r(e(v),{variant:"ghost",onClick:t[9]||(t[9]=s=>b.value=!1)},{default:l(()=>[...t[44]||(t[44]=[a("Cancel",-1)])]),_:1}),r(e(v),{disabled:e(o).processing,onClick:se},{default:l(()=>[e(o).processing?(u(),g(e(O),{key:0,class:"mr-2 h-4 w-4 animate-spin"})):_("",!0),t[45]||(t[45]=a(" Save ",-1))]),_:1},8,["disabled"])])]),_:1})]),_:1},8,["open"]),r(e(W),{open:h.value,"onUpdate:open":t[20]||(t[20]=s=>h.value=s)},{default:l(()=>[r(e(J),{class:"sm:max-w-[700px]"},{default:l(()=>[r(e(M),null,{default:l(()=>[r(e(R),null,{default:l(()=>[a(p(C.value?"Edit section":"Create section"),1)]),_:1})]),_:1}),n("div",ct,[n("div",_t,[n("div",mt,[r(e(m),null,{default:l(()=>[...t[46]||(t[46]=[a("Section #",-1)])]),_:1}),r(e(y),{modelValue:e(i).section_number,"onUpdate:modelValue":t[11]||(t[11]=s=>e(i).section_number=s),placeholder:"1.1"},null,8,["modelValue"]),e(i).errors.section_number?(u(),c("p",ft,p(e(i).errors.section_number),1)):_("",!0)]),n("div",vt,[r(e(m),null,{default:l(()=>[...t[47]||(t[47]=[a("Title",-1)])]),_:1}),r(e(y),{modelValue:e(i).section_title,"onUpdate:modelValue":t[12]||(t[12]=s=>e(i).section_title=s)},null,8,["modelValue"]),e(i).errors.section_title?(u(),c("p",yt,p(e(i).errors.section_title),1)):_("",!0)])]),n("div",gt,[r(e(m),null,{default:l(()=>[...t[48]||(t[48]=[a("Description",-1)])]),_:1}),r(e(T),{modelValue:e(i).description,"onUpdate:modelValue":t[13]||(t[13]=s=>e(i).description=s),rows:"3"},null,8,["modelValue"]),e(i).errors.description?(u(),c("p",xt,p(e(i).errors.description),1)):_("",!0)]),n("div",bt,[r(e(m),null,{default:l(()=>[...t[49]||(t[49]=[a("Writing Guidance",-1)])]),_:1}),r(e(T),{modelValue:e(i).writing_guidance,"onUpdate:modelValue":t[14]||(t[14]=s=>e(i).writing_guidance=s),rows:"5"},null,8,["modelValue"]),e(i).errors.writing_guidance?(u(),c("p",ht,p(e(i).errors.writing_guidance),1)):_("",!0)]),n("div",kt,[r(e(m),null,{default:l(()=>[...t[50]||(t[50]=[a("Tips (one per line or JSON array)",-1)])]),_:1}),r(e(T),{modelValue:e(i).tips,"onUpdate:modelValue":t[15]||(t[15]=s=>e(i).tips=s),rows:"4",class:"font-mono text-sm"},null,8,["modelValue"]),e(i).errors.tips?(u(),c("p",wt,p(e(i).errors.tips),1)):_("",!0)]),n("div",Vt,[n("div",Ct,[r(e(m),null,{default:l(()=>[...t[51]||(t[51]=[a("Target Words",-1)])]),_:1}),r(e(y),{modelValue:e(i).target_word_count,"onUpdate:modelValue":t[16]||(t[16]=s=>e(i).target_word_count=s),type:"number",min:"50"},null,8,["modelValue"]),e(i).errors.target_word_count?(u(),c("p",$t,p(e(i).errors.target_word_count),1)):_("",!0)]),n("div",St,[r(e(m),null,{default:l(()=>[...t[52]||(t[52]=[a("Sort Order",-1)])]),_:1}),r(e(y),{modelValue:e(i).sort_order,"onUpdate:modelValue":t[17]||(t[17]=s=>e(i).sort_order=s),type:"number",min:"0",max:"1000"},null,8,["modelValue"]),e(i).errors.sort_order?(u(),c("p",jt,p(e(i).errors.sort_order),1)):_("",!0)])]),n("label",Ut,[t[53]||(t[53]=n("span",{class:"text-foreground"},"Required",-1)),r(e(H),{checked:e(i).is_required,"onUpdate:checked":t[18]||(t[18]=s=>e(i).is_required=s)},null,8,["checked"])])]),n("div",qt,[r(e(v),{variant:"ghost",onClick:t[19]||(t[19]=s=>h.value=!1)},{default:l(()=>[...t[54]||(t[54]=[a("Cancel",-1)])]),_:1}),r(e(v),{disabled:e(i).processing,onClick:ne},{default:l(()=>[e(i).processing?(u(),g(e(O),{key:0,class:"mr-2 h-4 w-4 animate-spin"})):_("",!0),t[55]||(t[55]=a(" Save ",-1))]),_:1},8,["disabled"])])]),_:1})]),_:1},8,["open"])]),_:1},8,["title"]))}});export{Qt as default};
