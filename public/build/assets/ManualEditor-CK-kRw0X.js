import{d as pa,b as q,t as _r,q as Bg,c as ge,o as G,g as w,f as Fe,k as C,u as h,j as ee,z as fe,y as qt,F as ga,h as Ug,n as wt,al as gi,U as xt,af as Dg,S as $g,e as vr,p as Mo,T as ua,a4 as kg,a0 as zg,X as un,i as mt,aa}from"./app-BVIdTG1I.js";import{t as ae}from"./index-B5b3Os__.js";import{_ as he}from"./index-B1VpDU4x.js";import{_ as Ng}from"./index-DOhLGeck.js";import{_ as Gt}from"./Separator.vue_vue_type_script_setup_true_lang-BsMDDgE-.js";import{_ as Gg}from"./Progress.vue_vue_type_script_setup_true_lang-B-tYgY80.js";import{aa as Hg}from"./RichTextEditor-DuSMNIkl.js";import{d as Ht,u as qg,a as Kg,c as Yg,b as Zg,_ as Xg,M as Jg}from"./useManualEditorSuggestions-C6ugDFtR.js";import{_ as Qg}from"./Input.vue_vue_type_script_setup_true_lang-TG7F3Qrh.js";import{a as Vg}from"./ScrollArea.vue_vue_type_script_setup_true_lang-f227kzdp.js";import{B as jg}from"./bot-CRbLtnE9.js";import{X as ev}from"./x-6A7Bqp_F.js";import{S as tv}from"./sparkles-CzNYXTkb.js";import{L as va}from"./loader-circle-BaE492Se.js";import{S as nv}from"./send-D1t-Ntye.js";import{_ as rv}from"./ChapterNavigation.vue_vue_type_script_setup_true_lang-BQMvfur1.js";import{u as iv,M as ov,a as sv,P as uv,_ as av,b as la}from"./useTextHistory-DwFYQCwA.js";import{_ as lv}from"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-DsNFaETY.js";import{e as fv}from"./WordBalanceDisplay.vue_vue_type_script_setup_true_lang-B0MAtCBO.js";import{r as vi,u as cv}from"./useWordBalance-hu0KAx3X.js";import{_ as dv}from"./PurchaseModal.vue_vue_type_script_setup_true_lang-B6QHAVpp.js";import{A as fa}from"./arrow-left-B6kz8cP2.js";import{M as hv}from"./menu-BmJd675_.js";import{S as Po}from"./save-Du0veRaO.js";import{M as ca}from"./message-square-D5a-agco.js";import{C as pv}from"./chevron-left-CDjeLRT9.js";import{C as gv}from"./chevron-right-DM15nLqu.js";import{a as vv,P as _v}from"./AlertDialogTitle.vue_vue_type_script_setup_true_lang-BIM97yJv.js";import{M as mv,S as xv}from"./sun-DSFcZpQO.js";import{M as wv}from"./minimize-2-BSKK0OE-.js";import{B as yv}from"./brain-DzM7T7TJ.js";import{C as bv}from"./circle-check-big-Gy3jQJwi.js";import{_ as Cv}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./index-BhyhKSzW.js";import"./Separator-BI36_jDt.js";import"./Presence-DbR524kf.js";import"./useForwardExpose-CnZgFz-j.js";import"./nullish-CHIgUVhi.js";import"./purify.es-DxJI3Wx7.js";import"./index-BWEDi_FC.js";import"./step-DrZ9DcYd.js";import"./chart-column-DyAhCk_a.js";import"./calendar-B1tcbbF_.js";import"./users-ByS0SlXE.js";import"./circle-alert-CQ0BTN98.js";import"./eye-C4ar9qJd.js";import"./check-C3pnLhhV.js";import"./type-B7PcsQha.js";import"./download-BtENBTW8.js";import"./trash-2-CPMw9DpO.js";import"./DialogTitle.vue_vue_type_script_setup_true_lang-CAFY5Wxh.js";import"./DialogTitle-CK9n-J3g.js";import"./DialogDescription.vue_vue_type_script_setup_true_lang-DDA2P5nv.js";import"./DialogFooter.vue_vue_type_script_setup_true_lang-BqhkexRM.js";import"./Label.vue_vue_type_script_setup_true_lang-ClK76Vz-.js";import"./minus-BztdWHs5.js";import"./plus-lDmpdxlV.js";import"./list-Bx98spz4.js";import"./CollapsibleTrigger.vue_vue_type_script_setup_true_lang-BVNkpIFE.js";import"./SafeHtmlText.vue_vue_type_script_setup_true_lang-BYGGxntv.js";import"./lightbulb-CjBKl7pS.js";import"./chevron-down-CnDmxo1S.js";import"./Checkbox.vue_vue_type_script_setup_true_lang-K76gIoIk.js";import"./ohash.D__AXeF1-C-E83dC9.js";import"./VisuallyHiddenInput-2LCs2AgD.js";import"./VisuallyHidden-CCpOVnIT.js";import"./RovingFocusItem-DfoVejka.js";import"./target-vCi_z2hW.js";import"./circle-BgXBNfrC.js";import"./DefensePreparationPanel.vue_vue_type_script_setup_true_lang-Qewu5uVE.js";import"./index-KEdK8aD4.js";import"./CardContent.vue_vue_type_script_setup_true_lang-uxKk0aVR.js";import"./CardTitle.vue_vue_type_script_setup_true_lang-Dxuj87V1.js";import"./Switch.vue_vue_type_script_setup_true_lang-Db2zt_AN.js";import"./refresh-cw-B8wqm9JE.js";import"./useNonce-DJxcZ4_D.js";import"./DialogTrigger-buzKTFRs.js";import"./lock-CPiVKFvP.js";import"./book-open-CBXvQSxp.js";import"./search-Gx_IRhra.js";import"./file-text-B2NRgex3.js";import"./TooltipTrigger.vue_vue_type_script_setup_true_lang-B49cenjv.js";import"./coins-ID9QpOFE.js";import"./arrow-right-DOHkyrhk.js";const Sv={class:"flex flex-col h-full bg-transparent"},Av={class:"p-4 border-b border-border/50 flex justify-between items-start bg-background/50 backdrop-blur-sm"},Tv={class:"flex items-center gap-2"},Ev={class:"p-1.5 rounded-md bg-primary/10 text-primary"},Rv={key:0,class:"px-4 py-2 bg-muted/30 border-b border-border/50 text-xs flex gap-3 text-muted-foreground"},Iv={key:0,class:"ml-auto text-amber-600 dark:text-amber-400 font-medium flex items-center gap-1"},Lv={class:"space-y-6"},Ov={key:0,class:"flex flex-col items-center justify-center text-center py-12 px-4 space-y-4 opacity-0 animate-in fade-in slide-in-from-bottom-4 duration-700 fill-mode-forwards"},Mv={class:"w-12 h-12 rounded-full bg-primary/5 flex items-center justify-center mb-2"},Pv={class:"grid grid-cols-1 gap-2 w-full max-w-xs mt-4"},Fv={class:"space-y-1"},Wv=["innerHTML"],Bv={key:1,class:"flex gap-3"},Uv={class:"w-8 h-8 rounded-full bg-muted flex items-center justify-center shrink-0"},Dv={class:"p-4 border-t border-border/50 bg-background/50 backdrop-blur-sm"},$v={class:"relative"},kv=pa({__name:"ManualChatSidebar",props:{messages:{},isLoading:{type:Boolean},analysis:{}},emits:["send","close"],setup(Se,{emit:A}){const u=Se,Q=A,oe=q(""),We=q(null),se=()=>{oe.value.trim()&&!u.isLoading&&(Q("send",oe.value),oe.value="")},yt=B=>{B.key==="Enter"&&!B.shiftKey&&(B.preventDefault(),se())};return _r(()=>u.messages.length,async()=>{if(await Bg(),We.value){const B=We.value.$el.querySelector("[data-radix-scroll-area-viewport]");B&&(B.scrollTop=B.scrollHeight)}}),(B,k)=>(G(),ge("div",Sv,[w("div",Av,[w("div",null,[w("div",Tv,[w("div",Ev,[C(h(jg),{class:"w-4 h-4"})]),k[4]||(k[4]=w("h3",{class:"font-semibold text-foreground"},"AI Assistant",-1))]),k[5]||(k[5]=w("p",{class:"text-xs text-muted-foreground mt-1 ml-1"},"Context-aware writing companion",-1))]),C(h(he),{variant:"ghost",size:"icon",class:"h-8 w-8 -mr-2",onClick:k[0]||(k[0]=Z=>B.$emit("close"))},{default:ee(()=>[C(h(ev),{class:"w-4 h-4"})]),_:1})]),B.analysis?(G(),ge("div",Rv,[w("span",null,fe(B.analysis.word_count)+" words",1),k[6]||(k[6]=w("span",null,"•",-1)),w("span",null,fe(B.analysis.citation_count)+" citations",1),B.analysis.detected_issues.length>0?(G(),ge("span",Iv,fe(B.analysis.detected_issues.length)+" issues ",1)):Fe("",!0)])):Fe("",!0),C(h(Vg),{ref_key:"messagesContainer",ref:We,class:"flex-1 p-4"},{default:ee(()=>[w("div",Lv,[B.messages.length===0?(G(),ge("div",Ov,[w("div",Mv,[C(h(tv),{class:"w-6 h-6 text-primary/60"})]),k[9]||(k[9]=w("div",{class:"space-y-1"},[w("h4",{class:"font-medium text-foreground"},"How can I help?"),w("p",{class:"text-sm text-muted-foreground max-w-[240px]"}," I can help you structure your arguments, find citations, or rephrase complex sentences. ")],-1)),w("div",Pv,[C(h(he),{variant:"outline",size:"sm",class:"justify-start h-auto py-2 text-xs font-normal",onClick:k[1]||(k[1]=Z=>{oe.value="Analyze the structure of this chapter",se()})},{default:ee(()=>[...k[7]||(k[7]=[qt(' "Analyze the structure of this chapter" ',-1)])]),_:1}),C(h(he),{variant:"outline",size:"sm",class:"justify-start h-auto py-2 text-xs font-normal",onClick:k[2]||(k[2]=Z=>{oe.value="Suggest some relevant citations",se()})},{default:ee(()=>[...k[8]||(k[8]=[qt(' "Suggest some relevant citations" ',-1)])]),_:1})])])):Fe("",!0),(G(!0),ge(ga,null,Ug(B.messages,(Z,W)=>(G(),ge("div",{key:W,class:wt(["flex gap-3 max-w-[90%]",Z.role==="user"?"ml-auto flex-row-reverse":""])},[w("div",{class:wt(["w-8 h-8 rounded-full flex items-center justify-center shrink-0 text-xs font-medium",Z.role==="user"?"bg-primary text-primary-foreground":"bg-muted text-muted-foreground"])},fe(Z.role==="user"?"You":"AI"),3),w("div",Fv,[w("div",{class:wt(["p-3 rounded-2xl text-sm shadow-sm",Z.role==="user"?"bg-primary text-primary-foreground rounded-tr-sm":"bg-card border text-card-foreground rounded-tl-sm"])},[w("div",{innerHTML:Z.content,class:"prose prose-sm dark:prose-invert max-w-none break-words"},null,8,Wv)],2),w("p",{class:wt(["text-[10px] text-muted-foreground opacity-70 px-1",Z.role==="user"?"text-right":""])},fe(new Date(Z.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})),3)])],2))),128)),B.isLoading?(G(),ge("div",Bv,[w("div",Uv,[C(h(va),{class:"w-4 h-4 animate-spin text-muted-foreground"})]),k[10]||(k[10]=w("div",{class:"bg-card border px-4 py-3 rounded-2xl rounded-tl-sm text-sm text-muted-foreground shadow-sm"}," Thinking... ",-1))])):Fe("",!0)])]),_:1},512),w("div",Dv,[w("div",$v,[C(h(Qg),{modelValue:oe.value,"onUpdate:modelValue":k[3]||(k[3]=Z=>oe.value=Z),placeholder:"Ask anything about your chapter...",onKeydown:yt,disabled:B.isLoading,class:"pr-10 py-6 bg-background/80 border-border/60 focus-visible:ring-primary/20 shadow-sm"},null,8,["modelValue","disabled"]),C(h(he),{onClick:se,disabled:B.isLoading||!oe.value.trim(),size:"icon",class:wt(["absolute right-1.5 top-1.5 h-9 w-9 transition-all duration-200",oe.value.trim()?"opacity-100 scale-100":"opacity-70 scale-90"])},{default:ee(()=>[C(h(nv),{class:"w-4 h-4"})]),_:1},8,["disabled","class"])]),k[11]||(k[11]=w("p",{class:"text-[10px] text-center text-muted-foreground mt-2"}," AI can make mistakes. Review generated content. ",-1))])]))}});var mr={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */var zv=mr.exports,da;function Nv(){return da||(da=1,(function(Se,A){(function(){var u,Q="4.17.21",oe=200,We="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",se="Expected a function",yt="Invalid `variable` option passed into `_.template`",B="__lodash_hash_undefined__",k=500,Z="__lodash_placeholder__",W=1,Ve=2,xe=4,dt=1,It=2,Ae=1,je=2,te=4,Ie=8,bt=16,Be=32,Ct=64,et=128,Lt=256,Tn=512,z=30,X="...",Ue=800,tt=16,an=1,Kt=2,nt=3,K=1/0,Le=9007199254740991,De=17976931348623157e292,ne=NaN,re=4294967295,_i=re-1,En=re>>>1,Te=[["ary",et],["bind",Ae],["bindKey",je],["curry",Ie],["curryRight",bt],["flip",Tn],["partial",Be],["partialRight",Ct],["rearg",Lt]],ve="[object Arguments]",pe="[object Array]",Zn="[object AsyncFunction]",St="[object Boolean]",rt="[object Date]",ln="[object DOMException]",$e="[object Error]",Xn="[object Function]",Ot="[object GeneratorFunction]",He="[object Map]",Yt="[object Number]",xr="[object Null]",ht="[object Object]",wr="[object Promise]",yr="[object Proxy]",fn="[object RegExp]",qe="[object Set]",cn="[object String]",Rn="[object Symbol]",br="[object Undefined]",Zt="[object WeakMap]",Cr="[object WeakSet]",Xt="[object ArrayBuffer]",Mt="[object DataView]",Jn="[object Float32Array]",In="[object Float64Array]",Ln="[object Int8Array]",Qn="[object Int16Array]",dn="[object Int32Array]",hn="[object Uint8Array]",pn="[object Uint8ClampedArray]",Pt="[object Uint16Array]",On="[object Uint32Array]",Sr=/\b__p \+= '';/g,Mn=/\b(__p \+=) '' \+/g,mi=/(__e\(.*?\)|\b__t\)) \+\n'';/g,g=/&(?:amp|lt|gt|quot|#39);/g,m=/[&<>"']/g,I=RegExp(g.source),Pn=RegExp(m.source),Vn=/<%-([\s\S]+?)%>/g,Ar=/<%([\s\S]+?)%>/g,jn=/<%=([\s\S]+?)%>/g,er=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Fo=/^\w*$/,Tr=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,gn=/[\\^$.*+?()[\]{}|]/g,ye=RegExp(gn.source),Jt=/^\s+/,At=/\s/,vn=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,xi=/\{\n\/\* \[wrapped with (.+)\] \*/,wi=/,? & /,_a=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,ma=/[()=,{}\[\]\/\s]/,xa=/\\(\\)?/g,wa=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Wo=/\w*$/,ya=/^[-+]0x[0-9a-f]+$/i,ba=/^0b[01]+$/i,Ca=/^\[object .+?Constructor\]$/,Sa=/^0o[0-7]+$/i,Aa=/^(?:0|[1-9]\d*)$/,Ta=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Er=/($^)/,Ea=/['\n\r\u2028\u2029\\]/g,Rr="\\ud800-\\udfff",Ra="\\u0300-\\u036f",Ia="\\ufe20-\\ufe2f",La="\\u20d0-\\u20ff",Bo=Ra+Ia+La,Uo="\\u2700-\\u27bf",Do="a-z\\xdf-\\xf6\\xf8-\\xff",Oa="\\xac\\xb1\\xd7\\xf7",Ma="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Pa="\\u2000-\\u206f",Fa=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",$o="A-Z\\xc0-\\xd6\\xd8-\\xde",ko="\\ufe0e\\ufe0f",zo=Oa+Ma+Pa+Fa,yi="['’]",Wa="["+Rr+"]",No="["+zo+"]",Ir="["+Bo+"]",Go="\\d+",Ba="["+Uo+"]",Ho="["+Do+"]",qo="[^"+Rr+zo+Go+Uo+Do+$o+"]",bi="\\ud83c[\\udffb-\\udfff]",Ua="(?:"+Ir+"|"+bi+")",Ko="[^"+Rr+"]",Ci="(?:\\ud83c[\\udde6-\\uddff]){2}",Si="[\\ud800-\\udbff][\\udc00-\\udfff]",Fn="["+$o+"]",Yo="\\u200d",Zo="(?:"+Ho+"|"+qo+")",Da="(?:"+Fn+"|"+qo+")",Xo="(?:"+yi+"(?:d|ll|m|re|s|t|ve))?",Jo="(?:"+yi+"(?:D|LL|M|RE|S|T|VE))?",Qo=Ua+"?",Vo="["+ko+"]?",$a="(?:"+Yo+"(?:"+[Ko,Ci,Si].join("|")+")"+Vo+Qo+")*",ka="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",za="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",jo=Vo+Qo+$a,Na="(?:"+[Ba,Ci,Si].join("|")+")"+jo,Ga="(?:"+[Ko+Ir+"?",Ir,Ci,Si,Wa].join("|")+")",Ha=RegExp(yi,"g"),qa=RegExp(Ir,"g"),Ai=RegExp(bi+"(?="+bi+")|"+Ga+jo,"g"),Ka=RegExp([Fn+"?"+Ho+"+"+Xo+"(?="+[No,Fn,"$"].join("|")+")",Da+"+"+Jo+"(?="+[No,Fn+Zo,"$"].join("|")+")",Fn+"?"+Zo+"+"+Xo,Fn+"+"+Jo,za,ka,Go,Na].join("|"),"g"),Ya=RegExp("["+Yo+Rr+Bo+ko+"]"),Za=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Xa=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Ja=-1,j={};j[Jn]=j[In]=j[Ln]=j[Qn]=j[dn]=j[hn]=j[pn]=j[Pt]=j[On]=!0,j[ve]=j[pe]=j[Xt]=j[St]=j[Mt]=j[rt]=j[$e]=j[Xn]=j[He]=j[Yt]=j[ht]=j[fn]=j[qe]=j[cn]=j[Zt]=!1;var V={};V[ve]=V[pe]=V[Xt]=V[Mt]=V[St]=V[rt]=V[Jn]=V[In]=V[Ln]=V[Qn]=V[dn]=V[He]=V[Yt]=V[ht]=V[fn]=V[qe]=V[cn]=V[Rn]=V[hn]=V[pn]=V[Pt]=V[On]=!0,V[$e]=V[Xn]=V[Zt]=!1;var Qa={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},Va={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},ja={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},el={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},tl=parseFloat,nl=parseInt,es=typeof gi=="object"&&gi&&gi.Object===Object&&gi,rl=typeof self=="object"&&self&&self.Object===Object&&self,be=es||rl||Function("return this")(),Ti=A&&!A.nodeType&&A,_n=Ti&&!0&&Se&&!Se.nodeType&&Se,ts=_n&&_n.exports===Ti,Ei=ts&&es.process,it=(function(){try{var f=_n&&_n.require&&_n.require("util").types;return f||Ei&&Ei.binding&&Ei.binding("util")}catch{}})(),ns=it&&it.isArrayBuffer,rs=it&&it.isDate,is=it&&it.isMap,os=it&&it.isRegExp,ss=it&&it.isSet,us=it&&it.isTypedArray;function Ke(f,p,d){switch(d.length){case 0:return f.call(p);case 1:return f.call(p,d[0]);case 2:return f.call(p,d[0],d[1]);case 3:return f.call(p,d[0],d[1],d[2])}return f.apply(p,d)}function il(f,p,d,b){for(var L=-1,N=f==null?0:f.length;++L<N;){var _e=f[L];p(b,_e,d(_e),f)}return b}function ot(f,p){for(var d=-1,b=f==null?0:f.length;++d<b&&p(f[d],d,f)!==!1;);return f}function ol(f,p){for(var d=f==null?0:f.length;d--&&p(f[d],d,f)!==!1;);return f}function as(f,p){for(var d=-1,b=f==null?0:f.length;++d<b;)if(!p(f[d],d,f))return!1;return!0}function Qt(f,p){for(var d=-1,b=f==null?0:f.length,L=0,N=[];++d<b;){var _e=f[d];p(_e,d,f)&&(N[L++]=_e)}return N}function Lr(f,p){var d=f==null?0:f.length;return!!d&&Wn(f,p,0)>-1}function Ri(f,p,d){for(var b=-1,L=f==null?0:f.length;++b<L;)if(d(p,f[b]))return!0;return!1}function ie(f,p){for(var d=-1,b=f==null?0:f.length,L=Array(b);++d<b;)L[d]=p(f[d],d,f);return L}function Vt(f,p){for(var d=-1,b=p.length,L=f.length;++d<b;)f[L+d]=p[d];return f}function Ii(f,p,d,b){var L=-1,N=f==null?0:f.length;for(b&&N&&(d=f[++L]);++L<N;)d=p(d,f[L],L,f);return d}function sl(f,p,d,b){var L=f==null?0:f.length;for(b&&L&&(d=f[--L]);L--;)d=p(d,f[L],L,f);return d}function Li(f,p){for(var d=-1,b=f==null?0:f.length;++d<b;)if(p(f[d],d,f))return!0;return!1}var ul=Oi("length");function al(f){return f.split("")}function ll(f){return f.match(_a)||[]}function ls(f,p,d){var b;return d(f,function(L,N,_e){if(p(L,N,_e))return b=N,!1}),b}function Or(f,p,d,b){for(var L=f.length,N=d+(b?1:-1);b?N--:++N<L;)if(p(f[N],N,f))return N;return-1}function Wn(f,p,d){return p===p?yl(f,p,d):Or(f,fs,d)}function fl(f,p,d,b){for(var L=d-1,N=f.length;++L<N;)if(b(f[L],p))return L;return-1}function fs(f){return f!==f}function cs(f,p){var d=f==null?0:f.length;return d?Pi(f,p)/d:ne}function Oi(f){return function(p){return p==null?u:p[f]}}function Mi(f){return function(p){return f==null?u:f[p]}}function ds(f,p,d,b,L){return L(f,function(N,_e,J){d=b?(b=!1,N):p(d,N,_e,J)}),d}function cl(f,p){var d=f.length;for(f.sort(p);d--;)f[d]=f[d].value;return f}function Pi(f,p){for(var d,b=-1,L=f.length;++b<L;){var N=p(f[b]);N!==u&&(d=d===u?N:d+N)}return d}function Fi(f,p){for(var d=-1,b=Array(f);++d<f;)b[d]=p(d);return b}function dl(f,p){return ie(p,function(d){return[d,f[d]]})}function hs(f){return f&&f.slice(0,_s(f)+1).replace(Jt,"")}function Ye(f){return function(p){return f(p)}}function Wi(f,p){return ie(p,function(d){return f[d]})}function tr(f,p){return f.has(p)}function ps(f,p){for(var d=-1,b=f.length;++d<b&&Wn(p,f[d],0)>-1;);return d}function gs(f,p){for(var d=f.length;d--&&Wn(p,f[d],0)>-1;);return d}function hl(f,p){for(var d=f.length,b=0;d--;)f[d]===p&&++b;return b}var pl=Mi(Qa),gl=Mi(Va);function vl(f){return"\\"+el[f]}function _l(f,p){return f==null?u:f[p]}function Bn(f){return Ya.test(f)}function ml(f){return Za.test(f)}function xl(f){for(var p,d=[];!(p=f.next()).done;)d.push(p.value);return d}function Bi(f){var p=-1,d=Array(f.size);return f.forEach(function(b,L){d[++p]=[L,b]}),d}function vs(f,p){return function(d){return f(p(d))}}function jt(f,p){for(var d=-1,b=f.length,L=0,N=[];++d<b;){var _e=f[d];(_e===p||_e===Z)&&(f[d]=Z,N[L++]=d)}return N}function Mr(f){var p=-1,d=Array(f.size);return f.forEach(function(b){d[++p]=b}),d}function wl(f){var p=-1,d=Array(f.size);return f.forEach(function(b){d[++p]=[b,b]}),d}function yl(f,p,d){for(var b=d-1,L=f.length;++b<L;)if(f[b]===p)return b;return-1}function bl(f,p,d){for(var b=d+1;b--;)if(f[b]===p)return b;return b}function Un(f){return Bn(f)?Sl(f):ul(f)}function pt(f){return Bn(f)?Al(f):al(f)}function _s(f){for(var p=f.length;p--&&At.test(f.charAt(p)););return p}var Cl=Mi(ja);function Sl(f){for(var p=Ai.lastIndex=0;Ai.test(f);)++p;return p}function Al(f){return f.match(Ai)||[]}function Tl(f){return f.match(Ka)||[]}var El=(function f(p){p=p==null?be:Dn.defaults(be.Object(),p,Dn.pick(be,Xa));var d=p.Array,b=p.Date,L=p.Error,N=p.Function,_e=p.Math,J=p.Object,Ui=p.RegExp,Rl=p.String,st=p.TypeError,Pr=d.prototype,Il=N.prototype,$n=J.prototype,Fr=p["__core-js_shared__"],Wr=Il.toString,Y=$n.hasOwnProperty,Ll=0,ms=(function(){var e=/[^.]+$/.exec(Fr&&Fr.keys&&Fr.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""})(),Br=$n.toString,Ol=Wr.call(J),Ml=be._,Pl=Ui("^"+Wr.call(Y).replace(gn,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ur=ts?p.Buffer:u,en=p.Symbol,Dr=p.Uint8Array,xs=Ur?Ur.allocUnsafe:u,$r=vs(J.getPrototypeOf,J),ws=J.create,ys=$n.propertyIsEnumerable,kr=Pr.splice,bs=en?en.isConcatSpreadable:u,nr=en?en.iterator:u,mn=en?en.toStringTag:u,zr=(function(){try{var e=Cn(J,"defineProperty");return e({},"",{}),e}catch{}})(),Fl=p.clearTimeout!==be.clearTimeout&&p.clearTimeout,Wl=b&&b.now!==be.Date.now&&b.now,Bl=p.setTimeout!==be.setTimeout&&p.setTimeout,Nr=_e.ceil,Gr=_e.floor,Di=J.getOwnPropertySymbols,Ul=Ur?Ur.isBuffer:u,Cs=p.isFinite,Dl=Pr.join,$l=vs(J.keys,J),me=_e.max,Ee=_e.min,kl=b.now,zl=p.parseInt,Ss=_e.random,Nl=Pr.reverse,$i=Cn(p,"DataView"),rr=Cn(p,"Map"),ki=Cn(p,"Promise"),kn=Cn(p,"Set"),ir=Cn(p,"WeakMap"),or=Cn(J,"create"),Hr=ir&&new ir,zn={},Gl=Sn($i),Hl=Sn(rr),ql=Sn(ki),Kl=Sn(kn),Yl=Sn(ir),qr=en?en.prototype:u,sr=qr?qr.valueOf:u,As=qr?qr.toString:u;function o(e){if(le(e)&&!O(e)&&!(e instanceof D)){if(e instanceof ut)return e;if(Y.call(e,"__wrapped__"))return Tu(e)}return new ut(e)}var Nn=(function(){function e(){}return function(t){if(!ue(t))return{};if(ws)return ws(t);e.prototype=t;var n=new e;return e.prototype=u,n}})();function Kr(){}function ut(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=u}o.templateSettings={escape:Vn,evaluate:Ar,interpolate:jn,variable:"",imports:{_:o}},o.prototype=Kr.prototype,o.prototype.constructor=o,ut.prototype=Nn(Kr.prototype),ut.prototype.constructor=ut;function D(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=re,this.__views__=[]}function Zl(){var e=new D(this.__wrapped__);return e.__actions__=ke(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=ke(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=ke(this.__views__),e}function Xl(){if(this.__filtered__){var e=new D(this);e.__dir__=-1,e.__filtered__=!0}else e=this.clone(),e.__dir__*=-1;return e}function Jl(){var e=this.__wrapped__.value(),t=this.__dir__,n=O(e),r=t<0,i=n?e.length:0,s=lc(0,i,this.__views__),a=s.start,l=s.end,c=l-a,v=r?l:a-1,_=this.__iteratees__,x=_.length,y=0,S=Ee(c,this.__takeCount__);if(!n||!r&&i==c&&S==c)return Xs(e,this.__actions__);var E=[];e:for(;c--&&y<S;){v+=t;for(var P=-1,R=e[v];++P<x;){var U=_[P],$=U.iteratee,Je=U.type,Pe=$(R);if(Je==Kt)R=Pe;else if(!Pe){if(Je==an)continue e;break e}}E[y++]=R}return E}D.prototype=Nn(Kr.prototype),D.prototype.constructor=D;function xn(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Ql(){this.__data__=or?or(null):{},this.size=0}function Vl(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}function jl(e){var t=this.__data__;if(or){var n=t[e];return n===B?u:n}return Y.call(t,e)?t[e]:u}function ef(e){var t=this.__data__;return or?t[e]!==u:Y.call(t,e)}function tf(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=or&&t===u?B:t,this}xn.prototype.clear=Ql,xn.prototype.delete=Vl,xn.prototype.get=jl,xn.prototype.has=ef,xn.prototype.set=tf;function Ft(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function nf(){this.__data__=[],this.size=0}function rf(e){var t=this.__data__,n=Yr(t,e);if(n<0)return!1;var r=t.length-1;return n==r?t.pop():kr.call(t,n,1),--this.size,!0}function of(e){var t=this.__data__,n=Yr(t,e);return n<0?u:t[n][1]}function sf(e){return Yr(this.__data__,e)>-1}function uf(e,t){var n=this.__data__,r=Yr(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this}Ft.prototype.clear=nf,Ft.prototype.delete=rf,Ft.prototype.get=of,Ft.prototype.has=sf,Ft.prototype.set=uf;function Wt(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function af(){this.size=0,this.__data__={hash:new xn,map:new(rr||Ft),string:new xn}}function lf(e){var t=oi(this,e).delete(e);return this.size-=t?1:0,t}function ff(e){return oi(this,e).get(e)}function cf(e){return oi(this,e).has(e)}function df(e,t){var n=oi(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this}Wt.prototype.clear=af,Wt.prototype.delete=lf,Wt.prototype.get=ff,Wt.prototype.has=cf,Wt.prototype.set=df;function wn(e){var t=-1,n=e==null?0:e.length;for(this.__data__=new Wt;++t<n;)this.add(e[t])}function hf(e){return this.__data__.set(e,B),this}function pf(e){return this.__data__.has(e)}wn.prototype.add=wn.prototype.push=hf,wn.prototype.has=pf;function gt(e){var t=this.__data__=new Ft(e);this.size=t.size}function gf(){this.__data__=new Ft,this.size=0}function vf(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}function _f(e){return this.__data__.get(e)}function mf(e){return this.__data__.has(e)}function xf(e,t){var n=this.__data__;if(n instanceof Ft){var r=n.__data__;if(!rr||r.length<oe-1)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new Wt(r)}return n.set(e,t),this.size=n.size,this}gt.prototype.clear=gf,gt.prototype.delete=vf,gt.prototype.get=_f,gt.prototype.has=mf,gt.prototype.set=xf;function Ts(e,t){var n=O(e),r=!n&&An(e),i=!n&&!r&&sn(e),s=!n&&!r&&!i&&Kn(e),a=n||r||i||s,l=a?Fi(e.length,Rl):[],c=l.length;for(var v in e)(t||Y.call(e,v))&&!(a&&(v=="length"||i&&(v=="offset"||v=="parent")||s&&(v=="buffer"||v=="byteLength"||v=="byteOffset")||$t(v,c)))&&l.push(v);return l}function Es(e){var t=e.length;return t?e[Qi(0,t-1)]:u}function wf(e,t){return si(ke(e),yn(t,0,e.length))}function yf(e){return si(ke(e))}function zi(e,t,n){(n!==u&&!vt(e[t],n)||n===u&&!(t in e))&&Bt(e,t,n)}function ur(e,t,n){var r=e[t];(!(Y.call(e,t)&&vt(r,n))||n===u&&!(t in e))&&Bt(e,t,n)}function Yr(e,t){for(var n=e.length;n--;)if(vt(e[n][0],t))return n;return-1}function bf(e,t,n,r){return tn(e,function(i,s,a){t(r,i,n(i),a)}),r}function Rs(e,t){return e&&Et(t,we(t),e)}function Cf(e,t){return e&&Et(t,Ne(t),e)}function Bt(e,t,n){t=="__proto__"&&zr?zr(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function Ni(e,t){for(var n=-1,r=t.length,i=d(r),s=e==null;++n<r;)i[n]=s?u:Co(e,t[n]);return i}function yn(e,t,n){return e===e&&(n!==u&&(e=e<=n?e:n),t!==u&&(e=e>=t?e:t)),e}function at(e,t,n,r,i,s){var a,l=t&W,c=t&Ve,v=t&xe;if(n&&(a=i?n(e,r,i,s):n(e)),a!==u)return a;if(!ue(e))return e;var _=O(e);if(_){if(a=cc(e),!l)return ke(e,a)}else{var x=Re(e),y=x==Xn||x==Ot;if(sn(e))return Vs(e,l);if(x==ht||x==ve||y&&!i){if(a=c||y?{}:_u(e),!l)return c?ec(e,Cf(a,e)):jf(e,Rs(a,e))}else{if(!V[x])return i?e:{};a=dc(e,x,l)}}s||(s=new gt);var S=s.get(e);if(S)return S;s.set(e,a),Ku(e)?e.forEach(function(R){a.add(at(R,t,n,R,e,s))}):Hu(e)&&e.forEach(function(R,U){a.set(U,at(R,t,n,U,e,s))});var E=v?c?ao:uo:c?Ne:we,P=_?u:E(e);return ot(P||e,function(R,U){P&&(U=R,R=e[U]),ur(a,U,at(R,t,n,U,e,s))}),a}function Sf(e){var t=we(e);return function(n){return Is(n,e,t)}}function Is(e,t,n){var r=n.length;if(e==null)return!r;for(e=J(e);r--;){var i=n[r],s=t[i],a=e[i];if(a===u&&!(i in e)||!s(a))return!1}return!0}function Ls(e,t,n){if(typeof e!="function")throw new st(se);return pr(function(){e.apply(u,n)},t)}function ar(e,t,n,r){var i=-1,s=Lr,a=!0,l=e.length,c=[],v=t.length;if(!l)return c;n&&(t=ie(t,Ye(n))),r?(s=Ri,a=!1):t.length>=oe&&(s=tr,a=!1,t=new wn(t));e:for(;++i<l;){var _=e[i],x=n==null?_:n(_);if(_=r||_!==0?_:0,a&&x===x){for(var y=v;y--;)if(t[y]===x)continue e;c.push(_)}else s(t,x,r)||c.push(_)}return c}var tn=ru(Tt),Os=ru(Hi,!0);function Af(e,t){var n=!0;return tn(e,function(r,i,s){return n=!!t(r,i,s),n}),n}function Zr(e,t,n){for(var r=-1,i=e.length;++r<i;){var s=e[r],a=t(s);if(a!=null&&(l===u?a===a&&!Xe(a):n(a,l)))var l=a,c=s}return c}function Tf(e,t,n,r){var i=e.length;for(n=M(n),n<0&&(n=-n>i?0:i+n),r=r===u||r>i?i:M(r),r<0&&(r+=i),r=n>r?0:Zu(r);n<r;)e[n++]=t;return e}function Ms(e,t){var n=[];return tn(e,function(r,i,s){t(r,i,s)&&n.push(r)}),n}function Ce(e,t,n,r,i){var s=-1,a=e.length;for(n||(n=pc),i||(i=[]);++s<a;){var l=e[s];t>0&&n(l)?t>1?Ce(l,t-1,n,r,i):Vt(i,l):r||(i[i.length]=l)}return i}var Gi=iu(),Ps=iu(!0);function Tt(e,t){return e&&Gi(e,t,we)}function Hi(e,t){return e&&Ps(e,t,we)}function Xr(e,t){return Qt(t,function(n){return kt(e[n])})}function bn(e,t){t=rn(t,e);for(var n=0,r=t.length;e!=null&&n<r;)e=e[Rt(t[n++])];return n&&n==r?e:u}function Fs(e,t,n){var r=t(e);return O(e)?r:Vt(r,n(e))}function Oe(e){return e==null?e===u?br:xr:mn&&mn in J(e)?ac(e):yc(e)}function qi(e,t){return e>t}function Ef(e,t){return e!=null&&Y.call(e,t)}function Rf(e,t){return e!=null&&t in J(e)}function If(e,t,n){return e>=Ee(t,n)&&e<me(t,n)}function Ki(e,t,n){for(var r=n?Ri:Lr,i=e[0].length,s=e.length,a=s,l=d(s),c=1/0,v=[];a--;){var _=e[a];a&&t&&(_=ie(_,Ye(t))),c=Ee(_.length,c),l[a]=!n&&(t||i>=120&&_.length>=120)?new wn(a&&_):u}_=e[0];var x=-1,y=l[0];e:for(;++x<i&&v.length<c;){var S=_[x],E=t?t(S):S;if(S=n||S!==0?S:0,!(y?tr(y,E):r(v,E,n))){for(a=s;--a;){var P=l[a];if(!(P?tr(P,E):r(e[a],E,n)))continue e}y&&y.push(E),v.push(S)}}return v}function Lf(e,t,n,r){return Tt(e,function(i,s,a){t(r,n(i),s,a)}),r}function lr(e,t,n){t=rn(t,e),e=yu(e,t);var r=e==null?e:e[Rt(ft(t))];return r==null?u:Ke(r,e,n)}function Ws(e){return le(e)&&Oe(e)==ve}function Of(e){return le(e)&&Oe(e)==Xt}function Mf(e){return le(e)&&Oe(e)==rt}function fr(e,t,n,r,i){return e===t?!0:e==null||t==null||!le(e)&&!le(t)?e!==e&&t!==t:Pf(e,t,n,r,fr,i)}function Pf(e,t,n,r,i,s){var a=O(e),l=O(t),c=a?pe:Re(e),v=l?pe:Re(t);c=c==ve?ht:c,v=v==ve?ht:v;var _=c==ht,x=v==ht,y=c==v;if(y&&sn(e)){if(!sn(t))return!1;a=!0,_=!1}if(y&&!_)return s||(s=new gt),a||Kn(e)?pu(e,t,n,r,i,s):sc(e,t,c,n,r,i,s);if(!(n&dt)){var S=_&&Y.call(e,"__wrapped__"),E=x&&Y.call(t,"__wrapped__");if(S||E){var P=S?e.value():e,R=E?t.value():t;return s||(s=new gt),i(P,R,n,r,s)}}return y?(s||(s=new gt),uc(e,t,n,r,i,s)):!1}function Ff(e){return le(e)&&Re(e)==He}function Yi(e,t,n,r){var i=n.length,s=i,a=!r;if(e==null)return!s;for(e=J(e);i--;){var l=n[i];if(a&&l[2]?l[1]!==e[l[0]]:!(l[0]in e))return!1}for(;++i<s;){l=n[i];var c=l[0],v=e[c],_=l[1];if(a&&l[2]){if(v===u&&!(c in e))return!1}else{var x=new gt;if(r)var y=r(v,_,c,e,t,x);if(!(y===u?fr(_,v,dt|It,r,x):y))return!1}}return!0}function Bs(e){if(!ue(e)||vc(e))return!1;var t=kt(e)?Pl:Ca;return t.test(Sn(e))}function Wf(e){return le(e)&&Oe(e)==fn}function Bf(e){return le(e)&&Re(e)==qe}function Uf(e){return le(e)&&di(e.length)&&!!j[Oe(e)]}function Us(e){return typeof e=="function"?e:e==null?Ge:typeof e=="object"?O(e)?ks(e[0],e[1]):$s(e):oa(e)}function Zi(e){if(!hr(e))return $l(e);var t=[];for(var n in J(e))Y.call(e,n)&&n!="constructor"&&t.push(n);return t}function Df(e){if(!ue(e))return wc(e);var t=hr(e),n=[];for(var r in e)r=="constructor"&&(t||!Y.call(e,r))||n.push(r);return n}function Xi(e,t){return e<t}function Ds(e,t){var n=-1,r=ze(e)?d(e.length):[];return tn(e,function(i,s,a){r[++n]=t(i,s,a)}),r}function $s(e){var t=fo(e);return t.length==1&&t[0][2]?xu(t[0][0],t[0][1]):function(n){return n===e||Yi(n,e,t)}}function ks(e,t){return ho(e)&&mu(t)?xu(Rt(e),t):function(n){var r=Co(n,e);return r===u&&r===t?So(n,e):fr(t,r,dt|It)}}function Jr(e,t,n,r,i){e!==t&&Gi(t,function(s,a){if(i||(i=new gt),ue(s))$f(e,t,a,n,Jr,r,i);else{var l=r?r(go(e,a),s,a+"",e,t,i):u;l===u&&(l=s),zi(e,a,l)}},Ne)}function $f(e,t,n,r,i,s,a){var l=go(e,n),c=go(t,n),v=a.get(c);if(v){zi(e,n,v);return}var _=s?s(l,c,n+"",e,t,a):u,x=_===u;if(x){var y=O(c),S=!y&&sn(c),E=!y&&!S&&Kn(c);_=c,y||S||E?O(l)?_=l:ce(l)?_=ke(l):S?(x=!1,_=Vs(c,!0)):E?(x=!1,_=js(c,!0)):_=[]:gr(c)||An(c)?(_=l,An(l)?_=Xu(l):(!ue(l)||kt(l))&&(_=_u(c))):x=!1}x&&(a.set(c,_),i(_,c,r,s,a),a.delete(c)),zi(e,n,_)}function zs(e,t){var n=e.length;if(n)return t+=t<0?n:0,$t(t,n)?e[t]:u}function Ns(e,t,n){t.length?t=ie(t,function(s){return O(s)?function(a){return bn(a,s.length===1?s[0]:s)}:s}):t=[Ge];var r=-1;t=ie(t,Ye(T()));var i=Ds(e,function(s,a,l){var c=ie(t,function(v){return v(s)});return{criteria:c,index:++r,value:s}});return cl(i,function(s,a){return Vf(s,a,n)})}function kf(e,t){return Gs(e,t,function(n,r){return So(e,r)})}function Gs(e,t,n){for(var r=-1,i=t.length,s={};++r<i;){var a=t[r],l=bn(e,a);n(l,a)&&cr(s,rn(a,e),l)}return s}function zf(e){return function(t){return bn(t,e)}}function Ji(e,t,n,r){var i=r?fl:Wn,s=-1,a=t.length,l=e;for(e===t&&(t=ke(t)),n&&(l=ie(e,Ye(n)));++s<a;)for(var c=0,v=t[s],_=n?n(v):v;(c=i(l,_,c,r))>-1;)l!==e&&kr.call(l,c,1),kr.call(e,c,1);return e}function Hs(e,t){for(var n=e?t.length:0,r=n-1;n--;){var i=t[n];if(n==r||i!==s){var s=i;$t(i)?kr.call(e,i,1):eo(e,i)}}return e}function Qi(e,t){return e+Gr(Ss()*(t-e+1))}function Nf(e,t,n,r){for(var i=-1,s=me(Nr((t-e)/(n||1)),0),a=d(s);s--;)a[r?s:++i]=e,e+=n;return a}function Vi(e,t){var n="";if(!e||t<1||t>Le)return n;do t%2&&(n+=e),t=Gr(t/2),t&&(e+=e);while(t);return n}function F(e,t){return vo(wu(e,t,Ge),e+"")}function Gf(e){return Es(Yn(e))}function Hf(e,t){var n=Yn(e);return si(n,yn(t,0,n.length))}function cr(e,t,n,r){if(!ue(e))return e;t=rn(t,e);for(var i=-1,s=t.length,a=s-1,l=e;l!=null&&++i<s;){var c=Rt(t[i]),v=n;if(c==="__proto__"||c==="constructor"||c==="prototype")return e;if(i!=a){var _=l[c];v=r?r(_,c,l):u,v===u&&(v=ue(_)?_:$t(t[i+1])?[]:{})}ur(l,c,v),l=l[c]}return e}var qs=Hr?function(e,t){return Hr.set(e,t),e}:Ge,qf=zr?function(e,t){return zr(e,"toString",{configurable:!0,enumerable:!1,value:To(t),writable:!0})}:Ge;function Kf(e){return si(Yn(e))}function lt(e,t,n){var r=-1,i=e.length;t<0&&(t=-t>i?0:i+t),n=n>i?i:n,n<0&&(n+=i),i=t>n?0:n-t>>>0,t>>>=0;for(var s=d(i);++r<i;)s[r]=e[r+t];return s}function Yf(e,t){var n;return tn(e,function(r,i,s){return n=t(r,i,s),!n}),!!n}function Qr(e,t,n){var r=0,i=e==null?r:e.length;if(typeof t=="number"&&t===t&&i<=En){for(;r<i;){var s=r+i>>>1,a=e[s];a!==null&&!Xe(a)&&(n?a<=t:a<t)?r=s+1:i=s}return i}return ji(e,t,Ge,n)}function ji(e,t,n,r){var i=0,s=e==null?0:e.length;if(s===0)return 0;t=n(t);for(var a=t!==t,l=t===null,c=Xe(t),v=t===u;i<s;){var _=Gr((i+s)/2),x=n(e[_]),y=x!==u,S=x===null,E=x===x,P=Xe(x);if(a)var R=r||E;else v?R=E&&(r||y):l?R=E&&y&&(r||!S):c?R=E&&y&&!S&&(r||!P):S||P?R=!1:R=r?x<=t:x<t;R?i=_+1:s=_}return Ee(s,_i)}function Ks(e,t){for(var n=-1,r=e.length,i=0,s=[];++n<r;){var a=e[n],l=t?t(a):a;if(!n||!vt(l,c)){var c=l;s[i++]=a===0?0:a}}return s}function Ys(e){return typeof e=="number"?e:Xe(e)?ne:+e}function Ze(e){if(typeof e=="string")return e;if(O(e))return ie(e,Ze)+"";if(Xe(e))return As?As.call(e):"";var t=e+"";return t=="0"&&1/e==-K?"-0":t}function nn(e,t,n){var r=-1,i=Lr,s=e.length,a=!0,l=[],c=l;if(n)a=!1,i=Ri;else if(s>=oe){var v=t?null:ic(e);if(v)return Mr(v);a=!1,i=tr,c=new wn}else c=t?[]:l;e:for(;++r<s;){var _=e[r],x=t?t(_):_;if(_=n||_!==0?_:0,a&&x===x){for(var y=c.length;y--;)if(c[y]===x)continue e;t&&c.push(x),l.push(_)}else i(c,x,n)||(c!==l&&c.push(x),l.push(_))}return l}function eo(e,t){return t=rn(t,e),e=yu(e,t),e==null||delete e[Rt(ft(t))]}function Zs(e,t,n,r){return cr(e,t,n(bn(e,t)),r)}function Vr(e,t,n,r){for(var i=e.length,s=r?i:-1;(r?s--:++s<i)&&t(e[s],s,e););return n?lt(e,r?0:s,r?s+1:i):lt(e,r?s+1:0,r?i:s)}function Xs(e,t){var n=e;return n instanceof D&&(n=n.value()),Ii(t,function(r,i){return i.func.apply(i.thisArg,Vt([r],i.args))},n)}function to(e,t,n){var r=e.length;if(r<2)return r?nn(e[0]):[];for(var i=-1,s=d(r);++i<r;)for(var a=e[i],l=-1;++l<r;)l!=i&&(s[i]=ar(s[i]||a,e[l],t,n));return nn(Ce(s,1),t,n)}function Js(e,t,n){for(var r=-1,i=e.length,s=t.length,a={};++r<i;){var l=r<s?t[r]:u;n(a,e[r],l)}return a}function no(e){return ce(e)?e:[]}function ro(e){return typeof e=="function"?e:Ge}function rn(e,t){return O(e)?e:ho(e,t)?[e]:Au(H(e))}var Zf=F;function on(e,t,n){var r=e.length;return n=n===u?r:n,!t&&n>=r?e:lt(e,t,n)}var Qs=Fl||function(e){return be.clearTimeout(e)};function Vs(e,t){if(t)return e.slice();var n=e.length,r=xs?xs(n):new e.constructor(n);return e.copy(r),r}function io(e){var t=new e.constructor(e.byteLength);return new Dr(t).set(new Dr(e)),t}function Xf(e,t){var n=t?io(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}function Jf(e){var t=new e.constructor(e.source,Wo.exec(e));return t.lastIndex=e.lastIndex,t}function Qf(e){return sr?J(sr.call(e)):{}}function js(e,t){var n=t?io(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}function eu(e,t){if(e!==t){var n=e!==u,r=e===null,i=e===e,s=Xe(e),a=t!==u,l=t===null,c=t===t,v=Xe(t);if(!l&&!v&&!s&&e>t||s&&a&&c&&!l&&!v||r&&a&&c||!n&&c||!i)return 1;if(!r&&!s&&!v&&e<t||v&&n&&i&&!r&&!s||l&&n&&i||!a&&i||!c)return-1}return 0}function Vf(e,t,n){for(var r=-1,i=e.criteria,s=t.criteria,a=i.length,l=n.length;++r<a;){var c=eu(i[r],s[r]);if(c){if(r>=l)return c;var v=n[r];return c*(v=="desc"?-1:1)}}return e.index-t.index}function tu(e,t,n,r){for(var i=-1,s=e.length,a=n.length,l=-1,c=t.length,v=me(s-a,0),_=d(c+v),x=!r;++l<c;)_[l]=t[l];for(;++i<a;)(x||i<s)&&(_[n[i]]=e[i]);for(;v--;)_[l++]=e[i++];return _}function nu(e,t,n,r){for(var i=-1,s=e.length,a=-1,l=n.length,c=-1,v=t.length,_=me(s-l,0),x=d(_+v),y=!r;++i<_;)x[i]=e[i];for(var S=i;++c<v;)x[S+c]=t[c];for(;++a<l;)(y||i<s)&&(x[S+n[a]]=e[i++]);return x}function ke(e,t){var n=-1,r=e.length;for(t||(t=d(r));++n<r;)t[n]=e[n];return t}function Et(e,t,n,r){var i=!n;n||(n={});for(var s=-1,a=t.length;++s<a;){var l=t[s],c=r?r(n[l],e[l],l,n,e):u;c===u&&(c=e[l]),i?Bt(n,l,c):ur(n,l,c)}return n}function jf(e,t){return Et(e,co(e),t)}function ec(e,t){return Et(e,gu(e),t)}function jr(e,t){return function(n,r){var i=O(n)?il:bf,s=t?t():{};return i(n,e,T(r,2),s)}}function Gn(e){return F(function(t,n){var r=-1,i=n.length,s=i>1?n[i-1]:u,a=i>2?n[2]:u;for(s=e.length>3&&typeof s=="function"?(i--,s):u,a&&Me(n[0],n[1],a)&&(s=i<3?u:s,i=1),t=J(t);++r<i;){var l=n[r];l&&e(t,l,r,s)}return t})}function ru(e,t){return function(n,r){if(n==null)return n;if(!ze(n))return e(n,r);for(var i=n.length,s=t?i:-1,a=J(n);(t?s--:++s<i)&&r(a[s],s,a)!==!1;);return n}}function iu(e){return function(t,n,r){for(var i=-1,s=J(t),a=r(t),l=a.length;l--;){var c=a[e?l:++i];if(n(s[c],c,s)===!1)break}return t}}function tc(e,t,n){var r=t&Ae,i=dr(e);function s(){var a=this&&this!==be&&this instanceof s?i:e;return a.apply(r?n:this,arguments)}return s}function ou(e){return function(t){t=H(t);var n=Bn(t)?pt(t):u,r=n?n[0]:t.charAt(0),i=n?on(n,1).join(""):t.slice(1);return r[e]()+i}}function Hn(e){return function(t){return Ii(ra(na(t).replace(Ha,"")),e,"")}}function dr(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=Nn(e.prototype),r=e.apply(n,t);return ue(r)?r:n}}function nc(e,t,n){var r=dr(e);function i(){for(var s=arguments.length,a=d(s),l=s,c=qn(i);l--;)a[l]=arguments[l];var v=s<3&&a[0]!==c&&a[s-1]!==c?[]:jt(a,c);if(s-=v.length,s<n)return fu(e,t,ei,i.placeholder,u,a,v,u,u,n-s);var _=this&&this!==be&&this instanceof i?r:e;return Ke(_,this,a)}return i}function su(e){return function(t,n,r){var i=J(t);if(!ze(t)){var s=T(n,3);t=we(t),n=function(l){return s(i[l],l,i)}}var a=e(t,n,r);return a>-1?i[s?t[a]:a]:u}}function uu(e){return Dt(function(t){var n=t.length,r=n,i=ut.prototype.thru;for(e&&t.reverse();r--;){var s=t[r];if(typeof s!="function")throw new st(se);if(i&&!a&&ii(s)=="wrapper")var a=new ut([],!0)}for(r=a?r:n;++r<n;){s=t[r];var l=ii(s),c=l=="wrapper"?lo(s):u;c&&po(c[0])&&c[1]==(et|Ie|Be|Lt)&&!c[4].length&&c[9]==1?a=a[ii(c[0])].apply(a,c[3]):a=s.length==1&&po(s)?a[l]():a.thru(s)}return function(){var v=arguments,_=v[0];if(a&&v.length==1&&O(_))return a.plant(_).value();for(var x=0,y=n?t[x].apply(this,v):_;++x<n;)y=t[x].call(this,y);return y}})}function ei(e,t,n,r,i,s,a,l,c,v){var _=t&et,x=t&Ae,y=t&je,S=t&(Ie|bt),E=t&Tn,P=y?u:dr(e);function R(){for(var U=arguments.length,$=d(U),Je=U;Je--;)$[Je]=arguments[Je];if(S)var Pe=qn(R),Qe=hl($,Pe);if(r&&($=tu($,r,i,S)),s&&($=nu($,s,a,S)),U-=Qe,S&&U<v){var de=jt($,Pe);return fu(e,t,ei,R.placeholder,n,$,de,l,c,v-U)}var _t=x?n:this,Nt=y?_t[e]:e;return U=$.length,l?$=bc($,l):E&&U>1&&$.reverse(),_&&c<U&&($.length=c),this&&this!==be&&this instanceof R&&(Nt=P||dr(Nt)),Nt.apply(_t,$)}return R}function au(e,t){return function(n,r){return Lf(n,e,t(r),{})}}function ti(e,t){return function(n,r){var i;if(n===u&&r===u)return t;if(n!==u&&(i=n),r!==u){if(i===u)return r;typeof n=="string"||typeof r=="string"?(n=Ze(n),r=Ze(r)):(n=Ys(n),r=Ys(r)),i=e(n,r)}return i}}function oo(e){return Dt(function(t){return t=ie(t,Ye(T())),F(function(n){var r=this;return e(t,function(i){return Ke(i,r,n)})})})}function ni(e,t){t=t===u?" ":Ze(t);var n=t.length;if(n<2)return n?Vi(t,e):t;var r=Vi(t,Nr(e/Un(t)));return Bn(t)?on(pt(r),0,e).join(""):r.slice(0,e)}function rc(e,t,n,r){var i=t&Ae,s=dr(e);function a(){for(var l=-1,c=arguments.length,v=-1,_=r.length,x=d(_+c),y=this&&this!==be&&this instanceof a?s:e;++v<_;)x[v]=r[v];for(;c--;)x[v++]=arguments[++l];return Ke(y,i?n:this,x)}return a}function lu(e){return function(t,n,r){return r&&typeof r!="number"&&Me(t,n,r)&&(n=r=u),t=zt(t),n===u?(n=t,t=0):n=zt(n),r=r===u?t<n?1:-1:zt(r),Nf(t,n,r,e)}}function ri(e){return function(t,n){return typeof t=="string"&&typeof n=="string"||(t=ct(t),n=ct(n)),e(t,n)}}function fu(e,t,n,r,i,s,a,l,c,v){var _=t&Ie,x=_?a:u,y=_?u:a,S=_?s:u,E=_?u:s;t|=_?Be:Ct,t&=~(_?Ct:Be),t&te||(t&=-4);var P=[e,t,i,S,x,E,y,l,c,v],R=n.apply(u,P);return po(e)&&bu(R,P),R.placeholder=r,Cu(R,e,t)}function so(e){var t=_e[e];return function(n,r){if(n=ct(n),r=r==null?0:Ee(M(r),292),r&&Cs(n)){var i=(H(n)+"e").split("e"),s=t(i[0]+"e"+(+i[1]+r));return i=(H(s)+"e").split("e"),+(i[0]+"e"+(+i[1]-r))}return t(n)}}var ic=kn&&1/Mr(new kn([,-0]))[1]==K?function(e){return new kn(e)}:Io;function cu(e){return function(t){var n=Re(t);return n==He?Bi(t):n==qe?wl(t):dl(t,e(t))}}function Ut(e,t,n,r,i,s,a,l){var c=t&je;if(!c&&typeof e!="function")throw new st(se);var v=r?r.length:0;if(v||(t&=-97,r=i=u),a=a===u?a:me(M(a),0),l=l===u?l:M(l),v-=i?i.length:0,t&Ct){var _=r,x=i;r=i=u}var y=c?u:lo(e),S=[e,t,n,r,i,_,x,s,a,l];if(y&&xc(S,y),e=S[0],t=S[1],n=S[2],r=S[3],i=S[4],l=S[9]=S[9]===u?c?0:e.length:me(S[9]-v,0),!l&&t&(Ie|bt)&&(t&=-25),!t||t==Ae)var E=tc(e,t,n);else t==Ie||t==bt?E=nc(e,t,l):(t==Be||t==(Ae|Be))&&!i.length?E=rc(e,t,n,r):E=ei.apply(u,S);var P=y?qs:bu;return Cu(P(E,S),e,t)}function du(e,t,n,r){return e===u||vt(e,$n[n])&&!Y.call(r,n)?t:e}function hu(e,t,n,r,i,s){return ue(e)&&ue(t)&&(s.set(t,e),Jr(e,t,u,hu,s),s.delete(t)),e}function oc(e){return gr(e)?u:e}function pu(e,t,n,r,i,s){var a=n&dt,l=e.length,c=t.length;if(l!=c&&!(a&&c>l))return!1;var v=s.get(e),_=s.get(t);if(v&&_)return v==t&&_==e;var x=-1,y=!0,S=n&It?new wn:u;for(s.set(e,t),s.set(t,e);++x<l;){var E=e[x],P=t[x];if(r)var R=a?r(P,E,x,t,e,s):r(E,P,x,e,t,s);if(R!==u){if(R)continue;y=!1;break}if(S){if(!Li(t,function(U,$){if(!tr(S,$)&&(E===U||i(E,U,n,r,s)))return S.push($)})){y=!1;break}}else if(!(E===P||i(E,P,n,r,s))){y=!1;break}}return s.delete(e),s.delete(t),y}function sc(e,t,n,r,i,s,a){switch(n){case Mt:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case Xt:return!(e.byteLength!=t.byteLength||!s(new Dr(e),new Dr(t)));case St:case rt:case Yt:return vt(+e,+t);case $e:return e.name==t.name&&e.message==t.message;case fn:case cn:return e==t+"";case He:var l=Bi;case qe:var c=r&dt;if(l||(l=Mr),e.size!=t.size&&!c)return!1;var v=a.get(e);if(v)return v==t;r|=It,a.set(e,t);var _=pu(l(e),l(t),r,i,s,a);return a.delete(e),_;case Rn:if(sr)return sr.call(e)==sr.call(t)}return!1}function uc(e,t,n,r,i,s){var a=n&dt,l=uo(e),c=l.length,v=uo(t),_=v.length;if(c!=_&&!a)return!1;for(var x=c;x--;){var y=l[x];if(!(a?y in t:Y.call(t,y)))return!1}var S=s.get(e),E=s.get(t);if(S&&E)return S==t&&E==e;var P=!0;s.set(e,t),s.set(t,e);for(var R=a;++x<c;){y=l[x];var U=e[y],$=t[y];if(r)var Je=a?r($,U,y,t,e,s):r(U,$,y,e,t,s);if(!(Je===u?U===$||i(U,$,n,r,s):Je)){P=!1;break}R||(R=y=="constructor")}if(P&&!R){var Pe=e.constructor,Qe=t.constructor;Pe!=Qe&&"constructor"in e&&"constructor"in t&&!(typeof Pe=="function"&&Pe instanceof Pe&&typeof Qe=="function"&&Qe instanceof Qe)&&(P=!1)}return s.delete(e),s.delete(t),P}function Dt(e){return vo(wu(e,u,Iu),e+"")}function uo(e){return Fs(e,we,co)}function ao(e){return Fs(e,Ne,gu)}var lo=Hr?function(e){return Hr.get(e)}:Io;function ii(e){for(var t=e.name+"",n=zn[t],r=Y.call(zn,t)?n.length:0;r--;){var i=n[r],s=i.func;if(s==null||s==e)return i.name}return t}function qn(e){var t=Y.call(o,"placeholder")?o:e;return t.placeholder}function T(){var e=o.iteratee||Eo;return e=e===Eo?Us:e,arguments.length?e(arguments[0],arguments[1]):e}function oi(e,t){var n=e.__data__;return gc(t)?n[typeof t=="string"?"string":"hash"]:n.map}function fo(e){for(var t=we(e),n=t.length;n--;){var r=t[n],i=e[r];t[n]=[r,i,mu(i)]}return t}function Cn(e,t){var n=_l(e,t);return Bs(n)?n:u}function ac(e){var t=Y.call(e,mn),n=e[mn];try{e[mn]=u;var r=!0}catch{}var i=Br.call(e);return r&&(t?e[mn]=n:delete e[mn]),i}var co=Di?function(e){return e==null?[]:(e=J(e),Qt(Di(e),function(t){return ys.call(e,t)}))}:Lo,gu=Di?function(e){for(var t=[];e;)Vt(t,co(e)),e=$r(e);return t}:Lo,Re=Oe;($i&&Re(new $i(new ArrayBuffer(1)))!=Mt||rr&&Re(new rr)!=He||ki&&Re(ki.resolve())!=wr||kn&&Re(new kn)!=qe||ir&&Re(new ir)!=Zt)&&(Re=function(e){var t=Oe(e),n=t==ht?e.constructor:u,r=n?Sn(n):"";if(r)switch(r){case Gl:return Mt;case Hl:return He;case ql:return wr;case Kl:return qe;case Yl:return Zt}return t});function lc(e,t,n){for(var r=-1,i=n.length;++r<i;){var s=n[r],a=s.size;switch(s.type){case"drop":e+=a;break;case"dropRight":t-=a;break;case"take":t=Ee(t,e+a);break;case"takeRight":e=me(e,t-a);break}}return{start:e,end:t}}function fc(e){var t=e.match(xi);return t?t[1].split(wi):[]}function vu(e,t,n){t=rn(t,e);for(var r=-1,i=t.length,s=!1;++r<i;){var a=Rt(t[r]);if(!(s=e!=null&&n(e,a)))break;e=e[a]}return s||++r!=i?s:(i=e==null?0:e.length,!!i&&di(i)&&$t(a,i)&&(O(e)||An(e)))}function cc(e){var t=e.length,n=new e.constructor(t);return t&&typeof e[0]=="string"&&Y.call(e,"index")&&(n.index=e.index,n.input=e.input),n}function _u(e){return typeof e.constructor=="function"&&!hr(e)?Nn($r(e)):{}}function dc(e,t,n){var r=e.constructor;switch(t){case Xt:return io(e);case St:case rt:return new r(+e);case Mt:return Xf(e,n);case Jn:case In:case Ln:case Qn:case dn:case hn:case pn:case Pt:case On:return js(e,n);case He:return new r;case Yt:case cn:return new r(e);case fn:return Jf(e);case qe:return new r;case Rn:return Qf(e)}}function hc(e,t){var n=t.length;if(!n)return e;var r=n-1;return t[r]=(n>1?"& ":"")+t[r],t=t.join(n>2?", ":" "),e.replace(vn,`{
/* [wrapped with `+t+`] */
`)}function pc(e){return O(e)||An(e)||!!(bs&&e&&e[bs])}function $t(e,t){var n=typeof e;return t=t??Le,!!t&&(n=="number"||n!="symbol"&&Aa.test(e))&&e>-1&&e%1==0&&e<t}function Me(e,t,n){if(!ue(n))return!1;var r=typeof t;return(r=="number"?ze(n)&&$t(t,n.length):r=="string"&&t in n)?vt(n[t],e):!1}function ho(e,t){if(O(e))return!1;var n=typeof e;return n=="number"||n=="symbol"||n=="boolean"||e==null||Xe(e)?!0:Fo.test(e)||!er.test(e)||t!=null&&e in J(t)}function gc(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}function po(e){var t=ii(e),n=o[t];if(typeof n!="function"||!(t in D.prototype))return!1;if(e===n)return!0;var r=lo(n);return!!r&&e===r[0]}function vc(e){return!!ms&&ms in e}var _c=Fr?kt:Oo;function hr(e){var t=e&&e.constructor,n=typeof t=="function"&&t.prototype||$n;return e===n}function mu(e){return e===e&&!ue(e)}function xu(e,t){return function(n){return n==null?!1:n[e]===t&&(t!==u||e in J(n))}}function mc(e){var t=fi(e,function(r){return n.size===k&&n.clear(),r}),n=t.cache;return t}function xc(e,t){var n=e[1],r=t[1],i=n|r,s=i<(Ae|je|et),a=r==et&&n==Ie||r==et&&n==Lt&&e[7].length<=t[8]||r==(et|Lt)&&t[7].length<=t[8]&&n==Ie;if(!(s||a))return e;r&Ae&&(e[2]=t[2],i|=n&Ae?0:te);var l=t[3];if(l){var c=e[3];e[3]=c?tu(c,l,t[4]):l,e[4]=c?jt(e[3],Z):t[4]}return l=t[5],l&&(c=e[5],e[5]=c?nu(c,l,t[6]):l,e[6]=c?jt(e[5],Z):t[6]),l=t[7],l&&(e[7]=l),r&et&&(e[8]=e[8]==null?t[8]:Ee(e[8],t[8])),e[9]==null&&(e[9]=t[9]),e[0]=t[0],e[1]=i,e}function wc(e){var t=[];if(e!=null)for(var n in J(e))t.push(n);return t}function yc(e){return Br.call(e)}function wu(e,t,n){return t=me(t===u?e.length-1:t,0),function(){for(var r=arguments,i=-1,s=me(r.length-t,0),a=d(s);++i<s;)a[i]=r[t+i];i=-1;for(var l=d(t+1);++i<t;)l[i]=r[i];return l[t]=n(a),Ke(e,this,l)}}function yu(e,t){return t.length<2?e:bn(e,lt(t,0,-1))}function bc(e,t){for(var n=e.length,r=Ee(t.length,n),i=ke(e);r--;){var s=t[r];e[r]=$t(s,n)?i[s]:u}return e}function go(e,t){if(!(t==="constructor"&&typeof e[t]=="function")&&t!="__proto__")return e[t]}var bu=Su(qs),pr=Bl||function(e,t){return be.setTimeout(e,t)},vo=Su(qf);function Cu(e,t,n){var r=t+"";return vo(e,hc(r,Cc(fc(r),n)))}function Su(e){var t=0,n=0;return function(){var r=kl(),i=tt-(r-n);if(n=r,i>0){if(++t>=Ue)return arguments[0]}else t=0;return e.apply(u,arguments)}}function si(e,t){var n=-1,r=e.length,i=r-1;for(t=t===u?r:t;++n<t;){var s=Qi(n,i),a=e[s];e[s]=e[n],e[n]=a}return e.length=t,e}var Au=mc(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(Tr,function(n,r,i,s){t.push(i?s.replace(xa,"$1"):r||n)}),t});function Rt(e){if(typeof e=="string"||Xe(e))return e;var t=e+"";return t=="0"&&1/e==-K?"-0":t}function Sn(e){if(e!=null){try{return Wr.call(e)}catch{}try{return e+""}catch{}}return""}function Cc(e,t){return ot(Te,function(n){var r="_."+n[0];t&n[1]&&!Lr(e,r)&&e.push(r)}),e.sort()}function Tu(e){if(e instanceof D)return e.clone();var t=new ut(e.__wrapped__,e.__chain__);return t.__actions__=ke(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}function Sc(e,t,n){(n?Me(e,t,n):t===u)?t=1:t=me(M(t),0);var r=e==null?0:e.length;if(!r||t<1)return[];for(var i=0,s=0,a=d(Nr(r/t));i<r;)a[s++]=lt(e,i,i+=t);return a}function Ac(e){for(var t=-1,n=e==null?0:e.length,r=0,i=[];++t<n;){var s=e[t];s&&(i[r++]=s)}return i}function Tc(){var e=arguments.length;if(!e)return[];for(var t=d(e-1),n=arguments[0],r=e;r--;)t[r-1]=arguments[r];return Vt(O(n)?ke(n):[n],Ce(t,1))}var Ec=F(function(e,t){return ce(e)?ar(e,Ce(t,1,ce,!0)):[]}),Rc=F(function(e,t){var n=ft(t);return ce(n)&&(n=u),ce(e)?ar(e,Ce(t,1,ce,!0),T(n,2)):[]}),Ic=F(function(e,t){var n=ft(t);return ce(n)&&(n=u),ce(e)?ar(e,Ce(t,1,ce,!0),u,n):[]});function Lc(e,t,n){var r=e==null?0:e.length;return r?(t=n||t===u?1:M(t),lt(e,t<0?0:t,r)):[]}function Oc(e,t,n){var r=e==null?0:e.length;return r?(t=n||t===u?1:M(t),t=r-t,lt(e,0,t<0?0:t)):[]}function Mc(e,t){return e&&e.length?Vr(e,T(t,3),!0,!0):[]}function Pc(e,t){return e&&e.length?Vr(e,T(t,3),!0):[]}function Fc(e,t,n,r){var i=e==null?0:e.length;return i?(n&&typeof n!="number"&&Me(e,t,n)&&(n=0,r=i),Tf(e,t,n,r)):[]}function Eu(e,t,n){var r=e==null?0:e.length;if(!r)return-1;var i=n==null?0:M(n);return i<0&&(i=me(r+i,0)),Or(e,T(t,3),i)}function Ru(e,t,n){var r=e==null?0:e.length;if(!r)return-1;var i=r-1;return n!==u&&(i=M(n),i=n<0?me(r+i,0):Ee(i,r-1)),Or(e,T(t,3),i,!0)}function Iu(e){var t=e==null?0:e.length;return t?Ce(e,1):[]}function Wc(e){var t=e==null?0:e.length;return t?Ce(e,K):[]}function Bc(e,t){var n=e==null?0:e.length;return n?(t=t===u?1:M(t),Ce(e,t)):[]}function Uc(e){for(var t=-1,n=e==null?0:e.length,r={};++t<n;){var i=e[t];r[i[0]]=i[1]}return r}function Lu(e){return e&&e.length?e[0]:u}function Dc(e,t,n){var r=e==null?0:e.length;if(!r)return-1;var i=n==null?0:M(n);return i<0&&(i=me(r+i,0)),Wn(e,t,i)}function $c(e){var t=e==null?0:e.length;return t?lt(e,0,-1):[]}var kc=F(function(e){var t=ie(e,no);return t.length&&t[0]===e[0]?Ki(t):[]}),zc=F(function(e){var t=ft(e),n=ie(e,no);return t===ft(n)?t=u:n.pop(),n.length&&n[0]===e[0]?Ki(n,T(t,2)):[]}),Nc=F(function(e){var t=ft(e),n=ie(e,no);return t=typeof t=="function"?t:u,t&&n.pop(),n.length&&n[0]===e[0]?Ki(n,u,t):[]});function Gc(e,t){return e==null?"":Dl.call(e,t)}function ft(e){var t=e==null?0:e.length;return t?e[t-1]:u}function Hc(e,t,n){var r=e==null?0:e.length;if(!r)return-1;var i=r;return n!==u&&(i=M(n),i=i<0?me(r+i,0):Ee(i,r-1)),t===t?bl(e,t,i):Or(e,fs,i,!0)}function qc(e,t){return e&&e.length?zs(e,M(t)):u}var Kc=F(Ou);function Ou(e,t){return e&&e.length&&t&&t.length?Ji(e,t):e}function Yc(e,t,n){return e&&e.length&&t&&t.length?Ji(e,t,T(n,2)):e}function Zc(e,t,n){return e&&e.length&&t&&t.length?Ji(e,t,u,n):e}var Xc=Dt(function(e,t){var n=e==null?0:e.length,r=Ni(e,t);return Hs(e,ie(t,function(i){return $t(i,n)?+i:i}).sort(eu)),r});function Jc(e,t){var n=[];if(!(e&&e.length))return n;var r=-1,i=[],s=e.length;for(t=T(t,3);++r<s;){var a=e[r];t(a,r,e)&&(n.push(a),i.push(r))}return Hs(e,i),n}function _o(e){return e==null?e:Nl.call(e)}function Qc(e,t,n){var r=e==null?0:e.length;return r?(n&&typeof n!="number"&&Me(e,t,n)?(t=0,n=r):(t=t==null?0:M(t),n=n===u?r:M(n)),lt(e,t,n)):[]}function Vc(e,t){return Qr(e,t)}function jc(e,t,n){return ji(e,t,T(n,2))}function ed(e,t){var n=e==null?0:e.length;if(n){var r=Qr(e,t);if(r<n&&vt(e[r],t))return r}return-1}function td(e,t){return Qr(e,t,!0)}function nd(e,t,n){return ji(e,t,T(n,2),!0)}function rd(e,t){var n=e==null?0:e.length;if(n){var r=Qr(e,t,!0)-1;if(vt(e[r],t))return r}return-1}function id(e){return e&&e.length?Ks(e):[]}function od(e,t){return e&&e.length?Ks(e,T(t,2)):[]}function sd(e){var t=e==null?0:e.length;return t?lt(e,1,t):[]}function ud(e,t,n){return e&&e.length?(t=n||t===u?1:M(t),lt(e,0,t<0?0:t)):[]}function ad(e,t,n){var r=e==null?0:e.length;return r?(t=n||t===u?1:M(t),t=r-t,lt(e,t<0?0:t,r)):[]}function ld(e,t){return e&&e.length?Vr(e,T(t,3),!1,!0):[]}function fd(e,t){return e&&e.length?Vr(e,T(t,3)):[]}var cd=F(function(e){return nn(Ce(e,1,ce,!0))}),dd=F(function(e){var t=ft(e);return ce(t)&&(t=u),nn(Ce(e,1,ce,!0),T(t,2))}),hd=F(function(e){var t=ft(e);return t=typeof t=="function"?t:u,nn(Ce(e,1,ce,!0),u,t)});function pd(e){return e&&e.length?nn(e):[]}function gd(e,t){return e&&e.length?nn(e,T(t,2)):[]}function vd(e,t){return t=typeof t=="function"?t:u,e&&e.length?nn(e,u,t):[]}function mo(e){if(!(e&&e.length))return[];var t=0;return e=Qt(e,function(n){if(ce(n))return t=me(n.length,t),!0}),Fi(t,function(n){return ie(e,Oi(n))})}function Mu(e,t){if(!(e&&e.length))return[];var n=mo(e);return t==null?n:ie(n,function(r){return Ke(t,u,r)})}var _d=F(function(e,t){return ce(e)?ar(e,t):[]}),md=F(function(e){return to(Qt(e,ce))}),xd=F(function(e){var t=ft(e);return ce(t)&&(t=u),to(Qt(e,ce),T(t,2))}),wd=F(function(e){var t=ft(e);return t=typeof t=="function"?t:u,to(Qt(e,ce),u,t)}),yd=F(mo);function bd(e,t){return Js(e||[],t||[],ur)}function Cd(e,t){return Js(e||[],t||[],cr)}var Sd=F(function(e){var t=e.length,n=t>1?e[t-1]:u;return n=typeof n=="function"?(e.pop(),n):u,Mu(e,n)});function Pu(e){var t=o(e);return t.__chain__=!0,t}function Ad(e,t){return t(e),e}function ui(e,t){return t(e)}var Td=Dt(function(e){var t=e.length,n=t?e[0]:0,r=this.__wrapped__,i=function(s){return Ni(s,e)};return t>1||this.__actions__.length||!(r instanceof D)||!$t(n)?this.thru(i):(r=r.slice(n,+n+(t?1:0)),r.__actions__.push({func:ui,args:[i],thisArg:u}),new ut(r,this.__chain__).thru(function(s){return t&&!s.length&&s.push(u),s}))});function Ed(){return Pu(this)}function Rd(){return new ut(this.value(),this.__chain__)}function Id(){this.__values__===u&&(this.__values__=Yu(this.value()));var e=this.__index__>=this.__values__.length,t=e?u:this.__values__[this.__index__++];return{done:e,value:t}}function Ld(){return this}function Od(e){for(var t,n=this;n instanceof Kr;){var r=Tu(n);r.__index__=0,r.__values__=u,t?i.__wrapped__=r:t=r;var i=r;n=n.__wrapped__}return i.__wrapped__=e,t}function Md(){var e=this.__wrapped__;if(e instanceof D){var t=e;return this.__actions__.length&&(t=new D(this)),t=t.reverse(),t.__actions__.push({func:ui,args:[_o],thisArg:u}),new ut(t,this.__chain__)}return this.thru(_o)}function Pd(){return Xs(this.__wrapped__,this.__actions__)}var Fd=jr(function(e,t,n){Y.call(e,n)?++e[n]:Bt(e,n,1)});function Wd(e,t,n){var r=O(e)?as:Af;return n&&Me(e,t,n)&&(t=u),r(e,T(t,3))}function Bd(e,t){var n=O(e)?Qt:Ms;return n(e,T(t,3))}var Ud=su(Eu),Dd=su(Ru);function $d(e,t){return Ce(ai(e,t),1)}function kd(e,t){return Ce(ai(e,t),K)}function zd(e,t,n){return n=n===u?1:M(n),Ce(ai(e,t),n)}function Fu(e,t){var n=O(e)?ot:tn;return n(e,T(t,3))}function Wu(e,t){var n=O(e)?ol:Os;return n(e,T(t,3))}var Nd=jr(function(e,t,n){Y.call(e,n)?e[n].push(t):Bt(e,n,[t])});function Gd(e,t,n,r){e=ze(e)?e:Yn(e),n=n&&!r?M(n):0;var i=e.length;return n<0&&(n=me(i+n,0)),hi(e)?n<=i&&e.indexOf(t,n)>-1:!!i&&Wn(e,t,n)>-1}var Hd=F(function(e,t,n){var r=-1,i=typeof t=="function",s=ze(e)?d(e.length):[];return tn(e,function(a){s[++r]=i?Ke(t,a,n):lr(a,t,n)}),s}),qd=jr(function(e,t,n){Bt(e,n,t)});function ai(e,t){var n=O(e)?ie:Ds;return n(e,T(t,3))}function Kd(e,t,n,r){return e==null?[]:(O(t)||(t=t==null?[]:[t]),n=r?u:n,O(n)||(n=n==null?[]:[n]),Ns(e,t,n))}var Yd=jr(function(e,t,n){e[n?0:1].push(t)},function(){return[[],[]]});function Zd(e,t,n){var r=O(e)?Ii:ds,i=arguments.length<3;return r(e,T(t,4),n,i,tn)}function Xd(e,t,n){var r=O(e)?sl:ds,i=arguments.length<3;return r(e,T(t,4),n,i,Os)}function Jd(e,t){var n=O(e)?Qt:Ms;return n(e,ci(T(t,3)))}function Qd(e){var t=O(e)?Es:Gf;return t(e)}function Vd(e,t,n){(n?Me(e,t,n):t===u)?t=1:t=M(t);var r=O(e)?wf:Hf;return r(e,t)}function jd(e){var t=O(e)?yf:Kf;return t(e)}function eh(e){if(e==null)return 0;if(ze(e))return hi(e)?Un(e):e.length;var t=Re(e);return t==He||t==qe?e.size:Zi(e).length}function th(e,t,n){var r=O(e)?Li:Yf;return n&&Me(e,t,n)&&(t=u),r(e,T(t,3))}var nh=F(function(e,t){if(e==null)return[];var n=t.length;return n>1&&Me(e,t[0],t[1])?t=[]:n>2&&Me(t[0],t[1],t[2])&&(t=[t[0]]),Ns(e,Ce(t,1),[])}),li=Wl||function(){return be.Date.now()};function rh(e,t){if(typeof t!="function")throw new st(se);return e=M(e),function(){if(--e<1)return t.apply(this,arguments)}}function Bu(e,t,n){return t=n?u:t,t=e&&t==null?e.length:t,Ut(e,et,u,u,u,u,t)}function Uu(e,t){var n;if(typeof t!="function")throw new st(se);return e=M(e),function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=u),n}}var xo=F(function(e,t,n){var r=Ae;if(n.length){var i=jt(n,qn(xo));r|=Be}return Ut(e,r,t,n,i)}),Du=F(function(e,t,n){var r=Ae|je;if(n.length){var i=jt(n,qn(Du));r|=Be}return Ut(t,r,e,n,i)});function $u(e,t,n){t=n?u:t;var r=Ut(e,Ie,u,u,u,u,u,t);return r.placeholder=$u.placeholder,r}function ku(e,t,n){t=n?u:t;var r=Ut(e,bt,u,u,u,u,u,t);return r.placeholder=ku.placeholder,r}function zu(e,t,n){var r,i,s,a,l,c,v=0,_=!1,x=!1,y=!0;if(typeof e!="function")throw new st(se);t=ct(t)||0,ue(n)&&(_=!!n.leading,x="maxWait"in n,s=x?me(ct(n.maxWait)||0,t):s,y="trailing"in n?!!n.trailing:y);function S(de){var _t=r,Nt=i;return r=i=u,v=de,a=e.apply(Nt,_t),a}function E(de){return v=de,l=pr(U,t),_?S(de):a}function P(de){var _t=de-c,Nt=de-v,sa=t-_t;return x?Ee(sa,s-Nt):sa}function R(de){var _t=de-c,Nt=de-v;return c===u||_t>=t||_t<0||x&&Nt>=s}function U(){var de=li();if(R(de))return $(de);l=pr(U,P(de))}function $(de){return l=u,y&&r?S(de):(r=i=u,a)}function Je(){l!==u&&Qs(l),v=0,r=c=i=l=u}function Pe(){return l===u?a:$(li())}function Qe(){var de=li(),_t=R(de);if(r=arguments,i=this,c=de,_t){if(l===u)return E(c);if(x)return Qs(l),l=pr(U,t),S(c)}return l===u&&(l=pr(U,t)),a}return Qe.cancel=Je,Qe.flush=Pe,Qe}var ih=F(function(e,t){return Ls(e,1,t)}),oh=F(function(e,t,n){return Ls(e,ct(t)||0,n)});function sh(e){return Ut(e,Tn)}function fi(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new st(se);var n=function(){var r=arguments,i=t?t.apply(this,r):r[0],s=n.cache;if(s.has(i))return s.get(i);var a=e.apply(this,r);return n.cache=s.set(i,a)||s,a};return n.cache=new(fi.Cache||Wt),n}fi.Cache=Wt;function ci(e){if(typeof e!="function")throw new st(se);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}function uh(e){return Uu(2,e)}var ah=Zf(function(e,t){t=t.length==1&&O(t[0])?ie(t[0],Ye(T())):ie(Ce(t,1),Ye(T()));var n=t.length;return F(function(r){for(var i=-1,s=Ee(r.length,n);++i<s;)r[i]=t[i].call(this,r[i]);return Ke(e,this,r)})}),wo=F(function(e,t){var n=jt(t,qn(wo));return Ut(e,Be,u,t,n)}),Nu=F(function(e,t){var n=jt(t,qn(Nu));return Ut(e,Ct,u,t,n)}),lh=Dt(function(e,t){return Ut(e,Lt,u,u,u,t)});function fh(e,t){if(typeof e!="function")throw new st(se);return t=t===u?t:M(t),F(e,t)}function ch(e,t){if(typeof e!="function")throw new st(se);return t=t==null?0:me(M(t),0),F(function(n){var r=n[t],i=on(n,0,t);return r&&Vt(i,r),Ke(e,this,i)})}function dh(e,t,n){var r=!0,i=!0;if(typeof e!="function")throw new st(se);return ue(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),zu(e,t,{leading:r,maxWait:t,trailing:i})}function hh(e){return Bu(e,1)}function ph(e,t){return wo(ro(t),e)}function gh(){if(!arguments.length)return[];var e=arguments[0];return O(e)?e:[e]}function vh(e){return at(e,xe)}function _h(e,t){return t=typeof t=="function"?t:u,at(e,xe,t)}function mh(e){return at(e,W|xe)}function xh(e,t){return t=typeof t=="function"?t:u,at(e,W|xe,t)}function wh(e,t){return t==null||Is(e,t,we(t))}function vt(e,t){return e===t||e!==e&&t!==t}var yh=ri(qi),bh=ri(function(e,t){return e>=t}),An=Ws((function(){return arguments})())?Ws:function(e){return le(e)&&Y.call(e,"callee")&&!ys.call(e,"callee")},O=d.isArray,Ch=ns?Ye(ns):Of;function ze(e){return e!=null&&di(e.length)&&!kt(e)}function ce(e){return le(e)&&ze(e)}function Sh(e){return e===!0||e===!1||le(e)&&Oe(e)==St}var sn=Ul||Oo,Ah=rs?Ye(rs):Mf;function Th(e){return le(e)&&e.nodeType===1&&!gr(e)}function Eh(e){if(e==null)return!0;if(ze(e)&&(O(e)||typeof e=="string"||typeof e.splice=="function"||sn(e)||Kn(e)||An(e)))return!e.length;var t=Re(e);if(t==He||t==qe)return!e.size;if(hr(e))return!Zi(e).length;for(var n in e)if(Y.call(e,n))return!1;return!0}function Rh(e,t){return fr(e,t)}function Ih(e,t,n){n=typeof n=="function"?n:u;var r=n?n(e,t):u;return r===u?fr(e,t,u,n):!!r}function yo(e){if(!le(e))return!1;var t=Oe(e);return t==$e||t==ln||typeof e.message=="string"&&typeof e.name=="string"&&!gr(e)}function Lh(e){return typeof e=="number"&&Cs(e)}function kt(e){if(!ue(e))return!1;var t=Oe(e);return t==Xn||t==Ot||t==Zn||t==yr}function Gu(e){return typeof e=="number"&&e==M(e)}function di(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=Le}function ue(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}function le(e){return e!=null&&typeof e=="object"}var Hu=is?Ye(is):Ff;function Oh(e,t){return e===t||Yi(e,t,fo(t))}function Mh(e,t,n){return n=typeof n=="function"?n:u,Yi(e,t,fo(t),n)}function Ph(e){return qu(e)&&e!=+e}function Fh(e){if(_c(e))throw new L(We);return Bs(e)}function Wh(e){return e===null}function Bh(e){return e==null}function qu(e){return typeof e=="number"||le(e)&&Oe(e)==Yt}function gr(e){if(!le(e)||Oe(e)!=ht)return!1;var t=$r(e);if(t===null)return!0;var n=Y.call(t,"constructor")&&t.constructor;return typeof n=="function"&&n instanceof n&&Wr.call(n)==Ol}var bo=os?Ye(os):Wf;function Uh(e){return Gu(e)&&e>=-Le&&e<=Le}var Ku=ss?Ye(ss):Bf;function hi(e){return typeof e=="string"||!O(e)&&le(e)&&Oe(e)==cn}function Xe(e){return typeof e=="symbol"||le(e)&&Oe(e)==Rn}var Kn=us?Ye(us):Uf;function Dh(e){return e===u}function $h(e){return le(e)&&Re(e)==Zt}function kh(e){return le(e)&&Oe(e)==Cr}var zh=ri(Xi),Nh=ri(function(e,t){return e<=t});function Yu(e){if(!e)return[];if(ze(e))return hi(e)?pt(e):ke(e);if(nr&&e[nr])return xl(e[nr]());var t=Re(e),n=t==He?Bi:t==qe?Mr:Yn;return n(e)}function zt(e){if(!e)return e===0?e:0;if(e=ct(e),e===K||e===-K){var t=e<0?-1:1;return t*De}return e===e?e:0}function M(e){var t=zt(e),n=t%1;return t===t?n?t-n:t:0}function Zu(e){return e?yn(M(e),0,re):0}function ct(e){if(typeof e=="number")return e;if(Xe(e))return ne;if(ue(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=ue(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=hs(e);var n=ba.test(e);return n||Sa.test(e)?nl(e.slice(2),n?2:8):ya.test(e)?ne:+e}function Xu(e){return Et(e,Ne(e))}function Gh(e){return e?yn(M(e),-Le,Le):e===0?e:0}function H(e){return e==null?"":Ze(e)}var Hh=Gn(function(e,t){if(hr(t)||ze(t)){Et(t,we(t),e);return}for(var n in t)Y.call(t,n)&&ur(e,n,t[n])}),Ju=Gn(function(e,t){Et(t,Ne(t),e)}),pi=Gn(function(e,t,n,r){Et(t,Ne(t),e,r)}),qh=Gn(function(e,t,n,r){Et(t,we(t),e,r)}),Kh=Dt(Ni);function Yh(e,t){var n=Nn(e);return t==null?n:Rs(n,t)}var Zh=F(function(e,t){e=J(e);var n=-1,r=t.length,i=r>2?t[2]:u;for(i&&Me(t[0],t[1],i)&&(r=1);++n<r;)for(var s=t[n],a=Ne(s),l=-1,c=a.length;++l<c;){var v=a[l],_=e[v];(_===u||vt(_,$n[v])&&!Y.call(e,v))&&(e[v]=s[v])}return e}),Xh=F(function(e){return e.push(u,hu),Ke(Qu,u,e)});function Jh(e,t){return ls(e,T(t,3),Tt)}function Qh(e,t){return ls(e,T(t,3),Hi)}function Vh(e,t){return e==null?e:Gi(e,T(t,3),Ne)}function jh(e,t){return e==null?e:Ps(e,T(t,3),Ne)}function ep(e,t){return e&&Tt(e,T(t,3))}function tp(e,t){return e&&Hi(e,T(t,3))}function np(e){return e==null?[]:Xr(e,we(e))}function rp(e){return e==null?[]:Xr(e,Ne(e))}function Co(e,t,n){var r=e==null?u:bn(e,t);return r===u?n:r}function ip(e,t){return e!=null&&vu(e,t,Ef)}function So(e,t){return e!=null&&vu(e,t,Rf)}var op=au(function(e,t,n){t!=null&&typeof t.toString!="function"&&(t=Br.call(t)),e[t]=n},To(Ge)),sp=au(function(e,t,n){t!=null&&typeof t.toString!="function"&&(t=Br.call(t)),Y.call(e,t)?e[t].push(n):e[t]=[n]},T),up=F(lr);function we(e){return ze(e)?Ts(e):Zi(e)}function Ne(e){return ze(e)?Ts(e,!0):Df(e)}function ap(e,t){var n={};return t=T(t,3),Tt(e,function(r,i,s){Bt(n,t(r,i,s),r)}),n}function lp(e,t){var n={};return t=T(t,3),Tt(e,function(r,i,s){Bt(n,i,t(r,i,s))}),n}var fp=Gn(function(e,t,n){Jr(e,t,n)}),Qu=Gn(function(e,t,n,r){Jr(e,t,n,r)}),cp=Dt(function(e,t){var n={};if(e==null)return n;var r=!1;t=ie(t,function(s){return s=rn(s,e),r||(r=s.length>1),s}),Et(e,ao(e),n),r&&(n=at(n,W|Ve|xe,oc));for(var i=t.length;i--;)eo(n,t[i]);return n});function dp(e,t){return Vu(e,ci(T(t)))}var hp=Dt(function(e,t){return e==null?{}:kf(e,t)});function Vu(e,t){if(e==null)return{};var n=ie(ao(e),function(r){return[r]});return t=T(t),Gs(e,n,function(r,i){return t(r,i[0])})}function pp(e,t,n){t=rn(t,e);var r=-1,i=t.length;for(i||(i=1,e=u);++r<i;){var s=e==null?u:e[Rt(t[r])];s===u&&(r=i,s=n),e=kt(s)?s.call(e):s}return e}function gp(e,t,n){return e==null?e:cr(e,t,n)}function vp(e,t,n,r){return r=typeof r=="function"?r:u,e==null?e:cr(e,t,n,r)}var ju=cu(we),ea=cu(Ne);function _p(e,t,n){var r=O(e),i=r||sn(e)||Kn(e);if(t=T(t,4),n==null){var s=e&&e.constructor;i?n=r?new s:[]:ue(e)?n=kt(s)?Nn($r(e)):{}:n={}}return(i?ot:Tt)(e,function(a,l,c){return t(n,a,l,c)}),n}function mp(e,t){return e==null?!0:eo(e,t)}function xp(e,t,n){return e==null?e:Zs(e,t,ro(n))}function wp(e,t,n,r){return r=typeof r=="function"?r:u,e==null?e:Zs(e,t,ro(n),r)}function Yn(e){return e==null?[]:Wi(e,we(e))}function yp(e){return e==null?[]:Wi(e,Ne(e))}function bp(e,t,n){return n===u&&(n=t,t=u),n!==u&&(n=ct(n),n=n===n?n:0),t!==u&&(t=ct(t),t=t===t?t:0),yn(ct(e),t,n)}function Cp(e,t,n){return t=zt(t),n===u?(n=t,t=0):n=zt(n),e=ct(e),If(e,t,n)}function Sp(e,t,n){if(n&&typeof n!="boolean"&&Me(e,t,n)&&(t=n=u),n===u&&(typeof t=="boolean"?(n=t,t=u):typeof e=="boolean"&&(n=e,e=u)),e===u&&t===u?(e=0,t=1):(e=zt(e),t===u?(t=e,e=0):t=zt(t)),e>t){var r=e;e=t,t=r}if(n||e%1||t%1){var i=Ss();return Ee(e+i*(t-e+tl("1e-"+((i+"").length-1))),t)}return Qi(e,t)}var Ap=Hn(function(e,t,n){return t=t.toLowerCase(),e+(n?ta(t):t)});function ta(e){return Ao(H(e).toLowerCase())}function na(e){return e=H(e),e&&e.replace(Ta,pl).replace(qa,"")}function Tp(e,t,n){e=H(e),t=Ze(t);var r=e.length;n=n===u?r:yn(M(n),0,r);var i=n;return n-=t.length,n>=0&&e.slice(n,i)==t}function Ep(e){return e=H(e),e&&Pn.test(e)?e.replace(m,gl):e}function Rp(e){return e=H(e),e&&ye.test(e)?e.replace(gn,"\\$&"):e}var Ip=Hn(function(e,t,n){return e+(n?"-":"")+t.toLowerCase()}),Lp=Hn(function(e,t,n){return e+(n?" ":"")+t.toLowerCase()}),Op=ou("toLowerCase");function Mp(e,t,n){e=H(e),t=M(t);var r=t?Un(e):0;if(!t||r>=t)return e;var i=(t-r)/2;return ni(Gr(i),n)+e+ni(Nr(i),n)}function Pp(e,t,n){e=H(e),t=M(t);var r=t?Un(e):0;return t&&r<t?e+ni(t-r,n):e}function Fp(e,t,n){e=H(e),t=M(t);var r=t?Un(e):0;return t&&r<t?ni(t-r,n)+e:e}function Wp(e,t,n){return n||t==null?t=0:t&&(t=+t),zl(H(e).replace(Jt,""),t||0)}function Bp(e,t,n){return(n?Me(e,t,n):t===u)?t=1:t=M(t),Vi(H(e),t)}function Up(){var e=arguments,t=H(e[0]);return e.length<3?t:t.replace(e[1],e[2])}var Dp=Hn(function(e,t,n){return e+(n?"_":"")+t.toLowerCase()});function $p(e,t,n){return n&&typeof n!="number"&&Me(e,t,n)&&(t=n=u),n=n===u?re:n>>>0,n?(e=H(e),e&&(typeof t=="string"||t!=null&&!bo(t))&&(t=Ze(t),!t&&Bn(e))?on(pt(e),0,n):e.split(t,n)):[]}var kp=Hn(function(e,t,n){return e+(n?" ":"")+Ao(t)});function zp(e,t,n){return e=H(e),n=n==null?0:yn(M(n),0,e.length),t=Ze(t),e.slice(n,n+t.length)==t}function Np(e,t,n){var r=o.templateSettings;n&&Me(e,t,n)&&(t=u),e=H(e),t=pi({},t,r,du);var i=pi({},t.imports,r.imports,du),s=we(i),a=Wi(i,s),l,c,v=0,_=t.interpolate||Er,x="__p += '",y=Ui((t.escape||Er).source+"|"+_.source+"|"+(_===jn?wa:Er).source+"|"+(t.evaluate||Er).source+"|$","g"),S="//# sourceURL="+(Y.call(t,"sourceURL")?(t.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Ja+"]")+`
`;e.replace(y,function(R,U,$,Je,Pe,Qe){return $||($=Je),x+=e.slice(v,Qe).replace(Ea,vl),U&&(l=!0,x+=`' +
__e(`+U+`) +
'`),Pe&&(c=!0,x+=`';
`+Pe+`;
__p += '`),$&&(x+=`' +
((__t = (`+$+`)) == null ? '' : __t) +
'`),v=Qe+R.length,R}),x+=`';
`;var E=Y.call(t,"variable")&&t.variable;if(!E)x=`with (obj) {
`+x+`
}
`;else if(ma.test(E))throw new L(yt);x=(c?x.replace(Sr,""):x).replace(Mn,"$1").replace(mi,"$1;"),x="function("+(E||"obj")+`) {
`+(E?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(l?", __e = _.escape":"")+(c?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+x+`return __p
}`;var P=ia(function(){return N(s,S+"return "+x).apply(u,a)});if(P.source=x,yo(P))throw P;return P}function Gp(e){return H(e).toLowerCase()}function Hp(e){return H(e).toUpperCase()}function qp(e,t,n){if(e=H(e),e&&(n||t===u))return hs(e);if(!e||!(t=Ze(t)))return e;var r=pt(e),i=pt(t),s=ps(r,i),a=gs(r,i)+1;return on(r,s,a).join("")}function Kp(e,t,n){if(e=H(e),e&&(n||t===u))return e.slice(0,_s(e)+1);if(!e||!(t=Ze(t)))return e;var r=pt(e),i=gs(r,pt(t))+1;return on(r,0,i).join("")}function Yp(e,t,n){if(e=H(e),e&&(n||t===u))return e.replace(Jt,"");if(!e||!(t=Ze(t)))return e;var r=pt(e),i=ps(r,pt(t));return on(r,i).join("")}function Zp(e,t){var n=z,r=X;if(ue(t)){var i="separator"in t?t.separator:i;n="length"in t?M(t.length):n,r="omission"in t?Ze(t.omission):r}e=H(e);var s=e.length;if(Bn(e)){var a=pt(e);s=a.length}if(n>=s)return e;var l=n-Un(r);if(l<1)return r;var c=a?on(a,0,l).join(""):e.slice(0,l);if(i===u)return c+r;if(a&&(l+=c.length-l),bo(i)){if(e.slice(l).search(i)){var v,_=c;for(i.global||(i=Ui(i.source,H(Wo.exec(i))+"g")),i.lastIndex=0;v=i.exec(_);)var x=v.index;c=c.slice(0,x===u?l:x)}}else if(e.indexOf(Ze(i),l)!=l){var y=c.lastIndexOf(i);y>-1&&(c=c.slice(0,y))}return c+r}function Xp(e){return e=H(e),e&&I.test(e)?e.replace(g,Cl):e}var Jp=Hn(function(e,t,n){return e+(n?" ":"")+t.toUpperCase()}),Ao=ou("toUpperCase");function ra(e,t,n){return e=H(e),t=n?u:t,t===u?ml(e)?Tl(e):ll(e):e.match(t)||[]}var ia=F(function(e,t){try{return Ke(e,u,t)}catch(n){return yo(n)?n:new L(n)}}),Qp=Dt(function(e,t){return ot(t,function(n){n=Rt(n),Bt(e,n,xo(e[n],e))}),e});function Vp(e){var t=e==null?0:e.length,n=T();return e=t?ie(e,function(r){if(typeof r[1]!="function")throw new st(se);return[n(r[0]),r[1]]}):[],F(function(r){for(var i=-1;++i<t;){var s=e[i];if(Ke(s[0],this,r))return Ke(s[1],this,r)}})}function jp(e){return Sf(at(e,W))}function To(e){return function(){return e}}function eg(e,t){return e==null||e!==e?t:e}var tg=uu(),ng=uu(!0);function Ge(e){return e}function Eo(e){return Us(typeof e=="function"?e:at(e,W))}function rg(e){return $s(at(e,W))}function ig(e,t){return ks(e,at(t,W))}var og=F(function(e,t){return function(n){return lr(n,e,t)}}),sg=F(function(e,t){return function(n){return lr(e,n,t)}});function Ro(e,t,n){var r=we(t),i=Xr(t,r);n==null&&!(ue(t)&&(i.length||!r.length))&&(n=t,t=e,e=this,i=Xr(t,we(t)));var s=!(ue(n)&&"chain"in n)||!!n.chain,a=kt(e);return ot(i,function(l){var c=t[l];e[l]=c,a&&(e.prototype[l]=function(){var v=this.__chain__;if(s||v){var _=e(this.__wrapped__),x=_.__actions__=ke(this.__actions__);return x.push({func:c,args:arguments,thisArg:e}),_.__chain__=v,_}return c.apply(e,Vt([this.value()],arguments))})}),e}function ug(){return be._===this&&(be._=Ml),this}function Io(){}function ag(e){return e=M(e),F(function(t){return zs(t,e)})}var lg=oo(ie),fg=oo(as),cg=oo(Li);function oa(e){return ho(e)?Oi(Rt(e)):zf(e)}function dg(e){return function(t){return e==null?u:bn(e,t)}}var hg=lu(),pg=lu(!0);function Lo(){return[]}function Oo(){return!1}function gg(){return{}}function vg(){return""}function _g(){return!0}function mg(e,t){if(e=M(e),e<1||e>Le)return[];var n=re,r=Ee(e,re);t=T(t),e-=re;for(var i=Fi(r,t);++n<e;)t(n);return i}function xg(e){return O(e)?ie(e,Rt):Xe(e)?[e]:ke(Au(H(e)))}function wg(e){var t=++Ll;return H(e)+t}var yg=ti(function(e,t){return e+t},0),bg=so("ceil"),Cg=ti(function(e,t){return e/t},1),Sg=so("floor");function Ag(e){return e&&e.length?Zr(e,Ge,qi):u}function Tg(e,t){return e&&e.length?Zr(e,T(t,2),qi):u}function Eg(e){return cs(e,Ge)}function Rg(e,t){return cs(e,T(t,2))}function Ig(e){return e&&e.length?Zr(e,Ge,Xi):u}function Lg(e,t){return e&&e.length?Zr(e,T(t,2),Xi):u}var Og=ti(function(e,t){return e*t},1),Mg=so("round"),Pg=ti(function(e,t){return e-t},0);function Fg(e){return e&&e.length?Pi(e,Ge):0}function Wg(e,t){return e&&e.length?Pi(e,T(t,2)):0}return o.after=rh,o.ary=Bu,o.assign=Hh,o.assignIn=Ju,o.assignInWith=pi,o.assignWith=qh,o.at=Kh,o.before=Uu,o.bind=xo,o.bindAll=Qp,o.bindKey=Du,o.castArray=gh,o.chain=Pu,o.chunk=Sc,o.compact=Ac,o.concat=Tc,o.cond=Vp,o.conforms=jp,o.constant=To,o.countBy=Fd,o.create=Yh,o.curry=$u,o.curryRight=ku,o.debounce=zu,o.defaults=Zh,o.defaultsDeep=Xh,o.defer=ih,o.delay=oh,o.difference=Ec,o.differenceBy=Rc,o.differenceWith=Ic,o.drop=Lc,o.dropRight=Oc,o.dropRightWhile=Mc,o.dropWhile=Pc,o.fill=Fc,o.filter=Bd,o.flatMap=$d,o.flatMapDeep=kd,o.flatMapDepth=zd,o.flatten=Iu,o.flattenDeep=Wc,o.flattenDepth=Bc,o.flip=sh,o.flow=tg,o.flowRight=ng,o.fromPairs=Uc,o.functions=np,o.functionsIn=rp,o.groupBy=Nd,o.initial=$c,o.intersection=kc,o.intersectionBy=zc,o.intersectionWith=Nc,o.invert=op,o.invertBy=sp,o.invokeMap=Hd,o.iteratee=Eo,o.keyBy=qd,o.keys=we,o.keysIn=Ne,o.map=ai,o.mapKeys=ap,o.mapValues=lp,o.matches=rg,o.matchesProperty=ig,o.memoize=fi,o.merge=fp,o.mergeWith=Qu,o.method=og,o.methodOf=sg,o.mixin=Ro,o.negate=ci,o.nthArg=ag,o.omit=cp,o.omitBy=dp,o.once=uh,o.orderBy=Kd,o.over=lg,o.overArgs=ah,o.overEvery=fg,o.overSome=cg,o.partial=wo,o.partialRight=Nu,o.partition=Yd,o.pick=hp,o.pickBy=Vu,o.property=oa,o.propertyOf=dg,o.pull=Kc,o.pullAll=Ou,o.pullAllBy=Yc,o.pullAllWith=Zc,o.pullAt=Xc,o.range=hg,o.rangeRight=pg,o.rearg=lh,o.reject=Jd,o.remove=Jc,o.rest=fh,o.reverse=_o,o.sampleSize=Vd,o.set=gp,o.setWith=vp,o.shuffle=jd,o.slice=Qc,o.sortBy=nh,o.sortedUniq=id,o.sortedUniqBy=od,o.split=$p,o.spread=ch,o.tail=sd,o.take=ud,o.takeRight=ad,o.takeRightWhile=ld,o.takeWhile=fd,o.tap=Ad,o.throttle=dh,o.thru=ui,o.toArray=Yu,o.toPairs=ju,o.toPairsIn=ea,o.toPath=xg,o.toPlainObject=Xu,o.transform=_p,o.unary=hh,o.union=cd,o.unionBy=dd,o.unionWith=hd,o.uniq=pd,o.uniqBy=gd,o.uniqWith=vd,o.unset=mp,o.unzip=mo,o.unzipWith=Mu,o.update=xp,o.updateWith=wp,o.values=Yn,o.valuesIn=yp,o.without=_d,o.words=ra,o.wrap=ph,o.xor=md,o.xorBy=xd,o.xorWith=wd,o.zip=yd,o.zipObject=bd,o.zipObjectDeep=Cd,o.zipWith=Sd,o.entries=ju,o.entriesIn=ea,o.extend=Ju,o.extendWith=pi,Ro(o,o),o.add=yg,o.attempt=ia,o.camelCase=Ap,o.capitalize=ta,o.ceil=bg,o.clamp=bp,o.clone=vh,o.cloneDeep=mh,o.cloneDeepWith=xh,o.cloneWith=_h,o.conformsTo=wh,o.deburr=na,o.defaultTo=eg,o.divide=Cg,o.endsWith=Tp,o.eq=vt,o.escape=Ep,o.escapeRegExp=Rp,o.every=Wd,o.find=Ud,o.findIndex=Eu,o.findKey=Jh,o.findLast=Dd,o.findLastIndex=Ru,o.findLastKey=Qh,o.floor=Sg,o.forEach=Fu,o.forEachRight=Wu,o.forIn=Vh,o.forInRight=jh,o.forOwn=ep,o.forOwnRight=tp,o.get=Co,o.gt=yh,o.gte=bh,o.has=ip,o.hasIn=So,o.head=Lu,o.identity=Ge,o.includes=Gd,o.indexOf=Dc,o.inRange=Cp,o.invoke=up,o.isArguments=An,o.isArray=O,o.isArrayBuffer=Ch,o.isArrayLike=ze,o.isArrayLikeObject=ce,o.isBoolean=Sh,o.isBuffer=sn,o.isDate=Ah,o.isElement=Th,o.isEmpty=Eh,o.isEqual=Rh,o.isEqualWith=Ih,o.isError=yo,o.isFinite=Lh,o.isFunction=kt,o.isInteger=Gu,o.isLength=di,o.isMap=Hu,o.isMatch=Oh,o.isMatchWith=Mh,o.isNaN=Ph,o.isNative=Fh,o.isNil=Bh,o.isNull=Wh,o.isNumber=qu,o.isObject=ue,o.isObjectLike=le,o.isPlainObject=gr,o.isRegExp=bo,o.isSafeInteger=Uh,o.isSet=Ku,o.isString=hi,o.isSymbol=Xe,o.isTypedArray=Kn,o.isUndefined=Dh,o.isWeakMap=$h,o.isWeakSet=kh,o.join=Gc,o.kebabCase=Ip,o.last=ft,o.lastIndexOf=Hc,o.lowerCase=Lp,o.lowerFirst=Op,o.lt=zh,o.lte=Nh,o.max=Ag,o.maxBy=Tg,o.mean=Eg,o.meanBy=Rg,o.min=Ig,o.minBy=Lg,o.stubArray=Lo,o.stubFalse=Oo,o.stubObject=gg,o.stubString=vg,o.stubTrue=_g,o.multiply=Og,o.nth=qc,o.noConflict=ug,o.noop=Io,o.now=li,o.pad=Mp,o.padEnd=Pp,o.padStart=Fp,o.parseInt=Wp,o.random=Sp,o.reduce=Zd,o.reduceRight=Xd,o.repeat=Bp,o.replace=Up,o.result=pp,o.round=Mg,o.runInContext=f,o.sample=Qd,o.size=eh,o.snakeCase=Dp,o.some=th,o.sortedIndex=Vc,o.sortedIndexBy=jc,o.sortedIndexOf=ed,o.sortedLastIndex=td,o.sortedLastIndexBy=nd,o.sortedLastIndexOf=rd,o.startCase=kp,o.startsWith=zp,o.subtract=Pg,o.sum=Fg,o.sumBy=Wg,o.template=Np,o.times=mg,o.toFinite=zt,o.toInteger=M,o.toLength=Zu,o.toLower=Gp,o.toNumber=ct,o.toSafeInteger=Gh,o.toString=H,o.toUpper=Hp,o.trim=qp,o.trimEnd=Kp,o.trimStart=Yp,o.truncate=Zp,o.unescape=Xp,o.uniqueId=wg,o.upperCase=Jp,o.upperFirst=Ao,o.each=Fu,o.eachRight=Wu,o.first=Lu,Ro(o,(function(){var e={};return Tt(o,function(t,n){Y.call(o.prototype,n)||(e[n]=t)}),e})(),{chain:!1}),o.VERSION=Q,ot(["bind","bindKey","curry","curryRight","partial","partialRight"],function(e){o[e].placeholder=o}),ot(["drop","take"],function(e,t){D.prototype[e]=function(n){n=n===u?1:me(M(n),0);var r=this.__filtered__&&!t?new D(this):this.clone();return r.__filtered__?r.__takeCount__=Ee(n,r.__takeCount__):r.__views__.push({size:Ee(n,re),type:e+(r.__dir__<0?"Right":"")}),r},D.prototype[e+"Right"]=function(n){return this.reverse()[e](n).reverse()}}),ot(["filter","map","takeWhile"],function(e,t){var n=t+1,r=n==an||n==nt;D.prototype[e]=function(i){var s=this.clone();return s.__iteratees__.push({iteratee:T(i,3),type:n}),s.__filtered__=s.__filtered__||r,s}}),ot(["head","last"],function(e,t){var n="take"+(t?"Right":"");D.prototype[e]=function(){return this[n](1).value()[0]}}),ot(["initial","tail"],function(e,t){var n="drop"+(t?"":"Right");D.prototype[e]=function(){return this.__filtered__?new D(this):this[n](1)}}),D.prototype.compact=function(){return this.filter(Ge)},D.prototype.find=function(e){return this.filter(e).head()},D.prototype.findLast=function(e){return this.reverse().find(e)},D.prototype.invokeMap=F(function(e,t){return typeof e=="function"?new D(this):this.map(function(n){return lr(n,e,t)})}),D.prototype.reject=function(e){return this.filter(ci(T(e)))},D.prototype.slice=function(e,t){e=M(e);var n=this;return n.__filtered__&&(e>0||t<0)?new D(n):(e<0?n=n.takeRight(-e):e&&(n=n.drop(e)),t!==u&&(t=M(t),n=t<0?n.dropRight(-t):n.take(t-e)),n)},D.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},D.prototype.toArray=function(){return this.take(re)},Tt(D.prototype,function(e,t){var n=/^(?:filter|find|map|reject)|While$/.test(t),r=/^(?:head|last)$/.test(t),i=o[r?"take"+(t=="last"?"Right":""):t],s=r||/^find/.test(t);i&&(o.prototype[t]=function(){var a=this.__wrapped__,l=r?[1]:arguments,c=a instanceof D,v=l[0],_=c||O(a),x=function(U){var $=i.apply(o,Vt([U],l));return r&&y?$[0]:$};_&&n&&typeof v=="function"&&v.length!=1&&(c=_=!1);var y=this.__chain__,S=!!this.__actions__.length,E=s&&!y,P=c&&!S;if(!s&&_){a=P?a:new D(this);var R=e.apply(a,l);return R.__actions__.push({func:ui,args:[x],thisArg:u}),new ut(R,y)}return E&&P?e.apply(this,l):(R=this.thru(x),E?r?R.value()[0]:R.value():R)})}),ot(["pop","push","shift","sort","splice","unshift"],function(e){var t=Pr[e],n=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",r=/^(?:pop|shift)$/.test(e);o.prototype[e]=function(){var i=arguments;if(r&&!this.__chain__){var s=this.value();return t.apply(O(s)?s:[],i)}return this[n](function(a){return t.apply(O(a)?a:[],i)})}}),Tt(D.prototype,function(e,t){var n=o[t];if(n){var r=n.name+"";Y.call(zn,r)||(zn[r]=[]),zn[r].push({name:t,func:n})}}),zn[ei(u,je).name]=[{name:"wrapper",func:u}],D.prototype.clone=Zl,D.prototype.reverse=Xl,D.prototype.value=Jl,o.prototype.at=Td,o.prototype.chain=Ed,o.prototype.commit=Rd,o.prototype.next=Id,o.prototype.plant=Od,o.prototype.reverse=Md,o.prototype.toJSON=o.prototype.valueOf=o.prototype.value=Pd,o.prototype.first=o.prototype.head,nr&&(o.prototype[nr]=Ld),o}),Dn=El();_n?((_n.exports=Dn)._=Dn,Ti._=Dn):be._=Dn}).call(zv)})(mr,mr.exports)),mr.exports}var ha=Nv();function Gv(Se,A,u){const Q=q(null),oe=q(!1),We=q(0),se=q(""),yt=q([]),B=q(new Set),k=`progressive-guidance-charged-${Se}-${A}`,Z=`progressive-guidance-${Se}-${A}`,W=()=>{try{const z=localStorage.getItem(Z);if(!z)return[];const X=JSON.parse(z);return Array.isArray(X)?X.filter(Ue=>typeof Ue=="string"&&Ue.length>0):[]}catch{return[]}},Ve=z=>{try{localStorage.setItem(Z,JSON.stringify(Array.from(new Set(z))))}catch{}},xe=()=>{try{localStorage.removeItem(Z)}catch{}},dt=async()=>{const z=W();try{await fetch(xt("projects.manual-editor.progressive-guidance.steps",{project:Se,chapter:A}),{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.content||""},body:JSON.stringify({completed_step_ids:z})})}catch(X){console.error("Failed to persist completed steps:",X)}},It=ha.debounce(dt,400),Ae=z=>{try{const Ue=new DOMParser().parseFromString(z||"","text/html");return Array.from(Ue.querySelectorAll("h1,h2,h3,h4,h5,h6")).map(Kt=>(Kt.textContent||"").trim()).filter(Boolean).slice(0,20)}catch{return[]}},je=z=>{try{const tt=(new DOMParser().parseFromString(z||"","text/html").body?.textContent||"").replace(/\s+/g," ").trim();return tt.length<=2e3?tt:tt.slice(-2e3)}catch{return(z||"").slice(-2e3)}};if(u){Q.value=u;const z=Array.isArray(u.completed_step_ids)&&u.completed_step_ids.length?u.completed_step_ids:(u.next_steps||[]).filter(X=>X.completed).map(X=>X.id);z.length&&(yt.value=z,Ve(z))}const te=async(z,X)=>{if(z.word_count===void 0||z.word_count<0)return;const Ue=Date.now();if(!(Ue-We.value<3e3)){oe.value=!0,We.value=Ue;try{const tt=W(),an=Ae(X),Kt=je(X),nt=await fetch(xt("projects.manual-editor.progressive-guidance",{project:Se,chapter:A}),{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.content||""},body:JSON.stringify({analysis:{...z,outline:an,content_excerpt:Kt,completed_step_ids:tt}})});if(nt.ok){const K=await nt.json();Q.value=K,Array.isArray(K?.completed_step_ids)&&(yt.value=K.completed_step_ids,Ve(yt.value)),Ct();const Le=Number(K?.guidance_id);if(Le){if(B.value.size===0)try{const De=localStorage.getItem(k);if(De){const ne=JSON.parse(De);Array.isArray(ne)&&ne.filter(re=>typeof re=="number"&&Number.isFinite(re)).forEach(re=>B.value.add(re))}}catch{}if(!B.value.has(Le)){const De=Ht(K?.contextual_tip||"")+Ht(K?.stage_label||"")+Ht((K?.next_steps||[]).map(ne=>ne?.text).join(" "))+Ht((K?.writing_milestones||[]).map(ne=>ne?.label).join(" "));if(De>0){B.value.add(Le);try{localStorage.setItem(k,JSON.stringify(Array.from(B.value).slice(-50)))}catch{}vi(De,"Manual editor: Progressive guidance","chapter").catch(ne=>console.error("Failed to record word usage (progressive guidance):",ne))}}}else{const De=JSON.stringify({stage:K?.stage,completion:K?.completion_percentage,tip:K?.contextual_tip,steps:(K?.next_steps||[]).map(ne=>({t:ne?.text,a:ne?.action}))});if(De&&De!==se.value){se.value=De;const ne=Ht(K?.contextual_tip||"")+Ht(K?.stage_label||"")+Ht((K?.next_steps||[]).map(re=>re?.text).join(" "))+Ht((K?.writing_milestones||[]).map(re=>re?.label).join(" "));ne>0&&vi(ne,"Manual editor: Progressive guidance","chapter").catch(re=>console.error("Failed to record word usage (progressive guidance):",re))}}}}catch(tt){console.error("Failed to load progressive guidance:",tt)}finally{oe.value=!1}}},Ie=ha.debounce(te,5e3),bt=z=>{if(!Q.value)return;const X=Q.value.next_steps.find(Ue=>Ue.id===z);X&&(X.completed=!X.completed,Be(),It())},Be=()=>{if(!Q.value)return;const z=Q.value.next_steps.filter(X=>X.completed).map(X=>X.id);Ve(z)},Ct=()=>{if(!Q.value)return;const z=W();z.length&&Q.value.next_steps.forEach(X=>{z.includes(X.id)&&(X.completed=!0)})};return{guidance:Q,isLoadingGuidance:oe,requestGuidance:te,debouncedRequestGuidance:Ie,toggleStep:bt,clearCompletedSteps:()=>{Q.value&&(Q.value.next_steps.forEach(z=>{z.completed=!1}),xe(),It())},getCompletionPercentage:()=>Q.value?.completion_percentage||0,getCurrentStageLabel:()=>Q.value?.stage_label||"Getting Started"}}function Hv(Se,A=[]){const u=q(!1),Q=q(A),oe=q(!1),We=q(null);return{isChatOpen:u,messages:Q,isLoading:oe,toggleChat:()=>{u.value=!u.value},sendMessage:async B=>{if(B.trim()){Q.value.push({role:"user",content:B,timestamp:new Date}),oe.value=!0;try{const Z=(await Dg.post(xt("projects.manual-editor.chat",{project:Se.project.slug,chapter:Se.chapter_number}),{message:B,history:Q.value})).data.message;Q.value.push({role:"assistant",content:Z,timestamp:new Date});const W=Ht(Z||"");if(W>0)try{await vi(W,"Manual editor: Chat","chapter",Se.id),await We.value?.()}catch(Ve){console.error("Failed to record word usage (manual chat):",Ve)}}catch(k){console.error("Failed to send chat message:",k),Q.value.push({role:"assistant",content:"I'm having trouble responding right now. Please try again.",timestamp:new Date})}finally{oe.value=!1}}},setOnUsageRecorded:B=>{We.value=B}}}const qv={class:"manual-editor h-screen flex flex-col bg-background dark:bg-background transition-colors duration-300"},Kv={class:"md:hidden border-b h-14 px-3 flex justify-between items-center bg-background/80 backdrop-blur-md sticky top-0 z-50 transition-all duration-200"},Yv={class:"flex items-center gap-2"},Zv={class:"flex flex-col justify-center min-w-0 flex-1 mx-2"},Xv={class:"items-center gap-2 text-xs font-medium text-muted-foreground mb-1 hidden sm:flex"},Jv={class:"flex items-center gap-2 -ml-1"},Qv={class:"font-bold text-base text-foreground truncate"},Vv={class:"truncate"},jv={class:"flex gap-2 items-center"},e0={class:"hidden md:flex flex-col w-full z-50 sticky top-0 bg-background/80 backdrop-blur-md transition-all duration-200 border-b"},t0={class:"h-10 border-b border-border/40 flex items-center justify-center px-4 bg-background/60 relative"},n0={class:"flex items-center gap-2"},r0={class:"flex items-center gap-1 absolute right-4"},i0={class:"h-12 flex items-center justify-between px-4 bg-background/40"},o0={class:"flex items-center gap-3"},s0={class:"flex items-center gap-1"},u0={class:"flex items-center gap-2 px-3 py-1.5 rounded-full bg-muted/30 border border-border/40"},a0={class:"flex items-center gap-1.5"},l0={class:"text-xs font-medium text-muted-foreground"},f0={key:0,class:"flex items-center gap-1.5"},c0={key:1,class:"text-xs text-muted-foreground"},d0={class:"flex items-center gap-3"},h0={class:"flex items-center gap-1 bg-muted/30 p-1 rounded-full border border-border/40"},p0={class:"text-xs font-medium"},g0={class:"w-full bg-background border-b px-3 md:px-6 py-2 flex flex-col gap-1"},v0={class:"flex justify-between items-center text-xs text-muted-foreground mb-1"},_0={class:"flex-1 flex overflow-hidden"},m0={key:0,class:"w-[320px] border-r bg-background/80 backdrop-blur-xl border-border/50 shadow-xl z-20 overflow-y-auto custom-scrollbar"},x0={class:"p-4"},w0={class:"mb-3"},y0={class:"text-xs text-muted-foreground"},b0={class:"flex-1 overflow-auto p-2 md:p-6 bg-background"},C0={key:0,class:"w-1/2 flex flex-col bg-background overflow-hidden"},S0={class:"flex-1 overflow-y-auto custom-scrollbar"},A0={key:0,class:"w-[400px] border-l bg-background/80 backdrop-blur-xl border-border/50 shadow-2xl z-20 overflow-y-auto custom-scrollbar flex flex-col"},T0={key:0,class:"flex-1 overflow-hidden"},E0={class:"h-full border-b border-border/50"},R0={key:1,class:"p-4 space-y-6"},I0={key:0,class:"space-y-2"},L0={key:1,class:"space-y-2"},O0={class:"flex items-center justify-between"},M0={class:"text-xs whitespace-pre-wrap rounded-lg border border-border/50 bg-muted/30 p-3"},P0={class:"space-y-2"},F0={class:"border-t p-2 md:p-3 flex flex-col gap-3 text-xs md:text-sm bg-muted/30"},W0={class:"flex flex-col sm:flex-row justify-between gap-3 sm:gap-2 items-start sm:items-center w-full"},B0={class:"flex gap-2 md:gap-4 flex-wrap items-center"},U0={class:"text-muted-foreground"},D0={class:"text-foreground"},$0={key:0,class:"text-muted-foreground hidden sm:inline"},k0={class:"text-foreground"},z0={key:1,class:"text-muted-foreground hidden md:inline"},N0={class:"text-foreground"},G0={key:2,class:"text-muted-foreground hidden lg:inline"},H0={class:"flex gap-2 items-center w-full sm:w-auto"},q0={class:"text-xs font-medium"},K0=pa({__name:"ManualEditor",props:{project:{},chapter:{},allChapters:{},facultyChapters:{},currentSuggestion:{},contextAnalysis:{},initialProgressGuidance:{},chatHistory:{}},setup(Se){const A=Se,u=$g();_r(()=>u.props?.flash,g=>{g&&(g.success&&ae.success(g.success),g.error&&ae.error(g.error))},{deep:!0,immediate:!0});const{wordBalance:Q,balance:oe,showPurchaseModal:We,requiredWordsForModal:se,actionDescriptionForModal:yt,checkAndPrompt:B,closePurchaseModal:k,refreshBalance:Z}=cv(),{content:W,isDirty:Ve,isSaving:xe,lastSaved:dt,updateContent:It,manualSave:Ae}=qg(A.chapter,A.project.slug),{currentSuggestion:je,currentAnalysis:te,isAnalyzing:Ie,saveSuggestion:bt,clearSuggestion:Be,applySuggestion:Ct}=Kg(A.chapter,A.project.slug,A.currentSuggestion,W,{onUsageRecorded:()=>Z()}),{addToHistory:et}=iv(A.chapter.content||""),{isChatOpen:Lt,messages:Tn,isLoading:z,toggleChat:X,sendMessage:Ue,setOnUsageRecorded:tt}=Hv(A.chapter,A.chatHistory||[]);tt(()=>Z());const an=q(A.chapter.title||"");q(!1),q(!1),q("");const Kt=()=>{Ot.value&&Yt(),pe.value=!0,X()},nt=g=>{It(g),et(g)};vr(()=>{const g=an.value?.trim(),m=W.value?.trim();return!!(g&&g.length>0&&m&&m.length>50)});const{guidance:K,isLoadingGuidance:Le,debouncedRequestGuidance:De,toggleStep:ne}=Gv(A.project.slug,A.chapter.chapter_number,A.initialProgressGuidance||null),re=q(!1),_i=()=>typeof window<"u"&&window.innerWidth<1024,En=(g,m)=>{try{const I=localStorage.getItem(g);return I!==null?I==="true":m}catch{return m}},Te=q(_i()),ve=q(En("manualEditor_showLeftSidebar",!Te.value)),pe=q(En("manualEditor_showRightSidebar",!Te.value)),Zn=q(""),St=q(null),rt=q(null),ln=q("");q(!1),q([]),q(!1);const $e=q(!0),Ot=q((()=>{try{return localStorage.getItem("citationOperationMode")==="true"}catch{return!1}})()),He=()=>{Ot.value=!0,pe.value=!1;try{localStorage.setItem("citationOperationMode","true")}catch{}},Yt=()=>{Ot.value=!1,pe.value=!0;try{localStorage.setItem("citationOperationMode","false")}catch{}},xr=q(!1),ht=async()=>{ae.info("Fullscreen temporarily disabled")},wr=()=>{un.visit(xt("projects.analysis",{project:A.project.slug}))};Mo(()=>{}),ua(()=>{});const{isDark:yr,toggle:fn}=kg(),qe=vr(()=>{const g=te.value?.word_count??A.chapter.word_count,m=A.chapter.target_word_count||1e3;return Math.min(g/m*100,100)});vr(()=>xe.value?"Saving...":dt.value?`Saved ${dt.value}`:"Not saved");const cn=()=>{ve.value=!ve.value},Rn=()=>{pe.value=!pe.value};_r(ve,g=>{if(!Te.value)try{localStorage.setItem("manualEditor_showLeftSidebar",String(g))}catch(m){console.error("Failed to save left sidebar state:",m)}}),_r(pe,g=>{if(!Te.value)try{localStorage.setItem("manualEditor_showRightSidebar",String(g))}catch(m){console.error("Failed to save right sidebar state:",m)}});const br=g=>{(g.ctrlKey||g.metaKey)&&g.key==="s"&&(g.preventDefault(),Mn())};Mo(()=>{Te.value=window.innerWidth<1024,Te.value&&(ve.value=!1,pe.value=!1);const g=()=>{const m=Te.value;Te.value=window.innerWidth<1024,m!==Te.value&&(Te.value?(ve.value=!1,pe.value=!1):(ve.value=En("manualEditor_showLeftSidebar",!0),pe.value=En("manualEditor_showRightSidebar",!0)))};window.addEventListener("resize",g),window.addEventListener("keydown",br),ua(()=>{window.removeEventListener("resize",g),window.removeEventListener("keydown",br)})}),_r(()=>te.value,g=>{g&&De({word_count:g.word_count,citation_count:g.citation_count,table_count:g.table_count,figure_count:g.figure_count,claim_count:g.claim_count,has_introduction:g.has_introduction,has_conclusion:g.has_conclusion,detected_issues:g.detected_issues,quality_metrics:g.quality_metrics},W.value)},{deep:!0}),Mo(()=>{re.value||!((A.chapter.word_count||0)>50||W.value&&W.value.trim().length>200)||K.value||(re.value=!0,De({word_count:A.chapter.word_count||0,citation_count:A.contextAnalysis?.citation_count||0,table_count:A.contextAnalysis?.table_count||0,figure_count:A.contextAnalysis?.figure_count||0,claim_count:A.contextAnalysis?.claim_count||0,has_introduction:A.contextAnalysis?.has_introduction||!1,has_conclusion:A.contextAnalysis?.has_conclusion||!1,detected_issues:A.contextAnalysis?.detected_issues||[],quality_metrics:A.contextAnalysis?.quality_metrics||{}},W.value||""))});const Zt=g=>{nt(g),ae.success("Applied improved text")},Cr=g=>{if(rt.value?.replaceSelection(g,St.value||void 0)??!1){ae.success("Expanded selection");return}nt(`${W.value}

${g}`),ae.success("Added expanded text")},Xt=g=>{ln.value=g,$e.value=!0;try{navigator.clipboard?.writeText(g)}catch{}ae.success("Citation suggestions ready")},Mt=g=>{if(rt.value?.replaceSelection(g,St.value||void 0)??!1){ae.success("Applied rephrased text");return}nt(`${W.value}

${g}`),ae.success("Added rephrased text")},Jn=g=>{const m=K.value?.next_steps?.find(I=>I?.id===g);if(!(!m||!m.action||m.action==="none")){if(m.action==="open_citation_helper"){$e.value=!0,ae.success("Citation helper opened"),ne(g);return}if(m.action==="insert_text"){const I=m?.payload?.text;if(typeof I!="string"||!I.trim()){ae.error("Nothing to insert for this step");return}rt.value?.replaceSelection(I.trim(),St.value||void 0)??!1?ae.success("Inserted into selection"):(nt(`${W.value}

${I.trim()}`),ae.success("Inserted into chapter")),ne(g)}}},In=(g,m)=>B(g,m),Ln=async(g,m)=>{const I=Math.max(0,Math.round(g||0));I&&(await vi(I,m,"chapter",A.chapter.id),await Z())},Qn=async()=>{if(ln.value)try{await navigator.clipboard.writeText(ln.value),ae.success("Copied citation suggestions")}catch{ae.error("Could not copy citation suggestions")}},dn=vr(()=>A.allChapters.find(g=>g.chapter_number===A.chapter.chapter_number-1)),hn=vr(()=>A.allChapters.find(g=>g.chapter_number===A.chapter.chapter_number+1)),pn=(g,m)=>{if(m&&W.value){const Pn=m.trim(),Vn=document.createElement("div");Vn.innerHTML=W.value;const Ar=Vn.textContent||Vn.innerText||"",jn=Ar.indexOf(Pn);if(jn!==-1){const er=jn+Pn.length,Tr=Ar.substring(er).match(/^[^.!?]*[.!?]/);let gn;Tr?gn=er+Tr[0].length:gn=er;let ye=0,Jt=0;const At=W.value;for(;ye<At.length&&Jt<gn;)if(At[ye]==="<"){for(;ye<At.length&&At[ye]!==">";)ye++;ye++}else if(At[ye]==="&"){const vn=At.indexOf(";",ye);vn!==-1&&vn-ye<10?(ye=vn+1,Jt++):(ye++,Jt++)}else ye++,Jt++;if(ye>0){const vn=At.substring(0,ye),xi=At.substring(ye),wi=`${vn} ${g}${xi}`;nt(wi),ae.success("Citation inserted at claim location");return}}}const I=rt.value?.getCursorPosition?.();if(typeof I=="number"&&(rt.value?.replaceTextAt?.({from:I,to:I},` ${g} `)??!1)){ae.success("Citation inserted at cursor");return}nt(`${W.value} ${g}`),ae.success("Citation appended to content")},Pt=g=>{Ve.value&&!confirm("You have unsaved changes. Are you sure you want to switch chapters?")||un.visit(xt("projects.manual-editor.show",{project:A.project.slug,chapter:g}))},On=()=>{const g=A.chapter.chapter_number+1;A.allChapters.find(I=>I.chapter_number===g)?Pt(g):ae.info("Please create the next chapter from the dashboard first.")},Sr=g=>{confirm("Are you sure you want to delete this chapter?")&&un.delete(xt("chapters.destroy",{project:A.project.slug,chapter:A.allChapters.find(m=>m.id===g)?.slug}),{onSuccess:()=>ae.success("Chapter deleted")})},Mn=async()=>{try{await Ae(),ae.success("Chapter saved successfully")}catch{ae.error("Failed to save chapter")}},mi=async()=>{console.log("🔵 [MARK COMPLETE] Function called"),console.log("🔵 [MARK COMPLETE] Current word count:",te.value?.word_count??A.chapter.word_count);try{console.log("🔵 [MARK COMPLETE] Saving chapter..."),await Ae(),console.log("✅ [MARK COMPLETE] Chapter saved");const g=xt("projects.manual-editor.mark-complete",{project:A.project.slug,chapter:A.chapter.chapter_number});console.log("🔵 [MARK COMPLETE] Posting to:",g),un.post(g,{},{onSuccess:()=>{console.log("✅ [MARK COMPLETE] Request successful")},onError:m=>{console.error("❌ [MARK COMPLETE] Request failed:",m)}})}catch(g){console.error("❌ [MARK COMPLETE] Error:",g),ae.error("Failed to save chapter before marking complete")}};return(g,m)=>(G(),ge(ga,null,[C(h(zg),{title:`${g.chapter.title} - Manual Editor`},null,8,["title"]),w("div",qv,[w("header",Kv,[w("div",Yv,[C(h(he),{variant:"ghost",size:"icon",class:"h-8 w-8 text-zinc-700 dark:text-zinc-300 hover:text-foreground",onClick:m[0]||(m[0]=I=>h(un).visit(h(xt)("projects.show",g.project.slug))),title:"Back to Project"},{default:ee(()=>[C(h(fa),{class:"w-4 h-4"})]),_:1}),C(h(Gt),{orientation:"vertical",class:"h-6"}),C(h(he),{onClick:m[1]||(m[1]=I=>ve.value=!0),variant:"ghost",size:"icon",class:"h-8 w-8 lg:hidden text-muted-foreground hover:text-foreground",title:"Open Chapter Navigation"},{default:ee(()=>[C(h(hv),{class:"w-4 h-4"})]),_:1})]),w("div",Zv,[w("div",Xv,[w("span",{class:"hover:text-foreground transition-colors cursor-pointer truncate",onClick:m[2]||(m[2]=I=>h(un).visit(h(xt)("projects.show",g.project.slug)))},fe(g.project.title),1)]),w("div",Jv,[w("div",Qv,[w("span",Vv,"Ch. "+fe(g.chapter.chapter_number),1)])])]),w("div",jv,[C(h(he),{variant:"ghost",size:"icon",class:"h-8 w-8",onClick:Mn,disabled:h(xe),title:"Save"},{default:ee(()=>[C(h(Po),{class:"w-4 h-4"})]),_:1},8,["disabled"]),C(h(Gt),{orientation:"vertical",class:"h-6 mx-1 opacity-50"}),C(h(he),{onClick:m[3]||(m[3]=I=>pe.value=!0),variant:"ghost",size:"icon",class:"h-8 w-8 text-muted-foreground hover:text-foreground",title:"Open Tools"},{default:ee(()=>[C(h(ca),{class:"w-4 h-4"})]),_:1})])]),w("div",e0,[w("div",t0,[w("div",n0,[w("h1",{class:"text-sm font-bold text-foreground cursor-pointer hover:text-primary transition-colors",onClick:m[4]||(m[4]=I=>h(un).visit(h(xt)("projects.show",g.project.slug)))},fe(g.project.title),1),C(h(Ng),{variant:"secondary",class:"h-5 px-2 text-[10px] rounded-full"},{default:ee(()=>[qt("Ch "+fe(g.chapter.chapter_number),1)]),_:1})]),w("div",r0,[dn.value?(G(),mt(h(he),{key:0,variant:"ghost",size:"sm",class:"h-6 px-2 text-zinc-500 hover:text-foreground gap-1 rounded-full text-[10px]",onClick:m[5]||(m[5]=I=>Pt(dn.value.chapter_number)),title:`Previous: ${dn.value.title}`},{default:ee(()=>[C(h(pv),{class:"w-3 h-3"}),m[17]||(m[17]=qt(" Prev ",-1))]),_:1},8,["title"])):Fe("",!0),hn.value?(G(),mt(h(he),{key:1,variant:"ghost",size:"sm",class:"h-6 px-2 text-zinc-500 hover:text-foreground gap-1 rounded-full text-[10px]",onClick:m[6]||(m[6]=I=>Pt(hn.value.chapter_number)),title:`Next: ${hn.value.title}`},{default:ee(()=>[m[18]||(m[18]=qt(" Next ",-1)),C(h(gv),{class:"w-3 h-3"})]),_:1},8,["title"])):Fe("",!0)])]),w("div",i0,[w("div",o0,[w("div",s0,[C(h(he),{variant:"ghost",size:"icon",class:"h-8 w-8 text-zinc-700 dark:text-zinc-300 hover:text-foreground rounded-full",onClick:m[7]||(m[7]=I=>h(un).visit(h(xt)("projects.show",g.project.slug))),title:"Back to Project"},{default:ee(()=>[C(h(fa),{class:"w-4 h-4"})]),_:1}),m[19]||(m[19]=w("div",{class:"h-4 w-px bg-border/50 mx-1"},null,-1)),C(h(he),{onClick:cn,variant:"ghost",size:"icon",class:wt(["h-8 w-8 transition-all duration-300 rounded-full",ve.value?"text-primary":"text-zinc-700 dark:text-zinc-300 hover:text-foreground"]),title:"Toggle Chapter Navigation"},{default:ee(()=>[ve.value?(G(),mt(h(vv),{key:0,class:"w-4 h-4"})):(G(),mt(h(_v),{key:1,class:"w-4 h-4"}))]),_:1},8,["class"])]),m[21]||(m[21]=w("div",{class:"h-4 w-px bg-border/50"},null,-1)),w("div",u0,[w("div",a0,[w("div",{class:wt(["w-2 h-2 rounded-full transition-colors duration-300",h(Ve)?"bg-amber-500 animate-pulse":"bg-emerald-500"])},null,2),w("span",l0,fe(h(Ve)?"Unsaved":"Saved"),1)]),C(h(Gt),{orientation:"vertical",class:"h-3"}),h(Ie)?(G(),ge("div",f0,[C(h(va),{class:"w-3 h-3 animate-spin text-primary"}),m[20]||(m[20]=w("span",{class:"text-xs text-muted-foreground"},"Analyzing",-1))])):(G(),ge("div",c0,fe(h(te)?.word_count??g.chapter.word_count)+" words ",1))])]),m[24]||(m[24]=w("div",{class:"flex-1 px-4 min-w-0"},[w("div",{id:"manual-editor-toolbar",class:"mx-auto max-w-[950px]"})],-1)),w("div",d0,[w("div",h0,[C(h(he),{variant:"ghost",size:"icon",class:"h-7 w-7 rounded-full text-zinc-700 dark:text-zinc-300 hover:text-foreground",onClick:h(fn),title:h(yr)?"Switch to Light Mode":"Switch to Dark Mode"},{default:ee(()=>[h(yr)?(G(),mt(h(mv),{key:0,class:"w-4 h-4"})):(G(),mt(h(xv),{key:1,class:"w-4 h-4"}))]),_:1},8,["onClick","title"]),C(h(he),{variant:"ghost",size:"icon",class:"h-7 w-7 rounded-full text-zinc-700 dark:text-zinc-300 hover:text-foreground",onClick:ht,title:xr.value?"Exit Full Screen":"Enter Full Screen"},{default:ee(()=>[xr.value?(G(),mt(h(wv),{key:0,class:"w-4 h-4"})):(G(),mt(h(ov),{key:1,class:"w-4 h-4"}))]),_:1},8,["title"]),C(h(he),{onClick:Kt,variant:"ghost",size:"icon",class:wt(["h-7 w-7 rounded-full transition-all duration-300",h(Lt)?"bg-background shadow-sm text-primary":"text-zinc-700 dark:text-zinc-300 hover:text-foreground"]),title:"Toggle AI Chat Mode"},{default:ee(()=>[C(h(ca),{class:"w-4 h-4"})]),_:1},8,["class"]),C(h(he),{onClick:Rn,variant:"ghost",size:"icon",class:wt(["h-7 w-7 rounded-full transition-all duration-300",pe.value?"bg-background shadow-sm text-primary":"text-zinc-700 dark:text-zinc-300 hover:text-foreground"]),title:"Toggle Tools Sidebar"},{default:ee(()=>[pe.value?(G(),mt(h(sv),{key:0,class:"w-4 h-4"})):(G(),mt(h(uv),{key:1,class:"w-4 h-4"}))]),_:1},8,["class"])]),m[23]||(m[23]=w("div",{class:"w-px h-4 bg-border/50"},null,-1)),h(Q)?(G(),mt(fv,{key:0,balance:h(Q),compact:""},null,8,["balance"])):Fe("",!0),C(av,{project:g.project,"current-chapter":g.chapter,"all-chapters":g.allChapters,size:"sm",variant:"outline",class:"h-9","button-class":"rounded-full bg-background/50"},null,8,["project","current-chapter","all-chapters"]),C(h(he),{variant:"ghost",size:"sm",class:"h-9 gap-2 text-zinc-700 dark:text-zinc-300 hover:text-foreground rounded-full bg-background/50 border border-transparent hover:border-border/50",onClick:wr,title:"Open bulk analysis"},{default:ee(()=>[C(h(yv),{class:"w-4 h-4"}),m[22]||(m[22]=w("span",{class:"text-xs font-medium"},"Analyze",-1))]),_:1}),C(h(he),{variant:"outline",size:"sm",class:"h-9 gap-2 text-zinc-700 dark:text-zinc-300 hover:text-foreground rounded-full bg-background/50",onClick:Mn,disabled:h(xe),title:"Save (Ctrl+S)"},{default:ee(()=>[C(h(Po),{class:"w-4 h-4"}),w("span",p0,fe(h(xe)?"Saving...":"Save"),1)]),_:1},8,["disabled"])])])]),w("div",g0,[w("div",v0,[m[25]||(m[25]=w("span",{class:"font-medium"},"Writing Progress",-1)),w("span",null,fe(h(te)?.word_count??g.chapter.word_count)+" / "+fe(g.chapter.target_word_count)+" words",1)]),C(h(Gg),{"model-value":qe.value,class:"h-1.5"},null,8,["model-value"])]),w("div",_0,[C(aa,{"enter-active-class":"transition-all duration-500 cubic-bezier(0.4, 0, 0.2, 1)","enter-from-class":"-ml-[320px] opacity-0","enter-to-class":"ml-0 opacity-100","leave-active-class":"transition-all duration-500 cubic-bezier(0.4, 0, 0.2, 1)","leave-from-class":"ml-0 opacity-100","leave-to-class":"-ml-[320px] opacity-0"},{default:ee(()=>[ve.value&&!Te.value?(G(),ge("aside",m0,[w("div",x0,[w("div",w0,[m[26]||(m[26]=w("h2",{class:"text-sm font-semibold text-foreground mb-1"},"Table of Contents",-1)),w("p",y0,fe(g.allChapters.length)+" Chapters",1)]),C(rv,{"all-chapters":g.allChapters,"current-chapter":g.chapter,project:g.project,outlines:g.project.outlines||[],"faculty-chapters":g.facultyChapters||[],"current-word-count":h(te)?.word_count||g.chapter.word_count,"target-word-count":g.chapter.target_word_count,"writing-quality-score":0,"chapter-content-length":h(W)?.length||0,onGoToChapter:Pt,onGenerateNextChapter:On,onDeleteChapter:Sr},null,8,["all-chapters","current-chapter","project","outlines","faculty-chapters","current-word-count","target-word-count","chapter-content-length"])])])):Fe("",!0)]),_:1}),w("div",{class:wt(["flex-1 flex overflow-hidden",Ot.value?"flex-row":"flex-col"])},[w("div",{class:wt(["flex flex-col overflow-hidden",Ot.value?"w-1/2 border-r border-border/50":"flex-1"])},[w("div",b0,[C(Hg,{ref_key:"editorRef",ref:rt,modelValue:h(W),"onUpdate:modelValue":nt,"onUpdate:selectedText":m[8]||(m[8]=I=>Zn.value=I),"onUpdate:selectionRange":m[9]||(m[9]=I=>St.value=I),"manual-mode":!0,"toolbar-teleport-target":Te.value?"":"#manual-editor-toolbar",class:"min-h-full"},null,8,["modelValue","toolbar-teleport-target"])])],2),Ot.value?(G(),ge("div",C0,[w("div",S0,[C(la,{"show-citation-helper":$e.value,"onUpdate:showCitationHelper":m[10]||(m[10]=I=>$e.value=I),"chapter-content":h(W),"chapter-id":g.chapter.id,"citation-operation-mode":!0,onInsertCitation:pn,onExitOperationMode:Yt},null,8,["show-citation-helper","chapter-content","chapter-id"])])])):Fe("",!0)],2),C(aa,{"enter-active-class":"transition-all duration-500 cubic-bezier(0.4, 0, 0.2, 1)","enter-from-class":"-mr-[400px] opacity-0","enter-to-class":"mr-0 opacity-100","leave-active-class":"transition-all duration-500 cubic-bezier(0.4, 0, 0.2, 1)","leave-from-class":"mr-0 opacity-100","leave-to-class":"-mr-[400px] opacity-0"},{default:ee(()=>[pe.value&&!Te.value?(G(),ge("aside",A0,[h(Lt)?(G(),ge("div",T0,[w("div",E0,[C(kv,{messages:h(Tn),"is-loading":h(z),analysis:h(te),class:"h-full",onSend:h(Ue),onClose:Kt},null,8,["messages","is-loading","analysis","onSend"])])])):(G(),ge("div",R0,[h(je)?(G(),ge("div",I0,[C(Yg,{suggestion:h(je),analysis:h(te),onSave:h(bt),onClear:h(Be),onApply:h(Ct)},null,8,["suggestion","analysis","onSave","onClear","onApply"]),C(h(Gt),{class:"bg-border/50"})])):Fe("",!0),C(Zg,{guidance:h(K),"is-loading":h(Le),"has-content":(h(te)?.word_count??g.chapter.word_count)>50,onToggleStep:h(ne),onGuidanceAction:Jn},null,8,["guidance","is-loading","has-content","onToggleStep"]),C(h(Gt),{class:"bg-border/50"}),C(Xg,{"project-slug":g.project.slug,"chapter-number":g.chapter.chapter_number,"selected-text":Zn.value,"chapter-content":h(W),"is-processing":h(Ie)||h(xe),"ensure-balance":In,"on-usage":Ln,onTextImproved:Zt,onTextExpanded:Cr,onCitationsSuggested:Xt,onTextRephrased:Mt,onOpenCitationHelper:m[11]||(m[11]=I=>$e.value=!0)},null,8,["project-slug","chapter-number","selected-text","chapter-content","is-processing"]),C(h(Gt),{class:"bg-border/50"}),ln.value?(G(),ge("div",L0,[w("div",O0,[m[28]||(m[28]=w("h3",{class:"text-sm font-semibold text-foreground"},"Citation Suggestions",-1)),C(h(he),{size:"sm",variant:"outline",onClick:Qn},{default:ee(()=>[...m[27]||(m[27]=[qt(" Copy ",-1)])]),_:1})]),w("pre",M0,fe(ln.value),1),C(h(Gt),{class:"bg-border/50"})])):Fe("",!0),w("div",P0,[C(la,{"show-citation-helper":$e.value,"onUpdate:showCitationHelper":m[12]||(m[12]=I=>$e.value=I),"chapter-content":h(W),"chapter-id":g.chapter.id,onInsertCitation:pn,onEnterOperationMode:He},null,8,["show-citation-helper","chapter-content","chapter-id"])]),C(h(Gt),{class:"bg-border/50"}),C(h(Gt),{class:"bg-border/50"})]))])):Fe("",!0)]),_:1}),C(Jg,{"show-left-sidebar":ve.value,"show-right-sidebar":pe.value,"is-mobile":Te.value,"all-chapters":g.allChapters,"current-chapter":g.chapter,project:g.project,"faculty-chapters":g.facultyChapters,"current-word-count":h(te)?.word_count||g.chapter.word_count,"target-word-count":g.chapter.target_word_count,"chapter-content-length":h(W)?.length||0,"selected-text":Zn.value,"is-analyzing":h(Ie),"is-saving":h(xe),"current-suggestion":h(je),"current-analysis":h(te),guidance:h(K),"is-loading-guidance":h(Le),"chapter-content":h(W),"show-citation-helper":$e.value,"ensure-balance":In,"on-usage":Ln,"onUpdate:showLeftSidebar":m[13]||(m[13]=I=>ve.value=I),"onUpdate:showRightSidebar":m[14]||(m[14]=I=>pe.value=I),"onUpdate:showCitationHelper":m[15]||(m[15]=I=>$e.value=I),onGoToChapter:Pt,onGenerateNextChapter:On,onDeleteChapter:Sr,onSaveSuggestion:h(bt),onClearSuggestion:h(Be),onApplySuggestion:h(Ct),onToggleStep:h(ne),onTextImproved:Zt,onTextExpanded:Cr,onCitationsSuggested:Xt,onTextRephrased:Mt,onInsertCitation:pn},null,8,["show-left-sidebar","show-right-sidebar","is-mobile","all-chapters","current-chapter","project","faculty-chapters","current-word-count","target-word-count","chapter-content-length","selected-text","is-analyzing","is-saving","current-suggestion","current-analysis","guidance","is-loading-guidance","chapter-content","show-citation-helper","onSaveSuggestion","onClearSuggestion","onApplySuggestion","onToggleStep"])]),w("footer",F0,[w("div",W0,[w("div",B0,[w("span",U0,[m[29]||(m[29]=w("span",{class:"hidden sm:inline"},"Words: ",-1)),w("strong",D0,fe(h(te)?.word_count??g.chapter.word_count),1),qt(" / "+fe(g.chapter.target_word_count),1)]),h(te)?(G(),ge("span",$0,[m[30]||(m[30]=qt(" Citations: ",-1)),w("strong",k0,fe(h(te).citation_count),1)])):Fe("",!0),h(te)?(G(),ge("span",z0,[m[31]||(m[31]=qt(" Tables: ",-1)),w("strong",N0,fe(h(te).table_count),1)])):Fe("",!0),h(te)?(G(),ge("span",G0," Quality: "+fe(h(te).quality_metrics.reading_level),1)):Fe("",!0)]),w("div",H0,[C(h(he),{variant:"outline",size:"sm",class:"h-8 md:h-9 gap-2 flex-1 sm:flex-initial",onClick:Mn,disabled:h(xe),title:"Save chapter"},{default:ee(()=>[C(h(Po),{class:"w-3.5 h-3.5 md:w-4 md:h-4"}),w("span",q0,fe(h(xe)?"Saving...":"Save"),1)]),_:1},8,["disabled"]),C(h(he),{variant:"default",size:"sm",class:"h-8 md:h-9 gap-2 flex-1 sm:flex-initial",onClick:mi,disabled:h(xe),title:"Save and mark chapter as complete"},{default:ee(()=>[C(h(bv),{class:"w-3.5 h-3.5 md:w-4 md:h-4"}),m[32]||(m[32]=w("span",{class:"text-xs font-medium hidden sm:inline"},"Mark Complete",-1)),m[33]||(m[33]=w("span",{class:"text-xs font-medium sm:hidden"},"Complete",-1))]),_:1},8,["disabled"])])])]),C(dv,{open:h(We),"current-balance":h(oe),"required-words":h(se),action:h(yt),"onUpdate:open":m[16]||(m[16]=I=>We.value=I),onClose:h(k)},null,8,["open","current-balance","required-words","action","onClose"]),C(h(lv),{position:"top-center"})])],64))}}),C1=Cv(K0,[["__scopeId","data-v-8fec74bb"]]);export{C1 as default};
