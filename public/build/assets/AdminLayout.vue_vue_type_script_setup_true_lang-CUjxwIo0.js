import{d as P,a as m,o as i,u as e,Q as ee,w as a,r as x,c as f,n as F,W as te,b as U,B as N,I as ae,y as se,K as t,l as h,F as l,M as u,N as I,U as A,a1 as T,H as d,L as g,af as D}from"./app-Cz7LEwRO.js";import{u as re,c as oe,d as le,e as ie,f as j,g as B,h as $,i as ne,j as V,k as q,l as O,m as de,F as ce,S as R,n as ue,o as E,C as fe,p as me,q as pe,r as ge,s as _e,t as he,v as xe,w as be}from"./UserInfo.vue_vue_type_script_setup_true_lang-C-KT_6WV.js";import{c as b,a as ye,_ as C}from"./index-DXYN62LJ.js";import{D as ve,e as ke,_ as we,a as $e,b as Ce,d as W,c as H}from"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-CrAAjc6l.js";import{U as Le}from"./users-C9mZGx8l.js";import{C as ze}from"./chart-column-C5_FW7Q4.js";import{L as Se}from"./list-DIPDsPfh.js";import{L as Me}from"./log-out-gSgR3h5N.js";import{X as Ne}from"./x-k7WiPo0f.js";import{L as Ie}from"./loader-circle-Dm6XN54h.js";const Ae=P({__name:"SheetClose",props:{asChild:{type:Boolean},as:{}},setup(y){const p=y;return(n,v)=>(i(),m(e(ve),ee({"data-slot":"sheet-close"},p),{default:a(()=>[x(n.$slots,"default")]),_:3},16))}});/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K=b("BellIcon",[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]]);/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const De=b("CpuIcon",[["rect",{width:"16",height:"16",x:"4",y:"4",rx:"2",key:"14l7u7"}],["rect",{width:"6",height:"6",x:"9",y:"9",rx:"1",key:"5aljv4"}],["path",{d:"M15 2v2",key:"13l42r"}],["path",{d:"M15 20v2",key:"15mkzm"}],["path",{d:"M2 15h2",key:"1gxd5l"}],["path",{d:"M2 9h2",key:"1bbxkp"}],["path",{d:"M20 15h2",key:"19e6y8"}],["path",{d:"M20 9h2",key:"19tzq7"}],["path",{d:"M9 2v2",key:"165o2o"}],["path",{d:"M9 20v2",key:"i2bqo8"}]]);/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q=b("LayoutDashboardIcon",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const je=b("PackageIcon",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["path",{d:"m3.3 7 7.703 4.734a2 2 0 0 0 1.994 0L20.7 7",key:"yx3hmr"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]);/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Be=b("ToggleLeftIcon",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"6",ry:"6",key:"f2vt7d"}],["circle",{cx:"8",cy:"12",r:"2",key:"1nvbw3"}]]),Fe=P({__name:"SidebarRail",props:{class:{}},setup(y){const p=y,{toggleSidebar:n}=re();return(v,k)=>(i(),f("button",{"data-sidebar":"rail","data-slot":"sidebar-rail","aria-label":"Toggle Sidebar",tabindex:-1,title:"Toggle Sidebar",class:F(e(ye)("hover:after:bg-sidebar-border absolute inset-y-0 z-20 hidden w-4 -translate-x-1/2 transition-all ease-linear group-data-[side=left]:-right-4 group-data-[side=right]:left-0 after:absolute after:inset-y-0 after:left-1/2 after:w-[2px] sm:flex","in-data-[side=left]:cursor-w-resize in-data-[side=right]:cursor-e-resize","[[data-side=left][data-state=collapsed]_&]:cursor-e-resize [[data-side=right][data-state=collapsed]_&]:cursor-w-resize","hover:group-data-[collapsible=offcanvas]:bg-sidebar group-data-[collapsible=offcanvas]:translate-x-0 group-data-[collapsible=offcanvas]:after:left-full","[[data-side=left][data-collapsible=offcanvas]_&]:-right-2","[[data-side=right][data-collapsible=offcanvas]_&]:-left-2",p.class)),onClick:k[0]||(k[0]=(...w)=>e(n)&&e(n)(...w))},[x(v.$slots,"default")],2))}}),Pe={class:"flex h-8 w-8 items-center justify-center rounded-lg bg-primary text-primary-foreground"},Ue={class:"font-medium"},Te={class:"font-medium"},Ve={class:"flex items-center gap-2 px-2 py-2 text-left text-sm"},qe={class:"sticky top-0 z-10 border-b border-border bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60"},Oe={class:"max-w-7xl mx-auto px-4 md:px-8 min-h-16 py-3 flex items-center justify-between"},Re={class:"flex items-center gap-3"},Ee={class:"flex flex-col leading-tight"},We={class:"text-2xl font-bold tracking-tight text-foreground"},He={key:0,class:"text-muted-foreground text-sm"},Ke={class:"flex items-center gap-3 md:gap-6"},Qe={key:0,class:"absolute -top-1 -right-1 flex h-4 min-w-4 items-center justify-center rounded-full bg-destructive px-1 text-[10px] font-semibold text-destructive-foreground ring-2 ring-background"},Xe={class:"hidden md:flex items-center gap-3 text-sm text-muted-foreground"},Ye={class:"flex-1 overflow-y-auto"},Ge={class:"max-w-7xl mx-auto px-4 md:px-8 py-6 md:py-8"},Je={class:"flex items-center justify-between gap-3"},Ze={class:"space-y-1"},et={class:"flex items-center gap-2"},tt={class:"flex-1 overflow-y-auto divide-y divide-border/40"},at={key:0,class:"p-4 text-sm text-muted-foreground flex items-center gap-2"},st={key:1,class:"p-6 text-sm text-muted-foreground"},rt={class:"flex-1 space-y-1"},ot={class:"text-sm font-semibold text-foreground"},lt={class:"text-xs text-muted-foreground leading-relaxed"},it={class:"text-[11px] text-muted-foreground"},bt=P({__name:"AdminLayout",props:{title:{},subtitle:{}},setup(y){const p=te(),n=U(()=>p.props.auth?.user),v=[{href:"/admin",label:"Dashboard",icon:Q,exact:!0},{href:"/admin/users",label:"Users",icon:Le},{href:"/admin/payments",label:"Payments",icon:de},{href:"/admin/packages",label:"Packages",icon:je},{href:"/admin/projects",label:"Projects",icon:ce},{href:"/admin/analytics",label:"Analytics",icon:ze}],k=[{href:"/admin/ai",label:"AI Monitoring",icon:De},{href:"/admin/system/features",label:"Feature Flags",icon:Be},{href:"/admin/system/settings",label:"Settings",icon:R},{href:"/admin/audit",label:"Audit Logs",icon:Se},{href:"/admin/notifications",label:"Notifications",icon:K}],w=(r,s=!1)=>s?p.url===r:p.url.startsWith(r),L=N(!1),c=N([]),z=N(!1),S=async()=>{try{z.value=!0;const r=await D.get("/admin/notifications",{params:{format:"json"}});c.value=r.data.notifications??[]}catch(r){console.error("Failed to load notifications",r)}finally{z.value=!1}},X=async()=>{L.value=!0,await S()},_=U(()=>c.value.filter(r=>!r.is_read&&!r.read_at).length),Y=async r=>{try{await D.post(`/admin/notifications/${r}/read`),c.value=c.value.map(s=>s.id===r?{...s,is_read:!0,read_at:new Date().toISOString()}:s)}catch(s){console.error("Failed to mark notification as read",s)}},G=async()=>{if(c.value.length)try{await D.post("/admin/notifications/read-all"),c.value=c.value.map(r=>({...r,is_read:!0,read_at:new Date().toISOString()}))}catch(r){console.error("Failed to mark all notifications as read",r)}},J=r=>r?r.replace(/_/g," ").replace(/\b\w/g,s=>s.toUpperCase()):"Notification",Z=r=>{if(!r)return"";const s=new Date(r);return new Intl.DateTimeFormat("en",{dateStyle:"medium",timeStyle:"short"}).format(s)};let M=null;return ae(()=>{S(),M=window.Echo?.private("admin.ai"),M?.listen(".ai.provisioning.updated",()=>{S()})}),se(()=>{M?.stopListening(".ai.provisioning.updated")}),(r,s)=>(i(),m(e(oe),null,{default:a(()=>[t(e(le),{collapsible:"icon",variant:"inset",class:"border-r border-border bg-sidebar"},{default:a(()=>[t(e(ie),{class:"h-16 flex items-center justify-center border-b border-border/50 px-4"},{default:a(()=>[t(e(j),null,{default:a(()=>[t(e(B),null,{default:a(()=>[t(e($),{size:"lg",class:"hover:bg-transparent data-[state=open]:bg-transparent"},{default:a(()=>[t(e(h),{href:"/admin",class:"flex items-center gap-3 w-full"},{default:a(()=>[l("div",Pe,[t(e(Q),{class:"h-5 w-5"})]),s[1]||(s[1]=l("div",{class:"flex flex-col gap-0.5 leading-none"},[l("span",{class:"font-semibold text-foreground"},"Admin Panel"),l("span",{class:"text-xs text-muted-foreground"},"v1.0.0")],-1))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),t(e(ne),{class:"py-4"},{default:a(()=>[t(e(V),null,{default:a(()=>[t(e(q),{class:"px-4 text-xs font-medium text-muted-foreground/70 uppercase tracking-wider mb-2"},{default:a(()=>[...s[2]||(s[2]=[u(" Platform",-1)])]),_:1}),t(e(O),null,{default:a(()=>[t(e(j),null,{default:a(()=>[(i(),f(I,null,A(v,o=>t(e(B),{key:o.href},{default:a(()=>[t(e($),{"as-child":"","is-active":w(o.href,o.exact),tooltip:o.label,class:"px-4 py-2 h-auto transition-colors hover:bg-muted/50 data-[active=true]:bg-primary/10 data-[active=true]:text-primary"},{default:a(()=>[t(e(h),{href:o.href,class:"flex items-center gap-3"},{default:a(()=>[(i(),m(T(o.icon),{class:"h-4 w-4"})),l("span",Ue,d(o.label),1)]),_:2},1032,["href"])]),_:2},1032,["is-active","tooltip"])]),_:2},1024)),64))]),_:1})]),_:1})]),_:1}),t(e(V),{class:"mt-4"},{default:a(()=>[t(e(q),{class:"px-4 text-xs font-medium text-muted-foreground/70 uppercase tracking-wider mb-2"},{default:a(()=>[...s[3]||(s[3]=[u(" System",-1)])]),_:1}),t(e(O),null,{default:a(()=>[t(e(j),null,{default:a(()=>[(i(),f(I,null,A(k,o=>t(e(B),{key:o.href},{default:a(()=>[t(e($),{"as-child":"","is-active":w(o.href),tooltip:o.label,class:"px-4 py-2 h-auto transition-colors hover:bg-muted/50 data-[active=true]:bg-primary/10 data-[active=true]:text-primary"},{default:a(()=>[t(e(h),{href:o.href,class:"flex items-center gap-3"},{default:a(()=>[(i(),m(T(o.icon),{class:"h-4 w-4"})),l("span",Te,d(o.label),1)]),_:2},1032,["href"])]),_:2},1032,["is-active","tooltip"])]),_:2},1024)),64))]),_:1})]),_:1})]),_:1})]),_:1}),t(e(ue),{class:"border-t border-border/50 p-4"},{default:a(()=>[t(e(ke),null,{default:a(()=>[t(e(we),{"as-child":""},{default:a(()=>[t(e($),{size:"lg",class:"data-[state=open]:bg-sidebar-accent data-[state=open]:text-sidebar-accent-foreground hover:bg-muted/50 transition-colors"},{default:a(()=>[n.value?(i(),m(E,{key:0,user:n.value},null,8,["user"])):g("",!0),t(e(fe),{class:"ml-auto size-4 text-muted-foreground"})]),_:1})]),_:1}),t(e($e),{class:"w-[--radix-dropdown-menu-trigger-width] min-w-56 rounded-lg",side:"top",align:"start","side-offset":8},{default:a(()=>[t(e(Ce),{class:"p-0 font-normal"},{default:a(()=>[l("div",Ve,[n.value?(i(),m(E,{key:0,user:n.value,"show-email":!0},null,8,["user"])):g("",!0)])]),_:1}),t(e(W)),t(e(H),{"as-child":!0},{default:a(()=>[t(e(h),{class:"block w-full cursor-pointer",href:r.route("profile.edit"),prefetch:"",as:"button"},{default:a(()=>[t(e(R),{class:"mr-2 h-4 w-4"}),s[4]||(s[4]=u(" Settings ",-1))]),_:1},8,["href"])]),_:1}),t(e(W)),t(e(H),{"as-child":!0},{default:a(()=>[t(e(h),{class:"block w-full cursor-pointer text-rose-500 focus:text-rose-500",method:"post",href:r.route("logout"),as:"button"},{default:a(()=>[t(e(Me),{class:"mr-2 h-4 w-4"}),s[5]||(s[5]=u(" Log out ",-1))]),_:1},8,["href"])]),_:1})]),_:1})]),_:1})]),_:1}),t(e(Fe))]),_:1}),t(e(me),{class:"bg-background text-foreground flex min-h-screen flex-col"},{default:a(()=>[l("header",qe,[l("div",Oe,[l("div",Re,[t(e(pe)),x(r.$slots,"title",{},()=>[l("div",Ee,[l("h2",We,d(r.title??"Admin"),1),r.subtitle?(i(),f("p",He,d(r.subtitle),1)):g("",!0)])])]),l("div",Ke,[x(r.$slots,"actions",{},()=>[t(e(C),{variant:"ghost",size:"icon",class:"relative text-muted-foreground hover:text-foreground transition-colors",onClick:X},{default:a(()=>[t(e(K),{class:"h-5 w-5"}),_.value>0?(i(),f("span",Qe,d(_.value>99?"99+":_.value),1)):g("",!0),s[6]||(s[6]=l("span",{class:"sr-only"},"Notifications",-1))]),_:1})]),l("div",Xe,[l("span",null,d(n.value?.name),1),s[7]||(s[7]=l("span",{class:"text-muted-foreground/50"},"â€¢",-1)),s[8]||(s[8]=l("a",{href:"/dashboard",class:"text-primary hover:text-primary/80 text-xs font-medium transition-colors"},"Back to app",-1))])])])]),l("main",Ye,[l("div",Ge,[x(r.$slots,"default")])]),t(e(ge),{open:L.value,"onUpdate:open":s[0]||(s[0]=o=>L.value=o)},{default:a(()=>[t(e(_e),{class:"w-full sm:max-w-md p-0 flex flex-col h-full bg-background/95 backdrop-blur-sm shadow-2xl border-l-primary/10"},{default:a(()=>[t(e(he),{class:"px-6 py-4 border-b bg-muted/30 sticky top-0 z-10"},{default:a(()=>[l("div",Je,[l("div",Ze,[t(e(xe),{class:"text-xl font-bold"},{default:a(()=>[...s[9]||(s[9]=[u("Notifications",-1)])]),_:1}),t(e(be),null,{default:a(()=>[u("You have "+d(_.value)+" unread messages",1)]),_:1})]),l("div",et,[_.value>0?(i(),m(e(C),{key:0,variant:"outline",size:"sm",class:"text-xs",onClick:G},{default:a(()=>[...s[10]||(s[10]=[u(" Mark all read ",-1)])]),_:1})):g("",!0),t(e(Ae),{"as-child":""},{default:a(()=>[t(e(C),{variant:"ghost",size:"icon"},{default:a(()=>[t(e(Ne),{class:"h-4 w-4"})]),_:1})]),_:1})])])]),_:1}),l("div",tt,[z.value?(i(),f("div",at,[t(e(Ie),{class:"h-4 w-4 animate-spin"}),s[11]||(s[11]=u(" Loading notifications... ",-1))])):c.value.length?(i(!0),f(I,{key:2},A(c.value,o=>(i(),f("div",{key:o.id,class:F(["flex items-start gap-3 p-4 hover:bg-muted/40 transition-colors",{"bg-primary/5":!o.is_read&&!o.read_at}])},[l("span",{class:F(["mt-1 h-2.5 w-2.5 rounded-full",o.is_read||o.read_at?"bg-muted-foreground/40":"bg-primary"])},null,2),l("div",rt,[l("p",ot,d(o.title??J(o.type)),1),l("p",lt,d(o.message??o.data?.message??"No details provided"),1),l("div",it,d(Z(o.created_at)),1)]),!o.is_read&&!o.read_at?(i(),m(e(C),{key:0,variant:"ghost",size:"sm",class:"text-xs",onClick:nt=>Y(o.id)},{default:a(()=>[...s[12]||(s[12]=[u(" Mark read ",-1)])]),_:2},1032,["onClick"])):g("",!0)],2))),128)):(i(),f("div",st," No notifications yet. "))])]),_:1})]),_:1},8,["open"])]),_:3})]),_:3}))}});export{De as C,je as P,bt as _};
