import{_ as v}from"./index-D4mJyiz8.js";import{_ as k,a as j}from"./CardContent.vue_vue_type_script_setup_true_lang-CtTakpSW.js";import{_ as C}from"./CardDescription.vue_vue_type_script_setup_true_lang-Xz6hS9KU.js";import{_ as S,a as A}from"./CardTitle.vue_vue_type_script_setup_true_lang-XJ5or5ZK.js";import{_ as O,a as q}from"./DialogContent.vue_vue_type_script_setup_true_lang-DATQht2f.js";import{_ as V}from"./DialogDescription.vue_vue_type_script_setup_true_lang-DsP71UmP.js";import{_ as X}from"./DialogFooter.vue_vue_type_script_setup_true_lang-B5lGGt-M.js";import{_ as I,a as M}from"./DialogTitle.vue_vue_type_script_setup_true_lang-Cb9j7AhV.js";import{a as J}from"./AppLayout.vue_vue_type_script_setup_true_lang-B2pR5-jN.js";import{_ as E}from"./SafeHtmlText.vue_vue_type_script_setup_true_lang-tt96GLrc.js";import{bu as W,bt as _,cn as g,co as c,cp as s,cr as o,cq as r,bF as t,cV as Y,dm as T,cs as a,en as H,ct as u,dZ as K,eC as Z,eE as Q,cX as ee,cI as $,cD as te,dB as oe,eB as re,hG as se,cA as N,d1 as R,cu as B,cl as b,cj as f,ce as x}from"./vendor-B5jlBrgV.js";import"./UserInfo.vue_vue_type_script_setup_true_lang-w4YHLOMg.js";import"./TooltipTrigger.vue_vue_type_script_setup_true_lang-C5iiu9qR.js";import"./Sonner.vue_vue_type_script_setup_true_lang-sxjlERgN.js";import"./AppLogo.vue_vue_type_script_setup_true_lang-BodEwO0Z.js";import"./WordBalanceDisplay.vue_vue_type_script_setup_true_lang-DBc7hWuL.js";import"./useAppearance-D3We0oPJ.js";import"./useWordBalance-D_NxFp97.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./PWAInstallPrompt.vue_vue_type_script_setup_true_lang-D12IZ_KU.js";const le={class:"min-h-screen bg-background relative selection:bg-primary/10 selection:text-primary"},ae={class:"sticky top-0 z-40 w-full border-b border-border/40 bg-background/80 backdrop-blur-xl supports-[backdrop-filter]:bg-background/60"},ie={class:"container mx-auto flex h-16 items-center justify-between py-4 px-4"},ne={class:"flex items-center gap-4"},de={class:"container mx-auto max-w-5xl py-8 pb-24 px-4 relative z-10 space-y-8"},pe={class:"space-y-4 text-center pb-2"},ce={class:"flex justify-center mb-6"},ue={class:"relative flex items-center justify-center h-16 w-16 rounded-full bg-gradient-to-tr from-yellow-500/20 to-orange-500/20 border border-white/10 shadow-[0_0_30px_rgba(234,179,8,0.2)]"},fe={class:"grid grid-cols-2 md:grid-cols-4 gap-3 md:gap-4"},me={class:"flex flex-col gap-1 p-3 rounded-xl bg-card/50 border border-border/50 backdrop-blur-sm"},ge={class:"text-[10px] uppercase text-muted-foreground font-medium flex items-center gap-1.5"},be=["title"],ve={class:"flex flex-col gap-1 p-3 rounded-xl bg-card/50 border border-border/50 backdrop-blur-sm"},xe={class:"text-[10px] uppercase text-muted-foreground font-medium flex items-center gap-1.5"},he={class:"text-sm font-medium truncate capitalize"},we={class:"flex flex-col gap-1 p-3 rounded-xl bg-card/50 border border-border/50 backdrop-blur-sm"},_e={class:"text-[10px] uppercase text-muted-foreground font-medium flex items-center gap-1.5"},ye=["title"],ke={class:"flex flex-col gap-1 p-3 rounded-xl bg-card/50 border border-border/50 backdrop-blur-sm"},je={class:"text-[10px] uppercase text-muted-foreground font-medium flex items-center gap-1.5"},Ce={class:"text-sm font-medium truncate"},Se={class:"flex items-center gap-3"},Ae={class:"p-2 rounded-lg bg-primary/10 text-primary"},Te={class:"space-y-4"},$e={key:1,class:"relative pl-4 border-l-2 border-primary/20"},Pe={class:"grid gap-6 md:grid-cols-2"},Ke=W({__name:"TopicApproval",props:{project:{}},setup(z){const d=z,m=_(!1),h=_(!1),w=_(!1),n=_(null),L=async()=>{h.value=!0;try{const l=await fetch(b("topics.export-pdf",d.project.slug),{method:"GET",headers:{"X-Requested-With":"XMLHttpRequest",Accept:"application/pdf"}});if(!l.ok)throw new Error("Network response was not ok");const e=await l.blob(),i=window.URL.createObjectURL(e),p=document.createElement("a");p.href=i,p.download=`project_topic_proposal_${d.project.slug}.pdf`,document.body.appendChild(p),p.click(),window.URL.revokeObjectURL(i),document.body.removeChild(p),f("ðŸ“„ PDF Generated!",{description:"Topic proposal downloaded successfully. Share with your supervisor."})}catch(l){console.error("PDF Export error:",l),f("Export Failed",{description:"Could not generate PDF. Please try again."})}finally{h.value=!1}},P=l=>{n.value=l,w.value=!0},U=async()=>{if(n.value===null)return;const l=n.value;w.value=!1,m.value=!0;try{const i=await(await fetch(b("topics.approve",d.project.slug),{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")||""},body:JSON.stringify({approved:l})})).json();if(i.success)if(l){const p=i.redirect_route,D=i.redirect_url,F=i.mode==="auto"||p==="projects.writing";if(f(F?"Topic Approved!":"ðŸŽ‰ Topic Approved!",{description:F?"Auto mode selected. Jumping straight into the writing workspace.":"Perfect! Now let's set up your AI writing assistant based on your mode preference."}),D)x.visit(D);else if(p==="projects.writing"){const y=i.slug||d.project.slug;x.visit(b("projects.writing",y))}else{const y=i.slug||d.project.slug;x.visit(b("projects.guidance",y))}}else f("New Topic Needed",{description:"No problem! Let's find a topic that works better for your supervisor."}),x.visit(b("projects.topic-selection",d.project.slug))}catch{f("Error",{description:"Failed to update approval status. Please try again."})}finally{m.value=!1,n.value=null}},G=async()=>{try{x.post(b("projects.go-back-to-topic-selection",d.project.slug),{},{onSuccess:()=>{f("Success",{description:"Returned to topic selection"}),x.visit(b("projects.topic-selection",d.project.slug))},onError:()=>{f("Error",{description:"Failed to go back to topic selection. Please try again."})}})}catch{f("Error",{description:"Failed to go back to topic selection. Please try again."})}};return(l,e)=>(c(),g(J,{title:"Topic Approval"},{default:s(()=>[o("div",le,[e[23]||(e[23]=o("div",{class:"fixed inset-0 pointer-events-none z-0"},[o("div",{class:"absolute top-0 right-0 w-3/4 h-3/4 bg-yellow-500/5 rounded-full blur-[120px] opacity-50"}),o("div",{class:"absolute bottom-0 left-0 w-1/2 h-1/2 bg-yellow-500/5 rounded-full blur-[100px] opacity-30"})],-1)),o("header",ae,[o("div",ie,[o("div",ne,[r(t(v),{onClick:G,variant:"ghost",size:"icon",class:"h-9 w-9 rounded-full text-muted-foreground hover:text-foreground hover:bg-muted/80"},{default:s(()=>[r(t(Y),{class:"h-4 w-4"})]),_:1}),e[4]||(e[4]=o("div",{class:"flex flex-col"},[o("h1",{class:"text-sm font-semibold leading-none flex items-center gap-2"}," Topic Approval "),o("p",{class:"text-[10px] text-muted-foreground uppercase tracking-wider font-medium"},"Step 3 of 4")],-1))])])]),o("main",de,[o("div",pe,[o("div",ce,[o("div",ue,[e[5]||(e[5]=o("div",{class:"absolute inset-0 rounded-full bg-yellow-500/10 blur-xl"},null,-1)),r(t(T),{class:"h-8 w-8 text-yellow-400 drop-shadow-[0_0_10px_rgba(250,204,21,0.8)] relative z-10"})])]),e[6]||(e[6]=o("div",{class:"space-y-2"},[o("h2",{class:"text-3xl font-bold tracking-tight sm:text-4xl bg-gradient-to-br from-foreground via-foreground to-muted-foreground bg-clip-text text-transparent"}," Awaiting Supervisor Approval "),o("p",{class:"mx-auto max-w-[600px] text-muted-foreground text-lg leading-relaxed"}," Your project topic is ready for review. Share it with your supervisor and update the status below. ")],-1))]),o("div",fe,[o("div",me,[o("span",ge,[r(t(H),{class:"h-3 w-3"}),e[7]||(e[7]=a(" Field ",-1))]),o("span",{class:"text-sm font-medium truncate",title:l.project.field_of_study},u(l.project.field_of_study),9,be)]),o("div",ve,[o("span",xe,[r(t(K),{class:"h-3 w-3"}),e[8]||(e[8]=a(" Level ",-1))]),o("span",he,u(l.project.type),1)]),o("div",we,[o("span",_e,[r(t(Z),{class:"h-3 w-3"}),e[9]||(e[9]=a(" Institution ",-1))]),o("span",{class:"text-sm font-medium truncate",title:l.project.full_university_name||l.project.university},u(l.project.university),9,ye)]),o("div",ke,[o("span",je,[r(t(Q),{class:"h-3 w-3"}),e[10]||(e[10]=a(" Supervisor ",-1))]),o("span",Ce,u(l.project.supervisor_name||"Not assigned"),1)])]),r(t(k),{class:"border-border/50 shadow-lg shadow-primary/5 bg-card/80 backdrop-blur-sm overflow-hidden"},{default:s(()=>[r(t(S),{class:"border-b border-border/40 bg-muted/10 pb-4"},{default:s(()=>[o("div",Se,[o("div",Ae,[r(t(ee),{class:"h-5 w-5"})]),o("div",null,[r(t(A),{class:"text-lg"},{default:s(()=>[...e[11]||(e[11]=[a("Selected Topic",-1)])]),_:1}),r(t(C),null,{default:s(()=>[...e[12]||(e[12]=[a("The topic currently pending approval",-1)])]),_:1})])])]),_:1}),r(t(j),{class:"p-6 md:p-8 space-y-6"},{default:s(()=>[o("div",Te,[l.project.topic?(c(),g(E,{key:0,as:"h3",class:"text-2xl font-bold text-foreground leading-tight",content:l.project.topic},null,8,["content"])):$("",!0),l.project.description?(c(),te("div",$e,[e[13]||(e[13]=o("h4",{class:"text-sm font-semibold text-muted-foreground mb-2"},"Description / Scope",-1)),r(E,{as:"div",class:"prose prose-invert prose-sm sm:prose-base max-w-none text-foreground/80 leading-relaxed",content:l.project.description},null,8,["content"])])):$("",!0)])]),_:1})]),_:1}),o("div",Pe,[r(t(k),{class:"group relative overflow-hidden border-border/50 bg-card/50 backdrop-blur-sm transition-all duration-300 hover:shadow-lg hover:border-blue-500/30 flex flex-col h-full"},{default:s(()=>[e[16]||(e[16]=o("div",{class:"absolute -right-12 -top-12 h-40 w-40 rounded-full bg-blue-500/5 group-hover:bg-blue-500/10 transition-colors blur-3xl"},null,-1)),r(t(S),{class:"relative"},{default:s(()=>[r(t(A),{class:"flex items-center gap-2 text-lg group-hover:text-blue-500 transition-colors"},{default:s(()=>[r(t(oe),{class:"h-5 w-5 text-blue-500"}),e[14]||(e[14]=a(" Share with Supervisor ",-1))]),_:1}),r(t(C),null,{default:s(()=>[...e[15]||(e[15]=[a("Download a professional PDF proposal to submit to your supervisor.",-1)])]),_:1})]),_:1}),r(t(j),{class:"mt-auto pt-0 relative"},{default:s(()=>[r(t(v),{onClick:L,disabled:h.value,size:"lg",variant:"outline",class:"w-full h-12 border-blue-200/20 hover:bg-blue-500/10 hover:text-blue-500 hover:border-blue-500/50 transition-all font-medium"},{default:s(()=>[h.value?(c(),g(t(T),{key:1,class:"mr-2 h-4 w-4 animate-spin"})):(c(),g(t(re),{key:0,class:"mr-2 h-4 w-4"})),a(" "+u(h.value?"Generating PDF...":"Download Proposal PDF"),1)]),_:1},8,["disabled"])]),_:1})]),_:1}),r(t(k),{class:"group relative overflow-hidden border-border/50 bg-card/50 backdrop-blur-sm transition-all duration-300 hover:shadow-lg hover:border-green-500/30 flex flex-col h-full"},{default:s(()=>[e[21]||(e[21]=o("div",{class:"absolute -right-12 -top-12 h-40 w-40 rounded-full bg-green-500/5 group-hover:bg-green-500/10 transition-colors blur-3xl"},null,-1)),r(t(S),{class:"relative"},{default:s(()=>[r(t(A),{class:"flex items-center gap-2 text-lg group-hover:text-green-500 transition-colors"},{default:s(()=>[r(t(se),{class:"h-5 w-5 text-green-600"}),e[17]||(e[17]=a(" Update Status ",-1))]),_:1}),r(t(C),null,{default:s(()=>[...e[18]||(e[18]=[a("Record your supervisor's decision to proceed.",-1)])]),_:1})]),_:1}),r(t(j),{class:"mt-auto pt-0 grid grid-cols-2 gap-3 relative"},{default:s(()=>[r(t(v),{onClick:e[0]||(e[0]=()=>P(!0)),disabled:m.value,class:"h-12 bg-green-600 hover:bg-green-700 text-white shadow-lg shadow-green-600/10 transition-all hover:scale-[1.02] font-medium"},{default:s(()=>[r(t(N),{class:"mr-2 h-4 w-4"}),e[19]||(e[19]=a(" Approved ",-1))]),_:1},8,["disabled"]),r(t(v),{onClick:e[1]||(e[1]=()=>P(!1)),disabled:m.value,variant:"outline",class:"h-12 border-red-200/20 text-red-500 hover:bg-red-500/10 hover:border-red-500/50 hover:text-red-600 transition-all hover:scale-[1.02] font-medium"},{default:s(()=>[r(t(R),{class:"mr-2 h-4 w-4"}),e[20]||(e[20]=a(" Rejected ",-1))]),_:1},8,["disabled"])]),_:1})]),_:1})]),r(t(O),{open:w.value,"onUpdate:open":e[3]||(e[3]=i=>w.value=i)},{default:s(()=>[r(t(q),{class:"sm:max-w-md border-border/50 shadow-2xl bg-background/95 backdrop-blur-xl"},{default:s(()=>[r(t(I),null,{default:s(()=>[r(t(M),{class:"flex items-center gap-2 text-xl"},{default:s(()=>[o("div",{class:B([n.value?"bg-green-100 dark:bg-green-500/10 text-green-600 dark:text-green-500":"bg-red-100 dark:bg-red-500/10 text-red-600 dark:text-red-500","p-2 rounded-full"])},[n.value?(c(),g(t(N),{key:0,class:"h-5 w-5"})):(c(),g(t(R),{key:1,class:"h-5 w-5"}))],2),a(" "+u(n.value?"Confirm Approval":"Confirm Rejection"),1)]),_:1}),r(t(V),{class:"pt-2 text-base text-muted-foreground"},{default:s(()=>[a(u(n.value?"Great news! Confirm that your supervisor has approved this topic. We will proceed to the next stage.":"Confirm that your supervisor wants you to change this topic. You will be redirected to select a new one."),1)]),_:1})]),_:1}),r(t(X),{class:"gap-2 sm:gap-0 mt-4"},{default:s(()=>[r(t(v),{onClick:e[2]||(e[2]=i=>w.value=!1),variant:"ghost"},{default:s(()=>[...e[22]||(e[22]=[a(" Cancel ",-1)])]),_:1}),r(t(v),{onClick:U,disabled:m.value,class:B([n.value?"bg-green-600 hover:bg-green-700 text-white":"bg-red-600 hover:bg-red-700 text-white","min-w-[100px]"])},{default:s(()=>[m.value?(c(),g(t(T),{key:0,class:"mr-2 h-4 w-4 animate-spin"})):$("",!0),a(" "+u(m.value?"Processing...":"Confirm"),1)]),_:1},8,["disabled","class"])]),_:1})]),_:1})]),_:1},8,["open"])])])]),_:1}))}});export{Ke as default};
