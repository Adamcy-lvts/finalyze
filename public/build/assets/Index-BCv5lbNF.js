import{d as P,P as M,g as $,o as f,w as a,e as t,u as e,b as i,c1 as z,h as o,aq as Y,bo as H,q as T,aw as _,bG as J,s as Q,l as C,r as B,ax as R,c2 as W,a as p,aY as X,t as m,bk as Z,p as ee,aD as te,c as v,F as se,f as ae,a1 as le}from"./vendor-H8yUxHVJ.js";import{s as S}from"./useAppearance-DRazjLJ1.js";import{_ as re}from"./AdminLayout.vue_vue_type_script_setup_true_lang-CCjfYqFc.js";import{_ as oe}from"./DataTable.vue_vue_type_script_setup_true_lang-CRoS6mHF.js";import{_ as q}from"./Switch.vue_vue_type_script_setup_true_lang-DCko7Dmp.js";import{_ as w}from"./index-CwD5qkLf.js";import{a as ue,b as ie,e as de,c as O,f as ne,_ as ce}from"./Sonner.vue_vue_type_script_setup_true_lang-a4iHnNww.js";import{_ as F,a as h}from"./CardContent.vue_vue_type_script_setup_true_lang-DTkdfvuV.js";import{_ as me}from"./CardDescription.vue_vue_type_script_setup_true_lang-BbSl0Z72.js";import{_ as U,a as E}from"./CardTitle.vue_vue_type_script_setup_true_lang-B5y-_hAe.js";import{_ as A}from"./Input.vue_vue_type_script_setup_true_lang-DRx-Lc7N.js";import{_ as b}from"./Label.vue_vue_type_script_setup_true_lang-PAGjh1rG.js";import{_ as fe}from"./Textarea.vue_vue_type_script_setup_true_lang-DS0pc_gN.js";import{_ as _e,a as pe}from"./index-DHzEmSrj.js";import{_ as ge}from"./AlertTitle.vue_vue_type_script_setup_true_lang-C9ZZR0lx.js";import{_ as ye,a as ve}from"./DialogContent.vue_vue_type_script_setup_true_lang-Dw7gJkgN.js";import{_ as xe}from"./DialogDescription.vue_vue_type_script_setup_true_lang-nvWA5ydV.js";import{_ as be,a as $e}from"./DialogTitle.vue_vue_type_script_setup_true_lang-Biexvk_x.js";import{_ as we,a as ke,b as Ve,c as Ce,d as K}from"./SelectValue.vue_vue_type_script_setup_true_lang-9plmDTMM.js";import"./UserInfo.vue_vue_type_script_setup_true_lang-B2g6QnB0.js";import"./Presence-Cn1h4MwK.js";import"./useForwardExpose-CEOuSuYA.js";import"./index-CZRrGrlM.js";import"./DialogTitle-FvR-dACM.js";import"./TooltipTrigger.vue_vue_type_script_setup_true_lang-ev0g6x5g.js";import"./VisuallyHidden-BvUOvbOk.js";import"./index-JqClP2ZZ.js";import"./TableHeader.vue_vue_type_script_setup_true_lang-BhA0_Tu7.js";import"./useFormControl-BAvnyqrf.js";import"./VisuallyHiddenInput-Bdtjo0T1.js";import"./useNonce-DREsFUzM.js";import"./ohash.D__AXeF1-C-E83dC9.js";import"./nullish-CHIgUVhi.js";const Se=P({__name:"FacultyActions",props:{faculty:{}},setup(r){const n=r,x=M("onEditFaculty"),k=()=>{confirm(`Delete ${n.faculty.name}?`)&&T.delete(S("admin.system.faculties.destroy",{faculty:n.faculty.id}),{preserveScroll:!0})};return(j,c)=>(f(),$(e(ce),null,{default:a(()=>[t(e(ue),{"as-child":""},{default:a(()=>[t(e(w),{variant:"ghost",class:"h-8 w-8 p-0"},{default:a(()=>[c[1]||(c[1]=i("span",{class:"sr-only"},"Open menu",-1)),t(e(z),{class:"h-4 w-4"})]),_:1})]),_:1}),t(e(ie),{align:"end"},{default:a(()=>[t(e(de),null,{default:a(()=>[...c[2]||(c[2]=[o("Actions",-1)])]),_:1}),t(e(O),{onClick:c[0]||(c[0]=g=>e(x)?.(n.faculty))},{default:a(()=>[t(e(Y),{class:"mr-2 h-4 w-4"}),c[3]||(c[3]=o(" Edit ",-1))]),_:1}),t(e(ne)),t(e(O),{onClick:k,class:"text-rose-600 focus:text-rose-600 focus:bg-rose-50"},{default:a(()=>[t(e(H),{class:"mr-2 h-4 w-4"}),c[4]||(c[4]=o(" Delete ",-1))]),_:1})]),_:1})]),_:1}))}}),Fe=(r,n)=>{T.put(S("admin.system.faculties.toggle-active",{faculty:r.id}),{is_active:n},{preserveScroll:!0})},he=[{accessorKey:"name",header:({column:r})=>_(w,{variant:"ghost",class:"-ml-2 text-xs hover:bg-muted/50",onClick:()=>r.toggleSorting(r.getIsSorted()==="asc")},()=>["Name",_(J,{class:"ml-2 h-3 w-3"})]),cell:({row:r})=>{const n=r.getValue("name"),x=r.original.slug;return _("div",{class:"flex flex-col"},[_("span",{class:"font-medium"},n),_("span",{class:"text-xs text-muted-foreground"},x)])}},{accessorKey:"faculty_structure_name",header:"Structure",cell:({row:r})=>r.original.faculty_structure_name||"â€”"},{accessorKey:"sort_order",header:"Order",cell:({row:r})=>r.getValue("sort_order")},{accessorKey:"is_active",header:"Active",cell:({row:r})=>_(q,{checked:r.original.is_active,"onUpdate:checked":n=>Fe(r.original,n)})},{id:"actions",cell:({row:r})=>_(Se,{faculty:r.original})}],Ue={class:"grid gap-4 md:grid-cols-2 mb-6"},Ee={class:"text-2xl font-bold"},Ae={class:"text-2xl font-bold"},je={class:"grid gap-4 py-4"},Ne={class:"grid gap-4 md:grid-cols-2"},De={class:"space-y-1"},Be={key:0,class:"text-xs text-rose-500"},Oe={class:"space-y-1"},Ke={key:0,class:"text-xs text-rose-500"},Pe={class:"grid gap-4 md:grid-cols-2"},Te={class:"space-y-1"},qe={key:0,class:"text-xs text-rose-500"},Ie={class:"space-y-1"},Ge={key:0,class:"text-xs text-rose-500"},Le={class:"space-y-1"},Me={key:0,class:"text-xs text-rose-500"},ze={class:"flex items-center justify-between rounded-md border border-border/70 bg-muted/30 px-3 py-2 text-sm"},Ye={class:"flex justify-end gap-2"},St=P({__name:"Index",props:{faculties:{},structures:{},stats:{}},setup(r){const n=r,x=Q(),k=C(()=>x.props.flash),j=C(()=>n.faculties??[]),c=C(()=>n.structures??[]),g=B(null),y=B(!1),N=()=>({name:"",slug:"",description:"",faculty_structure_id:"",sort_order:0,is_active:!0}),l=R({...N()}),V=C(()=>g.value!==null),D=()=>{g.value=null,l.clearErrors(),Object.assign(l,N())},I=()=>{D(),y.value=!0},G=d=>{g.value=d.id,l.clearErrors(),l.name=d.name??"",l.slug=d.slug??"",l.description=d.description??"",l.faculty_structure_id=d.faculty_structure_id?String(d.faculty_structure_id):"",l.sort_order=Number(d.sort_order??0),l.is_active=!!d.is_active,y.value=!0},L=()=>{const d={preserveScroll:!0,onSuccess:()=>{y.value=!1,D()}};if(l.faculty_structure_id||(l.faculty_structure_id=null),V.value&&g.value!==null){l.put(S("admin.system.faculties.update",{faculty:g.value}),d);return}l.post(S("admin.system.faculties.store"),d)};return W("onEditFaculty",G),(d,s)=>(f(),$(re,{title:"Faculties",subtitle:"Manage faculties available for project setup."},{default:a(()=>[i("div",Ue,[t(e(F),{class:"bg-card text-card-foreground border-border/50 shadow-sm"},{default:a(()=>[t(e(U),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:a(()=>[t(e(E),{class:"text-sm font-medium text-muted-foreground"},{default:a(()=>[...s[8]||(s[8]=[o("Total Faculties",-1)])]),_:1}),t(e(X),{class:"h-4 w-4 text-muted-foreground"})]),_:1}),t(e(h),null,{default:a(()=>[i("div",Ee,m(d.stats.total),1)]),_:1})]),_:1}),t(e(F),{class:"bg-card text-card-foreground border-border/50 shadow-sm"},{default:a(()=>[t(e(U),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:a(()=>[t(e(E),{class:"text-sm font-medium text-muted-foreground"},{default:a(()=>[...s[9]||(s[9]=[o("Active",-1)])]),_:1}),t(e(Z),{class:"h-4 w-4 text-emerald-500"})]),_:1}),t(e(h),null,{default:a(()=>[i("div",Ae,m(d.stats.active),1)]),_:1})]),_:1})]),k.value?.success?(f(),$(e(_e),{key:0,class:"mb-6 border border-emerald-500/40 bg-emerald-500/10"},{default:a(()=>[t(e(ee),{class:"h-4 w-4 text-emerald-500"}),t(e(ge),null,{default:a(()=>[...s[10]||(s[10]=[o("Updated",-1)])]),_:1}),t(e(pe),null,{default:a(()=>[o(m(k.value.success),1)]),_:1})]),_:1})):p("",!0),t(e(F),{class:"border border-border/50 bg-card shadow-sm"},{default:a(()=>[t(e(U),{class:"flex flex-row items-center justify-between pb-3"},{default:a(()=>[i("div",null,[t(e(E),{class:"text-base font-semibold text-foreground"},{default:a(()=>[...s[11]||(s[11]=[o("Faculties",-1)])]),_:1}),t(e(me),null,{default:a(()=>[...s[12]||(s[12]=[o("Keep faculties aligned with their structure templates.",-1)])]),_:1})]),t(e(w),{size:"sm",onClick:I},{default:a(()=>[t(e(te),{class:"mr-2 h-4 w-4"}),s[13]||(s[13]=o(" Add Faculty ",-1))]),_:1})]),_:1}),t(e(h),null,{default:a(()=>[t(oe,{columns:e(he),data:j.value,"search-key":"name","search-placeholder":"Filter faculties..."},null,8,["columns","data"])]),_:1})]),_:1}),t(e(ye),{open:y.value,"onUpdate:open":s[7]||(s[7]=u=>y.value=u)},{default:a(()=>[t(e(ve),{class:"sm:max-w-[700px] max-h-[90vh] overflow-y-auto"},{default:a(()=>[t(e(be),null,{default:a(()=>[t(e($e),null,{default:a(()=>[o(m(V.value?"Edit faculty":"Create faculty"),1)]),_:1}),t(e(xe),null,{default:a(()=>[o(m(V.value?"Update faculty details.":"Add a new faculty to the catalog."),1)]),_:1})]),_:1}),i("div",je,[i("div",Ne,[i("div",De,[t(e(b),null,{default:a(()=>[...s[14]||(s[14]=[o("Name",-1)])]),_:1}),t(e(A),{modelValue:e(l).name,"onUpdate:modelValue":s[0]||(s[0]=u=>e(l).name=u),placeholder:"Science"},null,8,["modelValue"]),e(l).errors.name?(f(),v("p",Be,m(e(l).errors.name),1)):p("",!0)]),i("div",Oe,[t(e(b),null,{default:a(()=>[...s[15]||(s[15]=[o("Slug",-1)])]),_:1}),t(e(A),{modelValue:e(l).slug,"onUpdate:modelValue":s[1]||(s[1]=u=>e(l).slug=u),placeholder:"science"},null,8,["modelValue"]),e(l).errors.slug?(f(),v("p",Ke,m(e(l).errors.slug),1)):p("",!0)])]),i("div",Pe,[i("div",Te,[t(e(b),null,{default:a(()=>[...s[16]||(s[16]=[o("Structure Template",-1)])]),_:1}),t(e(we),{modelValue:e(l).faculty_structure_id,"onUpdate:modelValue":s[2]||(s[2]=u=>e(l).faculty_structure_id=u)},{default:a(()=>[t(e(ke),null,{default:a(()=>[t(e(Ve),{placeholder:"Select structure"})]),_:1}),t(e(Ce),null,{default:a(()=>[t(e(K),{value:""},{default:a(()=>[...s[17]||(s[17]=[o("No structure",-1)])]),_:1}),(f(!0),v(se,null,ae(c.value,u=>(f(),$(e(K),{key:u.id,value:String(u.id)},{default:a(()=>[o(m(u.faculty_name),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"]),e(l).errors.faculty_structure_id?(f(),v("p",qe,m(e(l).errors.faculty_structure_id),1)):p("",!0)]),i("div",Ie,[t(e(b),null,{default:a(()=>[...s[18]||(s[18]=[o("Sort Order",-1)])]),_:1}),t(e(A),{modelValue:e(l).sort_order,"onUpdate:modelValue":s[3]||(s[3]=u=>e(l).sort_order=u),type:"number",min:"0"},null,8,["modelValue"]),e(l).errors.sort_order?(f(),v("p",Ge,m(e(l).errors.sort_order),1)):p("",!0)])]),i("div",Le,[t(e(b),null,{default:a(()=>[...s[19]||(s[19]=[o("Description",-1)])]),_:1}),t(e(fe),{modelValue:e(l).description,"onUpdate:modelValue":s[4]||(s[4]=u=>e(l).description=u),rows:"3",placeholder:"Optional description..."},null,8,["modelValue"]),e(l).errors.description?(f(),v("p",Me,m(e(l).errors.description),1)):p("",!0)]),i("label",ze,[s[20]||(s[20]=i("span",{class:"text-foreground"},"Active",-1)),t(e(q),{checked:e(l).is_active,"onUpdate:checked":s[5]||(s[5]=u=>e(l).is_active=u)},null,8,["checked"])])]),i("div",Ye,[t(e(w),{variant:"ghost",onClick:s[6]||(s[6]=u=>y.value=!1)},{default:a(()=>[...s[21]||(s[21]=[o("Cancel",-1)])]),_:1}),t(e(w),{disabled:e(l).processing,onClick:L},{default:a(()=>[e(l).processing?(f(),$(e(le),{key:0,class:"mr-2 h-4 w-4 animate-spin"})):p("",!0),i("span",null,m(V.value?"Update faculty":"Add faculty"),1)]),_:1},8,["disabled"])])]),_:1})]),_:1},8,["open"])]),_:1}))}});export{St as default};
