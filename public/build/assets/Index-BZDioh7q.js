import{d as G,x as W,a as $,o as _,w as t,K as s,u as e,F as i,M as a,O as q,P as S,T as f,b as X,B as V,V as L,ag as P,H as p,c as D,L as k}from"./app-Bo97tXR7.js";import{_ as oe}from"./AdminLayout.vue_vue_type_script_setup_true_lang-EcMBtPWQ.js";import{_ as R,a as B}from"./CardContent.vue_vue_type_script_setup_true_lang-OLZW0R35.js";import{_ as ae}from"./CardDescription.vue_vue_type_script_setup_true_lang-BoR0d7dI.js";import{_ as K,a as j}from"./CardTitle.vue_vue_type_script_setup_true_lang-D_luTp_a.js";import{_ as le}from"./DataTable.vue_vue_type_script_setup_true_lang-qt7Kvqdl.js";import{c as A,_ as g}from"./index-D3d1G8kJ.js";import{_ as J}from"./index-DbvdGjWg.js";import{_ as ne,a as de,b as ue,c as C,d as ie,e as me}from"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-Bu6hdF-6.js";import{E as fe}from"./ellipsis-CMzbrF1Y.js";import{C as ce}from"./coins-kxq0_VHb.js";import{C as pe}from"./circle-check-big-BrGBqWsd.js";import{T as ve}from"./trash-2-CvPjaLNy.js";import{A as _e}from"./arrow-up-down-BA6jhNRY.js";import{_ as N,d as F,a as h,b as O,c as T}from"./DialogTitle.vue_vue_type_script_setup_true_lang-BTwjwsHf.js";import{_ as z}from"./DialogFooter.vue_vue_type_script_setup_true_lang-Bd583s7e.js";import{_ as I}from"./Input.vue_vue_type_script_setup_true_lang-UF9MSFTy.js";import{_ as U}from"./Label.vue_vue_type_script_setup_true_lang-C18rjiYc.js";import{_ as we}from"./Textarea.vue_vue_type_script_setup_true_lang-DsRaI_W2.js";import{U as xe}from"./users-BM4bKDpT.js";import{L as H}from"./loader-circle-Dg4GmgPT.js";import"./UserInfo.vue_vue_type_script_setup_true_lang-Lg03Q3eS.js";import"./VisuallyHidden-C-xRdpIz.js";import"./Presence-Dwqo9iE1.js";import"./useForwardExpose-C97CAlAR.js";import"./index-BTMUG24f.js";import"./x-DxpWGJqH.js";import"./chart-column-RZxAGCKu.js";import"./list-B4RL7yBM.js";import"./log-out-UCKehK-q.js";import"./TableHeader.vue_vue_type_script_setup_true_lang-CA8cjit-.js";import"./search-gmPLkDv5.js";import"./chevron-left-BNZikgB5.js";import"./chevron-right-DDXDTgI8.js";/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ge=A("BanIcon",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m4.9 4.9 14.2 14.2",key:"1m5liu"}]]);/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ye=A("CircleMinusIcon",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}]]);/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const be=A("KeyRoundIcon",[["path",{d:"M2.586 17.414A2 2 0 0 0 2 18.828V21a1 1 0 0 0 1 1h3a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h1a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h.172a2 2 0 0 0 1.414-.586l.814-.814a6.5 6.5 0 1 0-4-4z",key:"1s6t7t"}],["circle",{cx:"16.5",cy:"7.5",r:".5",fill:"currentColor",key:"w0ekpg"}]]);/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ke=A("UserCheckIcon",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $e=A("UserXIcon",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]]),Ce=G({__name:"UserActions",props:{user:{}},setup(l){const v=l,M=W("onResetPassword"),E=W("onAddWords"),m=W("onDeductWords"),y=W("onSuspend"),x=()=>{confirm(`Are you sure you want to delete ${v.user.name}?`)&&q.delete(S("admin.users.destroy",{user:v.user.id}),{preserveScroll:!0})},b=()=>{confirm(`Unsuspend ${v.user.name}?`)&&q.post(S("admin.users.unban",{user:v.user.id}),{},{preserveScroll:!0})};return(c,o)=>(_(),$(e(me),null,{default:t(()=>[s(e(ne),{"as-child":""},{default:t(()=>[s(e(g),{variant:"ghost",class:"h-8 w-8 p-0"},{default:t(()=>[o[4]||(o[4]=i("span",{class:"sr-only"},"Open menu",-1)),s(e(fe),{class:"h-4 w-4"})]),_:1})]),_:1}),s(e(de),{align:"end"},{default:t(()=>[s(e(ue),null,{default:t(()=>[...o[5]||(o[5]=[a("Actions",-1)])]),_:1}),s(e(C),{onClick:o[0]||(o[0]=n=>e(M)?.(c.user))},{default:t(()=>[s(e(be),{class:"mr-2 h-4 w-4"}),o[6]||(o[6]=a(" Reset Password ",-1))]),_:1}),s(e(C),{onClick:o[1]||(o[1]=n=>e(E)?.(c.user))},{default:t(()=>[s(e(ce),{class:"mr-2 h-4 w-4"}),o[7]||(o[7]=a(" Add Words ",-1))]),_:1}),s(e(C),{onClick:o[2]||(o[2]=n=>e(m)?.(c.user))},{default:t(()=>[s(e(ye),{class:"mr-2 h-4 w-4"}),o[8]||(o[8]=a(" Deduct Words ",-1))]),_:1}),s(e(ie)),c.user.is_banned?(_(),$(e(C),{key:1,onClick:b,class:"text-emerald-600 focus:text-emerald-600 focus:bg-emerald-50"},{default:t(()=>[s(e(pe),{class:"mr-2 h-4 w-4"}),o[10]||(o[10]=a(" Unsuspend ",-1))]),_:1})):(_(),$(e(C),{key:0,onClick:o[3]||(o[3]=n=>e(y)?.(c.user)),class:"text-amber-600 focus:text-amber-600 focus:bg-amber-50"},{default:t(()=>[s(e(ge),{class:"mr-2 h-4 w-4"}),o[9]||(o[9]=a(" Suspend ",-1))]),_:1})),s(e(C),{onClick:x,class:"text-rose-600 focus:text-rose-600 focus:bg-rose-50"},{default:t(()=>[s(e(ve),{class:"mr-2 h-4 w-4"}),o[11]||(o[11]=a(" Delete ",-1))]),_:1})]),_:1})]),_:1}))}}),Ve=[{accessorKey:"id",header:"ID",cell:({row:l})=>f("div",{class:"text-muted-foreground font-mono text-xs"},`#${l.getValue("id")}`)},{accessorKey:"name",header:"Name",cell:({row:l})=>f("div",{class:"font-medium text-foreground"},l.getValue("name"))},{accessorKey:"email",header:({column:l})=>f(g,{variant:"ghost",class:"-ml-2 text-xs hover:bg-muted/50",onClick:()=>l.toggleSorting(l.getIsSorted()==="asc")},()=>["Email",f(_e,{class:"ml-2 h-3 w-3"})]),cell:({row:l})=>f("div",{class:"text-muted-foreground"},l.getValue("email"))},{accessorKey:"package",header:"Package",cell:({row:l})=>f(J,{variant:"outline",class:"font-normal"},()=>l.getValue("package"))},{accessorKey:"word_balance",header:"Balance",cell:({row:l})=>f("div",{class:"font-mono text-xs"},l.getValue("word_balance").toLocaleString())},{accessorKey:"total_words_purchased",header:"Purchased",cell:({row:l})=>f("div",{class:"text-muted-foreground text-xs"},l.getValue("total_words_purchased").toLocaleString())},{accessorKey:"projects_count",header:()=>f("div",{class:"text-center"},"Projects"),cell:({row:l})=>f("div",{class:"text-center font-medium"},l.getValue("projects_count"))},{accessorKey:"payments_count",header:()=>f("div",{class:"text-center"},"Payments"),cell:({row:l})=>f("div",{class:"text-center font-medium"},l.getValue("payments_count"))},{accessorKey:"is_banned",header:"Status",cell:({row:l})=>{const v=l.getValue("is_banned");return f(J,{variant:v?"destructive":"secondary",class:v?"":"bg-emerald-500/15 text-emerald-600 hover:bg-emerald-500/25 border-emerald-500/20"},()=>v?"Banned":"Active")}},{accessorKey:"created_at",header:"Joined",cell:({row:l})=>f("div",{class:"text-muted-foreground text-sm"},new Date(l.getValue("created_at")).toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric"}))},{id:"actions",cell:({row:l})=>f(Ce,{user:l.original})}],Ue={class:"grid gap-4 md:grid-cols-3 mb-8"},Se={class:"text-2xl font-bold"},Ae={class:"text-2xl font-bold"},We={class:"text-2xl font-bold"},Pe={class:"grid gap-4 py-4"},De={class:"space-y-2"},Re={key:0,class:"text-sm text-destructive"},Be={class:"space-y-2"},Ke={class:"grid gap-4 py-4"},je={class:"space-y-2"},Ie={key:0,class:"text-sm text-destructive"},Me={class:"space-y-2"},Ee={key:0,class:"text-sm text-destructive"},Le={class:"grid gap-4 py-4"},Ne={class:"space-y-2"},Fe={key:0,class:"text-sm text-destructive"},ks=G({__name:"Index",props:{users:{}},setup(l){const v=l,M=X(()=>v.users.data.filter(u=>!u.is_banned).length),E=X(()=>v.users.data.filter(u=>u.is_banned).length),m=V(null),y=V(!1),x=V(!1),b=V(!1),c=V(!1),o=L({password:"",password_confirmation:""}),n=L({words:void 0,reason:""}),w=L({reason:""}),Q=u=>{m.value=u,o.reset(),o.clearErrors(),y.value=!0},Y=u=>{m.value=u,c.value=!1,n.reset(),n.clearErrors(),x.value=!0},Z=u=>{m.value=u,c.value=!0,n.reset(),n.clearErrors(),x.value=!0},ee=u=>{m.value=u,w.reset(),w.clearErrors(),b.value=!0};P("onResetPassword",Q),P("onAddWords",Y),P("onDeductWords",Z),P("onSuspend",ee);const se=()=>{m.value&&o.post(S("admin.users.reset-password",m.value.id),{onSuccess:()=>{y.value=!1,o.reset()}})},te=()=>{if(!m.value)return;const u=Math.abs(Number(n.words));n.words=c.value?-u:u,n.post(S("admin.users.adjust-balance",m.value.id),{onSuccess:()=>{x.value=!1,n.reset()}})},re=()=>{m.value&&w.post(S("admin.users.ban",m.value.id),{onSuccess:()=>{b.value=!1,w.reset()}})};return(u,r)=>(_(),$(oe,null,{title:t(()=>[...r[11]||(r[11]=[i("div",{class:"flex flex-col"},[i("h2",{class:"text-2xl font-bold tracking-tight text-foreground"},"Users"),i("p",{class:"text-muted-foreground text-sm"},"Manage your platform's user base.")],-1)])]),default:t(()=>[i("div",Ue,[s(e(R),{class:"bg-card text-card-foreground border-border/50 shadow-sm"},{default:t(()=>[s(e(K),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:t(()=>[s(e(j),{class:"text-sm font-medium text-muted-foreground"},{default:t(()=>[...r[12]||(r[12]=[a("Total Users",-1)])]),_:1}),s(e(xe),{class:"h-4 w-4 text-muted-foreground"})]),_:1}),s(e(B),null,{default:t(()=>[i("div",Se,p(u.users.data.length),1)]),_:1})]),_:1}),s(e(R),{class:"bg-card text-card-foreground border-border/50 shadow-sm"},{default:t(()=>[s(e(K),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:t(()=>[s(e(j),{class:"text-sm font-medium text-muted-foreground"},{default:t(()=>[...r[13]||(r[13]=[a("Active Users",-1)])]),_:1}),s(e(ke),{class:"h-4 w-4 text-emerald-500"})]),_:1}),s(e(B),null,{default:t(()=>[i("div",Ae,p(M.value),1)]),_:1})]),_:1}),s(e(R),{class:"bg-card text-card-foreground border-border/50 shadow-sm"},{default:t(()=>[s(e(K),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:t(()=>[s(e(j),{class:"text-sm font-medium text-muted-foreground"},{default:t(()=>[...r[14]||(r[14]=[a("Banned Users",-1)])]),_:1}),s(e($e),{class:"h-4 w-4 text-rose-500"})]),_:1}),s(e(B),null,{default:t(()=>[i("div",We,p(E.value),1)]),_:1})]),_:1})]),s(e(R),{class:"border border-border/50 bg-card shadow-sm"},{default:t(()=>[s(e(K),{class:"flex flex-row items-center justify-between pb-3"},{default:t(()=>[i("div",null,[s(e(j),{class:"text-base font-semibold text-foreground"},{default:t(()=>[...r[15]||(r[15]=[a("All Users",-1)])]),_:1}),s(e(ae),null,{default:t(()=>[...r[16]||(r[16]=[a("A list of all registered users including their name, email, and status.",-1)])]),_:1})])]),_:1}),s(e(B),null,{default:t(()=>[s(le,{columns:e(Ve),data:u.users.data,"search-key":"email","search-placeholder":"Filter by email..."},null,8,["columns","data"])]),_:1})]),_:1}),s(e(N),{open:y.value,"onUpdate:open":r[3]||(r[3]=d=>y.value=d)},{default:t(()=>[s(e(F),{class:"sm:max-w-[425px]"},{default:t(()=>[s(e(h),null,{default:t(()=>[s(e(O),null,{default:t(()=>[...r[17]||(r[17]=[a("Reset Password",-1)])]),_:1}),s(e(T),null,{default:t(()=>[a(" Set a new password for "+p(m.value?.name)+". ",1)]),_:1})]),_:1}),i("div",Pe,[i("div",De,[s(e(U),{for:"password"},{default:t(()=>[...r[18]||(r[18]=[a("New Password",-1)])]),_:1}),s(e(I),{id:"password",type:"password",modelValue:e(o).password,"onUpdate:modelValue":r[0]||(r[0]=d=>e(o).password=d)},null,8,["modelValue"]),e(o).errors.password?(_(),D("p",Re,p(e(o).errors.password),1)):k("",!0)]),i("div",Be,[s(e(U),{for:"password_confirmation"},{default:t(()=>[...r[19]||(r[19]=[a("Confirm Password",-1)])]),_:1}),s(e(I),{id:"password_confirmation",type:"password",modelValue:e(o).password_confirmation,"onUpdate:modelValue":r[1]||(r[1]=d=>e(o).password_confirmation=d)},null,8,["modelValue"])])]),s(e(z),null,{default:t(()=>[s(e(g),{variant:"outline",onClick:r[2]||(r[2]=d=>y.value=!1)},{default:t(()=>[...r[20]||(r[20]=[a("Cancel",-1)])]),_:1}),s(e(g),{onClick:se,disabled:e(o).processing},{default:t(()=>[e(o).processing?(_(),$(e(H),{key:0,class:"mr-2 h-4 w-4 animate-spin"})):k("",!0),r[21]||(r[21]=a(" Reset Password ",-1))]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["open"]),s(e(N),{open:x.value,"onUpdate:open":r[7]||(r[7]=d=>x.value=d)},{default:t(()=>[s(e(F),{class:"sm:max-w-[425px]"},{default:t(()=>[s(e(h),null,{default:t(()=>[s(e(O),null,{default:t(()=>[a(p(c.value?"Deduct Words":"Add Words"),1)]),_:1}),s(e(T),null,{default:t(()=>[a(p(c.value?"Remove words from":"Add words to")+" "+p(m.value?.name)+"'s balance. ",1)]),_:1})]),_:1}),i("div",Ke,[i("div",je,[s(e(U),{for:"words"},{default:t(()=>[...r[22]||(r[22]=[a("Amount of Words",-1)])]),_:1}),s(e(I),{id:"words",type:"number",min:"0",modelValue:e(n).words,"onUpdate:modelValue":r[4]||(r[4]=d=>e(n).words=d),placeholder:"e.g. 5000"},null,8,["modelValue"]),e(n).errors.words?(_(),D("p",Ie,p(e(n).errors.words),1)):k("",!0)]),i("div",Me,[s(e(U),{for:"reason"},{default:t(()=>[...r[23]||(r[23]=[a("Reason",-1)])]),_:1}),s(e(I),{id:"reason",modelValue:e(n).reason,"onUpdate:modelValue":r[5]||(r[5]=d=>e(n).reason=d),placeholder:"e.g. Bonus, Refund, Adjustment"},null,8,["modelValue"]),e(n).errors.reason?(_(),D("p",Ee,p(e(n).errors.reason),1)):k("",!0)])]),s(e(z),null,{default:t(()=>[s(e(g),{variant:"outline",onClick:r[6]||(r[6]=d=>x.value=!1)},{default:t(()=>[...r[24]||(r[24]=[a("Cancel",-1)])]),_:1}),s(e(g),{onClick:te,disabled:e(n).processing,variant:c.value?"destructive":"default"},{default:t(()=>[e(n).processing?(_(),$(e(H),{key:0,class:"mr-2 h-4 w-4 animate-spin"})):k("",!0),a(" "+p(c.value?"Deduct Words":"Add Words"),1)]),_:1},8,["disabled","variant"])]),_:1})]),_:1})]),_:1},8,["open"]),s(e(N),{open:b.value,"onUpdate:open":r[10]||(r[10]=d=>b.value=d)},{default:t(()=>[s(e(F),{class:"sm:max-w-[425px]"},{default:t(()=>[s(e(h),null,{default:t(()=>[s(e(O),null,{default:t(()=>[...r[25]||(r[25]=[a("Suspend User",-1)])]),_:1}),s(e(T),null,{default:t(()=>[a(" Ban "+p(m.value?.name)+" from accessing the platform. ",1)]),_:1})]),_:1}),i("div",Le,[i("div",Ne,[s(e(U),{for:"ban_reason"},{default:t(()=>[...r[26]||(r[26]=[a("Reason for Suspension",-1)])]),_:1}),s(e(we),{id:"ban_reason",modelValue:e(w).reason,"onUpdate:modelValue":r[8]||(r[8]=d=>e(w).reason=d),placeholder:"e.g. Violation of terms..."},null,8,["modelValue"]),e(w).errors.reason?(_(),D("p",Fe,p(e(w).errors.reason),1)):k("",!0)])]),s(e(z),null,{default:t(()=>[s(e(g),{variant:"outline",onClick:r[9]||(r[9]=d=>b.value=!1)},{default:t(()=>[...r[27]||(r[27]=[a("Cancel",-1)])]),_:1}),s(e(g),{variant:"destructive",onClick:re,disabled:e(w).processing},{default:t(()=>[e(w).processing?(_(),$(e(H),{key:0,class:"mr-2 h-4 w-4 animate-spin"})):k("",!0),r[28]||(r[28]=a(" Suspend User ",-1))]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["open"])]),_:1}))}});export{ks as default};
