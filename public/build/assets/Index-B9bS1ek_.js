import{bt as F,bs as V,ck as M,cn as R,co as i,cp as r,cr as a,cq as s,bE as t,cs as l,dl as A,ct as d,dp as L,dq as q,dn as G,cG as z,du as O,dr as C,cl as y,cB as m,cS as N,df as j,cu as H,cj as v}from"./vendor-DTjPma1U.js";import{_ as I}from"./AdminLayout.vue_vue_type_script_setup_true_lang-F29Dh3nm.js";import{_ as f,a as c}from"./CardContent.vue_vue_type_script_setup_true_lang-I4CEGKdn.js";import{_ as w}from"./CardDescription.vue_vue_type_script_setup_true_lang-CWoegFai.js";import{_,a as p}from"./CardTitle.vue_vue_type_script_setup_true_lang-CV0UXs4e.js";import{_ as h}from"./index-mwxrBKxi.js";import{_ as P}from"./Input.vue_vue_type_script_setup_true_lang-DAeY8mMm.js";import{_ as b}from"./Label.vue_vue_type_script_setup_true_lang-D84UGLqY.js";import{_ as J}from"./index-3KGx5n4o.js";import{_ as K}from"./Switch.vue_vue_type_script_setup_true_lang-BrRclsbs.js";import{_ as W}from"./Separator.vue_vue_type_script_setup_true_lang-BR3TqgAU.js";import{_ as X,a as Q,b as Y,c as Z,d as k}from"./SelectValue.vue_vue_type_script_setup_true_lang-DEkAM97G.js";import"./Sonner.vue_vue_type_script_setup_true_lang-D0ynKKgD.js";import"./UserInfo.vue_vue_type_script_setup_true_lang-tVoAfrlY.js";import"./TooltipTrigger.vue_vue_type_script_setup_true_lang-DunnpUO7.js";const ee={class:"grid gap-4 md:grid-cols-4 mb-8"},te={class:"text-2xl font-bold"},se={class:"text-2xl font-bold"},re={class:"text-2xl font-bold text-emerald-600"},ae={class:"text-2xl font-bold"},oe={class:"grid gap-8 lg:grid-cols-2"},le={class:"flex items-center justify-between"},ne={class:"space-y-2"},de={class:"space-y-2"},ie={class:"space-y-2"},ue={key:0,class:"text-center py-8 text-muted-foreground"},me={key:1,class:"space-y-3"},fe={class:"flex items-center gap-3"},ce={class:"flex items-center justify-center w-8 h-8 rounded-full bg-primary/10 text-primary font-bold text-sm"},_e={class:"font-medium"},pe={class:"text-sm text-muted-foreground"},xe={class:"text-right"},ge={class:"font-semibold text-green-600"},be={class:"text-xs text-muted-foreground"},ye={key:0,class:"text-center py-8 text-muted-foreground"},ve={key:1,class:"overflow-x-auto"},we={class:"w-full"},he={class:"py-3 px-2 text-sm"},ke={class:"py-3 px-2 text-sm"},Se={class:"py-3 px-2 text-sm text-right font-medium text-green-600"},$e={class:"py-3 px-2 text-center"},Ve={class:"py-3 px-2 text-sm text-right text-muted-foreground"},Ge=F({__name:"Index",props:{stats:{},settings:{},topReferrers:{},recentEarnings:{}},setup(E){const x=E,g=V(!1),u=V({enabled:x.settings.enabled,commission_percentage:x.settings.commission_percentage,minimum_payment_amount:x.settings.minimum_payment_amount,fee_bearer:x.settings.fee_bearer}),S=M({get:()=>u.value.minimum_payment_amount/100,set:n=>{u.value.minimum_payment_amount=n*100}}),$=n=>"â‚¦"+(n/100).toLocaleString("en-NG",{minimumFractionDigits:0}),U=n=>new Date(n).toLocaleDateString("en-NG",{year:"numeric",month:"short",day:"numeric"}),T=n=>{switch(n){case"paid":return"bg-green-500/10 text-green-600 border-green-500/20";case"pending":return"bg-yellow-500/10 text-yellow-600 border-yellow-500/20";case"failed":return"bg-red-500/10 text-red-600 border-red-500/20";default:return"bg-gray-500/10 text-gray-600 border-gray-500/20"}},B=async()=>{g.value=!0;try{const e=await(await fetch(y("admin.referrals.update-settings"),{method:"PUT",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")||""},body:JSON.stringify(u.value)})).json();e.success?v.success("Settings saved successfully"):v.error(e.message||"Failed to save settings")}catch{v.error("Failed to save settings")}finally{g.value=!1}};return(n,e)=>(i(),R(I,{title:"Referral Program",subtitle:"Manage referral settings and view analytics."},{default:r(()=>[a("div",ee,[s(t(f),{class:"bg-card border-border/50"},{default:r(()=>[s(t(_),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:r(()=>[s(t(p),{class:"text-sm font-medium text-muted-foreground"},{default:r(()=>[...e[4]||(e[4]=[l("Total Referrers",-1)])]),_:1}),s(t(A),{class:"h-4 w-4 text-muted-foreground"})]),_:1}),s(t(c),null,{default:r(()=>[a("div",te,d(n.stats.total_referrers),1)]),_:1})]),_:1}),s(t(f),{class:"bg-card border-border/50"},{default:r(()=>[s(t(_),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:r(()=>[s(t(p),{class:"text-sm font-medium text-muted-foreground"},{default:r(()=>[...e[5]||(e[5]=[l("Referred Users",-1)])]),_:1}),s(t(L),{class:"h-4 w-4 text-muted-foreground"})]),_:1}),s(t(c),null,{default:r(()=>[a("div",se,d(n.stats.total_referred_users),1)]),_:1})]),_:1}),s(t(f),{class:"bg-card border-border/50"},{default:r(()=>[s(t(_),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:r(()=>[s(t(p),{class:"text-sm font-medium text-muted-foreground"},{default:r(()=>[...e[6]||(e[6]=[l("Commissions Paid",-1)])]),_:1}),s(t(q),{class:"h-4 w-4 text-emerald-500"})]),_:1}),s(t(c),null,{default:r(()=>[a("div",re,d($(n.stats.total_commissions_paid)),1)]),_:1})]),_:1}),s(t(f),{class:"bg-card border-border/50"},{default:r(()=>[s(t(_),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:r(()=>[s(t(p),{class:"text-sm font-medium text-muted-foreground"},{default:r(()=>[...e[7]||(e[7]=[l("This Month",-1)])]),_:1}),s(t(G),{class:"h-4 w-4 text-blue-500"})]),_:1}),s(t(c),null,{default:r(()=>[a("div",ae,d($(n.stats.this_month_commissions)),1)]),_:1})]),_:1})]),a("div",oe,[s(t(f),{class:"border-border/50"},{default:r(()=>[s(t(_),null,{default:r(()=>[s(t(p),{class:"text-base"},{default:r(()=>[...e[8]||(e[8]=[l("Referral Settings",-1)])]),_:1}),s(t(w),null,{default:r(()=>[...e[9]||(e[9]=[l("Configure the referral program",-1)])]),_:1})]),_:1}),s(t(c),{class:"space-y-6"},{default:r(()=>[a("div",le,[a("div",null,[s(t(b),{class:"text-base"},{default:r(()=>[...e[10]||(e[10]=[l("Program Status",-1)])]),_:1}),e[11]||(e[11]=a("p",{class:"text-sm text-muted-foreground"},"Enable or disable the referral program",-1))]),s(t(K),{checked:u.value.enabled,"onUpdate:checked":e[0]||(e[0]=o=>u.value.enabled=o)},null,8,["checked"])]),s(t(W)),a("div",ne,[s(t(b),null,{default:r(()=>[...e[12]||(e[12]=[l("Default Commission Rate (%)",-1)])]),_:1}),s(t(P),{modelValue:u.value.commission_percentage,"onUpdate:modelValue":e[1]||(e[1]=o=>u.value.commission_percentage=o),modelModifiers:{number:!0},type:"number",min:"0",max:"100",step:"0.5"},null,8,["modelValue"]),e[13]||(e[13]=a("p",{class:"text-xs text-muted-foreground"}," Percentage of each payment that goes to the referrer ",-1))]),a("div",de,[s(t(b),null,{default:r(()=>[...e[14]||(e[14]=[l("Minimum Payment Amount (NGN)",-1)])]),_:1}),s(t(P),{modelValue:S.value,"onUpdate:modelValue":e[2]||(e[2]=o=>S.value=o),modelModifiers:{number:!0},type:"number",min:"0",step:"100"},null,8,["modelValue"]),e[15]||(e[15]=a("p",{class:"text-xs text-muted-foreground"}," Minimum payment amount to qualify for referral commission ",-1))]),a("div",ie,[s(t(b),null,{default:r(()=>[...e[16]||(e[16]=[l("Fee Bearer",-1)])]),_:1}),s(t(X),{modelValue:u.value.fee_bearer,"onUpdate:modelValue":e[3]||(e[3]=o=>u.value.fee_bearer=o)},{default:r(()=>[s(t(Q),null,{default:r(()=>[s(t(Y))]),_:1}),s(t(Z),null,{default:r(()=>[s(t(k),{value:"account"},{default:r(()=>[...e[17]||(e[17]=[l("Main Account",-1)])]),_:1}),s(t(k),{value:"subaccount"},{default:r(()=>[...e[18]||(e[18]=[l("Referrer (Subaccount)",-1)])]),_:1}),s(t(k),{value:"all"},{default:r(()=>[...e[19]||(e[19]=[l("Split Proportionally",-1)])]),_:1})]),_:1})]),_:1},8,["modelValue"]),e[20]||(e[20]=a("p",{class:"text-xs text-muted-foreground"}," Who pays the Paystack transaction fees ",-1))]),s(t(h),{onClick:B,disabled:g.value,class:"w-full"},{default:r(()=>[g.value?(i(),R(t(O),{key:0,class:"h-4 w-4 animate-spin mr-2"})):z("",!0),e[21]||(e[21]=l(" Save Settings ",-1))]),_:1},8,["disabled"])]),_:1})]),_:1}),s(t(f),{class:"border-border/50"},{default:r(()=>[s(t(_),{class:"flex flex-row items-center justify-between"},{default:r(()=>[a("div",null,[s(t(p),{class:"text-base"},{default:r(()=>[...e[22]||(e[22]=[l("Top Referrers",-1)])]),_:1}),s(t(w),null,{default:r(()=>[...e[23]||(e[23]=[l("Highest earning referral partners",-1)])]),_:1})]),s(t(h),{"as-child":"",variant:"outline",size:"sm"},{default:r(()=>[s(t(C),{href:t(y)("admin.referrals.users")},{default:r(()=>[...e[24]||(e[24]=[l(" View All ",-1)])]),_:1},8,["href"])]),_:1})]),_:1}),s(t(c),null,{default:r(()=>[n.topReferrers.length===0?(i(),m("div",ue," No referrers yet ")):(i(),m("div",me,[(i(!0),m(N,null,j(n.topReferrers,(o,D)=>(i(),m("div",{key:o.id,class:"flex items-center justify-between p-3 rounded-lg bg-muted/50 border border-border/50"},[a("div",fe,[a("div",ce,d(D+1),1),a("div",null,[a("p",_e,d(o.name),1),a("p",pe,d(o.referrals_count)+" referrals",1)])]),a("div",xe,[a("p",ge,d(o.total_earned_formatted),1),a("code",be,d(o.referral_code),1)])]))),128))]))]),_:1})]),_:1})]),s(t(f),{class:"mt-8 border-border/50"},{default:r(()=>[s(t(_),{class:"flex flex-row items-center justify-between"},{default:r(()=>[a("div",null,[s(t(p),{class:"text-base"},{default:r(()=>[...e[25]||(e[25]=[l("Recent Earnings",-1)])]),_:1}),s(t(w),null,{default:r(()=>[...e[26]||(e[26]=[l("Latest referral commission activity",-1)])]),_:1})]),s(t(h),{"as-child":"",variant:"outline",size:"sm"},{default:r(()=>[s(t(C),{href:t(y)("admin.referrals.earnings")},{default:r(()=>[...e[27]||(e[27]=[l(" View All Earnings ",-1)])]),_:1},8,["href"])]),_:1})]),_:1}),s(t(c),null,{default:r(()=>[n.recentEarnings.length===0?(i(),m("div",ye," No earnings recorded yet ")):(i(),m("div",ve,[a("table",we,[e[28]||(e[28]=a("thead",null,[a("tr",{class:"border-b border-border/50"},[a("th",{class:"text-left py-3 px-2 text-sm font-medium text-muted-foreground"},"Referrer"),a("th",{class:"text-left py-3 px-2 text-sm font-medium text-muted-foreground"},"Referee"),a("th",{class:"text-right py-3 px-2 text-sm font-medium text-muted-foreground"},"Commission"),a("th",{class:"text-center py-3 px-2 text-sm font-medium text-muted-foreground"},"Status"),a("th",{class:"text-right py-3 px-2 text-sm font-medium text-muted-foreground"},"Date")])],-1)),a("tbody",null,[(i(!0),m(N,null,j(n.recentEarnings,o=>(i(),m("tr",{key:o.id,class:"border-b border-border/30"},[a("td",he,d(o.referrer_name),1),a("td",ke,d(o.referee_name),1),a("td",Se,d(o.commission_formatted),1),a("td",$e,[s(t(J),{class:H(T(o.status)),variant:"outline"},{default:r(()=>[l(d(o.status),1)]),_:2},1032,["class"])]),a("td",Ve,d(U(o.created_at)),1)]))),128))])])]))]),_:1})]),_:1})]),_:1}))}});export{Ge as default};
