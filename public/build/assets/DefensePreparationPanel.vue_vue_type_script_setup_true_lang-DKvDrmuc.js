import{d as N,z as G,g as P,Q as V,c as C,o as i,w as n,k as r,u as o,e,s as d,q as y,t as l,n as m,a as u,F as _,A as $,D}from"./app-Be7qsIHh.js";import{_ as q,a as F}from"./index-DKsVm0fV.js";import{_ as h}from"./index-CbNKRjTI.js";import{c as I,L as K,_ as x}from"./index-lqWdnmxz.js";import{a as O,_ as H}from"./CardContent.vue_vue_type_script_setup_true_lang-CL1dfjaX.js";import{_ as X,a as Y}from"./CardTitle.vue_vue_type_script_setup_true_lang-M7VlhLrG.js";import{_ as J,a as Z,b as ee}from"./CollapsibleTrigger.vue_vue_type_script_setup_true_lang-CBct75jy.js";import{_ as te}from"./Progress.vue_vue_type_script_setup_true_lang-DHCVDfK8.js";import{_ as se}from"./ScrollArea.vue_vue_type_script_setup_true_lang-w77N5jBT.js";import{_ as oe}from"./Separator.vue_vue_type_script_setup_true_lang-PaK_MnsM.js";import{_ as re}from"./Switch.vue_vue_type_script_setup_true_lang-34_LM4uQ.js";import{C as ae}from"./chevron-down-wQzUjfAF.js";import{C as Q,T as ne,a as le}from"./thumbs-up-BR5YKK4i.js";import{L as j}from"./lightbulb-CITZUzhf.js";import{W as ie}from"./wand-sparkles-DvhngG_D.js";import{R as z}from"./refresh-cw-Bdc-LB7l.js";import{D as de}from"./download-DiP7x1Hj.js";import{X as ue}from"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-DkzU-5_0.js";import{C as ce}from"./circle-alert-CZWhk3ju.js";/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v=I("ShieldIcon",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]),me={class:"flex items-center gap-2"},fe={class:"space-y-3 p-3 bg-gradient-to-r from-blue-50 to-indigo-50 border border-blue-200 rounded-lg dark:from-blue-950/30 dark:to-indigo-950/30 dark:border-blue-800"},pe={class:"flex items-center justify-center gap-2"},he={class:"text-center"},ge={class:"text-xs text-blue-600 dark:text-blue-400"},xe={class:"flex items-center justify-between rounded-md border border-dashed border-border/60 px-3 py-2 bg-muted/30"},ve={class:"flex flex-col text-xs text-muted-foreground"},be={class:"flex items-center gap-2"},ye={class:"text-[11px] text-muted-foreground"},_e={key:0,class:"py-8"},we={class:"flex flex-col items-center justify-center space-y-2"},ke={class:"text-xs text-muted-foreground text-center"},Ce={class:"space-y-3"},$e={class:"space-y-2"},Ge={class:"text-xs font-medium text-muted-foreground flex items-center gap-1"},De={class:"flex gap-1 flex-wrap"},We={key:0,class:"space-y-2"},Le={class:"text-xs font-medium text-muted-foreground flex items-center gap-1"},Pe={class:"flex flex-wrap gap-1"},Qe={class:"space-y-3 pr-3"},je={class:"absolute top-2 left-2 opacity-60 group-hover:opacity-100 transition-opacity"},ze={class:"flex items-start justify-between gap-3"},Ae={class:"flex-1 space-y-2"},Te={class:"flex items-center gap-2"},Be={class:"text-xs font-bold text-primary bg-primary/10 px-2 py-0.5 rounded-full"},Me={class:"font-medium text-foreground leading-relaxed"},Se={class:"flex items-center gap-1 opacity-70 group-hover:opacity-100 transition-opacity"},Ee={key:0,class:"mt-4 space-y-4 border-t border-dashed pt-4 animate-in slide-in-from-top-2 duration-200"},Re={class:"bg-muted/30 rounded-lg p-3 space-y-2"},Ue={class:"flex items-center gap-2"},Ne={class:"text-sm text-muted-foreground leading-relaxed pl-6"},Ve={key:0,class:"bg-primary/5 rounded-lg p-3 space-y-2"},qe={class:"flex items-center gap-2"},Fe={class:"space-y-1.5 pl-6"},Ie={class:"flex items-center justify-between text-xs text-muted-foreground/70 border-t border-dashed pt-2"},Ke={class:"flex items-center gap-1"},Oe={key:2,class:"py-12 text-center"},He={key:0,class:"space-y-4"},Xe={class:"relative"},Ye={class:"absolute inset-0 flex items-center justify-center opacity-10"},Je={class:"relative"},Ze={class:"text-xs text-muted-foreground mb-1"},et={class:"max-w-md mx-auto space-y-2"},tt={class:"flex justify-between text-xs text-muted-foreground"},st={class:"font-medium"},ot={key:1,class:"relative"},rt={class:"absolute inset-0 flex items-center justify-center opacity-10"},at={class:"relative"},nt={class:"grid grid-cols-2 gap-3"},Gt=N({__name:"DefensePreparationPanel",props:{showDefensePrep:{type:Boolean,default:!0},questions:{},isLoading:{type:Boolean},isGenerating:{type:Boolean},chapterContext:{},defenseWatcher:{},autoGenerateEnabled:{type:Boolean,default:!1}},emits:["update:showDefensePrep","generate-more","refresh","mark-helpful","hide-question","toggle-auto-generate"],setup(A,{emit:T}){const w=A,f=T,k=G("all"),g=G("all"),b=G(null),W=P(()=>{let s=[...w.questions];return k.value!=="all"&&(s=s.filter(t=>t.difficulty===k.value)),g.value!=="all"&&(s=s.filter(t=>t.category===g.value)),s.slice(0,5)}),L=P(()=>{const s=new Set(w.questions.map(t=>t.category));return Array.from(s)}),B={easy:"text-green-700 bg-green-100 border-green-300 hover:bg-green-200 transition-colors",medium:"text-amber-700 bg-amber-100 border-amber-300 hover:bg-amber-200 transition-colors",hard:"text-red-700 bg-red-100 border-red-300 hover:bg-red-200 transition-colors"},M=s=>{f("update:showDefensePrep",s)},S=s=>{b.value=b.value===s?null:s},E=()=>{const s=W.value.map((c,R)=>`Q${R+1}: ${c.question}

Suggested Answer: ${c.suggested_answer}

Key Points:
${c.key_points.map(U=>`â€¢ ${U}`).join(`
`)}

---
`).join(`
`),t=new Blob([s],{type:"text/plain"}),a=URL.createObjectURL(t),p=document.createElement("a");p.href=a,p.download=`defense-questions-chapter-${w.chapterContext.chapter_number}.txt`,p.click(),URL.revokeObjectURL(a)};return V(()=>w.questions,()=>{b.value=null}),(s,t)=>(i(),C(o(H),{class:"border border-border/60 shadow-sm dark:border-border/50 dark:shadow-none transition-all duration-300 hover:shadow-md"},{default:n(()=>[r(o(J),{open:s.showDefensePrep,"onUpdate:open":M},{default:n(()=>[r(o(Z),{class:"w-full"},{default:n(()=>[r(o(X),{class:"pb-3 transition-colors bg-muted/40 hover:bg-muted/60 dark:bg-transparent dark:hover:bg-muted/30"},{default:n(()=>[r(o(Y),{class:"flex items-center justify-between text-sm"},{default:n(()=>[e("span",me,[r(o(v),{class:"h-4 w-4 text-muted-foreground"}),t[4]||(t[4]=d(" Defense Preparation ",-1)),r(o(h),{variant:"secondary",class:"ml-1 text-xs"},{default:n(()=>[d(" Ch. "+l(s.chapterContext.chapter_number),1)]),_:1}),s.questions.length?(i(),C(o(h),{key:0,variant:"outline",class:"ml-1 text-xs"},{default:n(()=>[d(l(s.questions.length)+" questions ",1)]),_:1})):y("",!0)]),r(o(ae),{class:m(["h-4 w-4 text-muted-foreground transition-transform",s.showDefensePrep?"rotate-180":""])},null,8,["class"])]),_:1})]),_:1})]),_:1}),r(o(ee),null,{default:n(()=>[r(o(O),{class:"space-y-4 pt-0"},{default:n(()=>[e("div",fe,[e("div",pe,[r(o(v),{class:"h-4 w-4 text-blue-600 flex-shrink-0"}),e("div",he,[t[5]||(t[5]=e("div",{class:"text-sm font-medium text-blue-800 dark:text-blue-300"},"AI-Powered Defense Preparation",-1)),e("div",ge,"Generate practice questions tailored to Chapter "+l(s.chapterContext.chapter_number)+" content",1)])]),t[6]||(t[6]=e("div",{class:"text-center"},[e("p",{class:"text-xs text-blue-700 dark:text-blue-300"},'ðŸ’¡ Click "Generate Questions" below to create personalized defense questions')],-1))]),e("div",xe,[e("div",ve,[t[7]||(t[7]=e("span",{class:"font-semibold text-foreground"},"Generation Mode",-1)),e("span",null,l(s.autoGenerateEnabled?"Auto generate when ready":"Manual - click to generate"),1)]),e("div",be,[e("span",ye,l(s.autoGenerateEnabled?"Auto":"Manual"),1),r(o(re),{checked:s.autoGenerateEnabled,"onUpdate:checked":t[0]||(t[0]=a=>f("toggle-auto-generate",a))},null,8,["checked"])])]),s.isLoading&&!s.questions.length?(i(),u("div",_e,[e("div",we,[r(o(K),{class:"h-8 w-8 animate-spin text-muted-foreground"}),e("p",ke,[d(" Analyzing Chapter "+l(s.chapterContext.chapter_number)+" content",1),t[8]||(t[8]=e("br",null,null,-1)),t[9]||(t[9]=d(" to generate defense questions... ",-1))])])])):s.questions.length?(i(),u(_,{key:1},[e("div",Ce,[e("div",$e,[e("h4",Ge,[r(o(Q),{class:"h-3 w-3"}),t[10]||(t[10]=d(" Filter by Difficulty ",-1))]),e("div",De,[(i(),u(_,null,$(["all","easy","medium","hard"],a=>r(o(h),{key:a,variant:k.value===a?"default":"secondary",onClick:p=>k.value=a,class:"cursor-pointer text-xs capitalize hover:scale-105 transition-all duration-200 hover:shadow-sm"},{default:n(()=>[d(l(a==="all"?"All Levels":a),1)]),_:2},1032,["variant","onClick"])),64))])]),L.value.length>1?(i(),u("div",We,[e("h4",Le,[r(o(j),{class:"h-3 w-3"}),t[11]||(t[11]=d(" Filter by Topic ",-1))]),e("div",Pe,[r(o(h),{variant:"secondary",onClick:t[1]||(t[1]=a=>g.value="all"),class:m([g.value==="all"?"bg-primary text-primary-foreground shadow-sm":"hover:bg-muted","cursor-pointer text-xs hover:scale-105 transition-all duration-200"])},{default:n(()=>[...t[12]||(t[12]=[d(" All Topics ",-1)])]),_:1},8,["class"]),(i(!0),u(_,null,$(L.value,a=>(i(),C(o(h),{key:a,variant:"secondary",onClick:p=>g.value=a,class:m([g.value===a?"bg-primary text-primary-foreground shadow-sm":"hover:bg-muted","cursor-pointer text-xs capitalize hover:scale-105 transition-all duration-200"])},{default:n(()=>[d(l(a),1)]),_:2},1032,["onClick","class"]))),128))])])):y("",!0)]),r(o(oe)),r(o(se),{class:"h-[420px]"},{default:n(()=>[e("div",Qe,[(i(!0),u(_,null,$(W.value,(a,p)=>(i(),u("div",{key:a.id,class:"group relative"},[r(o(q),{class:m(["cursor-pointer transition-all duration-200 hover:shadow-md hover:border-primary/50",[b.value===a.id?"ring-2 ring-primary shadow-lg border-primary/50 bg-primary/5":"hover:bg-muted/30"]]),onClick:c=>S(a.id)},{default:n(()=>[e("div",je,[r(o(Q),{class:"h-3 w-3"})]),r(o(F),{class:"ml-5 text-sm"},{default:n(()=>[e("div",ze,[e("div",Ae,[e("div",Te,[e("span",Be," Q"+l(p+1),1),r(o(h),{class:m([B[a.difficulty],"text-xs px-2 py-0.5 font-medium border cursor-pointer"])},{default:n(()=>[d(l(a.difficulty),1)]),_:2},1032,["class"]),r(o(h),{variant:"outline",class:"text-xs px-2 py-0.5 bg-muted/50"},{default:n(()=>[d(l(a.category),1)]),_:2},1024)]),e("p",Me,l(a.question),1)]),e("div",Se,[r(o(x),{onClick:D(c=>f("mark-helpful",a.id,!0),["stop"]),variant:"ghost",size:"icon",class:m(["h-7 w-7 hover:scale-110 transition-transform",a.user_marked_helpful===!0?"text-green-600 bg-green-100 hover:bg-green-200":"hover:text-green-600 hover:bg-green-50"])},{default:n(()=>[r(o(ne),{class:"h-3.5 w-3.5"})]),_:2},1032,["onClick","class"]),r(o(x),{onClick:D(c=>f("mark-helpful",a.id,!1),["stop"]),variant:"ghost",size:"icon",class:m(["h-7 w-7 hover:scale-110 transition-transform",a.user_marked_helpful===!1?"text-red-600 bg-red-100 hover:bg-red-200":"hover:text-red-600 hover:bg-red-50"])},{default:n(()=>[r(o(le),{class:"h-3.5 w-3.5"})]),_:2},1032,["onClick","class"]),r(o(x),{onClick:D(c=>f("hide-question",a.id),["stop"]),variant:"ghost",size:"icon",class:"h-7 w-7 hover:scale-110 transition-transform hover:text-red-500 hover:bg-red-50"},{default:n(()=>[r(o(ue),{class:"h-3.5 w-3.5"})]),_:2},1032,["onClick"])])]),b.value===a.id?(i(),u("div",Ee,[e("div",Re,[e("div",Ue,[r(o(j),{class:"h-4 w-4 text-amber-600"}),t[13]||(t[13]=e("strong",{class:"text-sm font-semibold text-foreground"},"Suggested Approach",-1))]),e("p",Ne,l(a.suggested_answer),1)]),a.key_points.length?(i(),u("div",Ve,[e("div",qe,[r(o(ce),{class:"h-4 w-4 text-primary"}),t[14]||(t[14]=e("strong",{class:"text-sm font-semibold text-foreground"},"Key Points to Cover",-1))]),e("ul",Fe,[(i(!0),u(_,null,$(a.key_points,c=>(i(),u("li",{key:c,class:"text-sm text-muted-foreground flex items-start gap-2"},[t[15]||(t[15]=e("span",{class:"text-primary font-bold text-xs mt-1"},"â€¢",-1)),e("span",null,l(c),1)]))),128))])])):y("",!0),e("div",Ie,[e("span",Ke,[r(o(z),{class:"h-3 w-3"}),d(" Viewed "+l(a.times_viewed)+" time"+l(a.times_viewed!==1?"s":""),1)]),t[16]||(t[16]=e("span",{class:"text-xs text-primary/70"}," Click to collapse ",-1))])])):y("",!0)]),_:2},1024)]),_:2},1032,["class","onClick"])]))),128))])]),_:1})],64)):(i(),u("div",Oe,[s.defenseWatcher?.shouldShowProgress?(i(),u("div",He,[e("div",Xe,[e("div",Ye,[r(o(v),{class:"h-24 w-24"})]),e("div",Je,[r(o(v),{class:"mx-auto h-12 w-12 text-amber-500/60 mb-4"}),t[17]||(t[17]=e("h3",{class:"text-sm font-medium text-foreground mb-2"}," Write More to Generate Questions ",-1)),e("p",Ze," Minimum "+l(s.defenseWatcher.threshold)+" words required ",1),t[18]||(t[18]=e("p",{class:"text-xs text-muted-foreground/80 mb-4"},' Keep writing to enable the "Generate Questions" button ',-1)),e("div",et,[r(o(te),{value:s.defenseWatcher.progressPercentage,class:"h-2"},null,8,["value"]),e("div",tt,[e("span",null,l(s.chapterContext.word_count)+" words",1),e("span",st,l(s.defenseWatcher.threshold)+" words needed",1)])])])])])):(i(),u("div",ot,[e("div",rt,[r(o(v),{class:"h-24 w-24"})]),e("div",at,[r(o(v),{class:"mx-auto h-12 w-12 text-muted-foreground/40 mb-4"}),t[19]||(t[19]=e("h3",{class:"text-sm font-medium text-foreground mb-2"}," No Questions Yet ",-1)),t[20]||(t[20]=e("p",{class:"text-xs text-muted-foreground mb-1"},' Click the "Generate Questions" button below to create ',-1)),t[21]||(t[21]=e("p",{class:"text-xs text-muted-foreground/80"}," AI-powered defense questions based on your chapter content ",-1))])]))])),e("div",nt,[r(o(x),{onClick:t[2]||(t[2]=a=>f("generate-more")),disabled:s.isGenerating||s.defenseWatcher&&!s.defenseWatcher.meetsThreshold,size:"sm",variant:s.questions.length?"outline":"default",class:m(["text-xs font-medium transition-all duration-200 shadow-sm",!s.questions.length&&(!s.defenseWatcher||s.defenseWatcher.meetsThreshold)?"bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 text-white shadow-md hover:shadow-lg hover:scale-105 ring-2 ring-blue-300 dark:ring-blue-800":"hover:scale-105 hover:shadow-md"])},{default:n(()=>[r(o(ie),{class:m(["mr-2 h-4 w-4",s.isGenerating?"animate-spin":""])},null,8,["class"]),d(" "+l(s.isGenerating?"Generating...":s.defenseWatcher&&!s.defenseWatcher.meetsThreshold?`Need ${s.defenseWatcher.wordsRemaining} More Words`:s.questions.length?"Generate More":"Generate Questions"),1)]),_:1},8,["disabled","variant","class"]),r(o(x),{onClick:t[3]||(t[3]=a=>f("refresh")),disabled:s.isLoading||!s.questions.length,size:"sm",variant:"outline",class:"text-xs font-medium hover:scale-105 transition-all duration-200 shadow-sm hover:shadow-md"},{default:n(()=>[r(o(z),{class:"mr-2 h-4 w-4"}),t[22]||(t[22]=d(" Shuffle ",-1))]),_:1},8,["disabled"])]),s.questions.length?(i(),C(o(x),{key:3,onClick:E,size:"sm",variant:"ghost",class:"w-full text-xs font-medium hover:bg-primary/10 hover:text-primary transition-all duration-200"},{default:n(()=>[r(o(de),{class:"mr-2 h-4 w-4"}),t[23]||(t[23]=d(" Export Questions ",-1))]),_:1})):y("",!0)]),_:1})]),_:1})]),_:1},8,["open"])]),_:1}))}});export{Gt as _};
