import{bt as S,bs as F,ck as N,cn as y,co as i,cp as d,cq as l,bE as o,cr as t,cs as u,cB as m,cG as b,cS as P,df as B,ct as n,cu as D,ce as c,cl as g}from"./vendor-DwcF3VNb.js";import{_ as E}from"./AdminLayout.vue_vue_type_script_setup_true_lang-Cjul3uBB.js";import{_ as R,a as z}from"./CardContent.vue_vue_type_script_setup_true_lang-ByVWGonT.js";import{_ as A}from"./CardDescription.vue_vue_type_script_setup_true_lang-DCwZv7vk.js";import{_ as T,a as U}from"./CardTitle.vue_vue_type_script_setup_true_lang-CANz9L_6.js";import{_ as x}from"./index-BpTO5Kag.js";import{_ as w}from"./Input.vue_vue_type_script_setup_true_lang-CQe6L5n4.js";import{_ as j}from"./index-BU6y8D-V.js";import{_ as G,a as L,b as q,c as H,d as f}from"./SelectValue.vue_vue_type_script_setup_true_lang-T3ve2U6-.js";import"./Sonner.vue_vue_type_script_setup_true_lang-kLZ_SglN.js";import"./UserInfo.vue_vue_type_script_setup_true_lang-CpzsT-yS.js";import"./TooltipTrigger.vue_vue_type_script_setup_true_lang-C_drGNy-.js";const I={class:"flex flex-wrap gap-4 mb-6"},J={key:0,class:"text-center py-12 text-muted-foreground"},K={key:1,class:"overflow-x-auto"},M={class:"w-full"},O={class:"py-4 px-2"},Q={class:"font-medium"},W={class:"text-sm text-muted-foreground"},X={class:"text-xs text-muted-foreground"},Y={class:"py-4 px-2"},Z={class:"font-medium"},ee={class:"text-sm text-muted-foreground"},te={class:"py-4 px-2 text-right"},se={class:"py-4 px-2 text-right font-medium text-green-600"},ae={class:"py-4 px-2 text-center"},re={class:"py-4 px-2 text-center"},oe={class:"py-4 px-2 text-right text-sm text-muted-foreground"},le={key:2,class:"flex items-center justify-between mt-6"},de={class:"text-sm text-muted-foreground"},ne={class:"flex gap-2"},we=S({__name:"Earnings",props:{earnings:{},filters:{}},setup($){const _=$,s=F({status:_.filters.status||"",from_date:_.filters.from_date||"",to_date:_.filters.to_date||""}),h=N(()=>s.value.status||s.value.from_date||s.value.to_date),V=a=>new Date(a).toLocaleDateString("en-NG",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),k=a=>{switch(a){case"paid":return"bg-green-500/10 text-green-600 border-green-500/20";case"pending":return"bg-yellow-500/10 text-yellow-600 border-yellow-500/20";case"failed":return"bg-red-500/10 text-red-600 border-red-500/20";case"refunded":return"bg-gray-500/10 text-gray-600 border-gray-500/20";default:return"bg-gray-500/10 text-gray-600 border-gray-500/20"}},p=()=>{const a={};s.value.status&&(a.status=s.value.status),s.value.from_date&&(a.from_date=s.value.from_date),s.value.to_date&&(a.to_date=s.value.to_date),c.get(g("admin.referrals.earnings"),a,{preserveState:!0,replace:!0})},C=()=>{s.value={status:"",from_date:"",to_date:""},c.get(g("admin.referrals.earnings"),{},{preserveState:!0,replace:!0})},v=a=>{const e={page:a};s.value.status&&(e.status=s.value.status),s.value.from_date&&(e.from_date=s.value.from_date),s.value.to_date&&(e.to_date=s.value.to_date),c.get(g("admin.referrals.earnings"),e,{preserveState:!0})};return(a,e)=>(i(),y(E,{title:"Referral Earnings",subtitle:"View all referral commission transactions."},{default:d(()=>[l(o(R),{class:"border-border/50"},{default:d(()=>[l(o(T),{class:"flex flex-row items-center justify-between pb-4"},{default:d(()=>[t("div",null,[l(o(U),{class:"text-base"},{default:d(()=>[...e[5]||(e[5]=[u("Earnings History",-1)])]),_:1}),l(o(A),null,{default:d(()=>[...e[6]||(e[6]=[u("All commission earnings across referrers",-1)])]),_:1})])]),_:1}),l(o(z),null,{default:d(()=>[t("div",I,[l(o(G),{modelValue:s.value.status,"onUpdate:modelValue":[e[0]||(e[0]=r=>s.value.status=r),p]},{default:d(()=>[l(o(L),{class:"w-40"},{default:d(()=>[l(o(q),{placeholder:"All Statuses"})]),_:1}),l(o(H),null,{default:d(()=>[l(o(f),{value:""},{default:d(()=>[...e[7]||(e[7]=[u("All Statuses",-1)])]),_:1}),l(o(f),{value:"paid"},{default:d(()=>[...e[8]||(e[8]=[u("Paid",-1)])]),_:1}),l(o(f),{value:"pending"},{default:d(()=>[...e[9]||(e[9]=[u("Pending",-1)])]),_:1}),l(o(f),{value:"failed"},{default:d(()=>[...e[10]||(e[10]=[u("Failed",-1)])]),_:1}),l(o(f),{value:"refunded"},{default:d(()=>[...e[11]||(e[11]=[u("Refunded",-1)])]),_:1})]),_:1})]),_:1},8,["modelValue"]),l(o(w),{modelValue:s.value.from_date,"onUpdate:modelValue":e[1]||(e[1]=r=>s.value.from_date=r),type:"date",class:"w-40",placeholder:"From date",onChange:p},null,8,["modelValue"]),l(o(w),{modelValue:s.value.to_date,"onUpdate:modelValue":e[2]||(e[2]=r=>s.value.to_date=r),type:"date",class:"w-40",placeholder:"To date",onChange:p},null,8,["modelValue"]),h.value?(i(),y(o(x),{key:0,variant:"ghost",size:"sm",onClick:C},{default:d(()=>[...e[12]||(e[12]=[u(" Clear Filters ",-1)])]),_:1})):b("",!0)]),a.earnings.data.length===0?(i(),m("div",J," No earnings found ")):(i(),m("div",K,[t("table",M,[e[13]||(e[13]=t("thead",null,[t("tr",{class:"border-b border-border/50"},[t("th",{class:"text-left py-3 px-2 text-sm font-medium text-muted-foreground"},"Referrer"),t("th",{class:"text-left py-3 px-2 text-sm font-medium text-muted-foreground"},"Referee"),t("th",{class:"text-right py-3 px-2 text-sm font-medium text-muted-foreground"},"Payment"),t("th",{class:"text-right py-3 px-2 text-sm font-medium text-muted-foreground"},"Commission"),t("th",{class:"text-center py-3 px-2 text-sm font-medium text-muted-foreground"},"Rate"),t("th",{class:"text-center py-3 px-2 text-sm font-medium text-muted-foreground"},"Status"),t("th",{class:"text-right py-3 px-2 text-sm font-medium text-muted-foreground"},"Date")])],-1)),t("tbody",null,[(i(!0),m(P,null,B(a.earnings.data,r=>(i(),m("tr",{key:r.id,class:"border-b border-border/30"},[t("td",O,[t("div",null,[t("p",Q,n(r.referrer.name),1),t("p",W,n(r.referrer.email),1),t("code",X,n(r.referrer.referral_code),1)])]),t("td",Y,[t("div",null,[t("p",Z,n(r.referee.name),1),t("p",ee,n(r.referee.email),1)])]),t("td",te,n(r.payment_formatted),1),t("td",se,n(r.commission_formatted),1),t("td",ae,n(r.commission_rate)+"% ",1),t("td",re,[l(o(j),{class:D(k(r.status)),variant:"outline"},{default:d(()=>[u(n(r.status),1)]),_:2},1032,["class"])]),t("td",oe,n(V(r.created_at)),1)]))),128))])])])),a.earnings.last_page>1?(i(),m("div",le,[t("p",de," Page "+n(a.earnings.current_page)+" of "+n(a.earnings.last_page)+" ("+n(a.earnings.total)+" total) ",1),t("div",ne,[l(o(x),{variant:"outline",size:"sm",disabled:a.earnings.current_page===1,onClick:e[3]||(e[3]=r=>v(a.earnings.current_page-1))},{default:d(()=>[...e[14]||(e[14]=[u(" Previous ",-1)])]),_:1},8,["disabled"]),l(o(x),{variant:"outline",size:"sm",disabled:a.earnings.current_page===a.earnings.last_page,onClick:e[4]||(e[4]=r=>v(a.earnings.current_page+1))},{default:d(()=>[...e[15]||(e[15]=[u(" Next ",-1)])]),_:1},8,["disabled"])])])):b("",!0)]),_:1})]),_:1})]),_:1}))}});export{we as default};
