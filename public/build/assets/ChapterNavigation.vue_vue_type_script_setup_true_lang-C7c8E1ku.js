import{_ as v,c as C}from"./index-CwD5qkLf.js";import{_ as z}from"./ScrollArea.vue_vue_type_script_setup_true_lang-LIFwRXiL.js";import{_ as S,a as W,b as V,c as A,d as F,e as L,f as M,g as P}from"./AlertDialogTitle.vue_vue_type_script_setup_true_lang-Cl9cN4K9.js";import{b as q}from"./useForwardExpose-CEOuSuYA.js";import{D as E}from"./DialogTrigger-Di-hhkc3.js";import{d as k,g as x,o as u,w as o,V as D,a$ as G,b0 as I,u as s,m as R,l as b,c,b as l,e as a,h as p,aX as Q,t as d,F as X,f as H,a as y,aD as J,j as K,W as w,bk as O,bW as U,aL as Y,bo as Z,q as ee,aI as T}from"./vendor-H8yUxHVJ.js";import{_ as N}from"./index-CiWGHnJL.js";import{s as te}from"./useAppearance-DRazjLJ1.js";var re=k({__name:"AlertDialogTrigger",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"button"}},setup(_){const m=_;return q(),(n,f)=>(u(),x(s(E),G(I(m)),{default:o(()=>[D(n.$slots,"default")]),_:3},16))}}),se=re;const ae=k({__name:"AlertDialogTrigger",props:{asChild:{type:Boolean},as:{}},setup(_){const m=_;return(n,f)=>(u(),x(s(se),R({"data-slot":"alert-dialog-trigger"},m),{default:o(()=>[D(n.$slots,"default")]),_:3},16))}}),ne={class:"flex h-full flex-col bg-transparent"},oe={class:"px-4 py-3 border-b border-border/40"},le={class:"text-xs font-bold uppercase tracking-wider text-muted-foreground flex items-center gap-2"},ue={class:"mt-2 flex items-center justify-between"},de={class:"text-xs font-medium text-foreground"},ie={class:"p-2 space-y-1"},ce=["onClick"],pe={class:"flex-shrink-0 mt-0.5"},he={key:1,class:"h-6 w-6 rounded-md bg-primary text-primary-foreground flex items-center justify-center shadow-sm ring-2 ring-primary/20"},_e={class:"text-xs font-bold"},me={key:2,class:"h-6 w-6 rounded-md bg-muted text-muted-foreground flex items-center justify-center border border-border"},fe={class:"text-xs font-medium"},ge={key:3,class:"h-6 w-6 rounded-md bg-muted/50 text-muted-foreground/30 flex items-center justify-center border border-border/50"},be={class:"flex-1 text-left min-w-0"},xe={class:"flex items-center gap-2 mt-1.5"},ve={class:"text-[10px] text-muted-foreground/70 flex items-center gap-1"},Ce={key:0,class:"absolute right-2 top-3 opacity-0 group-hover:opacity-100 transition-opacity"},ye={class:"p-3 border-t border-border/40 bg-muted/5"},we={key:1,class:"flex gap-2"},ke={class:"truncate max-w-[120px]"},We=k({__name:"ChapterNavigation",props:{allChapters:{},currentChapter:{},project:{},outlines:{},facultyChapters:{},currentWordCount:{},targetWordCount:{},writingQualityScore:{},chapterContentLength:{}},emits:["goToChapter","generateNextChapter","deleteChapter"],setup(_,{emit:m}){const n=_,f=m,g=b(()=>n.facultyChapters&&n.facultyChapters.length>0?n.facultyChapters.map(t=>{const r=n.allChapters.find(i=>i.chapter_number===t.number),e=n.outlines?.find(i=>i.chapter_number===t.number);return{chapter_number:t.number,title:t.title,target_word_count:t.word_count,status:r?r.status:"not_started",exists:!!r,id:r?.id,slug:r?.slug,outline:e||null,facultyChapter:t}}):n.outlines&&n.outlines.length>0?n.outlines.map(t=>{const r=n.allChapters.find(e=>e.chapter_number===t.chapter_number);return{chapter_number:t.chapter_number,title:t.chapter_title,target_word_count:t.target_word_count,status:r?r.status:"not_started",exists:!!r,id:r?.id,slug:r?.slug,outline:t,facultyChapter:null}}):n.allChapters&&n.allChapters.length>0?n.allChapters.map(t=>({chapter_number:t.chapter_number,title:t.title,target_word_count:0,status:t.status,exists:!0,id:t.id,slug:t.slug,outline:null,facultyChapter:null})):[]);b(()=>!0);const h=b(()=>{const t=n.currentChapter.chapter_number;return g.value.find(e=>e.chapter_number===t+1)});b(()=>{const t=n.currentChapter.chapter_number;return g.value.find(e=>e.chapter_number===t-1)});const $=t=>{f("goToChapter",t)},j=()=>{f("generateNextChapter")},B=(t,r)=>{r&&ee.delete(te("chapters.destroy",{project:n.project.slug,chapter:r}),{preserveState:!0,preserveScroll:!0,only:["allChapters","chapter"],onSuccess:e=>{const i=e.props.flash?.message||"Chapter deleted successfully";T.success(i)},onError:e=>{const i=typeof e=="string"?e:"Failed to delete chapter.";T.error(i)}})};return(t,r)=>(u(),c("div",ne,[l("div",oe,[l("h2",le,[a(s(Q),{class:"h-3.5 w-3.5"}),r[1]||(r[1]=p(" Table of Contents ",-1))]),l("div",ue,[l("span",de,d(g.value.length)+" Chapters",1),a(s(N),{variant:"secondary",class:"text-[10px] h-5 px-1.5 font-normal"},{default:o(()=>[p(d(Math.round(t.currentWordCount/(t.targetWordCount||1)*100))+"% Complete ",1)]),_:1})])]),a(s(z),{class:"flex-1"},{default:o(()=>[l("div",ie,[(u(!0),c(X,null,H(g.value,e=>(u(),c("div",{key:e.chapter_number,class:"group relative"},[l("button",{onClick:i=>$(e.chapter_number),class:w(s(C)("flex w-full items-start gap-3 rounded-lg px-3 py-3 text-sm transition-all duration-200 border border-transparent",e.chapter_number===t.currentChapter.chapter_number?"bg-primary/5 border-primary/10 shadow-sm":"hover:bg-muted/50 hover:border-border/50"))},[l("div",pe,[e.status==="approved"||e.status==="completed"?(u(),c("div",{key:0,class:w(s(C)("h-6 w-6 rounded-md flex items-center justify-center",e.chapter_number===t.currentChapter.chapter_number?"bg-green-500 text-white shadow-sm ring-2 ring-green-500/20":"bg-green-500/10 text-green-700 dark:text-green-400 border border-green-500/20"))},[a(s(O),{class:"h-3.5 w-3.5"})],2)):e.chapter_number===t.currentChapter.chapter_number?(u(),c("div",he,[l("span",_e,d(e.chapter_number),1)])):e.exists?(u(),c("div",me,[l("span",fe,d(e.chapter_number),1)])):(u(),c("div",ge,[a(s(U),{class:"h-3 w-3"})]))]),l("div",be,[l("p",{class:w(s(C)("truncate font-medium leading-tight",e.chapter_number===t.currentChapter.chapter_number?"text-foreground":"text-muted-foreground group-hover:text-foreground"))},d(e.title),3),l("div",xe,[l("span",ve,[a(s(Y),{class:"h-3 w-3"}),p(" "+d(e.target_word_count)+" words ",1)]),e.exists?y("",!0):(u(),x(s(N),{key:0,variant:"outline",class:"h-4 px-1 text-[9px] border-dashed text-muted-foreground/60"},{default:o(()=>[...r[2]||(r[2]=[p(" Not Started ",-1)])]),_:1}))])])],10,ce),e.exists&&e.chapter_number!==t.currentChapter.chapter_number?(u(),c("div",Ce,[a(s(S),null,{default:o(()=>[a(s(ae),{asChild:""},{default:o(()=>[a(s(v),{variant:"ghost",size:"icon",class:"h-6 w-6 text-muted-foreground/50 hover:text-destructive hover:bg-destructive/10 rounded-md"},{default:o(()=>[a(s(Z),{class:"h-3 w-3"})]),_:1})]),_:1}),a(s(W),null,{default:o(()=>[a(s(V),null,{default:o(()=>[a(s(A),null,{default:o(()=>[p("Delete Chapter "+d(e.chapter_number)+"?",1)]),_:2},1024),a(s(F),null,{default:o(()=>[p(' This will permanently delete "'+d(e.title)+'" and all its content. ',1)]),_:2},1024)]),_:2},1024),a(s(L),null,{default:o(()=>[a(s(M),null,{default:o(()=>[...r[3]||(r[3]=[p("Cancel",-1)])]),_:1}),a(s(P),{class:"bg-destructive text-destructive-foreground hover:bg-destructive/90",onClick:i=>B(e.id,e.slug)},{default:o(()=>[...r[4]||(r[4]=[p(" Delete ",-1)])]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)])):y("",!0)]))),128))])]),_:1}),l("div",ye,[h.value&&!h.value.exists?(u(),x(s(v),{key:0,onClick:j,class:"w-full bg-primary text-primary-foreground shadow-sm hover:bg-primary/90 transition-all h-9 text-xs font-medium",size:"sm"},{default:o(()=>[a(s(J),{class:"mr-2 h-3.5 w-3.5"}),p(" Start Chapter "+d(h.value.chapter_number),1)]),_:1})):h.value?(u(),c("div",we,[a(s(v),{variant:"outline",class:"w-full justify-between bg-background hover:bg-accent/50 h-9 text-xs text-zinc-700 dark:text-zinc-300",size:"sm",onClick:r[0]||(r[0]=e=>$(h.value.chapter_number))},{default:o(()=>[l("span",ke,"Next: "+d(h.value.title),1),a(s(K),{class:"h-3.5 w-3.5 ml-2 flex-shrink-0"})]),_:1})])):y("",!0)])]))}});export{We as _};
