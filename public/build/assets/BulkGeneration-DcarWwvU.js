import{bt as O,ck as E,bB as Ce,cR as Se,ca as Pe,cb as te,cl as q,bu as $e,cn as k,co as g,cp as b,cr as s,cq as h,bF as i,cU as Le,cB as y,cG as C,cu as $,ct as w,cF as Fe,df as fe,cs as F,cS as he,de as _e,eu as Te,dT as ee,dB as Ge,c$ as Re,di as ze,gy as Ee,gB as Ie,dy as ve,gC as be,gL as Me,d3 as We,cL as Ae,cj as T,ce as xe}from"./vendor-BJBNFzu6.js";import{_ as Be}from"./index-DweHVuYF.js";import{_ as H}from"./index-DKTzjY4t.js";import{_ as we}from"./CardContent.vue_vue_type_script_setup_true_lang-BmpoBQtZ.js";import{_ as ye,a as ke}from"./index-BWPj8eKR.js";import{_ as qe}from"./AlertTitle.vue_vue_type_script_setup_true_lang-BWkRHULC.js";import{a as Oe}from"./AppLayout.vue_vue_type_script_setup_true_lang-DowxnUGa.js";import{_ as Ue}from"./SafeHtmlText.vue_vue_type_script_setup_true_lang-tJ5ehN7B.js";import{_ as Ne}from"./PurchaseModal.vue_vue_type_script_setup_true_lang-KQgPGRog.js";import{u as Ve}from"./useWordBalance-wU2vTgqu.js";import{_ as Ye}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./UserInfo.vue_vue_type_script_setup_true_lang-LFxEtfzj.js";import"./TooltipTrigger.vue_vue_type_script_setup_true_lang-D5gHzBY1.js";import"./Sonner.vue_vue_type_script_setup_true_lang-C7Uf4kO1.js";import"./AppLogo.vue_vue_type_script_setup_true_lang-DXhfr9d3.js";import"./WordBalanceDisplay.vue_vue_type_script_setup_true_lang-vIKRZBkJ.js";import"./useAppearance-BoUrjusV.js";import"./PWAInstallPrompt.vue_vue_type_script_setup_true_lang-DCd0GLl4.js";import"./DialogContent.vue_vue_type_script_setup_true_lang-C8SicQru.js";import"./DialogDescription.vue_vue_type_script_setup_true_lang-B95wIsmA.js";import"./DialogFooter.vue_vue_type_script_setup_true_lang-DsnnuiaB.js";import"./DialogTitle.vue_vue_type_script_setup_true_lang-vwptL7Il.js";function He(J,v){const a=O({status:"not_started",progress:0,currentStage:"",message:"",isConnected:!1,error:null}),u=O([]),G=O([]),c=O({}),I=O(null),j=new Set;let S=null,m=null,L=null;const re=5e3;let U=null;const se=2e3,N=E(()=>["pending","processing"].includes(a.value.status)),K=E(()=>a.value.status==="completed"),Q=E(()=>a.value.status==="failed"),oe=E(()=>a.value.status==="failed"&&a.value.progress>0),ae=E(()=>{if(K.value)return"Completed";if(Q.value)return"Stopped";if(!N.value)return"Est. 15-20m";const e=c.value.chapter_timings||{},r=Object.keys(e).length,t=c.value.total_chapters||5;if(r>0){const P=Object.values(e).reduce((B,me)=>B+me,0)/r,A=(t-r)*P+60;return A<60?"< 1 min remaining":`~${Math.ceil(A/60)} min${A>=120?"s":""} remaining`}const n=100-a.value.progress,p=Math.ceil(n/100*20);return`~${p} min${p>1?"s":""} remaining`}),X=()=>{if(S){console.warn("Already connected to WebSocket");return}try{S=new Pe({broadcaster:"reverb",key:"waxjdrpfwoo04quppd3r",wsHost:"ws.finalyze.live",wsPort:"443",wssPort:"443",forceTLS:!0,enabledTransports:["ws","wss"]}),m=S.private(`project.${J}.generation`),m.subscribed(()=>{console.log("‚úÖ Connected to generation channel"),a.value.isConnected=!0,a.value.error=null}),m.error(e=>{console.error("‚ùå Channel error:",e),a.value.error="WebSocket connection error"}),M(),console.log("üîå Connecting to WebSocket channel...")}catch(e){console.error("Failed to initialize WebSocket:",e),a.value.error="Failed to connect to real-time updates"}},M=()=>{m&&(m.listen(".generation.started",e=>{console.log("üì° Generation started:",e),W(e)}),m.listen(".generation.literature_mining",e=>{console.log("üìö Literature mining:",e),ne(e)}),m.listen(".generation.chapter.started",e=>{console.log("üìù Chapter started:",e),Z(e)}),m.listen(".generation.chapter.progress",e=>{console.log("‚è≥ Chapter progress:",e),ie(e)}),m.listen(".generation.chapter.completed",e=>{console.log("‚úÖ Chapter completed:",e),le(e)}),m.listen(".generation.completed",e=>{console.log("üéâ Generation completed:",e),ce(e)}),m.listen(".generation.failed",e=>{console.log("‚ùå Generation failed:",e),de(e)}))},W=e=>{a.value.status="processing",a.value.progress=e.progress,a.value.currentStage=e.current_stage,a.value.message=e.message,c.value={...c.value,total_chapters:e.total_chapters,is_resume:e.is_resume,estimated_duration:e.estimated_duration},D(e.total_chapters||5),x(),d({type:e.is_resume?"info":"stage",message:e.is_resume?"üîÑ Resuming generation sequence...":"üöÄ Starting generation sequence..."})},ne=e=>{a.value.progress=e.progress,a.value.currentStage="literature_mining",a.value.message=e.message;const r=u.value.find(t=>t.id==="literature_mining");r&&(r.status="active",r.progress=(e.progress-0)/20*100,r.description=e.message),d({type:"mining",message:e.message,source:e.source}),e.sub_stage==="completed"&&e.source==="complete"&&r&&(r.status="completed",r.progress=100)},Z=e=>{const r=e.chapter_number;f(),a.value.progress=e.progress,a.value.currentStage=`chapter_generation_${r}`,a.value.message=e.message,c.value={...c.value,current_chapter:r,total_chapters:e.total_chapters},ue(r,e.chapter_title,e.target_word_count),ge(r);const t=u.value.find(n=>n.id===`chapter_generation_${r}`);t&&(t.status="active",t.progress=0,t.chapterProgress=10),_(r,30),d({type:"chapter_progress",message:`üìù Starting Chapter ${r}: ${e.chapter_title}`,chapter:r})},ie=e=>{const r=e.chapter_number;if(f(),a.value.progress=e.progress,a.value.message=e.stage_description||e.message,r>0){const t=u.value.find(n=>n.id===`chapter_generation_${r}`);t&&(t.chapterProgress=e.chapter_progress,t.wordCount=e.current_word_count,t.description=e.stage_description||t.description),c.value={...c.value,chapter_progress:e.chapter_progress,current_word_count:e.current_word_count},console.log(`üìä Real progress: Chapter ${r} - ${e.chapter_progress}% (${e.current_word_count} words)`)}},le=e=>{const r=e.chapter_number;f(),a.value.progress=e.progress,a.value.message=e.message;const t=u.value.find(p=>p.id===`chapter_generation_${r}`);t&&(t.status="completed",t.progress=100,t.chapterProgress=100,t.wordCount=e.word_count,t.generationTime=e.generation_time);const n=c.value.chapter_timings||{};n[r]=e.generation_time,c.value={...c.value,chapter_timings:n,chapters_completed:e.chapters_completed},d({type:"chapter_completed",message:`‚úÖ Chapter ${r} completed (${e.word_count?.toLocaleString()} words in ${e.generation_time}s)`,chapter:r,generationTime:e.generation_time})},ce=e=>{a.value.status="completed",a.value.progress=100,a.value.currentStage="completed",a.value.message="Project generation completed successfully!",R(),f();const r=u.value.find(t=>t.id==="html_conversion");r&&(r.status="completed",r.progress=100),I.value=e.download_links||null,c.value={...c.value,total_word_count:e.total_word_count,total_duration:e.total_duration,papers_collected:e.papers_collected},d({type:"success",message:`üéâ Project generation completed! (${e.total_word_count?.toLocaleString()} words in ${Math.round(e.total_duration||0)}s)`})},de=e=>{a.value.status="failed",a.value.message=e.error_message||"Generation failed",a.value.error=e.error_message||null,R(),f();const r=u.value.find(t=>t.id===e.failed_stage);r&&(r.status="error"),c.value={...c.value,can_resume:e.can_resume,last_successful_chapter:e.last_successful_chapter},d({type:"error",message:`‚ùå Generation failed: ${e.error_message}`,chapter:e.failed_chapter})},D=e=>{const r=75/e;u.value=[{id:"literature_mining",name:"Literature Mining",description:"Collecting research papers from academic databases",status:"pending",progress:0,range:[0,20]}];for(let t=1;t<=e;t++){const n=20+(t-1)*r,p=20+t*r;u.value.push({id:`chapter_generation_${t}`,name:`Chapter ${t}`,description:`Chapter ${t}`,status:"pending",progress:0,chapterProgress:0,wordCount:0,targetWordCount:0,range:[n,p]}),j.add(t)}u.value.push({id:"html_conversion",name:"Finalizing Project",description:"Formatting content and preparing final document",status:"pending",progress:0,range:[95,100]})},ue=(e,r,t)=>{if(j.has(e)){const B=u.value.find(me=>me.id===`chapter_generation_${e}`);B&&(B.description=r,B.targetWordCount=t);return}const p=75/Math.max(j.size+1,e),z=20+(e-1)*p,P=20+e*p,Y={id:`chapter_generation_${e}`,name:`Chapter ${e}`,description:r,status:"pending",progress:0,chapterProgress:0,wordCount:0,targetWordCount:t,range:[z,P]},A=u.value.findIndex(B=>B.id==="html_conversion");u.value.splice(A,0,Y),j.add(e),pe()},pe=()=>{const e=u.value.filter(n=>n.id.startsWith("chapter_generation_")),t=75/e.length;e.forEach((n,p)=>{const z=20+p*t,P=20+(p+1)*t;n.range=[z,P]})},ge=e=>{const r=u.value.find(t=>t.id==="literature_mining");r&&r.status!=="completed"&&(r.status="completed",r.progress=100);for(let t=1;t<e;t++){const n=u.value.find(p=>p.id===`chapter_generation_${t}`);n&&n.status!=="completed"&&(n.status="completed",n.progress=100,n.chapterProgress=100)}},d=e=>{G.value.unshift({...e,timestamp:new Date().toISOString()}),G.value.length>100&&G.value.pop()},l=e=>{switch(e){case"success":return"success";case"error":return"error";case"chapter_completed":return"chapter_completed";case"chapter_started":case"chapter_progress":return"chapter_progress";case"mining":return"mining";case"conversion":return"conversion";case"stage":return"stage";default:return"info"}},o=e=>{a.value.status=e.status,a.value.progress=e.progress??0,a.value.currentStage=e.current_stage||"",a.value.message=e.message||"",a.value.error=e.status==="failed"?e.message:null,c.value=e.metadata||{},I.value=e.download_links||null,j.clear();const r=e.chapter_statuses?.length||c.value.total_chapters||5;if(D(r),c.value={...c.value,total_chapters:c.value.total_chapters||r},e.chapter_statuses?.forEach(t=>{const n=u.value.find(p=>p.id===`chapter_generation_${t.chapter_number}`);n&&(n.description=t.title||n.description,n.targetWordCount=t.target_word_count??n.targetWordCount,(t.is_completed||t.status==="completed")&&(n.status="completed",n.progress=100,n.chapterProgress=100,n.wordCount=t.word_count,n.generationTime=c.value?.chapter_timings?.[t.chapter_number]))}),["processing","pending"].includes(e.status)){if(e.current_stage){const t=u.value.find(n=>n.id===e.current_stage);if(t&&(t.status="active",t.id.startsWith("chapter_generation_"))){const n=Number(e.current_stage.replace("chapter_generation_","")),p=e.metadata?.chapter_progress??c.value.chapter_progress??0,z=e.metadata?.current_word_count??c.value.current_word_count;c.value={...c.value,current_chapter:n,chapter_progress:p,current_word_count:z},t.chapterProgress=p,t.wordCount=z??t.wordCount,_(n,30)}if(e.current_stage.includes("chapter_generation")){const n=u.value.find(p=>p.id==="literature_mining");n&&(n.status="completed",n.progress=100)}if(e.current_stage==="html_conversion"){const n=u.value.find(p=>p.id==="html_conversion");n&&(n.status="active",n.progress=e.progress||n.progress)}}x()}if(e.status==="completed"&&(a.value.progress=100,u.value.forEach(t=>{t.status="completed",t.progress=100,t.chapterProgress!==void 0&&(t.chapterProgress=100)})),e.status==="failed"&&e.current_stage){const t=u.value.find(n=>n.id===e.current_stage);t&&(t.status="error")}e.details?.length&&(G.value=e.details.map(t=>({timestamp:t.timestamp,type:l(t.type),message:t.message,chapter:t.chapter,generationTime:t.generation_time,source:t.source})).reverse())},x=()=>{L||(console.log("üì° Starting polling fallback"),L=setInterval(async()=>{if(!N.value){R();return}try{const r=(await te.get(q("api.projects.bulk-generate.status",v))).data;if(r.progress>a.value.progress||r.status!==a.value.status){if(console.log("üìä Polling update received:",{progress:r.progress,status:r.status,stage:r.current_stage}),a.value.progress=r.progress,a.value.status=r.status,a.value.message=r.message,a.value.currentStage=r.current_stage,r.metadata&&(c.value={...c.value,...r.metadata},r.metadata.chapter_progress!==void 0&&r.metadata.current_chapter)){const t=r.metadata.current_chapter,n=u.value.find(p=>p.id===`chapter_generation_${t}`);n&&(n.chapterProgress=r.metadata.chapter_progress,n.wordCount=r.metadata.current_word_count||0)}r.status==="completed"&&(I.value=r.download_links,R()),r.status==="failed"&&(a.value.error=r.message,R())}}catch(e){console.warn("Polling request failed:",e)}},re))},R=()=>{L&&(clearInterval(L),L=null,console.log("üì° Polling stopped"))},_=(e,r=30)=>{if(f(),!u.value.find(P=>P.id===`chapter_generation_${e}`))return;const n=1;let p=0;const z=15;console.log(`üé¨ Starting fallback animation for Chapter ${e} (will be overridden by real progress)`),U=setInterval(()=>{p++;const P=u.value.find(A=>A.id===`chapter_generation_${e}`);if(!P||P.status!=="active"){f();return}if(p>=z){console.log("‚èπÔ∏è Fallback animation stopped - waiting for real WebSocket progress"),f();return}const Y=P.chapterProgress||0;Y<r&&(P.chapterProgress=Math.min(Y+n,r))},se)},f=()=>{U&&(clearInterval(U),U=null)},V=()=>{R(),f(),m&&(m.stopListening(".generation.started"),m.stopListening(".generation.literature_mining"),m.stopListening(".generation.chapter.started"),m.stopListening(".generation.chapter.progress"),m.stopListening(".generation.chapter.completed"),m.stopListening(".generation.completed"),m.stopListening(".generation.failed")),S&&(S.leave(`project.${J}.generation`),S=null),m=null,a.value.isConnected=!1,console.log("üîå Disconnected from generation channel")},je=()=>{a.value={status:"not_started",progress:0,currentStage:"",message:"",isConnected:a.value.isConnected,error:null},u.value=[],G.value=[],c.value={},I.value=null,j.clear()};return Ce(()=>{X()}),Se(()=>{V()}),{state:a,stages:u,activityLog:G,metadata:c,downloadLinks:I,isGenerating:N,isCompleted:K,hasFailed:Q,canResume:oe,estimatedTimeRemaining:ae,connect:X,disconnect:V,restoreFromApiData:o,reset:je,startPolling:x}}const Je={class:"relative min-h-screen p-4 md:p-8 lg:p-12"},Ke={class:"max-w-5xl mx-auto space-y-8"},Qe={class:"flex flex-col gap-6"},Xe={class:"flex flex-col md:flex-row items-start md:items-center justify-between gap-4"},Ze={class:"flex items-center gap-3 px-4 py-2 rounded-full border border-border/50 bg-background/50 backdrop-blur-md shadow-sm self-end md:self-auto"},De={class:"relative flex h-3 w-3"},et={key:0,class:"animate-ping absolute inline-flex h-full w-full rounded-full bg-green-400 opacity-75"},tt={class:"space-y-2"},rt={class:"text-xl text-muted-foreground font-light tracking-wide"},st={class:"grid lg:grid-cols-12 gap-8 items-start relative"},ot={class:"lg:col-span-7 space-y-8 order-2 lg:order-1"},at={class:"space-y-6 pl-2 z-10 relative"},nt={class:"relative space-y-0"},it={class:"flex flex-col items-center"},lt={key:0,class:"w-full h-full bg-gradient-to-b from-primary to-transparent animate-pulse shadow-[0_0_10px_rgba(var(--primary),0.5)]"},ct={class:"flex items-center justify-between gap-4 p-4 rounded-xl border border-border/10 bg-card/10 backdrop-blur-md hover:border-primary/20 hover:bg-card/30 hover:shadow-[0_0_20px_rgba(var(--primary),0.1)] transition-all duration-300 group-hover:bg-card/20"},dt={class:"space-y-1 flex-1"},ut={class:"flex items-center gap-2"},pt={key:0,class:"mt-3 bg-secondary/30 rounded-lg p-3 space-y-2.5 border border-border/30 shadow-inner"},gt={class:"flex justify-between text-xs font-medium text-muted-foreground"},mt={class:"font-mono text-xs tracking-tight"},ft={class:"h-2 w-full overflow-hidden rounded-full bg-background/50 border border-white/5"},ht={key:0,class:"absolute inset-0 bg-gradient-to-r from-transparent via-white/30 to-transparent skew-x-[-20deg] animate-shimmer",style:{"background-size":"200% 100%"}},_t={key:0,class:"text-primary hidden sm:block"},vt={class:"lg:col-span-5 flex flex-col gap-6 lg:sticky lg:top-24 lg:h-[calc(100vh-6rem)] order-1 lg:order-2"},bt={class:"group relative z-20"},xt={class:"space-y-6 md:space-y-8"},wt={class:"flex flex-col items-center justify-center py-6"},yt={class:"relative w-48 h-48"},kt={class:"w-full h-full -rotate-90",viewBox:"0 0 100 100"},Ct=["stroke-dasharray","stroke-dashoffset"],jt={class:"absolute inset-0 flex flex-col items-center justify-center"},St={class:"text-4xl font-bold tabular-nums tracking-tighter"},Pt={class:"text-xs font-medium uppercase tracking-widest text-muted-foreground/80 mt-1"},$t={class:"mt-6 text-center space-y-2"},Lt={class:"text-base text-muted-foreground leading-relaxed animate-pulse-slow"},Ft={class:"flex items-center justify-center gap-2 text-sm text-muted-foreground bg-secondary/30 px-3 py-1 rounded-full w-fit mx-auto"},Tt={class:"font-mono"},Gt={class:"flex flex-col gap-4 pt-4 border-t border-border/50"},Rt={class:"grid grid-cols-2 gap-3"},zt={class:"hidden lg:flex flex-col flex-1 min-h-0 relative"},Et={class:"flex items-center justify-between px-1 bg-background pb-2"},It={class:"flex items-center gap-2"},Mt={class:"flex-1 overflow-y-auto p-4 font-mono text-xs md:text-sm scrollbar-hide relative"},Wt={key:"empty",class:"absolute inset-0 flex flex-col items-center justify-center text-gray-700 select-none"},At={class:"animate-pulse flex flex-col items-center gap-2"},Bt={class:"shrink-0 text-gray-600 select-none text-[10px] mt-[3px]"},qt={key:0,class:"text-gray-500 mr-2"},Ot=$e({__name:"BulkGeneration",props:{project:{}},setup(J){const v=J,{state:a,stages:u,activityLog:G,metadata:c,downloadLinks:I,isGenerating:j,isCompleted:S,hasFailed:m,canResume:L,estimatedTimeRemaining:re,restoreFromApiData:U,reset:se}=He(v.project.id,v.project.slug),{showPurchaseModal:N,requiredWordsForModal:K,actionDescriptionForModal:Q,checkAndPrompt:oe,closePurchaseModal:ae,estimates:X}=Ve(),M=O(!1),W=O(!1),ne=E(()=>a.value.isConnected?"text-green-500":a.value.error?"text-red-500":"text-yellow-500"),Z=E(()=>S.value?"Project Ready!":j.value?"Generating Your Project":L.value?"Resume Generation":"Ready to Generate"),ie=E(()=>{if(S.value)return"Your project has been successfully generated. You can now download it or view the chapters.";if(c.value?.current_chapter){const d=c.value.current_chapter,l=c.value.chapter_progress||0;return`Generating Chapter ${d} (${l}% complete)...`}return a.value.currentStage==="literature_mining"?"Analyzing academic databases and collecting relevant sources...":a.value.currentStage?.includes("chapter_generation")?"Writing your chapters with proper citations and formatting...":a.value.currentStage==="html_conversion"?"Finalizing formatting and preparing your document...":m.value?"Generation failed. You can resume from where it left off.":L.value?'Click "Resume Generation" to continue from the last completed step.':"Click the button below to start generating your complete project."}),le=d=>d==="literature_mining"?We:d==="html_conversion"?Ae:ve,ce=async(d=!1)=>{if(M.value||j.value)return;const l=v.project.chapters?.filter(_=>_.status!=="completed"&&(_.word_count??0)<=0).length||v.project.chapters?.length||1,o=(()=>{const _=(v.project.chapters||[]).map(f=>f.target_word_count).filter(f=>typeof f=="number"&&f>0);return _.length>0?Math.ceil(_.reduce((f,V)=>f+V,0)/_.length):2e3})(),x=X.chapter(o)*l;if(oe(x,d?"resume bulk generation":"bulk generate chapters")){M.value=!0,d||se();try{if((await te.post(q("api.projects.bulk-generate.start",v.project.slug),{resume:d})).data.generation_id)T.success(d?"Resuming generation...":"Generation started!");else throw new Error("No generation ID returned")}catch(_){console.error("Failed to start generation:",_),T.error(_.response?.data?.message||"Failed to start generation"),a.value.error=_.response?.data?.message||"Failed to start generation"}finally{M.value=!1}}},de=async()=>{try{await te.post(q("api.projects.bulk-generate.cancel",v.project.slug)),T.info("Generation cancelled")}catch(d){console.error("Failed to cancel generation:",d),T.error("Failed to cancel generation")}},D=async()=>{if(W.value)return;const d=I.value?.pdf||q("export.project.pdf",{project:v.project.slug}),l=v.project.title||v.project.topic||"Project";W.value=!0,T.loading("Generating project PDF...",{id:"download-project-pdf"});try{const o=await fetch(d,{method:"GET",headers:{Accept:"application/pdf"}});if(o.ok){const x=o.headers.get("content-type");if(x&&x.includes("application/json")){const V=await o.json();T.error("Export Failed",{id:"download-project-pdf",description:V.message||"An error occurred during PDF export."});return}const R=await o.blob(),_=window.URL.createObjectURL(R),f=document.createElement("a");f.href=_,f.download=`${v.project.slug}_full_project.pdf`,document.body.appendChild(f),f.click(),document.body.removeChild(f),window.URL.revokeObjectURL(_),T.success("Project PDF exported successfully!",{id:"download-project-pdf",description:`${l} has been downloaded as PDF.`})}else try{const x=await o.json();T.error("Export Failed",{id:"download-project-pdf",description:x.message||"An error occurred during PDF export."})}catch{T.error("Export Failed",{id:"download-project-pdf",description:"Unable to export project as PDF. Please try again."})}}catch{T.error("Export Failed",{id:"download-project-pdf",description:"Network error occurred. Please check your connection and try again."})}finally{W.value=!1}},ue=()=>{xe.visit(q("projects.show",v.project.slug))},pe=()=>{xe.visit(q("projects.writing",v.project.slug))},ge=d=>new Date(d).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",second:"2-digit"});return Ce(async()=>{try{const d=await te.get(q("api.projects.bulk-generate.status",v.project.slug));d.data.status!=="not_started"&&U(d.data)}catch(d){console.error("Failed to check generation status:",d)}}),(d,l)=>(g(),k(Oe,{title:Z.value},{default:b(()=>[l[19]||(l[19]=s("div",{class:"fixed inset-0 overflow-hidden pointer-events-none"},[s("div",{class:"absolute top-[-10%] right-[-5%] w-[500px] h-[500px] bg-primary/10 rounded-full blur-[100px] mix-blend-screen animate-pulse duration-3000"}),s("div",{class:"absolute bottom-[-10%] left-[-5%] w-[600px] h-[600px] bg-blue-600/5 rounded-full blur-[120px] mix-blend-screen"})],-1)),s("div",Je,[s("div",Ke,[s("div",Qe,[s("div",Xe,[h(i(H),{variant:"outline",size:"icon",onClick:pe,class:"rounded-xl border-dashed border-gray-600/30 hover:bg-gray-100/10 hover:border-primary/50 transition-all shrink-0"},{default:b(()=>[h(i(Le),{class:"h-5 w-5"})]),_:1}),s("div",Ze,[s("div",De,[i(a).isConnected?(g(),y("span",et)):C("",!0),s("span",{class:$(["relative inline-flex rounded-full h-3 w-3",i(a).isConnected?"bg-green-500":"bg-red-500"])},null,2)]),s("span",{class:$(["text-sm font-medium",ne.value])},w(i(a).isConnected?"System Online":"Connecting..."),3)])]),s("div",tt,[h(Ue,{as:"h1",class:"text-2xl md:text-3xl font-bold tracking-tight bg-gradient-to-r from-foreground to-foreground/60 bg-clip-text text-transparent leading-tight",content:d.project.title||d.project.topic},null,8,["content"]),s("p",rt,w(Z.value),1)])]),h(Fe,{"enter-active-class":"transition duration-300 ease-out","enter-from-class":"transform -translate-y-2 opacity-0","enter-to-class":"transform translate-y-0 opacity-100","leave-active-class":"transition duration-200 ease-in","leave-from-class":"transform translate-y-0 opacity-100","leave-to-class":"transform -translate-y-2 opacity-0"},{default:b(()=>[i(a).error&&!i(j)?(g(),k(i(ye),{key:0,variant:"destructive",class:"border-red-500/50 bg-red-500/10"},{default:b(()=>[h(i(fe),{class:"h-4 w-4"}),h(i(qe),null,{default:b(()=>[...l[2]||(l[2]=[F("Execution Error",-1)])]),_:1}),h(i(ke),null,{default:b(()=>[F(w(i(a).error),1)]),_:1})]),_:1})):C("",!0)]),_:1}),s("div",st,[s("div",ot,[s("div",at,[l[6]||(l[6]=s("h2",{class:"text-xl font-semibold tracking-tight"},"Generation Sequence",-1)),s("div",nt,[l[5]||(l[5]=s("div",{class:"absolute left-[19px] top-6 bottom-6 w-0.5 bg-gradient-to-b from-border/50 via-border/30 to-transparent"},null,-1)),(g(!0),y(he,null,_e(i(u),(o,x)=>(g(),y("div",{key:o.id,class:"relative flex gap-4 group"},[s("div",it,[s("div",{class:$(["relative z-10 flex h-8 w-8 items-center justify-center rounded-full border-2 shadow-sm transition-all duration-500",{"border-muted bg-card scale-95 opacity-70":o.status==="pending","border-primary bg-background ring-2 ring-primary/20 scale-110 shadow-[0_0_10px_rgba(var(--primary),0.3)]":o.status==="active","border-green-500 bg-green-500 text-white scale-100 shadow-green-500/20":o.status==="completed","border-red-500 bg-red-500/10 text-red-500":o.status==="error"}])},[o.status==="completed"?(g(),k(i(Te),{key:0,class:"h-4 w-4 stroke-[3]"})):o.status==="active"?(g(),k(i(ee),{key:1,class:"h-4 w-4 animate-spin text-primary"})):o.status==="error"?(g(),k(i(fe),{key:2,class:"h-4 w-4"})):(g(),k(Ge(le(o.id)),{key:3,class:"h-3.5 w-3.5 text-muted-foreground"}))],2),x<i(u).length-1?(g(),y("div",{key:0,class:$(["w-0.5 flex-1 transition-all duration-700 ease-in-out mt-[-1px] mb-[-1px]",{"bg-gradient-to-b from-green-500 to-transparent":o.status==="completed","bg-transparent":o.status!=="completed"}])},[o.status==="active"?(g(),y("div",lt)):C("",!0)],2)):C("",!0)]),s("div",{class:$(["flex-1 pb-6 min-w-0 transition-opacity duration-300",{"opacity-50 hover:opacity-100":o.status==="pending"}])},[s("div",ct,[s("div",dt,[s("div",ut,[s("h3",{class:$(["font-semibold text-base tracking-tight",{"text-foreground":o.status==="active"||o.status==="completed","text-muted-foreground":o.status==="pending","text-red-500":o.status==="error"}])},w(o.name),3),o.status==="completed"&&o.generationTime?(g(),k(i(Be),{key:0,variant:"secondary",class:"text-[10px] h-5 px-1.5 font-mono bg-secondary/50 text-secondary-foreground/70"},{default:b(()=>[F(w(o.generationTime)+"s ",1)]),_:2},1024)):C("",!0)]),s("p",{class:$(["text-sm text-balance leading-relaxed",{"text-muted-foreground/80":o.status!=="active","text-primary/90 font-medium":o.status==="active"}])},w(o.description),3),o.id.startsWith("chapter_generation_")&&(o.status==="active"||o.status==="completed")?(g(),y("div",pt,[s("div",gt,[l[4]||(l[4]=s("span",{class:"uppercase tracking-wider text-[10px]"},"Progress",-1)),s("span",mt,[s("span",{class:$({"text-primary font-bold":o.status==="active","text-green-500 font-bold":o.status==="completed"})},w(o.wordCount?.toLocaleString()??0),3),l[3]||(l[3]=s("span",{class:"opacity-50 mx-1"},"/",-1)),F(" "+w(o.targetWordCount?.toLocaleString()??0)+" words ",1)])]),s("div",ft,[s("div",{class:$(["h-full transition-all duration-700 ease-out relative overflow-hidden",{"bg-gradient-to-r from-green-500 to-emerald-400":o.status==="completed","bg-gradient-to-r from-blue-500 to-indigo-500":o.status==="active"}]),style:Re({width:o.status==="completed"?"100%":`${o.chapterProgress}%`})},[o.status==="active"?(g(),y("div",ht)):C("",!0)],6)])])):C("",!0)]),o.status==="active"?(g(),y("div",_t,[h(i(ee),{class:"h-4 w-4 animate-spin"})])):C("",!0)])],2)]))),128))])])]),s("div",vt,[s("div",bt,[l[13]||(l[13]=s("div",{class:"absolute -inset-0.5 bg-gradient-to-r from-primary/30 to-purple-500/30 rounded-2xl blur opacity-30 group-hover:opacity-50 transition duration-1000"},null,-1)),h(i(we),{class:"relative p-6 md:p-8 border-border/50 bg-card/80 backdrop-blur-xl transition-all duration-300 shadow-2xl"},{default:b(()=>[s("div",xt,[s("div",wt,[s("div",yt,[(g(),y("svg",kt,[l[7]||(l[7]=s("circle",{cx:"50",cy:"50",r:"45",fill:"none",stroke:"currentColor",class:"text-secondary/30","stroke-width":"8"},null,-1)),s("circle",{cx:"50",cy:"50",r:"45",fill:"none",stroke:"url(#progress-gradient)","stroke-width":"8","stroke-linecap":"round",class:"transition-all duration-1000 ease-out","stroke-dasharray":2*Math.PI*45,"stroke-dashoffset":2*Math.PI*45*(1-i(a).progress/100)},null,8,Ct),l[8]||(l[8]=s("defs",null,[s("linearGradient",{id:"progress-gradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%"},[s("stop",{offset:"0%","stop-color":"#3b82f6"}),s("stop",{offset:"50%","stop-color":"#6366f1"}),s("stop",{offset:"100%","stop-color":"#a855f7"})])],-1))])),s("div",jt,[s("span",St,w(Math.round(i(a).progress))+"%",1),s("span",Pt,w(i(S)?"Complete":"Progress"),1)])]),s("div",$t,[s("p",Lt,w(ie.value),1),s("div",Ft,[h(i(ze),{class:"h-4 w-4 text-primary"}),s("span",Tt,w(i(re)),1)])])]),s("div",Gt,[!i(j)&&!i(S)?(g(),k(i(H),{key:0,onClick:l[0]||(l[0]=o=>ce(i(L))),disabled:M.value||!i(a).isConnected,size:"lg",class:"w-full rounded-xl shadow-lg shadow-primary/20 transition-all hover:scale-[1.02] active:scale-[0.98] text-base font-semibold py-6"},{default:b(()=>[M.value?(g(),k(i(ee),{key:0,class:"mr-2 h-5 w-5 animate-spin"})):(g(),k(i(Ee),{key:1,class:"mr-2 h-5 w-5 fill-current"})),F(" "+w(i(L)?"Resume Operation":"Initialize Generation"),1)]),_:1},8,["disabled"])):C("",!0),i(j)?(g(),k(i(H),{key:1,variant:"destructive",size:"lg",onClick:de,class:"w-full rounded-xl shadow-lg shadow-destructive/20 hover:bg-destructive/90 py-6"},{default:b(()=>[...l[9]||(l[9]=[F(" Cancel Process ",-1)])]),_:1})):C("",!0),i(S)?(g(),y(he,{key:2},[s("div",Rt,[h(i(H),{onClick:ue,size:"lg",class:"rounded-xl shadow-lg shadow-primary/20 hover:scale-[1.02] transition-all text-base py-6"},{default:b(()=>[h(i(Ie),{class:"mr-2 h-5 w-5"}),l[10]||(l[10]=F(" View in Editor ",-1))]),_:1}),h(i(H),{variant:"secondary",size:"lg",onClick:D,disabled:W.value,class:"rounded-xl hover:bg-secondary/80 py-6"},{default:b(()=>[W.value?(g(),k(i(ee),{key:0,class:"mr-2 h-4 w-4 animate-spin"})):(g(),k(i(ve),{key:1,class:"mr-2 h-4 w-4"})),l[11]||(l[11]=F(" Export PDF ",-1))]),_:1},8,["disabled"])]),h(i(ye),{variant:"default",class:"bg-yellow-500/10 border-yellow-500/20 text-yellow-500"},{default:b(()=>[h(i(fe),{class:"h-4 w-4"}),h(i(ke),{class:"text-xs leading-relaxed"},{default:b(()=>[...l[12]||(l[12]=[F(" AI is not perfect and can make mistakes. Please review each chapter and make adjustments where necessary. This will also help you know the project well enough to defend it. ",-1)])]),_:1})]),_:1})],64)):C("",!0)])])]),_:1})]),s("div",zt,[s("div",Et,[s("div",It,[h(i(be),{class:"h-5 w-5 text-muted-foreground"}),l[14]||(l[14]=s("h2",{class:"text-lg font-semibold tracking-tight"},"System Logs",-1))]),l[15]||(l[15]=s("div",{class:"flex gap-1.5"},[s("div",{class:"w-3 h-3 rounded-full bg-red-500/80"}),s("div",{class:"w-3 h-3 rounded-full bg-yellow-500/80"}),s("div",{class:"w-3 h-3 rounded-full bg-green-500/80"})],-1))]),h(i(we),{class:"flex-1 overflow-hidden bg-[#0c0c0c] border-gray-800 shadow-2xl rounded-xl flex flex-col"},{default:b(()=>[l[18]||(l[18]=s("div",{class:"bg-gray-900/50 border-b border-gray-800 p-2 flex justify-center shrink-0"},[s("span",{class:"text-[10px] uppercase font-mono tracking-widest text-gray-500"},"generation-task.sh")],-1)),s("div",Mt,[h(Me,{name:"list",tag:"div",class:"space-y-2"},{default:b(()=>[i(G).length===0?(g(),y("div",Wt,[s("div",At,[h(i(be),{class:"h-10 w-10 opacity-20"}),l[16]||(l[16]=s("p",{class:"font-sans text-sm"},"Waiting for initialization...",-1))])])):C("",!0),(g(!0),y(he,null,_e(i(G),(o,x)=>(g(),y("div",{key:x,class:$(["flex gap-3 items-start border-l-2 pl-3 py-0.5 transition-all hover:bg-white/5",{"border-blue-500/50":o.type==="info","border-green-500/50":o.type==="success"||o.type==="chapter_completed","border-red-500/50":o.type==="error","border-purple-500/50":o.type==="stage","border-transparent":!["info","success","chapter_completed","error","stage"].includes(o.type)}])},[s("span",Bt,w(ge(o.timestamp)),1),s("span",{class:$(["break-words leading-tight",{"text-blue-400":o.type==="info","text-green-400 font-medium":o.type==="success"||o.type==="chapter_completed","text-red-400 font-bold bg-red-900/10 px-1 rounded":o.type==="error","text-purple-400 font-bold":o.type==="stage","text-cyan-400":o.type==="chapter_progress","text-amber-400":o.type==="mining","text-pink-400":o.type==="conversion","text-gray-300":!o.type}])},[o.type==="stage"?(g(),y("span",qt,"$")):C("",!0),F(" "+w(o.message),1)],2)],2))),128)),l[17]||(l[17]=s("div",{key:"cursor",class:"h-4 w-2 bg-gray-500 animate-pulse mt-2 inline-block"},null,-1))]),_:1})])]),_:1})])])])])]),h(Ne,{open:i(N),"current-balance":0,"required-words":i(K),"action-description":i(Q),"onUpdate:open":l[1]||(l[1]=o=>N.value=o),onClose:i(ae)},null,8,["open","required-words","action-description","onClose"])]),_:1},8,["title"]))}}),ur=Ye(Ot,[["__scopeId","data-v-9a2aef90"]]);export{ur as default};
