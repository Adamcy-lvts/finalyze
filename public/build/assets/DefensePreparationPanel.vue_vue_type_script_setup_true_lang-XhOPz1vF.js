import{d as V,A as W,g as Q,N as q,c as C,o as i,w as n,k as r,u as o,e,s as d,q as y,t as l,n as m,a as u,F as _,E as $,O as D}from"./app-CGVN6_L1.js";import{_ as E,a as F}from"./index-byM0uKWt.js";import{_ as p}from"./index-NNDWCshN.js";import{c as I,L as K,_ as v}from"./index-DxO3weBC.js";import{a as O,_ as H}from"./CardContent.vue_vue_type_script_setup_true_lang-Bmay5RTP.js";import{_ as X,a as Y}from"./CardTitle.vue_vue_type_script_setup_true_lang-BLT4Y6ri.js";import{_ as J,a as Z,b as ee}from"./CollapsibleTrigger.vue_vue_type_script_setup_true_lang-DoRXtogy.js";import{_ as te}from"./Progress.vue_vue_type_script_setup_true_lang-BrsJqieh.js";import{_ as se}from"./useTextHistory-Czp4cJwM.js";import{_ as oe}from"./Separator.vue_vue_type_script_setup_true_lang-mJQwXPaV.js";import{C as re}from"./chevron-down-CFH8Q6mL.js";import{C as j,T as ae,a as ne}from"./thumbs-up-BOfFODc7.js";import{L as z}from"./lightbulb-CHAWiy08.js";import{W as ie}from"./wand-sparkles-Bm1fI0SC.js";import{R as G}from"./refresh-cw-B1PzIJUv.js";import{D as le}from"./download-C8aFcHv3.js";import{X as de}from"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-D3dfPFfw.js";import{C as ue}from"./circle-alert-CWOsSsuG.js";/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x=I("ShieldIcon",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]),ce={class:"flex items-center gap-2"},me={class:"space-y-3 p-3 bg-gradient-to-r from-blue-50 to-indigo-50 border border-blue-200 rounded-lg dark:from-blue-950/30 dark:to-indigo-950/30 dark:border-blue-800"},fe={class:"flex items-center justify-center gap-2"},pe={class:"text-center"},he={class:"text-xs text-blue-600 dark:text-blue-400"},ge={key:0,class:"py-8"},ve={class:"flex flex-col items-center justify-center space-y-2"},xe={class:"text-xs text-muted-foreground text-center"},be={class:"space-y-3"},ye={class:"space-y-2"},_e={class:"text-xs font-medium text-muted-foreground flex items-center gap-1"},we={class:"flex gap-1 flex-wrap"},ke={key:0,class:"space-y-2"},Ce={class:"text-xs font-medium text-muted-foreground flex items-center gap-1"},$e={class:"flex flex-wrap gap-1"},We={class:"space-y-3 pr-3"},De={class:"absolute top-2 left-2 opacity-60 group-hover:opacity-100 transition-opacity"},Le={class:"flex items-start justify-between gap-3"},Pe={class:"flex-1 space-y-2"},Qe={class:"flex items-center gap-2"},je={class:"text-xs font-bold text-primary bg-primary/10 px-2 py-0.5 rounded-full"},ze={class:"font-medium text-foreground leading-relaxed"},Ge={class:"flex items-center gap-1 opacity-70 group-hover:opacity-100 transition-opacity"},Ae={key:0,class:"mt-4 space-y-4 border-t border-dashed pt-4 animate-in slide-in-from-top-2 duration-200"},Te={class:"bg-muted/30 rounded-lg p-3 space-y-2"},Se={class:"flex items-center gap-2"},Be={class:"text-sm text-muted-foreground leading-relaxed pl-6"},Ne={key:0,class:"bg-primary/5 rounded-lg p-3 space-y-2"},Re={class:"flex items-center gap-2"},Me={class:"space-y-1.5 pl-6"},Ue={class:"flex items-center justify-between text-xs text-muted-foreground/70 border-t border-dashed pt-2"},Ve={class:"flex items-center gap-1"},qe={key:2,class:"py-12 text-center"},Ee={key:0,class:"space-y-4"},Fe={class:"relative"},Ie={class:"absolute inset-0 flex items-center justify-center opacity-10"},Ke={class:"relative"},Oe={class:"text-xs text-muted-foreground mb-1"},He={class:"max-w-md mx-auto space-y-2"},Xe={class:"flex justify-between text-xs text-muted-foreground"},Ye={class:"font-medium"},Je={key:1,class:"relative"},Ze={class:"absolute inset-0 flex items-center justify-center opacity-10"},et={class:"relative"},tt={class:"grid grid-cols-2 gap-3"},yt=V({__name:"DefensePreparationPanel",props:{showDefensePrep:{type:Boolean,default:!0},questions:{},isLoading:{type:Boolean},isGenerating:{type:Boolean},chapterContext:{},defenseWatcher:{}},emits:["update:showDefensePrep","generate-more","refresh","mark-helpful","hide-question"],setup(A,{emit:T}){const w=A,h=T,k=W("all"),g=W("all"),b=W(null),L=Q(()=>{let s=[...w.questions];return k.value!=="all"&&(s=s.filter(t=>t.difficulty===k.value)),g.value!=="all"&&(s=s.filter(t=>t.category===g.value)),s.slice(0,5)}),P=Q(()=>{const s=new Set(w.questions.map(t=>t.category));return Array.from(s)}),S={easy:"text-green-700 bg-green-100 border-green-300 hover:bg-green-200 transition-colors",medium:"text-amber-700 bg-amber-100 border-amber-300 hover:bg-amber-200 transition-colors",hard:"text-red-700 bg-red-100 border-red-300 hover:bg-red-200 transition-colors"},B=s=>{h("update:showDefensePrep",s)},N=s=>{b.value=b.value===s?null:s},R=()=>{const s=L.value.map((c,M)=>`Q${M+1}: ${c.question}

Suggested Answer: ${c.suggested_answer}

Key Points:
${c.key_points.map(U=>`â€¢ ${U}`).join(`
`)}

---
`).join(`
`),t=new Blob([s],{type:"text/plain"}),a=URL.createObjectURL(t),f=document.createElement("a");f.href=a,f.download=`defense-questions-chapter-${w.chapterContext.chapter_number}.txt`,f.click(),URL.revokeObjectURL(a)};return q(()=>w.questions,()=>{b.value=null}),(s,t)=>(i(),C(o(H),{class:"border border-border/60 shadow-sm dark:border-border/50 dark:shadow-none transition-all duration-300 hover:shadow-md"},{default:n(()=>[r(o(J),{open:s.showDefensePrep,"onUpdate:open":B},{default:n(()=>[r(o(Z),{class:"w-full"},{default:n(()=>[r(o(X),{class:"pb-3 transition-colors bg-muted/40 hover:bg-muted/60 dark:bg-transparent dark:hover:bg-muted/30"},{default:n(()=>[r(o(Y),{class:"flex items-center justify-between text-sm"},{default:n(()=>[e("span",ce,[r(o(x),{class:"h-4 w-4 text-muted-foreground"}),t[3]||(t[3]=d(" Defense Preparation ",-1)),r(o(p),{variant:"secondary",class:"ml-1 text-xs"},{default:n(()=>[d(" Ch. "+l(s.chapterContext.chapter_number),1)]),_:1}),s.questions.length?(i(),C(o(p),{key:0,variant:"outline",class:"ml-1 text-xs"},{default:n(()=>[d(l(s.questions.length)+" questions ",1)]),_:1})):y("",!0)]),r(o(re),{class:m(["h-4 w-4 text-muted-foreground transition-transform",s.showDefensePrep?"rotate-180":""])},null,8,["class"])]),_:1})]),_:1})]),_:1}),r(o(ee),null,{default:n(()=>[r(o(O),{class:"space-y-4 pt-0"},{default:n(()=>[e("div",me,[e("div",fe,[r(o(x),{class:"h-4 w-4 text-blue-600 flex-shrink-0"}),e("div",pe,[t[4]||(t[4]=e("div",{class:"text-sm font-medium text-blue-800 dark:text-blue-300"},"AI-Powered Defense Preparation",-1)),e("div",he,"Generate practice questions tailored to Chapter "+l(s.chapterContext.chapter_number)+" content",1)])]),t[5]||(t[5]=e("div",{class:"text-center"},[e("p",{class:"text-xs text-blue-700 dark:text-blue-300"},'ðŸ’¡ Click "Generate Questions" below to create personalized defense questions')],-1))]),s.isLoading&&!s.questions.length?(i(),u("div",ge,[e("div",ve,[r(o(K),{class:"h-8 w-8 animate-spin text-muted-foreground"}),e("p",xe,[d(" Analyzing Chapter "+l(s.chapterContext.chapter_number)+" content",1),t[6]||(t[6]=e("br",null,null,-1)),t[7]||(t[7]=d(" to generate defense questions... ",-1))])])])):s.questions.length?(i(),u(_,{key:1},[e("div",be,[e("div",ye,[e("h4",_e,[r(o(j),{class:"h-3 w-3"}),t[8]||(t[8]=d(" Filter by Difficulty ",-1))]),e("div",we,[(i(),u(_,null,$(["all","easy","medium","hard"],a=>r(o(p),{key:a,variant:k.value===a?"default":"secondary",onClick:f=>k.value=a,class:"cursor-pointer text-xs capitalize hover:scale-105 transition-all duration-200 hover:shadow-sm"},{default:n(()=>[d(l(a==="all"?"All Levels":a),1)]),_:2},1032,["variant","onClick"])),64))])]),P.value.length>1?(i(),u("div",ke,[e("h4",Ce,[r(o(z),{class:"h-3 w-3"}),t[9]||(t[9]=d(" Filter by Topic ",-1))]),e("div",$e,[r(o(p),{variant:"secondary",onClick:t[0]||(t[0]=a=>g.value="all"),class:m([g.value==="all"?"bg-primary text-primary-foreground shadow-sm":"hover:bg-muted","cursor-pointer text-xs hover:scale-105 transition-all duration-200"])},{default:n(()=>[...t[10]||(t[10]=[d(" All Topics ",-1)])]),_:1},8,["class"]),(i(!0),u(_,null,$(P.value,a=>(i(),C(o(p),{key:a,variant:"secondary",onClick:f=>g.value=a,class:m([g.value===a?"bg-primary text-primary-foreground shadow-sm":"hover:bg-muted","cursor-pointer text-xs capitalize hover:scale-105 transition-all duration-200"])},{default:n(()=>[d(l(a),1)]),_:2},1032,["onClick","class"]))),128))])])):y("",!0)]),r(o(oe)),r(o(se),{class:"h-[420px]"},{default:n(()=>[e("div",We,[(i(!0),u(_,null,$(L.value,(a,f)=>(i(),u("div",{key:a.id,class:"group relative"},[r(o(E),{class:m(["cursor-pointer transition-all duration-200 hover:shadow-md hover:border-primary/50",[b.value===a.id?"ring-2 ring-primary shadow-lg border-primary/50 bg-primary/5":"hover:bg-muted/30"]]),onClick:c=>N(a.id)},{default:n(()=>[e("div",De,[r(o(j),{class:"h-3 w-3"})]),r(o(F),{class:"ml-5 text-sm"},{default:n(()=>[e("div",Le,[e("div",Pe,[e("div",Qe,[e("span",je," Q"+l(f+1),1),r(o(p),{class:m([S[a.difficulty],"text-xs px-2 py-0.5 font-medium border cursor-pointer"])},{default:n(()=>[d(l(a.difficulty),1)]),_:2},1032,["class"]),r(o(p),{variant:"outline",class:"text-xs px-2 py-0.5 bg-muted/50"},{default:n(()=>[d(l(a.category),1)]),_:2},1024)]),e("p",ze,l(a.question),1)]),e("div",Ge,[r(o(v),{onClick:D(c=>h("mark-helpful",a.id,!0),["stop"]),variant:"ghost",size:"icon",class:m(["h-7 w-7 hover:scale-110 transition-transform",a.user_marked_helpful===!0?"text-green-600 bg-green-100 hover:bg-green-200":"hover:text-green-600 hover:bg-green-50"])},{default:n(()=>[r(o(ae),{class:"h-3.5 w-3.5"})]),_:2},1032,["onClick","class"]),r(o(v),{onClick:D(c=>h("mark-helpful",a.id,!1),["stop"]),variant:"ghost",size:"icon",class:m(["h-7 w-7 hover:scale-110 transition-transform",a.user_marked_helpful===!1?"text-red-600 bg-red-100 hover:bg-red-200":"hover:text-red-600 hover:bg-red-50"])},{default:n(()=>[r(o(ne),{class:"h-3.5 w-3.5"})]),_:2},1032,["onClick","class"]),r(o(v),{onClick:D(c=>h("hide-question",a.id),["stop"]),variant:"ghost",size:"icon",class:"h-7 w-7 hover:scale-110 transition-transform hover:text-red-500 hover:bg-red-50"},{default:n(()=>[r(o(de),{class:"h-3.5 w-3.5"})]),_:2},1032,["onClick"])])]),b.value===a.id?(i(),u("div",Ae,[e("div",Te,[e("div",Se,[r(o(z),{class:"h-4 w-4 text-amber-600"}),t[11]||(t[11]=e("strong",{class:"text-sm font-semibold text-foreground"},"Suggested Approach",-1))]),e("p",Be,l(a.suggested_answer),1)]),a.key_points.length?(i(),u("div",Ne,[e("div",Re,[r(o(ue),{class:"h-4 w-4 text-primary"}),t[12]||(t[12]=e("strong",{class:"text-sm font-semibold text-foreground"},"Key Points to Cover",-1))]),e("ul",Me,[(i(!0),u(_,null,$(a.key_points,c=>(i(),u("li",{key:c,class:"text-sm text-muted-foreground flex items-start gap-2"},[t[13]||(t[13]=e("span",{class:"text-primary font-bold text-xs mt-1"},"â€¢",-1)),e("span",null,l(c),1)]))),128))])])):y("",!0),e("div",Ue,[e("span",Ve,[r(o(G),{class:"h-3 w-3"}),d(" Viewed "+l(a.times_viewed)+" time"+l(a.times_viewed!==1?"s":""),1)]),t[14]||(t[14]=e("span",{class:"text-xs text-primary/70"}," Click to collapse ",-1))])])):y("",!0)]),_:2},1024)]),_:2},1032,["class","onClick"])]))),128))])]),_:1})],64)):(i(),u("div",qe,[s.defenseWatcher?.shouldShowProgress?(i(),u("div",Ee,[e("div",Fe,[e("div",Ie,[r(o(x),{class:"h-24 w-24"})]),e("div",Ke,[r(o(x),{class:"mx-auto h-12 w-12 text-amber-500/60 mb-4"}),t[15]||(t[15]=e("h3",{class:"text-sm font-medium text-foreground mb-2"}," Write More to Generate Questions ",-1)),e("p",Oe," Minimum "+l(s.defenseWatcher.threshold)+" words required ",1),t[16]||(t[16]=e("p",{class:"text-xs text-muted-foreground/80 mb-4"},' Keep writing to enable the "Generate Questions" button ',-1)),e("div",He,[r(o(te),{value:s.defenseWatcher.progressPercentage,class:"h-2"},null,8,["value"]),e("div",Xe,[e("span",null,l(s.chapterContext.word_count)+" words",1),e("span",Ye,l(s.defenseWatcher.threshold)+" words needed",1)])])])])])):(i(),u("div",Je,[e("div",Ze,[r(o(x),{class:"h-24 w-24"})]),e("div",et,[r(o(x),{class:"mx-auto h-12 w-12 text-muted-foreground/40 mb-4"}),t[17]||(t[17]=e("h3",{class:"text-sm font-medium text-foreground mb-2"}," No Questions Yet ",-1)),t[18]||(t[18]=e("p",{class:"text-xs text-muted-foreground mb-1"},' Click the "Generate Questions" button below to create ',-1)),t[19]||(t[19]=e("p",{class:"text-xs text-muted-foreground/80"}," AI-powered defense questions based on your chapter content ",-1))])]))])),e("div",tt,[r(o(v),{onClick:t[1]||(t[1]=a=>h("generate-more")),disabled:s.isGenerating||s.defenseWatcher&&!s.defenseWatcher.meetsThreshold,size:"sm",variant:s.questions.length?"outline":"default",class:m(["text-xs font-medium transition-all duration-200 shadow-sm",!s.questions.length&&(!s.defenseWatcher||s.defenseWatcher.meetsThreshold)?"bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 text-white shadow-md hover:shadow-lg hover:scale-105 ring-2 ring-blue-300 dark:ring-blue-800":"hover:scale-105 hover:shadow-md"])},{default:n(()=>[r(o(ie),{class:m(["mr-2 h-4 w-4",s.isGenerating?"animate-spin":""])},null,8,["class"]),d(" "+l(s.isGenerating?"Generating...":s.defenseWatcher&&!s.defenseWatcher.meetsThreshold?`Need ${s.defenseWatcher.wordsRemaining} More Words`:s.questions.length?"Generate More":"Generate Questions"),1)]),_:1},8,["disabled","variant","class"]),r(o(v),{onClick:t[2]||(t[2]=a=>h("refresh")),disabled:s.isLoading||!s.questions.length,size:"sm",variant:"outline",class:"text-xs font-medium hover:scale-105 transition-all duration-200 shadow-sm hover:shadow-md"},{default:n(()=>[r(o(G),{class:"mr-2 h-4 w-4"}),t[20]||(t[20]=d(" Shuffle ",-1))]),_:1},8,["disabled"])]),s.questions.length?(i(),C(o(v),{key:3,onClick:R,size:"sm",variant:"ghost",class:"w-full text-xs font-medium hover:bg-primary/10 hover:text-primary transition-all duration-200"},{default:n(()=>[r(o(le),{class:"mr-2 h-4 w-4"}),t[21]||(t[21]=d(" Export Questions ",-1))]),_:1})):y("",!0)]),_:1})]),_:1})]),_:1},8,["open"])]),_:1}))}});export{yt as _};
