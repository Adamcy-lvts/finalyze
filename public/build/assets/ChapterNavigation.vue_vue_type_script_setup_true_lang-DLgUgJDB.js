import{_ as f,c as g}from"./index-mwxrBKxi.js";import{_ as B}from"./ScrollArea.vue_vue_type_script_setup_true_lang-BYcw9oF-.js";import{_ as S,a as z,b as D,c as L,d as M,e as V,f as W,g as E}from"./AlertDialogTitle.vue_vue_type_script_setup_true_lang-DLCPkSzL.js";import{_ as G}from"./AlertDialogTrigger.vue_vue_type_script_setup_true_lang-Dsx0HQe9.js";import{_ as y}from"./index-3KGx5n4o.js";import{bt as F,ck as m,cB as i,co as u,cr as o,cq as a,cs as p,bE as s,gU as Q,ct as c,cp as l,cS as U,df as q,cn as w,cG as b,dL as A,db as I,cu as x,cA as P,e1 as R,gQ as H,dU as J,ce as K,cl as O,cj as k}from"./vendor-DTjPma1U.js";const X={class:"flex h-full flex-col bg-transparent"},Y={class:"px-4 py-3 border-b border-border/40"},Z={class:"text-xs font-bold uppercase tracking-wider text-muted-foreground flex items-center gap-2"},ee={class:"mt-2 flex items-center justify-between"},te={class:"text-xs font-medium text-foreground"},re={class:"p-2 space-y-1"},se=["onClick"],ae={class:"flex-shrink-0 mt-0.5"},ne={key:1,class:"h-6 w-6 rounded-md bg-primary text-primary-foreground flex items-center justify-center shadow-sm ring-2 ring-primary/20"},oe={class:"text-xs font-bold"},le={key:2,class:"h-6 w-6 rounded-md bg-muted text-muted-foreground flex items-center justify-center border border-border"},ue={class:"text-xs font-medium"},ce={key:3,class:"h-6 w-6 rounded-md bg-muted/50 text-muted-foreground/30 flex items-center justify-center border border-border/50"},de={class:"flex-1 text-left min-w-0"},ie={class:"flex items-center gap-2 mt-1.5"},pe={class:"text-[10px] text-muted-foreground/70 flex items-center gap-1"},he={key:0,class:"absolute right-2 top-3 opacity-0 group-hover:opacity-100 transition-opacity"},_e={class:"p-3 border-t border-border/40 bg-muted/5"},me={key:1,class:"flex gap-2"},fe={class:"truncate max-w-[120px]"},we=F({__name:"ChapterNavigation",props:{allChapters:{},currentChapter:{},project:{},outlines:{},facultyChapters:{},currentWordCount:{},targetWordCount:{},writingQualityScore:{},chapterContentLength:{}},emits:["goToChapter","generateNextChapter","deleteChapter"],setup($,{emit:N}){const n=$,C=N,_=m(()=>n.facultyChapters&&n.facultyChapters.length>0?n.facultyChapters.map(t=>{const r=n.allChapters.find(d=>d.chapter_number===t.number),e=n.outlines?.find(d=>d.chapter_number===t.number);return{chapter_number:t.number,title:t.title,target_word_count:t.word_count,status:r?r.status:"not_started",exists:!!r,id:r?.id,slug:r?.slug,outline:e||null,facultyChapter:t}}):n.outlines&&n.outlines.length>0?n.outlines.map(t=>{const r=n.allChapters.find(e=>e.chapter_number===t.chapter_number);return{chapter_number:t.chapter_number,title:t.chapter_title,target_word_count:t.target_word_count,status:r?r.status:"not_started",exists:!!r,id:r?.id,slug:r?.slug,outline:t,facultyChapter:null}}):n.allChapters&&n.allChapters.length>0?n.allChapters.map(t=>({chapter_number:t.chapter_number,title:t.title,target_word_count:0,status:t.status,exists:!0,id:t.id,slug:t.slug,outline:null,facultyChapter:null})):[]);m(()=>!0);const h=m(()=>{const t=n.currentChapter.chapter_number;return _.value.find(e=>e.chapter_number===t+1)});m(()=>{const t=n.currentChapter.chapter_number;return _.value.find(e=>e.chapter_number===t-1)});const v=t=>{C("goToChapter",t)},j=()=>{C("generateNextChapter")},T=(t,r)=>{r&&K.delete(O("chapters.destroy",{project:n.project.slug,chapter:r}),{preserveState:!0,preserveScroll:!0,only:["allChapters","chapter"],onSuccess:e=>{const d=e.props.flash?.message||"Chapter deleted successfully";k.success(d)},onError:e=>{const d=typeof e=="string"?e:"Failed to delete chapter.";k.error(d)}})};return(t,r)=>(u(),i("div",X,[o("div",Y,[o("h2",Z,[a(s(Q),{class:"h-3.5 w-3.5"}),r[1]||(r[1]=p(" Table of Contents ",-1))]),o("div",ee,[o("span",te,c(_.value.length)+" Chapters",1),a(s(y),{variant:"secondary",class:"text-[10px] h-5 px-1.5 font-normal"},{default:l(()=>[p(c(Math.round(t.currentWordCount/(t.targetWordCount||1)*100))+"% Complete ",1)]),_:1})])]),a(s(B),{class:"flex-1"},{default:l(()=>[o("div",re,[(u(!0),i(U,null,q(_.value,e=>(u(),i("div",{key:e.chapter_number,class:"group relative"},[o("button",{onClick:d=>v(e.chapter_number),class:x(s(g)("flex w-full items-start gap-3 rounded-lg px-3 py-3 text-sm transition-all duration-200 border border-transparent",e.chapter_number===t.currentChapter.chapter_number?"bg-primary/5 border-primary/10 shadow-sm":"hover:bg-muted/50 hover:border-border/50"))},[o("div",ae,[e.status==="approved"||e.status==="completed"?(u(),i("div",{key:0,class:x(s(g)("h-6 w-6 rounded-md flex items-center justify-center",e.chapter_number===t.currentChapter.chapter_number?"bg-green-500 text-white shadow-sm ring-2 ring-green-500/20":"bg-green-500/10 text-green-700 dark:text-green-400 border border-green-500/20"))},[a(s(P),{class:"h-3.5 w-3.5"})],2)):e.chapter_number===t.currentChapter.chapter_number?(u(),i("div",ne,[o("span",oe,c(e.chapter_number),1)])):e.exists?(u(),i("div",le,[o("span",ue,c(e.chapter_number),1)])):(u(),i("div",ce,[a(s(R),{class:"h-3 w-3"})]))]),o("div",de,[o("p",{class:x(s(g)("truncate font-medium leading-tight",e.chapter_number===t.currentChapter.chapter_number?"text-foreground":"text-muted-foreground group-hover:text-foreground"))},c(e.title),3),o("div",ie,[o("span",pe,[a(s(H),{class:"h-3 w-3"}),p(" "+c(e.target_word_count)+" words ",1)]),e.exists?b("",!0):(u(),w(s(y),{key:0,variant:"outline",class:"h-4 px-1 text-[9px] border-dashed text-muted-foreground/60"},{default:l(()=>[...r[2]||(r[2]=[p(" Not Started ",-1)])]),_:1}))])])],10,se),e.exists&&e.chapter_number!==t.currentChapter.chapter_number?(u(),i("div",he,[a(s(S),null,{default:l(()=>[a(s(G),{asChild:""},{default:l(()=>[a(s(f),{variant:"ghost",size:"icon",class:"h-6 w-6 text-muted-foreground/50 hover:text-destructive hover:bg-destructive/10 rounded-md"},{default:l(()=>[a(s(J),{class:"h-3 w-3"})]),_:1})]),_:1}),a(s(z),null,{default:l(()=>[a(s(D),null,{default:l(()=>[a(s(L),null,{default:l(()=>[p("Delete Chapter "+c(e.chapter_number)+"?",1)]),_:2},1024),a(s(M),null,{default:l(()=>[p(' This will permanently delete "'+c(e.title)+'" and all its content. ',1)]),_:2},1024)]),_:2},1024),a(s(V),null,{default:l(()=>[a(s(W),null,{default:l(()=>[...r[3]||(r[3]=[p("Cancel",-1)])]),_:1}),a(s(E),{class:"bg-destructive text-destructive-foreground hover:bg-destructive/90",onClick:d=>T(e.id,e.slug)},{default:l(()=>[...r[4]||(r[4]=[p(" Delete ",-1)])]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)])):b("",!0)]))),128))])]),_:1}),o("div",_e,[h.value&&!h.value.exists?(u(),w(s(f),{key:0,onClick:j,class:"w-full bg-primary text-primary-foreground shadow-sm hover:bg-primary/90 transition-all h-9 text-xs font-medium",size:"sm"},{default:l(()=>[a(s(A),{class:"mr-2 h-3.5 w-3.5"}),p(" Start Chapter "+c(h.value.chapter_number),1)]),_:1})):h.value?(u(),i("div",me,[a(s(f),{variant:"outline",class:"w-full justify-between bg-background hover:bg-accent/50 h-9 text-xs text-zinc-700 dark:text-zinc-300",size:"sm",onClick:r[0]||(r[0]=e=>v(h.value.chapter_number))},{default:l(()=>[o("span",fe,"Next: "+c(h.value.title),1),a(s(I),{class:"h-3.5 w-3.5 ml-2 flex-shrink-0"})]),_:1})])):b("",!0)])]))}});export{we as _};
