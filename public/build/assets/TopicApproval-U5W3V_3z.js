import{_ as h}from"./index-DP4ThCdY.js";import{_ as v,a as j}from"./CardContent.vue_vue_type_script_setup_true_lang-BYYhQ7Wx.js";import{_ as C}from"./CardDescription.vue_vue_type_script_setup_true_lang-DZP_YRlv.js";import{_ as S,a as A}from"./CardTitle.vue_vue_type_script_setup_true_lang-CIg9mqe5.js";import{_ as z,c as X,a as q,b as M}from"./DialogTitle.vue_vue_type_script_setup_true_lang-DvkFCoUv.js";import{_ as V}from"./DialogDescription.vue_vue_type_script_setup_true_lang-90gUKkp_.js";import{_ as J}from"./DialogFooter.vue_vue_type_script_setup_true_lang-uDeFU3gz.js";import{_ as W}from"./AppLayout.vue_vue_type_script_setup_true_lang--rqdOQyb.js";import{_ as N}from"./SafeHtmlText.vue_vue_type_script_setup_true_lang-DilL3Trk.js";import{d as Y,b as _,i as u,o as c,j as s,g as t,k as r,u as o,y as i,f as T,z as g,n as R,U as b,X as w}from"./app-TT48nyjp.js";import{t as m}from"./index-CEXqyF32.js";import{A as H}from"./arrow-left-BMiq2DUd.js";import{C as $}from"./clock-BMgSyeW1.js";import{B as I}from"./book-open-SPJvQUXO.js";import{G as K}from"./graduation-cap-BU9wfDa5.js";import{S as Q}from"./school-DCZE24Wl.js";import{U as Z}from"./user-CXjXyuW6.js";import{M as ee}from"./message-square-Binnmgef.js";import{F as oe}from"./file-text-BmZjwUxw.js";import{D as te}from"./download-kN7fO5Qz.js";import{S as re}from"./shield-check-BMGFXreX.js";import{C as E}from"./circle-check-big-C93zq9Tf.js";import{C as U}from"./circle-x-DBXrwETZ.js";import"./Presence-9PI4tTID.js";import"./useForwardExpose-Dbm4xzLD.js";import"./index-oq13fV5J.js";import"./DialogTitle-KBRGtlOP.js";import"./x-Basvi7e0.js";import"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-f8_GrFC-.js";import"./loader-circle-Dyp4s-Ms.js";import"./VisuallyHidden-bHCC2X31.js";import"./UserInfo.vue_vue_type_script_setup_true_lang-CZzD-Rzi.js";import"./TooltipTrigger.vue_vue_type_script_setup_true_lang-Cjzyak1V.js";import"./coins-C5ZHbm8a.js";import"./log-out-D3ILHTsv.js";import"./AppLogo.vue_vue_type_script_setup_true_lang-DNESZNSS.js";import"./library-CxdCr05-.js";import"./plus-YvI5gyOA.js";import"./chevron-right-DlLvFs6D.js";import"./WordBalanceDisplay.vue_vue_type_script_setup_true_lang-DsJk46nN.js";import"./sun-HDxgChSy.js";import"./useWordBalance-CSMNLoiy.js";import"./purify.es-DxJI3Wx7.js";const se={class:"min-h-screen bg-gradient-to-b from-background via-background/95 to-muted/20"},le={class:"mx-auto max-w-4xl space-y-10 p-6 pb-20 lg:p-10"},ie={class:"flex items-center justify-between"},ae={class:"flex h-8 w-8 items-center justify-center rounded-full bg-muted/50 group-hover:bg-primary/10 transition-colors mr-2"},ne={class:"space-y-4 text-center animate-in fade-in slide-in-from-bottom-4 duration-700"},de={class:"mx-auto flex h-20 w-20 items-center justify-center rounded-2xl bg-gradient-to-br from-yellow-500/20 to-yellow-500/5 shadow-lg shadow-yellow-500/10 ring-1 ring-yellow-500/20"},pe={class:"animate-in fade-in slide-in-from-bottom-6 duration-700 delay-100"},ue={class:"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-4"},ce={class:"p-6 relative"},ge={class:"mb-4 flex h-10 w-10 items-center justify-center rounded-xl bg-blue-500/10 text-blue-500 group-hover:scale-110 group-hover:bg-blue-500/20 transition-all duration-300"},me={class:"space-y-1"},fe={class:"font-bold text-lg leading-tight text-foreground"},ve={class:"p-6 relative"},be={class:"mb-4 flex h-10 w-10 items-center justify-center rounded-xl bg-purple-500/10 text-purple-500 group-hover:scale-110 group-hover:bg-purple-500/20 transition-all duration-300"},he={class:"space-y-1"},we={class:"font-bold text-lg leading-tight text-foreground capitalize"},xe={class:"p-6 relative"},ye={class:"mb-4 flex h-10 w-10 items-center justify-center rounded-xl bg-orange-500/10 text-orange-500 group-hover:scale-110 group-hover:bg-orange-500/20 transition-all duration-300"},_e={class:"space-y-1"},ke=["title"],je={class:"p-6 relative"},Ce={class:"mb-4 flex h-10 w-10 items-center justify-center rounded-xl bg-green-500/10 text-green-500 group-hover:scale-110 group-hover:bg-green-500/20 transition-all duration-300"},Se={class:"space-y-1"},Ae={class:"font-bold text-lg leading-tight text-foreground"},Te={class:"grid gap-8 md:grid-cols-1 animate-in fade-in slide-in-from-bottom-8 duration-700 delay-200"},$e={class:"flex items-center gap-3"},Pe={class:"p-2 rounded-md bg-primary/10 text-primary"},Fe={class:"space-y-4"},De={class:"grid gap-6 md:grid-cols-2"},ko=Y({__name:"TopicApproval",props:{project:{}},setup(B){const d=B,f=_(!1),x=_(!1),y=_(!1),n=_(null),L=async()=>{x.value=!0;try{const l=await fetch(b("topics.export-pdf",d.project.slug),{method:"GET",headers:{"X-Requested-With":"XMLHttpRequest",Accept:"application/pdf"}});if(!l.ok)throw new Error("Network response was not ok");const e=await l.blob(),a=window.URL.createObjectURL(e),p=document.createElement("a");p.href=a,p.download=`project_topic_proposal_${d.project.slug}.pdf`,document.body.appendChild(p),p.click(),window.URL.revokeObjectURL(a),document.body.removeChild(p),m("ðŸ“„ PDF Generated!",{description:"Topic proposal downloaded successfully. Share with your supervisor."})}catch(l){console.error("PDF Export error:",l),m("Export Failed",{description:"Could not generate PDF. Please try again."})}finally{x.value=!1}},P=l=>{n.value=l,y.value=!0},G=async()=>{if(n.value===null)return;const l=n.value;y.value=!1,f.value=!0;try{const a=await(await fetch(b("topics.approve",d.project.slug),{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")||""},body:JSON.stringify({approved:l})})).json();if(a.success)if(l){const p=a.redirect_route,F=a.redirect_url,D=a.mode==="auto"||p==="projects.writing";if(m(D?"Topic Approved!":"ðŸŽ‰ Topic Approved!",{description:D?"Auto mode selected. Jumping straight into the writing workspace.":"Perfect! Now let's set up your AI writing assistant based on your mode preference."}),F)w.visit(F);else if(p==="projects.writing"){const k=a.slug||d.project.slug;w.visit(b("projects.writing",k))}else{const k=a.slug||d.project.slug;w.visit(b("projects.guidance",k))}}else m("New Topic Needed",{description:"No problem! Let's find a topic that works better for your supervisor."}),w.visit(b("projects.topic-selection",d.project.slug))}catch{m("Error",{description:"Failed to update approval status. Please try again."})}finally{f.value=!1,n.value=null}},O=async()=>{try{w.post(b("projects.go-back-to-topic-selection",d.project.slug),{},{onSuccess:()=>{m("Success",{description:"Returned to topic selection"}),w.visit(b("projects.topic-selection",d.project.slug))},onError:()=>{m("Error",{description:"Failed to go back to topic selection. Please try again."})}})}catch{m("Error",{description:"Failed to go back to topic selection. Please try again."})}};return(l,e)=>(c(),u(W,{title:"Topic Approval"},{default:s(()=>[t("div",se,[t("div",le,[t("div",ie,[r(o(h),{onClick:O,variant:"ghost",size:"sm",class:"group text-muted-foreground hover:text-foreground transition-colors"},{default:s(()=>[t("div",ae,[r(o(H),{class:"h-4 w-4 transition-transform group-hover:-translate-x-0.5"})]),e[4]||(e[4]=i(" Back to Topic Selection ",-1))]),_:1})]),t("div",ne,[t("div",de,[r(o($),{class:"h-10 w-10 text-yellow-600"})]),e[5]||(e[5]=t("div",{class:"space-y-2"},[t("h1",{class:"text-4xl font-bold tracking-tight sm:text-5xl bg-gradient-to-br from-foreground to-foreground/70 bg-clip-text text-transparent"}," Awaiting Supervisor Approval "),t("p",{class:"mx-auto max-w-2xl text-lg text-muted-foreground leading-relaxed"}," Your project topic is ready for review. Share it with your supervisor and update the status below. ")],-1))]),t("div",pe,[t("div",ue,[l.project.field_of_study?(c(),u(o(v),{key:0,class:"group relative overflow-hidden border-border/50 bg-card/50 backdrop-blur-sm transition-all duration-300 hover:shadow-lg hover:shadow-primary/5 hover:border-primary/20 hover:-translate-y-1"},{default:s(()=>[e[7]||(e[7]=t("div",{class:"absolute -right-6 -top-6 h-24 w-24 rounded-full bg-blue-500/10 group-hover:bg-blue-500/20 transition-colors blur-2xl"},null,-1)),t("div",ce,[t("div",ge,[r(o(I),{class:"h-5 w-5"})]),t("div",me,[e[6]||(e[6]=t("span",{class:"text-xs font-medium uppercase tracking-wider text-muted-foreground"},"Field of Study",-1)),t("div",fe,g(l.project.field_of_study),1)])])]),_:1})):T("",!0),r(o(v),{class:"group relative overflow-hidden border-border/50 bg-card/50 backdrop-blur-sm transition-all duration-300 hover:shadow-lg hover:shadow-primary/5 hover:border-primary/20 hover:-translate-y-1"},{default:s(()=>[e[9]||(e[9]=t("div",{class:"absolute -right-6 -top-6 h-24 w-24 rounded-full bg-purple-500/10 group-hover:bg-purple-500/20 transition-colors blur-2xl"},null,-1)),t("div",ve,[t("div",be,[r(o(K),{class:"h-5 w-5"})]),t("div",he,[e[8]||(e[8]=t("span",{class:"text-xs font-medium uppercase tracking-wider text-muted-foreground"},"Academic Level",-1)),t("div",we,g(l.project.type),1)])])]),_:1}),r(o(v),{class:"group relative overflow-hidden border-border/50 bg-card/50 backdrop-blur-sm transition-all duration-300 hover:shadow-lg hover:shadow-primary/5 hover:border-primary/20 hover:-translate-y-1"},{default:s(()=>[e[11]||(e[11]=t("div",{class:"absolute -right-6 -top-6 h-24 w-24 rounded-full bg-orange-500/10 group-hover:bg-orange-500/20 transition-colors blur-2xl"},null,-1)),t("div",xe,[t("div",ye,[r(o(Q),{class:"h-5 w-5"})]),t("div",_e,[e[10]||(e[10]=t("span",{class:"text-xs font-medium uppercase tracking-wider text-muted-foreground"},"University",-1)),t("div",{class:"font-bold text-lg leading-tight text-foreground",title:l.project.full_university_name||l.project.university},g(l.project.full_university_name||l.project.university),9,ke)])])]),_:1}),r(o(v),{class:"group relative overflow-hidden border-border/50 bg-card/50 backdrop-blur-sm transition-all duration-300 hover:shadow-lg hover:shadow-primary/5 hover:border-primary/20 hover:-translate-y-1"},{default:s(()=>[e[13]||(e[13]=t("div",{class:"absolute -right-6 -top-6 h-24 w-24 rounded-full bg-green-500/10 group-hover:bg-green-500/20 transition-colors blur-2xl"},null,-1)),t("div",je,[t("div",Ce,[r(o(Z),{class:"h-5 w-5"})]),t("div",Se,[e[12]||(e[12]=t("span",{class:"text-xs font-medium uppercase tracking-wider text-muted-foreground"},"Supervisor",-1)),t("div",Ae,g(l.project.supervisor_name||"Not assigned"),1)])])]),_:1})])]),t("div",Te,[r(o(v),{class:"relative border-border/50 shadow-lg shadow-primary/5 overflow-hidden group"},{default:s(()=>[e[16]||(e[16]=t("div",{class:"absolute -right-20 -top-20 h-64 w-64 rounded-full bg-primary/5 transition-colors blur-3xl pointer-events-none"},null,-1)),e[17]||(e[17]=t("div",{class:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-transparent via-primary/50 to-transparent opacity-20"},null,-1)),r(o(S),{class:"pb-2 relative border-b border-border/40 bg-muted/10"},{default:s(()=>[t("div",$e,[t("div",Pe,[r(o(ee),{class:"h-5 w-5"})]),t("div",null,[r(o(A),{class:"text-xl"},{default:s(()=>[...e[14]||(e[14]=[i("Selected Topic",-1)])]),_:1}),r(o(C),null,{default:s(()=>[...e[15]||(e[15]=[i("The topic currently pending approval",-1)])]),_:1})])])]),_:1}),r(o(j),{class:"p-6 md:p-8 relative"},{default:s(()=>[t("div",Fe,[l.project.title?(c(),u(N,{key:0,as:"h3",class:"text-2xl font-bold text-foreground leading-tight",content:l.project.title},null,8,["content"])):T("",!0),r(N,{as:"div",class:"prose prose-invert max-w-none text-muted-foreground leading-relaxed",content:l.project.topic},null,8,["content"])])]),_:1})]),_:1}),t("div",De,[r(o(v),{class:"group relative overflow-hidden border-border/50 bg-card/50 backdrop-blur-sm transition-all duration-300 hover:shadow-lg hover:border-blue-500/30 flex flex-col"},{default:s(()=>[e[20]||(e[20]=t("div",{class:"absolute -right-12 -top-12 h-40 w-40 rounded-full bg-blue-500/5 group-hover:bg-blue-500/10 transition-colors blur-3xl"},null,-1)),r(o(S),{class:"relative"},{default:s(()=>[r(o(A),{class:"flex items-center gap-2 text-lg group-hover:text-blue-500 transition-colors"},{default:s(()=>[r(o(oe),{class:"h-5 w-5 text-blue-500"}),e[18]||(e[18]=i(" Share with Supervisor ",-1))]),_:1}),r(o(C),null,{default:s(()=>[...e[19]||(e[19]=[i("Download a professional PDF proposal to submit to your supervisor. ",-1)])]),_:1})]),_:1}),r(o(j),{class:"mt-auto pt-0 relative"},{default:s(()=>[r(o(h),{onClick:L,disabled:x.value,size:"lg",variant:"outline",class:"w-full h-12 border-blue-200/20 hover:bg-blue-500/10 hover:text-blue-500 hover:border-blue-500/50 transition-all"},{default:s(()=>[x.value?(c(),u(o($),{key:1,class:"mr-2 h-5 w-5 animate-spin"})):(c(),u(o(te),{key:0,class:"mr-2 h-5 w-5"})),i(" "+g(x.value?"Generating PDF...":"Download Proposal PDF"),1)]),_:1},8,["disabled"])]),_:1})]),_:1}),r(o(v),{class:"group relative overflow-hidden border-border/50 bg-card/50 backdrop-blur-sm transition-all duration-300 hover:shadow-lg hover:border-green-500/30 flex flex-col"},{default:s(()=>[e[25]||(e[25]=t("div",{class:"absolute -right-12 -top-12 h-40 w-40 rounded-full bg-green-500/5 group-hover:bg-green-500/10 transition-colors blur-3xl"},null,-1)),r(o(S),{class:"relative"},{default:s(()=>[r(o(A),{class:"flex items-center gap-2 text-lg group-hover:text-green-500 transition-colors"},{default:s(()=>[r(o(re),{class:"h-5 w-5 text-green-600"}),e[21]||(e[21]=i(" Update Status ",-1))]),_:1}),r(o(C),null,{default:s(()=>[...e[22]||(e[22]=[i("Record your supervisor's decision to proceed.",-1)])]),_:1})]),_:1}),r(o(j),{class:"mt-auto pt-0 grid grid-cols-2 gap-3 relative"},{default:s(()=>[r(o(h),{onClick:e[0]||(e[0]=()=>P(!0)),disabled:f.value,class:"h-12 bg-green-600 hover:bg-green-700 text-white shadow-md shadow-green-600/20 transition-all hover:scale-[1.02]"},{default:s(()=>[r(o(E),{class:"mr-2 h-5 w-5"}),e[23]||(e[23]=i(" Approved ",-1))]),_:1},8,["disabled"]),r(o(h),{onClick:e[1]||(e[1]=()=>P(!1)),disabled:f.value,variant:"outline",class:"h-12 border-red-200/20 text-red-500 hover:bg-red-500/10 hover:border-red-500/50 hover:text-red-600 transition-all hover:scale-[1.02]"},{default:s(()=>[r(o(U),{class:"mr-2 h-5 w-5"}),e[24]||(e[24]=i(" Rejected ",-1))]),_:1},8,["disabled"])]),_:1})]),_:1})])]),r(o(z),{open:y.value,"onUpdate:open":e[3]||(e[3]=a=>y.value=a)},{default:s(()=>[r(o(X),{class:"sm:max-w-md border-border/50 shadow-2xl"},{default:s(()=>[r(o(q),null,{default:s(()=>[r(o(M),{class:"flex items-center gap-2 text-xl"},{default:s(()=>[t("div",{class:R([n.value?"bg-green-100 text-green-600":"bg-red-100 text-red-600","p-2 rounded-full"])},[n.value?(c(),u(o(E),{key:0,class:"h-5 w-5"})):(c(),u(o(U),{key:1,class:"h-5 w-5"}))],2),i(" "+g(n.value?"Confirm Approval":"Confirm Rejection"),1)]),_:1}),r(o(V),{class:"pt-2 text-base"},{default:s(()=>[i(g(n.value?`Great news! Confirm that your supervisor has approved this topic. We will proceed to
                                the next stage.`:`Confirm that your supervisor wants you to change this topic. You will be redirected
                                to select a new one.`),1)]),_:1})]),_:1}),r(o(J),{class:"gap-2 sm:gap-0 mt-4"},{default:s(()=>[r(o(h),{onClick:e[2]||(e[2]=a=>y.value=!1),variant:"ghost"},{default:s(()=>[...e[26]||(e[26]=[i(" Cancel ",-1)])]),_:1}),r(o(h),{onClick:G,disabled:f.value,class:R([n.value?"bg-green-600 hover:bg-green-700":"bg-red-600 hover:bg-red-700","min-w-[100px]"])},{default:s(()=>[f.value?(c(),u(o($),{key:0,class:"mr-2 h-4 w-4 animate-spin"})):T("",!0),i(" "+g(f.value?"Processing...":"Confirm"),1)]),_:1},8,["disabled","class"])]),_:1})]),_:1})]),_:1},8,["open"])])])]),_:1}))}});export{ko as default};
