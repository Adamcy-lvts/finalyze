import{aj as Fr,B as ln,d as Ig,W as Lg,f as Ur,b as Ft,I as Ns,J as $s,Z as Og,S as Mg,c as ve,o as rn,K as T,F as y,u as v,X as Pg,w as un,O as Me,P as Pe,H as dn,M as dt,a as ie,L as We,n as Dr,a8 as Gs,N as Wg}from"./app-wl3dd5i4.js";import{t as me}from"./index-uw9N_RYh.js";import{_ as gn}from"./index-D-4kglRx.js";import{_ as Be}from"./Separator.vue_vue_type_script_setup_true_lang-BcF6h_9c.js";import{_ as Bg}from"./Progress.vue_vue_type_script_setup_true_lang-BEnznMVo.js";import{aa as Fg}from"./RichTextEditor-BrRsKoTJ.js";import{u as Ug,a as Dg,c as zg,b as Ng,_ as $g,M as Gg}from"./useManualEditorSuggestions-C_G6tdAK.js";import{_ as Hg}from"./ChapterNavigation.vue_vue_type_script_setup_true_lang-Cdt-Hmt-.js";import{u as Kg,a as qg,P as kg,_ as Zg,b as Yg}from"./useTextHistory-DwucsKZq.js";import{_ as Xg}from"./Sonner.vue_vue_type_script_setup_true_lang-CvQPioqJ.js";import{A as Hs}from"./arrow-left-ClmjABsg.js";import{M as Jg}from"./menu-DhdCsvqs.js";import{S as au}from"./save-1-nQKQEj.js";import{M as Ks}from"./message-square-BnFnMkyu.js";import{C as Qg}from"./chevron-left-D4-8onqs.js";import{C as Vg}from"./chevron-right-DBuKhtk3.js";import{a as jg,P as n_}from"./AlertDialogTitle.vue_vue_type_script_setup_true_lang-DJdawI6u.js";import{L as e_}from"./loader-circle-BzyjG-DZ.js";import{M as t_,S as r_}from"./sun-DgnNth71.js";import{M as i_,a as u_}from"./minimize-2-MLQjEKBr.js";import{B as o_}from"./brain-DhaRB5jF.js";import{C as s_}from"./circle-check-big-DJOE1pQn.js";import{_ as a_}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./Separator-BM6THN_t.js";import"./index-vTckw9GZ.js";import"./Presence-BP7ARyqA.js";import"./useForwardExpose-P1cnoAVO.js";import"./nullish-CHIgUVhi.js";import"./purify.es-DxJI3Wx7.js";import"./index-BWEDi_FC.js";import"./step-DrZ9DcYd.js";import"./chart-column-B6VxzhN0.js";import"./calendar-C5np9lX9.js";import"./users-2KBVEBFl.js";import"./circle-alert-yz_BvOsK.js";import"./eye-DwLL9tiA.js";import"./check-Dy2hcB1N.js";import"./download-CiCaqCpI.js";import"./trash-2-DHaZv9Je.js";import"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-OH9AIE1A.js";import"./VisuallyHidden-DNVQ00D9.js";import"./DialogTitle.vue_vue_type_script_setup_true_lang-th6zmFHF.js";import"./x-XzC-Z3_5.js";import"./DialogFooter.vue_vue_type_script_setup_true_lang-BJOh5Q1H.js";import"./Input.vue_vue_type_script_setup_true_lang-Cp0DHp_h.js";import"./Label.vue_vue_type_script_setup_true_lang-CS5ZEa2H.js";import"./type-DlD7kWmo.js";import"./minus-BjeUBgSW.js";import"./plus-35vi7S1v.js";import"./list-D_Pf_Z7L.js";import"./index-DRq4mjGV.js";import"./lightbulb-CKiGICAA.js";import"./CollapsibleTrigger.vue_vue_type_script_setup_true_lang-B1IArhWK.js";import"./Checkbox.vue_vue_type_script_setup_true_lang-abapxXsf.js";import"./ohash.D__AXeF1-C-E83dC9.js";import"./VisuallyHiddenInput-DIct8AIF.js";import"./RovingFocusItem-BpZhUYOP.js";import"./target-X3O_u68x.js";import"./chevron-down-BVLD8MxL.js";import"./circle-check-DfycY_vi.js";import"./circle-CS48dZrF.js";import"./sparkles-CGU-eevH.js";import"./DefensePreparationPanel.vue_vue_type_script_setup_true_lang-KDIrJDwj.js";import"./index-BYDOR6J2.js";import"./CardContent.vue_vue_type_script_setup_true_lang-BDtTtDyn.js";import"./CardTitle.vue_vue_type_script_setup_true_lang-CYCQ1Gr1.js";import"./ScrollArea.vue_vue_type_script_setup_true_lang-BSlblWuE.js";import"./useNonce-DB-fwibc.js";import"./Switch.vue_vue_type_script_setup_true_lang-Z3VKRI4j.js";import"./refresh-cw-Dgzw4a9Z.js";import"./DialogTrigger-BfAbHR8R.js";import"./lock-D4g8tFeC.js";import"./search-CqvH2yqe.js";import"./file-text-BE_A7w0e.js";import"./triangle-alert-CMwlhgHt.js";var Ut={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */var f_=Ut.exports,qs;function l_(){return qs||(qs=1,(function(Qn,F){(function(){var s,_n="4.17.21",Vn=200,wn="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",sn="Expected a function",Xe="Invalid `variable` option passed into `_.template`",xe="__lodash_hash_undefined__",Fe=500,k="__lodash_placeholder__",Tn=1,Je=2,X=4,Z=1,J=2,Q=1,jn=2,gt=4,Bn=8,Ue=16,Fn=32,De=64,bn=128,nn=256,cn=512,Cn=30,Dt="...",Qe=800,zt=16,Nt=1,zr=2,$t=3,ue=1/0,ne=9007199254740991,Nr=17976931348623157e292,Ve=NaN,Rn=4294967295,Gt=Rn-1,Ht=Rn>>>1,Kt=[["ary",bn],["bind",Q],["bindKey",jn],["curry",Bn],["curryRight",Ue],["flip",cn],["partial",Fn],["partialRight",De],["rearg",nn]],oe="[object Arguments]",we="[object Array]",_t="[object AsyncFunction]",be="[object Boolean]",qn="[object Date]",qt="[object DOMException]",ze="[object Error]",se="[object Function]",kt="[object GeneratorFunction]",_="[object Map]",x="[object Number]",Ce="[object Null]",G="[object Object]",fu="[object Promise]",ks="[object Proxy]",vt="[object RegExp]",kn="[object Set]",mt="[object String]",Zt="[object Symbol]",Zs="[object Undefined]",xt="[object WeakMap]",Ys="[object WeakSet]",wt="[object ArrayBuffer]",je="[object DataView]",$r="[object Float32Array]",Gr="[object Float64Array]",Hr="[object Int8Array]",Kr="[object Int16Array]",qr="[object Int32Array]",kr="[object Uint8Array]",Zr="[object Uint8ClampedArray]",Yr="[object Uint16Array]",Xr="[object Uint32Array]",Xs=/\b__p \+= '';/g,Js=/\b(__p \+=) '' \+/g,Qs=/(__e\(.*?\)|\b__t\)) \+\n'';/g,lu=/&(?:amp|lt|gt|quot|#39);/g,cu=/[&<>"']/g,Vs=RegExp(lu.source),js=RegExp(cu.source),na=/<%-([\s\S]+?)%>/g,ea=/<%([\s\S]+?)%>/g,hu=/<%=([\s\S]+?)%>/g,ta=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ra=/^\w*$/,ia=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Jr=/[\\^$.*+?()[\]{}|]/g,ua=RegExp(Jr.source),Qr=/^\s+/,oa=/\s/,sa=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,aa=/\{\n\/\* \[wrapped with (.+)\] \*/,fa=/,? & /,la=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,ca=/[()=,{}\[\]\/\s]/,ha=/\\(\\)?/g,pa=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,pu=/\w*$/,da=/^[-+]0x[0-9a-f]+$/i,ga=/^0b[01]+$/i,_a=/^\[object .+?Constructor\]$/,va=/^0o[0-7]+$/i,ma=/^(?:0|[1-9]\d*)$/,xa=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Yt=/($^)/,wa=/['\n\r\u2028\u2029\\]/g,Xt="\\ud800-\\udfff",ba="\\u0300-\\u036f",Ca="\\ufe20-\\ufe2f",ya="\\u20d0-\\u20ff",du=ba+Ca+ya,gu="\\u2700-\\u27bf",_u="a-z\\xdf-\\xf6\\xf8-\\xff",Sa="\\xac\\xb1\\xd7\\xf7",Aa="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Ea="\\u2000-\\u206f",Ta=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",vu="A-Z\\xc0-\\xd6\\xd8-\\xde",mu="\\ufe0e\\ufe0f",xu=Sa+Aa+Ea+Ta,Vr="['’]",Ra="["+Xt+"]",wu="["+xu+"]",Jt="["+du+"]",bu="\\d+",Ia="["+gu+"]",Cu="["+_u+"]",yu="[^"+Xt+xu+bu+gu+_u+vu+"]",jr="\\ud83c[\\udffb-\\udfff]",La="(?:"+Jt+"|"+jr+")",Su="[^"+Xt+"]",ni="(?:\\ud83c[\\udde6-\\uddff]){2}",ei="[\\ud800-\\udbff][\\udc00-\\udfff]",nt="["+vu+"]",Au="\\u200d",Eu="(?:"+Cu+"|"+yu+")",Oa="(?:"+nt+"|"+yu+")",Tu="(?:"+Vr+"(?:d|ll|m|re|s|t|ve))?",Ru="(?:"+Vr+"(?:D|LL|M|RE|S|T|VE))?",Iu=La+"?",Lu="["+mu+"]?",Ma="(?:"+Au+"(?:"+[Su,ni,ei].join("|")+")"+Lu+Iu+")*",Pa="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Wa="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Ou=Lu+Iu+Ma,Ba="(?:"+[Ia,ni,ei].join("|")+")"+Ou,Fa="(?:"+[Su+Jt+"?",Jt,ni,ei,Ra].join("|")+")",Ua=RegExp(Vr,"g"),Da=RegExp(Jt,"g"),ti=RegExp(jr+"(?="+jr+")|"+Fa+Ou,"g"),za=RegExp([nt+"?"+Cu+"+"+Tu+"(?="+[wu,nt,"$"].join("|")+")",Oa+"+"+Ru+"(?="+[wu,nt+Eu,"$"].join("|")+")",nt+"?"+Eu+"+"+Tu,nt+"+"+Ru,Wa,Pa,bu,Ba].join("|"),"g"),Na=RegExp("["+Au+Xt+du+mu+"]"),$a=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Ga=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Ha=-1,H={};H[$r]=H[Gr]=H[Hr]=H[Kr]=H[qr]=H[kr]=H[Zr]=H[Yr]=H[Xr]=!0,H[oe]=H[we]=H[wt]=H[be]=H[je]=H[qn]=H[ze]=H[se]=H[_]=H[x]=H[G]=H[vt]=H[kn]=H[mt]=H[xt]=!1;var $={};$[oe]=$[we]=$[wt]=$[je]=$[be]=$[qn]=$[$r]=$[Gr]=$[Hr]=$[Kr]=$[qr]=$[_]=$[x]=$[G]=$[vt]=$[kn]=$[mt]=$[Zt]=$[kr]=$[Zr]=$[Yr]=$[Xr]=!0,$[ze]=$[se]=$[xt]=!1;var Ka={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},qa={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},ka={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Za={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Ya=parseFloat,Xa=parseInt,Mu=typeof Fr=="object"&&Fr&&Fr.Object===Object&&Fr,Ja=typeof self=="object"&&self&&self.Object===Object&&self,an=Mu||Ja||Function("return this")(),ri=F&&!F.nodeType&&F,Ne=ri&&!0&&Qn&&!Qn.nodeType&&Qn,Pu=Ne&&Ne.exports===ri,ii=Pu&&Mu.process,Un=(function(){try{var l=Ne&&Ne.require&&Ne.require("util").types;return l||ii&&ii.binding&&ii.binding("util")}catch{}})(),Wu=Un&&Un.isArrayBuffer,Bu=Un&&Un.isDate,Fu=Un&&Un.isMap,Uu=Un&&Un.isRegExp,Du=Un&&Un.isSet,zu=Un&&Un.isTypedArray;function In(l,p,h){switch(h.length){case 0:return l.call(p);case 1:return l.call(p,h[0]);case 2:return l.call(p,h[0],h[1]);case 3:return l.call(p,h[0],h[1],h[2])}return l.apply(p,h)}function Qa(l,p,h,b){for(var R=-1,U=l==null?0:l.length;++R<U;){var en=l[R];p(b,en,h(en),l)}return b}function Dn(l,p){for(var h=-1,b=l==null?0:l.length;++h<b&&p(l[h],h,l)!==!1;);return l}function Va(l,p){for(var h=l==null?0:l.length;h--&&p(l[h],h,l)!==!1;);return l}function Nu(l,p){for(var h=-1,b=l==null?0:l.length;++h<b;)if(!p(l[h],h,l))return!1;return!0}function ye(l,p){for(var h=-1,b=l==null?0:l.length,R=0,U=[];++h<b;){var en=l[h];p(en,h,l)&&(U[R++]=en)}return U}function Qt(l,p){var h=l==null?0:l.length;return!!h&&et(l,p,0)>-1}function ui(l,p,h){for(var b=-1,R=l==null?0:l.length;++b<R;)if(h(p,l[b]))return!0;return!1}function K(l,p){for(var h=-1,b=l==null?0:l.length,R=Array(b);++h<b;)R[h]=p(l[h],h,l);return R}function Se(l,p){for(var h=-1,b=p.length,R=l.length;++h<b;)l[R+h]=p[h];return l}function oi(l,p,h,b){var R=-1,U=l==null?0:l.length;for(b&&U&&(h=l[++R]);++R<U;)h=p(h,l[R],R,l);return h}function ja(l,p,h,b){var R=l==null?0:l.length;for(b&&R&&(h=l[--R]);R--;)h=p(h,l[R],R,l);return h}function si(l,p){for(var h=-1,b=l==null?0:l.length;++h<b;)if(p(l[h],h,l))return!0;return!1}var nf=ai("length");function ef(l){return l.split("")}function tf(l){return l.match(la)||[]}function $u(l,p,h){var b;return h(l,function(R,U,en){if(p(R,U,en))return b=U,!1}),b}function Vt(l,p,h,b){for(var R=l.length,U=h+(b?1:-1);b?U--:++U<R;)if(p(l[U],U,l))return U;return-1}function et(l,p,h){return p===p?gf(l,p,h):Vt(l,Gu,h)}function rf(l,p,h,b){for(var R=h-1,U=l.length;++R<U;)if(b(l[R],p))return R;return-1}function Gu(l){return l!==l}function Hu(l,p){var h=l==null?0:l.length;return h?li(l,p)/h:Ve}function ai(l){return function(p){return p==null?s:p[l]}}function fi(l){return function(p){return l==null?s:l[p]}}function Ku(l,p,h,b,R){return R(l,function(U,en,N){h=b?(b=!1,U):p(h,U,en,N)}),h}function uf(l,p){var h=l.length;for(l.sort(p);h--;)l[h]=l[h].value;return l}function li(l,p){for(var h,b=-1,R=l.length;++b<R;){var U=p(l[b]);U!==s&&(h=h===s?U:h+U)}return h}function ci(l,p){for(var h=-1,b=Array(l);++h<l;)b[h]=p(h);return b}function of(l,p){return K(p,function(h){return[h,l[h]]})}function qu(l){return l&&l.slice(0,Xu(l)+1).replace(Qr,"")}function Ln(l){return function(p){return l(p)}}function hi(l,p){return K(p,function(h){return l[h]})}function bt(l,p){return l.has(p)}function ku(l,p){for(var h=-1,b=l.length;++h<b&&et(p,l[h],0)>-1;);return h}function Zu(l,p){for(var h=l.length;h--&&et(p,l[h],0)>-1;);return h}function sf(l,p){for(var h=l.length,b=0;h--;)l[h]===p&&++b;return b}var af=fi(Ka),ff=fi(qa);function lf(l){return"\\"+Za[l]}function cf(l,p){return l==null?s:l[p]}function tt(l){return Na.test(l)}function hf(l){return $a.test(l)}function pf(l){for(var p,h=[];!(p=l.next()).done;)h.push(p.value);return h}function pi(l){var p=-1,h=Array(l.size);return l.forEach(function(b,R){h[++p]=[R,b]}),h}function Yu(l,p){return function(h){return l(p(h))}}function Ae(l,p){for(var h=-1,b=l.length,R=0,U=[];++h<b;){var en=l[h];(en===p||en===k)&&(l[h]=k,U[R++]=h)}return U}function jt(l){var p=-1,h=Array(l.size);return l.forEach(function(b){h[++p]=b}),h}function df(l){var p=-1,h=Array(l.size);return l.forEach(function(b){h[++p]=[b,b]}),h}function gf(l,p,h){for(var b=h-1,R=l.length;++b<R;)if(l[b]===p)return b;return-1}function _f(l,p,h){for(var b=h+1;b--;)if(l[b]===p)return b;return b}function rt(l){return tt(l)?mf(l):nf(l)}function Zn(l){return tt(l)?xf(l):ef(l)}function Xu(l){for(var p=l.length;p--&&oa.test(l.charAt(p)););return p}var vf=fi(ka);function mf(l){for(var p=ti.lastIndex=0;ti.test(l);)++p;return p}function xf(l){return l.match(ti)||[]}function wf(l){return l.match(za)||[]}var bf=(function l(p){p=p==null?an:it.defaults(an.Object(),p,it.pick(an,Ga));var h=p.Array,b=p.Date,R=p.Error,U=p.Function,en=p.Math,N=p.Object,di=p.RegExp,Cf=p.String,zn=p.TypeError,nr=h.prototype,yf=U.prototype,ut=N.prototype,er=p["__core-js_shared__"],tr=yf.toString,z=ut.hasOwnProperty,Sf=0,Ju=(function(){var n=/[^.]+$/.exec(er&&er.keys&&er.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""})(),rr=ut.toString,Af=tr.call(N),Ef=an._,Tf=di("^"+tr.call(z).replace(Jr,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ir=Pu?p.Buffer:s,Ee=p.Symbol,ur=p.Uint8Array,Qu=ir?ir.allocUnsafe:s,or=Yu(N.getPrototypeOf,N),Vu=N.create,ju=ut.propertyIsEnumerable,sr=nr.splice,no=Ee?Ee.isConcatSpreadable:s,Ct=Ee?Ee.iterator:s,$e=Ee?Ee.toStringTag:s,ar=(function(){try{var n=ke(N,"defineProperty");return n({},"",{}),n}catch{}})(),Rf=p.clearTimeout!==an.clearTimeout&&p.clearTimeout,If=b&&b.now!==an.Date.now&&b.now,Lf=p.setTimeout!==an.setTimeout&&p.setTimeout,fr=en.ceil,lr=en.floor,gi=N.getOwnPropertySymbols,Of=ir?ir.isBuffer:s,eo=p.isFinite,Mf=nr.join,Pf=Yu(N.keys,N),tn=en.max,hn=en.min,Wf=b.now,Bf=p.parseInt,to=en.random,Ff=nr.reverse,_i=ke(p,"DataView"),yt=ke(p,"Map"),vi=ke(p,"Promise"),ot=ke(p,"Set"),St=ke(p,"WeakMap"),At=ke(N,"create"),cr=St&&new St,st={},Uf=Ze(_i),Df=Ze(yt),zf=Ze(vi),Nf=Ze(ot),$f=Ze(St),hr=Ee?Ee.prototype:s,Et=hr?hr.valueOf:s,ro=hr?hr.toString:s;function u(n){if(Y(n)&&!I(n)&&!(n instanceof W)){if(n instanceof Nn)return n;if(z.call(n,"__wrapped__"))return us(n)}return new Nn(n)}var at=(function(){function n(){}return function(e){if(!q(e))return{};if(Vu)return Vu(e);n.prototype=e;var t=new n;return n.prototype=s,t}})();function pr(){}function Nn(n,e){this.__wrapped__=n,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=s}u.templateSettings={escape:na,evaluate:ea,interpolate:hu,variable:"",imports:{_:u}},u.prototype=pr.prototype,u.prototype.constructor=u,Nn.prototype=at(pr.prototype),Nn.prototype.constructor=Nn;function W(n){this.__wrapped__=n,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Rn,this.__views__=[]}function Gf(){var n=new W(this.__wrapped__);return n.__actions__=yn(this.__actions__),n.__dir__=this.__dir__,n.__filtered__=this.__filtered__,n.__iteratees__=yn(this.__iteratees__),n.__takeCount__=this.__takeCount__,n.__views__=yn(this.__views__),n}function Hf(){if(this.__filtered__){var n=new W(this);n.__dir__=-1,n.__filtered__=!0}else n=this.clone(),n.__dir__*=-1;return n}function Kf(){var n=this.__wrapped__.value(),e=this.__dir__,t=I(n),r=e<0,i=t?n.length:0,o=tc(0,i,this.__views__),a=o.start,f=o.end,c=f-a,d=r?f:a-1,g=this.__iteratees__,m=g.length,w=0,C=hn(c,this.__takeCount__);if(!t||!r&&i==c&&C==c)return Ro(n,this.__actions__);var A=[];n:for(;c--&&w<C;){d+=e;for(var O=-1,E=n[d];++O<m;){var P=g[O],B=P.iteratee,Pn=P.type,xn=B(E);if(Pn==zr)E=xn;else if(!xn){if(Pn==Nt)continue n;break n}}A[w++]=E}return A}W.prototype=at(pr.prototype),W.prototype.constructor=W;function Ge(n){var e=-1,t=n==null?0:n.length;for(this.clear();++e<t;){var r=n[e];this.set(r[0],r[1])}}function qf(){this.__data__=At?At(null):{},this.size=0}function kf(n){var e=this.has(n)&&delete this.__data__[n];return this.size-=e?1:0,e}function Zf(n){var e=this.__data__;if(At){var t=e[n];return t===xe?s:t}return z.call(e,n)?e[n]:s}function Yf(n){var e=this.__data__;return At?e[n]!==s:z.call(e,n)}function Xf(n,e){var t=this.__data__;return this.size+=this.has(n)?0:1,t[n]=At&&e===s?xe:e,this}Ge.prototype.clear=qf,Ge.prototype.delete=kf,Ge.prototype.get=Zf,Ge.prototype.has=Yf,Ge.prototype.set=Xf;function ae(n){var e=-1,t=n==null?0:n.length;for(this.clear();++e<t;){var r=n[e];this.set(r[0],r[1])}}function Jf(){this.__data__=[],this.size=0}function Qf(n){var e=this.__data__,t=dr(e,n);if(t<0)return!1;var r=e.length-1;return t==r?e.pop():sr.call(e,t,1),--this.size,!0}function Vf(n){var e=this.__data__,t=dr(e,n);return t<0?s:e[t][1]}function jf(n){return dr(this.__data__,n)>-1}function nl(n,e){var t=this.__data__,r=dr(t,n);return r<0?(++this.size,t.push([n,e])):t[r][1]=e,this}ae.prototype.clear=Jf,ae.prototype.delete=Qf,ae.prototype.get=Vf,ae.prototype.has=jf,ae.prototype.set=nl;function fe(n){var e=-1,t=n==null?0:n.length;for(this.clear();++e<t;){var r=n[e];this.set(r[0],r[1])}}function el(){this.size=0,this.__data__={hash:new Ge,map:new(yt||ae),string:new Ge}}function tl(n){var e=Er(this,n).delete(n);return this.size-=e?1:0,e}function rl(n){return Er(this,n).get(n)}function il(n){return Er(this,n).has(n)}function ul(n,e){var t=Er(this,n),r=t.size;return t.set(n,e),this.size+=t.size==r?0:1,this}fe.prototype.clear=el,fe.prototype.delete=tl,fe.prototype.get=rl,fe.prototype.has=il,fe.prototype.set=ul;function He(n){var e=-1,t=n==null?0:n.length;for(this.__data__=new fe;++e<t;)this.add(n[e])}function ol(n){return this.__data__.set(n,xe),this}function sl(n){return this.__data__.has(n)}He.prototype.add=He.prototype.push=ol,He.prototype.has=sl;function Yn(n){var e=this.__data__=new ae(n);this.size=e.size}function al(){this.__data__=new ae,this.size=0}function fl(n){var e=this.__data__,t=e.delete(n);return this.size=e.size,t}function ll(n){return this.__data__.get(n)}function cl(n){return this.__data__.has(n)}function hl(n,e){var t=this.__data__;if(t instanceof ae){var r=t.__data__;if(!yt||r.length<Vn-1)return r.push([n,e]),this.size=++t.size,this;t=this.__data__=new fe(r)}return t.set(n,e),this.size=t.size,this}Yn.prototype.clear=al,Yn.prototype.delete=fl,Yn.prototype.get=ll,Yn.prototype.has=cl,Yn.prototype.set=hl;function io(n,e){var t=I(n),r=!t&&Ye(n),i=!t&&!r&&Oe(n),o=!t&&!r&&!i&&ht(n),a=t||r||i||o,f=a?ci(n.length,Cf):[],c=f.length;for(var d in n)(e||z.call(n,d))&&!(a&&(d=="length"||i&&(d=="offset"||d=="parent")||o&&(d=="buffer"||d=="byteLength"||d=="byteOffset")||pe(d,c)))&&f.push(d);return f}function uo(n){var e=n.length;return e?n[Ri(0,e-1)]:s}function pl(n,e){return Tr(yn(n),Ke(e,0,n.length))}function dl(n){return Tr(yn(n))}function mi(n,e,t){(t!==s&&!Xn(n[e],t)||t===s&&!(e in n))&&le(n,e,t)}function Tt(n,e,t){var r=n[e];(!(z.call(n,e)&&Xn(r,t))||t===s&&!(e in n))&&le(n,e,t)}function dr(n,e){for(var t=n.length;t--;)if(Xn(n[t][0],e))return t;return-1}function gl(n,e,t,r){return Te(n,function(i,o,a){e(r,i,t(i),a)}),r}function oo(n,e){return n&&te(e,on(e),n)}function _l(n,e){return n&&te(e,An(e),n)}function le(n,e,t){e=="__proto__"&&ar?ar(n,e,{configurable:!0,enumerable:!0,value:t,writable:!0}):n[e]=t}function xi(n,e){for(var t=-1,r=e.length,i=h(r),o=n==null;++t<r;)i[t]=o?s:ji(n,e[t]);return i}function Ke(n,e,t){return n===n&&(t!==s&&(n=n<=t?n:t),e!==s&&(n=n>=e?n:e)),n}function $n(n,e,t,r,i,o){var a,f=e&Tn,c=e&Je,d=e&X;if(t&&(a=i?t(n,r,i,o):t(n)),a!==s)return a;if(!q(n))return n;var g=I(n);if(g){if(a=ic(n),!f)return yn(n,a)}else{var m=pn(n),w=m==se||m==kt;if(Oe(n))return Oo(n,f);if(m==G||m==oe||w&&!i){if(a=c||w?{}:Jo(n),!f)return c?Zl(n,_l(a,n)):kl(n,oo(a,n))}else{if(!$[m])return i?n:{};a=uc(n,m,f)}}o||(o=new Yn);var C=o.get(n);if(C)return C;o.set(n,a),As(n)?n.forEach(function(E){a.add($n(E,e,t,E,n,o))}):ys(n)&&n.forEach(function(E,P){a.set(P,$n(E,e,t,P,n,o))});var A=d?c?zi:Di:c?An:on,O=g?s:A(n);return Dn(O||n,function(E,P){O&&(P=E,E=n[P]),Tt(a,P,$n(E,e,t,P,n,o))}),a}function vl(n){var e=on(n);return function(t){return so(t,n,e)}}function so(n,e,t){var r=t.length;if(n==null)return!r;for(n=N(n);r--;){var i=t[r],o=e[i],a=n[i];if(a===s&&!(i in n)||!o(a))return!1}return!0}function ao(n,e,t){if(typeof n!="function")throw new zn(sn);return Wt(function(){n.apply(s,t)},e)}function Rt(n,e,t,r){var i=-1,o=Qt,a=!0,f=n.length,c=[],d=e.length;if(!f)return c;t&&(e=K(e,Ln(t))),r?(o=ui,a=!1):e.length>=Vn&&(o=bt,a=!1,e=new He(e));n:for(;++i<f;){var g=n[i],m=t==null?g:t(g);if(g=r||g!==0?g:0,a&&m===m){for(var w=d;w--;)if(e[w]===m)continue n;c.push(g)}else o(e,m,r)||c.push(g)}return c}var Te=Fo(ee),fo=Fo(bi,!0);function ml(n,e){var t=!0;return Te(n,function(r,i,o){return t=!!e(r,i,o),t}),t}function gr(n,e,t){for(var r=-1,i=n.length;++r<i;){var o=n[r],a=e(o);if(a!=null&&(f===s?a===a&&!Mn(a):t(a,f)))var f=a,c=o}return c}function xl(n,e,t,r){var i=n.length;for(t=L(t),t<0&&(t=-t>i?0:i+t),r=r===s||r>i?i:L(r),r<0&&(r+=i),r=t>r?0:Ts(r);t<r;)n[t++]=e;return n}function lo(n,e){var t=[];return Te(n,function(r,i,o){e(r,i,o)&&t.push(r)}),t}function fn(n,e,t,r,i){var o=-1,a=n.length;for(t||(t=sc),i||(i=[]);++o<a;){var f=n[o];e>0&&t(f)?e>1?fn(f,e-1,t,r,i):Se(i,f):r||(i[i.length]=f)}return i}var wi=Uo(),co=Uo(!0);function ee(n,e){return n&&wi(n,e,on)}function bi(n,e){return n&&co(n,e,on)}function _r(n,e){return ye(e,function(t){return de(n[t])})}function qe(n,e){e=Ie(e,n);for(var t=0,r=e.length;n!=null&&t<r;)n=n[re(e[t++])];return t&&t==r?n:s}function ho(n,e,t){var r=e(n);return I(n)?r:Se(r,t(n))}function vn(n){return n==null?n===s?Zs:Ce:$e&&$e in N(n)?ec(n):dc(n)}function Ci(n,e){return n>e}function wl(n,e){return n!=null&&z.call(n,e)}function bl(n,e){return n!=null&&e in N(n)}function Cl(n,e,t){return n>=hn(e,t)&&n<tn(e,t)}function yi(n,e,t){for(var r=t?ui:Qt,i=n[0].length,o=n.length,a=o,f=h(o),c=1/0,d=[];a--;){var g=n[a];a&&e&&(g=K(g,Ln(e))),c=hn(g.length,c),f[a]=!t&&(e||i>=120&&g.length>=120)?new He(a&&g):s}g=n[0];var m=-1,w=f[0];n:for(;++m<i&&d.length<c;){var C=g[m],A=e?e(C):C;if(C=t||C!==0?C:0,!(w?bt(w,A):r(d,A,t))){for(a=o;--a;){var O=f[a];if(!(O?bt(O,A):r(n[a],A,t)))continue n}w&&w.push(A),d.push(C)}}return d}function yl(n,e,t,r){return ee(n,function(i,o,a){e(r,t(i),o,a)}),r}function It(n,e,t){e=Ie(e,n),n=ns(n,e);var r=n==null?n:n[re(Hn(e))];return r==null?s:In(r,n,t)}function po(n){return Y(n)&&vn(n)==oe}function Sl(n){return Y(n)&&vn(n)==wt}function Al(n){return Y(n)&&vn(n)==qn}function Lt(n,e,t,r,i){return n===e?!0:n==null||e==null||!Y(n)&&!Y(e)?n!==n&&e!==e:El(n,e,t,r,Lt,i)}function El(n,e,t,r,i,o){var a=I(n),f=I(e),c=a?we:pn(n),d=f?we:pn(e);c=c==oe?G:c,d=d==oe?G:d;var g=c==G,m=d==G,w=c==d;if(w&&Oe(n)){if(!Oe(e))return!1;a=!0,g=!1}if(w&&!g)return o||(o=new Yn),a||ht(n)?Zo(n,e,t,r,i,o):jl(n,e,c,t,r,i,o);if(!(t&Z)){var C=g&&z.call(n,"__wrapped__"),A=m&&z.call(e,"__wrapped__");if(C||A){var O=C?n.value():n,E=A?e.value():e;return o||(o=new Yn),i(O,E,t,r,o)}}return w?(o||(o=new Yn),nc(n,e,t,r,i,o)):!1}function Tl(n){return Y(n)&&pn(n)==_}function Si(n,e,t,r){var i=t.length,o=i,a=!r;if(n==null)return!o;for(n=N(n);i--;){var f=t[i];if(a&&f[2]?f[1]!==n[f[0]]:!(f[0]in n))return!1}for(;++i<o;){f=t[i];var c=f[0],d=n[c],g=f[1];if(a&&f[2]){if(d===s&&!(c in n))return!1}else{var m=new Yn;if(r)var w=r(d,g,c,n,e,m);if(!(w===s?Lt(g,d,Z|J,r,m):w))return!1}}return!0}function go(n){if(!q(n)||fc(n))return!1;var e=de(n)?Tf:_a;return e.test(Ze(n))}function Rl(n){return Y(n)&&vn(n)==vt}function Il(n){return Y(n)&&pn(n)==kn}function Ll(n){return Y(n)&&Pr(n.length)&&!!H[vn(n)]}function _o(n){return typeof n=="function"?n:n==null?En:typeof n=="object"?I(n)?xo(n[0],n[1]):mo(n):Ds(n)}function Ai(n){if(!Pt(n))return Pf(n);var e=[];for(var t in N(n))z.call(n,t)&&t!="constructor"&&e.push(t);return e}function Ol(n){if(!q(n))return pc(n);var e=Pt(n),t=[];for(var r in n)r=="constructor"&&(e||!z.call(n,r))||t.push(r);return t}function Ei(n,e){return n<e}function vo(n,e){var t=-1,r=Sn(n)?h(n.length):[];return Te(n,function(i,o,a){r[++t]=e(i,o,a)}),r}function mo(n){var e=$i(n);return e.length==1&&e[0][2]?Vo(e[0][0],e[0][1]):function(t){return t===n||Si(t,n,e)}}function xo(n,e){return Hi(n)&&Qo(e)?Vo(re(n),e):function(t){var r=ji(t,n);return r===s&&r===e?nu(t,n):Lt(e,r,Z|J)}}function vr(n,e,t,r,i){n!==e&&wi(e,function(o,a){if(i||(i=new Yn),q(o))Ml(n,e,a,t,vr,r,i);else{var f=r?r(qi(n,a),o,a+"",n,e,i):s;f===s&&(f=o),mi(n,a,f)}},An)}function Ml(n,e,t,r,i,o,a){var f=qi(n,t),c=qi(e,t),d=a.get(c);if(d){mi(n,t,d);return}var g=o?o(f,c,t+"",n,e,a):s,m=g===s;if(m){var w=I(c),C=!w&&Oe(c),A=!w&&!C&&ht(c);g=c,w||C||A?I(f)?g=f:V(f)?g=yn(f):C?(m=!1,g=Oo(c,!0)):A?(m=!1,g=Mo(c,!0)):g=[]:Bt(c)||Ye(c)?(g=f,Ye(f)?g=Rs(f):(!q(f)||de(f))&&(g=Jo(c))):m=!1}m&&(a.set(c,g),i(g,c,r,o,a),a.delete(c)),mi(n,t,g)}function wo(n,e){var t=n.length;if(t)return e+=e<0?t:0,pe(e,t)?n[e]:s}function bo(n,e,t){e.length?e=K(e,function(o){return I(o)?function(a){return qe(a,o.length===1?o[0]:o)}:o}):e=[En];var r=-1;e=K(e,Ln(S()));var i=vo(n,function(o,a,f){var c=K(e,function(d){return d(o)});return{criteria:c,index:++r,value:o}});return uf(i,function(o,a){return ql(o,a,t)})}function Pl(n,e){return Co(n,e,function(t,r){return nu(n,r)})}function Co(n,e,t){for(var r=-1,i=e.length,o={};++r<i;){var a=e[r],f=qe(n,a);t(f,a)&&Ot(o,Ie(a,n),f)}return o}function Wl(n){return function(e){return qe(e,n)}}function Ti(n,e,t,r){var i=r?rf:et,o=-1,a=e.length,f=n;for(n===e&&(e=yn(e)),t&&(f=K(n,Ln(t)));++o<a;)for(var c=0,d=e[o],g=t?t(d):d;(c=i(f,g,c,r))>-1;)f!==n&&sr.call(f,c,1),sr.call(n,c,1);return n}function yo(n,e){for(var t=n?e.length:0,r=t-1;t--;){var i=e[t];if(t==r||i!==o){var o=i;pe(i)?sr.call(n,i,1):Oi(n,i)}}return n}function Ri(n,e){return n+lr(to()*(e-n+1))}function Bl(n,e,t,r){for(var i=-1,o=tn(fr((e-n)/(t||1)),0),a=h(o);o--;)a[r?o:++i]=n,n+=t;return a}function Ii(n,e){var t="";if(!n||e<1||e>ne)return t;do e%2&&(t+=n),e=lr(e/2),e&&(n+=n);while(e);return t}function M(n,e){return ki(jo(n,e,En),n+"")}function Fl(n){return uo(pt(n))}function Ul(n,e){var t=pt(n);return Tr(t,Ke(e,0,t.length))}function Ot(n,e,t,r){if(!q(n))return n;e=Ie(e,n);for(var i=-1,o=e.length,a=o-1,f=n;f!=null&&++i<o;){var c=re(e[i]),d=t;if(c==="__proto__"||c==="constructor"||c==="prototype")return n;if(i!=a){var g=f[c];d=r?r(g,c,f):s,d===s&&(d=q(g)?g:pe(e[i+1])?[]:{})}Tt(f,c,d),f=f[c]}return n}var So=cr?function(n,e){return cr.set(n,e),n}:En,Dl=ar?function(n,e){return ar(n,"toString",{configurable:!0,enumerable:!1,value:tu(e),writable:!0})}:En;function zl(n){return Tr(pt(n))}function Gn(n,e,t){var r=-1,i=n.length;e<0&&(e=-e>i?0:i+e),t=t>i?i:t,t<0&&(t+=i),i=e>t?0:t-e>>>0,e>>>=0;for(var o=h(i);++r<i;)o[r]=n[r+e];return o}function Nl(n,e){var t;return Te(n,function(r,i,o){return t=e(r,i,o),!t}),!!t}function mr(n,e,t){var r=0,i=n==null?r:n.length;if(typeof e=="number"&&e===e&&i<=Ht){for(;r<i;){var o=r+i>>>1,a=n[o];a!==null&&!Mn(a)&&(t?a<=e:a<e)?r=o+1:i=o}return i}return Li(n,e,En,t)}function Li(n,e,t,r){var i=0,o=n==null?0:n.length;if(o===0)return 0;e=t(e);for(var a=e!==e,f=e===null,c=Mn(e),d=e===s;i<o;){var g=lr((i+o)/2),m=t(n[g]),w=m!==s,C=m===null,A=m===m,O=Mn(m);if(a)var E=r||A;else d?E=A&&(r||w):f?E=A&&w&&(r||!C):c?E=A&&w&&!C&&(r||!O):C||O?E=!1:E=r?m<=e:m<e;E?i=g+1:o=g}return hn(o,Gt)}function Ao(n,e){for(var t=-1,r=n.length,i=0,o=[];++t<r;){var a=n[t],f=e?e(a):a;if(!t||!Xn(f,c)){var c=f;o[i++]=a===0?0:a}}return o}function Eo(n){return typeof n=="number"?n:Mn(n)?Ve:+n}function On(n){if(typeof n=="string")return n;if(I(n))return K(n,On)+"";if(Mn(n))return ro?ro.call(n):"";var e=n+"";return e=="0"&&1/n==-ue?"-0":e}function Re(n,e,t){var r=-1,i=Qt,o=n.length,a=!0,f=[],c=f;if(t)a=!1,i=ui;else if(o>=Vn){var d=e?null:Ql(n);if(d)return jt(d);a=!1,i=bt,c=new He}else c=e?[]:f;n:for(;++r<o;){var g=n[r],m=e?e(g):g;if(g=t||g!==0?g:0,a&&m===m){for(var w=c.length;w--;)if(c[w]===m)continue n;e&&c.push(m),f.push(g)}else i(c,m,t)||(c!==f&&c.push(m),f.push(g))}return f}function Oi(n,e){return e=Ie(e,n),n=ns(n,e),n==null||delete n[re(Hn(e))]}function To(n,e,t,r){return Ot(n,e,t(qe(n,e)),r)}function xr(n,e,t,r){for(var i=n.length,o=r?i:-1;(r?o--:++o<i)&&e(n[o],o,n););return t?Gn(n,r?0:o,r?o+1:i):Gn(n,r?o+1:0,r?i:o)}function Ro(n,e){var t=n;return t instanceof W&&(t=t.value()),oi(e,function(r,i){return i.func.apply(i.thisArg,Se([r],i.args))},t)}function Mi(n,e,t){var r=n.length;if(r<2)return r?Re(n[0]):[];for(var i=-1,o=h(r);++i<r;)for(var a=n[i],f=-1;++f<r;)f!=i&&(o[i]=Rt(o[i]||a,n[f],e,t));return Re(fn(o,1),e,t)}function Io(n,e,t){for(var r=-1,i=n.length,o=e.length,a={};++r<i;){var f=r<o?e[r]:s;t(a,n[r],f)}return a}function Pi(n){return V(n)?n:[]}function Wi(n){return typeof n=="function"?n:En}function Ie(n,e){return I(n)?n:Hi(n,e)?[n]:is(D(n))}var $l=M;function Le(n,e,t){var r=n.length;return t=t===s?r:t,!e&&t>=r?n:Gn(n,e,t)}var Lo=Rf||function(n){return an.clearTimeout(n)};function Oo(n,e){if(e)return n.slice();var t=n.length,r=Qu?Qu(t):new n.constructor(t);return n.copy(r),r}function Bi(n){var e=new n.constructor(n.byteLength);return new ur(e).set(new ur(n)),e}function Gl(n,e){var t=e?Bi(n.buffer):n.buffer;return new n.constructor(t,n.byteOffset,n.byteLength)}function Hl(n){var e=new n.constructor(n.source,pu.exec(n));return e.lastIndex=n.lastIndex,e}function Kl(n){return Et?N(Et.call(n)):{}}function Mo(n,e){var t=e?Bi(n.buffer):n.buffer;return new n.constructor(t,n.byteOffset,n.length)}function Po(n,e){if(n!==e){var t=n!==s,r=n===null,i=n===n,o=Mn(n),a=e!==s,f=e===null,c=e===e,d=Mn(e);if(!f&&!d&&!o&&n>e||o&&a&&c&&!f&&!d||r&&a&&c||!t&&c||!i)return 1;if(!r&&!o&&!d&&n<e||d&&t&&i&&!r&&!o||f&&t&&i||!a&&i||!c)return-1}return 0}function ql(n,e,t){for(var r=-1,i=n.criteria,o=e.criteria,a=i.length,f=t.length;++r<a;){var c=Po(i[r],o[r]);if(c){if(r>=f)return c;var d=t[r];return c*(d=="desc"?-1:1)}}return n.index-e.index}function Wo(n,e,t,r){for(var i=-1,o=n.length,a=t.length,f=-1,c=e.length,d=tn(o-a,0),g=h(c+d),m=!r;++f<c;)g[f]=e[f];for(;++i<a;)(m||i<o)&&(g[t[i]]=n[i]);for(;d--;)g[f++]=n[i++];return g}function Bo(n,e,t,r){for(var i=-1,o=n.length,a=-1,f=t.length,c=-1,d=e.length,g=tn(o-f,0),m=h(g+d),w=!r;++i<g;)m[i]=n[i];for(var C=i;++c<d;)m[C+c]=e[c];for(;++a<f;)(w||i<o)&&(m[C+t[a]]=n[i++]);return m}function yn(n,e){var t=-1,r=n.length;for(e||(e=h(r));++t<r;)e[t]=n[t];return e}function te(n,e,t,r){var i=!t;t||(t={});for(var o=-1,a=e.length;++o<a;){var f=e[o],c=r?r(t[f],n[f],f,t,n):s;c===s&&(c=n[f]),i?le(t,f,c):Tt(t,f,c)}return t}function kl(n,e){return te(n,Gi(n),e)}function Zl(n,e){return te(n,Yo(n),e)}function wr(n,e){return function(t,r){var i=I(t)?Qa:gl,o=e?e():{};return i(t,n,S(r,2),o)}}function ft(n){return M(function(e,t){var r=-1,i=t.length,o=i>1?t[i-1]:s,a=i>2?t[2]:s;for(o=n.length>3&&typeof o=="function"?(i--,o):s,a&&mn(t[0],t[1],a)&&(o=i<3?s:o,i=1),e=N(e);++r<i;){var f=t[r];f&&n(e,f,r,o)}return e})}function Fo(n,e){return function(t,r){if(t==null)return t;if(!Sn(t))return n(t,r);for(var i=t.length,o=e?i:-1,a=N(t);(e?o--:++o<i)&&r(a[o],o,a)!==!1;);return t}}function Uo(n){return function(e,t,r){for(var i=-1,o=N(e),a=r(e),f=a.length;f--;){var c=a[n?f:++i];if(t(o[c],c,o)===!1)break}return e}}function Yl(n,e,t){var r=e&Q,i=Mt(n);function o(){var a=this&&this!==an&&this instanceof o?i:n;return a.apply(r?t:this,arguments)}return o}function Do(n){return function(e){e=D(e);var t=tt(e)?Zn(e):s,r=t?t[0]:e.charAt(0),i=t?Le(t,1).join(""):e.slice(1);return r[n]()+i}}function lt(n){return function(e){return oi(Fs(Bs(e).replace(Ua,"")),n,"")}}function Mt(n){return function(){var e=arguments;switch(e.length){case 0:return new n;case 1:return new n(e[0]);case 2:return new n(e[0],e[1]);case 3:return new n(e[0],e[1],e[2]);case 4:return new n(e[0],e[1],e[2],e[3]);case 5:return new n(e[0],e[1],e[2],e[3],e[4]);case 6:return new n(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new n(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var t=at(n.prototype),r=n.apply(t,e);return q(r)?r:t}}function Xl(n,e,t){var r=Mt(n);function i(){for(var o=arguments.length,a=h(o),f=o,c=ct(i);f--;)a[f]=arguments[f];var d=o<3&&a[0]!==c&&a[o-1]!==c?[]:Ae(a,c);if(o-=d.length,o<t)return Ho(n,e,br,i.placeholder,s,a,d,s,s,t-o);var g=this&&this!==an&&this instanceof i?r:n;return In(g,this,a)}return i}function zo(n){return function(e,t,r){var i=N(e);if(!Sn(e)){var o=S(t,3);e=on(e),t=function(f){return o(i[f],f,i)}}var a=n(e,t,r);return a>-1?i[o?e[a]:a]:s}}function No(n){return he(function(e){var t=e.length,r=t,i=Nn.prototype.thru;for(n&&e.reverse();r--;){var o=e[r];if(typeof o!="function")throw new zn(sn);if(i&&!a&&Ar(o)=="wrapper")var a=new Nn([],!0)}for(r=a?r:t;++r<t;){o=e[r];var f=Ar(o),c=f=="wrapper"?Ni(o):s;c&&Ki(c[0])&&c[1]==(bn|Bn|Fn|nn)&&!c[4].length&&c[9]==1?a=a[Ar(c[0])].apply(a,c[3]):a=o.length==1&&Ki(o)?a[f]():a.thru(o)}return function(){var d=arguments,g=d[0];if(a&&d.length==1&&I(g))return a.plant(g).value();for(var m=0,w=t?e[m].apply(this,d):g;++m<t;)w=e[m].call(this,w);return w}})}function br(n,e,t,r,i,o,a,f,c,d){var g=e&bn,m=e&Q,w=e&jn,C=e&(Bn|Ue),A=e&cn,O=w?s:Mt(n);function E(){for(var P=arguments.length,B=h(P),Pn=P;Pn--;)B[Pn]=arguments[Pn];if(C)var xn=ct(E),Wn=sf(B,xn);if(r&&(B=Wo(B,r,i,C)),o&&(B=Bo(B,o,a,C)),P-=Wn,C&&P<d){var j=Ae(B,xn);return Ho(n,e,br,E.placeholder,t,B,j,f,c,d-P)}var Jn=m?t:this,_e=w?Jn[n]:n;return P=B.length,f?B=gc(B,f):A&&P>1&&B.reverse(),g&&c<P&&(B.length=c),this&&this!==an&&this instanceof E&&(_e=O||Mt(_e)),_e.apply(Jn,B)}return E}function $o(n,e){return function(t,r){return yl(t,n,e(r),{})}}function Cr(n,e){return function(t,r){var i;if(t===s&&r===s)return e;if(t!==s&&(i=t),r!==s){if(i===s)return r;typeof t=="string"||typeof r=="string"?(t=On(t),r=On(r)):(t=Eo(t),r=Eo(r)),i=n(t,r)}return i}}function Fi(n){return he(function(e){return e=K(e,Ln(S())),M(function(t){var r=this;return n(e,function(i){return In(i,r,t)})})})}function yr(n,e){e=e===s?" ":On(e);var t=e.length;if(t<2)return t?Ii(e,n):e;var r=Ii(e,fr(n/rt(e)));return tt(e)?Le(Zn(r),0,n).join(""):r.slice(0,n)}function Jl(n,e,t,r){var i=e&Q,o=Mt(n);function a(){for(var f=-1,c=arguments.length,d=-1,g=r.length,m=h(g+c),w=this&&this!==an&&this instanceof a?o:n;++d<g;)m[d]=r[d];for(;c--;)m[d++]=arguments[++f];return In(w,i?t:this,m)}return a}function Go(n){return function(e,t,r){return r&&typeof r!="number"&&mn(e,t,r)&&(t=r=s),e=ge(e),t===s?(t=e,e=0):t=ge(t),r=r===s?e<t?1:-1:ge(r),Bl(e,t,r,n)}}function Sr(n){return function(e,t){return typeof e=="string"&&typeof t=="string"||(e=Kn(e),t=Kn(t)),n(e,t)}}function Ho(n,e,t,r,i,o,a,f,c,d){var g=e&Bn,m=g?a:s,w=g?s:a,C=g?o:s,A=g?s:o;e|=g?Fn:De,e&=~(g?De:Fn),e&gt||(e&=-4);var O=[n,e,i,C,m,A,w,f,c,d],E=t.apply(s,O);return Ki(n)&&es(E,O),E.placeholder=r,ts(E,n,e)}function Ui(n){var e=en[n];return function(t,r){if(t=Kn(t),r=r==null?0:hn(L(r),292),r&&eo(t)){var i=(D(t)+"e").split("e"),o=e(i[0]+"e"+(+i[1]+r));return i=(D(o)+"e").split("e"),+(i[0]+"e"+(+i[1]-r))}return e(t)}}var Ql=ot&&1/jt(new ot([,-0]))[1]==ue?function(n){return new ot(n)}:uu;function Ko(n){return function(e){var t=pn(e);return t==_?pi(e):t==kn?df(e):of(e,n(e))}}function ce(n,e,t,r,i,o,a,f){var c=e&jn;if(!c&&typeof n!="function")throw new zn(sn);var d=r?r.length:0;if(d||(e&=-97,r=i=s),a=a===s?a:tn(L(a),0),f=f===s?f:L(f),d-=i?i.length:0,e&De){var g=r,m=i;r=i=s}var w=c?s:Ni(n),C=[n,e,t,r,i,g,m,o,a,f];if(w&&hc(C,w),n=C[0],e=C[1],t=C[2],r=C[3],i=C[4],f=C[9]=C[9]===s?c?0:n.length:tn(C[9]-d,0),!f&&e&(Bn|Ue)&&(e&=-25),!e||e==Q)var A=Yl(n,e,t);else e==Bn||e==Ue?A=Xl(n,e,f):(e==Fn||e==(Q|Fn))&&!i.length?A=Jl(n,e,t,r):A=br.apply(s,C);var O=w?So:es;return ts(O(A,C),n,e)}function qo(n,e,t,r){return n===s||Xn(n,ut[t])&&!z.call(r,t)?e:n}function ko(n,e,t,r,i,o){return q(n)&&q(e)&&(o.set(e,n),vr(n,e,s,ko,o),o.delete(e)),n}function Vl(n){return Bt(n)?s:n}function Zo(n,e,t,r,i,o){var a=t&Z,f=n.length,c=e.length;if(f!=c&&!(a&&c>f))return!1;var d=o.get(n),g=o.get(e);if(d&&g)return d==e&&g==n;var m=-1,w=!0,C=t&J?new He:s;for(o.set(n,e),o.set(e,n);++m<f;){var A=n[m],O=e[m];if(r)var E=a?r(O,A,m,e,n,o):r(A,O,m,n,e,o);if(E!==s){if(E)continue;w=!1;break}if(C){if(!si(e,function(P,B){if(!bt(C,B)&&(A===P||i(A,P,t,r,o)))return C.push(B)})){w=!1;break}}else if(!(A===O||i(A,O,t,r,o))){w=!1;break}}return o.delete(n),o.delete(e),w}function jl(n,e,t,r,i,o,a){switch(t){case je:if(n.byteLength!=e.byteLength||n.byteOffset!=e.byteOffset)return!1;n=n.buffer,e=e.buffer;case wt:return!(n.byteLength!=e.byteLength||!o(new ur(n),new ur(e)));case be:case qn:case x:return Xn(+n,+e);case ze:return n.name==e.name&&n.message==e.message;case vt:case mt:return n==e+"";case _:var f=pi;case kn:var c=r&Z;if(f||(f=jt),n.size!=e.size&&!c)return!1;var d=a.get(n);if(d)return d==e;r|=J,a.set(n,e);var g=Zo(f(n),f(e),r,i,o,a);return a.delete(n),g;case Zt:if(Et)return Et.call(n)==Et.call(e)}return!1}function nc(n,e,t,r,i,o){var a=t&Z,f=Di(n),c=f.length,d=Di(e),g=d.length;if(c!=g&&!a)return!1;for(var m=c;m--;){var w=f[m];if(!(a?w in e:z.call(e,w)))return!1}var C=o.get(n),A=o.get(e);if(C&&A)return C==e&&A==n;var O=!0;o.set(n,e),o.set(e,n);for(var E=a;++m<c;){w=f[m];var P=n[w],B=e[w];if(r)var Pn=a?r(B,P,w,e,n,o):r(P,B,w,n,e,o);if(!(Pn===s?P===B||i(P,B,t,r,o):Pn)){O=!1;break}E||(E=w=="constructor")}if(O&&!E){var xn=n.constructor,Wn=e.constructor;xn!=Wn&&"constructor"in n&&"constructor"in e&&!(typeof xn=="function"&&xn instanceof xn&&typeof Wn=="function"&&Wn instanceof Wn)&&(O=!1)}return o.delete(n),o.delete(e),O}function he(n){return ki(jo(n,s,as),n+"")}function Di(n){return ho(n,on,Gi)}function zi(n){return ho(n,An,Yo)}var Ni=cr?function(n){return cr.get(n)}:uu;function Ar(n){for(var e=n.name+"",t=st[e],r=z.call(st,e)?t.length:0;r--;){var i=t[r],o=i.func;if(o==null||o==n)return i.name}return e}function ct(n){var e=z.call(u,"placeholder")?u:n;return e.placeholder}function S(){var n=u.iteratee||ru;return n=n===ru?_o:n,arguments.length?n(arguments[0],arguments[1]):n}function Er(n,e){var t=n.__data__;return ac(e)?t[typeof e=="string"?"string":"hash"]:t.map}function $i(n){for(var e=on(n),t=e.length;t--;){var r=e[t],i=n[r];e[t]=[r,i,Qo(i)]}return e}function ke(n,e){var t=cf(n,e);return go(t)?t:s}function ec(n){var e=z.call(n,$e),t=n[$e];try{n[$e]=s;var r=!0}catch{}var i=rr.call(n);return r&&(e?n[$e]=t:delete n[$e]),i}var Gi=gi?function(n){return n==null?[]:(n=N(n),ye(gi(n),function(e){return ju.call(n,e)}))}:ou,Yo=gi?function(n){for(var e=[];n;)Se(e,Gi(n)),n=or(n);return e}:ou,pn=vn;(_i&&pn(new _i(new ArrayBuffer(1)))!=je||yt&&pn(new yt)!=_||vi&&pn(vi.resolve())!=fu||ot&&pn(new ot)!=kn||St&&pn(new St)!=xt)&&(pn=function(n){var e=vn(n),t=e==G?n.constructor:s,r=t?Ze(t):"";if(r)switch(r){case Uf:return je;case Df:return _;case zf:return fu;case Nf:return kn;case $f:return xt}return e});function tc(n,e,t){for(var r=-1,i=t.length;++r<i;){var o=t[r],a=o.size;switch(o.type){case"drop":n+=a;break;case"dropRight":e-=a;break;case"take":e=hn(e,n+a);break;case"takeRight":n=tn(n,e-a);break}}return{start:n,end:e}}function rc(n){var e=n.match(aa);return e?e[1].split(fa):[]}function Xo(n,e,t){e=Ie(e,n);for(var r=-1,i=e.length,o=!1;++r<i;){var a=re(e[r]);if(!(o=n!=null&&t(n,a)))break;n=n[a]}return o||++r!=i?o:(i=n==null?0:n.length,!!i&&Pr(i)&&pe(a,i)&&(I(n)||Ye(n)))}function ic(n){var e=n.length,t=new n.constructor(e);return e&&typeof n[0]=="string"&&z.call(n,"index")&&(t.index=n.index,t.input=n.input),t}function Jo(n){return typeof n.constructor=="function"&&!Pt(n)?at(or(n)):{}}function uc(n,e,t){var r=n.constructor;switch(e){case wt:return Bi(n);case be:case qn:return new r(+n);case je:return Gl(n,t);case $r:case Gr:case Hr:case Kr:case qr:case kr:case Zr:case Yr:case Xr:return Mo(n,t);case _:return new r;case x:case mt:return new r(n);case vt:return Hl(n);case kn:return new r;case Zt:return Kl(n)}}function oc(n,e){var t=e.length;if(!t)return n;var r=t-1;return e[r]=(t>1?"& ":"")+e[r],e=e.join(t>2?", ":" "),n.replace(sa,`{
/* [wrapped with `+e+`] */
`)}function sc(n){return I(n)||Ye(n)||!!(no&&n&&n[no])}function pe(n,e){var t=typeof n;return e=e??ne,!!e&&(t=="number"||t!="symbol"&&ma.test(n))&&n>-1&&n%1==0&&n<e}function mn(n,e,t){if(!q(t))return!1;var r=typeof e;return(r=="number"?Sn(t)&&pe(e,t.length):r=="string"&&e in t)?Xn(t[e],n):!1}function Hi(n,e){if(I(n))return!1;var t=typeof n;return t=="number"||t=="symbol"||t=="boolean"||n==null||Mn(n)?!0:ra.test(n)||!ta.test(n)||e!=null&&n in N(e)}function ac(n){var e=typeof n;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?n!=="__proto__":n===null}function Ki(n){var e=Ar(n),t=u[e];if(typeof t!="function"||!(e in W.prototype))return!1;if(n===t)return!0;var r=Ni(t);return!!r&&n===r[0]}function fc(n){return!!Ju&&Ju in n}var lc=er?de:su;function Pt(n){var e=n&&n.constructor,t=typeof e=="function"&&e.prototype||ut;return n===t}function Qo(n){return n===n&&!q(n)}function Vo(n,e){return function(t){return t==null?!1:t[n]===e&&(e!==s||n in N(t))}}function cc(n){var e=Or(n,function(r){return t.size===Fe&&t.clear(),r}),t=e.cache;return e}function hc(n,e){var t=n[1],r=e[1],i=t|r,o=i<(Q|jn|bn),a=r==bn&&t==Bn||r==bn&&t==nn&&n[7].length<=e[8]||r==(bn|nn)&&e[7].length<=e[8]&&t==Bn;if(!(o||a))return n;r&Q&&(n[2]=e[2],i|=t&Q?0:gt);var f=e[3];if(f){var c=n[3];n[3]=c?Wo(c,f,e[4]):f,n[4]=c?Ae(n[3],k):e[4]}return f=e[5],f&&(c=n[5],n[5]=c?Bo(c,f,e[6]):f,n[6]=c?Ae(n[5],k):e[6]),f=e[7],f&&(n[7]=f),r&bn&&(n[8]=n[8]==null?e[8]:hn(n[8],e[8])),n[9]==null&&(n[9]=e[9]),n[0]=e[0],n[1]=i,n}function pc(n){var e=[];if(n!=null)for(var t in N(n))e.push(t);return e}function dc(n){return rr.call(n)}function jo(n,e,t){return e=tn(e===s?n.length-1:e,0),function(){for(var r=arguments,i=-1,o=tn(r.length-e,0),a=h(o);++i<o;)a[i]=r[e+i];i=-1;for(var f=h(e+1);++i<e;)f[i]=r[i];return f[e]=t(a),In(n,this,f)}}function ns(n,e){return e.length<2?n:qe(n,Gn(e,0,-1))}function gc(n,e){for(var t=n.length,r=hn(e.length,t),i=yn(n);r--;){var o=e[r];n[r]=pe(o,t)?i[o]:s}return n}function qi(n,e){if(!(e==="constructor"&&typeof n[e]=="function")&&e!="__proto__")return n[e]}var es=rs(So),Wt=Lf||function(n,e){return an.setTimeout(n,e)},ki=rs(Dl);function ts(n,e,t){var r=e+"";return ki(n,oc(r,_c(rc(r),t)))}function rs(n){var e=0,t=0;return function(){var r=Wf(),i=zt-(r-t);if(t=r,i>0){if(++e>=Qe)return arguments[0]}else e=0;return n.apply(s,arguments)}}function Tr(n,e){var t=-1,r=n.length,i=r-1;for(e=e===s?r:e;++t<e;){var o=Ri(t,i),a=n[o];n[o]=n[t],n[t]=a}return n.length=e,n}var is=cc(function(n){var e=[];return n.charCodeAt(0)===46&&e.push(""),n.replace(ia,function(t,r,i,o){e.push(i?o.replace(ha,"$1"):r||t)}),e});function re(n){if(typeof n=="string"||Mn(n))return n;var e=n+"";return e=="0"&&1/n==-ue?"-0":e}function Ze(n){if(n!=null){try{return tr.call(n)}catch{}try{return n+""}catch{}}return""}function _c(n,e){return Dn(Kt,function(t){var r="_."+t[0];e&t[1]&&!Qt(n,r)&&n.push(r)}),n.sort()}function us(n){if(n instanceof W)return n.clone();var e=new Nn(n.__wrapped__,n.__chain__);return e.__actions__=yn(n.__actions__),e.__index__=n.__index__,e.__values__=n.__values__,e}function vc(n,e,t){(t?mn(n,e,t):e===s)?e=1:e=tn(L(e),0);var r=n==null?0:n.length;if(!r||e<1)return[];for(var i=0,o=0,a=h(fr(r/e));i<r;)a[o++]=Gn(n,i,i+=e);return a}function mc(n){for(var e=-1,t=n==null?0:n.length,r=0,i=[];++e<t;){var o=n[e];o&&(i[r++]=o)}return i}function xc(){var n=arguments.length;if(!n)return[];for(var e=h(n-1),t=arguments[0],r=n;r--;)e[r-1]=arguments[r];return Se(I(t)?yn(t):[t],fn(e,1))}var wc=M(function(n,e){return V(n)?Rt(n,fn(e,1,V,!0)):[]}),bc=M(function(n,e){var t=Hn(e);return V(t)&&(t=s),V(n)?Rt(n,fn(e,1,V,!0),S(t,2)):[]}),Cc=M(function(n,e){var t=Hn(e);return V(t)&&(t=s),V(n)?Rt(n,fn(e,1,V,!0),s,t):[]});function yc(n,e,t){var r=n==null?0:n.length;return r?(e=t||e===s?1:L(e),Gn(n,e<0?0:e,r)):[]}function Sc(n,e,t){var r=n==null?0:n.length;return r?(e=t||e===s?1:L(e),e=r-e,Gn(n,0,e<0?0:e)):[]}function Ac(n,e){return n&&n.length?xr(n,S(e,3),!0,!0):[]}function Ec(n,e){return n&&n.length?xr(n,S(e,3),!0):[]}function Tc(n,e,t,r){var i=n==null?0:n.length;return i?(t&&typeof t!="number"&&mn(n,e,t)&&(t=0,r=i),xl(n,e,t,r)):[]}function os(n,e,t){var r=n==null?0:n.length;if(!r)return-1;var i=t==null?0:L(t);return i<0&&(i=tn(r+i,0)),Vt(n,S(e,3),i)}function ss(n,e,t){var r=n==null?0:n.length;if(!r)return-1;var i=r-1;return t!==s&&(i=L(t),i=t<0?tn(r+i,0):hn(i,r-1)),Vt(n,S(e,3),i,!0)}function as(n){var e=n==null?0:n.length;return e?fn(n,1):[]}function Rc(n){var e=n==null?0:n.length;return e?fn(n,ue):[]}function Ic(n,e){var t=n==null?0:n.length;return t?(e=e===s?1:L(e),fn(n,e)):[]}function Lc(n){for(var e=-1,t=n==null?0:n.length,r={};++e<t;){var i=n[e];r[i[0]]=i[1]}return r}function fs(n){return n&&n.length?n[0]:s}function Oc(n,e,t){var r=n==null?0:n.length;if(!r)return-1;var i=t==null?0:L(t);return i<0&&(i=tn(r+i,0)),et(n,e,i)}function Mc(n){var e=n==null?0:n.length;return e?Gn(n,0,-1):[]}var Pc=M(function(n){var e=K(n,Pi);return e.length&&e[0]===n[0]?yi(e):[]}),Wc=M(function(n){var e=Hn(n),t=K(n,Pi);return e===Hn(t)?e=s:t.pop(),t.length&&t[0]===n[0]?yi(t,S(e,2)):[]}),Bc=M(function(n){var e=Hn(n),t=K(n,Pi);return e=typeof e=="function"?e:s,e&&t.pop(),t.length&&t[0]===n[0]?yi(t,s,e):[]});function Fc(n,e){return n==null?"":Mf.call(n,e)}function Hn(n){var e=n==null?0:n.length;return e?n[e-1]:s}function Uc(n,e,t){var r=n==null?0:n.length;if(!r)return-1;var i=r;return t!==s&&(i=L(t),i=i<0?tn(r+i,0):hn(i,r-1)),e===e?_f(n,e,i):Vt(n,Gu,i,!0)}function Dc(n,e){return n&&n.length?wo(n,L(e)):s}var zc=M(ls);function ls(n,e){return n&&n.length&&e&&e.length?Ti(n,e):n}function Nc(n,e,t){return n&&n.length&&e&&e.length?Ti(n,e,S(t,2)):n}function $c(n,e,t){return n&&n.length&&e&&e.length?Ti(n,e,s,t):n}var Gc=he(function(n,e){var t=n==null?0:n.length,r=xi(n,e);return yo(n,K(e,function(i){return pe(i,t)?+i:i}).sort(Po)),r});function Hc(n,e){var t=[];if(!(n&&n.length))return t;var r=-1,i=[],o=n.length;for(e=S(e,3);++r<o;){var a=n[r];e(a,r,n)&&(t.push(a),i.push(r))}return yo(n,i),t}function Zi(n){return n==null?n:Ff.call(n)}function Kc(n,e,t){var r=n==null?0:n.length;return r?(t&&typeof t!="number"&&mn(n,e,t)?(e=0,t=r):(e=e==null?0:L(e),t=t===s?r:L(t)),Gn(n,e,t)):[]}function qc(n,e){return mr(n,e)}function kc(n,e,t){return Li(n,e,S(t,2))}function Zc(n,e){var t=n==null?0:n.length;if(t){var r=mr(n,e);if(r<t&&Xn(n[r],e))return r}return-1}function Yc(n,e){return mr(n,e,!0)}function Xc(n,e,t){return Li(n,e,S(t,2),!0)}function Jc(n,e){var t=n==null?0:n.length;if(t){var r=mr(n,e,!0)-1;if(Xn(n[r],e))return r}return-1}function Qc(n){return n&&n.length?Ao(n):[]}function Vc(n,e){return n&&n.length?Ao(n,S(e,2)):[]}function jc(n){var e=n==null?0:n.length;return e?Gn(n,1,e):[]}function nh(n,e,t){return n&&n.length?(e=t||e===s?1:L(e),Gn(n,0,e<0?0:e)):[]}function eh(n,e,t){var r=n==null?0:n.length;return r?(e=t||e===s?1:L(e),e=r-e,Gn(n,e<0?0:e,r)):[]}function th(n,e){return n&&n.length?xr(n,S(e,3),!1,!0):[]}function rh(n,e){return n&&n.length?xr(n,S(e,3)):[]}var ih=M(function(n){return Re(fn(n,1,V,!0))}),uh=M(function(n){var e=Hn(n);return V(e)&&(e=s),Re(fn(n,1,V,!0),S(e,2))}),oh=M(function(n){var e=Hn(n);return e=typeof e=="function"?e:s,Re(fn(n,1,V,!0),s,e)});function sh(n){return n&&n.length?Re(n):[]}function ah(n,e){return n&&n.length?Re(n,S(e,2)):[]}function fh(n,e){return e=typeof e=="function"?e:s,n&&n.length?Re(n,s,e):[]}function Yi(n){if(!(n&&n.length))return[];var e=0;return n=ye(n,function(t){if(V(t))return e=tn(t.length,e),!0}),ci(e,function(t){return K(n,ai(t))})}function cs(n,e){if(!(n&&n.length))return[];var t=Yi(n);return e==null?t:K(t,function(r){return In(e,s,r)})}var lh=M(function(n,e){return V(n)?Rt(n,e):[]}),ch=M(function(n){return Mi(ye(n,V))}),hh=M(function(n){var e=Hn(n);return V(e)&&(e=s),Mi(ye(n,V),S(e,2))}),ph=M(function(n){var e=Hn(n);return e=typeof e=="function"?e:s,Mi(ye(n,V),s,e)}),dh=M(Yi);function gh(n,e){return Io(n||[],e||[],Tt)}function _h(n,e){return Io(n||[],e||[],Ot)}var vh=M(function(n){var e=n.length,t=e>1?n[e-1]:s;return t=typeof t=="function"?(n.pop(),t):s,cs(n,t)});function hs(n){var e=u(n);return e.__chain__=!0,e}function mh(n,e){return e(n),n}function Rr(n,e){return e(n)}var xh=he(function(n){var e=n.length,t=e?n[0]:0,r=this.__wrapped__,i=function(o){return xi(o,n)};return e>1||this.__actions__.length||!(r instanceof W)||!pe(t)?this.thru(i):(r=r.slice(t,+t+(e?1:0)),r.__actions__.push({func:Rr,args:[i],thisArg:s}),new Nn(r,this.__chain__).thru(function(o){return e&&!o.length&&o.push(s),o}))});function wh(){return hs(this)}function bh(){return new Nn(this.value(),this.__chain__)}function Ch(){this.__values__===s&&(this.__values__=Es(this.value()));var n=this.__index__>=this.__values__.length,e=n?s:this.__values__[this.__index__++];return{done:n,value:e}}function yh(){return this}function Sh(n){for(var e,t=this;t instanceof pr;){var r=us(t);r.__index__=0,r.__values__=s,e?i.__wrapped__=r:e=r;var i=r;t=t.__wrapped__}return i.__wrapped__=n,e}function Ah(){var n=this.__wrapped__;if(n instanceof W){var e=n;return this.__actions__.length&&(e=new W(this)),e=e.reverse(),e.__actions__.push({func:Rr,args:[Zi],thisArg:s}),new Nn(e,this.__chain__)}return this.thru(Zi)}function Eh(){return Ro(this.__wrapped__,this.__actions__)}var Th=wr(function(n,e,t){z.call(n,t)?++n[t]:le(n,t,1)});function Rh(n,e,t){var r=I(n)?Nu:ml;return t&&mn(n,e,t)&&(e=s),r(n,S(e,3))}function Ih(n,e){var t=I(n)?ye:lo;return t(n,S(e,3))}var Lh=zo(os),Oh=zo(ss);function Mh(n,e){return fn(Ir(n,e),1)}function Ph(n,e){return fn(Ir(n,e),ue)}function Wh(n,e,t){return t=t===s?1:L(t),fn(Ir(n,e),t)}function ps(n,e){var t=I(n)?Dn:Te;return t(n,S(e,3))}function ds(n,e){var t=I(n)?Va:fo;return t(n,S(e,3))}var Bh=wr(function(n,e,t){z.call(n,t)?n[t].push(e):le(n,t,[e])});function Fh(n,e,t,r){n=Sn(n)?n:pt(n),t=t&&!r?L(t):0;var i=n.length;return t<0&&(t=tn(i+t,0)),Wr(n)?t<=i&&n.indexOf(e,t)>-1:!!i&&et(n,e,t)>-1}var Uh=M(function(n,e,t){var r=-1,i=typeof e=="function",o=Sn(n)?h(n.length):[];return Te(n,function(a){o[++r]=i?In(e,a,t):It(a,e,t)}),o}),Dh=wr(function(n,e,t){le(n,t,e)});function Ir(n,e){var t=I(n)?K:vo;return t(n,S(e,3))}function zh(n,e,t,r){return n==null?[]:(I(e)||(e=e==null?[]:[e]),t=r?s:t,I(t)||(t=t==null?[]:[t]),bo(n,e,t))}var Nh=wr(function(n,e,t){n[t?0:1].push(e)},function(){return[[],[]]});function $h(n,e,t){var r=I(n)?oi:Ku,i=arguments.length<3;return r(n,S(e,4),t,i,Te)}function Gh(n,e,t){var r=I(n)?ja:Ku,i=arguments.length<3;return r(n,S(e,4),t,i,fo)}function Hh(n,e){var t=I(n)?ye:lo;return t(n,Mr(S(e,3)))}function Kh(n){var e=I(n)?uo:Fl;return e(n)}function qh(n,e,t){(t?mn(n,e,t):e===s)?e=1:e=L(e);var r=I(n)?pl:Ul;return r(n,e)}function kh(n){var e=I(n)?dl:zl;return e(n)}function Zh(n){if(n==null)return 0;if(Sn(n))return Wr(n)?rt(n):n.length;var e=pn(n);return e==_||e==kn?n.size:Ai(n).length}function Yh(n,e,t){var r=I(n)?si:Nl;return t&&mn(n,e,t)&&(e=s),r(n,S(e,3))}var Xh=M(function(n,e){if(n==null)return[];var t=e.length;return t>1&&mn(n,e[0],e[1])?e=[]:t>2&&mn(e[0],e[1],e[2])&&(e=[e[0]]),bo(n,fn(e,1),[])}),Lr=If||function(){return an.Date.now()};function Jh(n,e){if(typeof e!="function")throw new zn(sn);return n=L(n),function(){if(--n<1)return e.apply(this,arguments)}}function gs(n,e,t){return e=t?s:e,e=n&&e==null?n.length:e,ce(n,bn,s,s,s,s,e)}function _s(n,e){var t;if(typeof e!="function")throw new zn(sn);return n=L(n),function(){return--n>0&&(t=e.apply(this,arguments)),n<=1&&(e=s),t}}var Xi=M(function(n,e,t){var r=Q;if(t.length){var i=Ae(t,ct(Xi));r|=Fn}return ce(n,r,e,t,i)}),vs=M(function(n,e,t){var r=Q|jn;if(t.length){var i=Ae(t,ct(vs));r|=Fn}return ce(e,r,n,t,i)});function ms(n,e,t){e=t?s:e;var r=ce(n,Bn,s,s,s,s,s,e);return r.placeholder=ms.placeholder,r}function xs(n,e,t){e=t?s:e;var r=ce(n,Ue,s,s,s,s,s,e);return r.placeholder=xs.placeholder,r}function ws(n,e,t){var r,i,o,a,f,c,d=0,g=!1,m=!1,w=!0;if(typeof n!="function")throw new zn(sn);e=Kn(e)||0,q(t)&&(g=!!t.leading,m="maxWait"in t,o=m?tn(Kn(t.maxWait)||0,e):o,w="trailing"in t?!!t.trailing:w);function C(j){var Jn=r,_e=i;return r=i=s,d=j,a=n.apply(_e,Jn),a}function A(j){return d=j,f=Wt(P,e),g?C(j):a}function O(j){var Jn=j-c,_e=j-d,zs=e-Jn;return m?hn(zs,o-_e):zs}function E(j){var Jn=j-c,_e=j-d;return c===s||Jn>=e||Jn<0||m&&_e>=o}function P(){var j=Lr();if(E(j))return B(j);f=Wt(P,O(j))}function B(j){return f=s,w&&r?C(j):(r=i=s,a)}function Pn(){f!==s&&Lo(f),d=0,r=c=i=f=s}function xn(){return f===s?a:B(Lr())}function Wn(){var j=Lr(),Jn=E(j);if(r=arguments,i=this,c=j,Jn){if(f===s)return A(c);if(m)return Lo(f),f=Wt(P,e),C(c)}return f===s&&(f=Wt(P,e)),a}return Wn.cancel=Pn,Wn.flush=xn,Wn}var Qh=M(function(n,e){return ao(n,1,e)}),Vh=M(function(n,e,t){return ao(n,Kn(e)||0,t)});function jh(n){return ce(n,cn)}function Or(n,e){if(typeof n!="function"||e!=null&&typeof e!="function")throw new zn(sn);var t=function(){var r=arguments,i=e?e.apply(this,r):r[0],o=t.cache;if(o.has(i))return o.get(i);var a=n.apply(this,r);return t.cache=o.set(i,a)||o,a};return t.cache=new(Or.Cache||fe),t}Or.Cache=fe;function Mr(n){if(typeof n!="function")throw new zn(sn);return function(){var e=arguments;switch(e.length){case 0:return!n.call(this);case 1:return!n.call(this,e[0]);case 2:return!n.call(this,e[0],e[1]);case 3:return!n.call(this,e[0],e[1],e[2])}return!n.apply(this,e)}}function np(n){return _s(2,n)}var ep=$l(function(n,e){e=e.length==1&&I(e[0])?K(e[0],Ln(S())):K(fn(e,1),Ln(S()));var t=e.length;return M(function(r){for(var i=-1,o=hn(r.length,t);++i<o;)r[i]=e[i].call(this,r[i]);return In(n,this,r)})}),Ji=M(function(n,e){var t=Ae(e,ct(Ji));return ce(n,Fn,s,e,t)}),bs=M(function(n,e){var t=Ae(e,ct(bs));return ce(n,De,s,e,t)}),tp=he(function(n,e){return ce(n,nn,s,s,s,e)});function rp(n,e){if(typeof n!="function")throw new zn(sn);return e=e===s?e:L(e),M(n,e)}function ip(n,e){if(typeof n!="function")throw new zn(sn);return e=e==null?0:tn(L(e),0),M(function(t){var r=t[e],i=Le(t,0,e);return r&&Se(i,r),In(n,this,i)})}function up(n,e,t){var r=!0,i=!0;if(typeof n!="function")throw new zn(sn);return q(t)&&(r="leading"in t?!!t.leading:r,i="trailing"in t?!!t.trailing:i),ws(n,e,{leading:r,maxWait:e,trailing:i})}function op(n){return gs(n,1)}function sp(n,e){return Ji(Wi(e),n)}function ap(){if(!arguments.length)return[];var n=arguments[0];return I(n)?n:[n]}function fp(n){return $n(n,X)}function lp(n,e){return e=typeof e=="function"?e:s,$n(n,X,e)}function cp(n){return $n(n,Tn|X)}function hp(n,e){return e=typeof e=="function"?e:s,$n(n,Tn|X,e)}function pp(n,e){return e==null||so(n,e,on(e))}function Xn(n,e){return n===e||n!==n&&e!==e}var dp=Sr(Ci),gp=Sr(function(n,e){return n>=e}),Ye=po((function(){return arguments})())?po:function(n){return Y(n)&&z.call(n,"callee")&&!ju.call(n,"callee")},I=h.isArray,_p=Wu?Ln(Wu):Sl;function Sn(n){return n!=null&&Pr(n.length)&&!de(n)}function V(n){return Y(n)&&Sn(n)}function vp(n){return n===!0||n===!1||Y(n)&&vn(n)==be}var Oe=Of||su,mp=Bu?Ln(Bu):Al;function xp(n){return Y(n)&&n.nodeType===1&&!Bt(n)}function wp(n){if(n==null)return!0;if(Sn(n)&&(I(n)||typeof n=="string"||typeof n.splice=="function"||Oe(n)||ht(n)||Ye(n)))return!n.length;var e=pn(n);if(e==_||e==kn)return!n.size;if(Pt(n))return!Ai(n).length;for(var t in n)if(z.call(n,t))return!1;return!0}function bp(n,e){return Lt(n,e)}function Cp(n,e,t){t=typeof t=="function"?t:s;var r=t?t(n,e):s;return r===s?Lt(n,e,s,t):!!r}function Qi(n){if(!Y(n))return!1;var e=vn(n);return e==ze||e==qt||typeof n.message=="string"&&typeof n.name=="string"&&!Bt(n)}function yp(n){return typeof n=="number"&&eo(n)}function de(n){if(!q(n))return!1;var e=vn(n);return e==se||e==kt||e==_t||e==ks}function Cs(n){return typeof n=="number"&&n==L(n)}function Pr(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=ne}function q(n){var e=typeof n;return n!=null&&(e=="object"||e=="function")}function Y(n){return n!=null&&typeof n=="object"}var ys=Fu?Ln(Fu):Tl;function Sp(n,e){return n===e||Si(n,e,$i(e))}function Ap(n,e,t){return t=typeof t=="function"?t:s,Si(n,e,$i(e),t)}function Ep(n){return Ss(n)&&n!=+n}function Tp(n){if(lc(n))throw new R(wn);return go(n)}function Rp(n){return n===null}function Ip(n){return n==null}function Ss(n){return typeof n=="number"||Y(n)&&vn(n)==x}function Bt(n){if(!Y(n)||vn(n)!=G)return!1;var e=or(n);if(e===null)return!0;var t=z.call(e,"constructor")&&e.constructor;return typeof t=="function"&&t instanceof t&&tr.call(t)==Af}var Vi=Uu?Ln(Uu):Rl;function Lp(n){return Cs(n)&&n>=-ne&&n<=ne}var As=Du?Ln(Du):Il;function Wr(n){return typeof n=="string"||!I(n)&&Y(n)&&vn(n)==mt}function Mn(n){return typeof n=="symbol"||Y(n)&&vn(n)==Zt}var ht=zu?Ln(zu):Ll;function Op(n){return n===s}function Mp(n){return Y(n)&&pn(n)==xt}function Pp(n){return Y(n)&&vn(n)==Ys}var Wp=Sr(Ei),Bp=Sr(function(n,e){return n<=e});function Es(n){if(!n)return[];if(Sn(n))return Wr(n)?Zn(n):yn(n);if(Ct&&n[Ct])return pf(n[Ct]());var e=pn(n),t=e==_?pi:e==kn?jt:pt;return t(n)}function ge(n){if(!n)return n===0?n:0;if(n=Kn(n),n===ue||n===-ue){var e=n<0?-1:1;return e*Nr}return n===n?n:0}function L(n){var e=ge(n),t=e%1;return e===e?t?e-t:e:0}function Ts(n){return n?Ke(L(n),0,Rn):0}function Kn(n){if(typeof n=="number")return n;if(Mn(n))return Ve;if(q(n)){var e=typeof n.valueOf=="function"?n.valueOf():n;n=q(e)?e+"":e}if(typeof n!="string")return n===0?n:+n;n=qu(n);var t=ga.test(n);return t||va.test(n)?Xa(n.slice(2),t?2:8):da.test(n)?Ve:+n}function Rs(n){return te(n,An(n))}function Fp(n){return n?Ke(L(n),-ne,ne):n===0?n:0}function D(n){return n==null?"":On(n)}var Up=ft(function(n,e){if(Pt(e)||Sn(e)){te(e,on(e),n);return}for(var t in e)z.call(e,t)&&Tt(n,t,e[t])}),Is=ft(function(n,e){te(e,An(e),n)}),Br=ft(function(n,e,t,r){te(e,An(e),n,r)}),Dp=ft(function(n,e,t,r){te(e,on(e),n,r)}),zp=he(xi);function Np(n,e){var t=at(n);return e==null?t:oo(t,e)}var $p=M(function(n,e){n=N(n);var t=-1,r=e.length,i=r>2?e[2]:s;for(i&&mn(e[0],e[1],i)&&(r=1);++t<r;)for(var o=e[t],a=An(o),f=-1,c=a.length;++f<c;){var d=a[f],g=n[d];(g===s||Xn(g,ut[d])&&!z.call(n,d))&&(n[d]=o[d])}return n}),Gp=M(function(n){return n.push(s,ko),In(Ls,s,n)});function Hp(n,e){return $u(n,S(e,3),ee)}function Kp(n,e){return $u(n,S(e,3),bi)}function qp(n,e){return n==null?n:wi(n,S(e,3),An)}function kp(n,e){return n==null?n:co(n,S(e,3),An)}function Zp(n,e){return n&&ee(n,S(e,3))}function Yp(n,e){return n&&bi(n,S(e,3))}function Xp(n){return n==null?[]:_r(n,on(n))}function Jp(n){return n==null?[]:_r(n,An(n))}function ji(n,e,t){var r=n==null?s:qe(n,e);return r===s?t:r}function Qp(n,e){return n!=null&&Xo(n,e,wl)}function nu(n,e){return n!=null&&Xo(n,e,bl)}var Vp=$o(function(n,e,t){e!=null&&typeof e.toString!="function"&&(e=rr.call(e)),n[e]=t},tu(En)),jp=$o(function(n,e,t){e!=null&&typeof e.toString!="function"&&(e=rr.call(e)),z.call(n,e)?n[e].push(t):n[e]=[t]},S),nd=M(It);function on(n){return Sn(n)?io(n):Ai(n)}function An(n){return Sn(n)?io(n,!0):Ol(n)}function ed(n,e){var t={};return e=S(e,3),ee(n,function(r,i,o){le(t,e(r,i,o),r)}),t}function td(n,e){var t={};return e=S(e,3),ee(n,function(r,i,o){le(t,i,e(r,i,o))}),t}var rd=ft(function(n,e,t){vr(n,e,t)}),Ls=ft(function(n,e,t,r){vr(n,e,t,r)}),id=he(function(n,e){var t={};if(n==null)return t;var r=!1;e=K(e,function(o){return o=Ie(o,n),r||(r=o.length>1),o}),te(n,zi(n),t),r&&(t=$n(t,Tn|Je|X,Vl));for(var i=e.length;i--;)Oi(t,e[i]);return t});function ud(n,e){return Os(n,Mr(S(e)))}var od=he(function(n,e){return n==null?{}:Pl(n,e)});function Os(n,e){if(n==null)return{};var t=K(zi(n),function(r){return[r]});return e=S(e),Co(n,t,function(r,i){return e(r,i[0])})}function sd(n,e,t){e=Ie(e,n);var r=-1,i=e.length;for(i||(i=1,n=s);++r<i;){var o=n==null?s:n[re(e[r])];o===s&&(r=i,o=t),n=de(o)?o.call(n):o}return n}function ad(n,e,t){return n==null?n:Ot(n,e,t)}function fd(n,e,t,r){return r=typeof r=="function"?r:s,n==null?n:Ot(n,e,t,r)}var Ms=Ko(on),Ps=Ko(An);function ld(n,e,t){var r=I(n),i=r||Oe(n)||ht(n);if(e=S(e,4),t==null){var o=n&&n.constructor;i?t=r?new o:[]:q(n)?t=de(o)?at(or(n)):{}:t={}}return(i?Dn:ee)(n,function(a,f,c){return e(t,a,f,c)}),t}function cd(n,e){return n==null?!0:Oi(n,e)}function hd(n,e,t){return n==null?n:To(n,e,Wi(t))}function pd(n,e,t,r){return r=typeof r=="function"?r:s,n==null?n:To(n,e,Wi(t),r)}function pt(n){return n==null?[]:hi(n,on(n))}function dd(n){return n==null?[]:hi(n,An(n))}function gd(n,e,t){return t===s&&(t=e,e=s),t!==s&&(t=Kn(t),t=t===t?t:0),e!==s&&(e=Kn(e),e=e===e?e:0),Ke(Kn(n),e,t)}function _d(n,e,t){return e=ge(e),t===s?(t=e,e=0):t=ge(t),n=Kn(n),Cl(n,e,t)}function vd(n,e,t){if(t&&typeof t!="boolean"&&mn(n,e,t)&&(e=t=s),t===s&&(typeof e=="boolean"?(t=e,e=s):typeof n=="boolean"&&(t=n,n=s)),n===s&&e===s?(n=0,e=1):(n=ge(n),e===s?(e=n,n=0):e=ge(e)),n>e){var r=n;n=e,e=r}if(t||n%1||e%1){var i=to();return hn(n+i*(e-n+Ya("1e-"+((i+"").length-1))),e)}return Ri(n,e)}var md=lt(function(n,e,t){return e=e.toLowerCase(),n+(t?Ws(e):e)});function Ws(n){return eu(D(n).toLowerCase())}function Bs(n){return n=D(n),n&&n.replace(xa,af).replace(Da,"")}function xd(n,e,t){n=D(n),e=On(e);var r=n.length;t=t===s?r:Ke(L(t),0,r);var i=t;return t-=e.length,t>=0&&n.slice(t,i)==e}function wd(n){return n=D(n),n&&js.test(n)?n.replace(cu,ff):n}function bd(n){return n=D(n),n&&ua.test(n)?n.replace(Jr,"\\$&"):n}var Cd=lt(function(n,e,t){return n+(t?"-":"")+e.toLowerCase()}),yd=lt(function(n,e,t){return n+(t?" ":"")+e.toLowerCase()}),Sd=Do("toLowerCase");function Ad(n,e,t){n=D(n),e=L(e);var r=e?rt(n):0;if(!e||r>=e)return n;var i=(e-r)/2;return yr(lr(i),t)+n+yr(fr(i),t)}function Ed(n,e,t){n=D(n),e=L(e);var r=e?rt(n):0;return e&&r<e?n+yr(e-r,t):n}function Td(n,e,t){n=D(n),e=L(e);var r=e?rt(n):0;return e&&r<e?yr(e-r,t)+n:n}function Rd(n,e,t){return t||e==null?e=0:e&&(e=+e),Bf(D(n).replace(Qr,""),e||0)}function Id(n,e,t){return(t?mn(n,e,t):e===s)?e=1:e=L(e),Ii(D(n),e)}function Ld(){var n=arguments,e=D(n[0]);return n.length<3?e:e.replace(n[1],n[2])}var Od=lt(function(n,e,t){return n+(t?"_":"")+e.toLowerCase()});function Md(n,e,t){return t&&typeof t!="number"&&mn(n,e,t)&&(e=t=s),t=t===s?Rn:t>>>0,t?(n=D(n),n&&(typeof e=="string"||e!=null&&!Vi(e))&&(e=On(e),!e&&tt(n))?Le(Zn(n),0,t):n.split(e,t)):[]}var Pd=lt(function(n,e,t){return n+(t?" ":"")+eu(e)});function Wd(n,e,t){return n=D(n),t=t==null?0:Ke(L(t),0,n.length),e=On(e),n.slice(t,t+e.length)==e}function Bd(n,e,t){var r=u.templateSettings;t&&mn(n,e,t)&&(e=s),n=D(n),e=Br({},e,r,qo);var i=Br({},e.imports,r.imports,qo),o=on(i),a=hi(i,o),f,c,d=0,g=e.interpolate||Yt,m="__p += '",w=di((e.escape||Yt).source+"|"+g.source+"|"+(g===hu?pa:Yt).source+"|"+(e.evaluate||Yt).source+"|$","g"),C="//# sourceURL="+(z.call(e,"sourceURL")?(e.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Ha+"]")+`
`;n.replace(w,function(E,P,B,Pn,xn,Wn){return B||(B=Pn),m+=n.slice(d,Wn).replace(wa,lf),P&&(f=!0,m+=`' +
__e(`+P+`) +
'`),xn&&(c=!0,m+=`';
`+xn+`;
__p += '`),B&&(m+=`' +
((__t = (`+B+`)) == null ? '' : __t) +
'`),d=Wn+E.length,E}),m+=`';
`;var A=z.call(e,"variable")&&e.variable;if(!A)m=`with (obj) {
`+m+`
}
`;else if(ca.test(A))throw new R(Xe);m=(c?m.replace(Xs,""):m).replace(Js,"$1").replace(Qs,"$1;"),m="function("+(A||"obj")+`) {
`+(A?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(f?", __e = _.escape":"")+(c?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+m+`return __p
}`;var O=Us(function(){return U(o,C+"return "+m).apply(s,a)});if(O.source=m,Qi(O))throw O;return O}function Fd(n){return D(n).toLowerCase()}function Ud(n){return D(n).toUpperCase()}function Dd(n,e,t){if(n=D(n),n&&(t||e===s))return qu(n);if(!n||!(e=On(e)))return n;var r=Zn(n),i=Zn(e),o=ku(r,i),a=Zu(r,i)+1;return Le(r,o,a).join("")}function zd(n,e,t){if(n=D(n),n&&(t||e===s))return n.slice(0,Xu(n)+1);if(!n||!(e=On(e)))return n;var r=Zn(n),i=Zu(r,Zn(e))+1;return Le(r,0,i).join("")}function Nd(n,e,t){if(n=D(n),n&&(t||e===s))return n.replace(Qr,"");if(!n||!(e=On(e)))return n;var r=Zn(n),i=ku(r,Zn(e));return Le(r,i).join("")}function $d(n,e){var t=Cn,r=Dt;if(q(e)){var i="separator"in e?e.separator:i;t="length"in e?L(e.length):t,r="omission"in e?On(e.omission):r}n=D(n);var o=n.length;if(tt(n)){var a=Zn(n);o=a.length}if(t>=o)return n;var f=t-rt(r);if(f<1)return r;var c=a?Le(a,0,f).join(""):n.slice(0,f);if(i===s)return c+r;if(a&&(f+=c.length-f),Vi(i)){if(n.slice(f).search(i)){var d,g=c;for(i.global||(i=di(i.source,D(pu.exec(i))+"g")),i.lastIndex=0;d=i.exec(g);)var m=d.index;c=c.slice(0,m===s?f:m)}}else if(n.indexOf(On(i),f)!=f){var w=c.lastIndexOf(i);w>-1&&(c=c.slice(0,w))}return c+r}function Gd(n){return n=D(n),n&&Vs.test(n)?n.replace(lu,vf):n}var Hd=lt(function(n,e,t){return n+(t?" ":"")+e.toUpperCase()}),eu=Do("toUpperCase");function Fs(n,e,t){return n=D(n),e=t?s:e,e===s?hf(n)?wf(n):tf(n):n.match(e)||[]}var Us=M(function(n,e){try{return In(n,s,e)}catch(t){return Qi(t)?t:new R(t)}}),Kd=he(function(n,e){return Dn(e,function(t){t=re(t),le(n,t,Xi(n[t],n))}),n});function qd(n){var e=n==null?0:n.length,t=S();return n=e?K(n,function(r){if(typeof r[1]!="function")throw new zn(sn);return[t(r[0]),r[1]]}):[],M(function(r){for(var i=-1;++i<e;){var o=n[i];if(In(o[0],this,r))return In(o[1],this,r)}})}function kd(n){return vl($n(n,Tn))}function tu(n){return function(){return n}}function Zd(n,e){return n==null||n!==n?e:n}var Yd=No(),Xd=No(!0);function En(n){return n}function ru(n){return _o(typeof n=="function"?n:$n(n,Tn))}function Jd(n){return mo($n(n,Tn))}function Qd(n,e){return xo(n,$n(e,Tn))}var Vd=M(function(n,e){return function(t){return It(t,n,e)}}),jd=M(function(n,e){return function(t){return It(n,t,e)}});function iu(n,e,t){var r=on(e),i=_r(e,r);t==null&&!(q(e)&&(i.length||!r.length))&&(t=e,e=n,n=this,i=_r(e,on(e)));var o=!(q(t)&&"chain"in t)||!!t.chain,a=de(n);return Dn(i,function(f){var c=e[f];n[f]=c,a&&(n.prototype[f]=function(){var d=this.__chain__;if(o||d){var g=n(this.__wrapped__),m=g.__actions__=yn(this.__actions__);return m.push({func:c,args:arguments,thisArg:n}),g.__chain__=d,g}return c.apply(n,Se([this.value()],arguments))})}),n}function ng(){return an._===this&&(an._=Ef),this}function uu(){}function eg(n){return n=L(n),M(function(e){return wo(e,n)})}var tg=Fi(K),rg=Fi(Nu),ig=Fi(si);function Ds(n){return Hi(n)?ai(re(n)):Wl(n)}function ug(n){return function(e){return n==null?s:qe(n,e)}}var og=Go(),sg=Go(!0);function ou(){return[]}function su(){return!1}function ag(){return{}}function fg(){return""}function lg(){return!0}function cg(n,e){if(n=L(n),n<1||n>ne)return[];var t=Rn,r=hn(n,Rn);e=S(e),n-=Rn;for(var i=ci(r,e);++t<n;)e(t);return i}function hg(n){return I(n)?K(n,re):Mn(n)?[n]:yn(is(D(n)))}function pg(n){var e=++Sf;return D(n)+e}var dg=Cr(function(n,e){return n+e},0),gg=Ui("ceil"),_g=Cr(function(n,e){return n/e},1),vg=Ui("floor");function mg(n){return n&&n.length?gr(n,En,Ci):s}function xg(n,e){return n&&n.length?gr(n,S(e,2),Ci):s}function wg(n){return Hu(n,En)}function bg(n,e){return Hu(n,S(e,2))}function Cg(n){return n&&n.length?gr(n,En,Ei):s}function yg(n,e){return n&&n.length?gr(n,S(e,2),Ei):s}var Sg=Cr(function(n,e){return n*e},1),Ag=Ui("round"),Eg=Cr(function(n,e){return n-e},0);function Tg(n){return n&&n.length?li(n,En):0}function Rg(n,e){return n&&n.length?li(n,S(e,2)):0}return u.after=Jh,u.ary=gs,u.assign=Up,u.assignIn=Is,u.assignInWith=Br,u.assignWith=Dp,u.at=zp,u.before=_s,u.bind=Xi,u.bindAll=Kd,u.bindKey=vs,u.castArray=ap,u.chain=hs,u.chunk=vc,u.compact=mc,u.concat=xc,u.cond=qd,u.conforms=kd,u.constant=tu,u.countBy=Th,u.create=Np,u.curry=ms,u.curryRight=xs,u.debounce=ws,u.defaults=$p,u.defaultsDeep=Gp,u.defer=Qh,u.delay=Vh,u.difference=wc,u.differenceBy=bc,u.differenceWith=Cc,u.drop=yc,u.dropRight=Sc,u.dropRightWhile=Ac,u.dropWhile=Ec,u.fill=Tc,u.filter=Ih,u.flatMap=Mh,u.flatMapDeep=Ph,u.flatMapDepth=Wh,u.flatten=as,u.flattenDeep=Rc,u.flattenDepth=Ic,u.flip=jh,u.flow=Yd,u.flowRight=Xd,u.fromPairs=Lc,u.functions=Xp,u.functionsIn=Jp,u.groupBy=Bh,u.initial=Mc,u.intersection=Pc,u.intersectionBy=Wc,u.intersectionWith=Bc,u.invert=Vp,u.invertBy=jp,u.invokeMap=Uh,u.iteratee=ru,u.keyBy=Dh,u.keys=on,u.keysIn=An,u.map=Ir,u.mapKeys=ed,u.mapValues=td,u.matches=Jd,u.matchesProperty=Qd,u.memoize=Or,u.merge=rd,u.mergeWith=Ls,u.method=Vd,u.methodOf=jd,u.mixin=iu,u.negate=Mr,u.nthArg=eg,u.omit=id,u.omitBy=ud,u.once=np,u.orderBy=zh,u.over=tg,u.overArgs=ep,u.overEvery=rg,u.overSome=ig,u.partial=Ji,u.partialRight=bs,u.partition=Nh,u.pick=od,u.pickBy=Os,u.property=Ds,u.propertyOf=ug,u.pull=zc,u.pullAll=ls,u.pullAllBy=Nc,u.pullAllWith=$c,u.pullAt=Gc,u.range=og,u.rangeRight=sg,u.rearg=tp,u.reject=Hh,u.remove=Hc,u.rest=rp,u.reverse=Zi,u.sampleSize=qh,u.set=ad,u.setWith=fd,u.shuffle=kh,u.slice=Kc,u.sortBy=Xh,u.sortedUniq=Qc,u.sortedUniqBy=Vc,u.split=Md,u.spread=ip,u.tail=jc,u.take=nh,u.takeRight=eh,u.takeRightWhile=th,u.takeWhile=rh,u.tap=mh,u.throttle=up,u.thru=Rr,u.toArray=Es,u.toPairs=Ms,u.toPairsIn=Ps,u.toPath=hg,u.toPlainObject=Rs,u.transform=ld,u.unary=op,u.union=ih,u.unionBy=uh,u.unionWith=oh,u.uniq=sh,u.uniqBy=ah,u.uniqWith=fh,u.unset=cd,u.unzip=Yi,u.unzipWith=cs,u.update=hd,u.updateWith=pd,u.values=pt,u.valuesIn=dd,u.without=lh,u.words=Fs,u.wrap=sp,u.xor=ch,u.xorBy=hh,u.xorWith=ph,u.zip=dh,u.zipObject=gh,u.zipObjectDeep=_h,u.zipWith=vh,u.entries=Ms,u.entriesIn=Ps,u.extend=Is,u.extendWith=Br,iu(u,u),u.add=dg,u.attempt=Us,u.camelCase=md,u.capitalize=Ws,u.ceil=gg,u.clamp=gd,u.clone=fp,u.cloneDeep=cp,u.cloneDeepWith=hp,u.cloneWith=lp,u.conformsTo=pp,u.deburr=Bs,u.defaultTo=Zd,u.divide=_g,u.endsWith=xd,u.eq=Xn,u.escape=wd,u.escapeRegExp=bd,u.every=Rh,u.find=Lh,u.findIndex=os,u.findKey=Hp,u.findLast=Oh,u.findLastIndex=ss,u.findLastKey=Kp,u.floor=vg,u.forEach=ps,u.forEachRight=ds,u.forIn=qp,u.forInRight=kp,u.forOwn=Zp,u.forOwnRight=Yp,u.get=ji,u.gt=dp,u.gte=gp,u.has=Qp,u.hasIn=nu,u.head=fs,u.identity=En,u.includes=Fh,u.indexOf=Oc,u.inRange=_d,u.invoke=nd,u.isArguments=Ye,u.isArray=I,u.isArrayBuffer=_p,u.isArrayLike=Sn,u.isArrayLikeObject=V,u.isBoolean=vp,u.isBuffer=Oe,u.isDate=mp,u.isElement=xp,u.isEmpty=wp,u.isEqual=bp,u.isEqualWith=Cp,u.isError=Qi,u.isFinite=yp,u.isFunction=de,u.isInteger=Cs,u.isLength=Pr,u.isMap=ys,u.isMatch=Sp,u.isMatchWith=Ap,u.isNaN=Ep,u.isNative=Tp,u.isNil=Ip,u.isNull=Rp,u.isNumber=Ss,u.isObject=q,u.isObjectLike=Y,u.isPlainObject=Bt,u.isRegExp=Vi,u.isSafeInteger=Lp,u.isSet=As,u.isString=Wr,u.isSymbol=Mn,u.isTypedArray=ht,u.isUndefined=Op,u.isWeakMap=Mp,u.isWeakSet=Pp,u.join=Fc,u.kebabCase=Cd,u.last=Hn,u.lastIndexOf=Uc,u.lowerCase=yd,u.lowerFirst=Sd,u.lt=Wp,u.lte=Bp,u.max=mg,u.maxBy=xg,u.mean=wg,u.meanBy=bg,u.min=Cg,u.minBy=yg,u.stubArray=ou,u.stubFalse=su,u.stubObject=ag,u.stubString=fg,u.stubTrue=lg,u.multiply=Sg,u.nth=Dc,u.noConflict=ng,u.noop=uu,u.now=Lr,u.pad=Ad,u.padEnd=Ed,u.padStart=Td,u.parseInt=Rd,u.random=vd,u.reduce=$h,u.reduceRight=Gh,u.repeat=Id,u.replace=Ld,u.result=sd,u.round=Ag,u.runInContext=l,u.sample=Kh,u.size=Zh,u.snakeCase=Od,u.some=Yh,u.sortedIndex=qc,u.sortedIndexBy=kc,u.sortedIndexOf=Zc,u.sortedLastIndex=Yc,u.sortedLastIndexBy=Xc,u.sortedLastIndexOf=Jc,u.startCase=Pd,u.startsWith=Wd,u.subtract=Eg,u.sum=Tg,u.sumBy=Rg,u.template=Bd,u.times=cg,u.toFinite=ge,u.toInteger=L,u.toLength=Ts,u.toLower=Fd,u.toNumber=Kn,u.toSafeInteger=Fp,u.toString=D,u.toUpper=Ud,u.trim=Dd,u.trimEnd=zd,u.trimStart=Nd,u.truncate=$d,u.unescape=Gd,u.uniqueId=pg,u.upperCase=Hd,u.upperFirst=eu,u.each=ps,u.eachRight=ds,u.first=fs,iu(u,(function(){var n={};return ee(u,function(e,t){z.call(u.prototype,t)||(n[t]=e)}),n})(),{chain:!1}),u.VERSION=_n,Dn(["bind","bindKey","curry","curryRight","partial","partialRight"],function(n){u[n].placeholder=u}),Dn(["drop","take"],function(n,e){W.prototype[n]=function(t){t=t===s?1:tn(L(t),0);var r=this.__filtered__&&!e?new W(this):this.clone();return r.__filtered__?r.__takeCount__=hn(t,r.__takeCount__):r.__views__.push({size:hn(t,Rn),type:n+(r.__dir__<0?"Right":"")}),r},W.prototype[n+"Right"]=function(t){return this.reverse()[n](t).reverse()}}),Dn(["filter","map","takeWhile"],function(n,e){var t=e+1,r=t==Nt||t==$t;W.prototype[n]=function(i){var o=this.clone();return o.__iteratees__.push({iteratee:S(i,3),type:t}),o.__filtered__=o.__filtered__||r,o}}),Dn(["head","last"],function(n,e){var t="take"+(e?"Right":"");W.prototype[n]=function(){return this[t](1).value()[0]}}),Dn(["initial","tail"],function(n,e){var t="drop"+(e?"":"Right");W.prototype[n]=function(){return this.__filtered__?new W(this):this[t](1)}}),W.prototype.compact=function(){return this.filter(En)},W.prototype.find=function(n){return this.filter(n).head()},W.prototype.findLast=function(n){return this.reverse().find(n)},W.prototype.invokeMap=M(function(n,e){return typeof n=="function"?new W(this):this.map(function(t){return It(t,n,e)})}),W.prototype.reject=function(n){return this.filter(Mr(S(n)))},W.prototype.slice=function(n,e){n=L(n);var t=this;return t.__filtered__&&(n>0||e<0)?new W(t):(n<0?t=t.takeRight(-n):n&&(t=t.drop(n)),e!==s&&(e=L(e),t=e<0?t.dropRight(-e):t.take(e-n)),t)},W.prototype.takeRightWhile=function(n){return this.reverse().takeWhile(n).reverse()},W.prototype.toArray=function(){return this.take(Rn)},ee(W.prototype,function(n,e){var t=/^(?:filter|find|map|reject)|While$/.test(e),r=/^(?:head|last)$/.test(e),i=u[r?"take"+(e=="last"?"Right":""):e],o=r||/^find/.test(e);i&&(u.prototype[e]=function(){var a=this.__wrapped__,f=r?[1]:arguments,c=a instanceof W,d=f[0],g=c||I(a),m=function(P){var B=i.apply(u,Se([P],f));return r&&w?B[0]:B};g&&t&&typeof d=="function"&&d.length!=1&&(c=g=!1);var w=this.__chain__,C=!!this.__actions__.length,A=o&&!w,O=c&&!C;if(!o&&g){a=O?a:new W(this);var E=n.apply(a,f);return E.__actions__.push({func:Rr,args:[m],thisArg:s}),new Nn(E,w)}return A&&O?n.apply(this,f):(E=this.thru(m),A?r?E.value()[0]:E.value():E)})}),Dn(["pop","push","shift","sort","splice","unshift"],function(n){var e=nr[n],t=/^(?:push|sort|unshift)$/.test(n)?"tap":"thru",r=/^(?:pop|shift)$/.test(n);u.prototype[n]=function(){var i=arguments;if(r&&!this.__chain__){var o=this.value();return e.apply(I(o)?o:[],i)}return this[t](function(a){return e.apply(I(a)?a:[],i)})}}),ee(W.prototype,function(n,e){var t=u[e];if(t){var r=t.name+"";z.call(st,r)||(st[r]=[]),st[r].push({name:e,func:t})}}),st[br(s,jn).name]=[{name:"wrapper",func:s}],W.prototype.clone=Gf,W.prototype.reverse=Hf,W.prototype.value=Kf,u.prototype.at=xh,u.prototype.chain=wh,u.prototype.commit=bh,u.prototype.next=Ch,u.prototype.plant=Sh,u.prototype.reverse=Ah,u.prototype.toJSON=u.prototype.valueOf=u.prototype.value=Eh,u.prototype.first=u.prototype.head,Ct&&(u.prototype[Ct]=yh),u}),it=bf();Ne?((Ne.exports=it)._=it,ri._=it):an._=it}).call(f_)})(Ut,Ut.exports)),Ut.exports}var c_=l_();function h_(Qn,F){const s=ln(null),_n=ln(!1),Vn=ln(0),wn=async(X,Z)=>{if(X.word_count===void 0||X.word_count<0)return;const J=Date.now();if(!(J-Vn.value<3e3)){_n.value=!0,Vn.value=J;try{const Q=await fetch(route("projects.manual-editor.progressive-guidance",{project:Qn,chapter:F}),{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.content||""},body:JSON.stringify({analysis:{...X,content:Z}})});if(Q.ok){const jn=await Q.json();s.value=jn,Fe()}}catch(Q){console.error("Failed to load progressive guidance:",Q)}finally{_n.value=!1}}},sn=c_.debounce(wn,5e3),Xe=X=>{if(!s.value)return;const Z=s.value.next_steps.find(J=>J.id===X);Z&&(Z.completed=!Z.completed,xe())},xe=()=>{if(!s.value)return;const X=s.value.next_steps.filter(J=>J.completed).map(J=>J.id),Z=`progressive-guidance-${Qn}-${F}`;localStorage.setItem(Z,JSON.stringify(X))},Fe=()=>{if(!s.value)return;const X=`progressive-guidance-${Qn}-${F}`,Z=localStorage.getItem(X);if(Z)try{const J=JSON.parse(Z);s.value.next_steps.forEach(Q=>{J.includes(Q.id)&&(Q.completed=!0)})}catch(J){console.error("Failed to parse completed steps:",J)}};return{guidance:s,isLoadingGuidance:_n,requestGuidance:wn,debouncedRequestGuidance:sn,toggleStep:Xe,clearCompletedSteps:()=>{if(!s.value)return;s.value.next_steps.forEach(Z=>{Z.completed=!1});const X=`progressive-guidance-${Qn}-${F}`;localStorage.removeItem(X)},getCompletionPercentage:()=>s.value?.completion_percentage||0,getCurrentStageLabel:()=>s.value?.stage_label||"Getting Started"}}const p_={class:"manual-editor h-screen flex flex-col bg-background dark:bg-background transition-colors duration-300"},d_={class:"md:hidden border-b h-14 px-3 flex justify-between items-center bg-background/80 backdrop-blur-md sticky top-0 z-50 transition-all duration-200"},g_={class:"flex items-center gap-2"},__={class:"flex flex-col justify-center min-w-0 flex-1 mx-2"},v_={class:"items-center gap-2 text-xs font-medium text-muted-foreground mb-1 hidden sm:flex"},m_={class:"flex items-center gap-2 -ml-1"},x_={class:"font-bold text-base text-foreground truncate"},w_={class:"truncate"},b_={class:"flex gap-2 items-center"},C_={class:"hidden md:flex flex-col w-full z-50 sticky top-0 bg-background/80 backdrop-blur-md transition-all duration-200 border-b"},y_={class:"h-10 border-b border-border/40 flex items-center justify-center px-4 bg-background/60 relative"},S_={class:"flex items-center gap-2"},A_={class:"flex items-center gap-1 absolute right-4"},E_={class:"h-12 flex items-center justify-between px-4 bg-background/40"},T_={class:"flex items-center gap-3"},R_={class:"flex items-center gap-1"},I_={class:"flex items-center gap-2 px-3 py-1.5 rounded-full bg-muted/30 border border-border/40"},L_={class:"flex items-center gap-1.5"},O_={class:"text-xs font-medium text-muted-foreground"},M_={key:0,class:"flex items-center gap-1.5"},P_={key:1,class:"text-xs text-muted-foreground"},W_={class:"flex items-center gap-3"},B_={class:"flex items-center gap-1 bg-muted/30 p-1 rounded-full border border-border/40"},F_={class:"text-xs font-medium"},U_={class:"w-full bg-background border-b px-3 md:px-6 py-2 flex flex-col gap-1"},D_={class:"flex justify-between items-center text-xs text-muted-foreground mb-1"},z_={class:"flex-1 flex overflow-hidden"},N_={key:0,class:"w-[320px] border-r bg-background/80 backdrop-blur-xl border-border/50 shadow-xl z-20 overflow-y-auto custom-scrollbar"},$_={class:"p-4"},G_={class:"mb-3"},H_={class:"text-xs text-muted-foreground"},K_={class:"flex-1 flex flex-col overflow-hidden"},q_={class:"flex-1 overflow-auto p-2 md:p-6 bg-background"},k_={key:0,class:"w-[400px] border-l bg-background/80 backdrop-blur-xl border-border/50 shadow-2xl z-20 overflow-y-auto custom-scrollbar flex flex-col"},Z_={class:"p-4 space-y-6"},Y_={key:0,class:"space-y-2"},X_={class:"space-y-2"},J_={class:"border-t p-2 md:p-3 flex flex-col gap-3 text-xs md:text-sm bg-muted/30"},Q_={class:"flex flex-col sm:flex-row justify-between gap-3 sm:gap-2 items-start sm:items-center w-full"},V_={class:"flex gap-2 md:gap-4 flex-wrap items-center"},j_={class:"text-muted-foreground"},n0={class:"text-foreground"},e0={key:0,class:"text-muted-foreground hidden sm:inline"},t0={class:"text-foreground"},r0={key:1,class:"text-muted-foreground hidden md:inline"},i0={class:"text-foreground"},u0={key:2,class:"text-muted-foreground hidden lg:inline"},o0={class:"flex gap-2 items-center w-full sm:w-auto"},s0={class:"text-xs font-medium"},a0=Ig({__name:"ManualEditor",props:{project:{},chapter:{},allChapters:{},facultyChapters:{},currentSuggestion:{},contextAnalysis:{},chatHistory:{}},setup(Qn){const F=Qn,s=Lg();Ur(()=>s.props?.flash,_=>{_&&(console.log("🔔 Flash message received:",_),_.success&&(console.log("✅ Showing success toast:",_.success),me.success(_.success)),_.error&&(console.log("❌ Showing error toast:",_.error),me.error(_.error)))},{deep:!0,immediate:!0});const{content:_n,isDirty:Vn,isSaving:wn,lastSaved:sn,updateContent:Xe,manualSave:xe}=Ug(F.chapter,F.project.slug),{currentSuggestion:Fe,currentAnalysis:k,isAnalyzing:Tn,saveSuggestion:Je,clearSuggestion:X,applySuggestion:Z}=Dg(F.chapter,F.currentSuggestion,_n);Kg(F.chapter.content||"");const J=ln(!1),Q=ln(F.chapter.title||"");ln(!1),ln(!1),ln("");const jn=()=>{J.value=!J.value};Ft(()=>{const _=Q.value?.trim(),x=_n.value?.trim();return!!(_&&_.length>0&&x&&x.length>50)});const{guidance:gt,isLoadingGuidance:Bn,debouncedRequestGuidance:Ue,toggleStep:Fn}=h_(F.project.slug,F.chapter.chapter_number),De=()=>typeof window<"u"&&window.innerWidth<1024,bn=(_,x)=>{try{const Ce=localStorage.getItem(_);return Ce!==null?Ce==="true":x}catch{return x}},nn=ln(De()),cn=ln(bn("manualEditor_showLeftSidebar",!nn.value)),Cn=ln(bn("manualEditor_showRightSidebar",!nn.value)),Dt=ln("");ln(!1),ln([]),ln(!1);const Qe=ln(!0),zt=ln(!1),Nt=async()=>{me.info("Fullscreen temporarily disabled")},zr=()=>{Me.visit(Pe("projects.analysis",{project:F.project.slug}))};Ns(()=>{}),$s(()=>{});const{isDark:$t,toggle:ue}=Og(),ne=Ft(()=>{const _=k.value?.word_count??F.chapter.word_count,x=F.chapter.target_word_count||1e3;return Math.min(_/x*100,100)});Ft(()=>wn.value?"Saving...":sn.value?`Saved ${sn.value}`:"Not saved");const Nr=()=>{cn.value=!cn.value},Ve=()=>{Cn.value=!Cn.value};Ur(cn,_=>{if(!nn.value)try{localStorage.setItem("manualEditor_showLeftSidebar",String(_))}catch(x){console.error("Failed to save left sidebar state:",x)}}),Ur(Cn,_=>{if(!nn.value)try{localStorage.setItem("manualEditor_showRightSidebar",String(_))}catch(x){console.error("Failed to save right sidebar state:",x)}});const Rn=_=>{(_.ctrlKey||_.metaKey)&&_.key==="s"&&(_.preventDefault(),se())};Ns(()=>{nn.value=window.innerWidth<1024,nn.value&&(cn.value=!1,Cn.value=!1);const _=()=>{const x=nn.value;nn.value=window.innerWidth<1024,x!==nn.value&&(nn.value?(cn.value=!1,Cn.value=!1):(cn.value=bn("manualEditor_showLeftSidebar",!0),Cn.value=bn("manualEditor_showRightSidebar",!0)))};window.addEventListener("resize",_),window.addEventListener("keydown",Rn),$s(()=>{window.removeEventListener("resize",_),window.removeEventListener("keydown",Rn)})}),Ur(()=>k.value,_=>{_&&Ue({word_count:_.word_count,citation_count:_.citation_count,table_count:_.table_count,figure_count:_.figure_count,claim_count:_.claim_count,has_introduction:_.has_introduction,has_conclusion:_.has_conclusion,detected_issues:_.detected_issues,quality_metrics:_.quality_metrics},_n.value)},{deep:!0});const Gt=_=>{console.log("Improved text:",_)},Ht=_=>{console.log("Expanded text:",_)},Kt=_=>{console.log("Citation suggestions:",_)},oe=_=>{console.log("Alternative phrasings:",_)},we=Ft(()=>F.allChapters.find(_=>_.chapter_number===F.chapter.chapter_number-1)),_t=Ft(()=>F.allChapters.find(_=>_.chapter_number===F.chapter.chapter_number+1)),be=_=>{const x=_n.value+` ${_}`;Xe(x),me.success("Citation appended to content")},qn=_=>{Vn.value&&!confirm("You have unsaved changes. Are you sure you want to switch chapters?")||Me.visit(Pe("projects.manual-editor.show",{project:F.project.slug,chapter:_}))},qt=()=>{const _=F.chapter.chapter_number+1;F.allChapters.find(Ce=>Ce.chapter_number===_)?qn(_):me.info("Please create the next chapter from the dashboard first.")},ze=_=>{confirm("Are you sure you want to delete this chapter?")&&Me.delete(Pe("chapters.destroy",{project:F.project.slug,chapter:F.allChapters.find(x=>x.id===_)?.slug}),{onSuccess:()=>me.success("Chapter deleted")})},se=async()=>{try{await xe(),me.success("Chapter saved successfully")}catch{me.error("Failed to save chapter")}},kt=async()=>{console.log("🔵 [MARK COMPLETE] Function called"),console.log("🔵 [MARK COMPLETE] Current word count:",k.value?.word_count??F.chapter.word_count);try{console.log("🔵 [MARK COMPLETE] Saving chapter..."),await xe(),console.log("✅ [MARK COMPLETE] Chapter saved");const _=Pe("projects.manual-editor.mark-complete",{project:F.project.slug,chapter:F.chapter.chapter_number});console.log("🔵 [MARK COMPLETE] Posting to:",_),Me.post(_,{},{onSuccess:()=>{console.log("✅ [MARK COMPLETE] Request successful")},onError:x=>{console.error("❌ [MARK COMPLETE] Request failed:",x)}})}catch(_){console.error("❌ [MARK COMPLETE] Error:",_),me.error("Failed to save chapter before marking complete")}};return(_,x)=>{const Ce=Mg("Badge");return rn(),ve(Wg,null,[T(v(Pg),{title:`${_.chapter.title} - Manual Editor`},null,8,["title"]),y("div",p_,[y("header",d_,[y("div",g_,[T(v(gn),{variant:"ghost",size:"icon",class:"h-8 w-8 text-zinc-700 dark:text-zinc-300 hover:text-foreground",onClick:x[0]||(x[0]=G=>v(Me).visit(v(Pe)("projects.show",_.project.slug))),title:"Back to Project"},{default:un(()=>[T(v(Hs),{class:"w-4 h-4"})]),_:1}),T(v(Be),{orientation:"vertical",class:"h-6"}),T(v(gn),{onClick:x[1]||(x[1]=G=>cn.value=!0),variant:"ghost",size:"icon",class:"h-8 w-8 lg:hidden text-muted-foreground hover:text-foreground",title:"Open Chapter Navigation"},{default:un(()=>[T(v(Jg),{class:"w-4 h-4"})]),_:1})]),y("div",__,[y("div",v_,[y("span",{class:"hover:text-foreground transition-colors cursor-pointer truncate",onClick:x[2]||(x[2]=G=>v(Me).visit(v(Pe)("projects.show",_.project.slug)))},dn(_.project.title),1)]),y("div",m_,[y("div",x_,[y("span",w_,"Ch. "+dn(_.chapter.chapter_number),1)])])]),y("div",b_,[T(v(gn),{variant:"ghost",size:"icon",class:"h-8 w-8",onClick:se,disabled:v(wn),title:"Save"},{default:un(()=>[T(v(au),{class:"w-4 h-4"})]),_:1},8,["disabled"]),T(v(Be),{orientation:"vertical",class:"h-6 mx-1 opacity-50"}),T(v(gn),{onClick:x[3]||(x[3]=G=>Cn.value=!0),variant:"ghost",size:"icon",class:"h-8 w-8 text-muted-foreground hover:text-foreground",title:"Open Tools"},{default:un(()=>[T(v(Ks),{class:"w-4 h-4"})]),_:1})])]),y("div",C_,[y("div",y_,[y("div",S_,[y("h1",{class:"text-sm font-bold text-foreground cursor-pointer hover:text-primary transition-colors",onClick:x[4]||(x[4]=G=>v(Me).visit(v(Pe)("projects.show",_.project.slug)))},dn(_.project.title),1),T(Ce,{variant:"secondary",class:"h-5 px-2 text-[10px] rounded-full"},{default:un(()=>[dt("Ch "+dn(_.chapter.chapter_number),1)]),_:1})]),y("div",A_,[we.value?(rn(),ie(v(gn),{key:0,variant:"ghost",size:"sm",class:"h-6 px-2 text-zinc-500 hover:text-foreground gap-1 rounded-full text-[10px]",onClick:x[5]||(x[5]=G=>qn(we.value.chapter_number)),title:`Previous: ${we.value.title}`},{default:un(()=>[T(v(Qg),{class:"w-3 h-3"}),x[12]||(x[12]=dt(" Prev ",-1))]),_:1},8,["title"])):We("",!0),_t.value?(rn(),ie(v(gn),{key:1,variant:"ghost",size:"sm",class:"h-6 px-2 text-zinc-500 hover:text-foreground gap-1 rounded-full text-[10px]",onClick:x[6]||(x[6]=G=>qn(_t.value.chapter_number)),title:`Next: ${_t.value.title}`},{default:un(()=>[x[13]||(x[13]=dt(" Next ",-1)),T(v(Vg),{class:"w-3 h-3"})]),_:1},8,["title"])):We("",!0)])]),y("div",E_,[y("div",T_,[y("div",R_,[T(v(gn),{variant:"ghost",size:"icon",class:"h-8 w-8 text-zinc-700 dark:text-zinc-300 hover:text-foreground rounded-full",onClick:x[7]||(x[7]=G=>v(Me).visit(v(Pe)("projects.show",_.project.slug))),title:"Back to Project"},{default:un(()=>[T(v(Hs),{class:"w-4 h-4"})]),_:1}),x[14]||(x[14]=y("div",{class:"h-4 w-px bg-border/50 mx-1"},null,-1)),T(v(gn),{onClick:Nr,variant:"ghost",size:"icon",class:Dr(["h-8 w-8 transition-all duration-300 rounded-full",cn.value?"text-primary":"text-zinc-700 dark:text-zinc-300 hover:text-foreground"]),title:"Toggle Chapter Navigation"},{default:un(()=>[cn.value?(rn(),ie(v(jg),{key:0,class:"w-4 h-4"})):(rn(),ie(v(n_),{key:1,class:"w-4 h-4"}))]),_:1},8,["class"])]),x[16]||(x[16]=y("div",{class:"h-4 w-px bg-border/50"},null,-1)),y("div",I_,[y("div",L_,[y("div",{class:Dr(["w-2 h-2 rounded-full transition-colors duration-300",v(Vn)?"bg-amber-500 animate-pulse":"bg-emerald-500"])},null,2),y("span",O_,dn(v(Vn)?"Unsaved":"Saved"),1)]),T(v(Be),{orientation:"vertical",class:"h-3"}),v(Tn)?(rn(),ve("div",M_,[T(v(e_),{class:"w-3 h-3 animate-spin text-primary"}),x[15]||(x[15]=y("span",{class:"text-xs text-muted-foreground"},"Analyzing",-1))])):(rn(),ve("div",P_,dn(v(k)?.word_count??_.chapter.word_count)+" words ",1))])]),y("div",W_,[y("div",B_,[T(v(gn),{variant:"ghost",size:"icon",class:"h-7 w-7 rounded-full text-zinc-700 dark:text-zinc-300 hover:text-foreground",onClick:v(ue),title:v($t)?"Switch to Light Mode":"Switch to Dark Mode"},{default:un(()=>[v($t)?(rn(),ie(v(t_),{key:0,class:"w-4 h-4"})):(rn(),ie(v(r_),{key:1,class:"w-4 h-4"}))]),_:1},8,["onClick","title"]),T(v(gn),{variant:"ghost",size:"icon",class:"h-7 w-7 rounded-full text-zinc-700 dark:text-zinc-300 hover:text-foreground",onClick:Nt,title:zt.value?"Exit Full Screen":"Enter Full Screen"},{default:un(()=>[zt.value?(rn(),ie(v(i_),{key:0,class:"w-4 h-4"})):(rn(),ie(v(u_),{key:1,class:"w-4 h-4"}))]),_:1},8,["title"]),T(v(gn),{onClick:jn,variant:"ghost",size:"icon",class:Dr(["h-7 w-7 rounded-full transition-all duration-300",J.value?"bg-background shadow-sm text-primary":"text-zinc-700 dark:text-zinc-300 hover:text-foreground"]),title:"Toggle AI Chat Mode"},{default:un(()=>[T(v(Ks),{class:"w-4 h-4"})]),_:1},8,["class"]),T(v(gn),{onClick:Ve,variant:"ghost",size:"icon",class:Dr(["h-7 w-7 rounded-full transition-all duration-300",Cn.value?"bg-background shadow-sm text-primary":"text-zinc-700 dark:text-zinc-300 hover:text-foreground"]),title:"Toggle Tools Sidebar"},{default:un(()=>[Cn.value?(rn(),ie(v(qg),{key:0,class:"w-4 h-4"})):(rn(),ie(v(kg),{key:1,class:"w-4 h-4"}))]),_:1},8,["class"])]),x[18]||(x[18]=y("div",{class:"w-px h-4 bg-border/50"},null,-1)),T(Zg,{project:_.project,"current-chapter":_.chapter,"all-chapters":_.allChapters,size:"sm",variant:"outline",class:"h-9","button-class":"rounded-full bg-background/50"},null,8,["project","current-chapter","all-chapters"]),T(v(gn),{variant:"ghost",size:"sm",class:"h-9 gap-2 text-zinc-700 dark:text-zinc-300 hover:text-foreground rounded-full bg-background/50 border border-transparent hover:border-border/50",onClick:zr,title:"Open bulk analysis"},{default:un(()=>[T(v(o_),{class:"w-4 h-4"}),x[17]||(x[17]=y("span",{class:"text-xs font-medium"},"Analyze",-1))]),_:1}),T(v(gn),{variant:"outline",size:"sm",class:"h-9 gap-2 text-zinc-700 dark:text-zinc-300 hover:text-foreground rounded-full bg-background/50",onClick:se,disabled:v(wn),title:"Save (Ctrl+S)"},{default:un(()=>[T(v(au),{class:"w-4 h-4"}),y("span",F_,dn(v(wn)?"Saving...":"Save"),1)]),_:1},8,["disabled"])])])]),y("div",U_,[y("div",D_,[x[19]||(x[19]=y("span",{class:"font-medium"},"Writing Progress",-1)),y("span",null,dn(v(k)?.word_count??_.chapter.word_count)+" / "+dn(_.chapter.target_word_count)+" words",1)]),T(v(Bg),{"model-value":ne.value,class:"h-1.5"},null,8,["model-value"])]),y("div",z_,[T(Gs,{"enter-active-class":"transition-all duration-500 cubic-bezier(0.4, 0, 0.2, 1)","enter-from-class":"-ml-[320px] opacity-0","enter-to-class":"ml-0 opacity-100","leave-active-class":"transition-all duration-500 cubic-bezier(0.4, 0, 0.2, 1)","leave-from-class":"ml-0 opacity-100","leave-to-class":"-ml-[320px] opacity-0"},{default:un(()=>[cn.value&&!nn.value?(rn(),ve("aside",N_,[y("div",$_,[y("div",G_,[x[20]||(x[20]=y("h2",{class:"text-sm font-semibold text-foreground mb-1"},"Table of Contents",-1)),y("p",H_,dn(_.allChapters.length)+" Chapters",1)]),T(Hg,{"all-chapters":_.allChapters,"current-chapter":_.chapter,project:_.project,outlines:_.project.outlines||[],"faculty-chapters":_.facultyChapters||[],"current-word-count":v(k)?.word_count||_.chapter.word_count,"target-word-count":_.chapter.target_word_count,"writing-quality-score":0,"chapter-content-length":v(_n)?.length||0,onGoToChapter:qn,onGenerateNextChapter:qt,onDeleteChapter:ze},null,8,["all-chapters","current-chapter","project","outlines","faculty-chapters","current-word-count","target-word-count","chapter-content-length"])])])):We("",!0)]),_:1}),y("div",K_,[y("div",q_,[T(Fg,{modelValue:v(_n),"onUpdate:modelValue":v(Xe),"manual-mode":!0,class:"min-h-full"},null,8,["modelValue","onUpdate:modelValue"])])]),T(Gs,{"enter-active-class":"transition-all duration-500 cubic-bezier(0.4, 0, 0.2, 1)","enter-from-class":"-mr-[400px] opacity-0","enter-to-class":"mr-0 opacity-100","leave-active-class":"transition-all duration-500 cubic-bezier(0.4, 0, 0.2, 1)","leave-from-class":"mr-0 opacity-100","leave-to-class":"-mr-[400px] opacity-0"},{default:un(()=>[Cn.value&&!nn.value?(rn(),ve("aside",k_,[y("div",Z_,[v(Fe)?(rn(),ve("div",Y_,[T(zg,{suggestion:v(Fe),analysis:v(k),onSave:v(Je),onClear:v(X),onApply:v(Z)},null,8,["suggestion","analysis","onSave","onClear","onApply"]),T(v(Be),{class:"bg-border/50"})])):We("",!0),T(Ng,{guidance:v(gt),"is-loading":v(Bn),onToggleStep:v(Fn)},null,8,["guidance","is-loading","onToggleStep"]),T(v(Be),{class:"bg-border/50"}),T($g,{"project-slug":_.project.slug,"chapter-number":_.chapter.chapter_number,"selected-text":Dt.value,"is-processing":v(Tn)||v(wn),onTextImproved:Gt,onTextExpanded:Ht,onCitationsSuggested:Kt,onTextRephrased:oe},null,8,["project-slug","chapter-number","selected-text","is-processing"]),T(v(Be),{class:"bg-border/50"}),y("div",X_,[T(Yg,{"show-citation-helper":Qe.value,"onUpdate:showCitationHelper":x[8]||(x[8]=G=>Qe.value=G),"chapter-content":v(_n),onInsertCitation:be},null,8,["show-citation-helper","chapter-content"])]),T(v(Be),{class:"bg-border/50"}),T(v(Be),{class:"bg-border/50"})])])):We("",!0)]),_:1}),T(Gg,{"show-left-sidebar":cn.value,"show-right-sidebar":Cn.value,"is-mobile":nn.value,"all-chapters":_.allChapters,"current-chapter":_.chapter,project:_.project,"faculty-chapters":_.facultyChapters,"current-word-count":v(k)?.word_count||_.chapter.word_count,"target-word-count":_.chapter.target_word_count,"chapter-content-length":v(_n)?.length||0,"selected-text":Dt.value,"is-analyzing":v(Tn),"is-saving":v(wn),"current-suggestion":v(Fe),"current-analysis":v(k),guidance:v(gt),"is-loading-guidance":v(Bn),"chapter-content":v(_n),"show-citation-helper":Qe.value,"onUpdate:showLeftSidebar":x[9]||(x[9]=G=>cn.value=G),"onUpdate:showRightSidebar":x[10]||(x[10]=G=>Cn.value=G),"onUpdate:showCitationHelper":x[11]||(x[11]=G=>Qe.value=G),onGoToChapter:qn,onGenerateNextChapter:qt,onDeleteChapter:ze,onSaveSuggestion:v(Je),onClearSuggestion:v(X),onApplySuggestion:v(Z),onToggleStep:v(Fn),onTextImproved:Gt,onTextExpanded:Ht,onCitationsSuggested:Kt,onTextRephrased:oe,onInsertCitation:be},null,8,["show-left-sidebar","show-right-sidebar","is-mobile","all-chapters","current-chapter","project","faculty-chapters","current-word-count","target-word-count","chapter-content-length","selected-text","is-analyzing","is-saving","current-suggestion","current-analysis","guidance","is-loading-guidance","chapter-content","show-citation-helper","onSaveSuggestion","onClearSuggestion","onApplySuggestion","onToggleStep"])]),y("footer",J_,[y("div",Q_,[y("div",V_,[y("span",j_,[x[21]||(x[21]=y("span",{class:"hidden sm:inline"},"Words: ",-1)),y("strong",n0,dn(v(k)?.word_count??_.chapter.word_count),1),dt(" / "+dn(_.chapter.target_word_count),1)]),v(k)?(rn(),ve("span",e0,[x[22]||(x[22]=dt(" Citations: ",-1)),y("strong",t0,dn(v(k).citation_count),1)])):We("",!0),v(k)?(rn(),ve("span",r0,[x[23]||(x[23]=dt(" Tables: ",-1)),y("strong",i0,dn(v(k).table_count),1)])):We("",!0),v(k)?(rn(),ve("span",u0," Quality: "+dn(v(k).quality_metrics.reading_level),1)):We("",!0)]),y("div",o0,[T(v(gn),{variant:"outline",size:"sm",class:"h-8 md:h-9 gap-2 flex-1 sm:flex-initial",onClick:se,disabled:v(wn),title:"Save chapter"},{default:un(()=>[T(v(au),{class:"w-3.5 h-3.5 md:w-4 md:h-4"}),y("span",s0,dn(v(wn)?"Saving...":"Save"),1)]),_:1},8,["disabled"]),T(v(gn),{variant:"default",size:"sm",class:"h-8 md:h-9 gap-2 flex-1 sm:flex-initial",onClick:kt,disabled:v(wn),title:"Save and mark chapter as complete"},{default:un(()=>[T(v(s_),{class:"w-3.5 h-3.5 md:w-4 md:h-4"}),x[24]||(x[24]=y("span",{class:"text-xs font-medium hidden sm:inline"},"Mark Complete",-1)),x[25]||(x[25]=y("span",{class:"text-xs font-medium sm:hidden"},"Complete",-1))]),_:1},8,["disabled"])])])]),T(v(Xg),{position:"top-center"})])],64)}}}),Lv=a_(a0,[["__scopeId","data-v-a0666cc0"]]);export{Lv as default};
