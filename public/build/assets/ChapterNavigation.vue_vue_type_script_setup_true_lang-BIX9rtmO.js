import{_ as x,c as C}from"./index-DKTzjY4t.js";import{_ as S}from"./ScrollArea.vue_vue_type_script_setup_true_lang-BiVOEWCH.js";import{_ as z,a as D,b as M,c as V,d as W,e as A,f as E,g as F}from"./AlertDialogTitle.vue_vue_type_script_setup_true_lang-DShD0gcS.js";import{bu as j,cn as w,co as u,cp as o,dn as G,d2 as L,bF as s,hz as P,ck as m,cB as i,cr as l,cq as a,cs as p,eC as q,ct as c,cS as I,de as Q,cG as v,dE as R,ea as H,cu as y,cA as J,ho as K,er as O,dN as U,ce as X,cl as Y,cj as $}from"./vendor-BJBNFzu6.js";import{_ as N}from"./index-DweHVuYF.js";const Z=j({__name:"AlertDialogTrigger",props:{asChild:{type:Boolean},as:{}},setup(f){const g=f;return(n,b)=>(u(),w(s(P),L({"data-slot":"alert-dialog-trigger"},g),{default:o(()=>[G(n.$slots,"default")]),_:3},16))}}),ee={class:"flex h-full flex-col bg-transparent"},te={class:"px-4 py-3 border-b border-border/40"},re={class:"text-xs font-bold uppercase tracking-wider text-muted-foreground flex items-center gap-2"},se={class:"mt-2 flex items-center justify-between"},ae={class:"text-xs font-medium text-foreground"},ne={class:"p-2 space-y-1"},oe=["onClick"],le={class:"flex-shrink-0 mt-0.5"},ue={key:1,class:"h-6 w-6 rounded-md bg-primary text-primary-foreground flex items-center justify-center shadow-sm ring-2 ring-primary/20"},ce={class:"text-xs font-bold"},de={key:2,class:"h-6 w-6 rounded-md bg-muted text-muted-foreground flex items-center justify-center border border-border"},ie={class:"text-xs font-medium"},pe={key:3,class:"h-6 w-6 rounded-md bg-muted/50 text-muted-foreground/30 flex items-center justify-center border border-border/50"},he={class:"flex-1 text-left min-w-0"},_e={class:"flex items-center gap-2 mt-1.5"},me={class:"text-[10px] text-muted-foreground/70 flex items-center gap-1"},fe={key:0,class:"absolute right-2 top-3 opacity-0 group-hover:opacity-100 transition-opacity"},ge={class:"p-3 border-t border-border/40 bg-muted/5"},be={key:1,class:"flex gap-2"},xe={class:"truncate max-w-[120px]"},$e=j({__name:"ChapterNavigation",props:{allChapters:{},currentChapter:{},project:{},outlines:{},facultyChapters:{},currentWordCount:{},targetWordCount:{},writingQualityScore:{},chapterContentLength:{}},emits:["goToChapter","generateNextChapter","deleteChapter"],setup(f,{emit:g}){const n=f,b=g,_=m(()=>n.facultyChapters&&n.facultyChapters.length>0?n.facultyChapters.map(t=>{const r=n.allChapters.find(d=>d.chapter_number===t.number),e=n.outlines?.find(d=>d.chapter_number===t.number);return{chapter_number:t.number,title:t.title,target_word_count:t.word_count,status:r?r.status:"not_started",exists:!!r,id:r?.id,slug:r?.slug,outline:e||null,facultyChapter:t}}):n.outlines&&n.outlines.length>0?n.outlines.map(t=>{const r=n.allChapters.find(e=>e.chapter_number===t.chapter_number);return{chapter_number:t.chapter_number,title:t.chapter_title,target_word_count:t.target_word_count,status:r?r.status:"not_started",exists:!!r,id:r?.id,slug:r?.slug,outline:t,facultyChapter:null}}):n.allChapters&&n.allChapters.length>0?n.allChapters.map(t=>({chapter_number:t.chapter_number,title:t.title,target_word_count:0,status:t.status,exists:!0,id:t.id,slug:t.slug,outline:null,facultyChapter:null})):[]);m(()=>!0);const h=m(()=>{const t=n.currentChapter.chapter_number;return _.value.find(e=>e.chapter_number===t+1)});m(()=>{const t=n.currentChapter.chapter_number;return _.value.find(e=>e.chapter_number===t-1)});const k=t=>{b("goToChapter",t)},T=()=>{b("generateNextChapter")},B=(t,r)=>{r&&X.delete(Y("chapters.destroy",{project:n.project.slug,chapter:r}),{preserveState:!0,preserveScroll:!0,only:["allChapters","chapter"],onSuccess:e=>{const d=e.props.flash?.message||"Chapter deleted successfully";$.success(d)},onError:e=>{const d=typeof e=="string"?e:"Failed to delete chapter.";$.error(d)}})};return(t,r)=>(u(),i("div",ee,[l("div",te,[l("h2",re,[a(s(q),{class:"h-3.5 w-3.5"}),r[1]||(r[1]=p(" Table of Contents ",-1))]),l("div",se,[l("span",ae,c(_.value.length)+" Chapters",1),a(s(N),{variant:"secondary",class:"text-[10px] h-5 px-1.5 font-normal"},{default:o(()=>[p(c(Math.round(t.currentWordCount/(t.targetWordCount||1)*100))+"% Complete ",1)]),_:1})])]),a(s(S),{class:"flex-1"},{default:o(()=>[l("div",ne,[(u(!0),i(I,null,Q(_.value,e=>(u(),i("div",{key:e.chapter_number,class:"group relative"},[l("button",{onClick:d=>k(e.chapter_number),class:y(s(C)("flex w-full items-start gap-3 rounded-lg px-3 py-3 text-sm transition-all duration-200 border border-transparent",e.chapter_number===t.currentChapter.chapter_number?"bg-primary/5 border-primary/10 shadow-sm":"hover:bg-muted/50 hover:border-border/50"))},[l("div",le,[e.status==="approved"||e.status==="completed"?(u(),i("div",{key:0,class:y(s(C)("h-6 w-6 rounded-md flex items-center justify-center",e.chapter_number===t.currentChapter.chapter_number?"bg-green-500 text-white shadow-sm ring-2 ring-green-500/20":"bg-green-500/10 text-green-700 dark:text-green-400 border border-green-500/20"))},[a(s(J),{class:"h-3.5 w-3.5"})],2)):e.chapter_number===t.currentChapter.chapter_number?(u(),i("div",ue,[l("span",ce,c(e.chapter_number),1)])):e.exists?(u(),i("div",de,[l("span",ie,c(e.chapter_number),1)])):(u(),i("div",pe,[a(s(K),{class:"h-3 w-3"})]))]),l("div",he,[l("p",{class:y(s(C)("truncate font-medium leading-tight",e.chapter_number===t.currentChapter.chapter_number?"text-foreground":"text-muted-foreground group-hover:text-foreground"))},c(e.title),3),l("div",_e,[l("span",me,[a(s(O),{class:"h-3 w-3"}),p(" "+c(e.target_word_count)+" words ",1)]),e.exists?v("",!0):(u(),w(s(N),{key:0,variant:"outline",class:"h-4 px-1 text-[9px] border-dashed text-muted-foreground/60"},{default:o(()=>[...r[2]||(r[2]=[p(" Not Started ",-1)])]),_:1}))])])],10,oe),e.exists&&e.chapter_number!==t.currentChapter.chapter_number?(u(),i("div",fe,[a(s(z),null,{default:o(()=>[a(s(Z),{asChild:""},{default:o(()=>[a(s(x),{variant:"ghost",size:"icon",class:"h-6 w-6 text-muted-foreground/50 hover:text-destructive hover:bg-destructive/10 rounded-md"},{default:o(()=>[a(s(U),{class:"h-3 w-3"})]),_:1})]),_:1}),a(s(D),null,{default:o(()=>[a(s(M),null,{default:o(()=>[a(s(V),null,{default:o(()=>[p("Delete Chapter "+c(e.chapter_number)+"?",1)]),_:2},1024),a(s(W),null,{default:o(()=>[p(' This will permanently delete "'+c(e.title)+'" and all its content. ',1)]),_:2},1024)]),_:2},1024),a(s(A),null,{default:o(()=>[a(s(E),null,{default:o(()=>[...r[3]||(r[3]=[p("Cancel",-1)])]),_:1}),a(s(F),{class:"bg-destructive text-destructive-foreground hover:bg-destructive/90",onClick:d=>B(e.id,e.slug)},{default:o(()=>[...r[4]||(r[4]=[p(" Delete ",-1)])]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)])):v("",!0)]))),128))])]),_:1}),l("div",ge,[h.value&&!h.value.exists?(u(),w(s(x),{key:0,onClick:T,class:"w-full bg-primary text-primary-foreground shadow-sm hover:bg-primary/90 transition-all h-9 text-xs font-medium",size:"sm"},{default:o(()=>[a(s(R),{class:"mr-2 h-3.5 w-3.5"}),p(" Start Chapter "+c(h.value.chapter_number),1)]),_:1})):h.value?(u(),i("div",be,[a(s(x),{variant:"outline",class:"w-full justify-between bg-background hover:bg-accent/50 h-9 text-xs text-zinc-700 dark:text-zinc-300",size:"sm",onClick:r[0]||(r[0]=e=>k(h.value.chapter_number))},{default:o(()=>[l("span",xe,"Next: "+c(h.value.title),1),a(s(H),{class:"h-3.5 w-3.5 ml-2 flex-shrink-0"})]),_:1})])):v("",!0)])]))}});export{$e as _};
