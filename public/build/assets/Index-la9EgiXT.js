import{d as je,r as d,l as c,v as Pe,G as Ue,z as Oe,g as D,o as u,w as l,b as t,e as a,c as B,a as F,F as Y,f as ee,u as s,h as r,t as n,a5 as te,W as h,T as Le,an as se,ao as ce,ap as pe,aq as ze,ar as fe,as as me,at as be,au as Me,av as ge,q as Ve}from"./vendor-H8yUxHVJ.js";import{C as ae,r as Ee}from"./chart-Zj-L_LRF.js";import{_ as qe}from"./AdminLayout.vue_vue_type_script_setup_true_lang-CCjfYqFc.js";import{_ as p,a as b}from"./CardContent.vue_vue_type_script_setup_true_lang-DTkdfvuV.js";import{_ as M}from"./CardDescription.vue_vue_type_script_setup_true_lang-BbSl0Z72.js";import{_ as f,a as C}from"./CardTitle.vue_vue_type_script_setup_true_lang-B5y-_hAe.js";import{_ as V}from"./index-CwD5qkLf.js";import{d as We,_ as Ge,b as le,e as oe,a as He,c as H}from"./TableHeader.vue_vue_type_script_setup_true_lang-BhA0_Tu7.js";import{_ as K}from"./index-CiWGHnJL.js";import{_ as Ke,a as Ze}from"./DialogContent.vue_vue_type_script_setup_true_lang-Dw7gJkgN.js";import{_ as Xe}from"./DialogDescription.vue_vue_type_script_setup_true_lang-nvWA5ydV.js";import{_ as Je}from"./DialogFooter.vue_vue_type_script_setup_true_lang-DjMQinTr.js";import{_ as Qe,a as Ye}from"./DialogTitle.vue_vue_type_script_setup_true_lang-Biexvk_x.js";import{_ as ve}from"./Input.vue_vue_type_script_setup_true_lang-DRx-Lc7N.js";import{_ as xe}from"./Label.vue_vue_type_script_setup_true_lang-PAGjh1rG.js";import{s as re}from"./useAppearance-DRazjLJ1.js";import"./Sonner.vue_vue_type_script_setup_true_lang-a4iHnNww.js";import"./Presence-Cn1h4MwK.js";import"./useForwardExpose-CEOuSuYA.js";import"./index-CZRrGrlM.js";import"./DialogTitle-FvR-dACM.js";import"./VisuallyHidden-BvUOvbOk.js";import"./UserInfo.vue_vue_type_script_setup_true_lang-B2g6QnB0.js";import"./TooltipTrigger.vue_vue_type_script_setup_true_lang-ev0g6x5g.js";const et={class:"space-y-6"},tt={class:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4"},st={class:"flex items-center gap-1.5 bg-muted/30 p-1 rounded-xl border border-border/50"},at={class:"ml-2 font-medium"},lt={class:"flex items-start gap-4"},ot={class:"flex-1"},rt={class:"flex flex-wrap items-center gap-x-4 gap-y-1 text-sm text-muted-foreground font-medium"},nt={class:"flex items-center gap-1.5"},it={class:"font-bold text-foreground"},dt={class:"flex items-center gap-1.5"},ut={class:"font-bold text-foreground"},ct={class:"flex items-center gap-1.5"},pt={class:"font-bold text-foreground"},ft={class:"grid gap-4 grid-cols-1 sm:grid-cols-2 lg:grid-cols-4"},mt={class:"p-2 rounded-xl bg-emerald-500/10 text-emerald-500 group-hover:scale-110 transition-transform"},bt={class:"text-3xl font-black tracking-tighter"},gt={class:"text-xs text-muted-foreground mt-3 flex items-center gap-1.5 font-medium"},vt={class:"text-[9px] text-muted-foreground/60 mt-1 flex items-center gap-1.5 font-medium"},xt={class:"p-2 rounded-xl bg-blue-500/10 text-blue-500 group-hover:scale-110 transition-transform"},_t={class:"text-3xl font-black tracking-tighter"},yt={class:"text-xs text-muted-foreground mt-3 flex items-center gap-1.5 font-medium"},wt={class:"p-2 rounded-xl bg-violet-500/10 text-violet-500 group-hover:scale-110 transition-transform"},kt={class:"text-3xl font-black tracking-tighter text-violet-500"},ht={class:"p-2 rounded-xl bg-amber-500/10 text-amber-500 group-hover:scale-110 transition-transform"},Ct={class:"text-xs text-muted-foreground mt-3 flex items-center gap-1.5 font-medium"},$t={class:"grid gap-4 grid-cols-1 sm:grid-cols-2 lg:grid-cols-4"},St={class:"text-2xl font-black flex items-baseline gap-2"},Tt={class:"text-[10px] text-muted-foreground mt-1 font-mono uppercase font-bold opacity-60"},Bt={class:"text-2xl font-black text-rose-500 tracking-tight"},At={class:"grid gap-6 lg:grid-cols-2"},It={class:"flex items-center justify-between"},Dt={class:"text-right"},Ft={class:"relative h-[320px] w-full"},Nt={key:0,class:"absolute inset-0 flex items-center justify-center bg-card/50 backdrop-blur-xs rounded-xl"},Rt={class:"flex items-center justify-between"},jt={class:"text-right"},Pt={class:"relative h-[320px] w-full"},Ut={key:0,class:"absolute inset-0 flex items-center justify-center bg-card/50 backdrop-blur-xs rounded-xl"},Ot={class:"grid gap-6 lg:grid-cols-2"},Lt={class:"p-1.5 rounded-lg bg-primary/10 text-primary"},zt={class:"space-y-6"},Mt={class:"relative"},Vt={class:"flex justify-between text-[10px] font-black uppercase tracking-widest mb-2.5"},Et={class:"text-foreground"},qt={class:"h-4 bg-muted/50 rounded-full overflow-hidden border border-border/20 p-0.5"},Wt={class:"relative"},Gt={class:"flex justify-between text-[10px] font-black uppercase tracking-widest mb-2.5"},Ht={class:"text-emerald-500"},Kt={class:"h-4 bg-muted/50 rounded-full overflow-hidden border border-border/20 p-0.5"},Zt={class:"pt-5 border-t border-border/40 mt-2"},Xt={class:"flex items-center justify-between mb-3"},Jt={class:"text-xs text-muted-foreground leading-relaxed font-medium"},Qt={class:"p-1.5 rounded-lg bg-primary/10 text-primary"},Yt={class:"p-4"},es={class:"font-bold text-sm tracking-tight group-hover/row:text-primary transition-colors"},ts={class:"text-[9px] uppercase font-black text-muted-foreground/60 tracking-tighter"},ss={class:"flex items-center gap-3"},as={class:"p-2 rounded-xl bg-primary/5 text-primary border border-primary/10"},ls={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 divide-y md:divide-y-0 md:divide-x divide-border/30"},os={class:"flex items-center justify-between mb-5"},rs={class:"text-sm font-black tracking-tighter group-hover/item:text-primary transition-colors"},ns={class:"space-y-3.5 font-mono"},is={class:"flex items-center justify-between text-xs"},ds={class:"font-black tracking-tight text-foreground/80"},us={class:"flex items-center justify-between text-xs"},cs={class:"font-black tracking-tight text-foreground/80"},ps={class:"space-y-4 py-4"},fs={class:"space-y-2"},ms={class:"relative"},bs={class:"space-y-2"},gs={key:0,class:"p-3 rounded-lg bg-muted/50 border border-border/50 space-y-2"},vs={class:"grid grid-cols-2 gap-2 text-sm"},xs={class:"ml-1 font-bold"},_s={class:"ml-1 font-bold text-rose-500"},ys={class:"col-span-2"},ws={class:"ml-1 font-bold text-emerald-500"},ks={class:"text-[10px] text-muted-foreground mt-1"},Ks=je({__name:"Index",props:{metrics:{},profitability:{},usageTrends:{},liabilityBreakdown:{},modelBreakdown:{},billingSnapshot:{},modelPricing:{},selectedDays:{},creditSettings:{},balanceInfo:{}},setup(_e){ae.register(...Ee);const m=_e,ye=[{label:"7d",value:7},{label:"30d",value:30},{label:"90d",value:90}],we={liability_tokens:0,wallet_tokens:0,avg_daily_tokens_7:0,avg_daily_tokens_30:0,runway_days:null,status:"safe"},v=d(m.metrics??we),x=d(m.profitability),$=d(m.usageTrends??[]),Z=d(m.liabilityBreakdown),_=d(m.modelBreakdown??[]),E=d(m.billingSnapshot??null),ke=d(m.modelPricing??{}),N=d(m.selectedDays??30),q=d(m.creditSettings),S=d(m.balanceInfo),R=d(!1),j=d(!1),w=d({initial_balance:m.creditSettings?.initial_balance?.toString()??"0",notes:m.creditSettings?.notes??""}),T=c(()=>v.value?.status??"safe"),P=d(!1),A=c(()=>v.value?.liability_tokens??0),U=c(()=>v.value?.wallet_tokens??0),he=c(()=>v.value?.avg_daily_tokens_7??0),ne=c(()=>!v.value||v.value.runway_days===null?"...":`${v.value.runway_days} days`),I=c(()=>A.value===0?100:U.value/A.value*100),ie=c(()=>Z.value?.top_users??[]),Ce=c(()=>$.value.reduce((o,e)=>o+e.tokens,0)),$e=c(()=>_.value.reduce((o,e)=>o+e.cost_usd,0)),de=c(()=>Math.max(A.value,U.value,1)),Se=c(()=>`${A.value/de.value*100}%`),Te=c(()=>`${U.value/de.value*100}%`),X=d(null),J=d(null);let O=null,L=null;const ue={input:"#6366f1",output:"#10b981"},W=()=>{if(!X.value||$.value.length===0)return;O&&O.destroy();const o=X.value.getContext("2d");if(!o)return;const e=o.createLinearGradient(0,0,0,320);e.addColorStop(0,"rgba(99, 102, 241, 0.25)"),e.addColorStop(1,"rgba(99, 102, 241, 0)");const i=$.value.map(g=>new Date(g.date).toLocaleDateString(void 0,{month:"short",day:"numeric"}));O=new ae(o,{type:"line",data:{labels:i,datasets:[{label:"Daily Tokens",data:$.value.map(g=>g.tokens),borderColor:"#6366f1",backgroundColor:e,borderWidth:3,fill:!0,tension:.45,pointRadius:0,pointHitRadius:10,pointHoverRadius:6,pointHoverBackgroundColor:"#6366f1",pointHoverBorderColor:"#fff",pointHoverBorderWidth:2}]},options:{responsive:!0,maintainAspectRatio:!1,interaction:{intersect:!1,mode:"index"},plugins:{legend:{display:!1},tooltip:{backgroundColor:"#000",titleFont:{size:12,weight:"bold"},bodyFont:{size:12},padding:12,cornerRadius:8,displayColors:!1,callbacks:{label:g=>`${y(g.parsed.y)} tokens`}}},scales:{x:{grid:{display:!1},ticks:{color:"#64748b",font:{size:10,weight:"600"},maxRotation:0}},y:{grid:{color:"rgba(148, 163, 184, 0.1)"},border:{display:!1},beginAtZero:!0,ticks:{color:"#64748b",font:{size:10,weight:"600"},callback:g=>G(g)}}}}})},z=()=>{if(!J.value||_.value.length===0)return;L&&L.destroy();const o=J.value.getContext("2d");o&&(L=new ae(o,{type:"bar",data:{labels:_.value.map(e=>e.model),datasets:[{label:"Input (Context)",data:_.value.map(e=>e.prompt_tokens),backgroundColor:ue.input,borderRadius:4,barThickness:20},{label:"Output (Completion)",data:_.value.map(e=>e.completion_tokens),backgroundColor:ue.output,borderRadius:4,barThickness:20}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"bottom",labels:{usePointStyle:!0,pointStyle:"circle",padding:25,color:"#64748b",font:{size:10,weight:"700"}}},tooltip:{backgroundColor:"#000",padding:12,cornerRadius:8,usePointStyle:!0,callbacks:{label:e=>` ${e.dataset.label}: ${y(e.parsed.y)}TK`}}},scales:{x:{grid:{display:!1},ticks:{color:"#64748b",font:{size:10,weight:"700"}}},y:{stacked:!0,grid:{color:"rgba(148, 163, 184, 0.1)"},border:{display:!1},ticks:{color:"#64748b",font:{size:10,weight:"700"},callback:e=>G(e)}}}}}))},y=o=>o==null?"0":Number(o).toLocaleString(),k=(o,e=2)=>o==null||isNaN(Number(o))?0 .toFixed(e):Number(o).toFixed(e),Be=o=>new Intl.NumberFormat("en-NG",{style:"currency",currency:"NGN",maximumFractionDigits:0}).format(o),G=o=>o>=1e6?`${(o/1e6).toFixed(1)}M`:o>=1e3?`${(o/1e3).toFixed(0)}k`:o.toString(),Ae=c(()=>$.value),Ie=c(()=>_.value),De=o=>{N.value=o,Ve.get(re("admin.ai.index"),{days:o},{preserveState:!0,preserveScroll:!0,only:["profitability","usageTrends","modelBreakdown","selectedDays"],onSuccess:e=>{x.value=e.props.profitability,$.value=e.props.usageTrends??[],_.value=e.props.modelBreakdown??[],W(),z()}})};let Q=null;Pe(()=>{W(),z(),Q=window.Echo?.private("admin.ai"),Q?.listen(".ai.provisioning.updated",o=>{o.metrics&&(v.value=o.metrics),o.snapshot&&(E.value=o.snapshot),o.modelBreakdown&&(_.value=o.modelBreakdown,z())})}),Ue([$,_],()=>{W(),z()},{deep:!0}),Oe(()=>{Q?.stopListening(".ai.provisioning.updated"),O&&O.destroy(),L&&L.destroy()});const Fe=async()=>{try{P.value=!0;const e=await(await fetch(re("admin.ai.refresh")+`?days=${N.value}`,{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")||""}})).json();e?.metrics&&(v.value=e.metrics,e.metrics.balance_info&&(S.value=e.metrics.balance_info)),e?.snapshot&&(E.value=e.snapshot),e?.profitability&&(x.value=e.profitability),e?.usageTrends&&($.value=e.usageTrends,W()),e?.liabilityBreakdown&&(Z.value=e.liabilityBreakdown),e?.modelBreakdown&&(_.value=e.modelBreakdown,z())}catch(o){console.error("Failed to refresh AI metrics",o)}finally{P.value=!1}},Ne=()=>{w.value={initial_balance:q.value?.initial_balance?.toString()??"0",notes:q.value?.notes??""},R.value=!0},Re=async()=>{try{j.value=!0;const e=await(await fetch(re("admin.ai.update-credit"),{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")||""},body:JSON.stringify({initial_balance:parseFloat(w.value.initial_balance)||0,notes:w.value.notes||null})})).json();e.success?(e.settings&&(q.value=e.settings),e.balance_info&&(S.value=e.balance_info),e.metrics&&(v.value=e.metrics),R.value=!1):console.error("Failed to save balance:",e)}catch(o){console.error("Failed to save credit balance",o)}finally{j.value=!1}};return(o,e)=>(u(),D(qe,{title:"AI Analytics",subtitle:"OpenAI credit monitoring, profitability analysis, and usage insights."},{default:l(()=>[t("div",et,[t("div",tt,[t("div",st,[(u(),B(Y,null,ee(ye,i=>a(s(V),{key:i.value,size:"sm",variant:N.value===i.value?"default":"ghost",class:"h-8 rounded-lg px-4",onClick:g=>De(i.value)},{default:l(()=>[r(n(i.label),1)]),_:2},1032,["variant","onClick"])),64))]),a(s(V),{variant:"outline",size:"sm",disabled:P.value,onClick:Fe,class:"rounded-xl border-border/50"},{default:l(()=>[P.value?(u(),D(s(te),{key:0,class:"h-4 w-4 animate-spin text-primary"})):(u(),D(s(te),{key:1,class:"h-4 w-4 text-primary"})),t("span",at,n(P.value?"Refreshing...":"Sync Data"),1)]),_:1},8,["disabled"])]),T.value!=="safe"?(u(),B("div",{key:0,class:h(["relative overflow-hidden group rounded-2xl border p-5 transition-all duration-300 shadow-lg",T.value==="critical"?"border-rose-500/30 bg-rose-500/5":"border-amber-500/30 bg-amber-500/5"])},[e[10]||(e[10]=t("div",{class:"absolute inset-0 bg-gradient-to-r from-transparent via-white/5 to-transparent -translate-x-full group-hover:translate-x-full transition-transform duration-1000"},null,-1)),t("div",lt,[t("div",{class:h([T.value==="critical"?"bg-rose-500/20":"bg-amber-500/20","p-2.5 rounded-xl"])},[a(s(Le),{class:h([T.value==="critical"?"text-rose-500":"text-amber-500","h-6 w-6"])},null,8,["class"])],2),t("div",ot,[t("h3",{class:h(["text-base font-bold leading-none mb-1.5",T.value==="critical"?"text-rose-500":"text-amber-500"])},n(T.value==="critical"?"Critical: OpenAI Credit Depleted":"Warning: Low Credit Reserve"),3),t("div",rt,[t("span",nt,[a(s(se),{class:"h-3.5 w-3.5 opacity-70"}),e[4]||(e[4]=r(" Available: ",-1)),t("span",it,"$"+n(k(E.value?.available_usd)),1)]),e[7]||(e[7]=t("span",{class:"w-1.5 h-1.5 rounded-full bg-border"},null,-1)),t("span",dt,[a(s(ce),{class:"h-3.5 w-3.5 opacity-70"}),e[5]||(e[5]=r(" Liability: ",-1)),t("span",ut,n(y(A.value))+" tokens",1)]),e[8]||(e[8]=t("span",{class:"w-1.5 h-1.5 rounded-full bg-border"},null,-1)),t("span",ct,[a(s(pe),{class:"h-3.5 w-3.5 opacity-70"}),e[6]||(e[6]=r(" Projection: ",-1)),t("span",pt,n(ne.value)+" remaining",1)])])]),a(s(V),{size:"sm",variant:T.value==="critical"?"destructive":"default",class:"hidden sm:flex rounded-xl font-bold px-5"},{default:l(()=>[...e[9]||(e[9]=[r(" Top Up Now ",-1)])]),_:1},8,["variant"])])],2)):F("",!0),t("div",ft,[a(s(p),{class:"relative overflow-hidden border-border/40 shadow-sm transition-all hover:shadow-md hover:border-primary/20 h-full group cursor-pointer",onClick:Ne},{default:l(()=>[a(s(f),{class:"flex flex-row items-center justify-between pb-2 space-y-0"},{default:l(()=>[e[11]||(e[11]=t("span",{class:"text-[10px] font-bold uppercase tracking-[0.1em] text-muted-foreground/60"},"OpenAI Balance",-1)),t("div",mt,[a(s(se),{class:"h-4 w-4"})])]),_:1}),a(s(b),null,{default:l(()=>[t("div",bt,"$"+n(k(S.value?.available_usd??E.value?.available_usd)),1),t("p",gt,[e[12]||(e[12]=t("span",{class:"inline-block w-1.5 h-1.5 rounded-full bg-emerald-500 shadow-[0_0_8px_rgba(16,185,129,0.5)]"},null,-1)),r(" Initial: $"+n(k(S.value?.initial_balance??q.value?.initial_balance)),1)]),t("p",vt,[a(s(ze),{class:"h-3 w-3"}),e[13]||(e[13]=r(" Click to update balance ",-1))])]),_:1})]),_:1}),a(s(p),{class:"relative overflow-hidden border-border/40 shadow-sm transition-all hover:shadow-md hover:border-primary/20 h-full group"},{default:l(()=>[a(s(f),{class:"flex flex-row items-center justify-between pb-2 space-y-0"},{default:l(()=>[e[14]||(e[14]=t("span",{class:"text-[10px] font-bold uppercase tracking-[0.1em] text-muted-foreground/60"},"User Liability",-1)),t("div",xt,[a(s(ce),{class:"h-4 w-4"})])]),_:1}),a(s(b),null,{default:l(()=>[t("div",_t,n(y(A.value)),1),t("p",yt,[a(s(fe),{class:"h-3.5 w-3.5 opacity-60"}),r(" "+n(y(Z.value?.users_with_balance??0))+" active accounts ",1)])]),_:1})]),_:1}),a(s(p),{class:"relative overflow-hidden border-border/40 shadow-sm transition-all hover:shadow-md hover:border-primary/20 h-full group"},{default:l(()=>[a(s(f),{class:"flex flex-row items-center justify-between pb-2 space-y-0"},{default:l(()=>[e[15]||(e[15]=t("span",{class:"text-[10px] font-bold uppercase tracking-[0.1em] text-muted-foreground/60"},"Internal Reserve",-1)),t("div",wt,[a(s(me),{class:"h-4 w-4"})])]),_:1}),a(s(b),null,{default:l(()=>[t("div",kt,n(y(U.value)),1),t("p",{class:h(["text-xs mt-3 flex items-center gap-1.5 font-bold",I.value>=100?"text-emerald-500":"text-amber-500"])},[t("span",{class:h(["inline-block w-1.5 h-1.5 rounded-full",I.value>=100?"bg-emerald-500":"bg-amber-500"])},null,2),r(" "+n(I.value.toFixed(1))+"% Coverage Ratio ",1)],2)]),_:1})]),_:1}),a(s(p),{class:"relative overflow-hidden border-border/40 shadow-sm transition-all hover:shadow-md hover:border-primary/20 h-full group"},{default:l(()=>[a(s(f),{class:"flex flex-row items-center justify-between pb-2 space-y-0"},{default:l(()=>[e[16]||(e[16]=t("span",{class:"text-[10px] font-bold uppercase tracking-[0.1em] text-muted-foreground/60"},"Projected Runway",-1)),t("div",ht,[a(s(pe),{class:"h-4 w-4"})])]),_:1}),a(s(b),null,{default:l(()=>[t("div",{class:h(["text-3xl font-black tracking-tighter",T.value!=="safe"?"text-rose-500":""])},n(ne.value),3),t("p",Ct,[a(s(be),{class:"h-3.5 w-3.5 opacity-60 text-amber-500"}),r(" Burn: "+n(y(he.value))+" tokens / day ",1)])]),_:1})]),_:1})]),t("div",$t,[a(s(p),{class:"bg-card border-border/40 border-l-4 border-l-emerald-500 shadow-sm relative overflow-hidden group"},{default:l(()=>[e[17]||(e[17]=t("div",{class:"absolute right-0 top-0 h-full w-24 bg-gradient-to-l from-emerald-500/5 to-transparent"},null,-1)),a(s(f),{class:"pb-2"},{default:l(()=>[a(s(C),{class:"text-[10px] font-bold uppercase tracking-widest text-muted-foreground/50"},{default:l(()=>[r("Gross Revenue ("+n(N.value)+"d)",1)]),_:1})]),_:1}),a(s(b),null,{default:l(()=>[t("div",St,n(Be(x.value?.revenue_ngn??0)),1),t("p",Tt,"$"+n(k(x.value?.revenue_usd))+" USD Eq.",1)]),_:1})]),_:1}),a(s(p),{class:"bg-card border-border/40 border-l-4 border-l-rose-500 shadow-sm relative overflow-hidden group"},{default:l(()=>[e[19]||(e[19]=t("div",{class:"absolute right-0 top-0 h-full w-24 bg-gradient-to-l from-rose-500/5 to-transparent"},null,-1)),a(s(f),{class:"pb-2"},{default:l(()=>[a(s(C),{class:"text-[10px] font-bold uppercase tracking-widest text-muted-foreground/50"},{default:l(()=>[r("Incurred Cost ("+n(N.value)+"d)",1)]),_:1})]),_:1}),a(s(b),null,{default:l(()=>[t("div",Bt,"$"+n(k(x.value?.cost_usd,4)),1),e[18]||(e[18]=t("p",{class:"text-[10px] text-muted-foreground mt-1 font-bold uppercase opacity-60"},"Aggregated API Usage",-1))]),_:1})]),_:1}),a(s(p),{class:"bg-card border-border/40 border-l-4 border-l-primary shadow-sm overflow-hidden relative group"},{default:l(()=>[e[22]||(e[22]=t("div",{class:"absolute right-0 top-0 h-full w-24 bg-gradient-to-l from-primary/5 to-transparent"},null,-1)),a(s(f),{class:"pb-2"},{default:l(()=>[a(s(C),{class:"text-[10px] font-bold uppercase tracking-widest text-muted-foreground/50"},{default:l(()=>[...e[20]||(e[20]=[r("Net AI Profit ",-1)])]),_:1})]),_:1}),a(s(b),null,{default:l(()=>[t("div",{class:h(["text-2xl font-black tracking-tight",(x.value?.profit_usd??0)>=0?"text-emerald-500":"text-rose-500"])}," $"+n(k(x.value?.profit_usd)),3),e[21]||(e[21]=t("p",{class:"text-[10px] text-muted-foreground mt-1 font-bold uppercase opacity-60"},"Pre-Tax Operating Income ",-1))]),_:1})]),_:1}),a(s(p),{class:"bg-card border-border/40 border-l-4 border-l-blue-500 shadow-sm relative overflow-hidden group"},{default:l(()=>[e[25]||(e[25]=t("div",{class:"absolute right-0 top-0 h-full w-24 bg-gradient-to-l from-blue-500/5 to-transparent"},null,-1)),a(s(f),{class:"pb-2"},{default:l(()=>[a(s(C),{class:"text-[10px] font-bold uppercase tracking-widest text-muted-foreground/50"},{default:l(()=>[...e[23]||(e[23]=[r("Efficiency Margin",-1)])]),_:1})]),_:1}),a(s(b),null,{default:l(()=>[t("div",{class:h(["text-2xl font-black flex items-center gap-2",(x.value?.margin_percent??0)>=0?"text-emerald-500":"text-rose-500"])},[r(n(x.value?.margin_percent??0)+"% ",1),(x.value?.margin_percent??0)>0?(u(),D(s(Me),{key:0,class:"h-5 w-5 opacity-70"})):F("",!0)],2),e[24]||(e[24]=t("p",{class:"text-[10px] text-muted-foreground mt-1 font-bold uppercase opacity-60"},"Gross Margin Analysis",-1))]),_:1})]),_:1})]),t("div",At,[a(s(p),{class:"bg-card text-card-foreground border-border/40 shadow-sm overflow-hidden transition-all hover:border-border"},{default:l(()=>[a(s(f),{class:"border-b border-border/40 bg-muted/20 px-6 py-4"},{default:l(()=>[t("div",It,[t("div",null,[a(s(C),{class:"text-lg font-black tracking-tight"},{default:l(()=>[...e[26]||(e[26]=[r("Usage Velocity",-1)])]),_:1}),a(s(M),{class:"text-xs font-medium"},{default:l(()=>[...e[27]||(e[27]=[r("Temporal token consumption analysis",-1)])]),_:1})]),t("div",Dt,[e[28]||(e[28]=t("p",{class:"text-[9px] uppercase font-black text-muted-foreground tracking-widest opacity-60 mb-1"},"Total Volume",-1)),a(s(K),{variant:"secondary",class:"font-black text-sm px-3 py-1"},{default:l(()=>[r(n(G(Ce.value)),1)]),_:1})])])]),_:1}),a(s(b),{class:"p-6"},{default:l(()=>[t("div",Ft,[t("canvas",{ref_key:"trendsCanvas",ref:X},null,512),Ae.value.length===0?(u(),B("div",Nt,[...e[29]||(e[29]=[t("p",{class:"text-sm font-bold text-muted-foreground/60 uppercase tracking-widest"},"Awaiting Usage Data... ",-1)])])):F("",!0)])]),_:1})]),_:1}),a(s(p),{class:"bg-card text-card-foreground border-border/40 shadow-sm overflow-hidden transition-all hover:border-border"},{default:l(()=>[a(s(f),{class:"border-b border-border/40 bg-muted/20 px-6 py-4"},{default:l(()=>[t("div",Rt,[t("div",null,[a(s(C),{class:"text-lg font-black tracking-tight"},{default:l(()=>[...e[30]||(e[30]=[r("Token Allocation",-1)])]),_:1}),a(s(M),{class:"text-xs font-medium"},{default:l(()=>[...e[31]||(e[31]=[r("Distribution by model architecture",-1)])]),_:1})]),t("div",jt,[e[32]||(e[32]=t("p",{class:"text-[9px] uppercase font-black text-muted-foreground tracking-widest opacity-60 mb-1"},"Direct Costs",-1)),a(s(K),{variant:"outline",class:"font-black text-sm px-3 py-1 border-primary/30 text-primary"},{default:l(()=>[r("$"+n($e.value.toFixed(3)),1)]),_:1})])])]),_:1}),a(s(b),{class:"p-6"},{default:l(()=>[t("div",Pt,[t("canvas",{ref_key:"modelsCanvas",ref:J},null,512),Ie.value.length===0?(u(),B("div",Ut,[...e[33]||(e[33]=[t("p",{class:"text-sm font-bold text-muted-foreground/60 uppercase tracking-widest"},"No Model Activity Detected",-1)])])):F("",!0)])]),_:1})]),_:1})]),t("div",Ot,[a(s(p),{class:"bg-card text-card-foreground border-border/40 shadow-sm relative overflow-hidden group"},{default:l(()=>[a(s(f),{class:"pb-4"},{default:l(()=>[a(s(C),{class:"text-base font-black flex items-center gap-2 tracking-tight"},{default:l(()=>[t("div",Lt,[a(s(me),{class:"h-4 w-4"})]),e[34]||(e[34]=r(" Liquidity & Solvency ",-1))]),_:1}),a(s(M),{class:"text-xs font-medium"},{default:l(()=>[...e[35]||(e[35]=[r("Capital reserve adequacy assessment",-1)])]),_:1})]),_:1}),a(s(b),null,{default:l(()=>[t("div",zt,[t("div",Mt,[t("div",Vt,[e[36]||(e[36]=t("span",{class:"text-muted-foreground/70"},"Unclaimed Liability",-1)),t("span",Et,n(y(A.value))+" items",1)]),t("div",qt,[t("div",{class:"h-full bg-gradient-to-r from-blue-700 via-blue-500 to-blue-400 rounded-full transition-all duration-1000 ease-in-out shadow-[0_0_12px_rgba(59,130,246,0.3)]",style:ge({width:Se.value})},null,4)])]),t("div",Wt,[t("div",Gt,[e[37]||(e[37]=t("span",{class:"text-muted-foreground/70"},"Liquid Asset Reserves",-1)),t("span",Ht,n(y(U.value))+" items",1)]),t("div",Kt,[t("div",{class:"h-full bg-gradient-to-r from-emerald-700 via-emerald-500 to-emerald-400 rounded-full transition-all duration-1000 ease-in-out shadow-[0_0_12px_rgba(16,185,129,0.3)]",style:ge({width:Te.value})},null,4)])]),t("div",Zt,[t("div",Xt,[e[38]||(e[38]=t("span",{class:"text-sm font-bold tracking-tight"},"Health Status",-1)),a(s(K),{variant:I.value>=100?"default":"destructive",class:"rounded-lg px-3 py-1 font-black text-[10px] uppercase"},{default:l(()=>[r(n(I.value>=100?"Fully Collateralized":"Under-Provisioned")+" ("+n(I.value.toFixed(0))+"%) ",1)]),_:1},8,["variant"])]),t("p",Jt,n(I.value>=100?`Current OpenAI credits are sufficient to cover 100% of outstanding user liabilities. The platform
                  is currently in a safe liquidity state.`:`Current reserves do not meet 1:1 coverage for user balances. Immediate top-up recommended to ensure
                  service continuity.`),1)])])]),_:1})]),_:1}),a(s(p),{class:"bg-card text-card-foreground border-border/40 shadow-sm overflow-hidden group"},{default:l(()=>[a(s(f),{class:"pb-0"},{default:l(()=>[a(s(C),{class:"text-base font-black flex items-center gap-2 tracking-tight"},{default:l(()=>[t("div",Qt,[a(s(fe),{class:"h-4 w-4"})]),e[39]||(e[39]=r(" Concentration Risk ",-1))]),_:1}),a(s(M),{class:"text-xs font-medium"},{default:l(()=>[...e[40]||(e[40]=[r("Exposure by top individual accounts",-1)])]),_:1})]),_:1}),t("div",Yt,[a(s(We),null,{default:l(()=>[a(s(Ge),{class:"hover:bg-transparent"},{default:l(()=>[a(s(le),{class:"border-b border-border/40 hover:bg-transparent"},{default:l(()=>[a(s(oe),{class:"text-[10px] font-black uppercase tracking-widest h-10"},{default:l(()=>[...e[41]||(e[41]=[r("Entity Name",-1)])]),_:1}),a(s(oe),{class:"text-right text-[10px] font-black uppercase tracking-widest h-10"},{default:l(()=>[...e[42]||(e[42]=[r("Balance ",-1)])]),_:1}),a(s(oe),{class:"text-right text-[10px] font-black uppercase tracking-widest h-10"},{default:l(()=>[...e[43]||(e[43]=[r("Provision ",-1)])]),_:1})]),_:1})]),_:1}),a(s(He),null,{default:l(()=>[(u(!0),B(Y,null,ee(ie.value,i=>(u(),D(s(le),{key:i.id,class:"border-b border-border/20 hover:bg-muted/30 transition-all group/row"},{default:l(()=>[a(s(H),{class:"py-3"},{default:l(()=>[t("div",es,n(i.name),1),t("div",ts,n(i.email),1)]),_:2},1024),a(s(H),{class:"text-right font-mono text-xs font-bold"},{default:l(()=>[r(n(y(i.word_balance))+" ",1),e[44]||(e[44]=t("span",{class:"text-[9px] opacity-40"},"WD",-1))]),_:2},1024),a(s(H),{class:"text-right font-mono text-xs text-muted-foreground font-medium"},{default:l(()=>[r(n(G(Math.round(i.word_balance*1.5)))+" ",1),e[45]||(e[45]=t("span",{class:"text-[9px] opacity-40"},"TK",-1))]),_:2},1024)]),_:2},1024))),128)),ie.value.length===0?(u(),D(s(le),{key:0},{default:l(()=>[a(s(H),{colspan:"3",class:"py-16 text-center"},{default:l(()=>[...e[46]||(e[46]=[t("p",{class:"text-xs font-bold text-muted-foreground/40 uppercase tracking-[0.2em]"},"Zero Liability Detected",-1)])]),_:1})]),_:1})):F("",!0)]),_:1})]),_:1})])]),_:1})]),a(s(p),{class:"bg-card text-card-foreground border-border/40 shadow-sm overflow-hidden group border-t-2 border-t-primary/20"},{default:l(()=>[a(s(f),{class:"bg-muted/30 border-b border-border/40 px-6 py-4"},{default:l(()=>[t("div",ss,[t("div",as,[a(s(be),{class:"h-4 w-4"})]),t("div",null,[a(s(C),{class:"text-base font-black tracking-tight"},{default:l(()=>[...e[47]||(e[47]=[r("Financial Unit Standards",-1)])]),_:1}),a(s(M),{class:"text-[10px] font-bold uppercase tracking-widest opacity-60"},{default:l(()=>[...e[48]||(e[48]=[r("Settlement Rates (USD per 1K Tokens)",-1)])]),_:1})])])]),_:1}),a(s(b),{class:"p-0"},{default:l(()=>[t("div",ls,[(u(!0),B(Y,null,ee(ke.value,(i,g)=>(u(),B("div",{key:g,class:"group/item p-6 hover:bg-muted/20 transition-all"},[t("div",os,[t("p",rs,n(g),1),e[50]||(e[50]=t("div",{class:"h-px flex-1 mx-4 bg-border/20"},null,-1)),a(s(K),{variant:"outline",class:"text-[9px] font-black uppercase tracking-tighter py-0 px-2 border-primary/20 bg-primary/5 text-primary"},{default:l(()=>[...e[49]||(e[49]=[r(" External API",-1)])]),_:1})]),t("div",ns,[t("div",is,[e[51]||(e[51]=t("div",{class:"flex items-center gap-2"},[t("div",{class:"w-1 h-1 rounded-full bg-blue-500"}),t("span",{class:"text-muted-foreground font-bold text-[10px] uppercase"},"Input")],-1)),t("span",ds,"$"+n(i.prompt.toFixed(5)),1)]),t("div",us,[e[52]||(e[52]=t("div",{class:"flex items-center gap-2"},[t("div",{class:"w-1 h-1 rounded-full bg-emerald-500"}),t("span",{class:"text-muted-foreground font-bold text-[10px] uppercase"},"Output")],-1)),t("span",cs,"$"+n(i.completion.toFixed(5)),1)])])]))),128))])]),_:1})]),_:1})]),a(s(Ke),{open:R.value,"onUpdate:open":e[3]||(e[3]=i=>R.value=i)},{default:l(()=>[a(s(Ze),{class:"sm:max-w-[425px]"},{default:l(()=>[a(s(Qe),null,{default:l(()=>[a(s(Ye),{class:"flex items-center gap-2"},{default:l(()=>[a(s(se),{class:"h-5 w-5 text-emerald-500"}),e[53]||(e[53]=r(" Update OpenAI Credit Balance ",-1))]),_:1}),a(s(Xe),null,{default:l(()=>[...e[54]||(e[54]=[r(" Set your current OpenAI credit balance. This will be used to calculate live depletion based on actual API costs. ",-1)])]),_:1})]),_:1}),t("div",ps,[t("div",fs,[a(s(xe),{for:"initial_balance"},{default:l(()=>[...e[55]||(e[55]=[r("Initial Balance (USD)",-1)])]),_:1}),t("div",ms,[e[56]||(e[56]=t("span",{class:"absolute left-3 top-1/2 -translate-y-1/2 text-muted-foreground"},"$",-1)),a(s(ve),{id:"initial_balance",modelValue:w.value.initial_balance,"onUpdate:modelValue":e[0]||(e[0]=i=>w.value.initial_balance=i),type:"number",step:"0.01",min:"0",class:"pl-7",placeholder:"0.00"},null,8,["modelValue"])]),e[57]||(e[57]=t("p",{class:"text-xs text-muted-foreground"}," Enter the amount you topped up in your OpenAI account. ",-1))]),t("div",bs,[a(s(xe),{for:"notes"},{default:l(()=>[...e[58]||(e[58]=[r("Notes (optional)",-1)])]),_:1}),a(s(ve),{id:"notes",modelValue:w.value.notes,"onUpdate:modelValue":e[1]||(e[1]=i=>w.value.notes=i),type:"text",placeholder:"e.g., Top-up on Dec 30, 2025"},null,8,["modelValue"])]),S.value?(u(),B("div",gs,[e[63]||(e[63]=t("p",{class:"text-xs font-bold uppercase tracking-wider text-muted-foreground"},"Live Calculation Preview",-1)),t("div",vs,[t("div",null,[e[59]||(e[59]=t("span",{class:"text-muted-foreground"},"Initial:",-1)),t("span",xs,"$"+n(k(w.value.initial_balance||0)),1)]),t("div",null,[e[60]||(e[60]=t("span",{class:"text-muted-foreground"},"API Costs:",-1)),t("span",_s,"$"+n(k(S.value.costs_since_set)),1)]),t("div",ys,[e[61]||(e[61]=t("span",{class:"text-muted-foreground"},"Available:",-1)),t("span",ws,"$"+n(k(Math.max(0,(parseFloat(w.value.initial_balance)||0)-(S.value.costs_since_set||0)))),1)])]),t("p",ks,[e[62]||(e[62]=t("span",{class:"font-medium"},"Source:",-1)),r(" "+n(S.value.cost_source==="openai_api"?"OpenAI Costs API":"Local Usage Logs"),1)])])):F("",!0)]),a(s(Je),null,{default:l(()=>[a(s(V),{variant:"outline",onClick:e[2]||(e[2]=i=>R.value=!1)},{default:l(()=>[...e[64]||(e[64]=[r("Cancel",-1)])]),_:1}),a(s(V),{onClick:Re,disabled:j.value},{default:l(()=>[j.value?(u(),D(s(te),{key:0,class:"h-4 w-4 mr-2 animate-spin"})):F("",!0),r(" "+n(j.value?"Saving...":"Save Balance"),1)]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["open"])]),_:1}))}});export{Ks as default};
