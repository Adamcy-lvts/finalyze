import{q as M,al as G,am as O,A as j,b as _,an as K,B as y,ag as L,x as z,d as S,z as H,ao as Y,T as C,f as W,C as J,a as q,o as $,w as F,K as Q,u as E,r as k}from"./app-0JHqRB61.js";import{u as X,c as Z}from"./Presence-3kC5uYjS.js";import{S as R,P as N}from"./index-BA7pPwYs.js";import{b as ee,u as te}from"./useForwardExpose-CTg11IGI.js";function T(){let e=document.activeElement;if(e==null)return null;for(;e!=null&&e.shadowRoot!=null&&e.shadowRoot.activeElement!=null;)e=e.shadowRoot.activeElement;return e}function oe(e){const t=M(),n=t?.type.emits,o={};return n?.length||console.warn(`No emitted event found. Please check component: ${t?.type.__name}`),n?.forEach(r=>{o[G(O(r))]=(...i)=>e(r,...i)}),o}function re(e){const t=M(),n=Object.keys(t?.type.props??{}).reduce((r,i)=>{const a=(t?.type.props[i]).default;return a!==void 0&&(r[i]=a),r},{}),o=j(e);return _(()=>{const r={},i=t?.vnode.props??{};return Object.keys(i).forEach(a=>{r[O(a)]=i[a]}),Object.keys({...n,...r}).reduce((a,v)=>(o.value[v]!==void 0&&(a[v]=o.value[v]),a),{})})}function ge(e,t){const n=re(e),o=t?oe(t):{};return _(()=>({...n.value,...o}))}function ye(e,t="reka"){return`${t}-${K?.()}`}function P(){const e=y(),t=_(()=>["#text","#comment"].includes(e.value?.$el.nodeName)?e.value?.$el.nextElementSibling:ee(e));return{primitiveElement:e,currentElement:t}}const x="data-reka-collection-item";function ne(e={}){const{key:t="",isProvider:n=!1}=e,o=`${t}CollectionProvider`;let r;if(n){const l=y(new Map);r={collectionRef:y(),itemMap:l},L(o,r)}else r=z(o);const i=(l=!1)=>{const s=r.collectionRef.value;if(!s)return[];const u=Array.from(s.querySelectorAll(`[${x}]`)),p=Array.from(r.itemMap.value.values()).sort((m,h)=>u.indexOf(m.ref)-u.indexOf(h.ref));return l?p:p.filter(m=>m.ref.dataset.disabled!=="")},a=S({name:"CollectionSlot",setup(l,{slots:s}){const{primitiveElement:u,currentElement:f}=P();return W(f,()=>{r.collectionRef.value=f.value}),()=>C(R,{ref:u},s)}}),v=S({name:"CollectionItem",inheritAttrs:!1,props:{value:{validator:()=>!0}},setup(l,{slots:s,attrs:u}){const{primitiveElement:f,currentElement:p}=P();return H(m=>{if(p.value){const h=Y(p.value);r.itemMap.value.set(h,{ref:p.value,value:l.value}),m(()=>r.itemMap.value.delete(h))}}),()=>C(R,{...u,[x]:"",ref:f},s)}}),I=_(()=>Array.from(r.itemMap.value.values())),w=_(()=>r.itemMap.value.size);return{getItems:i,reactiveItems:I,itemMapSize:w,CollectionSlot:a,CollectionItem:v}}const ae="rovingFocusGroup.onEntryFocus",se={bubbles:!1,cancelable:!0},ie={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function le(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function we(e,t,n){const o=le(e.key,n);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(o))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(o)))return ie[o]}function ue(e,t=!1){const n=T();for(const o of e)if(o===n||(o.focus({preventScroll:t}),T()!==n))return}function be(e,t){return e.map((n,o)=>e[(t+o)%e.length])}const[Ee,ce]=Z("RovingFocusGroup");var de=S({__name:"RovingFocusGroup",props:{orientation:{type:String,required:!1,default:void 0},dir:{type:String,required:!1},loop:{type:Boolean,required:!1,default:!1},currentTabStopId:{type:[String,null],required:!1},defaultCurrentTabStopId:{type:String,required:!1},preventScrollOnEntryFocus:{type:Boolean,required:!1,default:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["entryFocus","update:currentTabStopId"],setup(e,{expose:t,emit:n}){const o=e,r=n,{loop:i,orientation:a,dir:v}=J(o),I=X(v),w=te(o,"currentTabStopId",r,{defaultValue:o.defaultCurrentTabStopId,passive:o.currentTabStopId===void 0}),l=y(!1),s=y(!1),u=y(0),{getItems:f,CollectionSlot:p}=ne({isProvider:!0});function m(c){const g=!s.value;if(c.currentTarget&&c.target===c.currentTarget&&g&&!l.value){const b=new CustomEvent(ae,se);if(c.currentTarget.dispatchEvent(b),r("entryFocus",b),!b.defaultPrevented){const A=f().map(d=>d.ref).filter(d=>d.dataset.disabled!==""),B=A.find(d=>d.getAttribute("data-active")===""),V=A.find(d=>d.getAttribute("data-highlighted")===""),D=A.find(d=>d.id===w.value),U=[B,V,D,...A].filter(Boolean);ue(U,o.preventScrollOnEntryFocus)}}s.value=!1}function h(){setTimeout(()=>{s.value=!1},1)}return t({getItems:f}),ce({loop:i,dir:I,orientation:a,currentTabStopId:w,onItemFocus:c=>{w.value=c},onItemShiftTab:()=>{l.value=!0},onFocusableItemAdd:()=>{u.value++},onFocusableItemRemove:()=>{u.value--}}),(c,g)=>($(),q(E(p),null,{default:F(()=>[Q(E(N),{tabindex:l.value||u.value===0?-1:0,"data-orientation":E(a),as:c.as,"as-child":c.asChild,dir:E(I),style:{outline:"none"},onMousedown:g[0]||(g[0]=b=>s.value=!0),onMouseup:h,onFocus:m,onBlur:g[1]||(g[1]=b=>l.value=!1)},{default:F(()=>[k(c.$slots,"default")]),_:3},8,["tabindex","data-orientation","as","as-child","dir"])]),_:3}))}}),_e=de,fe=S({__name:"VisuallyHidden",props:{feature:{type:String,required:!1,default:"focusable"},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"span"}},setup(e){return(t,n)=>($(),q(E(N),{as:t.as,"as-child":t.asChild,"aria-hidden":t.feature==="focusable"?"true":void 0,"data-hidden":t.feature==="fully-hidden"?"":void 0,tabindex:t.feature==="fully-hidden"?"-1":void 0,style:{position:"absolute",border:0,width:"1px",height:"1px",padding:0,margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",clipPath:"inset(50%)",whiteSpace:"nowrap",wordWrap:"normal",top:"-1px",left:"-1px"}},{default:F(()=>[k(t.$slots,"default")]),_:3},8,["as","as-child","aria-hidden","data-hidden","tabindex"]))}}),Ie=fe;export{_e as R,Ie as V,ne as a,ge as b,P as c,re as d,oe as e,ue as f,we as g,T as h,Ee as i,ye as u,be as w};
