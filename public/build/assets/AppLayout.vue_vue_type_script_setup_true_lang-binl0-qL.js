import{k as ee,r as se,f as T,h as te,b as A,c as W,d as z,g as ae,j as V,u as re,_ as le,a as ne,e as oe,i as ie,l as ue}from"./UserInfo.vue_vue_type_script_setup_true_lang-v_exjHTe.js";import{d as f,g as d,o as n,w as l,l as b,N as q,u as e,be as de,bf as ce,m as L,c as p,n as g,T as N,e as s,F as k,f as O,b as c,aA as H,t as S,h as y,V as x,a as w,X,av as fe,bH as pe,bt as _e,bN as me,_ as he,bM as be,cU as ve,aU as ge,aS as we,aD as ye,aM as $e,j as ke,b0 as xe,b1 as Ce,r as I,Q as Se,R as Pe,bA as U,cV as Re,a5 as Be,aa as J,a6 as Ie}from"./vendor-uetObkEM.js";import{e as G,f as M,c as j,_ as Le,a as Ee,b as Ae,d as We}from"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-D0QDUflG.js";import{b as ze}from"./useForwardExpose-DPVzQ8i8.js";import{P as Q,c as E,_ as C}from"./index-BO9Svwi4.js";import{_ as Y}from"./AppLogo.vue_vue_type_script_setup_true_lang-Cjl2joc8.js";import{e as Ne}from"./WordBalanceDisplay.vue_vue_type_script_setup_true_lang-61K7D1z0.js";import{u as De,_ as Me}from"./app-Csa4C17R.js";import{u as je}from"./useWordBalance-CYMZHoPw.js";var Oe=f({__name:"MenuGroup",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(o){const t=o;return(r,a)=>(n(),d(e(Q),q({role:"group"},t),{default:l(()=>[b(r.$slots,"default")]),_:3},16))}}),Ue=Oe,Fe=f({__name:"DropdownMenuGroup",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(o){const t=o;return ze(),(r,a)=>(n(),d(e(Ue),de(ce(t)),{default:l(()=>[b(r.$slots,"default")]),_:3},16))}}),Ge=Fe;const Te=f({__name:"DropdownMenuGroup",props:{asChild:{type:Boolean},as:{}},setup(o){const t=o;return(r,a)=>(n(),d(e(Ge),q({"data-slot":"dropdown-menu-group"},t),{default:l(()=>[b(r.$slots,"default")]),_:3},16))}}),Ve=f({__name:"AppContent",props:{variant:{},class:{}},setup(o){const t=o,r=L(()=>t.class);return(a,i)=>t.variant==="sidebar"?(n(),d(e(ee),{key:0,class:g(r.value)},{default:l(()=>[b(a.$slots,"default")]),_:3},8,["class"])):(n(),p("main",{key:1,class:g(["mx-auto flex h-full w-full max-w-7xl flex-1 flex-col gap-4 rounded-xl",r.value])},[b(a.$slots,"default")],2))}}),qe=f({__name:"AppShell",props:{variant:{},class:{}},setup(o){const t=o,r=N().props.sidebarOpen;return(a,i)=>a.variant==="header"?(n(),p("div",{key:0,class:g(["flex min-h-screen w-full flex-col",t.class])},[b(a.$slots,"default")],2)):(n(),d(e(se),{key:1,"default-open":e(r),class:g(t.class)},{default:l(()=>[b(a.$slots,"default")]),_:3},8,["default-open","class"]))}}),He=["href"],Xe=f({__name:"NavFooter",props:{items:{},class:{}},setup(o){return(t,r)=>(n(),d(e(T),{class:g(`group-data-[collapsible=icon]:p-0 ${t.$props.class||""}`)},{default:l(()=>[s(e(te),null,{default:l(()=>[s(e(A),null,{default:l(()=>[(n(!0),p(k,null,O(t.items,a=>(n(),d(e(W),{key:a.title},{default:l(()=>[s(e(z),{class:"text-neutral-600 hover:text-neutral-800 dark:text-neutral-300 dark:hover:text-neutral-100","as-child":""},{default:l(()=>[c("a",{href:a.href,target:"_blank",rel:"noopener noreferrer"},[(n(),d(H(a.icon))),c("span",null,S(a.title),1)],8,He)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1},8,["class"]))}}),Je=f({__name:"NavMain",props:{items:{}},setup(o){const t=N();return(r,a)=>(n(),d(e(T),{class:"px-2 py-0"},{default:l(()=>[s(e(ae),null,{default:l(()=>[...a[0]||(a[0]=[y("Platform",-1)])]),_:1}),s(e(A),null,{default:l(()=>[(n(!0),p(k,null,O(r.items,i=>(n(),d(e(W),{key:i.title},{default:l(()=>[s(e(z),{"as-child":"","is-active":i.href===e(t).url,tooltip:i.title},{default:l(()=>[s(e(x),{href:i.href},{default:l(()=>[(n(),d(H(i.icon))),c("span",null,S(i.title),1)]),_:2},1032,["href"])]),_:2},1032,["is-active","tooltip"])]),_:2},1024))),128))]),_:1})]),_:1}))}}),Qe={class:"flex items-center gap-2 px-1 py-1.5 text-left text-sm"},Ye={class:"flex items-center justify-between text-xs"},Ke={class:"flex items-center gap-1.5 text-muted-foreground"},Ze={class:"font-semibold text-foreground"},es={class:"mt-1.5 h-1 w-full overflow-hidden rounded-full bg-muted"},ss=f({__name:"UserMenuContent",props:{user:{}},setup(o){const t=()=>{he.flushAll()},r=N(),a=L(()=>r.props.auth),i=L(()=>a.value?.user?.word_balance_data);return(m,u)=>(n(),p(k,null,[s(e(G),{class:"p-0 font-normal"},{default:l(()=>[c("div",Qe,[s(V,{user:m.user,"show-email":!0},null,8,["user"])])]),_:1}),i.value?(n(),d(e(M),{key:0})):w("",!0),i.value?(n(),d(e(G),{key:1,class:"px-2 py-1.5"},{default:l(()=>[c("div",Ye,[c("div",Ke,[s(e(X),{class:"h-3.5 w-3.5"}),u[0]||(u[0]=c("span",null,"Credit Balance",-1))]),c("span",Ze,S(i.value.formatted_balance),1)]),c("div",es,[c("div",{class:"h-full bg-primary transition-all duration-300",style:fe({width:`${i.value.percentage_remaining}%`})},null,4)])]),_:1})):w("",!0),s(e(M)),s(e(Te),null,{default:l(()=>[s(e(j),{"as-child":!0},{default:l(()=>[s(e(x),{class:"block w-full",href:m.route("pricing"),prefetch:"",as:"button"},{default:l(()=>[s(e(pe),{class:"mr-2 h-4 w-4"}),u[1]||(u[1]=y(" Buy Credits ",-1))]),_:1},8,["href"])]),_:1}),s(e(j),{"as-child":!0},{default:l(()=>[s(e(x),{class:"block w-full",href:m.route("profile.edit"),prefetch:"",as:"button"},{default:l(()=>[s(e(_e),{class:"mr-2 h-4 w-4"}),u[2]||(u[2]=y(" Settings ",-1))]),_:1},8,["href"])]),_:1})]),_:1}),s(e(M)),s(e(j),{"as-child":!0},{default:l(()=>[s(e(x),{class:"block w-full",method:"post",href:m.route("logout"),onClick:t,as:"button"},{default:l(()=>[s(e(me),{class:"mr-2 h-4 w-4"}),u[3]||(u[3]=y(" Log out ",-1))]),_:1},8,["href"])]),_:1})],64))}}),ts=f({__name:"NavUser",setup(o){const r=N().props.auth?.user,{isMobile:a,state:i}=re();return(m,u)=>e(r)?(n(),d(e(A),{key:0},{default:l(()=>[s(e(W),null,{default:l(()=>[s(e(Le),null,{default:l(()=>[s(e(Ee),{"as-child":""},{default:l(()=>[s(e(z),{size:"lg",class:"data-[state=open]:bg-sidebar-accent data-[state=open]:text-sidebar-accent-foreground"},{default:l(()=>[s(V,{user:e(r)},null,8,["user"]),s(e(be),{class:"ml-auto size-4"})]),_:1})]),_:1}),s(e(Ae),{class:"w-(--reka-dropdown-menu-trigger-width) min-w-56 rounded-lg",side:e(a)?"bottom":e(i)==="collapsed"?"left":"bottom",align:"end","side-offset":4},{default:l(()=>[s(ss,{user:e(r)},null,8,["user"])]),_:1},8,["side"])]),_:1})]),_:1})]),_:1})):w("",!0)}}),as={class:"flex items-center justify-center"},rs=f({__name:"AppSidebar",setup(o){const t=[{title:"Dashboard",href:"/dashboard",icon:ve},{title:"My Projects",href:"/projects",icon:ge},{title:"Topic Library",href:"/projects/topics",icon:we},{title:"New Project",href:"/projects/create",icon:ye},{title:"Buy Credits",href:"/pricing",icon:X}],r=[{title:"Documentation",href:"#",icon:$e}];return(a,i)=>(n(),p(k,null,[s(e(le),{id:"app-sidebar",collapsible:"icon",variant:"inset"},{default:l(()=>[s(e(ne),null,{default:l(()=>[s(e(A),null,{default:l(()=>[s(e(W),null,{default:l(()=>[s(e(z),{size:"lg","as-child":""},{default:l(()=>[s(e(x),{href:a.route("dashboard")},{default:l(()=>[c("div",as,[s(Y,{class:"h-10 w-auto"})])]),_:1},8,["href"])]),_:1})]),_:1})]),_:1})]),_:1}),s(e(oe),null,{default:l(()=>[s(Je,{items:t})]),_:1}),s(e(ie),null,{default:l(()=>[s(Xe,{items:r}),s(ts)]),_:1})]),_:1}),b(a.$slots,"default")],64))}}),ls=f({__name:"Breadcrumb",props:{class:{}},setup(o){const t=o;return(r,a)=>(n(),p("nav",{"aria-label":"breadcrumb","data-slot":"breadcrumb",class:g(t.class)},[b(r.$slots,"default")],2))}}),ns=f({__name:"BreadcrumbItem",props:{class:{}},setup(o){const t=o;return(r,a)=>(n(),p("li",{"data-slot":"breadcrumb-item",class:g(e(E)("inline-flex items-center gap-1.5",t.class))},[b(r.$slots,"default")],2))}}),os=f({__name:"BreadcrumbLink",props:{asChild:{type:Boolean},as:{default:"a"},class:{}},setup(o){const t=o;return(r,a)=>(n(),d(e(Q),{"data-slot":"breadcrumb-link",as:r.as,"as-child":r.asChild,class:g(e(E)("hover:text-foreground transition-colors",t.class))},{default:l(()=>[b(r.$slots,"default")]),_:3},8,["as","as-child","class"]))}}),is=f({__name:"BreadcrumbList",props:{class:{}},setup(o){const t=o;return(r,a)=>(n(),p("ol",{"data-slot":"breadcrumb-list",class:g(e(E)("text-muted-foreground flex flex-wrap items-center gap-1.5 text-sm break-words sm:gap-2.5",t.class))},[b(r.$slots,"default")],2))}}),us=f({__name:"BreadcrumbPage",props:{class:{}},setup(o){const t=o;return(r,a)=>(n(),p("span",{"data-slot":"breadcrumb-page",role:"link","aria-disabled":"true","aria-current":"page",class:g(e(E)("text-foreground font-normal",t.class))},[b(r.$slots,"default")],2))}}),ds=f({__name:"BreadcrumbSeparator",props:{class:{}},setup(o){const t=o;return(r,a)=>(n(),p("li",{"data-slot":"breadcrumb-separator",role:"presentation","aria-hidden":"true",class:g(e(E)("[&>svg]:size-3.5",t.class))},[b(r.$slots,"default",{},()=>[s(e(ke))])],2))}}),cs=f({__name:"Breadcrumbs",props:{breadcrumbs:{}},setup(o){return(t,r)=>(n(),d(e(ls),null,{default:l(()=>[s(e(is),null,{default:l(()=>[(n(!0),p(k,null,O(t.breadcrumbs,(a,i)=>(n(),p(k,{key:i},[s(e(ns),null,{default:l(()=>[i===t.breadcrumbs.length-1?(n(),d(e(us),{key:0},{default:l(()=>[y(S(a.title),1)]),_:2},1024)):(n(),d(e(os),{key:1,"as-child":""},{default:l(()=>[s(e(x),{href:a.href??"#"},{default:l(()=>[y(S(a.title),1)]),_:2},1032,["href"])]),_:2},1024))]),_:2},1024),i!==t.breadcrumbs.length-1?(n(),d(e(ds),{key:0})):w("",!0)],64))),128))]),_:1})]),_:1}))}}),fs=f({__name:"ThemeToggle",setup(o){const{toggle:t}=De(),r=()=>{t()};return(a,i)=>(n(),d(e(C),{variant:"ghost",size:"icon",onClick:i[0]||(i[0]=m=>r()),class:"w-9 h-9 rounded-full relative overflow-hidden text-foreground"},{default:l(()=>[s(e(xe),{class:"h-[1.2rem] w-[1.2rem] rotate-0 scale-100 transition-all dark:-rotate-90 dark:scale-0"}),s(e(Ce),{class:"absolute h-[1.2rem] w-[1.2rem] rotate-90 scale-0 transition-all dark:rotate-0 dark:scale-100"}),i[1]||(i[1]=c("span",{class:"sr-only"},"Toggle theme",-1))]),_:1}))}}),ps={id:"app-header",class:"flex h-16 shrink-0 items-center gap-2 border-b border-sidebar-border/70 px-6 transition-[width,height] ease-linear group-has-data-[collapsible=icon]/sidebar-wrapper:h-12 md:px-4"},_s={class:"flex items-center gap-2"},ms={class:"ml-auto flex items-center gap-2"},hs=f({__name:"AppSidebarHeader",props:{breadcrumbs:{default:()=>[]}},setup(o){const{wordBalance:t}=je();return(r,a)=>(n(),p("header",ps,[c("div",_s,[s(e(ue),{class:"-ml-1"}),r.breadcrumbs&&r.breadcrumbs.length>0?(n(),d(cs,{key:0,breadcrumbs:r.breadcrumbs},null,8,["breadcrumbs"])):w("",!0)]),c("div",ms,[s(fs),e(t)?(n(),d(Ne,{key:0,balance:e(t),compact:""},null,8,["balance"])):w("",!0)])]))}});function bs(o={}){const{immediate:t=!1,onNeedRefresh:r,onOfflineReady:a,onRegistered:i,onRegisteredSW:m,onRegisterError:u}=o;let v,$,P;const D=async(h=!0)=>{await $,P?.()};async function R(){if("serviceWorker"in navigator){if(v=await Me(async()=>{const{Workbox:h}=await import("./workbox-window.prod.es5-BIl4cyR9.js");return{Workbox:h}},[]).then(({Workbox:h})=>new h("/build/sw.js",{scope:"/build/",type:"classic"})).catch(h=>{u?.(h)}),!v)return;P=()=>{v?.messageSkipWaiting()};{let h=!1;const B=()=>{h=!0,v?.addEventListener("controlling",_=>{_.isUpdate&&window.location.reload()}),r?.()};v.addEventListener("installed",_=>{typeof _.isUpdate>"u"?typeof _.isExternal<"u"&&_.isExternal?B():!h&&a?.():_.isUpdate||a?.()}),v.addEventListener("waiting",B)}v.register({immediate:t}).then(h=>{m?m("/build/sw.js",h):i?.(h)}).catch(h=>{u?.(h)})}}return $=R(),D}function vs(o={}){const{immediate:t=!0,onNeedRefresh:r,onOfflineReady:a,onRegistered:i,onRegisteredSW:m,onRegisterError:u}=o,v=I(!1),$=I(!1);return{updateServiceWorker:bs({immediate:t,onNeedRefresh(){v.value=!0,r?.()},onOfflineReady(){$.value=!0,a?.()},onRegistered:i,onRegisteredSW:m,onRegisterError:u}),offlineReady:$,needRefresh:v}}function F(){const{needRefresh:o,offlineReady:t,updateServiceWorker:r}=vs({onRegistered(_){_&&setInterval(()=>{_.update()},36e5)},onRegisterError(_){console.error("SW registration error:",_)}}),a=I(null),i=L(()=>a.value!==null),m=I(!1),u=_=>{_.preventDefault(),a.value=_},v=()=>{a.value=null,m.value=!0},$=async()=>{if(!a.value)return!1;await a.value.prompt();const{outcome:_}=await a.value.userChoice;return _==="accepted"?(a.value=null,m.value=!0,!0):!1},P=()=>{a.value=null,localStorage.setItem("pwa-install-dismissed",Date.now().toString())},D=L(()=>{if(!i.value)return!1;const _=localStorage.getItem("pwa-install-dismissed");if(_){const K=parseInt(_,10),Z=10080*60*1e3;if(Date.now()-K<Z)return!1}return!0}),R=I(typeof navigator<"u"?navigator.onLine:!0),h=()=>{R.value=!0},B=()=>{R.value=!1};return Se(()=>{typeof window<"u"&&window.matchMedia("(display-mode: standalone)").matches&&(m.value=!0),typeof window<"u"&&(window.addEventListener("beforeinstallprompt",u),window.addEventListener("appinstalled",v),window.addEventListener("online",h),window.addEventListener("offline",B))}),Pe(()=>{typeof window<"u"&&(window.removeEventListener("beforeinstallprompt",u),window.removeEventListener("appinstalled",v),window.removeEventListener("online",h),window.removeEventListener("offline",B))}),{needRefresh:o,offlineReady:t,updateServiceWorker:r,canInstall:i,isInstalled:m,installApp:$,dismissInstallPrompt:P,shouldShowInstallPrompt:D,isOnline:R}}const gs={key:0,class:"fixed left-0 right-0 top-0 z-50 flex items-center justify-center gap-2 bg-amber-500 px-4 py-2 text-sm font-medium text-amber-950 dark:bg-amber-600 dark:text-amber-50",role:"status","aria-live":"polite"},ws=f({__name:"OfflineIndicator",setup(o){const{isOnline:t}=F();return(r,a)=>(n(),d(U,{"enter-active-class":"transition duration-300 ease-out","enter-from-class":"-translate-y-full opacity-0","enter-to-class":"translate-y-0 opacity-100","leave-active-class":"transition duration-200 ease-in","leave-from-class":"translate-y-0 opacity-100","leave-to-class":"-translate-y-full opacity-0"},{default:l(()=>[e(t)?w("",!0):(n(),p("div",gs,[s(e(Re),{class:"h-4 w-4"}),a[0]||(a[0]=c("span",null,"You're offline. Some features may be limited.",-1))]))]),_:1}))}}),ys={key:0,class:"fixed bottom-4 left-4 right-4 z-50 mx-auto max-w-md rounded-lg border bg-card p-4 shadow-lg md:left-auto md:right-4",role:"alert"},$s={class:"flex items-start gap-3"},ks={class:"flex-1"},xs={key:0,class:"text-sm font-medium text-foreground"},Cs={key:1,class:"text-sm font-medium text-foreground"},Ss={class:"mt-1 text-xs text-muted-foreground"},Ps={class:"flex gap-2"},Rs=f({__name:"PWAUpdatePrompt",setup(o){const{needRefresh:t,offlineReady:r,updateServiceWorker:a}=F(),i=()=>{r.value=!1,t.value=!1};return(m,u)=>(n(),d(U,{"enter-active-class":"transition duration-300 ease-out","enter-from-class":"translate-y-full opacity-0","enter-to-class":"translate-y-0 opacity-100","leave-active-class":"transition duration-200 ease-in","leave-from-class":"translate-y-0 opacity-100","leave-to-class":"translate-y-full opacity-0"},{default:l(()=>[e(t)||e(r)?(n(),p("div",ys,[c("div",$s,[c("div",ks,[e(r)?(n(),p("p",xs,"App ready to work offline")):(n(),p("p",Cs,"New version available")),c("p",Ss,S(e(r)?"Content has been cached for offline use.":"Click update to get the latest features."),1)]),c("div",Ps,[e(t)?(n(),d(e(C),{key:0,size:"sm",onClick:u[0]||(u[0]=v=>e(a)(!0))},{default:l(()=>[s(e(Be),{class:"mr-1 h-3 w-3"}),u[1]||(u[1]=y(" Update ",-1))]),_:1})):w("",!0),s(e(C),{variant:"ghost",size:"sm",onClick:i},{default:l(()=>[s(e(J),{class:"h-4 w-4"})]),_:1})])])])):w("",!0)]),_:1}))}}),Bs={key:0,class:"fixed bottom-4 left-4 right-4 z-50 mx-auto max-w-md rounded-lg border bg-card p-4 shadow-lg md:left-auto md:right-4",role:"dialog","aria-label":"Install Finalyze app"},Is={class:"flex items-start gap-3"},Ls={class:"flex h-10 w-10 shrink-0 items-center justify-center rounded-lg bg-primary/10"},Es={class:"mt-3 flex justify-end gap-2"},As=f({__name:"PWAInstallPrompt",setup(o){const{shouldShowInstallPrompt:t,installApp:r,dismissInstallPrompt:a}=F(),i=async()=>{await r()};return(m,u)=>(n(),d(U,{"enter-active-class":"transition duration-300 ease-out","enter-from-class":"translate-y-full opacity-0","enter-to-class":"translate-y-0 opacity-100","leave-active-class":"transition duration-200 ease-in","leave-from-class":"translate-y-0 opacity-100","leave-to-class":"translate-y-full opacity-0"},{default:l(()=>[e(t)?(n(),p("div",Bs,[c("div",Is,[c("div",Ls,[s(Y,{class:"h-6 w-auto"})]),u[0]||(u[0]=c("div",{class:"flex-1"},[c("p",{class:"text-sm font-medium text-foreground"},"Install Finalyze"),c("p",{class:"mt-1 text-xs text-muted-foreground"},"Install the app for a better experience with offline access.")],-1)),s(e(C),{variant:"ghost",size:"icon",class:"h-6 w-6 shrink-0",onClick:e(a)},{default:l(()=>[s(e(J),{class:"h-4 w-4"})]),_:1},8,["onClick"])]),c("div",Es,[s(e(C),{variant:"outline",size:"sm",onClick:e(a)},{default:l(()=>[...u[1]||(u[1]=[y(" Not now ",-1)])]),_:1},8,["onClick"]),s(e(C),{size:"sm",onClick:i},{default:l(()=>[s(e(Ie),{class:"mr-1 h-3 w-3"}),u[2]||(u[2]=y(" Install ",-1))]),_:1})])])):w("",!0)]),_:1}))}}),Ws=f({__name:"AppSidebarLayout",props:{breadcrumbs:{default:()=>[]},class:{default:""},title:{default:""}},setup(o){return(t,r)=>(n(),p(k,null,[s(ws),s(qe,{variant:"sidebar",class:g(t.$props.class)},{default:l(()=>[s(rs),s(Ve,{variant:"sidebar",class:"overflow-x-hidden"},{default:l(()=>[s(hs,{breadcrumbs:t.breadcrumbs},null,8,["breadcrumbs"]),b(t.$slots,"default")]),_:3})]),_:3},8,["class"]),s(e(We),{position:"top-right",expand:!1,"rich-colors":!0,"close-button":!0}),s(Rs),s(As)],64))}}),Ts=f({__name:"AppLayout",props:{breadcrumbs:{default:()=>[]},class:{default:""}},setup(o){return(t,r)=>(n(),d(Ws,{breadcrumbs:t.breadcrumbs,class:g(t.$props.class)},{default:l(()=>[b(t.$slots,"default")]),_:3},8,["breadcrumbs","class"]))}});export{Ts as _,fs as a};
