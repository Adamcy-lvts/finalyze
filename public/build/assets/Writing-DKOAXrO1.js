import{d as Se,E as y,D as pe,g as M,h as Ee,c as m,o as d,w as a,e as t,k as r,u as s,R as v,S as b,s as n,t as p,n as $,T as H,a as f,F as L,z as Z,y as _,b as ce,U as me}from"./app-BI3B-WKV.js";import{_ as Ie,a as Le}from"./index-CVRpcFQ1.js";import{_ as R}from"./index-BVhQ2dbN.js";import{_ as g}from"./index-G9NCJgAI.js";import{_ as F,a as N}from"./CardContent.vue_vue_type_script_setup_true_lang-Crb8HVKN.js";import{_ as K}from"./CardDescription.vue_vue_type_script_setup_true_lang-C31iubih.js";import{_ as J,a as Q}from"./CardTitle.vue_vue_type_script_setup_true_lang-DyR4agyE.js";import{_ as X,a as ee,b as te,c as se,d as re,e as oe}from"./DialogTitle.vue_vue_type_script_setup_true_lang-P43XVmo9.js";import{_ as Re,a as Pe,b as ae,c as le}from"./TabsTrigger.vue_vue_type_script_setup_true_lang-CIz4wDk4.js";import{_ as We}from"./AppLayout.vue_vue_type_script_setup_true_lang-DhTOwKc2.js";import{B as ge,t as S}from"./Sonner.vue_vue_type_script_setup_true_lang-CCODHGN7.js";import{S as k}from"./square-pen-CR61DIYm.js";import{B as C}from"./brain-CJEwxkqj.js";import{A as De}from"./activity-D9yDL0D6.js";import{C as U}from"./clock-B07YaaH8.js";import{F as fe}from"./file-text-BAYJU_zM.js";import{P as ve}from"./play-BSipnInu.js";import{A as be}from"./arrow-right-DrRLa0p_.js";import{Z as xe}from"./zap-YtsEHZ04.js";import{S as V}from"./sparkles-DDvjZHSj.js";import{T as ne}from"./triangle-alert-BySPhGmw.js";import{T as he}from"./target-V7FSW6wF.js";import{C as Y}from"./check-Dz3DOZKS.js";import{A as Ue}from"./arrow-left-CfMQWqqv.js";import"./useForwardExpose-DM1p2FeE.js";import"./VisuallyHidden-WCocV3L8.js";import"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-BNjDpoNs.js";import"./RovingFocusItem-DDCGRq06.js";import"./UserInfo.vue_vue_type_script_setup_true_lang-DN1JgSYv.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-C5zVXWfQ.js";import"./chevron-right-Bxrlt0jD.js";import"./circle-check-NO4dix3F.js";const Be={class:"mx-auto max-w-7xl space-y-8 p-6"},ze={class:"flex items-center justify-between"},Oe={class:"relative overflow-hidden rounded-3xl border border-border/50 bg-gradient-to-b from-background to-muted/20 p-8 md:p-12"},Fe={class:"relative z-10 flex flex-col items-center text-center space-y-6"},Ne={class:"flex flex-wrap items-center justify-center gap-3"},Ve={class:"max-w-4xl text-2xl font-bold tracking-tight text-foreground sm:text-3xl md:text-4xl bg-clip-text text-transparent bg-gradient-to-r from-foreground to-foreground/70"},Ye={class:"flex items-center gap-1 sm:gap-2 rounded-full border border-border/50 bg-background/50 p-1 sm:p-1.5 shadow-sm backdrop-blur-sm"},qe=["onClick"],He={class:"grid gap-8 lg:grid-cols-3"},Ze={class:"space-y-8 lg:col-span-2 order-2 lg:order-1"},Ke={key:0,class:"group relative overflow-hidden rounded-2xl border border-border/50 bg-gradient-to-br from-amber-50/50 to-orange-50/50 p-6 dark:from-amber-950/10 dark:to-orange-950/10 transition-all hover:shadow-md"},Je={class:"flex flex-col gap-6 sm:flex-row sm:items-center sm:justify-between"},Qe={class:"space-y-2"},Xe={class:"flex items-center gap-2 text-amber-600 dark:text-amber-500"},et={class:"text-xl font-semibold tracking-tight"},tt={class:"flex flex-wrap items-center gap-4 text-sm text-muted-foreground"},st={class:"flex items-center gap-1.5"},rt={class:"flex items-center gap-1.5"},ot={class:"grid gap-4 sm:grid-cols-2"},at=["disabled"],lt={class:"rounded-full bg-green-100 p-3 text-green-600 dark:bg-green-900/20 dark:text-green-400"},nt={class:"text-sm text-muted-foreground"},it={class:"mt-auto flex items-center text-sm font-medium text-primary opacity-0 transition-opacity group-hover:opacity-100"},dt=["disabled"],ut={class:"rounded-full bg-purple-100 p-3 text-purple-600 dark:bg-purple-900/20 dark:text-purple-400"},pt={class:"text-sm text-muted-foreground"},ct={class:"mt-auto flex items-center text-sm font-medium text-purple-600 opacity-0 transition-opacity group-hover:opacity-100"},mt={key:1,class:"flex flex-col items-start gap-4 rounded-2xl border border-border/50 bg-muted/30 p-6 text-left"},gt={class:"rounded-full bg-gray-100 p-3 text-gray-600 dark:bg-gray-800 dark:text-gray-400"},ft={class:"grid gap-4"},vt={class:"flex items-start justify-between"},bt={class:"flex items-center justify-between"},xt={class:"text-sm text-muted-foreground"},ht={class:"flex gap-2"},wt={key:0,class:"rounded-xl border-2 border-dashed border-border/50 bg-muted/10 py-12 text-center"},yt={class:"mb-4 text-sm text-muted-foreground"},_t={class:"flex items-center gap-4"},kt={class:"p-3 rounded-xl bg-gradient-to-br from-yellow-500/20 to-orange-500/20 ring-1 ring-yellow-500/30"},Ct={class:"space-y-1"},jt={class:"space-y-5"},At={class:"grid gap-4 md:grid-cols-2"},$t={class:"flex items-start justify-between"},Gt={class:"p-2 rounded-lg bg-blue-500/10 text-blue-600 dark:text-blue-400"},Mt={class:"flex items-start justify-between"},Tt={class:"p-2 rounded-lg bg-purple-500/10 text-purple-600 dark:text-purple-400"},St={class:"pt-4"},Et={key:0,class:"space-y-4"},It={class:"text-sm text-center text-muted-foreground"},Lt={key:0,class:"flex items-center justify-center gap-2"},Rt={class:"font-mono font-bold text-foreground"},Pt={key:1,class:"text-amber-600 flex items-center justify-center gap-2"},Wt={key:1,class:"space-y-4"},Dt={class:"text-sm text-center text-muted-foreground flex items-center justify-center gap-2"},Ut={class:"rounded-2xl border border-blue-200/50 bg-gradient-to-br from-blue-50 to-indigo-50/50 p-6 dark:from-blue-950/20 dark:to-indigo-950/20 dark:border-blue-800/30"},Bt={class:"flex gap-4"},zt={class:"p-2 rounded-lg bg-blue-100 text-blue-600 dark:bg-blue-900/40 dark:text-blue-400 h-fit"},Ot={class:"flex gap-3"},Ft={class:"text-xs text-muted-foreground text-center"},Nt={class:"space-y-3"},Vt={class:"grid gap-3"},Yt={class:"flex items-center justify-between"},qt={class:"flex-1"},Ht={class:"font-medium group-hover:text-primary transition-colors"},Zt={class:"text-xs text-muted-foreground"},Kt={class:"mt-2"},Jt={class:"ml-2 text-xs text-muted-foreground"},Qt={class:"flex gap-2"},Xt={class:"space-y-6 order-1 lg:order-2"},es={class:"rounded-2xl border border-border/50 bg-card p-6 shadow-sm sticky top-6"},ts={class:"mb-6 flex items-center gap-2 font-semibold"},ss={class:"relative mx-auto mb-8 flex h-40 w-40 items-center justify-center"},rs={class:"h-full w-full -rotate-90 transform",viewBox:"0 0 100 100"},os=["stroke-dashoffset"],as={class:"absolute inset-0 flex flex-col items-center justify-center text-center"},ls={class:"text-3xl font-bold"},ns={class:"space-y-4"},is={class:"flex items-center justify-between rounded-lg bg-muted/50 p-3"},ds={class:"font-mono font-semibold"},us={class:"flex items-center justify-between rounded-lg bg-muted/50 p-3"},ps={class:"font-mono font-semibold"},cs={class:"space-y-2 text-sm"},ms={class:"space-y-1 text-muted-foreground ml-4 list-disc"},gs={class:"rounded-xl bg-gradient-to-br from-purple-50 to-pink-50 p-4 border border-purple-100"},fs={class:"flex items-start gap-3"},vs={class:"space-y-1"},bs={class:"text-sm text-purple-800/80"},xs={class:"space-y-3"},hs={class:"grid grid-cols-1 gap-2 sm:grid-cols-2"},ws={class:"flex items-center gap-2 rounded-lg border border-border/50 p-2 text-sm text-muted-foreground"},ys={class:"flex items-center gap-2 rounded-lg border border-border/50 p-2 text-sm text-muted-foreground"},_s={class:"flex items-center gap-2 rounded-lg border border-border/50 p-2 text-sm text-muted-foreground"},ks={class:"flex items-center gap-2 rounded-lg border border-border/50 p-2 text-sm text-muted-foreground"},Cs={class:"flex items-center gap-2 text-sm text-muted-foreground bg-muted/50 p-3 rounded-lg border border-border/50"},js={class:"rounded-xl bg-orange-50 p-4 border border-orange-200"},As={class:"flex items-start gap-3"},ar=Se({__name:"Writing",props:{project:{},targetWordCount:{},estimatedChapters:{}},setup(we){const u=we,P=y("overview"),j=y(!1),G=y("progressive"),T=y(!1),c=y(u.project.mode);pe(()=>u.project.mode,l=>{c.value=l},{immediate:!0});const W=y(!1),x=y("auto"),D=y(!1),B=y(!1),q=y(c.value==="auto");pe(c,l=>{q.value=l==="auto"},{immediate:!0});const ye=()=>{if(T.value)return;const l=c.value==="auto"?"manual":"auto";x.value=l,W.value=!0};console.log("ðŸ” INITIAL TOGGLE STATE:",{currentMode:c.value,isAutoMode:q.value,shouldBeChecked:c.value==="auto"});const ie=M(()=>u.project.chapters.reduce((l,e)=>l+e.word_count,0)),de=M(()=>u.project.progress!==void 0?u.project.progress:Math.min(ie.value/u.targetWordCount*100,100)),_e=M(()=>u.project.chapters.filter(l=>l.status!=="not_started"&&l.word_count>0).length),h=M(()=>{const l=u.project.category?.default_chapter_count||u.estimatedChapters,e=u.project.chapters.find(w=>w.status==="not_started"||w.content===null||w.content===""||w.content===void 0);if(e)return e.chapter_number<=l?e.chapter_number:null;const o=Math.max(...u.project.chapters.map(w=>w.chapter_number),0),i=o+1;return console.log("nextChapterNumber debug (Writing page):",{maxAllowedChapters:l,categoryName:u.project.category?.name,maxChapterNumber:o,nextNumber:i,withinLimits:i<=l}),i<=l?i:null}),A=M(()=>{const l=u.project.category?.default_chapter_count||u.estimatedChapters;return Math.max(...u.project.chapters.map(o=>o.chapter_number),0)<l&&h.value!==null}),z=M(()=>u.project.category?.default_chapter_count||u.estimatedChapters),E=M(()=>{const l=u.project.chapters.filter(e=>e.content&&e.content.trim()!==""&&e.updated_at);return l.length===0?null:l.reduce((e,o)=>new Date(o.updated_at)>new Date(e.updated_at)?o:e)}),ke=M(()=>{if(!E.value)return null;const l=new Date(E.value.updated_at),o=Math.floor((new Date().getTime()-l.getTime())/(1e3*60*60));return o<1?"Less than an hour ago":o<24?`${o} hours ago`:o<48?"Yesterday":`${Math.floor(o/24)} days ago`});Ee(()=>{P.value=c.value==="auto"?"ai-generation":"manual-writing"});const I=(l,e)=>{if(l==="bulk"){D.value=!0;return}const o=e||h.value;if(!o){S("Chapter Limit Reached",{description:`You have reached the maximum number of chapters (${z.value}) for this project category.`});return}const i=u.project.chapters.find(w=>w.chapter_number===o);i&&i.content&&i.content.trim()!==""&&!confirm(`Chapter ${o} already has content. Do you want to regenerate it?`)||v.visit(b("chapters.write",{project:u.project.slug,chapter:o})+"?ai_generate=true&generation_type="+l)},Ce=l=>{v.visit(b("chapters.edit",{project:u.project.slug,chapter:l}))},je=l=>{const e=u.project.chapters.find(i=>i.chapter_number===l),o=e?.content&&e.content.trim()!=="";if(u.project.mode==="manual"&&e){v.visit(b("projects.manual-editor.show",{project:u.project.slug,chapter:e.chapter_number}));return}o?v.visit(b("chapters.edit",{project:u.project.slug,chapter:l})):v.visit(b("chapters.write",{project:u.project.slug,chapter:l}))},O=l=>{if(console.log("ðŸš€ START CHAPTER CLICKED",{chapterNumber:l,projectMode:u.project.mode,projectSlug:u.project.slug}),u.project.mode==="manual"){console.log("ðŸ“ Manual mode detected, routing to manual editor...");const o=b("projects.manual-editor.show",{project:u.project.slug,chapter:l});console.log("âœ… Routing to manual editor:",o),v.visit(o);return}const e=b("chapters.write",{project:u.project.slug,chapter:l});console.log("ðŸ“„ Auto mode: Routing to chapters.write:",e),v.visit(e)},ue=l=>{switch(l){case"approved":return"bg-green-100 text-green-800 border-green-200";case"in_review":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"draft":return"bg-blue-100 text-blue-800 border-blue-200";default:return"bg-gray-100 text-gray-600 border-gray-200"}},Ae=l=>({1:"Introduction",2:"Literature Review",3:"Methodology",4:"Design and Implementation",5:"Results and Analysis",6:"Conclusion and Recommendations"})[l]||`Chapter ${l}`,$e=()=>{W.value=!1,Te()},Ge=()=>{D.value=!1,v.visit(b("projects.bulk-generate",u.project.slug)+"?start=true")},Me=()=>{B.value=!1;try{v.post(b("projects.go-back-to-topic-approval",u.project.slug),{},{onSuccess:()=>{S("Success",{description:"Returned to topic approval"})},onError:()=>{S("Error",{description:"Failed to go back. Please try again."})}})}catch{S("Error",{description:"Failed to go back. Please try again."})}},Te=async()=>{const l=x.value,e={auto:"AI Assisted",manual:"Manual"};console.log("ðŸ”„ TOGGLE - Function called",{currentMode:c.value,newMode:l}),console.log("ðŸ”„ TOGGLE - Mode change",{from:c.value,to:l}),console.log("ðŸ”„ TOGGLE - User confirmed, starting request"),T.value=!0;try{const o=b("projects.update-mode",u.project.slug);console.log("ðŸ”„ TOGGLE - Route URL:",o),v.patch(o,{mode:l},{onSuccess:i=>{console.log("ðŸ”„ TOGGLE - Success response:",i),c.value=l;const w=i.props?.flash?.message||`Switched to ${e[l]} writing mode`;S("Success",{description:w}),P.value=l==="auto"?"ai-generation":"manual-writing",console.log("ðŸ”„ TOGGLE - UI Updated:",{newMode:l,currentMode:c.value,isAutoMode:q.value,activeTab:P.value})},onError:i=>{console.error("ðŸ”„ TOGGLE - Error response:",i),S("Error",{description:"Failed to switch writing mode. Please try again."})},onFinish:()=>{console.log("ðŸ”„ TOGGLE - Request finished"),T.value=!1}})}catch(o){console.error("ðŸ”„ TOGGLE - Exception:",o),S("Error",{description:"Failed to switch writing mode. Please try again."}),T.value=!1}};return(l,e)=>(d(),m(We,{title:`Writing: ${l.project.title}`},{default:a(()=>[t("div",Be,[t("div",ze,[e[18]||(e[18]=t("div",{class:"flex items-center gap-3"},null,-1)),r(s(g),{onClick:e[0]||(e[0]=o=>s(v).visit(s(b)("projects.edit",l.project.slug))),variant:"outline",size:"sm"},{default:a(()=>[r(s(k),{class:"mr-2 h-4 w-4"}),e[17]||(e[17]=n(" Edit Project Details ",-1))]),_:1})]),t("div",Oe,[e[19]||(e[19]=t("div",{class:"absolute inset-0 bg-grid-primary/5 [mask-image:linear-gradient(0deg,transparent,black)]"},null,-1)),t("div",Fe,[t("div",Ne,[r(s(R),{variant:"secondary",class:"px-3 py-1 text-sm backdrop-blur-sm"},{default:a(()=>[n(p(l.project.type),1)]),_:1}),r(s(R),{variant:c.value==="auto"?"default":"outline",class:$(c.value==="auto"?"bg-blue-600 hover:bg-blue-700":"")},{default:a(()=>[(d(),m(H(c.value==="auto"?s(C):s(k)),{class:"mr-1.5 h-3.5 w-3.5"})),n(" "+p(c.value==="auto"?"AI Assisted":"Manual Writing"),1)]),_:1},8,["variant","class"])]),t("h1",Ve,p(l.project.title),1),t("div",Ye,[(d(),f(L,null,Z(["auto","manual"],o=>t("button",{key:o,onClick:i=>o!==c.value&&ye(),class:$(["relative flex items-center justify-center gap-1.5 sm:gap-2 rounded-full px-3 py-2 sm:px-6 sm:py-2.5 text-xs sm:text-sm font-medium transition-all duration-300 whitespace-nowrap",c.value===o?"bg-primary text-primary-foreground shadow-md":"text-muted-foreground hover:text-foreground hover:bg-muted/50"])},[(d(),m(H(o==="auto"?s(C):s(k)),{class:"h-3.5 w-3.5 sm:h-4 sm:w-4"})),n(" "+p(o==="auto"?"AI Mode":"Manual Mode"),1)],10,qe)),64))])])]),t("div",He,[t("div",Ze,[E.value?(d(),f("div",Ke,[t("div",Je,[t("div",Qe,[t("div",Xe,[r(s(De),{class:"h-4 w-4"}),e[20]||(e[20]=t("span",{class:"text-sm font-medium"},"Continue where you left off",-1))]),t("h3",et,p(E.value.title),1),t("div",tt,[t("span",st,[r(s(U),{class:"h-3.5 w-3.5"}),n(" "+p(ke.value),1)]),t("span",rt,[r(s(fe),{class:"h-3.5 w-3.5"}),n(" "+p(E.value.word_count.toLocaleString())+" words ",1)])])]),r(s(g),{onClick:e[1]||(e[1]=o=>O(E.value.chapter_number)),size:"lg",class:"shrink-0 bg-gradient-to-r from-amber-600 to-orange-600 text-white shadow-lg shadow-orange-500/20 transition-all hover:scale-105 hover:shadow-orange-500/30 hover:from-amber-700 hover:to-orange-700"},{default:a(()=>[r(s(ve),{class:"mr-2 h-4 w-4 fill-current"}),e[21]||(e[21]=n(" Resume Writing ",-1))]),_:1})])])):_("",!0),t("div",ot,[t("button",{onClick:e[2]||(e[2]=o=>h.value?O(h.value):null),disabled:!A.value,class:"group relative flex flex-col items-start gap-4 rounded-2xl border border-border/50 bg-card p-6 text-left shadow-sm transition-all hover:border-primary/50 hover:shadow-md disabled:opacity-50 disabled:cursor-not-allowed"},[t("div",lt,[r(s(k),{class:"h-6 w-6"})]),t("div",null,[e[22]||(e[22]=t("h3",{class:"font-semibold"},"Start Writing",-1)),t("p",nt,p(A.value?`Begin Chapter ${h.value} manually`:"All chapters created"),1)]),t("div",it,[e[23]||(e[23]=n(" Get started ",-1)),r(s(be),{class:"ml-1 h-4 w-4"})])],8,at),c.value==="auto"?(d(),f("button",{key:0,onClick:e[3]||(e[3]=o=>I("progressive")),disabled:j.value||!A.value,class:"group relative flex flex-col items-start gap-4 rounded-2xl border border-border/50 bg-card p-6 text-left shadow-sm transition-all hover:border-purple-500/50 hover:shadow-md disabled:opacity-50 disabled:cursor-not-allowed"},[t("div",ut,[r(s(C),{class:"h-6 w-6"})]),t("div",null,[e[24]||(e[24]=t("h3",{class:"font-semibold"},"Generate Chapter",-1)),t("p",pt,p(j.value?"Generating content...":"Let AI draft the next chapter"),1)]),t("div",ct,[e[25]||(e[25]=n(" Start generation ",-1)),r(s(be),{class:"ml-1 h-4 w-4"})])],8,dt)):(d(),f("div",mt,[t("div",gt,[r(s(ge),{class:"h-6 w-6"})]),e[26]||(e[26]=t("div",null,[t("h3",{class:"font-semibold"},"Manual Mode Active"),t("p",{class:"text-sm text-muted-foreground"},"Switch to AI mode to enable generation features.")],-1))]))]),r(s(Re),{modelValue:P.value,"onUpdate:modelValue":e[10]||(e[10]=o=>P.value=o),class:"space-y-8"},{default:a(()=>[r(s(Pe),{class:"flex h-auto w-full flex-col items-stretch justify-center rounded-2xl bg-muted/30 p-1.5 text-muted-foreground md:inline-flex md:h-14 md:w-auto md:flex-row md:items-center md:rounded-full border border-border/40 backdrop-blur-sm"},{default:a(()=>[r(s(ae),{value:"overview",class:"rounded-xl px-8 py-2.5 text-sm font-medium transition-all duration-300 data-[state=active]:bg-gray-200 data-[state=active]:text-gray-900 dark:data-[state=active]:bg-neutral-800 dark:data-[state=active]:text-gray-50 data-[state=active]:shadow-sm md:rounded-full md:py-0"},{default:a(()=>[...e[27]||(e[27]=[n(" Overview ",-1)])]),_:1}),c.value==="auto"?(d(),m(s(ae),{key:0,value:"ai-generation",class:"rounded-xl px-8 py-2.5 text-sm font-medium transition-all duration-300 data-[state=active]:bg-gray-200 data-[state=active]:text-gray-900 dark:data-[state=active]:bg-neutral-800 dark:data-[state=active]:text-gray-50 data-[state=active]:shadow-sm md:rounded-full md:py-0"},{default:a(()=>[...e[28]||(e[28]=[n(" AI Generation ",-1)])]),_:1})):_("",!0),r(s(ae),{value:"manual-writing",class:"rounded-xl px-8 py-2.5 text-sm font-medium transition-all duration-300 data-[state=active]:bg-gray-200 data-[state=active]:text-gray-900 dark:data-[state=active]:bg-neutral-800 dark:data-[state=active]:text-gray-50 data-[state=active]:shadow-sm md:rounded-full md:py-0"},{default:a(()=>[n(p(c.value==="auto"?"Edit Chapters":"Manual Writing"),1)]),_:1})]),_:1}),r(s(le),{value:"overview",class:"space-y-6"},{default:a(()=>[t("div",ft,[(d(!0),f(L,null,Z(l.project.chapters,o=>(d(),m(s(F),{key:o.id,class:"group overflow-hidden border border-border/50 shadow-sm transition-all hover:border-primary/20 hover:shadow-md"},{default:a(()=>[r(s(J),{class:"pb-3"},{default:a(()=>[t("div",vt,[t("div",null,[r(s(Q),{class:"text-lg group-hover:text-primary transition-colors"},{default:a(()=>[n(p(o.title),1)]),_:2},1024),r(s(K),null,{default:a(()=>[n("Chapter "+p(o.chapter_number),1)]),_:2},1024)]),r(s(R),{class:$(ue(o.status)),variant:"outline"},{default:a(()=>[n(p(o.status.replace("_"," ")),1)]),_:2},1032,["class"])])]),_:2},1024),r(s(N),null,{default:a(()=>[t("div",bt,[t("div",xt,p(o.word_count.toLocaleString())+" words",1),t("div",ht,[c.value==="auto"&&(!o.content||o.content.trim()==="")?(d(),m(s(g),{key:0,onClick:i=>I("progressive",o.chapter_number),size:"sm",class:"bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 text-white shadow-sm"},{default:a(()=>[r(s(C),{class:"mr-1 h-4 w-4"}),e[29]||(e[29]=n(" Generate ",-1))]),_:2},1032,["onClick"])):_("",!0),o.content&&o.content.trim()!==""?(d(),m(s(g),{key:1,onClick:i=>Ce(o.chapter_number),size:"sm",variant:"outline",class:"hover:bg-muted"},{default:a(()=>[r(s(k),{class:"mr-1 h-4 w-4"}),e[30]||(e[30]=n(" Edit ",-1))]),_:2},1032,["onClick"])):c.value==="manual"||!c.value?(d(),m(s(g),{key:2,onClick:i=>O(o.chapter_number),size:"sm",variant:"default"},{default:a(()=>[r(s(k),{class:"mr-1 h-4 w-4"}),e[31]||(e[31]=n(" Start ",-1))]),_:2},1032,["onClick"])):(d(),m(s(R),{key:3,variant:"outline",class:"text-xs text-muted-foreground"},{default:a(()=>[...e[32]||(e[32]=[n(" Not Started ",-1)])]),_:1}))])])]),_:2},1024)]),_:2},1024))),128)),l.project.chapters.length===0?(d(),f("div",wt,[r(s(ge),{class:"mx-auto mb-4 h-12 w-12 text-muted-foreground/50"}),t("p",yt," No chapters created yet. "+p(c.value==="auto"?"Use AI generation to get started.":"Create your first chapter manually."),1)])):_("",!0)])]),_:1}),c.value==="auto"?(d(),m(s(le),{key:0,value:"ai-generation",class:"space-y-8"},{default:a(()=>[r(s(F),{class:"border-border/40 bg-card/50 backdrop-blur-xl shadow-xl shadow-primary/5 overflow-hidden"},{default:a(()=>[r(s(J),{class:"border-b border-border/40 bg-muted/10 pb-8"},{default:a(()=>[t("div",_t,[t("div",kt,[r(s(xe),{class:"h-6 w-6 text-yellow-600 dark:text-yellow-500"})]),t("div",Ct,[r(s(Q),{class:"text-xl font-bold tracking-tight"},{default:a(()=>[...e[33]||(e[33]=[n("AI Chapter Generation ",-1)])]),_:1}),r(s(K),{class:"text-base"},{default:a(()=>[...e[34]||(e[34]=[n("Choose how you'd like the AI to generate your academic chapters.",-1)])]),_:1})])])]),_:1}),r(s(N),{class:"p-8 space-y-8"},{default:a(()=>[t("div",jt,[e[37]||(e[37]=t("h4",{class:"text-sm font-semibold uppercase tracking-wider text-muted-foreground"}," Generation Style",-1)),t("div",At,[t("label",{class:$(["group relative flex cursor-pointer flex-col gap-4 rounded-2xl border-2 p-6 transition-all duration-300 hover:shadow-lg",G.value==="progressive"?"border-primary bg-primary/5 shadow-md ring-1 ring-primary/20":"border-border/50 bg-card hover:border-primary/50 hover:bg-accent/5"])},[t("div",$t,[t("div",Gt,[r(s(fe),{class:"h-5 w-5"})]),ce(t("input",{type:"radio","onUpdate:modelValue":e[4]||(e[4]=o=>G.value=o),value:"progressive",class:"h-5 w-5 text-primary accent-primary"},null,512),[[me,G.value]])]),e[35]||(e[35]=t("div",null,[t("p",{class:"font-bold text-foreground group-hover:text-primary transition-colors"}," Progressive Generation"),t("p",{class:"mt-1.5 text-sm text-muted-foreground leading-relaxed"}," Generate one chapter at a time, building context from previous work.")],-1))],2),t("label",{class:$(["group relative flex cursor-pointer flex-col gap-4 rounded-2xl border-2 p-6 transition-all duration-300 hover:shadow-lg",G.value==="bulk"?"border-primary bg-primary/5 shadow-md ring-1 ring-primary/20":"border-border/50 bg-card hover:border-primary/50 hover:bg-accent/5"])},[t("div",Mt,[t("div",Tt,[r(s(V),{class:"h-5 w-5"})]),ce(t("input",{type:"radio","onUpdate:modelValue":e[5]||(e[5]=o=>G.value=o),value:"bulk",class:"h-5 w-5 text-primary accent-primary"},null,512),[[me,G.value]])]),e[36]||(e[36]=t("div",null,[t("p",{class:"font-bold text-foreground group-hover:text-primary transition-colors"}," Complete Project Generation"),t("p",{class:"mt-1.5 text-sm text-muted-foreground leading-relaxed"}," Generate entire project with literature, chapters, references, and appendices.")],-1))],2)])]),t("div",St,[G.value==="progressive"?(d(),f("div",Et,[r(s(g),{onClick:e[6]||(e[6]=o=>I("progressive")),disabled:j.value||!A.value,size:"lg",class:"w-full h-14 text-base font-semibold bg-gradient-to-r from-blue-600 via-indigo-600 to-purple-600 hover:from-blue-700 hover:via-indigo-700 hover:to-purple-700 text-white shadow-lg shadow-indigo-500/25 transition-all hover:scale-[1.01] hover:shadow-indigo-500/40"},{default:a(()=>[j.value?(d(),m(s(U),{key:1,class:"mr-2 h-5 w-5 animate-spin"})):(d(),m(s(ve),{key:0,class:"mr-2 h-5 w-5 fill-current"})),n(" "+p(j.value?"Generating Chapter...":A.value?`Generate Chapter ${h.value}`:"Chapter Limit Reached"),1)]),_:1},8,["disabled"]),t("p",It,[A.value?(d(),f("span",Lt,[r(s(C),{class:"h-4 w-4 text-indigo-500"}),e[38]||(e[38]=n(" AI will generate Chapter ",-1)),t("span",Rt,p(h.value),1),e[39]||(e[39]=n(" based on your topic and previous chapters. ",-1))])):(d(),f("span",Pt,[r(s(ne),{class:"h-4 w-4"}),n(" You have reached the maximum chapters ("+p(z.value)+") for this project category. ",1)]))])])):_("",!0),G.value==="bulk"?(d(),f("div",Wt,[r(s(g),{onClick:e[7]||(e[7]=o=>I("bulk")),disabled:j.value,size:"lg",class:"w-full h-14 text-base font-semibold bg-gradient-to-r from-purple-600 via-pink-600 to-rose-600 hover:from-purple-700 hover:via-pink-700 hover:to-rose-700 text-white shadow-lg shadow-pink-500/25 transition-all hover:scale-[1.01] hover:shadow-pink-500/40"},{default:a(()=>[j.value?(d(),m(s(U),{key:1,class:"mr-2 h-5 w-5 animate-spin"})):(d(),m(s(xe),{key:0,class:"mr-2 h-5 w-5 fill-current"})),n(" "+p(j.value?"Generating Complete Project...":"Generate Complete Project"),1)]),_:1},8,["disabled"]),t("p",Dt,[r(s(V),{class:"h-4 w-4 text-pink-500"}),e[40]||(e[40]=n(" AI will collect literature, generate all chapters, and assemble the complete project. ",-1))])])):_("",!0)])]),_:1})]),_:1}),t("div",Ut,[t("div",Bt,[t("div",zt,[r(s(C),{class:"h-5 w-5"})]),e[41]||(e[41]=t("div",{class:"space-y-2"},[t("h4",{class:"font-semibold text-blue-900 dark:text-blue-100"},"AI Generation Tips "),t("ul",{class:"grid gap-2 text-sm text-blue-800/80 dark:text-blue-200/70 sm:grid-cols-2"},[t("li",{class:"flex items-center gap-2"},[t("div",{class:"h-1.5 w-1.5 rounded-full bg-blue-500"}),n(" Progressive generation builds better context ")]),t("li",{class:"flex items-center gap-2"},[t("div",{class:"h-1.5 w-1.5 rounded-full bg-blue-500"}),n(" Bulk generation is faster but may need editing ")]),t("li",{class:"flex items-center gap-2"},[t("div",{class:"h-1.5 w-1.5 rounded-full bg-blue-500"}),n(" All AI content is fully editable ")]),t("li",{class:"flex items-center gap-2"},[t("div",{class:"h-1.5 w-1.5 rounded-full bg-blue-500"}),n(" Uses your approved topic & requirements ")])])],-1))])])]),_:1})):_("",!0),r(s(le),{value:"manual-writing",class:"space-y-6"},{default:a(()=>[r(s(F),{class:"border border-border/50 shadow-sm"},{default:a(()=>[r(s(J),null,{default:a(()=>[r(s(Q),{class:"flex items-center gap-2"},{default:a(()=>[r(s(k),{class:"h-5 w-5"}),e[42]||(e[42]=n(" Chapter Management ",-1))]),_:1}),r(s(K),null,{default:a(()=>[...e[43]||(e[43]=[n("Create and edit chapters using the full-featured writing editor. ",-1)])]),_:1})]),_:1}),r(s(N),{class:"space-y-4"},{default:a(()=>[t("div",Ot,[r(s(g),{onClick:e[8]||(e[8]=o=>h.value?O(h.value):null),disabled:!A.value,size:"lg",class:"flex-1"},{default:a(()=>[r(s(k),{class:"mr-2 h-5 w-5"}),n(" "+p(A.value?`Start Chapter ${h.value}`:"Chapter Limit Reached"),1)]),_:1},8,["disabled"]),c.value==="auto"?(d(),m(s(g),{key:0,onClick:e[9]||(e[9]=o=>I("single")),disabled:j.value||!A.value,size:"lg",variant:"outline",class:"flex-1"},{default:a(()=>[r(s(C),{class:"mr-2 h-5 w-5"}),e[44]||(e[44]=n(" AI Draft First ",-1))]),_:1},8,["disabled"])):_("",!0)]),t("p",Ft,p(c.value==="manual"?"Use the full-featured editor to write your chapters from scratch.":"Write manually or generate an AI draft to edit and improve."),1)]),_:1})]),_:1}),t("div",Nt,[e[47]||(e[47]=t("h4",{class:"text-sm font-medium"},"Your Chapters",-1)),t("div",Vt,[(d(!0),f(L,null,Z(l.estimatedChapters,o=>(d(),m(s(F),{key:o,class:"group overflow-hidden border border-border/50 shadow-sm transition-all hover:border-primary/20 hover:shadow-md"},{default:a(()=>[r(s(N),{class:"p-4"},{default:a(()=>[t("div",Yt,[t("div",qt,[t("h5",Ht,p(Ae(o)),1),t("p",Zt,"Chapter "+p(o),1),t("div",Kt,[l.project.chapters.find(i=>i.chapter_number===o&&i.content&&i.content.trim()!=="")?(d(),f(L,{key:0},[r(s(R),{class:$(ue(l.project.chapters.find(i=>i.chapter_number===o)?.status||"draft")),variant:"outline"},{default:a(()=>[n(p(l.project.chapters.find(i=>i.chapter_number===o)?.status.replace("_"," ")),1)]),_:2},1032,["class"]),t("span",Jt,p(l.project.chapters.find(i=>i.chapter_number===o)?.word_count.toLocaleString())+" words ",1)],64)):(d(),m(s(R),{key:1,variant:"outline",class:"bg-muted text-muted-foreground"},{default:a(()=>[...e[45]||(e[45]=[n("Not Started ",-1)])]),_:1}))])]),t("div",Qt,[c.value==="auto"&&!l.project.chapters.find(i=>i.chapter_number===o&&i.content&&i.content.trim()!=="")?(d(),m(s(g),{key:0,onClick:i=>I("progressive",o),size:"sm",class:"bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 text-white"},{default:a(()=>[r(s(C),{class:"mr-1 h-4 w-4"}),e[46]||(e[46]=n(" Generate ",-1))]),_:2},1032,["onClick"])):_("",!0),r(s(g),{onClick:i=>je(o),size:"sm",variant:l.project.chapters.find(i=>i.chapter_number===o&&i.content&&i.content.trim()!=="")?"outline":"default"},{default:a(()=>[r(s(k),{class:"mr-1 h-4 w-4"}),n(" "+p(l.project.chapters.find(i=>i.chapter_number===o&&i.content&&i.content.trim()!=="")?"Edit":"Start"),1)]),_:2},1032,["onClick","variant"])])])]),_:2},1024)]),_:2},1024))),128))])])]),_:1})]),_:1},8,["modelValue"])]),t("div",Xt,[t("div",es,[t("h3",ts,[r(s(he),{class:"h-5 w-5 text-primary"}),e[48]||(e[48]=n(" Project Progress ",-1))]),t("div",ss,[(d(),f("svg",rs,[e[49]||(e[49]=t("circle",{cx:"50",cy:"50",r:"40",fill:"none",stroke:"currentColor","stroke-width":"8",class:"text-muted/20"},null,-1)),t("circle",{cx:"50",cy:"50",r:"40",fill:"none",stroke:"currentColor","stroke-width":"8",class:"text-primary transition-all duration-1000 ease-out","stroke-dasharray":251.2,"stroke-dashoffset":251.2-251.2*de.value/100,"stroke-linecap":"round"},null,8,os)])),t("div",as,[t("span",ls,p(Math.round(de.value))+"%",1),e[50]||(e[50]=t("span",{class:"text-xs text-muted-foreground"},"Completed",-1))])]),t("div",ns,[t("div",is,[e[51]||(e[51]=t("span",{class:"text-sm text-muted-foreground"},"Total Words",-1)),t("span",ds,p(ie.value.toLocaleString()),1)]),t("div",us,[e[52]||(e[52]=t("span",{class:"text-sm text-muted-foreground"},"Chapters Done",-1)),t("span",ps,p(_e.value)+" / "+p(l.estimatedChapters),1)])])])])]),r(s(X),{open:W.value,"onUpdate:open":e[12]||(e[12]=o=>W.value=o)},{default:a(()=>[r(s(ee),{class:"sm:max-w-md"},{default:a(()=>[r(s(te),null,{default:a(()=>[r(s(se),{class:"flex items-center gap-2"},{default:a(()=>[(d(),m(H(x.value==="auto"?s(C):s(k)),{class:$(["h-5 w-5",x.value==="auto"?"text-blue-600":"text-purple-600"])},null,8,["class"])),e[53]||(e[53]=n(" Switch Writing Mode ",-1))]),_:1}),r(s(re),{class:"space-y-4 pt-2 text-left"},{default:a(()=>[r(s(Ie),{variant:x.value==="auto"?"default":"destructive",class:$(["border-l-4",x.value==="auto"?"border-l-blue-500 bg-blue-50 text-blue-900":"border-l-purple-500 bg-purple-50 text-purple-900"])},{default:a(()=>[r(s(ne),{class:"h-4 w-4"}),r(s(Le),null,{default:a(()=>[e[54]||(e[54]=n(" You are about to switch to ",-1)),t("strong",null,p(x.value==="auto"?"AI Assisted":"Manual"),1),e[55]||(e[55]=n(" mode. ",-1))]),_:1})]),_:1},8,["variant","class"]),t("div",cs,[e[61]||(e[61]=t("p",{class:"font-medium"},"What this means:",-1)),t("ul",ms,[x.value==="auto"?(d(),f(L,{key:0},[e[56]||(e[56]=t("li",null,"You'll be able to generate chapters with AI",-1)),e[57]||(e[57]=t("li",null,"Existing content will remain unchanged",-1))],64)):(d(),f(L,{key:1},[e[58]||(e[58]=t("li",null,"You'll write chapters manually",-1)),e[59]||(e[59]=t("li",null,"AI generation will be disabled",-1)),e[60]||(e[60]=t("li",null,"Existing content will remain unchanged",-1))],64))])])]),_:1})]),_:1}),r(s(oe),{class:"flex-col gap-2 sm:flex-row"},{default:a(()=>[r(s(g),{onClick:e[11]||(e[11]=o=>W.value=!1),variant:"outline",class:"w-full sm:w-auto"},{default:a(()=>[...e[62]||(e[62]=[n(" Cancel ",-1)])]),_:1}),r(s(g),{onClick:$e,disabled:T.value,class:$([x.value==="auto"?"bg-blue-600 hover:bg-blue-700":"bg-purple-600 hover:bg-purple-700","w-full sm:w-auto text-white"])},{default:a(()=>[T.value?(d(),m(s(U),{key:0,class:"mr-2 h-4 w-4 animate-spin"})):_("",!0),n(" "+p(T.value?"Switching...":`Switch to ${x.value==="auto"?"AI Assisted":"Manual"}
                            Mode`),1)]),_:1},8,["disabled","class"])]),_:1})]),_:1})]),_:1},8,["open"]),r(s(X),{open:D.value,"onUpdate:open":e[14]||(e[14]=o=>D.value=o)},{default:a(()=>[r(s(ee),{class:"sm:max-w-lg"},{default:a(()=>[r(s(te),null,{default:a(()=>[r(s(se),{class:"flex items-center gap-2"},{default:a(()=>[r(s(V),{class:"h-5 w-5 text-purple-600"}),e[63]||(e[63]=n(" Generate Complete Project ",-1))]),_:1}),r(s(re),{class:"space-y-4 pt-2 text-left"},{default:a(()=>[t("div",gs,[t("div",fs,[r(s(C),{class:"h-5 w-5 text-purple-600 mt-0.5 flex-shrink-0"}),t("div",vs,[e[64]||(e[64]=t("p",{class:"font-semibold text-purple-900"},"Comprehensive AI Generation",-1)),t("p",bs," This will generate a complete project with all "+p(z.value)+" chapters, literature mining, references, preliminary pages, and appendices. ",1)])])]),t("div",xs,[e[68]||(e[68]=t("p",{class:"text-sm font-medium text-foreground"},"What will be generated:",-1)),t("div",hs,[t("div",ws,[r(s(Y),{class:"h-4 w-4 text-green-500"}),n(" All "+p(z.value)+" chapters ",1)]),t("div",ys,[r(s(Y),{class:"h-4 w-4 text-green-500"}),e[65]||(e[65]=n(" Literature & Citations ",-1))]),t("div",_s,[r(s(Y),{class:"h-4 w-4 text-green-500"}),e[66]||(e[66]=n(" Preliminary Pages ",-1))]),t("div",ks,[r(s(Y),{class:"h-4 w-4 text-green-500"}),e[67]||(e[67]=n(" Appendices & References ",-1))])])]),t("div",Cs,[r(s(U),{class:"h-4 w-4 text-primary"}),e[69]||(e[69]=t("span",null,[n("Estimated time: "),t("strong",null,"15-20 minutes")],-1))])]),_:1})]),_:1}),r(s(oe),{class:"flex-col gap-2 sm:flex-row"},{default:a(()=>[r(s(g),{onClick:e[13]||(e[13]=o=>D.value=!1),variant:"outline",class:"w-full sm:w-auto"},{default:a(()=>[...e[70]||(e[70]=[n(" Cancel ",-1)])]),_:1}),r(s(g),{onClick:Ge,class:"w-full sm:w-auto bg-gradient-to-r from-purple-600 to-pink-600 text-white hover:from-purple-700 hover:to-pink-700"},{default:a(()=>[r(s(V),{class:"mr-2 h-4 w-4"}),e[71]||(e[71]=n(" Start Generation ",-1))]),_:1})]),_:1})]),_:1})]),_:1},8,["open"]),r(s(X),{open:B.value,"onUpdate:open":e[16]||(e[16]=o=>B.value=o)},{default:a(()=>[r(s(ee),{class:"sm:max-w-md"},{default:a(()=>[r(s(te),null,{default:a(()=>[r(s(se),{class:"flex items-center gap-2 text-destructive"},{default:a(()=>[r(s(ne),{class:"h-5 w-5"}),e[72]||(e[72]=n(" Return to Topic Approval ",-1))]),_:1}),r(s(re),{class:"space-y-4 pt-2 text-left"},{default:a(()=>[t("div",js,[t("div",As,[r(s(he),{class:"h-5 w-5 text-orange-600 mt-0.5 flex-shrink-0"}),e[73]||(e[73]=t("div",{class:"space-y-1"},[t("p",{class:"font-semibold text-orange-900"},"Warning: Progress Reset"),t("p",{class:"text-sm text-orange-800/80"}," This will reset your writing progress and return you to the topic approval stage. All chapter content will be preserved, but you'll need to re-approve your topic. ")],-1))])]),e[74]||(e[74]=t("p",{class:"text-sm font-medium text-foreground"},"Are you sure you want to continue? ",-1))]),_:1})]),_:1}),r(s(oe),{class:"flex-col gap-2 sm:flex-row"},{default:a(()=>[r(s(g),{onClick:e[15]||(e[15]=o=>B.value=!1),variant:"outline",class:"w-full sm:w-auto"},{default:a(()=>[...e[75]||(e[75]=[n(" Cancel ",-1)])]),_:1}),r(s(g),{onClick:Me,variant:"destructive",class:"w-full sm:w-auto"},{default:a(()=>[r(s(Ue),{class:"mr-2 h-4 w-4"}),e[76]||(e[76]=n(" Reset Progress ",-1))]),_:1})]),_:1})]),_:1})]),_:1},8,["open"])])]),_:1},8,["title"]))}});export{ar as default};
