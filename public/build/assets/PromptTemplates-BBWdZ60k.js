import{d as Z,p as me,C,o as m,E as l,H as o,u as e,K as a,P as n,R as ee,J as S,W as x,I as pe,a as $,y as N,X as B,ag as de,O as c,M as p,A as O,c as d,Q as E,S as P,Y as U}from"./app-B0kF8k29.js";import{_ as ue}from"./AdminLayout.vue_vue_type_script_setup_true_lang-D1cJ2dec.js";import{_ as _e}from"./DataTable.vue_vue_type_script_setup_true_lang-t5ZdBIIG.js";import{_ as J}from"./index-BX_nQR4F.js";import{_ as te}from"./Switch.vue_vue_type_script_setup_true_lang-dtfI-6zO.js";import{_ as V}from"./index-C0SLUj2i.js";import{a as ce,b as fe,c as ye,d as j,e as xe,f as ve}from"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-CBBrHpG-.js";import{E as ge}from"./ellipsis-DQXFkn4I.js";import{P as be}from"./pencil-BqV_QSXM.js";import{T as ke}from"./trash-2-C_2x5g2e.js";import{A as L}from"./arrow-up-down-BCXZpHv8.js";import{_ as Ve,a as he}from"./CardContent.vue_vue_type_script_setup_true_lang-C0hLN4X4.js";import{_ as qe}from"./CardDescription.vue_vue_type_script_setup_true_lang-Emv7Gmfq.js";import{_ as we,a as $e}from"./CardTitle.vue_vue_type_script_setup_true_lang-CAnl3p65.js";import{_ as A}from"./Input.vue_vue_type_script_setup_true_lang-CBax_5wo.js";import{_ as f}from"./Label.vue_vue_type_script_setup_true_lang-C_PKKfey.js";import{_ as g}from"./Textarea.vue_vue_type_script_setup_true_lang-BIKQNV_j.js";import{_ as Ce,a as Se}from"./index-DIANSpr-.js";import{_ as Oe}from"./AlertTitle.vue_vue_type_script_setup_true_lang-DirvxcCV.js";import{_ as M,a as I}from"./DialogContent.vue_vue_type_script_setup_true_lang-DzWVUis5.js";import{_ as K}from"./DialogDescription.vue_vue_type_script_setup_true_lang-BhxzrhH5.js";import{_ as z,a as H}from"./DialogTitle.vue_vue_type_script_setup_true_lang-CDS6yRqv.js";import{_ as Ue,a as Q,b as W,c as X}from"./AccordionTrigger.vue_vue_type_script_setup_true_lang-7eTSZgPX.js";import{S as Y}from"./sparkles-BbsS5jnr.js";import{P as Te}from"./plus-DdJuN8aN.js";import{L as G}from"./loader-circle-BBhT74IN.js";import"./UserInfo.vue_vue_type_script_setup_true_lang-DnzsZePu.js";import"./Presence-Bj9mfJQy.js";import"./useForwardExpose-DvsR2gOR.js";import"./index-DsHxzjCZ.js";import"./DialogTitle-kUDE-DWA.js";import"./index-BoeZbtgA.js";import"./TooltipTrigger.vue_vue_type_script_setup_true_lang-BnyjwDqu.js";import"./VisuallyHidden-KLLlvcL-.js";import"./users-DwY9oT1f.js";import"./chart-column-jiIwqF9L.js";import"./triangle-alert-DuP5arm-.js";import"./file-text-Br9UtEh4.js";import"./list-WiHRhoPT.js";import"./log-out-CHUAohWC.js";import"./TableHeader.vue_vue_type_script_setup_true_lang-DhfiGM3R.js";import"./search-DO7AXH_O.js";import"./chevron-left-B2yXjIQu.js";import"./chevron-right-DXpi25t3.js";import"./useFormControl-DMTNplH2.js";import"./VisuallyHiddenInput-BpJTHr4g.js";import"./CollapsibleTrigger-DBSMDONG.js";import"./isValueEqualOrExist-DSClXoPv.js";import"./nullish-CHIgUVhi.js";import"./ohash.D__AXeF1-C-E83dC9.js";import"./chevron-down-Cpe4VrIV.js";const Ne=Z({__name:"PromptTemplateActions",props:{template:{}},setup(_){const u=_,q=me("onEditPromptTemplate"),h=()=>{const b=`${u.template.context_type}:${u.template.context_value}`;confirm(`Delete template ${b}? This cannot be undone.`)&&ee.delete(S("admin.system.prompt-templates.destroy",{template:u.template.id}),{preserveScroll:!0})};return(b,y)=>(m(),C(e(ve),null,{default:l(()=>[o(e(ce),{"as-child":""},{default:l(()=>[o(e(V),{variant:"ghost",class:"h-8 w-8 p-0"},{default:l(()=>[y[1]||(y[1]=a("span",{class:"sr-only"},"Open menu",-1)),o(e(ge),{class:"h-4 w-4"})]),_:1})]),_:1}),o(e(fe),{align:"end"},{default:l(()=>[o(e(ye),null,{default:l(()=>[...y[2]||(y[2]=[n("Actions",-1)])]),_:1}),o(e(j),{onClick:y[0]||(y[0]=w=>e(q)?.(u.template))},{default:l(()=>[o(e(be),{class:"mr-2 h-4 w-4"}),y[3]||(y[3]=n(" Edit ",-1))]),_:1}),o(e(xe)),o(e(j),{onClick:h,class:"text-rose-600 focus:text-rose-600 focus:bg-rose-50"},{default:l(()=>[o(e(ke),{class:"mr-2 h-4 w-4"}),y[4]||(y[4]=n(" Delete ",-1))]),_:1})]),_:1})]),_:1}))}}),Ee=(_,u)=>{ee.put(S("admin.system.prompt-templates.toggle-active",{template:_.id}),{is_active:u},{preserveScroll:!0})},Pe=[{accessorKey:"context_value",header:({column:_})=>x(V,{variant:"ghost",class:"-ml-2 text-xs hover:bg-muted/50",onClick:()=>_.toggleSorting(_.getIsSorted()==="asc")},()=>["Context",x(L,{class:"ml-2 h-3 w-3"})]),cell:({row:_})=>{const u=_.original;return x("div",{class:"flex flex-col gap-1"},[x("div",{class:"flex items-center gap-2"},[x(J,{variant:"outline",class:"capitalize"},()=>u.context_type.replace(/_/g," ")),x("span",{class:"font-medium"},u.context_value)]),u.chapter_type?x("span",{class:"text-xs text-muted-foreground"},`Chapter: ${u.chapter_type}`):x("span",{class:"text-xs text-muted-foreground"},"Chapter: any")])}},{accessorKey:"priority",header:({column:_})=>x(V,{variant:"ghost",class:"-ml-2 text-xs hover:bg-muted/50",onClick:()=>_.toggleSorting(_.getIsSorted()==="asc")},()=>["Priority",x(L,{class:"ml-2 h-3 w-3"})]),cell:({row:_})=>_.getValue("priority")},{id:"overrides",header:"Overrides",cell:({row:_})=>{const u=_.original,q=!!(u.system_prompt&&u.system_prompt.trim()),h=!!(u.chapter_prompt_template&&u.chapter_prompt_template.trim());return x("div",{class:"flex items-center gap-2"},[x(J,{variant:q?"default":"outline"},()=>`System: ${q?"yes":"no"}`),x(J,{variant:h?"default":"outline"},()=>`User: ${h?"yes":"no"}`)])}},{accessorKey:"is_active",header:"Active",cell:({row:_})=>x(te,{checked:_.original.is_active,"onUpdate:checked":u=>Ee(_.original,u)})},{id:"actions",cell:({row:_})=>x(Ne,{template:_.original})}],Je={class:"flex items-center gap-2"},Ae={class:"grid gap-4 py-4"},Fe={class:"grid gap-4 md:grid-cols-2"},Re={class:"space-y-1"},De=["value"],Be={key:0,class:"text-xs text-rose-500"},je={class:"space-y-1"},Le={key:0,class:"text-xs text-rose-500"},Me={class:"grid gap-4 md:grid-cols-3"},Ie={class:"space-y-1"},Ke={key:0,class:"text-xs text-rose-500"},ze={class:"space-y-1"},He={key:0,class:"text-xs text-rose-500"},Qe={class:"flex items-center justify-between rounded-md border border-border/70 bg-muted/30 px-3 py-2 text-sm"},We={class:"space-y-1"},Xe=["value"],Ye={key:0,class:"text-xs text-rose-500"},Ge={class:"space-y-1"},Ze={key:0,class:"text-xs text-rose-500"},et={class:"space-y-1"},tt={key:0,class:"text-xs text-rose-500"},st={class:"grid gap-4 md:grid-cols-2"},ot={class:"space-y-1"},rt={key:0,class:"text-xs text-rose-500"},lt={class:"space-y-1"},at={key:0,class:"text-xs text-rose-500"},nt={class:"grid gap-4 md:grid-cols-2"},it={class:"space-y-1"},mt={key:0,class:"text-xs text-rose-500"},pt={class:"space-y-1"},dt={key:0,class:"text-xs text-rose-500"},ut={class:"grid gap-4 md:grid-cols-2"},_t={class:"space-y-1"},ct={key:0,class:"text-xs text-rose-500"},ft={class:"space-y-1"},yt={key:0,class:"text-xs text-rose-500"},xt={class:"grid gap-4 md:grid-cols-2"},vt={class:"space-y-1"},gt={key:0,class:"text-xs text-rose-500"},bt={class:"space-y-1"},kt={key:0,class:"text-xs text-rose-500"},Vt={class:"space-y-1"},ht={key:0,class:"text-xs text-rose-500"},qt={class:"flex justify-end gap-2"},wt={class:"grid gap-4 py-4"},$t={class:"space-y-1"},Ct=["value"],St={key:0,class:"text-xs text-rose-500"},Ot={class:"space-y-1"},Ut={key:0,class:"text-xs text-rose-500"},Tt={class:"flex justify-end gap-2"},Nt="{{topic}}, {{faculty}}, {{department}}, {{course}}, {{field_of_study}}, {{academic_level}}, {{university}}, {{chapter_number}}",Ts=Z({__name:"PromptTemplates",props:{templates:{},contextTypes:{},facultyOptions:{}},setup(_){const u=_,q=pe(),h=$(()=>q.props.flash),b=N(null),y=N(!1),w=N(!1),F=$(()=>u.templates??[]),se=$(()=>u.contextTypes??[]),oe=$(()=>u.facultyOptions??[]),re=$(()=>F.value.filter(i=>i.id!==b.value)),R=()=>({context_type:"faculty",context_value:"",chapter_type:"",parent_template_id:"",priority:0,is_active:!0,system_prompt:"",chapter_prompt_template:"",table_requirements:"",diagram_requirements:"",calculation_requirements:"",code_requirements:"",placeholder_rules:"",recommended_tools:"",mock_data_config:"",citation_requirements:"",formatting_rules:""}),s=B({...R()}),v=B({faculty:u.facultyOptions?.[0]||"engineering",chapter_type:"all"}),T=$(()=>b.value!==null),D=()=>{b.value=null,s.clearErrors(),Object.assign(s,R())},k=i=>{if(i==null)return"";if(typeof i=="string")return i;try{return JSON.stringify(i,null,2)}catch{return""}},le=()=>{D(),y.value=!0},ae=()=>{v.clearErrors(),w.value=!0};de("onEditPromptTemplate",i=>{b.value=i.id,s.clearErrors(),s.context_type=i.context_type??"faculty",s.context_value=i.context_value??"",s.chapter_type=i.chapter_type??"",s.parent_template_id=i.parent_template_id?String(i.parent_template_id):"",s.priority=Number(i.priority??0),s.is_active=!!i.is_active,s.system_prompt=i.system_prompt??"",s.chapter_prompt_template=i.chapter_prompt_template??"",s.table_requirements=k(i.table_requirements),s.diagram_requirements=k(i.diagram_requirements),s.calculation_requirements=k(i.calculation_requirements),s.code_requirements=k(i.code_requirements),s.placeholder_rules=k(i.placeholder_rules),s.recommended_tools=k(i.recommended_tools),s.mock_data_config=k(i.mock_data_config),s.citation_requirements=k(i.citation_requirements),s.formatting_rules=k(i.formatting_rules),y.value=!0});const ne=()=>{s.clearErrors(),s.transform(t=>({...t,priority:Number(t.priority??0),chapter_type:t.chapter_type?String(t.chapter_type):null,parent_template_id:t.parent_template_id?Number(t.parent_template_id):null,is_active:!!t.is_active}));const i={preserveScroll:!0,onSuccess:()=>{y.value=!1,D()}};T.value&&b.value?s.put(S("admin.system.prompt-templates.update",{template:b.value}),i):s.post(S("admin.system.prompt-templates.store"),i)},ie=()=>{v.clearErrors(),v.post(S("admin.system.prompt-templates.seed-from-code"),{preserveScroll:!0,onSuccess:()=>{w.value=!1}})};return(i,t)=>(m(),C(ue,{title:"Prompt Templates",subtitle:"Override chapter system/user prompts without changing code."},{default:l(()=>[h.value?.success?(m(),C(e(Ce),{key:0,class:"mb-6 border border-emerald-500/40 bg-emerald-500/10"},{default:l(()=>[o(e(Y),{class:"h-4 w-4 text-emerald-500"}),o(e(Oe),null,{default:l(()=>[...t[23]||(t[23]=[n("Saved",-1)])]),_:1}),o(e(Se),null,{default:l(()=>[n(p(h.value.success),1)]),_:1})]),_:1})):c("",!0),o(e(Ve),{class:"border border-border/50 bg-card shadow-sm"},{default:l(()=>[o(e(we),{class:"flex flex-row items-center justify-between pb-3"},{default:l(()=>[a("div",null,[o(e($e),{class:"text-base font-semibold text-foreground"},{default:l(()=>[...t[24]||(t[24]=[n("Templates",-1)])]),_:1}),o(e(qe),null,{default:l(()=>[...t[25]||(t[25]=[n(" Active templates override code templates when a matching context is found. ",-1)])]),_:1})]),a("div",Je,[o(e(V),{variant:"outline",size:"sm",onClick:ae},{default:l(()=>[o(e(Y),{class:"mr-2 h-4 w-4"}),t[26]||(t[26]=n(" Create From Code ",-1))]),_:1}),o(e(V),{size:"sm",onClick:le},{default:l(()=>[o(e(Te),{class:"mr-2 h-4 w-4"}),t[27]||(t[27]=n(" Add Template ",-1))]),_:1})])]),_:1}),o(e(he),null,{default:l(()=>[o(_e,{columns:e(Pe),data:F.value,"search-key":"context_value","search-placeholder":"Filter templates..."},null,8,["columns","data"])]),_:1})]),_:1}),o(e(M),{open:y.value,"onUpdate:open":t[18]||(t[18]=r=>y.value=r)},{default:l(()=>[o(e(I),{class:"sm:max-w-[900px] max-h-[90vh] overflow-y-auto"},{default:l(()=>[o(e(z),null,{default:l(()=>[o(e(H),null,{default:l(()=>[n(p(T.value?"Edit template":"Create template"),1)]),_:1}),o(e(K),null,{default:l(()=>[...t[28]||(t[28]=[n(" Edit system and user prompt overrides, plus optional requirement JSON. ",-1)])]),_:1})]),_:1}),a("div",Ae,[a("div",Fe,[a("div",Re,[o(e(f),null,{default:l(()=>[...t[29]||(t[29]=[n("Context Type",-1)])]),_:1}),O(a("select",{"onUpdate:modelValue":t[0]||(t[0]=r=>e(s).context_type=r),class:"h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm"},[(m(!0),d(E,null,P(se.value,r=>(m(),d("option",{key:r,value:r},p(r.replace(/_/g," ")),9,De))),128))],512),[[U,e(s).context_type]]),e(s).errors.context_type?(m(),d("p",Be,p(e(s).errors.context_type),1)):c("",!0)]),a("div",je,[o(e(f),null,{default:l(()=>[...t[30]||(t[30]=[n("Context Value",-1)])]),_:1}),o(e(A),{modelValue:e(s).context_value,"onUpdate:modelValue":t[1]||(t[1]=r=>e(s).context_value=r),placeholder:"engineering / computer_science / etc"},null,8,["modelValue"]),e(s).errors.context_value?(m(),d("p",Le,p(e(s).errors.context_value),1)):c("",!0)])]),a("div",Me,[a("div",Ie,[o(e(f),null,{default:l(()=>[...t[31]||(t[31]=[n("Chapter Type (optional)",-1)])]),_:1}),o(e(A),{modelValue:e(s).chapter_type,"onUpdate:modelValue":t[2]||(t[2]=r=>e(s).chapter_type=r),placeholder:"introduction / methodology / ..."},null,8,["modelValue"]),e(s).errors.chapter_type?(m(),d("p",Ke,p(e(s).errors.chapter_type),1)):c("",!0)]),a("div",ze,[o(e(f),null,{default:l(()=>[...t[32]||(t[32]=[n("Priority",-1)])]),_:1}),o(e(A),{modelValue:e(s).priority,"onUpdate:modelValue":t[3]||(t[3]=r=>e(s).priority=r),type:"number",min:"0",max:"1000"},null,8,["modelValue"]),e(s).errors.priority?(m(),d("p",He,p(e(s).errors.priority),1)):c("",!0)]),a("label",Qe,[t[33]||(t[33]=a("span",{class:"text-foreground"},"Active",-1)),o(e(te),{checked:e(s).is_active,"onUpdate:checked":t[4]||(t[4]=r=>e(s).is_active=r)},null,8,["checked"])])]),a("div",We,[o(e(f),null,{default:l(()=>[...t[34]||(t[34]=[n("Parent Template (optional)",-1)])]),_:1}),O(a("select",{"onUpdate:modelValue":t[5]||(t[5]=r=>e(s).parent_template_id=r),class:"h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm"},[t[35]||(t[35]=a("option",{value:""},"None",-1)),(m(!0),d(E,null,P(re.value,r=>(m(),d("option",{key:r.id,value:String(r.id)}," #"+p(r.id)+" · "+p(r.context_type)+":"+p(r.context_value)+p(r.chapter_type?` · ${r.chapter_type}`:""),9,Xe))),128))],512),[[U,e(s).parent_template_id]]),e(s).errors.parent_template_id?(m(),d("p",Ye,p(e(s).errors.parent_template_id),1)):c("",!0),t[36]||(t[36]=a("p",{class:"text-xs text-muted-foreground"}," Note: inheritance/merging is currently limited; parent is primarily for future use. ",-1))]),a("div",Ge,[o(e(f),null,{default:l(()=>[...t[37]||(t[37]=[n("System Prompt Override (optional)",-1)])]),_:1}),o(e(g),{modelValue:e(s).system_prompt,"onUpdate:modelValue":t[6]||(t[6]=r=>e(s).system_prompt=r),rows:"8",class:"font-mono text-sm",placeholder:"Leave empty to use the code template system prompt."},null,8,["modelValue"]),e(s).errors.system_prompt?(m(),d("p",Ze,p(e(s).errors.system_prompt),1)):c("",!0)]),a("div",et,[o(e(f),null,{default:l(()=>[...t[38]||(t[38]=[n("User Prompt Override (chapter prompt template) (optional)",-1)])]),_:1}),o(e(g),{modelValue:e(s).chapter_prompt_template,"onUpdate:modelValue":t[7]||(t[7]=r=>e(s).chapter_prompt_template=r),rows:"10",class:"font-mono text-sm",placeholder:"Leave empty to use the code template chapter prompt."},null,8,["modelValue"]),e(s).errors.chapter_prompt_template?(m(),d("p",tt,p(e(s).errors.chapter_prompt_template),1)):c("",!0),a("p",{class:"text-xs text-muted-foreground"},[t[39]||(t[39]=n(" Supported variables: ",-1)),a("span",{class:"font-mono"},p(Nt))])]),o(e(Ue),{type:"multiple",class:"w-full"},{default:l(()=>[o(e(Q),{value:"requirements"},{default:l(()=>[o(e(W),null,{default:l(()=>[...t[40]||(t[40]=[n("Requirements JSON (optional)",-1)])]),_:1}),o(e(X),{class:"space-y-4"},{default:l(()=>[a("div",st,[a("div",ot,[o(e(f),null,{default:l(()=>[...t[41]||(t[41]=[n("Table Requirements (JSON)",-1)])]),_:1}),o(e(g),{modelValue:e(s).table_requirements,"onUpdate:modelValue":t[8]||(t[8]=r=>e(s).table_requirements=r),rows:"6",class:"font-mono text-sm",placeholder:"[] or { ... }"},null,8,["modelValue"]),e(s).errors.table_requirements?(m(),d("p",rt,p(e(s).errors.table_requirements),1)):c("",!0)]),a("div",lt,[o(e(f),null,{default:l(()=>[...t[42]||(t[42]=[n("Diagram Requirements (JSON)",-1)])]),_:1}),o(e(g),{modelValue:e(s).diagram_requirements,"onUpdate:modelValue":t[9]||(t[9]=r=>e(s).diagram_requirements=r),rows:"6",class:"font-mono text-sm",placeholder:"[] or { ... }"},null,8,["modelValue"]),e(s).errors.diagram_requirements?(m(),d("p",at,p(e(s).errors.diagram_requirements),1)):c("",!0)])]),a("div",nt,[a("div",it,[o(e(f),null,{default:l(()=>[...t[43]||(t[43]=[n("Calculation Requirements (JSON)",-1)])]),_:1}),o(e(g),{modelValue:e(s).calculation_requirements,"onUpdate:modelValue":t[10]||(t[10]=r=>e(s).calculation_requirements=r),rows:"6",class:"font-mono text-sm",placeholder:"[] or { ... }"},null,8,["modelValue"]),e(s).errors.calculation_requirements?(m(),d("p",mt,p(e(s).errors.calculation_requirements),1)):c("",!0)]),a("div",pt,[o(e(f),null,{default:l(()=>[...t[44]||(t[44]=[n("Code Requirements (JSON)",-1)])]),_:1}),o(e(g),{modelValue:e(s).code_requirements,"onUpdate:modelValue":t[11]||(t[11]=r=>e(s).code_requirements=r),rows:"6",class:"font-mono text-sm",placeholder:"[] or { ... }"},null,8,["modelValue"]),e(s).errors.code_requirements?(m(),d("p",dt,p(e(s).errors.code_requirements),1)):c("",!0)])]),a("div",ut,[a("div",_t,[o(e(f),null,{default:l(()=>[...t[45]||(t[45]=[n("Placeholder Rules (JSON)",-1)])]),_:1}),o(e(g),{modelValue:e(s).placeholder_rules,"onUpdate:modelValue":t[12]||(t[12]=r=>e(s).placeholder_rules=r),rows:"6",class:"font-mono text-sm",placeholder:"[] or { ... }"},null,8,["modelValue"]),e(s).errors.placeholder_rules?(m(),d("p",ct,p(e(s).errors.placeholder_rules),1)):c("",!0)]),a("div",ft,[o(e(f),null,{default:l(()=>[...t[46]||(t[46]=[n("Recommended Tools (JSON)",-1)])]),_:1}),o(e(g),{modelValue:e(s).recommended_tools,"onUpdate:modelValue":t[13]||(t[13]=r=>e(s).recommended_tools=r),rows:"6",class:"font-mono text-sm",placeholder:"[] or { ... }"},null,8,["modelValue"]),e(s).errors.recommended_tools?(m(),d("p",yt,p(e(s).errors.recommended_tools),1)):c("",!0)])])]),_:1})]),_:1}),o(e(Q),{value:"extras"},{default:l(()=>[o(e(W),null,{default:l(()=>[...t[47]||(t[47]=[n("Extra JSON (optional)",-1)])]),_:1}),o(e(X),{class:"space-y-4"},{default:l(()=>[a("div",xt,[a("div",vt,[o(e(f),null,{default:l(()=>[...t[48]||(t[48]=[n("Mock Data Config (JSON)",-1)])]),_:1}),o(e(g),{modelValue:e(s).mock_data_config,"onUpdate:modelValue":t[14]||(t[14]=r=>e(s).mock_data_config=r),rows:"6",class:"font-mono text-sm",placeholder:"{}"},null,8,["modelValue"]),e(s).errors.mock_data_config?(m(),d("p",gt,p(e(s).errors.mock_data_config),1)):c("",!0)]),a("div",bt,[o(e(f),null,{default:l(()=>[...t[49]||(t[49]=[n("Citation Requirements (JSON)",-1)])]),_:1}),o(e(g),{modelValue:e(s).citation_requirements,"onUpdate:modelValue":t[15]||(t[15]=r=>e(s).citation_requirements=r),rows:"6",class:"font-mono text-sm",placeholder:"{}"},null,8,["modelValue"]),e(s).errors.citation_requirements?(m(),d("p",kt,p(e(s).errors.citation_requirements),1)):c("",!0)])]),a("div",Vt,[o(e(f),null,{default:l(()=>[...t[50]||(t[50]=[n("Formatting Rules (JSON)",-1)])]),_:1}),o(e(g),{modelValue:e(s).formatting_rules,"onUpdate:modelValue":t[16]||(t[16]=r=>e(s).formatting_rules=r),rows:"6",class:"font-mono text-sm",placeholder:"{}"},null,8,["modelValue"]),e(s).errors.formatting_rules?(m(),d("p",ht,p(e(s).errors.formatting_rules),1)):c("",!0)])]),_:1})]),_:1})]),_:1})]),a("div",qt,[o(e(V),{variant:"ghost",onClick:t[17]||(t[17]=r=>y.value=!1)},{default:l(()=>[...t[51]||(t[51]=[n("Cancel",-1)])]),_:1}),o(e(V),{disabled:e(s).processing,onClick:ne},{default:l(()=>[e(s).processing?(m(),C(e(G),{key:0,class:"mr-2 h-4 w-4 animate-spin"})):c("",!0),a("span",null,p(T.value?"Update template":"Add template"),1)]),_:1},8,["disabled"])])]),_:1})]),_:1},8,["open"]),o(e(M),{open:w.value,"onUpdate:open":t[22]||(t[22]=r=>w.value=r)},{default:l(()=>[o(e(I),{class:"sm:max-w-[520px]"},{default:l(()=>[o(e(z),null,{default:l(()=>[o(e(H),null,{default:l(()=>[...t[52]||(t[52]=[n("Create From Code Template",-1)])]),_:1}),o(e(K),null,{default:l(()=>[...t[53]||(t[53]=[n(" Creates inactive starter templates in the database so you can edit and then activate them. ",-1)])]),_:1})]),_:1}),a("div",wt,[a("div",$t,[o(e(f),null,{default:l(()=>[...t[54]||(t[54]=[n("Faculty",-1)])]),_:1}),O(a("select",{"onUpdate:modelValue":t[19]||(t[19]=r=>e(v).faculty=r),class:"h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm"},[(m(!0),d(E,null,P(oe.value,r=>(m(),d("option",{key:r,value:r},p(r.replace(/_/g," ")),9,Ct))),128))],512),[[U,e(v).faculty]]),e(v).errors.faculty?(m(),d("p",St,p(e(v).errors.faculty),1)):c("",!0)]),a("div",Ot,[o(e(f),null,{default:l(()=>[...t[55]||(t[55]=[n("Chapter Type",-1)])]),_:1}),O(a("select",{"onUpdate:modelValue":t[20]||(t[20]=r=>e(v).chapter_type=r),class:"h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm"},[...t[56]||(t[56]=[a("option",{value:"all"},"All (1–6)",-1),a("option",{value:"introduction"},"Introduction",-1),a("option",{value:"literature_review"},"Literature review",-1),a("option",{value:"methodology"},"Methodology",-1),a("option",{value:"results"},"Results",-1),a("option",{value:"discussion"},"Discussion",-1),a("option",{value:"conclusion"},"Conclusion",-1)])],512),[[U,e(v).chapter_type]]),e(v).errors.chapter_type?(m(),d("p",Ut,p(e(v).errors.chapter_type),1)):c("",!0),t[57]||(t[57]=a("p",{class:"text-xs text-muted-foreground"},[n(" Tip: these are created with "),a("span",{class:"font-mono"},"is_active=false"),n(", so they won’t affect generation until you activate. ")],-1))])]),a("div",Tt,[o(e(V),{variant:"ghost",onClick:t[21]||(t[21]=r=>w.value=!1)},{default:l(()=>[...t[58]||(t[58]=[n("Cancel",-1)])]),_:1}),o(e(V),{disabled:e(v).processing,onClick:ie},{default:l(()=>[e(v).processing?(m(),C(e(G),{key:0,class:"mr-2 h-4 w-4 animate-spin"})):c("",!0),t[59]||(t[59]=a("span",null,"Create",-1))]),_:1},8,["disabled"])])]),_:1})]),_:1},8,["open"])]),_:1}))}});export{Ts as default};
