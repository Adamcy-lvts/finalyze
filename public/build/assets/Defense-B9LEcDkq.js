import{d as fe,c,o as r,K as t,a3 as ht,O as $,Q as V,S as U,H as i,E as o,u as s,M as d,n as R,P as m,y as f,w as ce,a as q,C as E,aa as Be,ad as T,F as bt,A as re,R as wt,L as Ge,B as Qe,f as yt}from"./app-Drfb5vhD.js";import{t as _e}from"./index-D8sJQrjD.js";import{_ as _t}from"./AppLayout.vue_vue_type_script_setup_true_lang-DnG8lPXn.js";import{c as Oe,_ as z}from"./index-Cn9MYLLD.js";import{_ as H,a as B}from"./CardContent.vue_vue_type_script_setup_true_lang-LKRtVKVi.js";import{_ as Y}from"./CardDescription.vue_vue_type_script_setup_true_lang-rjuNZDG_.js";import{_ as W,a as Z}from"./CardTitle.vue_vue_type_script_setup_true_lang-C6oNPW71.js";import{_ as ee}from"./index-D-3iZmNB.js";import{_ as ke}from"./Progress.vue_vue_type_script_setup_true_lang-B3NdoYwE.js";import{_ as kt,a as zt}from"./DialogContent.vue_vue_type_script_setup_true_lang-C2z8EtRP.js";import{R as ue}from"./RichTextViewer-9KJXHoXD.js";import{C as ie}from"./chevron-right-G-7VIrwo.js";import{H as X}from"./history-kNHKuXUf.js";import{M as $t}from"./message-square-CRusxNwk.js";import{F as St}from"./file-text-BXPzIbHp.js";import{S as K}from"./sparkles-DEWv_BOy.js";import{e as De}from"./useForwardExpose-Mg-D3WOz.js";import{R as Ee}from"./refresh-cw-DblCDfWl.js";import{C as Ve}from"./chevron-left-DOjN6t0i.js";import{C as jt}from"./circle-help-P0EznAv8.js";import{L as Ct}from"./lightbulb-DbEJmx_B.js";import{T as se}from"./target-Bj1JG-Jd.js";import{A as ze}from"./arrow-left-CHfD7m8C.js";import{S as It}from"./shield-0QqgBlPm.js";import{Z as qt}from"./zap-BFemYI_Q.js";import{U as $e}from"./users-BGbO8TZC.js";import{B as Ae}from"./brain-D8XZ_dWQ.js";import{M as Lt}from"./maximize-2-D6V1OpaL.js";import{P as Tt}from"./play-B4F8MV-I.js";import{_ as Pt}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./UserInfo.vue_vue_type_script_setup_true_lang-BLlNb5W3.js";import"./Presence-Cd6ATzLy.js";import"./index-BUawP80q.js";import"./DialogTitle-DfpKTmmm.js";import"./TooltipTrigger.vue_vue_type_script_setup_true_lang-D5qL88rB.js";import"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-Dv_0pwze.js";import"./loader-circle-BCOmBCcX.js";import"./VisuallyHidden-Ds1ee0_t.js";import"./coins-LEtzH9tW.js";import"./log-out-Dd5j-65E.js";import"./AppLogo.vue_vue_type_script_setup_true_lang-ZdwUt2Op.js";import"./library-BSw0UWSx.js";import"./plus-C5vk0fpa.js";import"./book-open-CioXM-hZ.js";import"./WordBalanceDisplay.vue_vue_type_script_setup_true_lang-DsZ5m7ES.js";import"./sun-DZcnMgBc.js";import"./useWordBalance-DlwRiA6H.js";import"./nullish-CHIgUVhi.js";import"./index-CdhztUsa.js";import"./purify.es-DxJI3Wx7.js";import"./index-BWEDi_FC.js";import"./step-DrZ9DcYd.js";import"./chart-column-CjpHg4iR.js";import"./calendar-DY5Njonr.js";import"./circle-alert-D6iGcZBs.js";import"./eye-Df6YFRnF.js";import"./check-DaYZNDDf.js";import"./copy-BV7AQDwa.js";import"./download-Rmm3aUSK.js";import"./trash-2-DXyinpfS.js";/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Se=Oe("MicIcon",[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pe=Oe("PresentationIcon",[["path",{d:"M2 3h20",key:"91anmk"}],["path",{d:"M21 3v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V3",key:"2k9sn8"}],["path",{d:"m7 21 5-5 5 5",key:"bip4we"}]]),Rt={key:0,class:"flex flex-col gap-4 h-full"},Mt={class:"w-full h-1 bg-zinc-800 rounded-full overflow-hidden shrink-0"},Nt={key:0,class:"hidden lg:block lg:col-span-4 space-y-1 overflow-y-auto pr-2 custom-scrollbar h-full max-h-[400px] lg:max-h-none"},Ft=["onClick"],Gt={class:"flex items-center gap-3 overflow-hidden"},Qt={class:"text-xs font-medium truncate"},At={key:1,class:"flex items-center justify-between mb-4 border-b border-white/5 pb-4 shrink-0"},Ht={class:"text-center"},Bt={class:"text-[10px] uppercase tracking-wider text-indigo-400 font-bold block"},Ot={class:"text-sm font-bold font-display text-white truncate max-w-[200px]"},Dt={class:"relative bg-zinc-900/50 border border-white/5 rounded-2xl p-5 flex flex-col h-full overflow-hidden"},Et={key:0,class:"flex items-start justify-between mb-4 border-b border-white/5 pb-4 shrink-0"},Vt={class:"text-[10px] uppercase tracking-wider text-indigo-400 font-bold mb-1 block"},Ut={class:"text-lg font-bold font-display text-white line-clamp-2 md:line-clamp-none"},Jt={class:"flex-1 overflow-y-auto custom-scrollbar pr-2 space-y-4"},Yt={key:0,class:"bg-indigo-500/5 border border-indigo-500/10 rounded-lg p-3"},Wt={class:"flex items-start gap-2 text-xs text-indigo-300/80"},Zt={class:"bg-indigo-500/20 p-1 rounded-md mt-0.5 shrink-0"},Kt={class:"leading-relaxed"},Xt={class:"prose prose-sm dark:prose-invert max-w-none text-zinc-300 text-xs leading-relaxed"},es={class:"pt-4 border-t border-white/5"},ts={class:"text-xs font-bold text-zinc-500 uppercase mb-3 flex items-center gap-2"},ss={class:"space-y-2"},is={key:1,class:"mt-4 text-sm text-muted-foreground"},ns={key:2,class:"flex flex-col items-center justify-center py-8 text-center space-y-4 h-full"},os={class:"h-12 w-12 rounded-full bg-indigo-500/10 flex items-center justify-center"},He=fe({__name:"PresentationGuide",props:{slides:{},isLoading:{type:Boolean},rawGuide:{},activeIndex:{},layout:{default:"split"}},emits:["update:activeIndex","regenerate"],setup(M,{emit:b}){const u=M,v=b,L=l=>{v("update:activeIndex",l)},S=()=>{u.activeIndex<u.slides.length-1&&L(u.activeIndex+1)},j=()=>{u.activeIndex>0&&L(u.activeIndex-1)};return(l,y)=>l.slides.length?(r(),c("div",Rt,[t("div",Mt,[t("div",{class:"h-full bg-indigo-500 transition-all duration-500 ease-out",style:ht({width:`${(l.activeIndex+1)/l.slides.length*100}%`})},null,4)]),t("div",{class:R(["min-h-0 flex-1",l.layout==="split"?"grid grid-cols-1 lg:grid-cols-12 gap-6":"flex flex-col"])},[l.layout==="split"?(r(),c("div",Nt,[(r(!0),c(V,null,U(l.slides,(N,k)=>(r(),c("button",{key:k,onClick:w=>L(k),class:R(["w-full flex items-center justify-between p-3 rounded-lg text-left transition-all group border border-transparent shrink-0",l.activeIndex===k?"bg-indigo-500/10 border-indigo-500/20 text-white":"hover:bg-muted/50 text-muted-foreground"])},[t("div",Gt,[t("span",{class:R(["text-xs font-mono font-bold w-4 shrink-0",l.activeIndex===k?"text-indigo-400":"text-zinc-600"])},d((k+1).toString().padStart(2,"0")),3),t("span",Qt,d(N.title),1)]),i(s(ie),{class:R(["h-3 w-3 transition-transform shrink-0",l.activeIndex===k?"text-indigo-400":"opacity-0"])},null,8,["class"])],10,Ft))),128))])):$("",!0),l.layout==="compact"?(r(),c("div",At,[i(s(z),{variant:"ghost",size:"icon",class:"h-8 w-8 text-zinc-400 hover:text-white",disabled:l.activeIndex===0,onClick:j},{default:o(()=>[i(s(ie),{class:"h-4 w-4 rotate-180"})]),_:1},8,["disabled"]),t("div",Ht,[t("span",Bt," Slide "+d(l.activeIndex+1)+" of "+d(l.slides.length),1),t("h4",Ot,d(l.slides[l.activeIndex].title),1)]),i(s(z),{variant:"ghost",size:"icon",class:"h-8 w-8 text-zinc-400 hover:text-white",disabled:l.activeIndex===l.slides.length-1,onClick:S},{default:o(()=>[i(s(ie),{class:"h-4 w-4"})]),_:1},8,["disabled"])])):$("",!0),t("div",{class:R(["flex flex-col h-full min-h-0",l.layout==="split"?"lg:col-span-8":"w-full"])},[t("div",Dt,[l.layout==="split"?(r(),c("div",Et,[t("div",null,[t("span",Vt,"Slide "+d(l.activeIndex+1),1),t("h4",Ut,d(l.slides[l.activeIndex].title),1)]),i(s(ee),{variant:"outline",class:"bg-zinc-950/50 border-zinc-800 text-zinc-400 text-[10px] gap-1.5 font-mono shrink-0 ml-2"},{default:o(()=>[i(s(X),{class:"h-3 w-3"}),m(" "+d(l.slides[l.activeIndex].duration),1)]),_:1})])):$("",!0),t("div",Jt,[l.slides[l.activeIndex].visuals?(r(),c("div",Yt,[t("div",Wt,[t("div",Zt,[i(s(pe),{class:"h-3 w-3 text-indigo-400"})]),t("span",Kt,[y[1]||(y[1]=t("strong",{class:"text-indigo-300"},"Visuals:",-1)),m(" "+d(l.slides[l.activeIndex].visuals),1)])])])):$("",!0),t("div",Xt,[i(ue,{content:l.slides[l.activeIndex].content,"show-font-controls":!1,class:"!bg-transparent !p-0","viewer-class":"prose-sm"},null,8,["content"])]),t("div",es,[t("h5",ts,[i(s($t),{class:"h-3 w-3"}),y[2]||(y[2]=m(" Speaker Notes ",-1))]),t("ul",ss,[(r(!0),c(V,null,U(l.slides[l.activeIndex].talking_points,(N,k)=>(r(),c("li",{key:k,class:"flex gap-2 text-xs text-zinc-400"},[y[3]||(y[3]=t("span",{class:"text-indigo-500/50"},"â€¢",-1)),m(" "+d(N),1)]))),128))])])])])],2)],2)])):l.rawGuide?(r(),c("div",is,[i(ue,{content:l.rawGuide,"show-font-controls":!1,class:"!bg-transparent","viewer-class":"prose-sm md:prose-base"},null,8,["content"])])):(r(),c("div",ns,[t("div",os,[i(s(pe),{class:"h-6 w-6 text-indigo-500/50"})]),y[4]||(y[4]=t("p",{class:"text-sm text-zinc-500 max-w-xs"}," No presentation guide yet. Generate a structured slide deck for your defense. ",-1)),i(s(z),{class:"gap-2 rounded-xl group",onClick:y[0]||(y[0]=N=>l.$emit("regenerate")),disabled:l.isLoading},{default:o(()=>[i(s(St),{class:"h-4 w-4"}),m(" "+d(l.isLoading?"Generating...":"Generate Guide")+" ",1),i(s(K),{class:"h-3.5 w-3.5 opacity-50 group-hover:opacity-100"})]),_:1},8,["disabled"])]))}}),as={class:"flex-1 min-h-[300px] relative overflow-hidden"},ls={class:"text-2xl md:text-4xl font-bold font-display text-white mb-8 md:mb-10 tracking-tight"},rs={class:"flex-1 overflow-y-auto custom-scrollbar pr-4 md:pr-6 pb-4 max-w-4xl"},ds=["innerHTML"],cs={key:1,class:"flex flex-col items-center justify-center h-full text-center space-y-4"},us={class:"h-12 w-12 rounded-full bg-indigo-500/10 flex items-center justify-center"},ps={key:2,class:"absolute inset-0 bg-zinc-950/50 backdrop-blur-sm flex items-center justify-center z-10 rounded-xl"},fs={class:"flex flex-col items-center gap-3"},ms={key:0,class:"mt-6 pt-4 border-t border-white/5 flex items-center justify-between"},xs={class:"flex items-center gap-1.5"},vs=["onClick"],gs={class:"flex items-center gap-2"},hs={class:"text-sm font-mono text-zinc-500 w-12 text-center"},bs=fe({__name:"ExecutiveBriefingDeck",props:{slides:{default:()=>[]},isLoading:{type:Boolean}},emits:["refresh"],setup(M,{emit:b}){const u=M,v=f(0),L=f(null),{isSwiping:S,direction:j}=De(L);ce(S,(p,g)=>{g&&!p&&(j.value==="left"?y():j.value==="right"&&N())});const l=q(()=>u.slides[v.value]),y=()=>{v.value<u.slides.length-1&&v.value++},N=()=>{v.value>0&&v.value--},k=p=>{v.value=p},w=p=>{if(!p)return"";let g=p;return g=g.replace(/^#### (.*$)/gim,"<h4>$1</h4>"),g=g.replace(/^### (.*$)/gim,"<h3>$1</h3>"),g=g.replace(/^## (.*$)/gim,"<h2>$1</h2>"),g=g.replace(/^# (.*$)/gim,"<h1>$1</h1>"),g=g.replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>"),g=g.replace(new RegExp("(?<!\\*)\\*([^*\\n]+?)\\*(?!\\*)","g"),"<em>$1</em>"),g.split(/\n\s*\n/).filter(h=>h.trim()).map(h=>{const x=h.trim();if(x.match(/^<h[1-4]>/))return x;if(x.includes(`
`)&&(x.match(/^\d+\.\s/)||x.match(/^[-*]\s/))){const C=x.split(`
`).map(_=>_.trim()).filter(_=>_),I=C.some(_=>_.match(/^\d+\.\s/)),O=C.map(_=>`<li>${_.replace(/^(\d+\.|[-*])\s/,"")}</li>`).join("");return I?`<ol>${O}</ol>`:`<ul>${O}</ul>`}return`<p>${x.replace(/\n/g,"<br>")}</p>`}).join("")};return(p,g)=>(r(),c("div",{class:"flex flex-col h-full relative",ref_key:"containerRef",ref:L},[t("div",as,[p.slides.length>0?(r(),E(Be,{key:0,"enter-active-class":"transition-opacity duration-300 ease-out","enter-from-class":"opacity-0","enter-to-class":"opacity-100","leave-active-class":"transition-opacity duration-200 ease-in absolute inset-0","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:o(()=>[(r(),c("div",{key:v.value,class:"h-full flex flex-col"},[t("h3",ls,d(l.value.title),1),t("div",rs,[t("div",{innerHTML:w(l.value.content),class:"prose-base md:prose-xl dark:prose-invert leading-loose tracking-wide [&_p]:mb-6 [&_strong]:text-indigo-400 [&_strong]:font-semibold text-zinc-50 [&_ul]:list-none [&_ul]:pl-0 [&_ol]:list-decimal [&_ol]:pl-5 [&_li]:mb-6 [&_li]:pl-4 [&_li]:border-l-2 [&_li]:border-indigo-500/50"},null,8,ds)])]))]),_:1})):p.isLoading?$("",!0):(r(),c("div",cs,[t("div",us,[i(s(K),{class:"h-6 w-6 text-indigo-500/50"})]),g[0]||(g[0]=t("p",{class:"text-base text-zinc-500 max-w-xs"}," No executive briefing yet. Click refresh to generate a summary. ",-1))])),p.isLoading?(r(),c("div",ps,[t("div",fs,[i(s(Ee),{class:"h-6 w-6 text-indigo-400 animate-spin"}),g[1]||(g[1]=t("span",{class:"text-xs font-medium text-indigo-300"},"Analyzing Project...",-1))])])):$("",!0)]),p.slides.length>0?(r(),c("div",ms,[t("div",xs,[(r(!0),c(V,null,U(p.slides,(F,h)=>(r(),c("button",{key:h,onClick:x=>k(h),class:R(["h-1.5 rounded-full transition-all duration-300",v.value===h?"w-6 bg-indigo-500":"w-1.5 bg-zinc-700 hover:bg-zinc-600"])},null,10,vs))),128))]),t("div",gs,[i(s(z),{variant:"ghost",size:"icon",class:"h-8 w-8 text-zinc-400 hover:text-white",disabled:v.value===0,onClick:N},{default:o(()=>[i(s(Ve),{class:"h-4 w-4"})]),_:1},8,["disabled"]),t("span",hs,d(v.value+1)+" / "+d(p.slides.length),1),i(s(z),{variant:"ghost",size:"icon",class:"h-8 w-8 text-zinc-400 hover:text-white",disabled:v.value===p.slides.length-1,onClick:y},{default:o(()=>[i(s(ie),{class:"h-4 w-4"})]),_:1},8,["disabled"])])])):$("",!0)],512))}}),ws={class:"flex-1 min-h-[350px] relative overflow-hidden"},ys={key:0,class:"mb-6"},_s={class:"mb-10"},ks={class:"flex items-start gap-4"},zs={class:"h-10 w-10 shrink-0 rounded-xl bg-rose-500/10 flex items-center justify-center"},$s={class:"text-2xl md:text-4xl font-bold font-display text-white tracking-tight leading-tight"},Ss={class:"flex-1 overflow-y-auto custom-scrollbar pr-4 md:pr-6 pb-6"},js={class:"relative pl-6"},Cs={class:"flex items-center gap-2 mb-4 text-indigo-400 font-medium text-sm tracking-wide uppercase"},Is=["innerHTML"],qs={key:1,class:"flex flex-col items-center justify-center h-full text-center space-y-4"},Ls={class:"h-16 w-16 rounded-full bg-rose-500/10 flex items-center justify-center"},Ts={key:2,class:"absolute inset-0 bg-zinc-950/50 backdrop-blur-sm flex items-center justify-center z-10 rounded-3xl border border-white/5"},Ps={class:"flex flex-col items-center gap-4"},Rs={class:"relative"},Ms={key:0,class:"mt-8 pt-6 border-t border-white/5 flex items-center justify-between"},Ns={class:"flex items-center gap-2"},Fs=["onClick"],Gs={class:"flex items-center gap-3"},Qs={class:"flex flex-col items-center min-w-[3rem]"},As={class:"text-base font-bold text-white leading-none"},Hs={class:"text-[10px] text-zinc-500 font-mono uppercase mt-1"},Bs=fe({__name:"PredictedQuestionsDeck",props:{questions:{default:()=>[]},isLoading:{type:Boolean}},setup(M){const b=M,u=f(0),v=f(null),{isSwiping:L,direction:S}=De(v);ce(L,(w,p)=>{p&&!w&&(S.value==="left"?l():S.value==="right"&&y())});const j=q(()=>b.questions[u.value]),l=()=>{u.value<b.questions.length-1&&u.value++},y=()=>{u.value>0&&u.value--},N=w=>{u.value=w},k=w=>w?w.split(`

`).map(p=>`<p>${p.trim().replace(/\n/g,"<br>")}</p>`).join(""):"";return(w,p)=>(r(),c("div",{class:"flex flex-col h-full relative",ref_key:"containerRef",ref:v},[t("div",ws,[w.questions.length>0?(r(),E(Be,{key:0,"enter-active-class":"transition-opacity duration-300 ease-out","enter-from-class":"opacity-0","enter-to-class":"opacity-100","leave-active-class":"transition-opacity duration-200 ease-in absolute inset-0","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:o(()=>[(r(),c("div",{key:u.value,class:"h-full flex flex-col pt-2"},[j.value.category?(r(),c("div",ys,[i(s(ee),{variant:"outline",class:"text-[10px] uppercase tracking-widest bg-rose-500/5 text-rose-400 border-rose-500/20 px-3 py-1"},{default:o(()=>[m(d(j.value.category),1)]),_:1})])):$("",!0),t("div",_s,[t("div",ks,[t("div",zs,[i(s(jt),{class:"h-5 w-5 text-rose-500"})]),t("h3",$s,d(j.value.question),1)])]),t("div",Ss,[t("div",js,[p[1]||(p[1]=t("div",{class:"absolute left-0 top-0 bottom-0 w-1 bg-gradient-to-b from-indigo-500 to-transparent rounded-full opacity-50"},null,-1)),t("div",Cs,[i(s(Ct),{class:"h-4 w-4"}),p[0]||(p[0]=t("span",null,"Defense Strategy",-1))]),t("div",{innerHTML:k(j.value.suggested_answer),class:"text-zinc-300 text-lg md:text-xl leading-relaxed tracking-wide italic font-serif [&_p]:mb-6"},null,8,Is)])])]))]),_:1})):w.isLoading?$("",!0):(r(),c("div",qs,[t("div",Ls,[i(s(se),{class:"h-8 w-8 text-rose-500/50"})]),p[2]||(p[2]=t("div",{class:"space-y-2"},[t("p",{class:"text-lg font-medium text-white"},"No questions identified"),t("p",{class:"text-sm text-zinc-500 max-w-xs"}," Generate defense questions to prepare for potential examiner inquiry. ")],-1))])),w.isLoading?(r(),c("div",Ts,[t("div",Ps,[t("div",Rs,[i(s(Ee),{class:"h-10 w-10 text-rose-500 animate-spin"}),i(s(K),{class:"h-4 w-4 text-rose-400 absolute -top-1 -right-1 animate-pulse"})]),p[3]||(p[3]=t("span",{class:"text-sm font-medium text-rose-200"},"Simulating Defense Panel...",-1))])])):$("",!0)]),w.questions.length>0?(r(),c("div",Ms,[t("div",Ns,[(r(!0),c(V,null,U(w.questions,(g,F)=>(r(),c("button",{key:F,onClick:h=>N(F),class:R(["h-2 rounded-full transition-all duration-300",u.value===F?"w-8 bg-rose-500":"w-2 bg-zinc-800 hover:bg-zinc-700"])},null,10,Fs))),128))]),t("div",Gs,[i(s(z),{variant:"ghost",size:"icon",class:"h-10 w-10 rounded-xl border border-white/5 text-zinc-400 hover:text-white hover:bg-white/5 transition-all",disabled:u.value===0,onClick:y},{default:o(()=>[i(s(Ve),{class:"h-5 w-5"})]),_:1},8,["disabled"]),t("div",Qs,[t("span",As,d(u.value+1),1),t("span",Hs,d(w.questions.length)+" Total",1)]),i(s(z),{variant:"ghost",size:"icon",class:"h-10 w-10 rounded-xl border border-white/5 text-zinc-400 hover:text-white hover:bg-white/5 transition-all",disabled:u.value===w.questions.length-1,onClick:l},{default:o(()=>[i(s(ie),{class:"h-5 w-5"})]),_:1},8,["disabled"])])])):$("",!0)],512))}});function Os(M){const b=f(null),u=f([]),v=f(null),L=f(null),S=f(!1),j=f(!1),l=f(!1),y=q(()=>!!b.value);return{session:b,messages:u,feedback:v,performanceMetrics:L,isStarting:S,isLoading:j,isSending:l,hasSession:y,startSession:async h=>{if(!S.value){S.value=!0;try{const{data:x}=await T.post(`/api/projects/${M}/defense/sessions`,h);return b.value=x.session,u.value=[],v.value=null,L.value=b.value?.performance_metrics??null,x.session}finally{S.value=!1}}},loadSession:async h=>{if(!j.value){j.value=!0;try{const{data:x}=await T.get(`/api/projects/${M}/defense/sessions/${h}`);b.value=x.session,u.value=x.session?.messages??[],v.value=x.session?.feedback??null,L.value=x.session?.performance_metrics??null}finally{j.value=!1}}},getNextQuestion:async(h,x,C)=>{const{data:I}=await T.get(`/api/projects/${M}/defense/sessions/${h}/next-question`,{params:{...x?{persona:x}:{},...C?{request_hint:1}:{}}});return u.value.push(I.message),b.value=I.session,I.message},sendResponse:async(h,x,C)=>{if(l.value)return;l.value=!0;const I=-Date.now(),O={id:I,session_id:h,role:"student",panelist_persona:null,content:x,response_time_ms:C??null};u.value.push(O);try{const{data:_}=await T.post(`/api/projects/${M}/defense/sessions/${h}/respond`,{response:x,response_time_ms:C}),Q=u.value.findIndex(J=>J.id===I);return Q>=0?u.value[Q]=_.message:u.value.push(_.message),L.value=_.performance_metrics,_}catch(_){throw u.value=u.value.filter(Q=>Q.id!==I),_}finally{l.value=!1}},endSession:async h=>{const{data:x}=await T.post(`/api/projects/${M}/defense/sessions/${h}/end`);return b.value=x.session,v.value=x.feedback,L.value=x.session?.performance_metrics??null,x.feedback},loadTranscript:async h=>{const{data:x}=await T.get(`/api/projects/${M}/defense/sessions/${h}/transcript`);return u.value=x.messages,x.messages}}}const Ds={class:"mx-auto max-w-7xl px-4 py-8 sm:px-6 lg:px-8"},Es={class:"flex flex-col gap-6 md:flex-row md:items-end md:justify-between mb-12"},Vs={class:"space-y-4"},Us={class:"flex items-center gap-2"},Js={key:0,class:"flex items-start justify-between gap-3 rounded-2xl border border-amber-500/30 bg-amber-500/10 px-4 py-3 text-sm text-amber-100/90"},Ys={class:"flex flex-row md:flex-col items-center gap-4 md:gap-3 p-4 md:p-6 rounded-3xl border border-primary/10 bg-primary/5 backdrop-blur-sm w-full md:w-auto"},Ws={class:"relative flex items-center justify-center shrink-0"},Zs={class:"h-16 w-16 md:h-20 md:w-20 transform -rotate-90"},Ks=["stroke-dasharray","stroke-dashoffset"],Xs=["stroke-dasharray","stroke-dashoffset"],ei={class:"absolute text-base md:text-xl font-bold"},ti={class:"flex p-1 rounded-2xl bg-muted/50 border border-border/50 mb-8 w-full sm:w-auto sm:inline-flex"},si={key:0,class:"grid gap-8 lg:grid-cols-12 animate-in fade-in slide-in-from-bottom-4 duration-700"},ii={class:"lg:col-span-8 space-y-8"},ni={class:"flex flex-col sm:flex-row sm:items-center justify-between gap-4 sm:gap-0"},oi={key:0,class:"h-full"},ai={key:1,class:"relative z-10 space-y-4"},li={key:2,class:"flex flex-col items-center justify-center py-12 text-center space-y-4"},ri={class:"h-12 w-12 rounded-full bg-indigo-500/10 flex items-center justify-center"},di={class:"space-y-4"},ci={class:"flex flex-col sm:flex-row sm:items-center justify-between gap-4 sm:gap-0"},ui={class:"flex items-center gap-2"},pi={class:"relative"},fi={class:"absolute bottom-3 right-3 flex items-center gap-2"},mi={class:"grid grid-cols-1 sm:grid-cols-2 gap-3"},xi={key:0,class:"text-sm text-muted-foreground border-t border-emerald-500/10 pt-4 mt-2"},vi={class:"lg:col-span-4 space-y-8"},gi={class:"relative z-10 flex items-center gap-3 mb-2"},hi={class:"p-2 bg-indigo-500/10 rounded-xl backdrop-blur-md border border-indigo-500/20"},bi={class:"relative z-10 flex flex-col md:flex-row md:items-center justify-between gap-4"},wi={class:"flex items-center gap-2"},yi={class:"flex items-center justify-between mb-2 shrink-0"},_i={class:"text-xl font-display font-bold text-white flex items-center gap-2"},ki={class:"flex-1 min-h-0 overflow-hidden"},zi={key:0,class:"text-xs text-muted-foreground"},$i={key:1,class:"text-xs text-muted-foreground"},Si={key:2,class:"space-y-3"},ji={class:"space-y-1"},Ci={class:"text-xs font-semibold text-foreground"},Ii={class:"text-[11px] text-muted-foreground"},qi={key:1,class:"flex flex-col items-center justify-center py-20 animate-in zoom-in-95 duration-700"},Li={class:"relative mb-8"},Ti={class:"grid grid-cols-1 md:grid-cols-2 gap-6 w-full max-w-5xl mb-12"},Pi={class:"text-xs text-muted-foreground/80"},Ri={class:"grid grid-cols-1 md:grid-cols-3 gap-6 w-full max-w-4xl mb-12"},Mi={class:"text-4xl mb-4"},Ni={class:"font-bold"},Fi={class:"text-xs text-muted-foreground leading-relaxed"},Gi={key:2,class:"fixed inset-0 z-50 bg-zinc-950 flex flex-col items-center p-4 md:p-8 animate-in fade-in duration-500"},Qi={class:"w-full max-w-6xl flex items-center justify-between mb-8"},Ai={class:"flex items-center gap-4"},Hi={class:"flex items-center gap-2 bg-zinc-900 px-4 py-2 rounded-full border border-zinc-800"},Bi={class:"flex items-center gap-2 bg-zinc-900 px-4 py-2 rounded-full border border-zinc-800"},Oi={class:"text-xs text-zinc-300"},Di={class:"grid lg:grid-cols-12 gap-8 w-full max-w-6xl flex-grow overflow-hidden"},Ei={class:"lg:col-span-4 space-y-4 md:space-y-6 overflow-y-auto pr-2 custom-scrollbar"},Vi={class:"grid grid-cols-1 sm:grid-cols-3 lg:grid-cols-1 gap-4 md:gap-6"},Ui={class:"flex items-center gap-3 md:gap-4"},Ji={class:"h-10 w-10 md:h-12 md:w-12 rounded-2xl bg-zinc-800 flex items-center justify-center text-xl md:text-2xl"},Yi={class:"flex-1 min-w-0"},Wi={class:"flex items-center justify-between gap-2"},Zi={class:"font-bold text-zinc-200 text-sm md:text-base truncate"},Ki={class:"text-[10px] md:text-xs text-zinc-500 truncate"},Xi={class:"text-[10px] md:text-xs text-zinc-600"},en={class:"grid grid-cols-3 lg:grid-cols-1 gap-4 md:gap-6"},tn={class:"space-y-2"},sn={class:"flex items-center justify-between text-[10px] md:text-xs"},nn={class:"text-zinc-200"},on={class:"space-y-2"},an={class:"flex items-center justify-between text-[10px] md:text-xs"},ln={class:"text-zinc-200"},rn={class:"space-y-2"},dn={class:"flex items-center justify-between text-[10px] md:text-xs"},cn={class:"text-zinc-200"},un={class:"lg:col-span-8 flex flex-col bg-zinc-900/40 rounded-[2.5rem] border border-zinc-800/50 backdrop-blur-xl overflow-hidden"},pn={class:"space-y-10 max-w-3xl mx-auto py-8"},fn={class:"flex items-center gap-2 mb-2 px-1"},mn={class:"text-[10px] font-bold text-zinc-500 uppercase tracking-widest"},xn={class:"text-[8px] text-zinc-600"},vn={key:0,class:"mt-3 flex gap-4 px-2"},gn={class:"text-[10px] font-bold text-zinc-600 hover:text-zinc-400 uppercase tracking-tighter flex items-center gap-1"},hn={class:"text-[10px] font-bold text-zinc-600 hover:text-zinc-400 uppercase tracking-tighter flex items-center gap-1"},bn={class:"p-4 md:p-8 border-t border-zinc-800/50 bg-black/20"},wn={class:"relative max-w-3xl mx-auto"},yn=["disabled"],_n={class:"absolute right-3 md:right-4 top-1/2 -translate-y-1/2 flex items-center gap-2"},kn={class:"mt-4 flex justify-center gap-6"},zn={class:"flex items-center gap-2 text-[10px] font-bold text-zinc-500 hover:text-white transition-colors uppercase tracking-widest"},de=10,$n=fe({__name:"Defense",props:{project:{}},setup(M){const b=M,u=f("preparation"),v=f(!1),L=f(72),S=f(null),j=f(!1),l=f([{id:"skeptic",name:"The Skeptic",role:"Critical Reviewer",avatar:"ðŸ§",color:"text-amber-500"},{id:"methodologist",name:"The Methodologist",role:"Technical Expert",avatar:"ðŸ§ª",color:"text-blue-500"},{id:"generalist",name:"The Generalist",role:"Value Reviewer",avatar:"ðŸŒ",color:"text-green-500"}]),y=f([]),N=f(!1),k=f(!1),w=f(""),p=f(null),g=f([]),F=f(!1),h=f([]),x=f(0);f(0);const C=f(null),I=f(!1),O=f(!1),_=f(""),Q=f(null),J=f(!1),te=f(!1),ne=f(!1),me=f(null),{session:P,messages:Ue,performanceMetrics:D,startSession:Je,loadSession:Ye,getNextQuestion:We,sendResponse:Ze,endSession:Ke,isStarting:je,isSending:Ce}=Os(b.project.id),Xe=q(()=>l.value.reduce((n,e)=>(n[e.id]=e.name,n),{})),G=n=>{const e=n?.response,a=e?.data?.message;return e?.status===402||a&&a.includes("Insufficient credit balance")?(S.value=a||"Insufficient credit balance. Please top up to continue.",_e.error(S.value),!0):!1},et=()=>{S.value=null},tt=async()=>{if(!je.value)try{const n=await T.get(`/api/projects/${b.project.id}/defense/sessions/active`);if(n.data.session){await be(n.data.session.id);return}const e=l.value.map(a=>a.id);await Je({selected_panelists:e,difficulty_level:"undergraduate",question_limit:de}),v.value=!0,u.value="simulation",P.value&&await ve()}catch(n){if(G(n))return;console.error("Failed to start simulation:",n)}},xe=async(n=!1)=>{if(!j.value){j.value=n,console.log("[Defense] Finish & Analysis clicked",{sessionId:P.value?.id,status:P.value?.status});try{if(P.value){const e=await Ke(P.value.id);console.log("[Defense] endSession response",e),e?.recommendations&&e.recommendations.toLowerCase().includes("credit balance")&&(S.value=e.recommendations,_e.error(e.recommendations)),n&&_e.success("Simulation completed. Your score is ready.")}}catch(e){if(G(e))return;console.error("[Defense] Failed to end simulation:",e)}finally{await Te(),v.value=!1,u.value="preparation",j.value=!1}}},st=async()=>{if(!P.value||!w.value.trim())return;const n=w.value.trim();w.value="";try{if(await Ze(P.value.id,n),P.value?.question_limit&&P.value.questions_asked>=P.value.question_limit){await xe(!0);return}await ve()}catch(e){if(G(e))return;console.error("Failed to submit response:",e)}},ve=async(n=!1)=>{if(P.value){ne.value=!0;try{const e=await We(P.value.id,void 0,n);me.value=e.panelist_persona??null}catch(e){if(G(e))return;const a=e?.response?.data?.message;if(a&&a.toLowerCase().includes("question limit")){await xe(!0);return}console.error("Failed to fetch next question:",e)}finally{ne.value=!1}}},it=async()=>{!P.value||ne.value||await ve(!0)},Ie=async()=>{if(!F.value){F.value=!0;try{const e=(await T.get(`/api/projects/${b.project.id}/defense/executive-briefing`,{params:{force_refresh:1}})).data.briefing;if(typeof e=="string"&&e.includes("```json"))try{const a=e.replace(/```json\n?|\n?```/g,""),A=JSON.parse(a);g.value=A.slides||[],p.value=null}catch(a){console.warn("Failed to parse briefing JSON",a),p.value=e,g.value=[]}else typeof e=="object"&&e.slides?(g.value=e.slides,p.value=null):(p.value=e??null,g.value=[])}catch(n){G(n),console.error("Failed to load executive briefing:",n)}finally{F.value=!1}}},qe=n=>{if(n)if(typeof n=="string"&&n.includes("```json"))try{const e=n.replace(/```json\n?|\n?```/g,""),a=JSON.parse(e);h.value=a.slides||[],C.value=null}catch(e){console.warn("Failed to parse presentation guide JSON",e),C.value=n,h.value=[]}else if(typeof n=="object"&&n.slides)h.value=n.slides,C.value=null;else if(typeof n=="string"&&n.trim().startsWith("{"))try{const e=JSON.parse(n);h.value=e.slides||[],C.value=null}catch{C.value=n,h.value=[]}else C.value=n,h.value=[]},ge=async()=>{if(!I.value){I.value=!0;try{const n=await T.get(`/api/projects/${b.project.id}/defense/presentation-guide`,{params:{force_refresh:1}});qe(n.data.guide),x.value=0}catch(n){G(n),console.error("Failed to load presentation guide:",n)}finally{I.value=!1}}},nt=async()=>{if(!(J.value||!_.value.trim())){J.value=!0;try{const n=await T.post(`/api/projects/${b.project.id}/defense/opening-statement/analyze`,{opening_statement:_.value.trim()});Q.value=n.data.analysis??null}catch(n){G(n),console.error("Failed to analyze opening statement:",n)}finally{J.value=!1}}},Le=async()=>{if(!te.value){te.value=!0;try{const n=await T.get(`/api/projects/${b.project.id}/defense/opening-statement`,{params:{force_refresh:1}});_.value=n.data.opening_statement??""}catch(n){G(n),console.error("Failed to generate opening statement:",n)}finally{te.value=!1}}},ot=async()=>{if(!k.value){k.value=!0;try{const n=await T.post(`/api/projects/${b.project.id}/defense/questions/generate`,{count:5});y.value=n.data.questions||[]}catch(n){G(n),console.error("Failed to generate predicted questions:",n)}finally{k.value=!1}}},at=async()=>{if(!N.value){N.value=!0;try{const n=await T.get(`/api/projects/${b.project.id}/defense/questions`,{params:{limit:5,skip_generation:1}});y.value=n.data.questions||[]}catch(n){G(n),console.error("Failed to load predicted questions:",n)}finally{N.value=!1}}},lt=async()=>{try{const e=(await T.get(`/api/projects/${b.project.id}/defense/preparation`)).data.preparation;if(e){if(p.value=e.executive_briefing??null,e.executive_briefing){if(typeof e.executive_briefing=="string"&&e.executive_briefing.includes("```json"))try{const a=e.executive_briefing.replace(/```json\n?|\n?```/g,""),A=JSON.parse(a);g.value=A.slides||[],p.value=null}catch{}else if(typeof e.executive_briefing=="object"&&e.executive_briefing.slides)g.value=e.executive_briefing.slides,p.value=null;else if(typeof e.executive_briefing=="string"&&e.executive_briefing.trim().startsWith("{"))try{const a=JSON.parse(e.executive_briefing);g.value=a.slides||[],p.value=null}catch{}}e.presentation_guide&&qe(e.presentation_guide),_.value=e.opening_statement??"",Q.value=e.opening_analysis??null,e.opening_statement||await Le()}}catch(n){G(n),console.error("Failed to load preparation data:",n)}},he=f([]),oe=f(!1),Te=async()=>{if(!oe.value){oe.value=!0;try{const n=await T.get(`/api/projects/${b.project.id}/defense/sessions`);he.value=n.data.sessions||[]}catch(n){G(n),console.error("Failed to load session history:",n)}finally{oe.value=!1}}},be=async n=>{await Ye(n),v.value=!0,u.value="simulation"};async function rt(){try{const n=await T.get(`/api/projects/${b.project.id}/defense/sessions/active`);n.data.session&&await be(n.data.session.id)}catch(n){G(n),console.error("Failed to load active session:",n)}}const dt=q(()=>v.value?"bg-zinc-950 text-white":"bg-background"),we=q(()=>Ue.value||[]),ye=q(()=>D.value?.readiness_score??L.value),Pe=q(()=>D.value?.clarity??0),Re=q(()=>D.value?.technical_depth??0);q(()=>D.value?.question_coverage??0),q(()=>D.value?.confidence_score??0),q(()=>D.value?.response_time??0);const Me=q(()=>we.value.reduce((n,e)=>{if(e.role!=="panelist"||e.is_follow_up)return n;const a=e.panelist_persona??"panelist";return n[a]=(n[a]||0)+1,n},{})),ct=q(()=>Object.values(Me.value).reduce((n,e)=>n+e,0)),ut=q(()=>de),pt=q(()=>{const n=l.value;if(n.length===0)return{};const e=Math.floor(de/n.length),a=de%n.length,A=n.findIndex(le=>le.id==="generalist");return n.reduce((le,vt,Fe)=>{const gt=A>=0?Fe===A:Fe===0;return le[vt.id]=e+(gt?a:0),le},{})}),ft=q(()=>P.value?.question_limit?`${ct.value}/${P.value.question_limit}`:"Adaptive"),mt=n=>n.created_at?new Date(n.created_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):"",xt=n=>n?new Date(n).toLocaleDateString():"";bt(()=>{at(),lt(),Te(),rt()});const ae=f(null),Ne=async()=>{await yt(),ae.value&&(ae.value.scrollTop=ae.value.scrollHeight)};return ce(we,()=>{Ne()},{deep:!0}),ce(v,n=>{n&&Ne()}),(n,e)=>(r(),E(_t,{title:`Defense Preparation: ${n.project.title}`},{default:o(()=>[t("div",{class:R(["min-h-screen transition-colors duration-700",dt.value])},[t("div",Ds,[t("div",Es,[t("div",Vs,[t("div",Us,[i(s(z),{variant:"ghost",size:"sm",onClick:e[0]||(e[0]=a=>s(wt).visit(n.route("projects.writing",n.project.slug))),class:R(["h-8 w-8 rounded-full p-0",v.value?"text-zinc-400 hover:text-white":""])},{default:o(()=>[i(s(ze),{class:"h-4 w-4"})]),_:1},8,["class"]),i(s(ee),{variant:"outline",class:"gap-1 border-primary/20 bg-primary/5 text-primary"},{default:o(()=>[i(s(It),{class:"h-3 w-3"}),e[9]||(e[9]=m(" Defense Readiness ",-1))]),_:1})]),t("h1",{class:R(["text-3xl font-bold tracking-tight md:text-6xl font-display",v.value?"text-white":"text-foreground"])}," Prepare for Victory ",2),t("p",{class:R(["max-w-2xl text-base md:text-lg text-muted-foreground",v.value?"text-zinc-400":""])}," Master your project defense with AI-predicted questions, structured presentation guides, and high-stakes simulation. ",2),S.value?(r(),c("div",Js,[t("span",null,d(S.value),1),i(s(z),{variant:"ghost",size:"sm",class:"h-7 px-2 text-amber-100/90 hover:text-white",onClick:et},{default:o(()=>[...e[10]||(e[10]=[m(" Dismiss ",-1)])]),_:1})])):$("",!0)]),re(t("div",Ys,[t("div",Ws,[(r(),c("svg",Zs,[e[11]||(e[11]=t("circle",{class:"text-muted/20 md:hidden","stroke-width":"5",stroke:"currentColor",fill:"transparent",r:"28",cx:"32",cy:"32"},null,-1)),e[12]||(e[12]=t("circle",{class:"text-muted/20 hidden md:block","stroke-width":"6",stroke:"currentColor",fill:"transparent",r:"34",cx:"40",cy:"40"},null,-1)),t("circle",{class:"text-primary transition-all duration-1000 ease-out md:hidden","stroke-width":"5","stroke-dasharray":2*Math.PI*28,"stroke-dashoffset":2*Math.PI*28*(1-ye.value/100),"stroke-linecap":"round",stroke:"currentColor",fill:"transparent",r:"28",cx:"32",cy:"32"},null,8,Ks),t("circle",{class:"text-primary transition-all duration-1000 ease-out hidden md:block","stroke-width":"6","stroke-dasharray":2*Math.PI*34,"stroke-dashoffset":2*Math.PI*34*(1-ye.value/100),"stroke-linecap":"round",stroke:"currentColor",fill:"transparent",r:"34",cx:"40",cy:"40"},null,8,Xs)])),t("span",ei,d(ye.value)+"%",1)]),e[13]||(e[13]=t("span",{class:"text-[10px] md:text-xs font-semibold uppercase tracking-wider text-muted-foreground text-center"},"Readiness Score",-1))],512),[[Ge,!v.value]])]),re(t("div",ti,[t("button",{onClick:e[1]||(e[1]=a=>u.value="preparation"),class:R(["flex-1 sm:flex-none flex items-center justify-center gap-2 px-4 md:px-6 py-2 rounded-xl text-sm font-medium transition-all",u.value==="preparation"?"bg-background shadow-sm text-foreground":"text-muted-foreground hover:text-foreground"])},[i(s(qt),{class:"h-4 w-4"}),e[14]||(e[14]=t("span",{class:"hidden sm:inline"},"Preparation Suite",-1)),e[15]||(e[15]=t("span",{class:"sm:hidden"},"Prep",-1))],2),t("button",{onClick:e[2]||(e[2]=a=>u.value="simulation"),class:R(["flex-1 sm:flex-none flex items-center justify-center gap-2 px-4 md:px-6 py-2 rounded-xl text-sm font-medium transition-all",u.value==="simulation"?"bg-background shadow-sm text-foreground":"text-muted-foreground hover:text-foreground"])},[i(s($e),{class:"h-4 w-4"}),e[16]||(e[16]=t("span",{class:"hidden sm:inline"},"Simulation Lab",-1)),e[17]||(e[17]=t("span",{class:"sm:hidden"},"Sim",-1))],2)],512),[[Ge,!v.value]]),u.value==="preparation"&&!v.value?(r(),c("div",si,[t("div",ii,[i(s(H),{class:"overflow-hidden border-none bg-zinc-900/30 shadow-none ring-1 ring-border/50"},{default:o(()=>[i(s(W),{class:"pb-2"},{default:o(()=>[t("div",ni,[i(s(Z),{class:"flex items-center gap-2 text-xl md:text-2xl font-display"},{default:o(()=>[i(s(K),{class:"h-5 w-5 text-indigo-500"}),e[18]||(e[18]=m(" Executive Briefing ",-1))]),_:1}),i(s(z),{variant:"ghost",size:"sm",class:"text-xs gap-1.5 h-8 w-fit",onClick:Ie,disabled:F.value},{default:o(()=>[i(s(X),{class:"h-3.5 w-3.5"}),m(" "+d(F.value?"Loading...":"Refresh AI"),1)]),_:1},8,["disabled"])]),i(s(Y),{class:"text-indigo-600/70 dark:text-indigo-400/70 text-sm"},{default:o(()=>[...e[19]||(e[19]=[m("Your project's core value proposition, synthesized for your defense.",-1)])]),_:1})]),_:1}),i(s(B),{class:"relative pb-6 md:pb-10 px-6 md:px-10 min-h-[400px]"},{default:o(()=>[g.value.length>0?(r(),c("div",oi,[i(bs,{slides:g.value,"is-loading":F.value,onRefresh:Ie},null,8,["slides","is-loading"])])):p.value?(r(),c("div",ai,[e[20]||(e[20]=t("div",{class:"absolute -left-6 top-0 bottom-0 w-1 bg-gradient-to-b from-indigo-500/80 via-purple-500/80 to-transparent rounded-full opacity-60"},null,-1)),i(ue,{content:p.value,"show-font-controls":!1,"viewer-class":"prose-sm md:prose-base dark:prose-invert leading-relaxed",class:"!bg-transparent"},null,8,["content"])])):(r(),c("div",li,[t("div",ri,[i(s(K),{class:"h-6 w-6 text-indigo-500/50"})]),e[21]||(e[21]=t("p",{class:"text-base text-muted-foreground italic max-w-xs"}," No executive briefing yet. Click â€œRefresh AIâ€ to generate a comprehensive summary of your research. ",-1))]))]),_:1})]),_:1}),t("div",di,[i(s(H),{class:"overflow-hidden border-none bg-zinc-900/30 shadow-none ring-1 ring-border/50"},{default:o(()=>[i(s(W),{class:"pb-2"},{default:o(()=>[t("div",ci,[i(s(Z),{class:"flex items-center gap-2 text-xl md:text-2xl font-display"},{default:o(()=>[i(s(se),{class:"h-5 w-5 text-rose-500"}),e[22]||(e[22]=m(" Predicted Defense Questions ",-1))]),_:1}),t("div",ui,[i(s(ee),{variant:"secondary",class:"font-mono text-[10px]"},{default:o(()=>[m(d(y.value.length)+" TOP QUESTIONS",1)]),_:1}),i(s(z),{variant:"ghost",size:"sm",class:"text-xs h-8",onClick:ot,disabled:k.value},{default:o(()=>[i(s(K),{class:"h-3.5 w-3.5"}),m(" "+d(k.value?"Generating...":"Generate"),1)]),_:1},8,["disabled"])])]),i(s(Y),{class:"text-rose-600/70 dark:text-rose-400/70 text-sm"},{default:o(()=>[...e[23]||(e[23]=[m(" Identify and prepare for high-probability questions examiners might ask. ",-1)])]),_:1})]),_:1}),i(s(B),{class:"relative pb-6 md:pb-10 px-6 md:px-10 min-h-[450px]"},{default:o(()=>[i(Bs,{questions:y.value,"is-loading":k.value},null,8,["questions","is-loading"])]),_:1})]),_:1})]),i(s(H),{class:"border-border/50 shadow-sm rounded-3xl overflow-hidden group"},{default:o(()=>[i(s(W),{class:"pb-2"},{default:o(()=>[i(s(Z),{class:"flex items-center gap-2 text-base"},{default:o(()=>[i(s(Se),{class:"h-4 w-4 text-emerald-500"}),e[24]||(e[24]=m(" Opening Statement ",-1))]),_:1}),i(s(Y),null,{default:o(()=>[...e[25]||(e[25]=[m('Your 60-second "hook" to impress the panel.',-1)])]),_:1})]),_:1}),i(s(B),{class:"space-y-4"},{default:o(()=>[t("div",pi,[re(t("textarea",{"onUpdate:modelValue":e[3]||(e[3]=a=>_.value=a),rows:"4",class:"w-full rounded-2xl border-border/50 bg-muted/30 p-4 text-sm focus:ring-primary/20 transition-all",placeholder:"Type your opening statement here..."},null,512),[[Qe,_.value]]),t("div",fi,[i(s(z),{variant:"outline",size:"icon",class:"h-8 w-8 rounded-full"},{default:o(()=>[i(s(Se),{class:"h-3.5 w-3.5"})]),_:1})])]),t("div",mi,[i(s(z),{variant:"outline",class:"w-full text-xs font-bold gap-2 rounded-xl",onClick:Le,disabled:te.value},{default:o(()=>[i(s(K),{class:"h-3.5 w-3.5"}),m(" "+d(te.value?"Generating...":"GENERATE OPENING"),1)]),_:1},8,["disabled"]),i(s(z),{variant:"secondary",class:"w-full text-xs font-bold gap-2 rounded-xl",onClick:nt,disabled:J.value},{default:o(()=>[i(s(Ae),{class:"h-3.5 w-3.5"}),m(" "+d(J.value?"Analyzing...":"ANALYZE PITCH FLOW"),1)]),_:1},8,["disabled"])]),Q.value?(r(),c("div",xi,[i(ue,{content:Q.value,"show-font-controls":!1,class:"!bg-transparent","viewer-class":"prose-xs md:prose-sm"},null,8,["content"])])):$("",!0)]),_:1})]),_:1})]),t("div",vi,[i(s(H),{class:"border-border/50 shadow-2xl shadow-indigo-500/10 rounded-3xl overflow-hidden bg-zinc-900/20"},{default:o(()=>[i(s(W),{class:"relative overflow-hidden bg-gradient-to-br from-indigo-950 via-zinc-900 to-black text-white pb-6 border-b border-white/5"},{default:o(()=>[e[28]||(e[28]=t("div",{class:"absolute -right-6 -top-6 h-32 w-32 bg-indigo-500/10 rounded-full blur-3xl"},null,-1)),e[29]||(e[29]=t("div",{class:"absolute -left-10 -bottom-10 h-40 w-40 bg-purple-500/10 rounded-full blur-3xl"},null,-1)),t("div",gi,[t("div",hi,[i(s(pe),{class:"h-5 w-5 text-indigo-400"})]),i(s(Z),{class:"text-xl md:text-2xl font-display font-bold tracking-tight bg-gradient-to-r from-white to-zinc-400 bg-clip-text text-transparent"},{default:o(()=>[...e[26]||(e[26]=[m(" Presentation Guide",-1)])]),_:1})]),t("div",bi,[i(s(Y),{class:"text-zinc-400 text-sm leading-relaxed max-w-[280px]"},{default:o(()=>[...e[27]||(e[27]=[m(" Step-by-step structure for high-impact defense slides. ",-1)])]),_:1}),t("div",wi,[h.value.length||C.value?(r(),E(s(z),{key:0,variant:"outline",size:"sm",class:"h-7 text-xs gap-1.5 border-white/10 bg-white/5 hover:bg-white/10 text-zinc-300 hover:text-white",onClick:ge,disabled:I.value},{default:o(()=>[i(s(X),{class:"h-3 w-3"}),m(" "+d(I.value?"Refreshing...":"Regenerate"),1)]),_:1},8,["disabled"])):$("",!0),h.value.length?(r(),E(s(z),{key:1,variant:"ghost",size:"icon",class:"h-7 w-7 text-zinc-400 hover:text-white",onClick:e[4]||(e[4]=a=>O.value=!0)},{default:o(()=>[i(s(Lt),{class:"h-4 w-4"})]),_:1})):$("",!0)])])]),_:1}),i(s(B),{class:"p-4 md:p-6 h-[500px] flex flex-col"},{default:o(()=>[i(He,{slides:h.value,"is-loading":I.value,"raw-guide":C.value,"active-index":x.value,"onUpdate:activeIndex":e[5]||(e[5]=a=>x.value=a),layout:"compact",onRegenerate:ge},null,8,["slides","is-loading","raw-guide","active-index"])]),_:1})]),_:1}),i(s(kt),{open:O.value,"onUpdate:open":e[7]||(e[7]=a=>O.value=a)},{default:o(()=>[i(s(zt),{class:"max-w-[95vw] w-full lg:max-w-screen-2xl h-[85vh] flex flex-col p-6 bg-zinc-950 border-white/10"},{default:o(()=>[t("div",yi,[t("h3",_i,[i(s(pe),{class:"h-5 w-5 text-indigo-400"}),e[30]||(e[30]=m(" Presentation Guide ",-1))])]),t("div",ki,[i(He,{slides:h.value,"is-loading":I.value,"raw-guide":C.value,"active-index":x.value,"onUpdate:activeIndex":e[6]||(e[6]=a=>x.value=a),onRegenerate:ge},null,8,["slides","is-loading","raw-guide","active-index"])])]),_:1})]),_:1},8,["open"]),i(s(H),{class:"border-border/50 shadow-sm rounded-3xl overflow-hidden"},{default:o(()=>[i(s(W),{class:"pb-2"},{default:o(()=>[i(s(Z),{class:"flex items-center gap-2 text-base"},{default:o(()=>[i(s(X),{class:"h-4 w-4 text-amber-500"}),e[31]||(e[31]=m(" Session History ",-1))]),_:1}),i(s(Y),null,{default:o(()=>[...e[32]||(e[32]=[m("Your past defense simulations for this project.",-1)])]),_:1})]),_:1}),i(s(B),{class:"space-y-3"},{default:o(()=>[oe.value?(r(),c("div",zi," Loading sessions... ")):he.value.length?(r(),c("div",Si,[(r(!0),c(V,null,U(he.value,a=>(r(),c("div",{key:a.id,class:"flex items-center justify-between gap-3 rounded-2xl border border-border/50 p-3"},[t("div",ji,[t("div",Ci,d(xt(a.started_at||a.created_at)),1),t("div",Ii,d(a.status)+" â€¢ "+d(a.questions_asked)+" Qs ",1)]),i(s(z),{size:"sm",variant:"outline",onClick:A=>be(a.id)},{default:o(()=>[m(d(a.status==="completed"?"Review":"Resume"),1)]),_:2},1032,["onClick"])]))),128))])):(r(),c("div",$i," No sessions yet. Start a simulation to create your first one. "))]),_:1})]),_:1})])])):$("",!0),u.value==="simulation"&&!v.value?(r(),c("div",qi,[t("div",Li,[e[33]||(e[33]=t("div",{class:"absolute -inset-4 bg-gradient-to-r from-primary to-purple-500 rounded-full opacity-20 blur-2xl animate-pulse"},null,-1)),i(s($e),{class:"h-24 w-24 text-primary relative z-10"})]),e[44]||(e[44]=t("h2",{class:"text-3xl font-bold mb-4"},"The Mock Defense",-1)),e[45]||(e[45]=t("p",{class:"max-w-md text-center text-muted-foreground mb-12"}," Face a panel of AI examiners who will challenge your research from different perspectives. Record your session for post-defense feedback. ",-1)),t("div",Ti,[i(s(H),{class:"border-border/50 bg-card/50 backdrop-blur-sm rounded-3xl overflow-hidden"},{default:o(()=>[i(s(W),{class:"pb-2"},{default:o(()=>[i(s(Z),{class:"text-base flex items-center gap-2"},{default:o(()=>[i(s($e),{class:"h-4 w-4 text-primary"}),e[34]||(e[34]=m(" How the simulation works ",-1))]),_:1}),i(s(Y),null,{default:o(()=>[...e[35]||(e[35]=[m("Chair-moderated rotation with real-time feedback.",-1)])]),_:1})]),_:1}),i(s(B),{class:"space-y-3 text-sm text-muted-foreground"},{default:o(()=>[e[36]||(e[36]=t("p",null,"1) The chair opens, then panelists rotate with targeted questions.",-1)),e[37]||(e[37]=t("p",null,"2) You respond; the system scores clarity and technical depth.",-1)),e[38]||(e[38]=t("p",null,"3) Hints guide you before answers are revealed.",-1)),e[39]||(e[39]=t("p",null,"4) When the question limit is reached, the session auto-completes and scores.",-1)),t("p",Pi,"Total questions: "+d(ut.value)+". Each question is worth 10 marks (100 total).",1)]),_:1})]),_:1}),i(s(H),{class:"border-border/50 bg-card/50 backdrop-blur-sm rounded-3xl overflow-hidden"},{default:o(()=>[i(s(W),{class:"pb-2"},{default:o(()=>[i(s(Z),{class:"text-base flex items-center gap-2"},{default:o(()=>[i(s(se),{class:"h-4 w-4 text-emerald-500"}),e[40]||(e[40]=m(" Scoring breakdown ",-1))]),_:1}),i(s(Y),null,{default:o(()=>[...e[41]||(e[41]=[m("Readiness is a weighted summary of core metrics.",-1)])]),_:1})]),_:1}),i(s(B),{class:"space-y-3 text-sm text-muted-foreground"},{default:o(()=>[...e[42]||(e[42]=[t("div",{class:"flex items-center justify-between"},[t("span",null,"Per-question mark"),t("span",{class:"text-foreground font-semibold"},"10 marks total")],-1),t("div",{class:"flex items-center justify-between"},[t("span",null,"Derived from"),t("span",{class:"text-foreground font-semibold"},"Clarity + Depth")],-1),t("div",{class:"flex items-center justify-between"},[t("span",null,"Coverage, confidence, and response time"),t("span",{class:"text-foreground font-semibold"},"Shown as diagnostics")],-1),t("div",{class:"text-xs text-muted-foreground/80"}," 10 questions x 10 marks each = 100 total marks. Readiness uses clarity/depth averages. ",-1)])]),_:1})]),_:1})]),t("div",Ri,[(r(!0),c(V,null,U(l.value,a=>(r(),E(s(H),{key:a.id,class:"border-border/50 bg-card/50 backdrop-blur-sm rounded-3xl overflow-hidden hover:border-primary/30 transition-all"},{default:o(()=>[i(s(B),{class:"p-8 text-center space-y-3"},{default:o(()=>[t("div",Mi,d(a.avatar),1),t("h4",Ni,d(a.name),1),i(s(ee),{variant:"secondary",class:"text-[10px]"},{default:o(()=>[m(d(a.role),1)]),_:2},1024),t("p",Fi,d(a.name==="The Skeptic"?"High pressure, doubts your findings.":a.name==="The Methodologist"?"Strict on research design and ethics.":"Focuses on the bigger picture."),1)]),_:2},1024)]),_:2},1024))),128))]),i(s(z),{size:"lg",onClick:tt,disabled:s(je),class:"px-12 py-8 text-xl font-bold rounded-3xl shadow-2xl shadow-primary/20 gap-4 hover:scale-105 transition-all"},{default:o(()=>[i(s(Tt),{class:"h-6 w-6 fill-current"}),e[43]||(e[43]=m(" START SIMULATION ",-1))]),_:1},8,["disabled"])])):$("",!0),v.value?(r(),c("div",Gi,[t("div",Qi,[t("div",Ai,[e[47]||(e[47]=t("div",{class:"h-3 w-3 rounded-full bg-rose-600 animate-pulse"},null,-1)),e[48]||(e[48]=t("span",{class:"text-xs font-bold tracking-[0.2em] text-zinc-500 uppercase"},"Live Simulation",-1)),t("div",Hi,[i(s(X),{class:"h-3.5 w-3.5 text-zinc-400"}),e[46]||(e[46]=t("span",{class:"text-sm font-mono text-zinc-300"},"14:22",-1))]),t("div",Bi,[i(s(se),{class:"h-3.5 w-3.5 text-zinc-400"}),t("span",Oi,"Questions "+d(ft.value),1)])]),i(s(z),{variant:"ghost",onClick:xe,class:"rounded-full text-zinc-400 hover:text-white hover:bg-zinc-900 gap-2"},{default:o(()=>[e[49]||(e[49]=m(" Finish & Analysis ",-1)),i(s(ze),{class:"h-4 w-4 rotate-180"})]),_:1})]),t("div",Di,[t("div",Ei,[e[55]||(e[55]=t("h3",{class:"text-[10px] md:text-sm font-bold text-zinc-500 uppercase tracking-widest px-2"}," The Panel",-1)),t("div",Vi,[(r(!0),c(V,null,U(l.value,a=>(r(),E(s(H),{key:a.id,class:"bg-zinc-900/50 border-zinc-800 hover:border-zinc-700 transition-all rounded-3xl"},{default:o(()=>[i(s(B),{class:"p-4 md:p-6"},{default:o(()=>[t("div",Ui,[t("div",Ji,d(a.avatar),1),t("div",Yi,[t("div",Wi,[t("span",Zi,d(a.name),1),ne.value&&(!me.value||me.value===a.id)?(r(),E(s(ee),{key:0,class:"bg-amber-500/10 text-amber-500 border-none text-[8px] h-4 shrink-0"},{default:o(()=>[...e[50]||(e[50]=[m(" THINKING",-1)])]),_:1})):$("",!0)]),t("span",Ki,d(a.role),1),t("div",Xi," Questions asked: "+d(Me.value[a.id]??0)+" / "+d(pt.value[a.id]??0),1)])])]),_:2},1024)]),_:2},1024))),128))]),i(s(H),{class:"bg-zinc-900 border-none rounded-3xl p-4 md:p-6 mt-6 md:mt-12 bg-gradient-to-br from-zinc-900 to-black"},{default:o(()=>[e[54]||(e[54]=t("h4",{class:"text-[10px] md:text-xs font-bold text-zinc-500 mb-4 uppercase"},"Live Performance",-1)),t("div",en,[t("div",tn,[t("div",sn,[e[51]||(e[51]=t("span",{class:"text-zinc-400"},"Clarity",-1)),t("span",nn,d(Pe.value)+"%",1)]),i(s(ke),{"model-value":Pe.value,class:"h-1 bg-zinc-800","indicator-class":"bg-blue-500"},null,8,["model-value"])]),t("div",on,[t("div",an,[e[52]||(e[52]=t("span",{class:"text-zinc-400"},"Depth",-1)),t("span",ln,d(Re.value)+"%",1)]),i(s(ke),{"model-value":Re.value,class:"h-1 bg-zinc-800","indicator-class":"bg-emerald-500"},null,8,["model-value"])]),t("div",rn,[t("div",dn,[e[53]||(e[53]=t("span",{class:"text-zinc-400"},"Confidence",-1)),t("span",cn,d(s(D)?.confidence_score??0)+"%",1)]),i(s(ke),{"model-value":s(D)?.confidence_score??0,class:"h-1 bg-zinc-800","indicator-class":"bg-rose-500"},null,8,["model-value"])])])]),_:1})]),t("div",un,[t("div",{ref_key:"chatContainer",ref:ae,class:"flex-grow p-8 overflow-y-auto custom-scrollbar"},[t("div",pn,[(r(!0),c(V,null,U(we.value,(a,A)=>(r(),c("div",{key:A,class:R(["group animate-in fade-in slide-in-from-bottom-2 duration-500",a.role==="student"?"flex flex-col items-end":"flex flex-col items-start"])},[t("div",fn,[t("span",mn,d(a.role==="panelist"?Xe.value[a.panelist_persona||""]||"Panelist":"Candidate"),1),t("span",xn,d(mt(a)),1)]),t("div",{class:R(["p-5 rounded-3xl text-sm leading-relaxed max-w-[85%]",a.role==="student"?"bg-zinc-100 text-zinc-950 rounded-tr-none":"bg-zinc-800/80 text-zinc-200 border border-zinc-700/50 rounded-tl-none"])},d(a.content),3),a.role==="panelist"?(r(),c("div",vn,[t("button",gn,[i(s(se),{class:"h-3 w-3"}),e[56]||(e[56]=m(" View Strategy ",-1))]),t("button",hn,[i(s(Ae),{class:"h-3 w-3"}),e[57]||(e[57]=m(" Analyze Critique ",-1))])])):$("",!0)],2))),128))])],512),t("div",bn,[t("div",wn,[re(t("textarea",{"onUpdate:modelValue":e[8]||(e[8]=a=>w.value=a),placeholder:"Speak your defense answer...",class:"w-full bg-zinc-950 border-zinc-800 rounded-2xl py-4 md:py-6 px-4 md:px-6 pr-20 md:pr-24 text-zinc-100 focus:ring-primary/40 focus:border-primary/40 placeholder-zinc-700 transition-all resize-none shadow-2xl text-sm md:text-base",disabled:s(Ce),rows:"2"},null,8,yn),[[Qe,w.value]]),t("div",_n,[e[58]||(e[58]=t("div",{class:"hidden sm:flex gap-1 h-8 px-2 items-center bg-zinc-900 rounded-full border border-zinc-800"},[t("div",{class:"h-2 w-0.5 bg-rose-500 animate-pulse"}),t("div",{class:"h-4 w-0.5 bg-rose-500 animate-pulse delay-75"}),t("div",{class:"h-2 w-0.5 bg-rose-500 animate-pulse delay-150"})],-1)),i(s(z),{size:"icon",onClick:st,disabled:s(Ce),class:"h-9 w-9 md:h-10 md:w-10 rounded-full bg-primary hover:bg-primary/90 text-white shadow-lg shadow-primary/20"},{default:o(()=>[i(s(ze),{class:"h-4 w-4 md:h-5 md:w-5 rotate-180"})]),_:1},8,["disabled"])])]),t("div",kn,[t("button",zn,[i(s(Se),{class:"h-3.5 w-3.5"}),e[59]||(e[59]=m(" Hold Space to Speak ",-1))]),t("button",{class:"flex items-center gap-2 text-[10px] font-bold text-zinc-500 hover:text-white transition-colors uppercase tracking-widest",onClick:it},[i(s(X),{class:"h-3.5 w-3.5"}),e[60]||(e[60]=m(" Request Hint ",-1))])])])])])])):$("",!0)])],2)]),_:1},8,["title"]))}}),Po=Pt($n,[["__scopeId","data-v-e8a60333"]]);export{Po as default};
