import{d as Te,y as h,F as Ie,J as T,a as ke,C,o as c,E as i,K as t,H as r,u as o,P as u,c as b,O as k,M as S,A as Ce,Y as je,n as A,Q as oe,S as se,a3 as Oe,R as F}from"./app-Bo8mbAfA.js";import{_ as q}from"./index-2iaKBSZ8.js";import{_ as j}from"./index-BhKU_YgD.js";import{_ as U,a as re}from"./CardContent.vue_vue_type_script_setup_true_lang-BHX5x4LF.js";import{_ as ae}from"./CardDescription.vue_vue_type_script_setup_true_lang-BCfgfNT0.js";import{_ as ie,a as le}from"./CardTitle.vue_vue_type_script_setup_true_lang-WPH9TeEi.js";import{_ as Pe}from"./Input.vue_vue_type_script_setup_true_lang-DMYtADRd.js";import{_ as ne}from"./Label.vue_vue_type_script_setup_true_lang-jtmjM8B2.js";import{_ as Ee,a as Ne,b as G,c as H}from"./TabsTrigger.vue_vue_type_script_setup_true_lang-DODJ6xjo.js";import{_ as Re}from"./Textarea.vue_vue_type_script_setup_true_lang-HSZp93Ao.js";import{_ as W,a as Y,b as X}from"./TooltipTrigger.vue_vue_type_script_setup_true_lang-vOUZYu2f.js";import{_ as Me}from"./WordBalanceDisplay.vue_vue_type_script_setup_true_lang-DXXeLf0i.js";import{_ as $e,a as Ae,b as Fe,c as Ue,d as J}from"./SelectValue.vue_vue_type_script_setup_true_lang-XohjNNAf.js";import{_ as Be}from"./AppLayout.vue_vue_type_script_setup_true_lang-Zmvd_PeE.js";import{t as f}from"./index-B_MauiHY.js";import{_ as de}from"./SafeHtmlText.vue_vue_type_script_setup_true_lang-LcRpIlWw.js";import{U as ce,R as De}from"./RichTextEditor-a5iHH-Fx.js";import{_ as Le}from"./PurchaseModal.vue_vue_type_script_setup_true_lang-NpWSkzus.js";import{u as ze}from"./useWordBalance-q8CtVh_6.js";import{A as Ve}from"./arrow-left-D3y6BBA2.js";import{L as N}from"./lightbulb-CqOzwqSi.js";import{F as qe}from"./file-text-az3w2ek1.js";import{L as K}from"./loader-circle-CTShm-CK.js";import{A as ue}from"./arrow-right-DzV8UAfo.js";import{M as Ge}from"./message-square-DlaqEp4G.js";import{R as pe}from"./refresh-cw-CBACVbtT.js";import{C as He}from"./circle-check-big-DK9Yqmpw.js";import{_ as We}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./index-BYDQf9oC.js";import"./useForwardExpose-CaqOkBGp.js";import"./Presence-ABQ3CmB4.js";import"./VisuallyHidden-CNTNOnky.js";import"./RovingFocusItem-CVaylVOf.js";import"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-Baa0XZcP.js";import"./triangle-alert-VSHaK9e6.js";import"./DialogTitle-CV-KUDMi.js";import"./coins-BPkQRo7h.js";import"./plus-C3UDVPn1.js";import"./useNonce-BnqPKZyK.js";import"./chevron-down-DbOAb5ft.js";import"./check-B-hpQ5Fu.js";import"./ohash.D__AXeF1-C-E83dC9.js";import"./nullish-CHIgUVhi.js";import"./useFormControl-DAQDAh2G.js";import"./UserInfo.vue_vue_type_script_setup_true_lang-D30F56aL.js";import"./log-out-BmbOPh1s.js";import"./AppLogo.vue_vue_type_script_setup_true_lang-C85nP1yh.js";import"./library-DgJVTek8.js";import"./chevron-right-D3DgVsqA.js";import"./sun-CRzakPrN.js";import"./purify.es-DxJI3Wx7.js";import"./index-ClYkR1f9.js";import"./index-BWEDi_FC.js";import"./step-DrZ9DcYd.js";import"./chart-column-DwnqJsR6.js";import"./calendar-z93NjGA8.js";import"./brain-BapQtty2.js";import"./users-nnNj8y6v.js";import"./circle-alert-CyBLfuka.js";import"./eye-B2llWvAP.js";import"./copy-CNm8BXAB.js";import"./download-BDwgAcfX.js";import"./trash-2-D6zuQNGS.js";import"./Progress.vue_vue_type_script_setup_true_lang-PLcmb06L.js";import"./DialogContent.vue_vue_type_script_setup_true_lang-D__DE2lJ.js";import"./DialogDescription.vue_vue_type_script_setup_true_lang-xBPkVSpt.js";import"./DialogFooter.vue_vue_type_script_setup_true_lang-DrhYcgd0.js";import"./DialogTitle.vue_vue_type_script_setup_true_lang-S9WogxKM.js";import"./type-BMN8IGkD.js";import"./minus-NbNpMYjc.js";import"./list-Cg0Sa8mO.js";import"./sparkles-DpJu23B-.js";const Ye={class:"min-h-screen bg-background relative selection:bg-primary/10 selection:text-primary"},Xe={class:"sticky top-0 z-40 w-full border-b border-border/40 bg-background/80 backdrop-blur-xl supports-[backdrop-filter]:bg-background/60"},Je={class:"container mx-auto flex h-16 items-center justify-between py-4"},Ke={class:"flex items-center gap-4"},Qe={class:"flex flex-col"},Ze={class:"text-sm font-semibold leading-none flex items-center gap-2"},et={key:0,class:"hidden sm:inline-flex h-1.5 w-1.5 rounded-full bg-primary animate-pulse"},tt={class:"lg:hidden"},ot={class:"container mx-auto max-w-5xl py-8 pb-24 px-4 relative z-10 space-y-8"},st={class:"space-y-4 text-center pb-2"},rt={class:"flex justify-center mb-6"},at={class:"relative flex items-center justify-center h-16 w-16 rounded-full bg-gradient-to-tr from-yellow-500/20 to-orange-500/20 border border-white/10 shadow-[0_0_30px_rgba(234,179,8,0.2)]"},it={key:0,class:"lg:hidden grid grid-cols-2 gap-3 pb-4"},lt={key:0,class:"flex flex-col gap-1 p-3 rounded-lg bg-muted/30 border border-border/50 col-span-2"},nt={class:"text-sm font-medium truncate"},dt={key:1,class:"flex flex-col gap-1 p-3 rounded-lg bg-muted/30 border border-border/50"},ct={class:"text-sm font-medium truncate"},ut={key:2,class:"flex flex-col gap-1 p-3 rounded-lg bg-muted/30 border border-border/50"},pt={class:"text-sm font-medium truncate"},mt={class:"flex justify-center"},ft={class:"grid grid-cols-1 lg:grid-cols-12 gap-8 items-start"},gt={class:"lg:col-span-12 xl:col-span-5 space-y-6"},vt={class:"space-y-2"},xt={class:"space-y-2"},bt={class:"px-6 pb-6 pt-0"},ht={key:1,class:"flex items-center justify-center w-full"},yt={class:"hidden xl:block"},wt={class:"flex items-start gap-3"},_t={class:"p-2 rounded-full bg-orange-500/10 text-orange-600 dark:text-orange-500 mt-0.5 group-hover:scale-110 transition-transform"},St={class:"lg:col-span-12 xl:col-span-7 space-y-6"},Tt={class:"absolute top-0 right-0 p-6 pointer-events-none opacity-20"},It={class:"flex-1 border rounded-xl overflow-hidden bg-secondary/30 focus-within:bg-background focus-within:ring-2 focus-within:ring-primary/20 transition-all"},kt={class:"px-6 pb-6 flex items-center justify-between gap-4"},Ct={class:"p-4 flex flex-col md:flex-row items-center justify-between gap-4"},jt={class:"flex items-center gap-3 w-full md:w-auto overflow-x-auto pb-2 md:pb-0 hide-scrollbar"},Ot={class:"flex items-center h-9 px-3 rounded-lg bg-background border border-border/50 text-xs font-medium whitespace-nowrap"},Pt={key:0,class:"h-6 w-[1px] bg-border mx-1 hidden md:block"},Et={key:1,class:"flex items-center h-9 px-3 rounded-lg bg-background border border-border/50 text-xs font-medium whitespace-nowrap"},Nt={key:0,class:"h-0.5 w-full bg-muted overflow-hidden"},Rt={class:"min-h-[400px]"},Mt={key:0,class:"flex flex-col items-center justify-center py-20 animate-in fade-in"},$t={class:"bg-primary/10 p-6 rounded-full mb-6 relative"},At={class:"text-xl font-semibold mb-2"},Ft={class:"text-muted-foreground text-sm max-w-xs text-center"},Ut={key:1,class:"flex flex-col items-center justify-center py-20 text-center animate-in fade-in zoom-in-95"},Bt={class:"h-32 w-32 rounded-3xl bg-gradient-to-tr from-muted/50 to-muted/10 border border-border/50 flex items-center justify-center mb-6 shadow-xl shadow-black/5 rotate-3 hover:rotate-0 transition-transform duration-500"},Dt={key:2,class:"grid grid-cols-1 gap-6"},Lt={class:"w-full md:w-64 shrink-0 bg-muted/20 md:border-r border-border/50 p-5 flex flex-col gap-4"},zt={class:"flex items-center justify-between md:justify-start gap-2"},Vt={class:"text-[10px] text-muted-foreground font-medium uppercase tracking-wider"},qt={class:"space-y-1"},Gt={class:"flex items-center gap-2"},Ht={class:"h-1.5 flex-1 bg-muted rounded-full overflow-hidden"},Wt={class:"text-xs font-bold"},Yt={class:"mt-auto pt-4 md:pt-0 grid grid-cols-2 md:grid-cols-1 gap-2"},Xt={class:"flex-1 p-5 md:pl-0 pt-0 md:pt-5 space-y-3"},Jt={class:"prose prose-sm dark:prose-invert max-w-none text-muted-foreground/80 leading-relaxed line-clamp-3 group-hover:line-clamp-none transition-all duration-300"},Kt={class:"flex flex-wrap gap-1.5 pt-3 mt-auto"},Qt={class:"text-center space-y-4 max-w-md p-8"},Zt={class:"bg-primary/10 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-6"},B=300,eo=Te({__name:"TopicSelection",props:{project:{},savedTopics:{},prefillTopic:{}},setup(me){const d=me,_=h("existing"),y=h(!1),E=h(!1),v=h([]),O=h(""),fe=h(""),g=h(""),x=h(""),w=h(""),Q=h("all"),R=h("all");h(new Set);const{balance:D,showPurchaseModal:M,requiredWordsForModal:L,actionDescriptionForModal:z,closePurchaseModal:ge}=ze(),$=h("balanced"),P=a=>a?a.replace(/<[^>]*>/g," ").replace(/\s+/g," ").trim():"";Ie(()=>{console.log("üìã TOPIC SELECTION - Project data received:",{topic:d.project.topic,title:d.project.title,description:d.project.description,description_exists:!!d.project.description,description_length:d.project.description?.length||0}),d.project.topic&&(g.value=P(d.project.topic),x.value=d.project.description||"",w.value=P(d.project.title||""),_.value="existing",console.log("‚úÖ TOPIC SELECTION - Form fields populated:",{customTopic:g.value?.substring(0,50),customDescription:x.value?.substring(0,50),customTitle:w.value}));try{const a=new URLSearchParams(window.location.search),e=a.get("prefill_topic"),s=a.get("prefill_title"),n=a.get("prefill_description");e&&e.trim()&&(_.value="existing",g.value=P(e),s&&s.trim()&&(w.value=P(s)),n&&n.trim()&&(x.value=n.trim()),f.success("Refined topic loaded",{description:"Review it in ‚ÄúEnter Topic‚Äù then continue."}),window.history.replaceState({},"",T("projects.topic-selection",d.project.slug)))}catch{}!d.project.topic&&!g.value.trim()&&d.prefillTopic?.title&&(_.value="existing",g.value=P(d.prefillTopic.title),w.value=P(d.prefillTopic.title),d.prefillTopic.description&&(x.value=d.prefillTopic.description)),d.savedTopics&&d.savedTopics.length>0&&(v.value=d.savedTopics,console.log("üì¶ SAVED TOPICS - Loaded from database",{count:d.savedTopics.length,topics:d.savedTopics.map(a=>a.title)}),d.project.topic||(_.value="generated"))});const p=h(""),I=h(""),Z=async()=>{if(console.log("üöÄ TOPIC GENERATION - Starting streaming topic generation"),D.value<B){L.value=B,z.value="generate research topics",M.value=!0,console.warn("‚ùå TOPIC GENERATION - Insufficient word balance",{current_balance:D.value,required:B});return}y.value=!0,v.value=[];let a=!1;try{I.value="connecting",p.value="Connecting to AI service...";const e=T("topics.stream",d.project.slug)+`?regenerate=true&geographic_focus=${encodeURIComponent($.value)}`;console.log("üì° TOPIC GENERATION - Connecting to stream:",e);const s=new EventSource(e);s.onopen=()=>{console.log("üì° SSE - Connection opened"),I.value="connecting",p.value="Connected to AI service - analyzing your project..."},s.onmessage=n=>{try{const l=JSON.parse(n.data);switch(console.log("üì° SSE - Message received:",l.type,l),l.type){case"start":I.value="analyzing",p.value=l.message||"Starting topic generation...";break;case"progress":l.message&&l.message.includes("academic context")?I.value="analyzing":l.message&&l.message.includes("generating")?I.value="generating":l.message&&l.message.includes("enriching")&&(I.value="enriching"),p.value=l.message||"Processing...",l.context&&console.log("üéì Academic context:",l.context);break;case"content":if(I.value="generating",l.chunk){const m=l.word_count||0;p.value=`Generating topics... (${m} words generated)`}l.topics&&l.from_cache&&(I.value="enriching",p.value="Loading topics from cache for faster response...");break;case"complete":I.value="complete",l.topics&&Array.isArray(l.topics)?(v.value=l.topics,p.value=`‚úì Successfully generated ${l.topics.length} personalized research topics!`,_.value="generated",f("Success",{description:`${l.topics.length} research topics generated successfully!`})):p.value=l.message||"Topics generated successfully!";break;case"error":{const m=l.message||"Stream error occurred";p.value=m,f("Error",{description:m}),a=!0,s.close(),y.value=!1;break}case"end":console.log("üì° SSE - Stream ended"),a=!0,s.close(),y.value=!1;break}}catch(l){console.error("üì° SSE - Failed to parse message:",l,n.data)}},s.onerror=n=>{if(a){console.log("üì° SSE - Ignoring connection error after stream closed");return}console.error("üì° SSE - Connection error:",n),s.close(),a=!0,v.value.length>0?(p.value=`‚úì Generated ${v.value.length} topics (connection ended early)`,_.value="generated",f("Partial Success",{description:`${v.value.length} topics generated before connection ended.`})):(console.log("üì° TOPIC GENERATION - Falling back to regular endpoint"),ve().catch(l=>{console.error("Fallback also failed:",l),p.value="Failed to generate topics. Please try again.",f("Error",{description:"Failed to generate topics. Please try again."})})),y.value=!1},setTimeout(()=>{!y.value||a||(console.log("‚è∞ TOPIC GENERATION - Timeout reached, closing stream"),s.close(),v.value.length>0?(p.value=`‚úì Generated ${v.value.length} topics (timeout reached)`,_.value="generated"):(p.value="Generation timed out. Please try again.",f("Timeout",{description:"Topic generation took longer than expected. Please try again."})),y.value=!1)},3e5)}catch(e){console.error("üí• TOPIC GENERATION - Error:",e),p.value="Failed to generate topics. Please try again.",f("Error",{description:e.message||"Failed to generate topics. Please try again."}),y.value=!1}},ve=async()=>{console.log("üîÑ TOPIC GENERATION - Using fallback method"),p.value="Retrying with fallback method...";try{const a=document.querySelector('meta[name="csrf-token"]')?.getAttribute("content");if(!a)throw new Error("CSRF token not found. Please refresh the page and try again.");const e=new AbortController,s=setTimeout(()=>e.abort(),3e5),n=await fetch(T("topics.generate",d.project.slug),{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":a,Accept:"application/json","X-Requested-With":"XMLHttpRequest"},body:JSON.stringify({regenerate:!0,geographic_focus:$.value}),signal:e.signal});if(clearTimeout(s),n.status===402){const m=await n.json().catch(()=>null);L.value=m?.required??B,z.value="generate research topics",M.value=!0,p.value=m?.message||"Insufficient word balance to generate topics.",f("Error",{description:p.value}),y.value=!1;return}if(!n.ok){let m=`HTTP error! status: ${n.status}`;try{m=(await n.clone().json()).message||m}catch{try{const V=await n.text();n.status===419?m="Session expired. Please refresh the page and try again.":n.status===504?m="Request timed out. Please try again in a few moments.":V.includes("<!DOCTYPE")&&(m="Server returned an error page instead of data. Please try again.")}catch{n.status===504&&(m="Request timed out. Please try again in a few moments.")}}throw new Error(m)}const l=await n.json();if(l.topics&&Array.isArray(l.topics))v.value=l.topics,p.value=`‚úì Successfully generated ${l.topics.length} research topics!`,_.value="generated",f("Success",{description:`${l.topics.length} research topics generated successfully!`});else throw new Error("Invalid response format: topics array not found")}catch(a){console.error("üí• FALLBACK GENERATION - Error:",a),p.value="Failed to generate topics. Please try again.",f("Error",{description:a.message||"Failed to generate topics. Please try again."})}},xe=a=>{O.value=a.title,fe.value=a.description;const e=document.createElement("div");e.innerHTML=a.title;const s=e.textContent||e.innerText||a.title;g.value=s,x.value=a.description,w.value=ee(s),_.value="existing"},ee=a=>{const e=document.createElement("div");e.innerHTML=a;const s=(e.textContent||e.innerText||a).trim(),n=255;return s.length>n?s.slice(0,n):s},be=ke(()=>{let a=v.value;return Q.value!=="all"&&(a=a.filter(e=>e.difficulty.toLowerCase().includes(Q.value.toLowerCase()))),R.value!=="all"&&(a=a.filter(e=>e.timeline===R.value)),a.sort((e,s)=>s.feasibility_score-e.feasibility_score)}),he=a=>{switch(a.toLowerCase()){case"beginner friendly":return"secondary";case"intermediate":return"default";case"advanced":return"destructive";default:return"secondary"}},te=a=>{const e=document.createElement("div");e.innerHTML=a.title;const s=(e.textContent||e.innerText||a.title).trim();if(!s){f("Error",{description:"Topic title is missing."});return}F.visit(T("topics.lab",{project:d.project.slug,new:"true",return_to_selection:1,topic_title:s,topic_description:a.description||""}))},ye=()=>{const a=(g.value||w.value||"").trim(),e=(x.value||"").trim();if(!a&&!e){f("Error",{description:"Please select or enter a topic first."});return}te({title:a||w.value||"Research Topic",description:e})},we=async()=>{if(console.log("üöÄ TOPIC SUBMISSION - Starting",{customTopic:g.value?.substring(0,50)+"...",customDescription:x.value?.substring(0,50)+"...",customTitle:w.value,project_slug:d.project.slug,current_url:window.location.href,timestamp:new Date().toISOString()}),console.log("üîç TOPIC SUBMISSION - Full form data:",{customTopic:g.value,customDescription:x.value,customTitle:w.value,customTopic_length:g.value?.length||0,customDescription_length:x.value?.length||0,customTitle_length:w.value?.length||0}),!g.value.trim()&&!x.value.trim()){console.log("‚ùå TOPIC SUBMISSION - Validation failed: No topic or description"),f("Error",{description:"Please enter a project topic and description."});return}E.value=!0;try{const a={topic:g.value.trim()||w.value.trim()||"Research Topic",title:w.value.trim()||ee(g.value||x.value),description:x.value.trim()};console.log("üì§ TOPIC SUBMISSION - Request data:",a),console.log("üìç TOPIC SUBMISSION - Request URL:",T("topics.select",d.project.slug));const e=document.querySelector('meta[name="csrf-token"]')?.getAttribute("content");if(console.log("üîê TOPIC SUBMISSION - CSRF token found:",!!e),console.log("üîê TOPIC SUBMISSION - CSRF token preview:",e?.substring(0,10)+"..."),!e)throw new Error("CSRF token not found. Please refresh the page and try again.");console.log("üì° TOPIC SUBMISSION - Making fetch request...");const s=await fetch(T("topics.select",d.project.slug),{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":e,Accept:"application/json","X-Requested-With":"XMLHttpRequest"},body:JSON.stringify(a)});if(console.log("üì• TOPIC SUBMISSION - Response received"),console.log("üì• TOPIC SUBMISSION - Response status:",s.status),console.log("üì• TOPIC SUBMISSION - Response statusText:",s.statusText),console.log("üì• TOPIC SUBMISSION - Response ok:",s.ok),console.log("üì• TOPIC SUBMISSION - Response headers:",Object.fromEntries(s.headers.entries())),s.ok){console.log("‚úÖ TOPIC SUBMISSION - Success! Processing response...");const n=await s.json();console.log("‚úÖ TOPIC SUBMISSION - Response data:",n),f("Topic Selected!",{description:"Your project topic has been set. You can now submit it for supervisor approval."}),console.log("üîÑ TOPIC SUBMISSION - Letting middleware handle redirect"),console.log("üîÑ TOPIC SUBMISSION - Current project slug:",d.project.slug),console.log("üîÑ TOPIC SUBMISSION - Target route:",T("projects.show",d.project.slug)),F.visit(T("projects.show",d.project.slug),{method:"get",replace:!0})}else{console.error("‚ùå TOPIC SUBMISSION - Request failed"),console.error("‚ùå TOPIC SUBMISSION - Status:",s.status),console.error("‚ùå TOPIC SUBMISSION - StatusText:",s.statusText);let n=`HTTP error! status: ${s.status}`;try{const l=await s.json();console.error("‚ùå TOPIC SUBMISSION - Error JSON:",l),n=l.message||n}catch{const m=await s.text();console.error("‚ùå TOPIC SUBMISSION - Error HTML (first 500 chars):",m.substring(0,500)),s.status===419?n="Session expired. Please refresh the page and try again.":m.includes("<!DOCTYPE")&&(n="Server returned an error page instead of data. Please try again.")}throw new Error(n)}}catch(a){console.error("üí• TOPIC SUBMISSION - Exception:",a),f("Error",{description:"Failed to select topic. Please try again."})}finally{E.value=!1,console.log("üèÅ TOPIC SUBMISSION - Finished (isSelecting set to false)")}},_e=async()=>{try{F.post(T("projects.go-back-to-wizard",d.project.slug),{},{onSuccess:()=>{f("Success",{description:"Returned to project setup"}),F.visit(T("projects.create"))},onError:()=>{f("Error",{description:"Failed to go back to setup. Please try again."})}})}catch{f("Error",{description:"Failed to go back to setup. Please try again."})}};return(a,e)=>(c(),C(Be,{title:"Select Project Topic"},{default:i(()=>[t("div",Ye,[e[50]||(e[50]=t("div",{class:"fixed inset-0 pointer-events-none z-0"},[t("div",{class:"absolute top-0 right-0 w-3/4 h-3/4 bg-primary/5 rounded-full blur-[120px] opacity-50"}),t("div",{class:"absolute bottom-0 left-0 w-1/2 h-1/2 bg-blue-500/5 rounded-full blur-[100px] opacity-50"})],-1)),t("header",Xe,[t("div",Je,[t("div",Ke,[r(o(j),{onClick:_e,variant:"ghost",size:"icon",class:"h-9 w-9 rounded-full text-muted-foreground hover:text-foreground hover:bg-muted/80"},{default:i(()=>[r(o(Ve),{class:"h-4 w-4"})]),_:1}),t("div",Qe,[t("h1",Ze,[e[8]||(e[8]=u(" Topic Selection ",-1)),y.value?(c(),b("span",et)):k("",!0)]),e[9]||(e[9]=t("p",{class:"text-[10px] text-muted-foreground uppercase tracking-wider font-medium"},"Step 2 of 4",-1))])]),t("div",tt,[r(o(q),{variant:"outline",class:"font-normal bg-muted/50"},{default:i(()=>[u(S(a.project.type),1)]),_:1})])])]),t("main",ot,[t("div",st,[t("div",rt,[t("div",at,[e[10]||(e[10]=t("div",{class:"absolute inset-0 rounded-full bg-yellow-500/10 blur-xl"},null,-1)),r(o(N),{class:"h-8 w-8 text-yellow-400 drop-shadow-[0_0_10px_rgba(250,204,21,0.8)] relative z-10"})])]),e[11]||(e[11]=t("div",{class:"space-y-2"},[t("h2",{class:"text-3xl font-bold tracking-tight sm:text-4xl bg-gradient-to-br from-foreground via-foreground to-muted-foreground bg-clip-text text-transparent"}," Choose Your Project Topic "),t("p",{class:"mx-auto max-w-[600px] text-muted-foreground text-lg leading-relaxed"}," Define your specific area of interest or let AI help you discover unique project topics. ")],-1))]),a.project.field_of_study||a.project.university||a.project.course?(c(),b("div",it,[a.project.field_of_study?(c(),b("div",lt,[e[12]||(e[12]=t("span",{class:"text-[10px] uppercase text-muted-foreground font-medium"},"Field",-1)),t("span",nt,S(a.project.field_of_study),1)])):k("",!0),a.project.university?(c(),b("div",dt,[e[13]||(e[13]=t("span",{class:"text-[10px] uppercase text-muted-foreground font-medium"},"Institution",-1)),t("span",ct,S(a.project.university),1)])):k("",!0),a.project.course?(c(),b("div",ut,[e[14]||(e[14]=t("span",{class:"text-[10px] uppercase text-muted-foreground font-medium"},"Course / Dept",-1)),t("span",pt,S(a.project.course),1)])):k("",!0)])):k("",!0),r(o(Ee),{modelValue:_.value,"onUpdate:modelValue":e[6]||(e[6]=s=>_.value=s),class:"space-y-8"},{default:i(()=>[t("div",mt,[r(o(Me),null,{default:i(()=>[r(o(Ne),{class:"grid grid-cols-3 w-full h-auto items-center justify-center rounded-2xl bg-muted/50 p-1.5 text-muted-foreground backdrop-blur-sm border border-border/50 shadow-inner sm:flex sm:w-auto"},{default:i(()=>[r(o(W),null,{default:i(()=>[r(o(Y),{"as-child":""},{default:i(()=>[r(o(G),{value:"existing",class:"rounded-xl px-2 py-2.5 text-[10px] sm:text-sm sm:px-6 transition-all data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm flex flex-col sm:flex-row items-center justify-center gap-1 sm:gap-2 h-full w-full sm:w-auto"},{default:i(()=>[r(o(qe),{class:"h-3.5 w-3.5 sm:h-4 sm:w-4 sm:mr-0"}),e[15]||(e[15]=t("span",{class:"truncate sm:hidden"},"Add Existing",-1)),e[16]||(e[16]=t("span",{class:"hidden sm:inline"},"Add Existing Topic",-1))]),_:1})]),_:1}),r(o(X),null,{default:i(()=>[...e[17]||(e[17]=[t("p",null,"Enter a topic you already have in mind",-1)])]),_:1})]),_:1}),r(o(W),null,{default:i(()=>[r(o(Y),{"as-child":""},{default:i(()=>[r(o(G),{value:"generated",class:"rounded-xl px-2 py-2.5 text-[10px] sm:text-sm sm:px-6 transition-all data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm flex flex-col sm:flex-row items-center justify-center gap-1 sm:gap-2 h-full w-full sm:w-auto"},{default:i(()=>[r(o(N),{class:"h-3.5 w-3.5 sm:h-4 sm:w-4 sm:mr-0"}),e[18]||(e[18]=t("span",{class:"truncate sm:hidden"},"AI Suggestions",-1)),e[19]||(e[19]=t("span",{class:"hidden sm:inline"},"AI Suggested Topics",-1))]),_:1})]),_:1}),r(o(X),null,{default:i(()=>[...e[20]||(e[20]=[t("p",null,"Generate unique topics based on your profile",-1)])]),_:1})]),_:1}),r(o(W),null,{default:i(()=>[r(o(Y),{"as-child":""},{default:i(()=>[r(o(G),{value:"import",class:"rounded-xl px-2 py-2.5 text-[10px] sm:text-sm sm:px-6 transition-all data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm flex flex-col sm:flex-row items-center justify-center gap-1 sm:gap-2 h-full w-full sm:w-auto"},{default:i(()=>[r(o(ce),{class:"h-3.5 w-3.5 sm:h-4 sm:w-4 sm:mr-0"}),e[21]||(e[21]=t("span",{class:"truncate sm:hidden"},"Import",-1)),e[22]||(e[22]=t("span",{class:"hidden sm:inline"},"Import Project",-1))]),_:1})]),_:1}),r(o(X),null,{default:i(()=>[...e[23]||(e[23]=[t("p",null,"Import a project from an external file",-1)])]),_:1})]),_:1})]),_:1})]),_:1})]),r(o(H),{value:"existing",class:"space-y-6 animate-in fade-in slide-in-from-bottom-4 duration-500"},{default:i(()=>[t("div",ft,[t("div",gt,[r(o(U),{class:"border-border/50 shadow-lg shadow-primary/5 bg-card/80 backdrop-blur-sm"},{default:i(()=>[r(o(ie),null,{default:i(()=>[r(o(le),{className:"text-lg"},{default:i(()=>[...e[24]||(e[24]=[u("Project Title",-1)])]),_:1}),r(o(ae),null,{default:i(()=>[...e[25]||(e[25]=[u(" Keep it clear and academic. ",-1)])]),_:1})]),_:1}),r(o(re),{class:"space-y-6"},{default:i(()=>[t("div",vt,[r(o(ne),{for:"custom-title",class:"text-xs font-medium uppercase text-muted-foreground"},{default:i(()=>[...e[26]||(e[26]=[u("Title",-1)])]),_:1}),r(o(Pe),{id:"custom-title",modelValue:w.value,"onUpdate:modelValue":e[0]||(e[0]=s=>w.value=s),placeholder:"e.g., The Impact of...",class:"h-12 bg-secondary/50 border-border/50 focus:bg-background focus:ring-primary/20 transition-all font-medium"},null,8,["modelValue"])]),t("div",xt,[r(o(ne),{for:"custom-topic",class:"text-xs font-medium uppercase text-muted-foreground"},{default:i(()=>[...e[27]||(e[27]=[u("Research Question / Topic",-1)])]),_:1}),r(o(Re),{id:"custom-topic",modelValue:g.value,"onUpdate:modelValue":e[1]||(e[1]=s=>g.value=s),placeholder:"What is the main problem you are investigating?",rows:"5",class:"resize-none bg-secondary/50 border-border/50 focus:bg-background focus:ring-primary/20 transition-all"},null,8,["modelValue"])])]),_:1}),t("div",bt,[r(o(j),{onClick:we,size:"lg",disabled:!g.value.trim()&&!x.value.trim()||E.value,class:"w-full h-12 text-base font-medium shadow-lg shadow-primary/20 hover:shadow-primary/30 transition-all"},{default:i(()=>[E.value?(c(),C(o(K),{key:0,class:"mr-2 h-5 w-5 animate-spin"})):(c(),b("span",ht,[e[28]||(e[28]=u(" Confirm Selection ",-1)),r(o(ue),{class:"ml-2 h-4 w-4"})]))]),_:1},8,["disabled"])])]),_:1}),t("div",yt,[t("div",{onClick:e[2]||(e[2]=s=>_.value="generated"),class:"rounded-xl bg-orange-500/5 border border-orange-500/10 p-4 cursor-pointer hover:bg-orange-500/10 transition-colors group"},[t("div",wt,[t("div",_t,[r(o(N),{class:"h-4 w-4"})]),e[29]||(e[29]=t("div",{class:"space-y-1"},[t("h4",{class:"text-sm font-semibold text-orange-700 dark:text-orange-400"},"Need Inspiration?"),t("p",{class:"text-xs text-muted-foreground leading-relaxed"},[u(" If you're stuck, switch to the "),t("strong",null,"AI Suggestions"),u(" tab to generate research topics tailored to your profile. ")])],-1))])])])]),t("div",St,[r(o(U),{class:"border-border/50 shadow-lg shadow-primary/5 bg-card/80 backdrop-blur-sm flex flex-col h-full lg:min-h-[500px]"},{default:i(()=>[t("div",Tt,[r(o(Ge),{class:"w-32 h-32 text-primary"})]),r(o(ie),null,{default:i(()=>[r(o(le),{className:"text-lg"},{default:i(()=>[...e[30]||(e[30]=[u("Detailed Description",-1)])]),_:1}),r(o(ae),null,{default:i(()=>[...e[31]||(e[31]=[u(" Elaborate on your research objectives and scope. ",-1)])]),_:1})]),_:1}),r(o(re),{class:"flex-1 min-h-[300px] flex flex-col"},{default:i(()=>[t("div",It,[r(De,{modelValue:x.value,"onUpdate:modelValue":e[3]||(e[3]=s=>x.value=s),placeholder:"Start typing your research description here...","min-height":"300px","show-toolbar":!0},null,8,["modelValue"])])]),_:1}),t("div",kt,[e[33]||(e[33]=t("p",{class:"text-[10px] text-muted-foreground"}," * This description will be used to guide the AI in future steps. ",-1)),r(o(j),{onClick:ye,disabled:!g.value.trim()&&!x.value.trim()||E.value,variant:"ghost",size:"sm",class:"text-muted-foreground hover:text-primary"},{default:i(()=>[r(o(pe),{class:"mr-2 h-3.5 w-3.5"}),e[32]||(e[32]=u(" Refine in Lab ",-1))]),_:1},8,["disabled"])])]),_:1})])])]),_:1}),r(o(H),{value:"generated",class:"space-y-6 pb-20 animate-in fade-in slide-in-from-bottom-4 duration-500"},{default:i(()=>[r(o(U),{class:"border-border/50 bg-card/50 backdrop-blur-sm sticky top-20 z-30 shadow-sm"},{default:i(()=>[t("div",Ct,[t("div",jt,[t("div",Ot,[e[37]||(e[37]=t("span",{class:"text-muted-foreground mr-2"},"Focus:",-1)),r(o($e),{modelValue:$.value,"onUpdate:modelValue":e[4]||(e[4]=s=>$.value=s)},{default:i(()=>[r(o(Ae),{class:"h-auto p-0 border-none bg-transparent hover:bg-transparent focus:ring-0 focus:ring-offset-0 gap-1 text-xs font-semibold"},{default:i(()=>[r(o(Fe),{placeholder:"Select Focus"})]),_:1}),r(o(Ue),null,{default:i(()=>[r(o(J),{value:"balanced"},{default:i(()=>[...e[34]||(e[34]=[u("Balanced",-1)])]),_:1}),r(o(J),{value:"nigeria_west_africa"},{default:i(()=>[...e[35]||(e[35]=[u("West Africa",-1)])]),_:1}),r(o(J),{value:"global"},{default:i(()=>[...e[36]||(e[36]=[u("Global",-1)])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),v.value.length>0?(c(),b("div",Pt)):k("",!0),v.value.length>0?(c(),b("div",Et,[e[39]||(e[39]=t("span",{class:"text-muted-foreground mr-2"},"Timeline:",-1)),Ce(t("select",{"onUpdate:modelValue":e[5]||(e[5]=s=>R.value=s),class:"bg-transparent border-none text-foreground font-semibold focus:ring-0 p-0 cursor-pointer text-xs"},[...e[38]||(e[38]=[t("option",{value:"all"},"Any",-1),t("option",{value:"6-9 months"},"6-9 mo",-1),t("option",{value:"9-12 months"},"9-12 mo",-1),t("option",{value:"12+ months"},"12+ mo",-1)])],512),[[je,R.value]])])):k("",!0)]),r(o(j),{onClick:Z,disabled:y.value,size:"sm",class:A(v.value.length===0?"w-full md:w-auto shadow-lg shadow-primary/20":"")},{default:i(()=>[y.value?(c(),C(o(K),{key:0,class:"mr-2 h-4 w-4 animate-spin"})):v.value.length>0?(c(),C(o(pe),{key:1,class:"mr-2 h-4 w-4"})):(c(),C(o(N),{key:2,class:"mr-2 h-4 w-4"})),u(" "+S(y.value?"Thinking...":v.value.length>0?"Regenerate":"Generate Ideas"),1)]),_:1},8,["disabled","class"])]),y.value?(c(),b("div",Nt,[...e[40]||(e[40]=[t("div",{class:"h-full bg-primary animate-progress-indeterminate"},null,-1)])])):k("",!0)]),_:1}),t("div",Rt,[y.value?(c(),b("div",Mt,[t("div",$t,[r(o(K),{class:"h-10 w-10 text-primary animate-spin"}),e[41]||(e[41]=t("div",{class:"absolute inset-0 rounded-full animate-ping bg-primary/20 opacity-75"},null,-1))]),t("h3",At,S(p.value||"Analyzing your profile..."),1),t("p",Ft," Our AI is scanning "+S(a.project.field_of_study)+" databases for relevant emerging topics. ",1)])):v.value.length===0?(c(),b("div",Ut,[t("div",Bt,[r(o(N),{class:"h-12 w-12 text-muted-foreground/40"})]),e[43]||(e[43]=t("h3",{class:"text-lg font-semibold mb-2"},"No Topics Generated Yet",-1)),e[44]||(e[44]=t("p",{class:"text-muted-foreground text-sm max-w-md mx-auto mb-8"},' Click "Generate Ideas" to get personalized research topics based on your level, university, and field of study. ',-1)),r(o(j),{onClick:Z,size:"lg",class:"rounded-full px-8 shadow-lg shadow-primary/20 hover:shadow-primary/30 hover:scale-105 transition-all"},{default:i(()=>[...e[42]||(e[42]=[u(" Generate First Batch ",-1)])]),_:1})])):(c(),b("div",Dt,[(c(!0),b(oe,null,se(be.value,s=>(c(),b("div",{key:s.id,class:A(["group relative flex flex-col md:flex-row gap-0 md:gap-6 rounded-2xl border border-border/50 bg-card hover:bg-card/80 transition-all duration-300 hover:shadow-xl hover:shadow-primary/5 hover:border-primary/20 overflow-hidden",O.value===s.title?"ring-1 ring-primary border-primary bg-primary/5":""])},[t("div",Lt,[t("div",zt,[r(o(q),{variant:he(s.difficulty),class:"rounded-md px-2 py-0.5 text-[10px] uppercase font-bold"},{default:i(()=>[u(S(s.difficulty),1)]),_:2},1032,["variant"]),t("span",Vt,S(s.timeline),1)]),t("div",qt,[e[45]||(e[45]=t("div",{class:"text-[10px] uppercase tracking-wider text-muted-foreground font-bold"},"Feasibility",-1)),t("div",Gt,[t("div",Ht,[t("div",{class:A(["h-full rounded-full transition-all",s.feasibility_score>=80?"bg-green-500":s.feasibility_score>=60?"bg-yellow-500":"bg-red-500"]),style:Oe(`width: ${s.feasibility_score}%`)},null,6)]),t("span",Wt,S(s.feasibility_score)+"%",1)])]),t("div",Yt,[r(o(j),{onClick:n=>xe(s),size:"sm",variant:O.value===s.title?"default":"outline",class:A(["w-full h-9 transition-all",O.value===s.title?"bg-primary text-primary-foreground shadow-lg shadow-primary/20":"hover:bg-primary hover:text-primary-foreground"])},{default:i(()=>[u(S(O.value===s.title?"Selected":"Select")+" ",1),O.value===s.title?(c(),C(o(He),{key:0,class:"ml-2 h-3.5 w-3.5"})):(c(),C(o(ue),{key:1,class:"ml-2 h-3.5 w-3.5"}))]),_:2},1032,["onClick","variant","class"]),r(o(j),{onClick:n=>te(s),size:"sm",variant:"ghost",class:"w-full h-9 text-xs text-muted-foreground hover:text-foreground"},{default:i(()=>[...e[46]||(e[46]=[u(" Refine ",-1)])]),_:2},1032,["onClick"])])]),t("div",Xt,[r(de,{content:s.title,as:"h3",class:"text-lg font-bold leading-snug text-foreground group-hover:text-primary transition-colors"},null,8,["content"]),t("div",Jt,[r(de,{content:s.description,as:"div"},null,8,["content"])]),t("div",Kt,[(c(!0),b(oe,null,se(s.keywords.slice(0,4),n=>(c(),b("span",{key:n,class:"text-[10px] font-medium text-muted-foreground/70 bg-muted/30 px-2 py-0.5 rounded-full border border-border/30"}," #"+S(n),1))),128))])])],2))),128))]))])]),_:1}),r(o(H),{value:"import",class:"space-y-6 animate-in fade-in slide-in-from-bottom-4 duration-500"},{default:i(()=>[r(o(U),{class:"border-border/50 shadow-lg shadow-primary/5 bg-card/80 backdrop-blur-sm min-h-[400px] flex items-center justify-center"},{default:i(()=>[t("div",Qt,[t("div",Zt,[r(o(ce),{class:"h-8 w-8 text-primary"})]),e[48]||(e[48]=t("h3",{class:"text-2xl font-bold"},"Import Existing Project",-1)),e[49]||(e[49]=t("p",{class:"text-muted-foreground leading-relaxed"}," We're working on a feature that will allow you to import your existing research proposals and documents directly into Finalyze. ",-1)),r(o(q),{variant:"secondary",class:"mt-4 text-sm px-4 py-1.5 font-medium"},{default:i(()=>[...e[47]||(e[47]=[u("Coming Soon",-1)])]),_:1})])]),_:1})]),_:1})]),_:1},8,["modelValue"])])]),r(Le,{open:o(M),"current-balance":o(D),"required-words":o(L),action:o(z)||"generate research topics","onUpdate:open":e[7]||(e[7]=s=>M.value=s),onClose:o(ge)},null,8,["open","current-balance","required-words","action","onClose"])]),_:1}))}}),ys=We(eo,[["__scopeId","data-v-b148db36"]]);export{ys as default};
