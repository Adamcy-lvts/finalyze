import{ak as ai,b as J,U as vt,d as Pg,S as Fg,t as li,e as dr,p as Au,T as ta,a4 as Wg,c as ut,o as ne,k as S,g as y,u as g,a0 as Bg,j as ie,X as Qt,z as _e,y as xn,i as gt,f as _t,n as Gn,aa as na,F as Ug}from"./app-D0iA28mB.js";import{t as V}from"./index-DqbJQ_3x.js";import{_ as ve}from"./index-BJDWSSx2.js";import{_ as Dg}from"./index-DRa6cDnc.js";import{_ as Mt}from"./Separator.vue_vue_type_script_setup_true_lang-DyIyV7Sg.js";import{_ as zg}from"./Progress.vue_vue_type_script_setup_true_lang-r6y1O8i4.js";import{aa as Ng}from"./RichTextEditor-Cmz55-Pv.js";import{d as fi,u as $g,a as kg,c as Gg,b as qg,_ as Hg,M as Kg}from"./useManualEditorSuggestions-ByqTBxt4.js";import{_ as Yg}from"./ChapterNavigation.vue_vue_type_script_setup_true_lang-Cj3pVkNu.js";import{u as Zg,M as Xg,a as Jg,P as Qg,_ as Vg,b as ra}from"./useTextHistory-CxEFf12R.js";import{_ as jg}from"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-C179DBP2.js";import{r as aa,u as e_}from"./useWordBalance-yFc2QOVb.js";import{_ as t_}from"./PurchaseModal.vue_vue_type_script_setup_true_lang-BN6tBtGb.js";import{A as ia}from"./arrow-left-CoqKmbM6.js";import{M as n_}from"./menu-qnocB4GF.js";import{S as Eu}from"./save-BCpu0AlP.js";import{M as ua}from"./message-square-DzOqRjIk.js";import{C as r_}from"./chevron-left-DgRxRWZL.js";import{C as i_}from"./chevron-right-CAOfRvIQ.js";import{a as u_,P as o_}from"./AlertDialogTitle.vue_vue_type_script_setup_true_lang-C-aqjVTk.js";import{L as s_}from"./loader-circle-BoEULsCu.js";import{M as a_,S as l_}from"./sun-CEYp1Zj3.js";import{M as f_}from"./minimize-2-B3qwT9OI.js";import{B as c_}from"./brain-O4DkFBX2.js";import{C as h_}from"./circle-check-big-DhWPfcME.js";import{_ as d_}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./index-DXgKZ3Xd.js";import"./Separator-3CU2Q57H.js";import"./Presence-BSaKSYj4.js";import"./useForwardExpose-D-JZQVBH.js";import"./nullish-CHIgUVhi.js";import"./purify.es-DxJI3Wx7.js";import"./index-BWEDi_FC.js";import"./step-DrZ9DcYd.js";import"./chart-column-DBacUrAp.js";import"./calendar-CbD5eXus.js";import"./users-B06aCwWX.js";import"./circle-alert-CHiNg_sO.js";import"./eye-s7jd8TP5.js";import"./check-EOAAsoIJ.js";import"./type-BOkyDG_G.js";import"./download-B4zJME46.js";import"./trash-2-CMXqhzol.js";import"./DialogTitle.vue_vue_type_script_setup_true_lang-BjOwapOF.js";import"./DialogTitle-DvFlUPVs.js";import"./x-B_lKCfQu.js";import"./DialogDescription.vue_vue_type_script_setup_true_lang-DNXk6leU.js";import"./DialogFooter.vue_vue_type_script_setup_true_lang-qEYDrJ4j.js";import"./Input.vue_vue_type_script_setup_true_lang-RNjFfadt.js";import"./Label.vue_vue_type_script_setup_true_lang-CIxF4rZz.js";import"./minus-cHJaWGhA.js";import"./plus-B0j3PyYk.js";import"./list-BiGVYLGT.js";import"./lightbulb-DJAiXzp2.js";import"./CollapsibleTrigger.vue_vue_type_script_setup_true_lang-BYji8sjU.js";import"./Checkbox.vue_vue_type_script_setup_true_lang-C8KjYNy5.js";import"./ohash.D__AXeF1-C-E83dC9.js";import"./VisuallyHiddenInput-DL8pwoaV.js";import"./VisuallyHidden-Dn8MCHX7.js";import"./RovingFocusItem-QSVzHYHC.js";import"./target-DnCEEMiZ.js";import"./chevron-down-B3BfxGoG.js";import"./circle-DpWeSqCQ.js";import"./sparkles-C5iYqP00.js";import"./DefensePreparationPanel.vue_vue_type_script_setup_true_lang-B1OCPfOe.js";import"./index-DgdEFHU3.js";import"./CardContent.vue_vue_type_script_setup_true_lang-Cs9lC4kT.js";import"./CardTitle.vue_vue_type_script_setup_true_lang-BzqDkG_v.js";import"./ScrollArea.vue_vue_type_script_setup_true_lang-DNmMMmbB.js";import"./useNonce-2zZrWzTZ.js";import"./Switch.vue_vue_type_script_setup_true_lang-DxEEZFMZ.js";import"./refresh-cw-Ck2jTFCf.js";import"./DialogTrigger-B35oFrQ7.js";import"./lock-GyELtn5v.js";import"./book-open-ZGXWrPjb.js";import"./search-DyJBgUPY.js";import"./file-text-iNluZ2Mn.js";import"./coins-BCXOcDpP.js";import"./arrow-right-CbmbMgRx.js";var pr={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */var p_=pr.exports,oa;function g_(){return oa||(oa=1,(function(mt,I){(function(){var s,ce="4.17.21",ot=200,wn="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",he="Expected a function",Vt="Invalid `variable` option passed into `_.template`",xt="__lodash_hash_undefined__",Pt=500,k="__lodash_placeholder__",Ee=1,Te=2,He=4,st=1,wt=2,ae=1,K=2,Ft=4,Re=8,at=16,Ue=32,Wt=64,Ie=128,B=256,N=512,re=30,ye="...",jt=800,Bt=16,lt=1,me=2,en=3,le=1/0,G=9007199254740991,Le=17976931348623157e292,ue=NaN,Oe=4294967295,bn=Oe-1,Ut=Oe>>>1,tn=[["ary",Ie],["bind",ae],["bindKey",K],["curry",Re],["curryRight",at],["flip",N],["partial",Ue],["partialRight",Wt],["rearg",B]],xe="[object Arguments]",qn="[object Array]",nn="[object AsyncFunction]",rn="[object Boolean]",un="[object Date]",gr="[object DOMException]",yn="[object Error]",Cn="[object Function]",Hn="[object GeneratorFunction]",De="[object Map]",on="[object Number]",ci="[object Null]",et="[object Object]",Kn="[object Promise]",_r="[object Proxy]",Dt="[object RegExp]",Me="[object Set]",zt="[object String]",Sn="[object Symbol]",vr="[object Undefined]",Nt="[object WeakMap]",hi="[object WeakSet]",bt="[object ArrayBuffer]",ft="[object DataView]",sn="[object Float32Array]",yt="[object Float64Array]",An="[object Int8Array]",En="[object Int16Array]",$t="[object Int32Array]",Yn="[object Uint8Array]",p="[object Uint8ClampedArray]",m="[object Uint16Array]",R="[object Uint32Array]",Tn=/\b__p \+= '';/g,Zn=/\b(__p \+=) '' \+/g,mr=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Xn=/&(?:amp|lt|gt|quot|#39);/g,Rn=/[&<>"']/g,Tu=RegExp(Xn.source),xr=RegExp(Rn.source),Jn=/<%-([\s\S]+?)%>/g,de=/<%([\s\S]+?)%>/g,an=/<%=([\s\S]+?)%>/g,ct=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ln=/^\w*$/,di=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Qn=/[\\^$.*+?()[\]{}|]/g,la=RegExp(Qn.source),pi=/^\s+/,fa=/\s/,ca=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,ha=/\{\n\/\* \[wrapped with (.+)\] \*/,da=/,? & /,pa=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,ga=/[()=,{}\[\]\/\s]/,_a=/\\(\\)?/g,va=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Ru=/\w*$/,ma=/^[-+]0x[0-9a-f]+$/i,xa=/^0b[01]+$/i,wa=/^\[object .+?Constructor\]$/,ba=/^0o[0-7]+$/i,ya=/^(?:0|[1-9]\d*)$/,Ca=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,wr=/($^)/,Sa=/['\n\r\u2028\u2029\\]/g,br="\\ud800-\\udfff",Aa="\\u0300-\\u036f",Ea="\\ufe20-\\ufe2f",Ta="\\u20d0-\\u20ff",Iu=Aa+Ea+Ta,Lu="\\u2700-\\u27bf",Ou="a-z\\xdf-\\xf6\\xf8-\\xff",Ra="\\xac\\xb1\\xd7\\xf7",Ia="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",La="\\u2000-\\u206f",Oa=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Mu="A-Z\\xc0-\\xd6\\xd8-\\xde",Pu="\\ufe0e\\ufe0f",Fu=Ra+Ia+La+Oa,gi="['’]",Ma="["+br+"]",Wu="["+Fu+"]",yr="["+Iu+"]",Bu="\\d+",Pa="["+Lu+"]",Uu="["+Ou+"]",Du="[^"+br+Fu+Bu+Lu+Ou+Mu+"]",_i="\\ud83c[\\udffb-\\udfff]",Fa="(?:"+yr+"|"+_i+")",zu="[^"+br+"]",vi="(?:\\ud83c[\\udde6-\\uddff]){2}",mi="[\\ud800-\\udbff][\\udc00-\\udfff]",In="["+Mu+"]",Nu="\\u200d",$u="(?:"+Uu+"|"+Du+")",Wa="(?:"+In+"|"+Du+")",ku="(?:"+gi+"(?:d|ll|m|re|s|t|ve))?",Gu="(?:"+gi+"(?:D|LL|M|RE|S|T|VE))?",qu=Fa+"?",Hu="["+Pu+"]?",Ba="(?:"+Nu+"(?:"+[zu,vi,mi].join("|")+")"+Hu+qu+")*",Ua="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Da="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Ku=Hu+qu+Ba,za="(?:"+[Pa,vi,mi].join("|")+")"+Ku,Na="(?:"+[zu+yr+"?",yr,vi,mi,Ma].join("|")+")",$a=RegExp(gi,"g"),ka=RegExp(yr,"g"),xi=RegExp(_i+"(?="+_i+")|"+Na+Ku,"g"),Ga=RegExp([In+"?"+Uu+"+"+ku+"(?="+[Wu,In,"$"].join("|")+")",Wa+"+"+Gu+"(?="+[Wu,In+$u,"$"].join("|")+")",In+"?"+$u+"+"+ku,In+"+"+Gu,Da,Ua,Bu,za].join("|"),"g"),qa=RegExp("["+Nu+br+Iu+Pu+"]"),Ha=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Ka=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Ya=-1,Z={};Z[sn]=Z[yt]=Z[An]=Z[En]=Z[$t]=Z[Yn]=Z[p]=Z[m]=Z[R]=!0,Z[xe]=Z[qn]=Z[bt]=Z[rn]=Z[ft]=Z[un]=Z[yn]=Z[Cn]=Z[De]=Z[on]=Z[et]=Z[Dt]=Z[Me]=Z[zt]=Z[Nt]=!1;var Y={};Y[xe]=Y[qn]=Y[bt]=Y[ft]=Y[rn]=Y[un]=Y[sn]=Y[yt]=Y[An]=Y[En]=Y[$t]=Y[De]=Y[on]=Y[et]=Y[Dt]=Y[Me]=Y[zt]=Y[Sn]=Y[Yn]=Y[p]=Y[m]=Y[R]=!0,Y[yn]=Y[Cn]=Y[Nt]=!1;var Za={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},Xa={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Ja={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Qa={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Va=parseFloat,ja=parseInt,Yu=typeof ai=="object"&&ai&&ai.Object===Object&&ai,el=typeof self=="object"&&self&&self.Object===Object&&self,pe=Yu||el||Function("return this")(),wi=I&&!I.nodeType&&I,fn=wi&&!0&&mt&&!mt.nodeType&&mt,Zu=fn&&fn.exports===wi,bi=Zu&&Yu.process,Ke=(function(){try{var f=fn&&fn.require&&fn.require("util").types;return f||bi&&bi.binding&&bi.binding("util")}catch{}})(),Xu=Ke&&Ke.isArrayBuffer,Ju=Ke&&Ke.isDate,Qu=Ke&&Ke.isMap,Vu=Ke&&Ke.isRegExp,ju=Ke&&Ke.isSet,eo=Ke&&Ke.isTypedArray;function ze(f,d,h){switch(h.length){case 0:return f.call(d);case 1:return f.call(d,h[0]);case 2:return f.call(d,h[0],h[1]);case 3:return f.call(d,h[0],h[1],h[2])}return f.apply(d,h)}function tl(f,d,h,b){for(var L=-1,z=f==null?0:f.length;++L<z;){var oe=f[L];d(b,oe,h(oe),f)}return b}function Ye(f,d){for(var h=-1,b=f==null?0:f.length;++h<b&&d(f[h],h,f)!==!1;);return f}function nl(f,d){for(var h=f==null?0:f.length;h--&&d(f[h],h,f)!==!1;);return f}function to(f,d){for(var h=-1,b=f==null?0:f.length;++h<b;)if(!d(f[h],h,f))return!1;return!0}function kt(f,d){for(var h=-1,b=f==null?0:f.length,L=0,z=[];++h<b;){var oe=f[h];d(oe,h,f)&&(z[L++]=oe)}return z}function Cr(f,d){var h=f==null?0:f.length;return!!h&&Ln(f,d,0)>-1}function yi(f,d,h){for(var b=-1,L=f==null?0:f.length;++b<L;)if(h(d,f[b]))return!0;return!1}function X(f,d){for(var h=-1,b=f==null?0:f.length,L=Array(b);++h<b;)L[h]=d(f[h],h,f);return L}function Gt(f,d){for(var h=-1,b=d.length,L=f.length;++h<b;)f[L+h]=d[h];return f}function Ci(f,d,h,b){var L=-1,z=f==null?0:f.length;for(b&&z&&(h=f[++L]);++L<z;)h=d(h,f[L],L,f);return h}function rl(f,d,h,b){var L=f==null?0:f.length;for(b&&L&&(h=f[--L]);L--;)h=d(h,f[L],L,f);return h}function Si(f,d){for(var h=-1,b=f==null?0:f.length;++h<b;)if(d(f[h],h,f))return!0;return!1}var il=Ai("length");function ul(f){return f.split("")}function ol(f){return f.match(pa)||[]}function no(f,d,h){var b;return h(f,function(L,z,oe){if(d(L,z,oe))return b=z,!1}),b}function Sr(f,d,h,b){for(var L=f.length,z=h+(b?1:-1);b?z--:++z<L;)if(d(f[z],z,f))return z;return-1}function Ln(f,d,h){return d===d?ml(f,d,h):Sr(f,ro,h)}function sl(f,d,h,b){for(var L=h-1,z=f.length;++L<z;)if(b(f[L],d))return L;return-1}function ro(f){return f!==f}function io(f,d){var h=f==null?0:f.length;return h?Ti(f,d)/h:ue}function Ai(f){return function(d){return d==null?s:d[f]}}function Ei(f){return function(d){return f==null?s:f[d]}}function uo(f,d,h,b,L){return L(f,function(z,oe,H){h=b?(b=!1,z):d(h,z,oe,H)}),h}function al(f,d){var h=f.length;for(f.sort(d);h--;)f[h]=f[h].value;return f}function Ti(f,d){for(var h,b=-1,L=f.length;++b<L;){var z=d(f[b]);z!==s&&(h=h===s?z:h+z)}return h}function Ri(f,d){for(var h=-1,b=Array(f);++h<f;)b[h]=d(h);return b}function ll(f,d){return X(d,function(h){return[h,f[h]]})}function oo(f){return f&&f.slice(0,fo(f)+1).replace(pi,"")}function Ne(f){return function(d){return f(d)}}function Ii(f,d){return X(d,function(h){return f[h]})}function Vn(f,d){return f.has(d)}function so(f,d){for(var h=-1,b=f.length;++h<b&&Ln(d,f[h],0)>-1;);return h}function ao(f,d){for(var h=f.length;h--&&Ln(d,f[h],0)>-1;);return h}function fl(f,d){for(var h=f.length,b=0;h--;)f[h]===d&&++b;return b}var cl=Ei(Za),hl=Ei(Xa);function dl(f){return"\\"+Qa[f]}function pl(f,d){return f==null?s:f[d]}function On(f){return qa.test(f)}function gl(f){return Ha.test(f)}function _l(f){for(var d,h=[];!(d=f.next()).done;)h.push(d.value);return h}function Li(f){var d=-1,h=Array(f.size);return f.forEach(function(b,L){h[++d]=[L,b]}),h}function lo(f,d){return function(h){return f(d(h))}}function qt(f,d){for(var h=-1,b=f.length,L=0,z=[];++h<b;){var oe=f[h];(oe===d||oe===k)&&(f[h]=k,z[L++]=h)}return z}function Ar(f){var d=-1,h=Array(f.size);return f.forEach(function(b){h[++d]=b}),h}function vl(f){var d=-1,h=Array(f.size);return f.forEach(function(b){h[++d]=[b,b]}),h}function ml(f,d,h){for(var b=h-1,L=f.length;++b<L;)if(f[b]===d)return b;return-1}function xl(f,d,h){for(var b=h+1;b--;)if(f[b]===d)return b;return b}function Mn(f){return On(f)?bl(f):il(f)}function tt(f){return On(f)?yl(f):ul(f)}function fo(f){for(var d=f.length;d--&&fa.test(f.charAt(d)););return d}var wl=Ei(Ja);function bl(f){for(var d=xi.lastIndex=0;xi.test(f);)++d;return d}function yl(f){return f.match(xi)||[]}function Cl(f){return f.match(Ga)||[]}var Sl=(function f(d){d=d==null?pe:Pn.defaults(pe.Object(),d,Pn.pick(pe,Ka));var h=d.Array,b=d.Date,L=d.Error,z=d.Function,oe=d.Math,H=d.Object,Oi=d.RegExp,Al=d.String,Ze=d.TypeError,Er=h.prototype,El=z.prototype,Fn=H.prototype,Tr=d["__core-js_shared__"],Rr=El.toString,q=Fn.hasOwnProperty,Tl=0,co=(function(){var e=/[^.]+$/.exec(Tr&&Tr.keys&&Tr.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""})(),Ir=Fn.toString,Rl=Rr.call(H),Il=pe._,Ll=Oi("^"+Rr.call(q).replace(Qn,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Lr=Zu?d.Buffer:s,Ht=d.Symbol,Or=d.Uint8Array,ho=Lr?Lr.allocUnsafe:s,Mr=lo(H.getPrototypeOf,H),po=H.create,go=Fn.propertyIsEnumerable,Pr=Er.splice,_o=Ht?Ht.isConcatSpreadable:s,jn=Ht?Ht.iterator:s,cn=Ht?Ht.toStringTag:s,Fr=(function(){try{var e=_n(H,"defineProperty");return e({},"",{}),e}catch{}})(),Ol=d.clearTimeout!==pe.clearTimeout&&d.clearTimeout,Ml=b&&b.now!==pe.Date.now&&b.now,Pl=d.setTimeout!==pe.setTimeout&&d.setTimeout,Wr=oe.ceil,Br=oe.floor,Mi=H.getOwnPropertySymbols,Fl=Lr?Lr.isBuffer:s,vo=d.isFinite,Wl=Er.join,Bl=lo(H.keys,H),se=oe.max,we=oe.min,Ul=b.now,Dl=d.parseInt,mo=oe.random,zl=Er.reverse,Pi=_n(d,"DataView"),er=_n(d,"Map"),Fi=_n(d,"Promise"),Wn=_n(d,"Set"),tr=_n(d,"WeakMap"),nr=_n(H,"create"),Ur=tr&&new tr,Bn={},Nl=vn(Pi),$l=vn(er),kl=vn(Fi),Gl=vn(Wn),ql=vn(tr),Dr=Ht?Ht.prototype:s,rr=Dr?Dr.valueOf:s,xo=Dr?Dr.toString:s;function u(e){if(j(e)&&!O(e)&&!(e instanceof U)){if(e instanceof Xe)return e;if(q.call(e,"__wrapped__"))return ws(e)}return new Xe(e)}var Un=(function(){function e(){}return function(t){if(!Q(t))return{};if(po)return po(t);e.prototype=t;var n=new e;return e.prototype=s,n}})();function zr(){}function Xe(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=s}u.templateSettings={escape:Jn,evaluate:de,interpolate:an,variable:"",imports:{_:u}},u.prototype=zr.prototype,u.prototype.constructor=u,Xe.prototype=Un(zr.prototype),Xe.prototype.constructor=Xe;function U(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Oe,this.__views__=[]}function Hl(){var e=new U(this.__wrapped__);return e.__actions__=Pe(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=Pe(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=Pe(this.__views__),e}function Kl(){if(this.__filtered__){var e=new U(this);e.__dir__=-1,e.__filtered__=!0}else e=this.clone(),e.__dir__*=-1;return e}function Yl(){var e=this.__wrapped__.value(),t=this.__dir__,n=O(e),r=t<0,i=n?e.length:0,o=oc(0,i,this.__views__),a=o.start,l=o.end,c=l-a,_=r?l:a-1,v=this.__iteratees__,x=v.length,w=0,C=we(c,this.__takeCount__);if(!n||!r&&i==c&&C==c)return Go(e,this.__actions__);var E=[];e:for(;c--&&w<C;){_+=t;for(var P=-1,T=e[_];++P<x;){var W=v[P],D=W.iteratee,Ge=W.type,Ae=D(T);if(Ge==me)T=Ae;else if(!Ae){if(Ge==lt)continue e;break e}}E[w++]=T}return E}U.prototype=Un(zr.prototype),U.prototype.constructor=U;function hn(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Zl(){this.__data__=nr?nr(null):{},this.size=0}function Xl(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}function Jl(e){var t=this.__data__;if(nr){var n=t[e];return n===xt?s:n}return q.call(t,e)?t[e]:s}function Ql(e){var t=this.__data__;return nr?t[e]!==s:q.call(t,e)}function Vl(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=nr&&t===s?xt:t,this}hn.prototype.clear=Zl,hn.prototype.delete=Xl,hn.prototype.get=Jl,hn.prototype.has=Ql,hn.prototype.set=Vl;function Ct(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function jl(){this.__data__=[],this.size=0}function ef(e){var t=this.__data__,n=Nr(t,e);if(n<0)return!1;var r=t.length-1;return n==r?t.pop():Pr.call(t,n,1),--this.size,!0}function tf(e){var t=this.__data__,n=Nr(t,e);return n<0?s:t[n][1]}function nf(e){return Nr(this.__data__,e)>-1}function rf(e,t){var n=this.__data__,r=Nr(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this}Ct.prototype.clear=jl,Ct.prototype.delete=ef,Ct.prototype.get=tf,Ct.prototype.has=nf,Ct.prototype.set=rf;function St(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function uf(){this.size=0,this.__data__={hash:new hn,map:new(er||Ct),string:new hn}}function of(e){var t=Vr(this,e).delete(e);return this.size-=t?1:0,t}function sf(e){return Vr(this,e).get(e)}function af(e){return Vr(this,e).has(e)}function lf(e,t){var n=Vr(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this}St.prototype.clear=uf,St.prototype.delete=of,St.prototype.get=sf,St.prototype.has=af,St.prototype.set=lf;function dn(e){var t=-1,n=e==null?0:e.length;for(this.__data__=new St;++t<n;)this.add(e[t])}function ff(e){return this.__data__.set(e,xt),this}function cf(e){return this.__data__.has(e)}dn.prototype.add=dn.prototype.push=ff,dn.prototype.has=cf;function nt(e){var t=this.__data__=new Ct(e);this.size=t.size}function hf(){this.__data__=new Ct,this.size=0}function df(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}function pf(e){return this.__data__.get(e)}function gf(e){return this.__data__.has(e)}function _f(e,t){var n=this.__data__;if(n instanceof Ct){var r=n.__data__;if(!er||r.length<ot-1)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new St(r)}return n.set(e,t),this.size=n.size,this}nt.prototype.clear=hf,nt.prototype.delete=df,nt.prototype.get=pf,nt.prototype.has=gf,nt.prototype.set=_f;function wo(e,t){var n=O(e),r=!n&&mn(e),i=!n&&!r&&Jt(e),o=!n&&!r&&!i&&$n(e),a=n||r||i||o,l=a?Ri(e.length,Al):[],c=l.length;for(var _ in e)(t||q.call(e,_))&&!(a&&(_=="length"||i&&(_=="offset"||_=="parent")||o&&(_=="buffer"||_=="byteLength"||_=="byteOffset")||Rt(_,c)))&&l.push(_);return l}function bo(e){var t=e.length;return t?e[Hi(0,t-1)]:s}function vf(e,t){return jr(Pe(e),pn(t,0,e.length))}function mf(e){return jr(Pe(e))}function Wi(e,t,n){(n!==s&&!rt(e[t],n)||n===s&&!(t in e))&&At(e,t,n)}function ir(e,t,n){var r=e[t];(!(q.call(e,t)&&rt(r,n))||n===s&&!(t in e))&&At(e,t,n)}function Nr(e,t){for(var n=e.length;n--;)if(rt(e[n][0],t))return n;return-1}function xf(e,t,n,r){return Kt(e,function(i,o,a){t(r,i,n(i),a)}),r}function yo(e,t){return e&&dt(t,fe(t),e)}function wf(e,t){return e&&dt(t,We(t),e)}function At(e,t,n){t=="__proto__"&&Fr?Fr(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function Bi(e,t){for(var n=-1,r=t.length,i=h(r),o=e==null;++n<r;)i[n]=o?s:_u(e,t[n]);return i}function pn(e,t,n){return e===e&&(n!==s&&(e=e<=n?e:n),t!==s&&(e=e>=t?e:t)),e}function Je(e,t,n,r,i,o){var a,l=t&Ee,c=t&Te,_=t&He;if(n&&(a=i?n(e,r,i,o):n(e)),a!==s)return a;if(!Q(e))return e;var v=O(e);if(v){if(a=ac(e),!l)return Pe(e,a)}else{var x=be(e),w=x==Cn||x==Hn;if(Jt(e))return Ko(e,l);if(x==et||x==xe||w&&!i){if(a=c||w?{}:cs(e),!l)return c?Qf(e,wf(a,e)):Jf(e,yo(a,e))}else{if(!Y[x])return i?e:{};a=lc(e,x,l)}}o||(o=new nt);var C=o.get(e);if(C)return C;o.set(e,a),Ns(e)?e.forEach(function(T){a.add(Je(T,t,n,T,e,o))}):Ds(e)&&e.forEach(function(T,W){a.set(W,Je(T,t,n,W,e,o))});var E=_?c?nu:tu:c?We:fe,P=v?s:E(e);return Ye(P||e,function(T,W){P&&(W=T,T=e[W]),ir(a,W,Je(T,t,n,W,e,o))}),a}function bf(e){var t=fe(e);return function(n){return Co(n,e,t)}}function Co(e,t,n){var r=n.length;if(e==null)return!r;for(e=H(e);r--;){var i=n[r],o=t[i],a=e[i];if(a===s&&!(i in e)||!o(a))return!1}return!0}function So(e,t,n){if(typeof e!="function")throw new Ze(he);return cr(function(){e.apply(s,n)},t)}function ur(e,t,n,r){var i=-1,o=Cr,a=!0,l=e.length,c=[],_=t.length;if(!l)return c;n&&(t=X(t,Ne(n))),r?(o=yi,a=!1):t.length>=ot&&(o=Vn,a=!1,t=new dn(t));e:for(;++i<l;){var v=e[i],x=n==null?v:n(v);if(v=r||v!==0?v:0,a&&x===x){for(var w=_;w--;)if(t[w]===x)continue e;c.push(v)}else o(t,x,r)||c.push(v)}return c}var Kt=Qo(ht),Ao=Qo(Di,!0);function yf(e,t){var n=!0;return Kt(e,function(r,i,o){return n=!!t(r,i,o),n}),n}function $r(e,t,n){for(var r=-1,i=e.length;++r<i;){var o=e[r],a=t(o);if(a!=null&&(l===s?a===a&&!ke(a):n(a,l)))var l=a,c=o}return c}function Cf(e,t,n,r){var i=e.length;for(n=M(n),n<0&&(n=-n>i?0:i+n),r=r===s||r>i?i:M(r),r<0&&(r+=i),r=n>r?0:ks(r);n<r;)e[n++]=t;return e}function Eo(e,t){var n=[];return Kt(e,function(r,i,o){t(r,i,o)&&n.push(r)}),n}function ge(e,t,n,r,i){var o=-1,a=e.length;for(n||(n=cc),i||(i=[]);++o<a;){var l=e[o];t>0&&n(l)?t>1?ge(l,t-1,n,r,i):Gt(i,l):r||(i[i.length]=l)}return i}var Ui=Vo(),To=Vo(!0);function ht(e,t){return e&&Ui(e,t,fe)}function Di(e,t){return e&&To(e,t,fe)}function kr(e,t){return kt(t,function(n){return It(e[n])})}function gn(e,t){t=Zt(t,e);for(var n=0,r=t.length;e!=null&&n<r;)e=e[pt(t[n++])];return n&&n==r?e:s}function Ro(e,t,n){var r=t(e);return O(e)?r:Gt(r,n(e))}function Ce(e){return e==null?e===s?vr:ci:cn&&cn in H(e)?uc(e):mc(e)}function zi(e,t){return e>t}function Sf(e,t){return e!=null&&q.call(e,t)}function Af(e,t){return e!=null&&t in H(e)}function Ef(e,t,n){return e>=we(t,n)&&e<se(t,n)}function Ni(e,t,n){for(var r=n?yi:Cr,i=e[0].length,o=e.length,a=o,l=h(o),c=1/0,_=[];a--;){var v=e[a];a&&t&&(v=X(v,Ne(t))),c=we(v.length,c),l[a]=!n&&(t||i>=120&&v.length>=120)?new dn(a&&v):s}v=e[0];var x=-1,w=l[0];e:for(;++x<i&&_.length<c;){var C=v[x],E=t?t(C):C;if(C=n||C!==0?C:0,!(w?Vn(w,E):r(_,E,n))){for(a=o;--a;){var P=l[a];if(!(P?Vn(P,E):r(e[a],E,n)))continue e}w&&w.push(E),_.push(C)}}return _}function Tf(e,t,n,r){return ht(e,function(i,o,a){t(r,n(i),o,a)}),r}function or(e,t,n){t=Zt(t,e),e=gs(e,t);var r=e==null?e:e[pt(Ve(t))];return r==null?s:ze(r,e,n)}function Io(e){return j(e)&&Ce(e)==xe}function Rf(e){return j(e)&&Ce(e)==bt}function If(e){return j(e)&&Ce(e)==un}function sr(e,t,n,r,i){return e===t?!0:e==null||t==null||!j(e)&&!j(t)?e!==e&&t!==t:Lf(e,t,n,r,sr,i)}function Lf(e,t,n,r,i,o){var a=O(e),l=O(t),c=a?qn:be(e),_=l?qn:be(t);c=c==xe?et:c,_=_==xe?et:_;var v=c==et,x=_==et,w=c==_;if(w&&Jt(e)){if(!Jt(t))return!1;a=!0,v=!1}if(w&&!v)return o||(o=new nt),a||$n(e)?as(e,t,n,r,i,o):rc(e,t,c,n,r,i,o);if(!(n&st)){var C=v&&q.call(e,"__wrapped__"),E=x&&q.call(t,"__wrapped__");if(C||E){var P=C?e.value():e,T=E?t.value():t;return o||(o=new nt),i(P,T,n,r,o)}}return w?(o||(o=new nt),ic(e,t,n,r,i,o)):!1}function Of(e){return j(e)&&be(e)==De}function $i(e,t,n,r){var i=n.length,o=i,a=!r;if(e==null)return!o;for(e=H(e);i--;){var l=n[i];if(a&&l[2]?l[1]!==e[l[0]]:!(l[0]in e))return!1}for(;++i<o;){l=n[i];var c=l[0],_=e[c],v=l[1];if(a&&l[2]){if(_===s&&!(c in e))return!1}else{var x=new nt;if(r)var w=r(_,v,c,e,t,x);if(!(w===s?sr(v,_,st|wt,r,x):w))return!1}}return!0}function Lo(e){if(!Q(e)||dc(e))return!1;var t=It(e)?Ll:wa;return t.test(vn(e))}function Mf(e){return j(e)&&Ce(e)==Dt}function Pf(e){return j(e)&&be(e)==Me}function Ff(e){return j(e)&&ui(e.length)&&!!Z[Ce(e)]}function Oo(e){return typeof e=="function"?e:e==null?Be:typeof e=="object"?O(e)?Fo(e[0],e[1]):Po(e):js(e)}function ki(e){if(!fr(e))return Bl(e);var t=[];for(var n in H(e))q.call(e,n)&&n!="constructor"&&t.push(n);return t}function Wf(e){if(!Q(e))return vc(e);var t=fr(e),n=[];for(var r in e)r=="constructor"&&(t||!q.call(e,r))||n.push(r);return n}function Gi(e,t){return e<t}function Mo(e,t){var n=-1,r=Fe(e)?h(e.length):[];return Kt(e,function(i,o,a){r[++n]=t(i,o,a)}),r}function Po(e){var t=iu(e);return t.length==1&&t[0][2]?ds(t[0][0],t[0][1]):function(n){return n===e||$i(n,e,t)}}function Fo(e,t){return ou(e)&&hs(t)?ds(pt(e),t):function(n){var r=_u(n,e);return r===s&&r===t?vu(n,e):sr(t,r,st|wt)}}function Gr(e,t,n,r,i){e!==t&&Ui(t,function(o,a){if(i||(i=new nt),Q(o))Bf(e,t,a,n,Gr,r,i);else{var l=r?r(au(e,a),o,a+"",e,t,i):s;l===s&&(l=o),Wi(e,a,l)}},We)}function Bf(e,t,n,r,i,o,a){var l=au(e,n),c=au(t,n),_=a.get(c);if(_){Wi(e,n,_);return}var v=o?o(l,c,n+"",e,t,a):s,x=v===s;if(x){var w=O(c),C=!w&&Jt(c),E=!w&&!C&&$n(c);v=c,w||C||E?O(l)?v=l:ee(l)?v=Pe(l):C?(x=!1,v=Ko(c,!0)):E?(x=!1,v=Yo(c,!0)):v=[]:hr(c)||mn(c)?(v=l,mn(l)?v=Gs(l):(!Q(l)||It(l))&&(v=cs(c))):x=!1}x&&(a.set(c,v),i(v,c,r,o,a),a.delete(c)),Wi(e,n,v)}function Wo(e,t){var n=e.length;if(n)return t+=t<0?n:0,Rt(t,n)?e[t]:s}function Bo(e,t,n){t.length?t=X(t,function(o){return O(o)?function(a){return gn(a,o.length===1?o[0]:o)}:o}):t=[Be];var r=-1;t=X(t,Ne(A()));var i=Mo(e,function(o,a,l){var c=X(t,function(_){return _(o)});return{criteria:c,index:++r,value:o}});return al(i,function(o,a){return Xf(o,a,n)})}function Uf(e,t){return Uo(e,t,function(n,r){return vu(e,r)})}function Uo(e,t,n){for(var r=-1,i=t.length,o={};++r<i;){var a=t[r],l=gn(e,a);n(l,a)&&ar(o,Zt(a,e),l)}return o}function Df(e){return function(t){return gn(t,e)}}function qi(e,t,n,r){var i=r?sl:Ln,o=-1,a=t.length,l=e;for(e===t&&(t=Pe(t)),n&&(l=X(e,Ne(n)));++o<a;)for(var c=0,_=t[o],v=n?n(_):_;(c=i(l,v,c,r))>-1;)l!==e&&Pr.call(l,c,1),Pr.call(e,c,1);return e}function Do(e,t){for(var n=e?t.length:0,r=n-1;n--;){var i=t[n];if(n==r||i!==o){var o=i;Rt(i)?Pr.call(e,i,1):Zi(e,i)}}return e}function Hi(e,t){return e+Br(mo()*(t-e+1))}function zf(e,t,n,r){for(var i=-1,o=se(Wr((t-e)/(n||1)),0),a=h(o);o--;)a[r?o:++i]=e,e+=n;return a}function Ki(e,t){var n="";if(!e||t<1||t>G)return n;do t%2&&(n+=e),t=Br(t/2),t&&(e+=e);while(t);return n}function F(e,t){return lu(ps(e,t,Be),e+"")}function Nf(e){return bo(kn(e))}function $f(e,t){var n=kn(e);return jr(n,pn(t,0,n.length))}function ar(e,t,n,r){if(!Q(e))return e;t=Zt(t,e);for(var i=-1,o=t.length,a=o-1,l=e;l!=null&&++i<o;){var c=pt(t[i]),_=n;if(c==="__proto__"||c==="constructor"||c==="prototype")return e;if(i!=a){var v=l[c];_=r?r(v,c,l):s,_===s&&(_=Q(v)?v:Rt(t[i+1])?[]:{})}ir(l,c,_),l=l[c]}return e}var zo=Ur?function(e,t){return Ur.set(e,t),e}:Be,kf=Fr?function(e,t){return Fr(e,"toString",{configurable:!0,enumerable:!1,value:xu(t),writable:!0})}:Be;function Gf(e){return jr(kn(e))}function Qe(e,t,n){var r=-1,i=e.length;t<0&&(t=-t>i?0:i+t),n=n>i?i:n,n<0&&(n+=i),i=t>n?0:n-t>>>0,t>>>=0;for(var o=h(i);++r<i;)o[r]=e[r+t];return o}function qf(e,t){var n;return Kt(e,function(r,i,o){return n=t(r,i,o),!n}),!!n}function qr(e,t,n){var r=0,i=e==null?r:e.length;if(typeof t=="number"&&t===t&&i<=Ut){for(;r<i;){var o=r+i>>>1,a=e[o];a!==null&&!ke(a)&&(n?a<=t:a<t)?r=o+1:i=o}return i}return Yi(e,t,Be,n)}function Yi(e,t,n,r){var i=0,o=e==null?0:e.length;if(o===0)return 0;t=n(t);for(var a=t!==t,l=t===null,c=ke(t),_=t===s;i<o;){var v=Br((i+o)/2),x=n(e[v]),w=x!==s,C=x===null,E=x===x,P=ke(x);if(a)var T=r||E;else _?T=E&&(r||w):l?T=E&&w&&(r||!C):c?T=E&&w&&!C&&(r||!P):C||P?T=!1:T=r?x<=t:x<t;T?i=v+1:o=v}return we(o,bn)}function No(e,t){for(var n=-1,r=e.length,i=0,o=[];++n<r;){var a=e[n],l=t?t(a):a;if(!n||!rt(l,c)){var c=l;o[i++]=a===0?0:a}}return o}function $o(e){return typeof e=="number"?e:ke(e)?ue:+e}function $e(e){if(typeof e=="string")return e;if(O(e))return X(e,$e)+"";if(ke(e))return xo?xo.call(e):"";var t=e+"";return t=="0"&&1/e==-le?"-0":t}function Yt(e,t,n){var r=-1,i=Cr,o=e.length,a=!0,l=[],c=l;if(n)a=!1,i=yi;else if(o>=ot){var _=t?null:tc(e);if(_)return Ar(_);a=!1,i=Vn,c=new dn}else c=t?[]:l;e:for(;++r<o;){var v=e[r],x=t?t(v):v;if(v=n||v!==0?v:0,a&&x===x){for(var w=c.length;w--;)if(c[w]===x)continue e;t&&c.push(x),l.push(v)}else i(c,x,n)||(c!==l&&c.push(x),l.push(v))}return l}function Zi(e,t){return t=Zt(t,e),e=gs(e,t),e==null||delete e[pt(Ve(t))]}function ko(e,t,n,r){return ar(e,t,n(gn(e,t)),r)}function Hr(e,t,n,r){for(var i=e.length,o=r?i:-1;(r?o--:++o<i)&&t(e[o],o,e););return n?Qe(e,r?0:o,r?o+1:i):Qe(e,r?o+1:0,r?i:o)}function Go(e,t){var n=e;return n instanceof U&&(n=n.value()),Ci(t,function(r,i){return i.func.apply(i.thisArg,Gt([r],i.args))},n)}function Xi(e,t,n){var r=e.length;if(r<2)return r?Yt(e[0]):[];for(var i=-1,o=h(r);++i<r;)for(var a=e[i],l=-1;++l<r;)l!=i&&(o[i]=ur(o[i]||a,e[l],t,n));return Yt(ge(o,1),t,n)}function qo(e,t,n){for(var r=-1,i=e.length,o=t.length,a={};++r<i;){var l=r<o?t[r]:s;n(a,e[r],l)}return a}function Ji(e){return ee(e)?e:[]}function Qi(e){return typeof e=="function"?e:Be}function Zt(e,t){return O(e)?e:ou(e,t)?[e]:xs($(e))}var Hf=F;function Xt(e,t,n){var r=e.length;return n=n===s?r:n,!t&&n>=r?e:Qe(e,t,n)}var Ho=Ol||function(e){return pe.clearTimeout(e)};function Ko(e,t){if(t)return e.slice();var n=e.length,r=ho?ho(n):new e.constructor(n);return e.copy(r),r}function Vi(e){var t=new e.constructor(e.byteLength);return new Or(t).set(new Or(e)),t}function Kf(e,t){var n=t?Vi(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}function Yf(e){var t=new e.constructor(e.source,Ru.exec(e));return t.lastIndex=e.lastIndex,t}function Zf(e){return rr?H(rr.call(e)):{}}function Yo(e,t){var n=t?Vi(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}function Zo(e,t){if(e!==t){var n=e!==s,r=e===null,i=e===e,o=ke(e),a=t!==s,l=t===null,c=t===t,_=ke(t);if(!l&&!_&&!o&&e>t||o&&a&&c&&!l&&!_||r&&a&&c||!n&&c||!i)return 1;if(!r&&!o&&!_&&e<t||_&&n&&i&&!r&&!o||l&&n&&i||!a&&i||!c)return-1}return 0}function Xf(e,t,n){for(var r=-1,i=e.criteria,o=t.criteria,a=i.length,l=n.length;++r<a;){var c=Zo(i[r],o[r]);if(c){if(r>=l)return c;var _=n[r];return c*(_=="desc"?-1:1)}}return e.index-t.index}function Xo(e,t,n,r){for(var i=-1,o=e.length,a=n.length,l=-1,c=t.length,_=se(o-a,0),v=h(c+_),x=!r;++l<c;)v[l]=t[l];for(;++i<a;)(x||i<o)&&(v[n[i]]=e[i]);for(;_--;)v[l++]=e[i++];return v}function Jo(e,t,n,r){for(var i=-1,o=e.length,a=-1,l=n.length,c=-1,_=t.length,v=se(o-l,0),x=h(v+_),w=!r;++i<v;)x[i]=e[i];for(var C=i;++c<_;)x[C+c]=t[c];for(;++a<l;)(w||i<o)&&(x[C+n[a]]=e[i++]);return x}function Pe(e,t){var n=-1,r=e.length;for(t||(t=h(r));++n<r;)t[n]=e[n];return t}function dt(e,t,n,r){var i=!n;n||(n={});for(var o=-1,a=t.length;++o<a;){var l=t[o],c=r?r(n[l],e[l],l,n,e):s;c===s&&(c=e[l]),i?At(n,l,c):ir(n,l,c)}return n}function Jf(e,t){return dt(e,uu(e),t)}function Qf(e,t){return dt(e,ls(e),t)}function Kr(e,t){return function(n,r){var i=O(n)?tl:xf,o=t?t():{};return i(n,e,A(r,2),o)}}function Dn(e){return F(function(t,n){var r=-1,i=n.length,o=i>1?n[i-1]:s,a=i>2?n[2]:s;for(o=e.length>3&&typeof o=="function"?(i--,o):s,a&&Se(n[0],n[1],a)&&(o=i<3?s:o,i=1),t=H(t);++r<i;){var l=n[r];l&&e(t,l,r,o)}return t})}function Qo(e,t){return function(n,r){if(n==null)return n;if(!Fe(n))return e(n,r);for(var i=n.length,o=t?i:-1,a=H(n);(t?o--:++o<i)&&r(a[o],o,a)!==!1;);return n}}function Vo(e){return function(t,n,r){for(var i=-1,o=H(t),a=r(t),l=a.length;l--;){var c=a[e?l:++i];if(n(o[c],c,o)===!1)break}return t}}function Vf(e,t,n){var r=t&ae,i=lr(e);function o(){var a=this&&this!==pe&&this instanceof o?i:e;return a.apply(r?n:this,arguments)}return o}function jo(e){return function(t){t=$(t);var n=On(t)?tt(t):s,r=n?n[0]:t.charAt(0),i=n?Xt(n,1).join(""):t.slice(1);return r[e]()+i}}function zn(e){return function(t){return Ci(Qs(Js(t).replace($a,"")),e,"")}}function lr(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=Un(e.prototype),r=e.apply(n,t);return Q(r)?r:n}}function jf(e,t,n){var r=lr(e);function i(){for(var o=arguments.length,a=h(o),l=o,c=Nn(i);l--;)a[l]=arguments[l];var _=o<3&&a[0]!==c&&a[o-1]!==c?[]:qt(a,c);if(o-=_.length,o<n)return is(e,t,Yr,i.placeholder,s,a,_,s,s,n-o);var v=this&&this!==pe&&this instanceof i?r:e;return ze(v,this,a)}return i}function es(e){return function(t,n,r){var i=H(t);if(!Fe(t)){var o=A(n,3);t=fe(t),n=function(l){return o(i[l],l,i)}}var a=e(t,n,r);return a>-1?i[o?t[a]:a]:s}}function ts(e){return Tt(function(t){var n=t.length,r=n,i=Xe.prototype.thru;for(e&&t.reverse();r--;){var o=t[r];if(typeof o!="function")throw new Ze(he);if(i&&!a&&Qr(o)=="wrapper")var a=new Xe([],!0)}for(r=a?r:n;++r<n;){o=t[r];var l=Qr(o),c=l=="wrapper"?ru(o):s;c&&su(c[0])&&c[1]==(Ie|Re|Ue|B)&&!c[4].length&&c[9]==1?a=a[Qr(c[0])].apply(a,c[3]):a=o.length==1&&su(o)?a[l]():a.thru(o)}return function(){var _=arguments,v=_[0];if(a&&_.length==1&&O(v))return a.plant(v).value();for(var x=0,w=n?t[x].apply(this,_):v;++x<n;)w=t[x].call(this,w);return w}})}function Yr(e,t,n,r,i,o,a,l,c,_){var v=t&Ie,x=t&ae,w=t&K,C=t&(Re|at),E=t&N,P=w?s:lr(e);function T(){for(var W=arguments.length,D=h(W),Ge=W;Ge--;)D[Ge]=arguments[Ge];if(C)var Ae=Nn(T),qe=fl(D,Ae);if(r&&(D=Xo(D,r,i,C)),o&&(D=Jo(D,o,a,C)),W-=qe,C&&W<_){var te=qt(D,Ae);return is(e,t,Yr,T.placeholder,n,D,te,l,c,_-W)}var it=x?n:this,Ot=w?it[e]:e;return W=D.length,l?D=xc(D,l):E&&W>1&&D.reverse(),v&&c<W&&(D.length=c),this&&this!==pe&&this instanceof T&&(Ot=P||lr(Ot)),Ot.apply(it,D)}return T}function ns(e,t){return function(n,r){return Tf(n,e,t(r),{})}}function Zr(e,t){return function(n,r){var i;if(n===s&&r===s)return t;if(n!==s&&(i=n),r!==s){if(i===s)return r;typeof n=="string"||typeof r=="string"?(n=$e(n),r=$e(r)):(n=$o(n),r=$o(r)),i=e(n,r)}return i}}function ji(e){return Tt(function(t){return t=X(t,Ne(A())),F(function(n){var r=this;return e(t,function(i){return ze(i,r,n)})})})}function Xr(e,t){t=t===s?" ":$e(t);var n=t.length;if(n<2)return n?Ki(t,e):t;var r=Ki(t,Wr(e/Mn(t)));return On(t)?Xt(tt(r),0,e).join(""):r.slice(0,e)}function ec(e,t,n,r){var i=t&ae,o=lr(e);function a(){for(var l=-1,c=arguments.length,_=-1,v=r.length,x=h(v+c),w=this&&this!==pe&&this instanceof a?o:e;++_<v;)x[_]=r[_];for(;c--;)x[_++]=arguments[++l];return ze(w,i?n:this,x)}return a}function rs(e){return function(t,n,r){return r&&typeof r!="number"&&Se(t,n,r)&&(n=r=s),t=Lt(t),n===s?(n=t,t=0):n=Lt(n),r=r===s?t<n?1:-1:Lt(r),zf(t,n,r,e)}}function Jr(e){return function(t,n){return typeof t=="string"&&typeof n=="string"||(t=je(t),n=je(n)),e(t,n)}}function is(e,t,n,r,i,o,a,l,c,_){var v=t&Re,x=v?a:s,w=v?s:a,C=v?o:s,E=v?s:o;t|=v?Ue:Wt,t&=~(v?Wt:Ue),t&Ft||(t&=-4);var P=[e,t,i,C,x,E,w,l,c,_],T=n.apply(s,P);return su(e)&&_s(T,P),T.placeholder=r,vs(T,e,t)}function eu(e){var t=oe[e];return function(n,r){if(n=je(n),r=r==null?0:we(M(r),292),r&&vo(n)){var i=($(n)+"e").split("e"),o=t(i[0]+"e"+(+i[1]+r));return i=($(o)+"e").split("e"),+(i[0]+"e"+(+i[1]-r))}return t(n)}}var tc=Wn&&1/Ar(new Wn([,-0]))[1]==le?function(e){return new Wn(e)}:yu;function us(e){return function(t){var n=be(t);return n==De?Li(t):n==Me?vl(t):ll(t,e(t))}}function Et(e,t,n,r,i,o,a,l){var c=t&K;if(!c&&typeof e!="function")throw new Ze(he);var _=r?r.length:0;if(_||(t&=-97,r=i=s),a=a===s?a:se(M(a),0),l=l===s?l:M(l),_-=i?i.length:0,t&Wt){var v=r,x=i;r=i=s}var w=c?s:ru(e),C=[e,t,n,r,i,v,x,o,a,l];if(w&&_c(C,w),e=C[0],t=C[1],n=C[2],r=C[3],i=C[4],l=C[9]=C[9]===s?c?0:e.length:se(C[9]-_,0),!l&&t&(Re|at)&&(t&=-25),!t||t==ae)var E=Vf(e,t,n);else t==Re||t==at?E=jf(e,t,l):(t==Ue||t==(ae|Ue))&&!i.length?E=ec(e,t,n,r):E=Yr.apply(s,C);var P=w?zo:_s;return vs(P(E,C),e,t)}function os(e,t,n,r){return e===s||rt(e,Fn[n])&&!q.call(r,n)?t:e}function ss(e,t,n,r,i,o){return Q(e)&&Q(t)&&(o.set(t,e),Gr(e,t,s,ss,o),o.delete(t)),e}function nc(e){return hr(e)?s:e}function as(e,t,n,r,i,o){var a=n&st,l=e.length,c=t.length;if(l!=c&&!(a&&c>l))return!1;var _=o.get(e),v=o.get(t);if(_&&v)return _==t&&v==e;var x=-1,w=!0,C=n&wt?new dn:s;for(o.set(e,t),o.set(t,e);++x<l;){var E=e[x],P=t[x];if(r)var T=a?r(P,E,x,t,e,o):r(E,P,x,e,t,o);if(T!==s){if(T)continue;w=!1;break}if(C){if(!Si(t,function(W,D){if(!Vn(C,D)&&(E===W||i(E,W,n,r,o)))return C.push(D)})){w=!1;break}}else if(!(E===P||i(E,P,n,r,o))){w=!1;break}}return o.delete(e),o.delete(t),w}function rc(e,t,n,r,i,o,a){switch(n){case ft:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case bt:return!(e.byteLength!=t.byteLength||!o(new Or(e),new Or(t)));case rn:case un:case on:return rt(+e,+t);case yn:return e.name==t.name&&e.message==t.message;case Dt:case zt:return e==t+"";case De:var l=Li;case Me:var c=r&st;if(l||(l=Ar),e.size!=t.size&&!c)return!1;var _=a.get(e);if(_)return _==t;r|=wt,a.set(e,t);var v=as(l(e),l(t),r,i,o,a);return a.delete(e),v;case Sn:if(rr)return rr.call(e)==rr.call(t)}return!1}function ic(e,t,n,r,i,o){var a=n&st,l=tu(e),c=l.length,_=tu(t),v=_.length;if(c!=v&&!a)return!1;for(var x=c;x--;){var w=l[x];if(!(a?w in t:q.call(t,w)))return!1}var C=o.get(e),E=o.get(t);if(C&&E)return C==t&&E==e;var P=!0;o.set(e,t),o.set(t,e);for(var T=a;++x<c;){w=l[x];var W=e[w],D=t[w];if(r)var Ge=a?r(D,W,w,t,e,o):r(W,D,w,e,t,o);if(!(Ge===s?W===D||i(W,D,n,r,o):Ge)){P=!1;break}T||(T=w=="constructor")}if(P&&!T){var Ae=e.constructor,qe=t.constructor;Ae!=qe&&"constructor"in e&&"constructor"in t&&!(typeof Ae=="function"&&Ae instanceof Ae&&typeof qe=="function"&&qe instanceof qe)&&(P=!1)}return o.delete(e),o.delete(t),P}function Tt(e){return lu(ps(e,s,Cs),e+"")}function tu(e){return Ro(e,fe,uu)}function nu(e){return Ro(e,We,ls)}var ru=Ur?function(e){return Ur.get(e)}:yu;function Qr(e){for(var t=e.name+"",n=Bn[t],r=q.call(Bn,t)?n.length:0;r--;){var i=n[r],o=i.func;if(o==null||o==e)return i.name}return t}function Nn(e){var t=q.call(u,"placeholder")?u:e;return t.placeholder}function A(){var e=u.iteratee||wu;return e=e===wu?Oo:e,arguments.length?e(arguments[0],arguments[1]):e}function Vr(e,t){var n=e.__data__;return hc(t)?n[typeof t=="string"?"string":"hash"]:n.map}function iu(e){for(var t=fe(e),n=t.length;n--;){var r=t[n],i=e[r];t[n]=[r,i,hs(i)]}return t}function _n(e,t){var n=pl(e,t);return Lo(n)?n:s}function uc(e){var t=q.call(e,cn),n=e[cn];try{e[cn]=s;var r=!0}catch{}var i=Ir.call(e);return r&&(t?e[cn]=n:delete e[cn]),i}var uu=Mi?function(e){return e==null?[]:(e=H(e),kt(Mi(e),function(t){return go.call(e,t)}))}:Cu,ls=Mi?function(e){for(var t=[];e;)Gt(t,uu(e)),e=Mr(e);return t}:Cu,be=Ce;(Pi&&be(new Pi(new ArrayBuffer(1)))!=ft||er&&be(new er)!=De||Fi&&be(Fi.resolve())!=Kn||Wn&&be(new Wn)!=Me||tr&&be(new tr)!=Nt)&&(be=function(e){var t=Ce(e),n=t==et?e.constructor:s,r=n?vn(n):"";if(r)switch(r){case Nl:return ft;case $l:return De;case kl:return Kn;case Gl:return Me;case ql:return Nt}return t});function oc(e,t,n){for(var r=-1,i=n.length;++r<i;){var o=n[r],a=o.size;switch(o.type){case"drop":e+=a;break;case"dropRight":t-=a;break;case"take":t=we(t,e+a);break;case"takeRight":e=se(e,t-a);break}}return{start:e,end:t}}function sc(e){var t=e.match(ha);return t?t[1].split(da):[]}function fs(e,t,n){t=Zt(t,e);for(var r=-1,i=t.length,o=!1;++r<i;){var a=pt(t[r]);if(!(o=e!=null&&n(e,a)))break;e=e[a]}return o||++r!=i?o:(i=e==null?0:e.length,!!i&&ui(i)&&Rt(a,i)&&(O(e)||mn(e)))}function ac(e){var t=e.length,n=new e.constructor(t);return t&&typeof e[0]=="string"&&q.call(e,"index")&&(n.index=e.index,n.input=e.input),n}function cs(e){return typeof e.constructor=="function"&&!fr(e)?Un(Mr(e)):{}}function lc(e,t,n){var r=e.constructor;switch(t){case bt:return Vi(e);case rn:case un:return new r(+e);case ft:return Kf(e,n);case sn:case yt:case An:case En:case $t:case Yn:case p:case m:case R:return Yo(e,n);case De:return new r;case on:case zt:return new r(e);case Dt:return Yf(e);case Me:return new r;case Sn:return Zf(e)}}function fc(e,t){var n=t.length;if(!n)return e;var r=n-1;return t[r]=(n>1?"& ":"")+t[r],t=t.join(n>2?", ":" "),e.replace(ca,`{
/* [wrapped with `+t+`] */
`)}function cc(e){return O(e)||mn(e)||!!(_o&&e&&e[_o])}function Rt(e,t){var n=typeof e;return t=t??G,!!t&&(n=="number"||n!="symbol"&&ya.test(e))&&e>-1&&e%1==0&&e<t}function Se(e,t,n){if(!Q(n))return!1;var r=typeof t;return(r=="number"?Fe(n)&&Rt(t,n.length):r=="string"&&t in n)?rt(n[t],e):!1}function ou(e,t){if(O(e))return!1;var n=typeof e;return n=="number"||n=="symbol"||n=="boolean"||e==null||ke(e)?!0:ln.test(e)||!ct.test(e)||t!=null&&e in H(t)}function hc(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}function su(e){var t=Qr(e),n=u[t];if(typeof n!="function"||!(t in U.prototype))return!1;if(e===n)return!0;var r=ru(n);return!!r&&e===r[0]}function dc(e){return!!co&&co in e}var pc=Tr?It:Su;function fr(e){var t=e&&e.constructor,n=typeof t=="function"&&t.prototype||Fn;return e===n}function hs(e){return e===e&&!Q(e)}function ds(e,t){return function(n){return n==null?!1:n[e]===t&&(t!==s||e in H(n))}}function gc(e){var t=ri(e,function(r){return n.size===Pt&&n.clear(),r}),n=t.cache;return t}function _c(e,t){var n=e[1],r=t[1],i=n|r,o=i<(ae|K|Ie),a=r==Ie&&n==Re||r==Ie&&n==B&&e[7].length<=t[8]||r==(Ie|B)&&t[7].length<=t[8]&&n==Re;if(!(o||a))return e;r&ae&&(e[2]=t[2],i|=n&ae?0:Ft);var l=t[3];if(l){var c=e[3];e[3]=c?Xo(c,l,t[4]):l,e[4]=c?qt(e[3],k):t[4]}return l=t[5],l&&(c=e[5],e[5]=c?Jo(c,l,t[6]):l,e[6]=c?qt(e[5],k):t[6]),l=t[7],l&&(e[7]=l),r&Ie&&(e[8]=e[8]==null?t[8]:we(e[8],t[8])),e[9]==null&&(e[9]=t[9]),e[0]=t[0],e[1]=i,e}function vc(e){var t=[];if(e!=null)for(var n in H(e))t.push(n);return t}function mc(e){return Ir.call(e)}function ps(e,t,n){return t=se(t===s?e.length-1:t,0),function(){for(var r=arguments,i=-1,o=se(r.length-t,0),a=h(o);++i<o;)a[i]=r[t+i];i=-1;for(var l=h(t+1);++i<t;)l[i]=r[i];return l[t]=n(a),ze(e,this,l)}}function gs(e,t){return t.length<2?e:gn(e,Qe(t,0,-1))}function xc(e,t){for(var n=e.length,r=we(t.length,n),i=Pe(e);r--;){var o=t[r];e[r]=Rt(o,n)?i[o]:s}return e}function au(e,t){if(!(t==="constructor"&&typeof e[t]=="function")&&t!="__proto__")return e[t]}var _s=ms(zo),cr=Pl||function(e,t){return pe.setTimeout(e,t)},lu=ms(kf);function vs(e,t,n){var r=t+"";return lu(e,fc(r,wc(sc(r),n)))}function ms(e){var t=0,n=0;return function(){var r=Ul(),i=Bt-(r-n);if(n=r,i>0){if(++t>=jt)return arguments[0]}else t=0;return e.apply(s,arguments)}}function jr(e,t){var n=-1,r=e.length,i=r-1;for(t=t===s?r:t;++n<t;){var o=Hi(n,i),a=e[o];e[o]=e[n],e[n]=a}return e.length=t,e}var xs=gc(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(di,function(n,r,i,o){t.push(i?o.replace(_a,"$1"):r||n)}),t});function pt(e){if(typeof e=="string"||ke(e))return e;var t=e+"";return t=="0"&&1/e==-le?"-0":t}function vn(e){if(e!=null){try{return Rr.call(e)}catch{}try{return e+""}catch{}}return""}function wc(e,t){return Ye(tn,function(n){var r="_."+n[0];t&n[1]&&!Cr(e,r)&&e.push(r)}),e.sort()}function ws(e){if(e instanceof U)return e.clone();var t=new Xe(e.__wrapped__,e.__chain__);return t.__actions__=Pe(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}function bc(e,t,n){(n?Se(e,t,n):t===s)?t=1:t=se(M(t),0);var r=e==null?0:e.length;if(!r||t<1)return[];for(var i=0,o=0,a=h(Wr(r/t));i<r;)a[o++]=Qe(e,i,i+=t);return a}function yc(e){for(var t=-1,n=e==null?0:e.length,r=0,i=[];++t<n;){var o=e[t];o&&(i[r++]=o)}return i}function Cc(){var e=arguments.length;if(!e)return[];for(var t=h(e-1),n=arguments[0],r=e;r--;)t[r-1]=arguments[r];return Gt(O(n)?Pe(n):[n],ge(t,1))}var Sc=F(function(e,t){return ee(e)?ur(e,ge(t,1,ee,!0)):[]}),Ac=F(function(e,t){var n=Ve(t);return ee(n)&&(n=s),ee(e)?ur(e,ge(t,1,ee,!0),A(n,2)):[]}),Ec=F(function(e,t){var n=Ve(t);return ee(n)&&(n=s),ee(e)?ur(e,ge(t,1,ee,!0),s,n):[]});function Tc(e,t,n){var r=e==null?0:e.length;return r?(t=n||t===s?1:M(t),Qe(e,t<0?0:t,r)):[]}function Rc(e,t,n){var r=e==null?0:e.length;return r?(t=n||t===s?1:M(t),t=r-t,Qe(e,0,t<0?0:t)):[]}function Ic(e,t){return e&&e.length?Hr(e,A(t,3),!0,!0):[]}function Lc(e,t){return e&&e.length?Hr(e,A(t,3),!0):[]}function Oc(e,t,n,r){var i=e==null?0:e.length;return i?(n&&typeof n!="number"&&Se(e,t,n)&&(n=0,r=i),Cf(e,t,n,r)):[]}function bs(e,t,n){var r=e==null?0:e.length;if(!r)return-1;var i=n==null?0:M(n);return i<0&&(i=se(r+i,0)),Sr(e,A(t,3),i)}function ys(e,t,n){var r=e==null?0:e.length;if(!r)return-1;var i=r-1;return n!==s&&(i=M(n),i=n<0?se(r+i,0):we(i,r-1)),Sr(e,A(t,3),i,!0)}function Cs(e){var t=e==null?0:e.length;return t?ge(e,1):[]}function Mc(e){var t=e==null?0:e.length;return t?ge(e,le):[]}function Pc(e,t){var n=e==null?0:e.length;return n?(t=t===s?1:M(t),ge(e,t)):[]}function Fc(e){for(var t=-1,n=e==null?0:e.length,r={};++t<n;){var i=e[t];r[i[0]]=i[1]}return r}function Ss(e){return e&&e.length?e[0]:s}function Wc(e,t,n){var r=e==null?0:e.length;if(!r)return-1;var i=n==null?0:M(n);return i<0&&(i=se(r+i,0)),Ln(e,t,i)}function Bc(e){var t=e==null?0:e.length;return t?Qe(e,0,-1):[]}var Uc=F(function(e){var t=X(e,Ji);return t.length&&t[0]===e[0]?Ni(t):[]}),Dc=F(function(e){var t=Ve(e),n=X(e,Ji);return t===Ve(n)?t=s:n.pop(),n.length&&n[0]===e[0]?Ni(n,A(t,2)):[]}),zc=F(function(e){var t=Ve(e),n=X(e,Ji);return t=typeof t=="function"?t:s,t&&n.pop(),n.length&&n[0]===e[0]?Ni(n,s,t):[]});function Nc(e,t){return e==null?"":Wl.call(e,t)}function Ve(e){var t=e==null?0:e.length;return t?e[t-1]:s}function $c(e,t,n){var r=e==null?0:e.length;if(!r)return-1;var i=r;return n!==s&&(i=M(n),i=i<0?se(r+i,0):we(i,r-1)),t===t?xl(e,t,i):Sr(e,ro,i,!0)}function kc(e,t){return e&&e.length?Wo(e,M(t)):s}var Gc=F(As);function As(e,t){return e&&e.length&&t&&t.length?qi(e,t):e}function qc(e,t,n){return e&&e.length&&t&&t.length?qi(e,t,A(n,2)):e}function Hc(e,t,n){return e&&e.length&&t&&t.length?qi(e,t,s,n):e}var Kc=Tt(function(e,t){var n=e==null?0:e.length,r=Bi(e,t);return Do(e,X(t,function(i){return Rt(i,n)?+i:i}).sort(Zo)),r});function Yc(e,t){var n=[];if(!(e&&e.length))return n;var r=-1,i=[],o=e.length;for(t=A(t,3);++r<o;){var a=e[r];t(a,r,e)&&(n.push(a),i.push(r))}return Do(e,i),n}function fu(e){return e==null?e:zl.call(e)}function Zc(e,t,n){var r=e==null?0:e.length;return r?(n&&typeof n!="number"&&Se(e,t,n)?(t=0,n=r):(t=t==null?0:M(t),n=n===s?r:M(n)),Qe(e,t,n)):[]}function Xc(e,t){return qr(e,t)}function Jc(e,t,n){return Yi(e,t,A(n,2))}function Qc(e,t){var n=e==null?0:e.length;if(n){var r=qr(e,t);if(r<n&&rt(e[r],t))return r}return-1}function Vc(e,t){return qr(e,t,!0)}function jc(e,t,n){return Yi(e,t,A(n,2),!0)}function eh(e,t){var n=e==null?0:e.length;if(n){var r=qr(e,t,!0)-1;if(rt(e[r],t))return r}return-1}function th(e){return e&&e.length?No(e):[]}function nh(e,t){return e&&e.length?No(e,A(t,2)):[]}function rh(e){var t=e==null?0:e.length;return t?Qe(e,1,t):[]}function ih(e,t,n){return e&&e.length?(t=n||t===s?1:M(t),Qe(e,0,t<0?0:t)):[]}function uh(e,t,n){var r=e==null?0:e.length;return r?(t=n||t===s?1:M(t),t=r-t,Qe(e,t<0?0:t,r)):[]}function oh(e,t){return e&&e.length?Hr(e,A(t,3),!1,!0):[]}function sh(e,t){return e&&e.length?Hr(e,A(t,3)):[]}var ah=F(function(e){return Yt(ge(e,1,ee,!0))}),lh=F(function(e){var t=Ve(e);return ee(t)&&(t=s),Yt(ge(e,1,ee,!0),A(t,2))}),fh=F(function(e){var t=Ve(e);return t=typeof t=="function"?t:s,Yt(ge(e,1,ee,!0),s,t)});function ch(e){return e&&e.length?Yt(e):[]}function hh(e,t){return e&&e.length?Yt(e,A(t,2)):[]}function dh(e,t){return t=typeof t=="function"?t:s,e&&e.length?Yt(e,s,t):[]}function cu(e){if(!(e&&e.length))return[];var t=0;return e=kt(e,function(n){if(ee(n))return t=se(n.length,t),!0}),Ri(t,function(n){return X(e,Ai(n))})}function Es(e,t){if(!(e&&e.length))return[];var n=cu(e);return t==null?n:X(n,function(r){return ze(t,s,r)})}var ph=F(function(e,t){return ee(e)?ur(e,t):[]}),gh=F(function(e){return Xi(kt(e,ee))}),_h=F(function(e){var t=Ve(e);return ee(t)&&(t=s),Xi(kt(e,ee),A(t,2))}),vh=F(function(e){var t=Ve(e);return t=typeof t=="function"?t:s,Xi(kt(e,ee),s,t)}),mh=F(cu);function xh(e,t){return qo(e||[],t||[],ir)}function wh(e,t){return qo(e||[],t||[],ar)}var bh=F(function(e){var t=e.length,n=t>1?e[t-1]:s;return n=typeof n=="function"?(e.pop(),n):s,Es(e,n)});function Ts(e){var t=u(e);return t.__chain__=!0,t}function yh(e,t){return t(e),e}function ei(e,t){return t(e)}var Ch=Tt(function(e){var t=e.length,n=t?e[0]:0,r=this.__wrapped__,i=function(o){return Bi(o,e)};return t>1||this.__actions__.length||!(r instanceof U)||!Rt(n)?this.thru(i):(r=r.slice(n,+n+(t?1:0)),r.__actions__.push({func:ei,args:[i],thisArg:s}),new Xe(r,this.__chain__).thru(function(o){return t&&!o.length&&o.push(s),o}))});function Sh(){return Ts(this)}function Ah(){return new Xe(this.value(),this.__chain__)}function Eh(){this.__values__===s&&(this.__values__=$s(this.value()));var e=this.__index__>=this.__values__.length,t=e?s:this.__values__[this.__index__++];return{done:e,value:t}}function Th(){return this}function Rh(e){for(var t,n=this;n instanceof zr;){var r=ws(n);r.__index__=0,r.__values__=s,t?i.__wrapped__=r:t=r;var i=r;n=n.__wrapped__}return i.__wrapped__=e,t}function Ih(){var e=this.__wrapped__;if(e instanceof U){var t=e;return this.__actions__.length&&(t=new U(this)),t=t.reverse(),t.__actions__.push({func:ei,args:[fu],thisArg:s}),new Xe(t,this.__chain__)}return this.thru(fu)}function Lh(){return Go(this.__wrapped__,this.__actions__)}var Oh=Kr(function(e,t,n){q.call(e,n)?++e[n]:At(e,n,1)});function Mh(e,t,n){var r=O(e)?to:yf;return n&&Se(e,t,n)&&(t=s),r(e,A(t,3))}function Ph(e,t){var n=O(e)?kt:Eo;return n(e,A(t,3))}var Fh=es(bs),Wh=es(ys);function Bh(e,t){return ge(ti(e,t),1)}function Uh(e,t){return ge(ti(e,t),le)}function Dh(e,t,n){return n=n===s?1:M(n),ge(ti(e,t),n)}function Rs(e,t){var n=O(e)?Ye:Kt;return n(e,A(t,3))}function Is(e,t){var n=O(e)?nl:Ao;return n(e,A(t,3))}var zh=Kr(function(e,t,n){q.call(e,n)?e[n].push(t):At(e,n,[t])});function Nh(e,t,n,r){e=Fe(e)?e:kn(e),n=n&&!r?M(n):0;var i=e.length;return n<0&&(n=se(i+n,0)),oi(e)?n<=i&&e.indexOf(t,n)>-1:!!i&&Ln(e,t,n)>-1}var $h=F(function(e,t,n){var r=-1,i=typeof t=="function",o=Fe(e)?h(e.length):[];return Kt(e,function(a){o[++r]=i?ze(t,a,n):or(a,t,n)}),o}),kh=Kr(function(e,t,n){At(e,n,t)});function ti(e,t){var n=O(e)?X:Mo;return n(e,A(t,3))}function Gh(e,t,n,r){return e==null?[]:(O(t)||(t=t==null?[]:[t]),n=r?s:n,O(n)||(n=n==null?[]:[n]),Bo(e,t,n))}var qh=Kr(function(e,t,n){e[n?0:1].push(t)},function(){return[[],[]]});function Hh(e,t,n){var r=O(e)?Ci:uo,i=arguments.length<3;return r(e,A(t,4),n,i,Kt)}function Kh(e,t,n){var r=O(e)?rl:uo,i=arguments.length<3;return r(e,A(t,4),n,i,Ao)}function Yh(e,t){var n=O(e)?kt:Eo;return n(e,ii(A(t,3)))}function Zh(e){var t=O(e)?bo:Nf;return t(e)}function Xh(e,t,n){(n?Se(e,t,n):t===s)?t=1:t=M(t);var r=O(e)?vf:$f;return r(e,t)}function Jh(e){var t=O(e)?mf:Gf;return t(e)}function Qh(e){if(e==null)return 0;if(Fe(e))return oi(e)?Mn(e):e.length;var t=be(e);return t==De||t==Me?e.size:ki(e).length}function Vh(e,t,n){var r=O(e)?Si:qf;return n&&Se(e,t,n)&&(t=s),r(e,A(t,3))}var jh=F(function(e,t){if(e==null)return[];var n=t.length;return n>1&&Se(e,t[0],t[1])?t=[]:n>2&&Se(t[0],t[1],t[2])&&(t=[t[0]]),Bo(e,ge(t,1),[])}),ni=Ml||function(){return pe.Date.now()};function ed(e,t){if(typeof t!="function")throw new Ze(he);return e=M(e),function(){if(--e<1)return t.apply(this,arguments)}}function Ls(e,t,n){return t=n?s:t,t=e&&t==null?e.length:t,Et(e,Ie,s,s,s,s,t)}function Os(e,t){var n;if(typeof t!="function")throw new Ze(he);return e=M(e),function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=s),n}}var hu=F(function(e,t,n){var r=ae;if(n.length){var i=qt(n,Nn(hu));r|=Ue}return Et(e,r,t,n,i)}),Ms=F(function(e,t,n){var r=ae|K;if(n.length){var i=qt(n,Nn(Ms));r|=Ue}return Et(t,r,e,n,i)});function Ps(e,t,n){t=n?s:t;var r=Et(e,Re,s,s,s,s,s,t);return r.placeholder=Ps.placeholder,r}function Fs(e,t,n){t=n?s:t;var r=Et(e,at,s,s,s,s,s,t);return r.placeholder=Fs.placeholder,r}function Ws(e,t,n){var r,i,o,a,l,c,_=0,v=!1,x=!1,w=!0;if(typeof e!="function")throw new Ze(he);t=je(t)||0,Q(n)&&(v=!!n.leading,x="maxWait"in n,o=x?se(je(n.maxWait)||0,t):o,w="trailing"in n?!!n.trailing:w);function C(te){var it=r,Ot=i;return r=i=s,_=te,a=e.apply(Ot,it),a}function E(te){return _=te,l=cr(W,t),v?C(te):a}function P(te){var it=te-c,Ot=te-_,ea=t-it;return x?we(ea,o-Ot):ea}function T(te){var it=te-c,Ot=te-_;return c===s||it>=t||it<0||x&&Ot>=o}function W(){var te=ni();if(T(te))return D(te);l=cr(W,P(te))}function D(te){return l=s,w&&r?C(te):(r=i=s,a)}function Ge(){l!==s&&Ho(l),_=0,r=c=i=l=s}function Ae(){return l===s?a:D(ni())}function qe(){var te=ni(),it=T(te);if(r=arguments,i=this,c=te,it){if(l===s)return E(c);if(x)return Ho(l),l=cr(W,t),C(c)}return l===s&&(l=cr(W,t)),a}return qe.cancel=Ge,qe.flush=Ae,qe}var td=F(function(e,t){return So(e,1,t)}),nd=F(function(e,t,n){return So(e,je(t)||0,n)});function rd(e){return Et(e,N)}function ri(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new Ze(he);var n=function(){var r=arguments,i=t?t.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=e.apply(this,r);return n.cache=o.set(i,a)||o,a};return n.cache=new(ri.Cache||St),n}ri.Cache=St;function ii(e){if(typeof e!="function")throw new Ze(he);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}function id(e){return Os(2,e)}var ud=Hf(function(e,t){t=t.length==1&&O(t[0])?X(t[0],Ne(A())):X(ge(t,1),Ne(A()));var n=t.length;return F(function(r){for(var i=-1,o=we(r.length,n);++i<o;)r[i]=t[i].call(this,r[i]);return ze(e,this,r)})}),du=F(function(e,t){var n=qt(t,Nn(du));return Et(e,Ue,s,t,n)}),Bs=F(function(e,t){var n=qt(t,Nn(Bs));return Et(e,Wt,s,t,n)}),od=Tt(function(e,t){return Et(e,B,s,s,s,t)});function sd(e,t){if(typeof e!="function")throw new Ze(he);return t=t===s?t:M(t),F(e,t)}function ad(e,t){if(typeof e!="function")throw new Ze(he);return t=t==null?0:se(M(t),0),F(function(n){var r=n[t],i=Xt(n,0,t);return r&&Gt(i,r),ze(e,this,i)})}function ld(e,t,n){var r=!0,i=!0;if(typeof e!="function")throw new Ze(he);return Q(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),Ws(e,t,{leading:r,maxWait:t,trailing:i})}function fd(e){return Ls(e,1)}function cd(e,t){return du(Qi(t),e)}function hd(){if(!arguments.length)return[];var e=arguments[0];return O(e)?e:[e]}function dd(e){return Je(e,He)}function pd(e,t){return t=typeof t=="function"?t:s,Je(e,He,t)}function gd(e){return Je(e,Ee|He)}function _d(e,t){return t=typeof t=="function"?t:s,Je(e,Ee|He,t)}function vd(e,t){return t==null||Co(e,t,fe(t))}function rt(e,t){return e===t||e!==e&&t!==t}var md=Jr(zi),xd=Jr(function(e,t){return e>=t}),mn=Io((function(){return arguments})())?Io:function(e){return j(e)&&q.call(e,"callee")&&!go.call(e,"callee")},O=h.isArray,wd=Xu?Ne(Xu):Rf;function Fe(e){return e!=null&&ui(e.length)&&!It(e)}function ee(e){return j(e)&&Fe(e)}function bd(e){return e===!0||e===!1||j(e)&&Ce(e)==rn}var Jt=Fl||Su,yd=Ju?Ne(Ju):If;function Cd(e){return j(e)&&e.nodeType===1&&!hr(e)}function Sd(e){if(e==null)return!0;if(Fe(e)&&(O(e)||typeof e=="string"||typeof e.splice=="function"||Jt(e)||$n(e)||mn(e)))return!e.length;var t=be(e);if(t==De||t==Me)return!e.size;if(fr(e))return!ki(e).length;for(var n in e)if(q.call(e,n))return!1;return!0}function Ad(e,t){return sr(e,t)}function Ed(e,t,n){n=typeof n=="function"?n:s;var r=n?n(e,t):s;return r===s?sr(e,t,s,n):!!r}function pu(e){if(!j(e))return!1;var t=Ce(e);return t==yn||t==gr||typeof e.message=="string"&&typeof e.name=="string"&&!hr(e)}function Td(e){return typeof e=="number"&&vo(e)}function It(e){if(!Q(e))return!1;var t=Ce(e);return t==Cn||t==Hn||t==nn||t==_r}function Us(e){return typeof e=="number"&&e==M(e)}function ui(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=G}function Q(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}function j(e){return e!=null&&typeof e=="object"}var Ds=Qu?Ne(Qu):Of;function Rd(e,t){return e===t||$i(e,t,iu(t))}function Id(e,t,n){return n=typeof n=="function"?n:s,$i(e,t,iu(t),n)}function Ld(e){return zs(e)&&e!=+e}function Od(e){if(pc(e))throw new L(wn);return Lo(e)}function Md(e){return e===null}function Pd(e){return e==null}function zs(e){return typeof e=="number"||j(e)&&Ce(e)==on}function hr(e){if(!j(e)||Ce(e)!=et)return!1;var t=Mr(e);if(t===null)return!0;var n=q.call(t,"constructor")&&t.constructor;return typeof n=="function"&&n instanceof n&&Rr.call(n)==Rl}var gu=Vu?Ne(Vu):Mf;function Fd(e){return Us(e)&&e>=-G&&e<=G}var Ns=ju?Ne(ju):Pf;function oi(e){return typeof e=="string"||!O(e)&&j(e)&&Ce(e)==zt}function ke(e){return typeof e=="symbol"||j(e)&&Ce(e)==Sn}var $n=eo?Ne(eo):Ff;function Wd(e){return e===s}function Bd(e){return j(e)&&be(e)==Nt}function Ud(e){return j(e)&&Ce(e)==hi}var Dd=Jr(Gi),zd=Jr(function(e,t){return e<=t});function $s(e){if(!e)return[];if(Fe(e))return oi(e)?tt(e):Pe(e);if(jn&&e[jn])return _l(e[jn]());var t=be(e),n=t==De?Li:t==Me?Ar:kn;return n(e)}function Lt(e){if(!e)return e===0?e:0;if(e=je(e),e===le||e===-le){var t=e<0?-1:1;return t*Le}return e===e?e:0}function M(e){var t=Lt(e),n=t%1;return t===t?n?t-n:t:0}function ks(e){return e?pn(M(e),0,Oe):0}function je(e){if(typeof e=="number")return e;if(ke(e))return ue;if(Q(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=Q(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=oo(e);var n=xa.test(e);return n||ba.test(e)?ja(e.slice(2),n?2:8):ma.test(e)?ue:+e}function Gs(e){return dt(e,We(e))}function Nd(e){return e?pn(M(e),-G,G):e===0?e:0}function $(e){return e==null?"":$e(e)}var $d=Dn(function(e,t){if(fr(t)||Fe(t)){dt(t,fe(t),e);return}for(var n in t)q.call(t,n)&&ir(e,n,t[n])}),qs=Dn(function(e,t){dt(t,We(t),e)}),si=Dn(function(e,t,n,r){dt(t,We(t),e,r)}),kd=Dn(function(e,t,n,r){dt(t,fe(t),e,r)}),Gd=Tt(Bi);function qd(e,t){var n=Un(e);return t==null?n:yo(n,t)}var Hd=F(function(e,t){e=H(e);var n=-1,r=t.length,i=r>2?t[2]:s;for(i&&Se(t[0],t[1],i)&&(r=1);++n<r;)for(var o=t[n],a=We(o),l=-1,c=a.length;++l<c;){var _=a[l],v=e[_];(v===s||rt(v,Fn[_])&&!q.call(e,_))&&(e[_]=o[_])}return e}),Kd=F(function(e){return e.push(s,ss),ze(Hs,s,e)});function Yd(e,t){return no(e,A(t,3),ht)}function Zd(e,t){return no(e,A(t,3),Di)}function Xd(e,t){return e==null?e:Ui(e,A(t,3),We)}function Jd(e,t){return e==null?e:To(e,A(t,3),We)}function Qd(e,t){return e&&ht(e,A(t,3))}function Vd(e,t){return e&&Di(e,A(t,3))}function jd(e){return e==null?[]:kr(e,fe(e))}function ep(e){return e==null?[]:kr(e,We(e))}function _u(e,t,n){var r=e==null?s:gn(e,t);return r===s?n:r}function tp(e,t){return e!=null&&fs(e,t,Sf)}function vu(e,t){return e!=null&&fs(e,t,Af)}var np=ns(function(e,t,n){t!=null&&typeof t.toString!="function"&&(t=Ir.call(t)),e[t]=n},xu(Be)),rp=ns(function(e,t,n){t!=null&&typeof t.toString!="function"&&(t=Ir.call(t)),q.call(e,t)?e[t].push(n):e[t]=[n]},A),ip=F(or);function fe(e){return Fe(e)?wo(e):ki(e)}function We(e){return Fe(e)?wo(e,!0):Wf(e)}function up(e,t){var n={};return t=A(t,3),ht(e,function(r,i,o){At(n,t(r,i,o),r)}),n}function op(e,t){var n={};return t=A(t,3),ht(e,function(r,i,o){At(n,i,t(r,i,o))}),n}var sp=Dn(function(e,t,n){Gr(e,t,n)}),Hs=Dn(function(e,t,n,r){Gr(e,t,n,r)}),ap=Tt(function(e,t){var n={};if(e==null)return n;var r=!1;t=X(t,function(o){return o=Zt(o,e),r||(r=o.length>1),o}),dt(e,nu(e),n),r&&(n=Je(n,Ee|Te|He,nc));for(var i=t.length;i--;)Zi(n,t[i]);return n});function lp(e,t){return Ks(e,ii(A(t)))}var fp=Tt(function(e,t){return e==null?{}:Uf(e,t)});function Ks(e,t){if(e==null)return{};var n=X(nu(e),function(r){return[r]});return t=A(t),Uo(e,n,function(r,i){return t(r,i[0])})}function cp(e,t,n){t=Zt(t,e);var r=-1,i=t.length;for(i||(i=1,e=s);++r<i;){var o=e==null?s:e[pt(t[r])];o===s&&(r=i,o=n),e=It(o)?o.call(e):o}return e}function hp(e,t,n){return e==null?e:ar(e,t,n)}function dp(e,t,n,r){return r=typeof r=="function"?r:s,e==null?e:ar(e,t,n,r)}var Ys=us(fe),Zs=us(We);function pp(e,t,n){var r=O(e),i=r||Jt(e)||$n(e);if(t=A(t,4),n==null){var o=e&&e.constructor;i?n=r?new o:[]:Q(e)?n=It(o)?Un(Mr(e)):{}:n={}}return(i?Ye:ht)(e,function(a,l,c){return t(n,a,l,c)}),n}function gp(e,t){return e==null?!0:Zi(e,t)}function _p(e,t,n){return e==null?e:ko(e,t,Qi(n))}function vp(e,t,n,r){return r=typeof r=="function"?r:s,e==null?e:ko(e,t,Qi(n),r)}function kn(e){return e==null?[]:Ii(e,fe(e))}function mp(e){return e==null?[]:Ii(e,We(e))}function xp(e,t,n){return n===s&&(n=t,t=s),n!==s&&(n=je(n),n=n===n?n:0),t!==s&&(t=je(t),t=t===t?t:0),pn(je(e),t,n)}function wp(e,t,n){return t=Lt(t),n===s?(n=t,t=0):n=Lt(n),e=je(e),Ef(e,t,n)}function bp(e,t,n){if(n&&typeof n!="boolean"&&Se(e,t,n)&&(t=n=s),n===s&&(typeof t=="boolean"?(n=t,t=s):typeof e=="boolean"&&(n=e,e=s)),e===s&&t===s?(e=0,t=1):(e=Lt(e),t===s?(t=e,e=0):t=Lt(t)),e>t){var r=e;e=t,t=r}if(n||e%1||t%1){var i=mo();return we(e+i*(t-e+Va("1e-"+((i+"").length-1))),t)}return Hi(e,t)}var yp=zn(function(e,t,n){return t=t.toLowerCase(),e+(n?Xs(t):t)});function Xs(e){return mu($(e).toLowerCase())}function Js(e){return e=$(e),e&&e.replace(Ca,cl).replace(ka,"")}function Cp(e,t,n){e=$(e),t=$e(t);var r=e.length;n=n===s?r:pn(M(n),0,r);var i=n;return n-=t.length,n>=0&&e.slice(n,i)==t}function Sp(e){return e=$(e),e&&xr.test(e)?e.replace(Rn,hl):e}function Ap(e){return e=$(e),e&&la.test(e)?e.replace(Qn,"\\$&"):e}var Ep=zn(function(e,t,n){return e+(n?"-":"")+t.toLowerCase()}),Tp=zn(function(e,t,n){return e+(n?" ":"")+t.toLowerCase()}),Rp=jo("toLowerCase");function Ip(e,t,n){e=$(e),t=M(t);var r=t?Mn(e):0;if(!t||r>=t)return e;var i=(t-r)/2;return Xr(Br(i),n)+e+Xr(Wr(i),n)}function Lp(e,t,n){e=$(e),t=M(t);var r=t?Mn(e):0;return t&&r<t?e+Xr(t-r,n):e}function Op(e,t,n){e=$(e),t=M(t);var r=t?Mn(e):0;return t&&r<t?Xr(t-r,n)+e:e}function Mp(e,t,n){return n||t==null?t=0:t&&(t=+t),Dl($(e).replace(pi,""),t||0)}function Pp(e,t,n){return(n?Se(e,t,n):t===s)?t=1:t=M(t),Ki($(e),t)}function Fp(){var e=arguments,t=$(e[0]);return e.length<3?t:t.replace(e[1],e[2])}var Wp=zn(function(e,t,n){return e+(n?"_":"")+t.toLowerCase()});function Bp(e,t,n){return n&&typeof n!="number"&&Se(e,t,n)&&(t=n=s),n=n===s?Oe:n>>>0,n?(e=$(e),e&&(typeof t=="string"||t!=null&&!gu(t))&&(t=$e(t),!t&&On(e))?Xt(tt(e),0,n):e.split(t,n)):[]}var Up=zn(function(e,t,n){return e+(n?" ":"")+mu(t)});function Dp(e,t,n){return e=$(e),n=n==null?0:pn(M(n),0,e.length),t=$e(t),e.slice(n,n+t.length)==t}function zp(e,t,n){var r=u.templateSettings;n&&Se(e,t,n)&&(t=s),e=$(e),t=si({},t,r,os);var i=si({},t.imports,r.imports,os),o=fe(i),a=Ii(i,o),l,c,_=0,v=t.interpolate||wr,x="__p += '",w=Oi((t.escape||wr).source+"|"+v.source+"|"+(v===an?va:wr).source+"|"+(t.evaluate||wr).source+"|$","g"),C="//# sourceURL="+(q.call(t,"sourceURL")?(t.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Ya+"]")+`
`;e.replace(w,function(T,W,D,Ge,Ae,qe){return D||(D=Ge),x+=e.slice(_,qe).replace(Sa,dl),W&&(l=!0,x+=`' +
__e(`+W+`) +
'`),Ae&&(c=!0,x+=`';
`+Ae+`;
__p += '`),D&&(x+=`' +
((__t = (`+D+`)) == null ? '' : __t) +
'`),_=qe+T.length,T}),x+=`';
`;var E=q.call(t,"variable")&&t.variable;if(!E)x=`with (obj) {
`+x+`
}
`;else if(ga.test(E))throw new L(Vt);x=(c?x.replace(Tn,""):x).replace(Zn,"$1").replace(mr,"$1;"),x="function("+(E||"obj")+`) {
`+(E?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(l?", __e = _.escape":"")+(c?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+x+`return __p
}`;var P=Vs(function(){return z(o,C+"return "+x).apply(s,a)});if(P.source=x,pu(P))throw P;return P}function Np(e){return $(e).toLowerCase()}function $p(e){return $(e).toUpperCase()}function kp(e,t,n){if(e=$(e),e&&(n||t===s))return oo(e);if(!e||!(t=$e(t)))return e;var r=tt(e),i=tt(t),o=so(r,i),a=ao(r,i)+1;return Xt(r,o,a).join("")}function Gp(e,t,n){if(e=$(e),e&&(n||t===s))return e.slice(0,fo(e)+1);if(!e||!(t=$e(t)))return e;var r=tt(e),i=ao(r,tt(t))+1;return Xt(r,0,i).join("")}function qp(e,t,n){if(e=$(e),e&&(n||t===s))return e.replace(pi,"");if(!e||!(t=$e(t)))return e;var r=tt(e),i=so(r,tt(t));return Xt(r,i).join("")}function Hp(e,t){var n=re,r=ye;if(Q(t)){var i="separator"in t?t.separator:i;n="length"in t?M(t.length):n,r="omission"in t?$e(t.omission):r}e=$(e);var o=e.length;if(On(e)){var a=tt(e);o=a.length}if(n>=o)return e;var l=n-Mn(r);if(l<1)return r;var c=a?Xt(a,0,l).join(""):e.slice(0,l);if(i===s)return c+r;if(a&&(l+=c.length-l),gu(i)){if(e.slice(l).search(i)){var _,v=c;for(i.global||(i=Oi(i.source,$(Ru.exec(i))+"g")),i.lastIndex=0;_=i.exec(v);)var x=_.index;c=c.slice(0,x===s?l:x)}}else if(e.indexOf($e(i),l)!=l){var w=c.lastIndexOf(i);w>-1&&(c=c.slice(0,w))}return c+r}function Kp(e){return e=$(e),e&&Tu.test(e)?e.replace(Xn,wl):e}var Yp=zn(function(e,t,n){return e+(n?" ":"")+t.toUpperCase()}),mu=jo("toUpperCase");function Qs(e,t,n){return e=$(e),t=n?s:t,t===s?gl(e)?Cl(e):ol(e):e.match(t)||[]}var Vs=F(function(e,t){try{return ze(e,s,t)}catch(n){return pu(n)?n:new L(n)}}),Zp=Tt(function(e,t){return Ye(t,function(n){n=pt(n),At(e,n,hu(e[n],e))}),e});function Xp(e){var t=e==null?0:e.length,n=A();return e=t?X(e,function(r){if(typeof r[1]!="function")throw new Ze(he);return[n(r[0]),r[1]]}):[],F(function(r){for(var i=-1;++i<t;){var o=e[i];if(ze(o[0],this,r))return ze(o[1],this,r)}})}function Jp(e){return bf(Je(e,Ee))}function xu(e){return function(){return e}}function Qp(e,t){return e==null||e!==e?t:e}var Vp=ts(),jp=ts(!0);function Be(e){return e}function wu(e){return Oo(typeof e=="function"?e:Je(e,Ee))}function eg(e){return Po(Je(e,Ee))}function tg(e,t){return Fo(e,Je(t,Ee))}var ng=F(function(e,t){return function(n){return or(n,e,t)}}),rg=F(function(e,t){return function(n){return or(e,n,t)}});function bu(e,t,n){var r=fe(t),i=kr(t,r);n==null&&!(Q(t)&&(i.length||!r.length))&&(n=t,t=e,e=this,i=kr(t,fe(t)));var o=!(Q(n)&&"chain"in n)||!!n.chain,a=It(e);return Ye(i,function(l){var c=t[l];e[l]=c,a&&(e.prototype[l]=function(){var _=this.__chain__;if(o||_){var v=e(this.__wrapped__),x=v.__actions__=Pe(this.__actions__);return x.push({func:c,args:arguments,thisArg:e}),v.__chain__=_,v}return c.apply(e,Gt([this.value()],arguments))})}),e}function ig(){return pe._===this&&(pe._=Il),this}function yu(){}function ug(e){return e=M(e),F(function(t){return Wo(t,e)})}var og=ji(X),sg=ji(to),ag=ji(Si);function js(e){return ou(e)?Ai(pt(e)):Df(e)}function lg(e){return function(t){return e==null?s:gn(e,t)}}var fg=rs(),cg=rs(!0);function Cu(){return[]}function Su(){return!1}function hg(){return{}}function dg(){return""}function pg(){return!0}function gg(e,t){if(e=M(e),e<1||e>G)return[];var n=Oe,r=we(e,Oe);t=A(t),e-=Oe;for(var i=Ri(r,t);++n<e;)t(n);return i}function _g(e){return O(e)?X(e,pt):ke(e)?[e]:Pe(xs($(e)))}function vg(e){var t=++Tl;return $(e)+t}var mg=Zr(function(e,t){return e+t},0),xg=eu("ceil"),wg=Zr(function(e,t){return e/t},1),bg=eu("floor");function yg(e){return e&&e.length?$r(e,Be,zi):s}function Cg(e,t){return e&&e.length?$r(e,A(t,2),zi):s}function Sg(e){return io(e,Be)}function Ag(e,t){return io(e,A(t,2))}function Eg(e){return e&&e.length?$r(e,Be,Gi):s}function Tg(e,t){return e&&e.length?$r(e,A(t,2),Gi):s}var Rg=Zr(function(e,t){return e*t},1),Ig=eu("round"),Lg=Zr(function(e,t){return e-t},0);function Og(e){return e&&e.length?Ti(e,Be):0}function Mg(e,t){return e&&e.length?Ti(e,A(t,2)):0}return u.after=ed,u.ary=Ls,u.assign=$d,u.assignIn=qs,u.assignInWith=si,u.assignWith=kd,u.at=Gd,u.before=Os,u.bind=hu,u.bindAll=Zp,u.bindKey=Ms,u.castArray=hd,u.chain=Ts,u.chunk=bc,u.compact=yc,u.concat=Cc,u.cond=Xp,u.conforms=Jp,u.constant=xu,u.countBy=Oh,u.create=qd,u.curry=Ps,u.curryRight=Fs,u.debounce=Ws,u.defaults=Hd,u.defaultsDeep=Kd,u.defer=td,u.delay=nd,u.difference=Sc,u.differenceBy=Ac,u.differenceWith=Ec,u.drop=Tc,u.dropRight=Rc,u.dropRightWhile=Ic,u.dropWhile=Lc,u.fill=Oc,u.filter=Ph,u.flatMap=Bh,u.flatMapDeep=Uh,u.flatMapDepth=Dh,u.flatten=Cs,u.flattenDeep=Mc,u.flattenDepth=Pc,u.flip=rd,u.flow=Vp,u.flowRight=jp,u.fromPairs=Fc,u.functions=jd,u.functionsIn=ep,u.groupBy=zh,u.initial=Bc,u.intersection=Uc,u.intersectionBy=Dc,u.intersectionWith=zc,u.invert=np,u.invertBy=rp,u.invokeMap=$h,u.iteratee=wu,u.keyBy=kh,u.keys=fe,u.keysIn=We,u.map=ti,u.mapKeys=up,u.mapValues=op,u.matches=eg,u.matchesProperty=tg,u.memoize=ri,u.merge=sp,u.mergeWith=Hs,u.method=ng,u.methodOf=rg,u.mixin=bu,u.negate=ii,u.nthArg=ug,u.omit=ap,u.omitBy=lp,u.once=id,u.orderBy=Gh,u.over=og,u.overArgs=ud,u.overEvery=sg,u.overSome=ag,u.partial=du,u.partialRight=Bs,u.partition=qh,u.pick=fp,u.pickBy=Ks,u.property=js,u.propertyOf=lg,u.pull=Gc,u.pullAll=As,u.pullAllBy=qc,u.pullAllWith=Hc,u.pullAt=Kc,u.range=fg,u.rangeRight=cg,u.rearg=od,u.reject=Yh,u.remove=Yc,u.rest=sd,u.reverse=fu,u.sampleSize=Xh,u.set=hp,u.setWith=dp,u.shuffle=Jh,u.slice=Zc,u.sortBy=jh,u.sortedUniq=th,u.sortedUniqBy=nh,u.split=Bp,u.spread=ad,u.tail=rh,u.take=ih,u.takeRight=uh,u.takeRightWhile=oh,u.takeWhile=sh,u.tap=yh,u.throttle=ld,u.thru=ei,u.toArray=$s,u.toPairs=Ys,u.toPairsIn=Zs,u.toPath=_g,u.toPlainObject=Gs,u.transform=pp,u.unary=fd,u.union=ah,u.unionBy=lh,u.unionWith=fh,u.uniq=ch,u.uniqBy=hh,u.uniqWith=dh,u.unset=gp,u.unzip=cu,u.unzipWith=Es,u.update=_p,u.updateWith=vp,u.values=kn,u.valuesIn=mp,u.without=ph,u.words=Qs,u.wrap=cd,u.xor=gh,u.xorBy=_h,u.xorWith=vh,u.zip=mh,u.zipObject=xh,u.zipObjectDeep=wh,u.zipWith=bh,u.entries=Ys,u.entriesIn=Zs,u.extend=qs,u.extendWith=si,bu(u,u),u.add=mg,u.attempt=Vs,u.camelCase=yp,u.capitalize=Xs,u.ceil=xg,u.clamp=xp,u.clone=dd,u.cloneDeep=gd,u.cloneDeepWith=_d,u.cloneWith=pd,u.conformsTo=vd,u.deburr=Js,u.defaultTo=Qp,u.divide=wg,u.endsWith=Cp,u.eq=rt,u.escape=Sp,u.escapeRegExp=Ap,u.every=Mh,u.find=Fh,u.findIndex=bs,u.findKey=Yd,u.findLast=Wh,u.findLastIndex=ys,u.findLastKey=Zd,u.floor=bg,u.forEach=Rs,u.forEachRight=Is,u.forIn=Xd,u.forInRight=Jd,u.forOwn=Qd,u.forOwnRight=Vd,u.get=_u,u.gt=md,u.gte=xd,u.has=tp,u.hasIn=vu,u.head=Ss,u.identity=Be,u.includes=Nh,u.indexOf=Wc,u.inRange=wp,u.invoke=ip,u.isArguments=mn,u.isArray=O,u.isArrayBuffer=wd,u.isArrayLike=Fe,u.isArrayLikeObject=ee,u.isBoolean=bd,u.isBuffer=Jt,u.isDate=yd,u.isElement=Cd,u.isEmpty=Sd,u.isEqual=Ad,u.isEqualWith=Ed,u.isError=pu,u.isFinite=Td,u.isFunction=It,u.isInteger=Us,u.isLength=ui,u.isMap=Ds,u.isMatch=Rd,u.isMatchWith=Id,u.isNaN=Ld,u.isNative=Od,u.isNil=Pd,u.isNull=Md,u.isNumber=zs,u.isObject=Q,u.isObjectLike=j,u.isPlainObject=hr,u.isRegExp=gu,u.isSafeInteger=Fd,u.isSet=Ns,u.isString=oi,u.isSymbol=ke,u.isTypedArray=$n,u.isUndefined=Wd,u.isWeakMap=Bd,u.isWeakSet=Ud,u.join=Nc,u.kebabCase=Ep,u.last=Ve,u.lastIndexOf=$c,u.lowerCase=Tp,u.lowerFirst=Rp,u.lt=Dd,u.lte=zd,u.max=yg,u.maxBy=Cg,u.mean=Sg,u.meanBy=Ag,u.min=Eg,u.minBy=Tg,u.stubArray=Cu,u.stubFalse=Su,u.stubObject=hg,u.stubString=dg,u.stubTrue=pg,u.multiply=Rg,u.nth=kc,u.noConflict=ig,u.noop=yu,u.now=ni,u.pad=Ip,u.padEnd=Lp,u.padStart=Op,u.parseInt=Mp,u.random=bp,u.reduce=Hh,u.reduceRight=Kh,u.repeat=Pp,u.replace=Fp,u.result=cp,u.round=Ig,u.runInContext=f,u.sample=Zh,u.size=Qh,u.snakeCase=Wp,u.some=Vh,u.sortedIndex=Xc,u.sortedIndexBy=Jc,u.sortedIndexOf=Qc,u.sortedLastIndex=Vc,u.sortedLastIndexBy=jc,u.sortedLastIndexOf=eh,u.startCase=Up,u.startsWith=Dp,u.subtract=Lg,u.sum=Og,u.sumBy=Mg,u.template=zp,u.times=gg,u.toFinite=Lt,u.toInteger=M,u.toLength=ks,u.toLower=Np,u.toNumber=je,u.toSafeInteger=Nd,u.toString=$,u.toUpper=$p,u.trim=kp,u.trimEnd=Gp,u.trimStart=qp,u.truncate=Hp,u.unescape=Kp,u.uniqueId=vg,u.upperCase=Yp,u.upperFirst=mu,u.each=Rs,u.eachRight=Is,u.first=Ss,bu(u,(function(){var e={};return ht(u,function(t,n){q.call(u.prototype,n)||(e[n]=t)}),e})(),{chain:!1}),u.VERSION=ce,Ye(["bind","bindKey","curry","curryRight","partial","partialRight"],function(e){u[e].placeholder=u}),Ye(["drop","take"],function(e,t){U.prototype[e]=function(n){n=n===s?1:se(M(n),0);var r=this.__filtered__&&!t?new U(this):this.clone();return r.__filtered__?r.__takeCount__=we(n,r.__takeCount__):r.__views__.push({size:we(n,Oe),type:e+(r.__dir__<0?"Right":"")}),r},U.prototype[e+"Right"]=function(n){return this.reverse()[e](n).reverse()}}),Ye(["filter","map","takeWhile"],function(e,t){var n=t+1,r=n==lt||n==en;U.prototype[e]=function(i){var o=this.clone();return o.__iteratees__.push({iteratee:A(i,3),type:n}),o.__filtered__=o.__filtered__||r,o}}),Ye(["head","last"],function(e,t){var n="take"+(t?"Right":"");U.prototype[e]=function(){return this[n](1).value()[0]}}),Ye(["initial","tail"],function(e,t){var n="drop"+(t?"":"Right");U.prototype[e]=function(){return this.__filtered__?new U(this):this[n](1)}}),U.prototype.compact=function(){return this.filter(Be)},U.prototype.find=function(e){return this.filter(e).head()},U.prototype.findLast=function(e){return this.reverse().find(e)},U.prototype.invokeMap=F(function(e,t){return typeof e=="function"?new U(this):this.map(function(n){return or(n,e,t)})}),U.prototype.reject=function(e){return this.filter(ii(A(e)))},U.prototype.slice=function(e,t){e=M(e);var n=this;return n.__filtered__&&(e>0||t<0)?new U(n):(e<0?n=n.takeRight(-e):e&&(n=n.drop(e)),t!==s&&(t=M(t),n=t<0?n.dropRight(-t):n.take(t-e)),n)},U.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},U.prototype.toArray=function(){return this.take(Oe)},ht(U.prototype,function(e,t){var n=/^(?:filter|find|map|reject)|While$/.test(t),r=/^(?:head|last)$/.test(t),i=u[r?"take"+(t=="last"?"Right":""):t],o=r||/^find/.test(t);i&&(u.prototype[t]=function(){var a=this.__wrapped__,l=r?[1]:arguments,c=a instanceof U,_=l[0],v=c||O(a),x=function(W){var D=i.apply(u,Gt([W],l));return r&&w?D[0]:D};v&&n&&typeof _=="function"&&_.length!=1&&(c=v=!1);var w=this.__chain__,C=!!this.__actions__.length,E=o&&!w,P=c&&!C;if(!o&&v){a=P?a:new U(this);var T=e.apply(a,l);return T.__actions__.push({func:ei,args:[x],thisArg:s}),new Xe(T,w)}return E&&P?e.apply(this,l):(T=this.thru(x),E?r?T.value()[0]:T.value():T)})}),Ye(["pop","push","shift","sort","splice","unshift"],function(e){var t=Er[e],n=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",r=/^(?:pop|shift)$/.test(e);u.prototype[e]=function(){var i=arguments;if(r&&!this.__chain__){var o=this.value();return t.apply(O(o)?o:[],i)}return this[n](function(a){return t.apply(O(a)?a:[],i)})}}),ht(U.prototype,function(e,t){var n=u[t];if(n){var r=n.name+"";q.call(Bn,r)||(Bn[r]=[]),Bn[r].push({name:t,func:n})}}),Bn[Yr(s,K).name]=[{name:"wrapper",func:s}],U.prototype.clone=Hl,U.prototype.reverse=Kl,U.prototype.value=Yl,u.prototype.at=Ch,u.prototype.chain=Sh,u.prototype.commit=Ah,u.prototype.next=Eh,u.prototype.plant=Rh,u.prototype.reverse=Ih,u.prototype.toJSON=u.prototype.valueOf=u.prototype.value=Lh,u.prototype.first=u.prototype.head,jn&&(u.prototype[jn]=Th),u}),Pn=Sl();fn?((fn.exports=Pn)._=Pn,wi._=Pn):pe._=Pn}).call(p_)})(pr,pr.exports)),pr.exports}var sa=g_();function __(mt,I,s){const ce=J(null),ot=J(!1),wn=J(0),he=J(""),Vt=J([]),xt=`progressive-guidance-${mt}-${I}`,Pt=()=>{try{const B=localStorage.getItem(xt);if(!B)return[];const N=JSON.parse(B);return Array.isArray(N)?N.filter(re=>typeof re=="string"&&re.length>0):[]}catch{return[]}},k=B=>{try{localStorage.setItem(xt,JSON.stringify(Array.from(new Set(B))))}catch{}},Ee=()=>{try{localStorage.removeItem(xt)}catch{}},Te=async()=>{const B=Pt();try{await fetch(vt("projects.manual-editor.progressive-guidance.steps",{project:mt,chapter:I}),{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.content||""},body:JSON.stringify({completed_step_ids:B})})}catch(N){console.error("Failed to persist completed steps:",N)}},He=sa.debounce(Te,400),st=B=>{try{const re=new DOMParser().parseFromString(B||"","text/html");return Array.from(re.querySelectorAll("h1,h2,h3,h4,h5,h6")).map(Bt=>(Bt.textContent||"").trim()).filter(Boolean).slice(0,20)}catch{return[]}},wt=B=>{try{const ye=(new DOMParser().parseFromString(B||"","text/html").body?.textContent||"").replace(/\s+/g," ").trim();return ye.length<=2e3?ye:ye.slice(-2e3)}catch{return(B||"").slice(-2e3)}};if(s){ce.value=s;const B=Array.isArray(s.completed_step_ids)&&s.completed_step_ids.length?s.completed_step_ids:(s.next_steps||[]).filter(N=>N.completed).map(N=>N.id);B.length&&(Vt.value=B,k(B))}const ae=async(B,N)=>{if(B.word_count===void 0||B.word_count<0)return;const re=Date.now();if(!(re-wn.value<3e3)){ot.value=!0,wn.value=re;try{const ye=Pt(),jt=st(N),Bt=wt(N),lt=await fetch(vt("projects.manual-editor.progressive-guidance",{project:mt,chapter:I}),{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.content||""},body:JSON.stringify({analysis:{...B,outline:jt,content_excerpt:Bt,completed_step_ids:ye}})});if(lt.ok){const me=await lt.json();ce.value=me,Array.isArray(me?.completed_step_ids)&&(Vt.value=me.completed_step_ids,k(Vt.value)),at();const en=JSON.stringify({stage:me?.stage,completion:me?.completion_percentage,tip:me?.contextual_tip,steps:(me?.next_steps||[]).map(le=>({t:le?.text,a:le?.action}))});if(en&&en!==he.value){he.value=en;const le=fi(me?.contextual_tip||"")+fi(me?.stage_label||"")+fi((me?.next_steps||[]).map(G=>G?.text).join(" "))+fi((me?.writing_milestones||[]).map(G=>G?.label).join(" "));le>0&&aa(le,"Manual editor: Progressive guidance","chapter").catch(G=>console.error("Failed to record word usage (progressive guidance):",G))}}}catch(ye){console.error("Failed to load progressive guidance:",ye)}finally{ot.value=!1}}},K=sa.debounce(ae,5e3),Ft=B=>{if(!ce.value)return;const N=ce.value.next_steps.find(re=>re.id===B);N&&(N.completed=!N.completed,Re(),He())},Re=()=>{if(!ce.value)return;const B=ce.value.next_steps.filter(N=>N.completed).map(N=>N.id);k(B)},at=()=>{if(!ce.value)return;const B=Pt();B.length&&ce.value.next_steps.forEach(N=>{B.includes(N.id)&&(N.completed=!0)})};return{guidance:ce,isLoadingGuidance:ot,requestGuidance:ae,debouncedRequestGuidance:K,toggleStep:Ft,clearCompletedSteps:()=>{ce.value&&(ce.value.next_steps.forEach(B=>{B.completed=!1}),Ee(),He())},getCompletionPercentage:()=>ce.value?.completion_percentage||0,getCurrentStageLabel:()=>ce.value?.stage_label||"Getting Started"}}const v_={class:"manual-editor h-screen flex flex-col bg-background dark:bg-background transition-colors duration-300"},m_={class:"md:hidden border-b h-14 px-3 flex justify-between items-center bg-background/80 backdrop-blur-md sticky top-0 z-50 transition-all duration-200"},x_={class:"flex items-center gap-2"},w_={class:"flex flex-col justify-center min-w-0 flex-1 mx-2"},b_={class:"items-center gap-2 text-xs font-medium text-muted-foreground mb-1 hidden sm:flex"},y_={class:"flex items-center gap-2 -ml-1"},C_={class:"font-bold text-base text-foreground truncate"},S_={class:"truncate"},A_={class:"flex gap-2 items-center"},E_={class:"hidden md:flex flex-col w-full z-50 sticky top-0 bg-background/80 backdrop-blur-md transition-all duration-200 border-b"},T_={class:"h-10 border-b border-border/40 flex items-center justify-center px-4 bg-background/60 relative"},R_={class:"flex items-center gap-2"},I_={class:"flex items-center gap-1 absolute right-4"},L_={class:"h-12 flex items-center justify-between px-4 bg-background/40"},O_={class:"flex items-center gap-3"},M_={class:"flex items-center gap-1"},P_={class:"flex items-center gap-2 px-3 py-1.5 rounded-full bg-muted/30 border border-border/40"},F_={class:"flex items-center gap-1.5"},W_={class:"text-xs font-medium text-muted-foreground"},B_={key:0,class:"flex items-center gap-1.5"},U_={key:1,class:"text-xs text-muted-foreground"},D_={class:"flex items-center gap-3"},z_={class:"flex items-center gap-1 bg-muted/30 p-1 rounded-full border border-border/40"},N_={class:"text-xs font-medium"},$_={class:"w-full bg-background border-b px-3 md:px-6 py-2 flex flex-col gap-1"},k_={class:"flex justify-between items-center text-xs text-muted-foreground mb-1"},G_={class:"flex-1 flex overflow-hidden"},q_={key:0,class:"w-[320px] border-r bg-background/80 backdrop-blur-xl border-border/50 shadow-xl z-20 overflow-y-auto custom-scrollbar"},H_={class:"p-4"},K_={class:"mb-3"},Y_={class:"text-xs text-muted-foreground"},Z_={class:"flex-1 overflow-auto p-2 md:p-6 bg-background"},X_={key:0,class:"w-1/2 flex flex-col bg-background overflow-hidden"},J_={class:"flex-1 overflow-y-auto custom-scrollbar"},Q_={key:0,class:"w-[400px] border-l bg-background/80 backdrop-blur-xl border-border/50 shadow-2xl z-20 overflow-y-auto custom-scrollbar flex flex-col"},V_={class:"p-4 space-y-6"},j_={key:0,class:"space-y-2"},ev={key:1,class:"space-y-2"},tv={class:"flex items-center justify-between"},nv={class:"text-xs whitespace-pre-wrap rounded-lg border border-border/50 bg-muted/30 p-3"},rv={class:"space-y-2"},iv={class:"border-t p-2 md:p-3 flex flex-col gap-3 text-xs md:text-sm bg-muted/30"},uv={class:"flex flex-col sm:flex-row justify-between gap-3 sm:gap-2 items-start sm:items-center w-full"},ov={class:"flex gap-2 md:gap-4 flex-wrap items-center"},sv={class:"text-muted-foreground"},av={class:"text-foreground"},lv={key:0,class:"text-muted-foreground hidden sm:inline"},fv={class:"text-foreground"},cv={key:1,class:"text-muted-foreground hidden md:inline"},hv={class:"text-foreground"},dv={key:2,class:"text-muted-foreground hidden lg:inline"},pv={class:"flex gap-2 items-center w-full sm:w-auto"},gv={class:"text-xs font-medium"},_v=Pg({__name:"ManualEditor",props:{project:{},chapter:{},allChapters:{},facultyChapters:{},currentSuggestion:{},contextAnalysis:{},initialProgressGuidance:{},chatHistory:{}},setup(mt){const I=mt,s=Fg();li(()=>s.props?.flash,p=>{p&&(p.success&&V.success(p.success),p.error&&V.error(p.error))},{deep:!0,immediate:!0});const{balance:ce,showPurchaseModal:ot,requiredWordsForModal:wn,actionDescriptionForModal:he,checkAndPrompt:Vt,closePurchaseModal:xt,refreshBalance:Pt}=e_(),{content:k,isDirty:Ee,isSaving:Te,lastSaved:He,updateContent:st,manualSave:wt}=$g(I.chapter,I.project.slug),{currentSuggestion:ae,currentAnalysis:K,isAnalyzing:Ft,saveSuggestion:Re,clearSuggestion:at,applySuggestion:Ue}=kg(I.chapter,I.project.slug,I.currentSuggestion,k,{onUsageRecorded:()=>Pt()}),{addToHistory:Wt}=Zg(I.chapter.content||""),Ie=J(!1),B=J(I.chapter.title||"");J(!1),J(!1),J("");const N=()=>{Ie.value=!Ie.value},re=p=>{st(p),Wt(p)};dr(()=>{const p=B.value?.trim(),m=k.value?.trim();return!!(p&&p.length>0&&m&&m.length>50)});const{guidance:ye,isLoadingGuidance:jt,debouncedRequestGuidance:Bt,toggleStep:lt}=__(I.project.slug,I.chapter.chapter_number,I.initialProgressGuidance||null),me=J(!1),en=()=>typeof window<"u"&&window.innerWidth<1024,le=(p,m)=>{try{const R=localStorage.getItem(p);return R!==null?R==="true":m}catch{return m}},G=J(en()),Le=J(le("manualEditor_showLeftSidebar",!G.value)),ue=J(le("manualEditor_showRightSidebar",!G.value)),Oe=J(""),bn=J(null),Ut=J(null),tn=J("");J(!1),J([]),J(!1);const xe=J(!0),nn=J((()=>{try{return localStorage.getItem("citationOperationMode")==="true"}catch{return!1}})()),rn=()=>{nn.value=!0,ue.value=!1;try{localStorage.setItem("citationOperationMode","true")}catch{}},un=()=>{nn.value=!1,ue.value=!0;try{localStorage.setItem("citationOperationMode","false")}catch{}},gr=J(!1),yn=async()=>{V.info("Fullscreen temporarily disabled")},Cn=()=>{Qt.visit(vt("projects.analysis",{project:I.project.slug}))};Au(()=>{}),ta(()=>{});const{isDark:Hn,toggle:De}=Wg(),on=dr(()=>{const p=K.value?.word_count??I.chapter.word_count,m=I.chapter.target_word_count||1e3;return Math.min(p/m*100,100)});dr(()=>Te.value?"Saving...":He.value?`Saved ${He.value}`:"Not saved");const ci=()=>{Le.value=!Le.value},et=()=>{ue.value=!ue.value};li(Le,p=>{if(!G.value)try{localStorage.setItem("manualEditor_showLeftSidebar",String(p))}catch(m){console.error("Failed to save left sidebar state:",m)}}),li(ue,p=>{if(!G.value)try{localStorage.setItem("manualEditor_showRightSidebar",String(p))}catch(m){console.error("Failed to save right sidebar state:",m)}});const Kn=p=>{(p.ctrlKey||p.metaKey)&&p.key==="s"&&(p.preventDefault(),$t())};Au(()=>{G.value=window.innerWidth<1024,G.value&&(Le.value=!1,ue.value=!1);const p=()=>{const m=G.value;G.value=window.innerWidth<1024,m!==G.value&&(G.value?(Le.value=!1,ue.value=!1):(Le.value=le("manualEditor_showLeftSidebar",!0),ue.value=le("manualEditor_showRightSidebar",!0)))};window.addEventListener("resize",p),window.addEventListener("keydown",Kn),ta(()=>{window.removeEventListener("resize",p),window.removeEventListener("keydown",Kn)})}),li(()=>K.value,p=>{p&&Bt({word_count:p.word_count,citation_count:p.citation_count,table_count:p.table_count,figure_count:p.figure_count,claim_count:p.claim_count,has_introduction:p.has_introduction,has_conclusion:p.has_conclusion,detected_issues:p.detected_issues,quality_metrics:p.quality_metrics},k.value)},{deep:!0}),Au(()=>{me.value||!((I.chapter.word_count||0)>50||k.value&&k.value.trim().length>200)||ye.value||(me.value=!0,Bt({word_count:I.chapter.word_count||0,citation_count:I.contextAnalysis?.citation_count||0,table_count:I.contextAnalysis?.table_count||0,figure_count:I.contextAnalysis?.figure_count||0,claim_count:I.contextAnalysis?.claim_count||0,has_introduction:I.contextAnalysis?.has_introduction||!1,has_conclusion:I.contextAnalysis?.has_conclusion||!1,detected_issues:I.contextAnalysis?.detected_issues||[],quality_metrics:I.contextAnalysis?.quality_metrics||{}},k.value||""))});const _r=p=>{re(p),V.success("Applied improved text")},Dt=p=>{if(Ut.value?.replaceSelection(p,bn.value||void 0)??!1){V.success("Expanded selection");return}re(`${k.value}

${p}`),V.success("Added expanded text")},Me=p=>{tn.value=p,xe.value=!0;try{navigator.clipboard?.writeText(p)}catch{}V.success("Citation suggestions ready")},zt=p=>{if(Ut.value?.replaceSelection(p,bn.value||void 0)??!1){V.success("Applied rephrased text");return}re(`${k.value}

${p}`),V.success("Added rephrased text")},Sn=p=>{const m=ye.value?.next_steps?.find(R=>R?.id===p);if(!(!m||!m.action||m.action==="none")){if(m.action==="open_citation_helper"){xe.value=!0,V.success("Citation helper opened"),lt(p);return}if(m.action==="insert_text"){const R=m?.payload?.text;if(typeof R!="string"||!R.trim()){V.error("Nothing to insert for this step");return}Ut.value?.replaceSelection(R.trim(),bn.value||void 0)??!1?V.success("Inserted into selection"):(re(`${k.value}

${R.trim()}`),V.success("Inserted into chapter")),lt(p)}}},vr=(p,m)=>Vt(p,m),Nt=async(p,m)=>{const R=Math.max(0,Math.round(p||0));R&&(await aa(R,m,"chapter",I.chapter.id),await Pt())},hi=async()=>{if(tn.value)try{await navigator.clipboard.writeText(tn.value),V.success("Copied citation suggestions")}catch{V.error("Could not copy citation suggestions")}},bt=dr(()=>I.allChapters.find(p=>p.chapter_number===I.chapter.chapter_number-1)),ft=dr(()=>I.allChapters.find(p=>p.chapter_number===I.chapter.chapter_number+1)),sn=(p,m)=>{if(m&&k.value){const Tn=m.trim(),Zn=document.createElement("div");Zn.innerHTML=k.value;const mr=Zn.textContent||Zn.innerText||"",Xn=mr.indexOf(Tn);if(Xn!==-1){const Rn=Xn+Tn.length,xr=mr.substring(Rn).match(/^[^.!?]*[.!?]/);let Jn;xr?Jn=Rn+xr[0].length:Jn=Rn;let de=0,an=0;const ct=k.value;for(;de<ct.length&&an<Jn;)if(ct[de]==="<"){for(;de<ct.length&&ct[de]!==">";)de++;de++}else if(ct[de]==="&"){const ln=ct.indexOf(";",de);ln!==-1&&ln-de<10?(de=ln+1,an++):(de++,an++)}else de++,an++;if(de>0){const ln=ct.substring(0,de),di=ct.substring(de),Qn=`${ln} ${p}${di}`;re(Qn),V.success("Citation inserted at claim location");return}}}const R=Ut.value?.getCursorPosition?.();if(typeof R=="number"&&(Ut.value?.replaceTextAt?.({from:R,to:R},` ${p} `)??!1)){V.success("Citation inserted at cursor");return}re(`${k.value} ${p}`),V.success("Citation appended to content")},yt=p=>{Ee.value&&!confirm("You have unsaved changes. Are you sure you want to switch chapters?")||Qt.visit(vt("projects.manual-editor.show",{project:I.project.slug,chapter:p}))},An=()=>{const p=I.chapter.chapter_number+1;I.allChapters.find(R=>R.chapter_number===p)?yt(p):V.info("Please create the next chapter from the dashboard first.")},En=p=>{confirm("Are you sure you want to delete this chapter?")&&Qt.delete(vt("chapters.destroy",{project:I.project.slug,chapter:I.allChapters.find(m=>m.id===p)?.slug}),{onSuccess:()=>V.success("Chapter deleted")})},$t=async()=>{try{await wt(),V.success("Chapter saved successfully")}catch{V.error("Failed to save chapter")}},Yn=async()=>{console.log("🔵 [MARK COMPLETE] Function called"),console.log("🔵 [MARK COMPLETE] Current word count:",K.value?.word_count??I.chapter.word_count);try{console.log("🔵 [MARK COMPLETE] Saving chapter..."),await wt(),console.log("✅ [MARK COMPLETE] Chapter saved");const p=vt("projects.manual-editor.mark-complete",{project:I.project.slug,chapter:I.chapter.chapter_number});console.log("🔵 [MARK COMPLETE] Posting to:",p),Qt.post(p,{},{onSuccess:()=>{console.log("✅ [MARK COMPLETE] Request successful")},onError:m=>{console.error("❌ [MARK COMPLETE] Request failed:",m)}})}catch(p){console.error("❌ [MARK COMPLETE] Error:",p),V.error("Failed to save chapter before marking complete")}};return(p,m)=>(ne(),ut(Ug,null,[S(g(Bg),{title:`${p.chapter.title} - Manual Editor`},null,8,["title"]),y("div",v_,[y("header",m_,[y("div",x_,[S(g(ve),{variant:"ghost",size:"icon",class:"h-8 w-8 text-zinc-700 dark:text-zinc-300 hover:text-foreground",onClick:m[0]||(m[0]=R=>g(Qt).visit(g(vt)("projects.show",p.project.slug))),title:"Back to Project"},{default:ie(()=>[S(g(ia),{class:"w-4 h-4"})]),_:1}),S(g(Mt),{orientation:"vertical",class:"h-6"}),S(g(ve),{onClick:m[1]||(m[1]=R=>Le.value=!0),variant:"ghost",size:"icon",class:"h-8 w-8 lg:hidden text-muted-foreground hover:text-foreground",title:"Open Chapter Navigation"},{default:ie(()=>[S(g(n_),{class:"w-4 h-4"})]),_:1})]),y("div",w_,[y("div",b_,[y("span",{class:"hover:text-foreground transition-colors cursor-pointer truncate",onClick:m[2]||(m[2]=R=>g(Qt).visit(g(vt)("projects.show",p.project.slug)))},_e(p.project.title),1)]),y("div",y_,[y("div",C_,[y("span",S_,"Ch. "+_e(p.chapter.chapter_number),1)])])]),y("div",A_,[S(g(ve),{variant:"ghost",size:"icon",class:"h-8 w-8",onClick:$t,disabled:g(Te),title:"Save"},{default:ie(()=>[S(g(Eu),{class:"w-4 h-4"})]),_:1},8,["disabled"]),S(g(Mt),{orientation:"vertical",class:"h-6 mx-1 opacity-50"}),S(g(ve),{onClick:m[3]||(m[3]=R=>ue.value=!0),variant:"ghost",size:"icon",class:"h-8 w-8 text-muted-foreground hover:text-foreground",title:"Open Tools"},{default:ie(()=>[S(g(ua),{class:"w-4 h-4"})]),_:1})])]),y("div",E_,[y("div",T_,[y("div",R_,[y("h1",{class:"text-sm font-bold text-foreground cursor-pointer hover:text-primary transition-colors",onClick:m[4]||(m[4]=R=>g(Qt).visit(g(vt)("projects.show",p.project.slug)))},_e(p.project.title),1),S(g(Dg),{variant:"secondary",class:"h-5 px-2 text-[10px] rounded-full"},{default:ie(()=>[xn("Ch "+_e(p.chapter.chapter_number),1)]),_:1})]),y("div",I_,[bt.value?(ne(),gt(g(ve),{key:0,variant:"ghost",size:"sm",class:"h-6 px-2 text-zinc-500 hover:text-foreground gap-1 rounded-full text-[10px]",onClick:m[5]||(m[5]=R=>yt(bt.value.chapter_number)),title:`Previous: ${bt.value.title}`},{default:ie(()=>[S(g(r_),{class:"w-3 h-3"}),m[17]||(m[17]=xn(" Prev ",-1))]),_:1},8,["title"])):_t("",!0),ft.value?(ne(),gt(g(ve),{key:1,variant:"ghost",size:"sm",class:"h-6 px-2 text-zinc-500 hover:text-foreground gap-1 rounded-full text-[10px]",onClick:m[6]||(m[6]=R=>yt(ft.value.chapter_number)),title:`Next: ${ft.value.title}`},{default:ie(()=>[m[18]||(m[18]=xn(" Next ",-1)),S(g(i_),{class:"w-3 h-3"})]),_:1},8,["title"])):_t("",!0)])]),y("div",L_,[y("div",O_,[y("div",M_,[S(g(ve),{variant:"ghost",size:"icon",class:"h-8 w-8 text-zinc-700 dark:text-zinc-300 hover:text-foreground rounded-full",onClick:m[7]||(m[7]=R=>g(Qt).visit(g(vt)("projects.show",p.project.slug))),title:"Back to Project"},{default:ie(()=>[S(g(ia),{class:"w-4 h-4"})]),_:1}),m[19]||(m[19]=y("div",{class:"h-4 w-px bg-border/50 mx-1"},null,-1)),S(g(ve),{onClick:ci,variant:"ghost",size:"icon",class:Gn(["h-8 w-8 transition-all duration-300 rounded-full",Le.value?"text-primary":"text-zinc-700 dark:text-zinc-300 hover:text-foreground"]),title:"Toggle Chapter Navigation"},{default:ie(()=>[Le.value?(ne(),gt(g(u_),{key:0,class:"w-4 h-4"})):(ne(),gt(g(o_),{key:1,class:"w-4 h-4"}))]),_:1},8,["class"])]),m[21]||(m[21]=y("div",{class:"h-4 w-px bg-border/50"},null,-1)),y("div",P_,[y("div",F_,[y("div",{class:Gn(["w-2 h-2 rounded-full transition-colors duration-300",g(Ee)?"bg-amber-500 animate-pulse":"bg-emerald-500"])},null,2),y("span",W_,_e(g(Ee)?"Unsaved":"Saved"),1)]),S(g(Mt),{orientation:"vertical",class:"h-3"}),g(Ft)?(ne(),ut("div",B_,[S(g(s_),{class:"w-3 h-3 animate-spin text-primary"}),m[20]||(m[20]=y("span",{class:"text-xs text-muted-foreground"},"Analyzing",-1))])):(ne(),ut("div",U_,_e(g(K)?.word_count??p.chapter.word_count)+" words ",1))])]),m[24]||(m[24]=y("div",{class:"flex-1 px-4 min-w-0"},[y("div",{id:"manual-editor-toolbar",class:"mx-auto max-w-[950px]"})],-1)),y("div",D_,[y("div",z_,[S(g(ve),{variant:"ghost",size:"icon",class:"h-7 w-7 rounded-full text-zinc-700 dark:text-zinc-300 hover:text-foreground",onClick:g(De),title:g(Hn)?"Switch to Light Mode":"Switch to Dark Mode"},{default:ie(()=>[g(Hn)?(ne(),gt(g(a_),{key:0,class:"w-4 h-4"})):(ne(),gt(g(l_),{key:1,class:"w-4 h-4"}))]),_:1},8,["onClick","title"]),S(g(ve),{variant:"ghost",size:"icon",class:"h-7 w-7 rounded-full text-zinc-700 dark:text-zinc-300 hover:text-foreground",onClick:yn,title:gr.value?"Exit Full Screen":"Enter Full Screen"},{default:ie(()=>[gr.value?(ne(),gt(g(f_),{key:0,class:"w-4 h-4"})):(ne(),gt(g(Xg),{key:1,class:"w-4 h-4"}))]),_:1},8,["title"]),S(g(ve),{onClick:N,variant:"ghost",size:"icon",class:Gn(["h-7 w-7 rounded-full transition-all duration-300",Ie.value?"bg-background shadow-sm text-primary":"text-zinc-700 dark:text-zinc-300 hover:text-foreground"]),title:"Toggle AI Chat Mode"},{default:ie(()=>[S(g(ua),{class:"w-4 h-4"})]),_:1},8,["class"]),S(g(ve),{onClick:et,variant:"ghost",size:"icon",class:Gn(["h-7 w-7 rounded-full transition-all duration-300",ue.value?"bg-background shadow-sm text-primary":"text-zinc-700 dark:text-zinc-300 hover:text-foreground"]),title:"Toggle Tools Sidebar"},{default:ie(()=>[ue.value?(ne(),gt(g(Jg),{key:0,class:"w-4 h-4"})):(ne(),gt(g(Qg),{key:1,class:"w-4 h-4"}))]),_:1},8,["class"])]),m[23]||(m[23]=y("div",{class:"w-px h-4 bg-border/50"},null,-1)),S(Vg,{project:p.project,"current-chapter":p.chapter,"all-chapters":p.allChapters,size:"sm",variant:"outline",class:"h-9","button-class":"rounded-full bg-background/50"},null,8,["project","current-chapter","all-chapters"]),S(g(ve),{variant:"ghost",size:"sm",class:"h-9 gap-2 text-zinc-700 dark:text-zinc-300 hover:text-foreground rounded-full bg-background/50 border border-transparent hover:border-border/50",onClick:Cn,title:"Open bulk analysis"},{default:ie(()=>[S(g(c_),{class:"w-4 h-4"}),m[22]||(m[22]=y("span",{class:"text-xs font-medium"},"Analyze",-1))]),_:1}),S(g(ve),{variant:"outline",size:"sm",class:"h-9 gap-2 text-zinc-700 dark:text-zinc-300 hover:text-foreground rounded-full bg-background/50",onClick:$t,disabled:g(Te),title:"Save (Ctrl+S)"},{default:ie(()=>[S(g(Eu),{class:"w-4 h-4"}),y("span",N_,_e(g(Te)?"Saving...":"Save"),1)]),_:1},8,["disabled"])])])]),y("div",$_,[y("div",k_,[m[25]||(m[25]=y("span",{class:"font-medium"},"Writing Progress",-1)),y("span",null,_e(g(K)?.word_count??p.chapter.word_count)+" / "+_e(p.chapter.target_word_count)+" words",1)]),S(g(zg),{"model-value":on.value,class:"h-1.5"},null,8,["model-value"])]),y("div",G_,[S(na,{"enter-active-class":"transition-all duration-500 cubic-bezier(0.4, 0, 0.2, 1)","enter-from-class":"-ml-[320px] opacity-0","enter-to-class":"ml-0 opacity-100","leave-active-class":"transition-all duration-500 cubic-bezier(0.4, 0, 0.2, 1)","leave-from-class":"ml-0 opacity-100","leave-to-class":"-ml-[320px] opacity-0"},{default:ie(()=>[Le.value&&!G.value?(ne(),ut("aside",q_,[y("div",H_,[y("div",K_,[m[26]||(m[26]=y("h2",{class:"text-sm font-semibold text-foreground mb-1"},"Table of Contents",-1)),y("p",Y_,_e(p.allChapters.length)+" Chapters",1)]),S(Yg,{"all-chapters":p.allChapters,"current-chapter":p.chapter,project:p.project,outlines:p.project.outlines||[],"faculty-chapters":p.facultyChapters||[],"current-word-count":g(K)?.word_count||p.chapter.word_count,"target-word-count":p.chapter.target_word_count,"writing-quality-score":0,"chapter-content-length":g(k)?.length||0,onGoToChapter:yt,onGenerateNextChapter:An,onDeleteChapter:En},null,8,["all-chapters","current-chapter","project","outlines","faculty-chapters","current-word-count","target-word-count","chapter-content-length"])])])):_t("",!0)]),_:1}),y("div",{class:Gn(["flex-1 flex overflow-hidden",nn.value?"flex-row":"flex-col"])},[y("div",{class:Gn(["flex flex-col overflow-hidden",nn.value?"w-1/2 border-r border-border/50":"flex-1"])},[y("div",Z_,[S(Ng,{ref_key:"editorRef",ref:Ut,modelValue:g(k),"onUpdate:modelValue":re,"onUpdate:selectedText":m[8]||(m[8]=R=>Oe.value=R),"onUpdate:selectionRange":m[9]||(m[9]=R=>bn.value=R),"manual-mode":!0,"toolbar-teleport-target":G.value?"":"#manual-editor-toolbar",class:"min-h-full"},null,8,["modelValue","toolbar-teleport-target"])])],2),nn.value?(ne(),ut("div",X_,[y("div",J_,[S(ra,{"show-citation-helper":xe.value,"onUpdate:showCitationHelper":m[10]||(m[10]=R=>xe.value=R),"chapter-content":g(k),"chapter-id":p.chapter.id,"citation-operation-mode":!0,onInsertCitation:sn,onExitOperationMode:un},null,8,["show-citation-helper","chapter-content","chapter-id"])])])):_t("",!0)],2),S(na,{"enter-active-class":"transition-all duration-500 cubic-bezier(0.4, 0, 0.2, 1)","enter-from-class":"-mr-[400px] opacity-0","enter-to-class":"mr-0 opacity-100","leave-active-class":"transition-all duration-500 cubic-bezier(0.4, 0, 0.2, 1)","leave-from-class":"mr-0 opacity-100","leave-to-class":"-mr-[400px] opacity-0"},{default:ie(()=>[ue.value&&!G.value?(ne(),ut("aside",Q_,[y("div",V_,[g(ae)?(ne(),ut("div",j_,[S(Gg,{suggestion:g(ae),analysis:g(K),onSave:g(Re),onClear:g(at),onApply:g(Ue)},null,8,["suggestion","analysis","onSave","onClear","onApply"]),S(g(Mt),{class:"bg-border/50"})])):_t("",!0),S(qg,{guidance:g(ye),"is-loading":g(jt),"has-content":(g(K)?.word_count??p.chapter.word_count)>50,onToggleStep:g(lt),onGuidanceAction:Sn},null,8,["guidance","is-loading","has-content","onToggleStep"]),S(g(Mt),{class:"bg-border/50"}),S(Hg,{"project-slug":p.project.slug,"chapter-number":p.chapter.chapter_number,"selected-text":Oe.value,"chapter-content":g(k),"is-processing":g(Ft)||g(Te),"ensure-balance":vr,"on-usage":Nt,onTextImproved:_r,onTextExpanded:Dt,onCitationsSuggested:Me,onTextRephrased:zt,onOpenCitationHelper:m[11]||(m[11]=R=>xe.value=!0)},null,8,["project-slug","chapter-number","selected-text","chapter-content","is-processing"]),S(g(Mt),{class:"bg-border/50"}),tn.value?(ne(),ut("div",ev,[y("div",tv,[m[28]||(m[28]=y("h3",{class:"text-sm font-semibold text-foreground"},"Citation Suggestions",-1)),S(g(ve),{size:"sm",variant:"outline",onClick:hi},{default:ie(()=>[...m[27]||(m[27]=[xn(" Copy ",-1)])]),_:1})]),y("pre",nv,_e(tn.value),1),S(g(Mt),{class:"bg-border/50"})])):_t("",!0),y("div",rv,[S(ra,{"show-citation-helper":xe.value,"onUpdate:showCitationHelper":m[12]||(m[12]=R=>xe.value=R),"chapter-content":g(k),"chapter-id":p.chapter.id,onInsertCitation:sn,onEnterOperationMode:rn},null,8,["show-citation-helper","chapter-content","chapter-id"])]),S(g(Mt),{class:"bg-border/50"}),S(g(Mt),{class:"bg-border/50"})])])):_t("",!0)]),_:1}),S(Kg,{"show-left-sidebar":Le.value,"show-right-sidebar":ue.value,"is-mobile":G.value,"all-chapters":p.allChapters,"current-chapter":p.chapter,project:p.project,"faculty-chapters":p.facultyChapters,"current-word-count":g(K)?.word_count||p.chapter.word_count,"target-word-count":p.chapter.target_word_count,"chapter-content-length":g(k)?.length||0,"selected-text":Oe.value,"is-analyzing":g(Ft),"is-saving":g(Te),"current-suggestion":g(ae),"current-analysis":g(K),guidance:g(ye),"is-loading-guidance":g(jt),"chapter-content":g(k),"show-citation-helper":xe.value,"ensure-balance":vr,"on-usage":Nt,"onUpdate:showLeftSidebar":m[13]||(m[13]=R=>Le.value=R),"onUpdate:showRightSidebar":m[14]||(m[14]=R=>ue.value=R),"onUpdate:showCitationHelper":m[15]||(m[15]=R=>xe.value=R),onGoToChapter:yt,onGenerateNextChapter:An,onDeleteChapter:En,onSaveSuggestion:g(Re),onClearSuggestion:g(at),onApplySuggestion:g(Ue),onToggleStep:g(lt),onTextImproved:_r,onTextExpanded:Dt,onCitationsSuggested:Me,onTextRephrased:zt,onInsertCitation:sn},null,8,["show-left-sidebar","show-right-sidebar","is-mobile","all-chapters","current-chapter","project","faculty-chapters","current-word-count","target-word-count","chapter-content-length","selected-text","is-analyzing","is-saving","current-suggestion","current-analysis","guidance","is-loading-guidance","chapter-content","show-citation-helper","onSaveSuggestion","onClearSuggestion","onApplySuggestion","onToggleStep"])]),y("footer",iv,[y("div",uv,[y("div",ov,[y("span",sv,[m[29]||(m[29]=y("span",{class:"hidden sm:inline"},"Words: ",-1)),y("strong",av,_e(g(K)?.word_count??p.chapter.word_count),1),xn(" / "+_e(p.chapter.target_word_count),1)]),g(K)?(ne(),ut("span",lv,[m[30]||(m[30]=xn(" Citations: ",-1)),y("strong",fv,_e(g(K).citation_count),1)])):_t("",!0),g(K)?(ne(),ut("span",cv,[m[31]||(m[31]=xn(" Tables: ",-1)),y("strong",hv,_e(g(K).table_count),1)])):_t("",!0),g(K)?(ne(),ut("span",dv," Quality: "+_e(g(K).quality_metrics.reading_level),1)):_t("",!0)]),y("div",pv,[S(g(ve),{variant:"outline",size:"sm",class:"h-8 md:h-9 gap-2 flex-1 sm:flex-initial",onClick:$t,disabled:g(Te),title:"Save chapter"},{default:ie(()=>[S(g(Eu),{class:"w-3.5 h-3.5 md:w-4 md:h-4"}),y("span",gv,_e(g(Te)?"Saving...":"Save"),1)]),_:1},8,["disabled"]),S(g(ve),{variant:"default",size:"sm",class:"h-8 md:h-9 gap-2 flex-1 sm:flex-initial",onClick:Yn,disabled:g(Te),title:"Save and mark chapter as complete"},{default:ie(()=>[S(g(h_),{class:"w-3.5 h-3.5 md:w-4 md:h-4"}),m[32]||(m[32]=y("span",{class:"text-xs font-medium hidden sm:inline"},"Mark Complete",-1)),m[33]||(m[33]=y("span",{class:"text-xs font-medium sm:hidden"},"Complete",-1))]),_:1},8,["disabled"])])])]),S(t_,{open:g(ot),"current-balance":g(ce),"required-words":g(wn),action:g(he),"onUpdate:open":m[16]||(m[16]=R=>ot.value=R),onClose:g(xt)},null,8,["open","current-balance","required-words","action","onClose"]),S(g(jg),{position:"top-center"})])],64))}}),k0=d_(_v,[["__scopeId","data-v-5b4f55c9"]]);export{k0 as default};
