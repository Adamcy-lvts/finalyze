import{bt as X,bs as g,dG as z,ck as M,cn as c,co as d,cp as a,cr as o,cB as m,cs as r,cG as y,ct as u,bE as e,cq as s,gE as W,d$ as A,gg as H,cu as R,eG as Q,cS as h,df as E,fu as F,dw as V,dl as Z,dq as ee,dn as te,gF as se,dO as ae,cj as v,cl as O}from"./vendor-DwcF3VNb.js";import{a as oe}from"./AppLayout.vue_vue_type_script_setup_true_lang-CCpNTTCf.js";import{_ as f,a as _}from"./CardContent.vue_vue_type_script_setup_true_lang-ByVWGonT.js";import{_ as w}from"./CardDescription.vue_vue_type_script_setup_true_lang-DCwZv7vk.js";import{_ as C,a as S}from"./CardTitle.vue_vue_type_script_setup_true_lang-CANz9L_6.js";import{_ as $}from"./index-BpTO5Kag.js";import{_ as Y}from"./Input.vue_vue_type_script_setup_true_lang-CQe6L5n4.js";import{_ as G}from"./Label.vue_vue_type_script_setup_true_lang-BCx0cnBe.js";import{_ as N}from"./index-BU6y8D-V.js";import{_ as D,a as L}from"./index-cXKiD0GD.js";import{b as ne,c as le,d as re}from"./WordBalanceDisplay.vue_vue_type_script_setup_true_lang-I6wEMTX2.js";import{_ as de,a as ue,b as ie,c as ce,d as me,e as fe}from"./index-C-alpScW.js";import"./UserInfo.vue_vue_type_script_setup_true_lang-CpzsT-yS.js";import"./TooltipTrigger.vue_vue_type_script_setup_true_lang-C_drGNy-.js";import"./Sonner.vue_vue_type_script_setup_true_lang-kLZ_SglN.js";import"./AppLogo.vue_vue_type_script_setup_true_lang-CmpajE6J.js";import"./useAppearance-Cb8BgOEx.js";import"./useWordBalance-BbO0T_xW.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./PWAInstallPrompt.vue_vue_type_script_setup_true_lang-BLWBGKbF.js";const _e={class:"container mx-auto px-4 py-8 max-w-6xl"},pe={class:"mb-8"},be={class:"text-muted-foreground mt-1"},ge={class:"space-y-4"},ye={class:"space-y-2"},ve={class:"space-y-2"},ke={class:"flex gap-2"},xe={key:1,class:"p-4 rounded-lg bg-green-500/10 border border-green-500/20"},he={class:"text-lg font-semibold text-green-600"},we={class:"grid gap-4 md:grid-cols-4 mb-8"},Ce={class:"flex items-center gap-4"},Se={class:"p-3 rounded-xl bg-blue-500/10 text-blue-500"},$e={class:"text-2xl font-bold"},Ne={class:"text-xs text-muted-foreground"},Be={class:"flex items-center gap-4"},Te={class:"p-3 rounded-xl bg-green-500/10 text-green-500"},Re={class:"text-2xl font-bold"},Ee={class:"flex items-center gap-4"},Pe={class:"p-3 rounded-xl bg-yellow-500/10 text-yellow-500"},je={class:"text-2xl font-bold"},Ae={class:"flex items-center gap-4"},Fe={class:"p-3 rounded-xl bg-purple-500/10 text-purple-500"},Ve={class:"text-2xl font-bold"},Oe={class:"flex gap-2"},Ye={class:"text-sm text-muted-foreground mt-2"},Ge={class:"px-2 py-1 bg-muted rounded font-mono"},De={class:"grid gap-8 lg:grid-cols-2"},Le={key:0,class:"text-center py-8 text-muted-foreground"},Ue={key:1,class:"space-y-4"},qe={class:"font-medium"},Je={class:"text-sm text-muted-foreground"},Ie={class:"text-xs text-muted-foreground"},Ke={class:"text-right"},Xe={class:"font-semibold text-green-600"},ze={key:0,class:"text-center py-8 text-muted-foreground"},Me={key:1,class:"space-y-3"},We={class:"font-medium"},He={class:"text-sm text-muted-foreground"},Qe={class:"text-xs text-muted-foreground"},Ze={class:"text-right"},kt=X({__name:"Index",props:{data:{},banks:{},isEnabled:{type:Boolean}},setup(U){const B=U,k=g(!1),x=g(!1),b=g(null),p=g(null),i=z({bank_code:"",bank_name:"",account_number:"",account_name:""}),P=M(()=>B.banks.find(n=>n.code===i.bank_code)),T=g(!1),q=()=>{B.data.referral_link&&(navigator.clipboard.writeText(B.data.referral_link),k.value=!0,v.success("Referral link copied to clipboard!"),setTimeout(()=>{k.value=!1},2e3))},J=async()=>{if(!i.bank_code||i.account_number.length!==10){p.value="Please select a bank and enter a 10-digit account number";return}x.value=!0,p.value=null,b.value=null;try{const t=await(await fetch(O("referrals.verify-bank"),{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")||""},body:JSON.stringify({bank_code:i.bank_code,account_number:i.account_number})})).json();t.success?(b.value=t.account_name,i.account_name=t.account_name,i.bank_name=P.value?.name||"",v.success("Bank account verified!")):p.value=t.message||"Could not verify account"}catch{p.value="Failed to verify account. Please try again."}finally{x.value=!1}},I=async()=>{try{const t=await(await fetch(O("referrals.setup-bank"),{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")||""},body:JSON.stringify(i.data())})).json();t.success?(v.success("Bank account setup complete! You can now share your referral link."),window.location.reload()):v.error(t.message||"Failed to setup bank account. Please try again.")}catch{v.error("Failed to setup bank account. Please try again.")}},j=n=>new Date(n).toLocaleDateString("en-NG",{year:"numeric",month:"short",day:"numeric"}),K=n=>{switch(n){case"paid":return"bg-green-500/10 text-green-600 border-green-500/20";case"pending":return"bg-yellow-500/10 text-yellow-600 border-yellow-500/20";case"failed":return"bg-red-500/10 text-red-600 border-red-500/20";default:return"bg-gray-500/10 text-gray-600 border-gray-500/20"}};return(n,t)=>(d(),c(oe,{title:"Referral Program"},{default:a(()=>[o("div",_e,[o("div",pe,[t[3]||(t[3]=o("h1",{class:"text-3xl font-bold tracking-tight"},"Referral Program",-1)),o("p",be,[r(" Earn "+u(n.data.commission_rate)+"% commission on every purchase made by users you refer. ",1),n.data.has_custom_rate?(d(),c(e(N),{key:0,variant:"secondary",class:"ml-2"},{default:a(()=>[s(e(W),{class:"h-3 w-3 mr-1"}),t[2]||(t[2]=r(" VIP Rate ",-1))]),_:1})):y("",!0)])]),n.isEnabled?n.data.bank_setup_complete?(d(),m(h,{key:2},[o("div",we,[s(e(f),{class:"bg-card border-border/50"},{default:a(()=>[s(e(_),{class:"p-6"},{default:a(()=>[o("div",Ce,[o("div",Se,[s(e(Z),{class:"h-6 w-6"})]),o("div",null,[t[13]||(t[13]=o("p",{class:"text-sm text-muted-foreground"},"Total Referrals",-1)),o("p",$e,u(n.data.stats.total_referrals),1),o("p",Ne,u(n.data.stats.active_referrals)+" made purchases ",1)])])]),_:1})]),_:1}),s(e(f),{class:"bg-card border-border/50"},{default:a(()=>[s(e(_),{class:"p-6"},{default:a(()=>[o("div",Be,[o("div",Te,[s(e(ee),{class:"h-6 w-6"})]),o("div",null,[t[14]||(t[14]=o("p",{class:"text-sm text-muted-foreground"},"Total Earned",-1)),o("p",Re,u(n.data.stats.total_earned_formatted),1)])])]),_:1})]),_:1}),s(e(f),{class:"bg-card border-border/50"},{default:a(()=>[s(e(_),{class:"p-6"},{default:a(()=>[o("div",Ee,[o("div",Pe,[s(e(te),{class:"h-6 w-6"})]),o("div",null,[t[15]||(t[15]=o("p",{class:"text-sm text-muted-foreground"},"This Month",-1)),o("p",je,u(n.data.stats.this_month_formatted),1)])])]),_:1})]),_:1}),s(e(f),{class:"bg-card border-border/50"},{default:a(()=>[s(e(_),{class:"p-6"},{default:a(()=>[o("div",Ae,[o("div",Fe,[s(e(se),{class:"h-6 w-6"})]),o("div",null,[t[16]||(t[16]=o("p",{class:"text-sm text-muted-foreground"},"Commission Rate",-1)),o("p",Ve,u(n.data.commission_rate)+"%",1)])])]),_:1})]),_:1})]),s(e(f),{class:"mb-8 border-primary/20 bg-gradient-to-r from-primary/5 to-transparent"},{default:a(()=>[s(e(C),null,{default:a(()=>[s(e(S),null,{default:a(()=>[...t[17]||(t[17]=[r("Your Referral Link",-1)])]),_:1}),s(e(w),null,{default:a(()=>[r(" Share this link with friends. When they sign up and make a purchase, you earn "+u(n.data.commission_rate)+"%! ",1)]),_:1})]),_:1}),s(e(_),null,{default:a(()=>[o("div",Oe,[s(e(Y),{"model-value":n.data.referral_link||"",readonly:"",class:"flex-1 bg-background font-mono text-sm"},null,8,["model-value"]),s(e($),{onClick:q,variant:"outline"},{default:a(()=>[k.value?(d(),c(e(F),{key:0,class:"h-4 w-4 mr-2 text-green-500"})):(d(),c(e(ae),{key:1,class:"h-4 w-4 mr-2"})),r(" "+u(k.value?"Copied!":"Copy"),1)]),_:1})]),o("p",Ye,[t[18]||(t[18]=r(" Your referral code: ",-1)),o("code",Ge,u(n.data.referral_code),1)])]),_:1})]),_:1}),o("div",De,[s(e(f),{class:"border-border/50"},{default:a(()=>[s(e(C),null,{default:a(()=>[s(e(S),{class:"text-base"},{default:a(()=>[...t[19]||(t[19]=[r("Recent Earnings",-1)])]),_:1}),s(e(w),null,{default:a(()=>[...t[20]||(t[20]=[r("Your latest commission earnings",-1)])]),_:1})]),_:1}),s(e(_),null,{default:a(()=>[n.data.recent_earnings.length===0?(d(),m("div",Le," No earnings yet. Share your referral link to start earning! ")):(d(),m("div",Ue,[(d(!0),m(h,null,E(n.data.recent_earnings,l=>(d(),m("div",{key:l.id,class:"flex items-center justify-between p-3 rounded-lg bg-muted/50 border border-border/50"},[o("div",null,[o("p",qe,u(l.referee_name),1),o("p",Je,u(l.payment_formatted)+" purchase ",1),o("p",Ie,u(j(l.created_at)),1)]),o("div",Ke,[o("p",Xe,u(l.commission_formatted),1),s(e(N),{class:R(K(l.status)),variant:"outline"},{default:a(()=>[r(u(l.status),1)]),_:2},1032,["class"])])]))),128))]))]),_:1})]),_:1}),s(e(f),{class:"border-border/50"},{default:a(()=>[s(e(C),null,{default:a(()=>[s(e(S),{class:"text-base"},{default:a(()=>[...t[21]||(t[21]=[r("Your Referrals",-1)])]),_:1}),s(e(w),null,{default:a(()=>[...t[22]||(t[22]=[r("People who signed up with your link",-1)])]),_:1})]),_:1}),s(e(_),null,{default:a(()=>[n.data.referrals.length===0?(d(),m("div",ze," No referrals yet. Share your link to invite friends! ")):(d(),m("div",Me,[(d(!0),m(h,null,E(n.data.referrals,l=>(d(),m("div",{key:l.id,class:"flex items-center justify-between p-3 rounded-lg bg-muted/50 border border-border/50"},[o("div",null,[o("p",We,u(l.name),1),o("p",He,u(l.email),1),o("p",Qe," Joined "+u(j(l.joined_at)),1)]),o("div",Ze,[l.successful_payments_count>0?(d(),c(e(N),{key:0,class:"bg-green-500/10 text-green-600 border-green-500/20"},{default:a(()=>[r(u(l.successful_payments_count)+" purchase"+u(l.successful_payments_count>1?"s":""),1)]),_:2},1024)):(d(),c(e(N),{key:1,variant:"outline",class:"text-muted-foreground"},{default:a(()=>[...t[23]||(t[23]=[r(" No purchases ",-1)])]),_:1}))])]))),128))]))]),_:1})]),_:1})])],64)):(d(),c(e(f),{key:1,class:"max-w-2xl"},{default:a(()=>[s(e(C),null,{default:a(()=>[s(e(S),{class:"flex items-center gap-2"},{default:a(()=>[s(e(H),{class:"h-5 w-5"}),t[5]||(t[5]=r(" Setup Your Bank Account ",-1))]),_:1}),s(e(w),null,{default:a(()=>[...t[6]||(t[6]=[r(" To become a referrer and start earning commissions, you need to setup your bank account first. Your commissions will be automatically sent to this account. ",-1)])]),_:1})]),_:1}),s(e(_),{class:"space-y-6"},{default:a(()=>[o("div",ge,[o("div",ye,[s(e(G),null,{default:a(()=>[...t[7]||(t[7]=[r("Select Bank",-1)])]),_:1}),s(e(ne),{open:T.value,"onUpdate:open":t[0]||(t[0]=l=>T.value=l)},{default:a(()=>[s(e(le),{"as-child":""},{default:a(()=>[s(e($),{variant:"outline",role:"combobox",class:R(["w-full justify-between",!e(i).bank_code&&"text-muted-foreground"])},{default:a(()=>[r(u(P.value?.name??"Choose your bank")+" ",1),s(e(Q),{class:"ml-2 h-4 w-4 shrink-0 opacity-50"})]),_:1},8,["class"])]),_:1}),s(e(re),{class:"w-full p-0",align:"start"},{default:a(()=>[s(e(de),null,{default:a(()=>[s(e(ue),{placeholder:"Search bank..."}),s(e(ie),null,{default:a(()=>[...t[8]||(t[8]=[r("No bank found.",-1)])]),_:1}),s(e(ce),null,{default:a(()=>[s(e(me),null,{default:a(()=>[(d(!0),m(h,null,E(n.banks,l=>(d(),c(e(fe),{key:l.code,value:l.name,onSelect:()=>{e(i).bank_code=l.code,e(i).bank_name=l.name,T.value=!1}},{default:a(()=>[r(u(l.name)+" ",1),s(e(F),{class:R(["ml-auto h-4 w-4",l.code===e(i).bank_code?"opacity-100":"opacity-0"])},null,8,["class"])]),_:2},1032,["value","onSelect"]))),128))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["open"])]),o("div",ve,[s(e(G),null,{default:a(()=>[...t[9]||(t[9]=[r("Account Number",-1)])]),_:1}),o("div",ke,[s(e(Y),{modelValue:e(i).account_number,"onUpdate:modelValue":t[1]||(t[1]=l=>e(i).account_number=l),placeholder:"Enter 10-digit account number",maxlength:"10",class:"flex-1"},null,8,["modelValue"]),s(e($),{onClick:J,disabled:x.value||!e(i).bank_code||e(i).account_number.length!==10,variant:"outline"},{default:a(()=>[x.value?(d(),c(e(V),{key:0,class:"h-4 w-4 animate-spin mr-2"})):y("",!0),t[10]||(t[10]=r(" Verify ",-1))]),_:1},8,["disabled"])])]),p.value?(d(),c(e(D),{key:0,variant:"destructive"},{default:a(()=>[s(e(A),{class:"h-4 w-4"}),s(e(L),null,{default:a(()=>[r(u(p.value),1)]),_:1})]),_:1})):y("",!0),b.value?(d(),m("div",xe,[t[11]||(t[11]=o("p",{class:"text-sm text-muted-foreground"},"Account Name",-1)),o("p",he,u(b.value),1)])):y("",!0)]),s(e($),{onClick:I,disabled:!b.value||e(i).processing,class:"w-full"},{default:a(()=>[e(i).processing?(d(),c(e(V),{key:0,class:"h-4 w-4 animate-spin mr-2"})):y("",!0),t[12]||(t[12]=r(" Complete Setup & Get Referral Code ",-1))]),_:1},8,["disabled"])]),_:1})]),_:1})):(d(),c(e(D),{key:0,class:"mb-6"},{default:a(()=>[s(e(A),{class:"h-4 w-4"}),s(e(L),null,{default:a(()=>[...t[4]||(t[4]=[r(" The referral program is currently disabled. Please check back later. ",-1)])]),_:1})]),_:1}))])]),_:1}))}});export{kt as default};
