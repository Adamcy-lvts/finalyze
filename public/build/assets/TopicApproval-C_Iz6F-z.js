import{_ as b}from"./index-DdjhVIk5.js";import{_ as v,a as k}from"./CardContent.vue_vue_type_script_setup_true_lang-GJ3J8yz-.js";import{_ as j}from"./CardDescription.vue_vue_type_script_setup_true_lang-DyXuUrvM.js";import{_ as C,a as S}from"./CardTitle.vue_vue_type_script_setup_true_lang-DFeWFrL3.js";import{_ as G,d as M,a as q,b as z,c as V}from"./DialogTitle.vue_vue_type_script_setup_true_lang-BnSmbE7d.js";import{_ as X}from"./DialogFooter.vue_vue_type_script_setup_true_lang-CTPEAX6J.js";import{_ as H}from"./AppLayout.vue_vue_type_script_setup_true_lang-VsEI6pm_.js";import{_ as D}from"./SafeHtmlText.vue_vue_type_script_setup_true_lang-jg3k6Wm9.js";import{d as J,B as y,a as p,o as c,w as s,F as t,K as r,u as o,M as a,L as A,H as g,n as N,O as h}from"./app-qOMdRN8u.js";import{B as K,t as m}from"./index-hMoChnMN.js";import{A as W}from"./arrow-left-DTjOLoZF.js";import{C as T}from"./clock-CcEr-A_b.js";import{G as Y}from"./graduation-cap-BjsP0_B3.js";import{S as I}from"./school-CApKCfUc.js";import{U as Q}from"./user-Lwmu79wa.js";import{M as Z}from"./message-square-He0yAVC_.js";import{F as ee}from"./file-text-CxZ1T_wy.js";import{D as oe}from"./download-D0pf8t0T.js";import{S as te}from"./shield-check-Budkg0Kp.js";import{C as R}from"./circle-check-big-3HbniIo4.js";import{C as E}from"./circle-x-CFY4uDV6.js";import"./VisuallyHidden-NIevzlSJ.js";import"./useForwardExpose-B9GGfyTK.js";import"./index-D1ZM71Rt.js";import"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-BrIX0XIw.js";import"./x-DYtB_dSi.js";import"./UserInfo.vue_vue_type_script_setup_true_lang-BZGYvGeR.js";import"./coins-ChXKqGBP.js";import"./log-out-CuZiXC3R.js";import"./AppLogo.vue_vue_type_script_setup_true_lang-CPevuhWg.js";import"./plus-BK056iww.js";import"./chevron-right-o0YmRdmv.js";import"./Sonner.vue_vue_type_script_setup_true_lang-ByOjaXSV.js";import"./triangle-alert-CuEGQevP.js";import"./circle-check-uQUCCLJs.js";const re={class:"min-h-screen bg-gradient-to-b from-background via-background/95 to-muted/20"},se={class:"mx-auto max-w-4xl space-y-10 p-6 pb-20 lg:p-10"},le={class:"flex items-center justify-between"},ae={class:"flex h-8 w-8 items-center justify-center rounded-full bg-muted/50 group-hover:bg-primary/10 transition-colors mr-2"},ie={class:"space-y-4 text-center animate-in fade-in slide-in-from-bottom-4 duration-700"},ne={class:"mx-auto flex h-20 w-20 items-center justify-center rounded-2xl bg-gradient-to-br from-yellow-500/20 to-yellow-500/5 shadow-lg shadow-yellow-500/10 ring-1 ring-yellow-500/20"},de={class:"animate-in fade-in slide-in-from-bottom-6 duration-700 delay-100"},ue={class:"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-4"},pe={class:"p-6 relative"},ce={class:"mb-4 flex h-10 w-10 items-center justify-center rounded-xl bg-blue-500/10 text-blue-500 group-hover:scale-110 group-hover:bg-blue-500/20 transition-all duration-300"},ge={class:"space-y-1"},me={class:"font-bold text-lg leading-tight text-foreground"},fe={class:"p-6 relative"},ve={class:"mb-4 flex h-10 w-10 items-center justify-center rounded-xl bg-purple-500/10 text-purple-500 group-hover:scale-110 group-hover:bg-purple-500/20 transition-all duration-300"},be={class:"space-y-1"},he={class:"font-bold text-lg leading-tight text-foreground capitalize"},we={class:"p-6 relative"},xe={class:"mb-4 flex h-10 w-10 items-center justify-center rounded-xl bg-orange-500/10 text-orange-500 group-hover:scale-110 group-hover:bg-orange-500/20 transition-all duration-300"},ye={class:"space-y-1"},_e=["title"],ke={class:"p-6 relative"},je={class:"mb-4 flex h-10 w-10 items-center justify-center rounded-xl bg-green-500/10 text-green-500 group-hover:scale-110 group-hover:bg-green-500/20 transition-all duration-300"},Ce={class:"space-y-1"},Se={class:"font-bold text-lg leading-tight text-foreground"},Ae={class:"grid gap-8 md:grid-cols-1 animate-in fade-in slide-in-from-bottom-8 duration-700 delay-200"},Te={class:"flex items-center gap-3"},$e={class:"p-2 rounded-md bg-primary/10 text-primary"},Fe={class:"space-y-4"},Pe={class:"grid gap-6 md:grid-cols-2"},mo=J({__name:"TopicApproval",props:{project:{}},setup(U){const d=U,f=y(!1),w=y(!1),x=y(!1),n=y(null),B=async()=>{w.value=!0;try{const l=await fetch(route("topics.export-pdf",d.project.slug),{method:"GET",headers:{"X-Requested-With":"XMLHttpRequest",Accept:"application/pdf"}});if(!l.ok)throw new Error("Network response was not ok");const e=await l.blob(),i=window.URL.createObjectURL(e),u=document.createElement("a");u.href=i,u.download=`project_topic_proposal_${d.project.slug}.pdf`,document.body.appendChild(u),u.click(),window.URL.revokeObjectURL(i),document.body.removeChild(u),m("ðŸ“„ PDF Generated!",{description:"Topic proposal downloaded successfully. Share with your supervisor."})}catch(l){console.error("PDF Export error:",l),m("Export Failed",{description:"Could not generate PDF. Please try again."})}finally{w.value=!1}},$=l=>{n.value=l,x.value=!0},L=async()=>{if(n.value===null)return;const l=n.value;x.value=!1,f.value=!0;try{const i=await(await fetch(route("topics.approve",d.project.slug),{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")||""},body:JSON.stringify({approved:l})})).json();if(i.success)if(l){const u=i.redirect_route,F=i.redirect_url,P=i.mode==="auto"||u==="projects.writing";if(m(P?"Topic Approved!":"ðŸŽ‰ Topic Approved!",{description:P?"Auto mode selected. Jumping straight into the writing workspace.":"Perfect! Now let's set up your AI writing assistant based on your mode preference."}),F)h.visit(F);else if(u==="projects.writing"){const _=i.slug||d.project.slug;h.visit(route("projects.writing",_))}else{const _=i.slug||d.project.slug;h.visit(route("projects.guidance",_))}}else m("New Topic Needed",{description:"No problem! Let's find a topic that works better for your supervisor."}),h.visit(route("projects.topic-selection",d.project.slug))}catch{m("Error",{description:"Failed to update approval status. Please try again."})}finally{f.value=!1,n.value=null}},O=async()=>{try{h.post(route("projects.go-back-to-topic-selection",d.project.slug),{},{onSuccess:()=>{m("Success",{description:"Returned to topic selection"}),h.visit(route("projects.topic-selection",d.project.slug))},onError:()=>{m("Error",{description:"Failed to go back to topic selection. Please try again."})}})}catch{m("Error",{description:"Failed to go back to topic selection. Please try again."})}};return(l,e)=>(c(),p(H,{title:"Topic Approval"},{default:s(()=>[t("div",re,[t("div",se,[t("div",le,[r(o(b),{onClick:O,variant:"ghost",size:"sm",class:"group text-muted-foreground hover:text-foreground transition-colors"},{default:s(()=>[t("div",ae,[r(o(W),{class:"h-4 w-4 transition-transform group-hover:-translate-x-0.5"})]),e[4]||(e[4]=a(" Back to Topic Selection ",-1))]),_:1})]),t("div",ie,[t("div",ne,[r(o(T),{class:"h-10 w-10 text-yellow-600"})]),e[5]||(e[5]=t("div",{class:"space-y-2"},[t("h1",{class:"text-4xl font-bold tracking-tight sm:text-5xl bg-gradient-to-br from-foreground to-foreground/70 bg-clip-text text-transparent"}," Awaiting Supervisor Approval "),t("p",{class:"mx-auto max-w-2xl text-lg text-muted-foreground leading-relaxed"}," Your project topic is ready for review. Share it with your supervisor and update the status below. ")],-1))]),t("div",de,[t("div",ue,[l.project.field_of_study?(c(),p(o(v),{key:0,class:"group relative overflow-hidden border-border/50 bg-card/50 backdrop-blur-sm transition-all duration-300 hover:shadow-lg hover:shadow-primary/5 hover:border-primary/20 hover:-translate-y-1"},{default:s(()=>[e[7]||(e[7]=t("div",{class:"absolute -right-6 -top-6 h-24 w-24 rounded-full bg-blue-500/10 group-hover:bg-blue-500/20 transition-colors blur-2xl"},null,-1)),t("div",pe,[t("div",ce,[r(o(K),{class:"h-5 w-5"})]),t("div",ge,[e[6]||(e[6]=t("span",{class:"text-xs font-medium uppercase tracking-wider text-muted-foreground"},"Field of Study",-1)),t("div",me,g(l.project.field_of_study),1)])])]),_:1})):A("",!0),r(o(v),{class:"group relative overflow-hidden border-border/50 bg-card/50 backdrop-blur-sm transition-all duration-300 hover:shadow-lg hover:shadow-primary/5 hover:border-primary/20 hover:-translate-y-1"},{default:s(()=>[e[9]||(e[9]=t("div",{class:"absolute -right-6 -top-6 h-24 w-24 rounded-full bg-purple-500/10 group-hover:bg-purple-500/20 transition-colors blur-2xl"},null,-1)),t("div",fe,[t("div",ve,[r(o(Y),{class:"h-5 w-5"})]),t("div",be,[e[8]||(e[8]=t("span",{class:"text-xs font-medium uppercase tracking-wider text-muted-foreground"},"Academic Level",-1)),t("div",he,g(l.project.type),1)])])]),_:1}),r(o(v),{class:"group relative overflow-hidden border-border/50 bg-card/50 backdrop-blur-sm transition-all duration-300 hover:shadow-lg hover:shadow-primary/5 hover:border-primary/20 hover:-translate-y-1"},{default:s(()=>[e[11]||(e[11]=t("div",{class:"absolute -right-6 -top-6 h-24 w-24 rounded-full bg-orange-500/10 group-hover:bg-orange-500/20 transition-colors blur-2xl"},null,-1)),t("div",we,[t("div",xe,[r(o(I),{class:"h-5 w-5"})]),t("div",ye,[e[10]||(e[10]=t("span",{class:"text-xs font-medium uppercase tracking-wider text-muted-foreground"},"University",-1)),t("div",{class:"font-bold text-lg leading-tight text-foreground",title:l.project.full_university_name||l.project.university},g(l.project.full_university_name||l.project.university),9,_e)])])]),_:1}),r(o(v),{class:"group relative overflow-hidden border-border/50 bg-card/50 backdrop-blur-sm transition-all duration-300 hover:shadow-lg hover:shadow-primary/5 hover:border-primary/20 hover:-translate-y-1"},{default:s(()=>[e[13]||(e[13]=t("div",{class:"absolute -right-6 -top-6 h-24 w-24 rounded-full bg-green-500/10 group-hover:bg-green-500/20 transition-colors blur-2xl"},null,-1)),t("div",ke,[t("div",je,[r(o(Q),{class:"h-5 w-5"})]),t("div",Ce,[e[12]||(e[12]=t("span",{class:"text-xs font-medium uppercase tracking-wider text-muted-foreground"},"Supervisor",-1)),t("div",Se,g(l.project.supervisor_name||"Not assigned"),1)])])]),_:1})])]),t("div",Ae,[r(o(v),{class:"relative border-border/50 shadow-lg shadow-primary/5 overflow-hidden group"},{default:s(()=>[e[16]||(e[16]=t("div",{class:"absolute -right-20 -top-20 h-64 w-64 rounded-full bg-primary/5 transition-colors blur-3xl pointer-events-none"},null,-1)),e[17]||(e[17]=t("div",{class:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-transparent via-primary/50 to-transparent opacity-20"},null,-1)),r(o(C),{class:"pb-2 relative border-b border-border/40 bg-muted/10"},{default:s(()=>[t("div",Te,[t("div",$e,[r(o(Z),{class:"h-5 w-5"})]),t("div",null,[r(o(S),{class:"text-xl"},{default:s(()=>[...e[14]||(e[14]=[a("Selected Topic",-1)])]),_:1}),r(o(j),null,{default:s(()=>[...e[15]||(e[15]=[a("The topic currently pending approval",-1)])]),_:1})])])]),_:1}),r(o(k),{class:"p-6 md:p-8 relative"},{default:s(()=>[t("div",Fe,[l.project.title?(c(),p(D,{key:0,as:"h3",class:"text-2xl font-bold text-foreground leading-tight",content:l.project.title},null,8,["content"])):A("",!0),r(D,{as:"div",class:"prose prose-invert max-w-none text-muted-foreground leading-relaxed",content:l.project.topic},null,8,["content"])])]),_:1})]),_:1}),t("div",Pe,[r(o(v),{class:"group relative overflow-hidden border-border/50 bg-card/50 backdrop-blur-sm transition-all duration-300 hover:shadow-lg hover:border-blue-500/30 flex flex-col"},{default:s(()=>[e[20]||(e[20]=t("div",{class:"absolute -right-12 -top-12 h-40 w-40 rounded-full bg-blue-500/5 group-hover:bg-blue-500/10 transition-colors blur-3xl"},null,-1)),r(o(C),{class:"relative"},{default:s(()=>[r(o(S),{class:"flex items-center gap-2 text-lg group-hover:text-blue-500 transition-colors"},{default:s(()=>[r(o(ee),{class:"h-5 w-5 text-blue-500"}),e[18]||(e[18]=a(" Share with Supervisor ",-1))]),_:1}),r(o(j),null,{default:s(()=>[...e[19]||(e[19]=[a("Download a professional PDF proposal to submit to your supervisor. ",-1)])]),_:1})]),_:1}),r(o(k),{class:"mt-auto pt-0 relative"},{default:s(()=>[r(o(b),{onClick:B,disabled:w.value,size:"lg",variant:"outline",class:"w-full h-12 border-blue-200/20 hover:bg-blue-500/10 hover:text-blue-500 hover:border-blue-500/50 transition-all"},{default:s(()=>[w.value?(c(),p(o(T),{key:1,class:"mr-2 h-5 w-5 animate-spin"})):(c(),p(o(oe),{key:0,class:"mr-2 h-5 w-5"})),a(" "+g(w.value?"Generating PDF...":"Download Proposal PDF"),1)]),_:1},8,["disabled"])]),_:1})]),_:1}),r(o(v),{class:"group relative overflow-hidden border-border/50 bg-card/50 backdrop-blur-sm transition-all duration-300 hover:shadow-lg hover:border-green-500/30 flex flex-col"},{default:s(()=>[e[25]||(e[25]=t("div",{class:"absolute -right-12 -top-12 h-40 w-40 rounded-full bg-green-500/5 group-hover:bg-green-500/10 transition-colors blur-3xl"},null,-1)),r(o(C),{class:"relative"},{default:s(()=>[r(o(S),{class:"flex items-center gap-2 text-lg group-hover:text-green-500 transition-colors"},{default:s(()=>[r(o(te),{class:"h-5 w-5 text-green-600"}),e[21]||(e[21]=a(" Update Status ",-1))]),_:1}),r(o(j),null,{default:s(()=>[...e[22]||(e[22]=[a("Record your supervisor's decision to proceed.",-1)])]),_:1})]),_:1}),r(o(k),{class:"mt-auto pt-0 grid grid-cols-2 gap-3 relative"},{default:s(()=>[r(o(b),{onClick:e[0]||(e[0]=()=>$(!0)),disabled:f.value,class:"h-12 bg-green-600 hover:bg-green-700 text-white shadow-md shadow-green-600/20 transition-all hover:scale-[1.02]"},{default:s(()=>[r(o(R),{class:"mr-2 h-5 w-5"}),e[23]||(e[23]=a(" Approved ",-1))]),_:1},8,["disabled"]),r(o(b),{onClick:e[1]||(e[1]=()=>$(!1)),disabled:f.value,variant:"outline",class:"h-12 border-red-200/20 text-red-500 hover:bg-red-500/10 hover:border-red-500/50 hover:text-red-600 transition-all hover:scale-[1.02]"},{default:s(()=>[r(o(E),{class:"mr-2 h-5 w-5"}),e[24]||(e[24]=a(" Rejected ",-1))]),_:1},8,["disabled"])]),_:1})]),_:1})])]),r(o(G),{open:x.value,"onUpdate:open":e[3]||(e[3]=i=>x.value=i)},{default:s(()=>[r(o(M),{class:"sm:max-w-md border-border/50 shadow-2xl"},{default:s(()=>[r(o(q),null,{default:s(()=>[r(o(z),{class:"flex items-center gap-2 text-xl"},{default:s(()=>[t("div",{class:N([n.value?"bg-green-100 text-green-600":"bg-red-100 text-red-600","p-2 rounded-full"])},[n.value?(c(),p(o(R),{key:0,class:"h-5 w-5"})):(c(),p(o(E),{key:1,class:"h-5 w-5"}))],2),a(" "+g(n.value?"Confirm Approval":"Confirm Rejection"),1)]),_:1}),r(o(V),{class:"pt-2 text-base"},{default:s(()=>[a(g(n.value?`Great news! Confirm that your supervisor has approved this topic. We will proceed to
                                the next stage.`:`Confirm that your supervisor wants you to change this topic. You will be redirected
                                to select a new one.`),1)]),_:1})]),_:1}),r(o(X),{class:"gap-2 sm:gap-0 mt-4"},{default:s(()=>[r(o(b),{onClick:e[2]||(e[2]=i=>x.value=!1),variant:"ghost"},{default:s(()=>[...e[26]||(e[26]=[a(" Cancel ",-1)])]),_:1}),r(o(b),{onClick:L,disabled:f.value,class:N([n.value?"bg-green-600 hover:bg-green-700":"bg-red-600 hover:bg-red-700","min-w-[100px]"])},{default:s(()=>[f.value?(c(),p(o(T),{key:0,class:"mr-2 h-4 w-4 animate-spin"})):A("",!0),a(" "+g(f.value?"Processing...":"Confirm"),1)]),_:1},8,["disabled","class"])]),_:1})]),_:1})]),_:1},8,["open"])])])]),_:1}))}});export{mo as default};
