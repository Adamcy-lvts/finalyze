# =============================================================================
# LARAVEL PULSE CONFIGURATION FOR PRODUCTION (Laravel Forge)
# =============================================================================
# Add these environment variables to your production .env file via Forge dashboard
# or via SSH: nano /home/forge/your-site/.env

# Enable/Disable Pulse (set to false to completely disable)
PULSE_ENABLED=true

# Dashboard path (access at yourdomain.com/pulse)
PULSE_PATH=pulse

# --- STORAGE CONFIGURATION ---
# Use Redis for better performance in production (Forge has Redis by default)
PULSE_INGEST_DRIVER=redis
PULSE_REDIS_CONNECTION=default

# How long to keep data (7 days is default, adjust as needed)
PULSE_STORAGE_KEEP="7 days"
PULSE_INGEST_KEEP="7 days"

# --- SERVER MONITORING ---
# Name shown in the Servers widget (use your server name)
PULSE_SERVER_NAME=finalyze-production

# Directories to monitor disk usage (colon-separated)
PULSE_SERVER_DIRECTORIES=/

# --- PERFORMANCE THRESHOLDS ---
# Slow request threshold in milliseconds (default: 1000ms = 1 second)
PULSE_SLOW_REQUESTS_THRESHOLD=1000

# Slow query threshold in milliseconds (default: 1000ms = 1 second)
PULSE_SLOW_QUERIES_THRESHOLD=1000

# Slow job threshold in milliseconds (default: 1000ms = 1 second)
PULSE_SLOW_JOBS_THRESHOLD=1000

# Slow outgoing request threshold in milliseconds
PULSE_SLOW_OUTGOING_REQUESTS_THRESHOLD=1000

# --- SAMPLE RATES FOR HIGH-TRAFFIC SITES ---
# Set sample rates between 0-1 (0.1 = 10% of requests sampled)
# Use 1 for full sampling on smaller sites, reduce for high-traffic
PULSE_CACHE_INTERACTIONS_SAMPLE_RATE=1
PULSE_EXCEPTIONS_SAMPLE_RATE=1
PULSE_QUEUES_SAMPLE_RATE=1
PULSE_SLOW_JOBS_SAMPLE_RATE=1
PULSE_SLOW_OUTGOING_REQUESTS_SAMPLE_RATE=1
PULSE_SLOW_QUERIES_SAMPLE_RATE=1
PULSE_SLOW_REQUESTS_SAMPLE_RATE=1
PULSE_USER_JOBS_SAMPLE_RATE=1
PULSE_USER_REQUESTS_SAMPLE_RATE=1

# =============================================================================
# FORGE PRODUCTION DEPLOYMENT STEPS
# =============================================================================
#
# 1. SSH into your Forge server:
#    ssh forge@your-server-ip
#
# 2. Navigate to your project:
#    cd /home/forge/your-site-name
#
# 3. Run the Pulse migration:
#    php artisan migrate
#
# 4. Add environment variables to .env (copy the vars above)
#
# 5. Clear config cache:
#    php artisan config:clear
#    php artisan cache:clear
#
# 6. SET UP PULSE:CHECK DAEMON (for server metrics):
#    In Forge Dashboard -> Server -> Daemons, add:
#    - Command: php /home/forge/your-site/artisan pulse:check
#    - User: forge
#    - Directory: /home/forge/your-site
#
# 7. SET UP PULSE:WORK DAEMON (optional, for async ingestion):
#    In Forge Dashboard -> Server -> Daemons, add:
#    - Command: php /home/forge/your-site/artisan pulse:work
#    - User: forge
#    - Directory: /home/forge/your-site
#
# 8. Add to Scheduler (in app/Console/Kernel.php or routes/console.php):
#    $schedule->command('pulse:clear')->dailyAt('03:00');
#
# 9. Access the dashboard at: https://yourdomain.com/pulse
#    (Only users with 'admin' role can access)
#
